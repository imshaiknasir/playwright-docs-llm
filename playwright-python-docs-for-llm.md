# THIS DOCUMENT CONTAINS THE COMPLETE DOCUMENTATION FOR PLAYWRIGHT PYTHON.



# Getting started - Library

Getting started - Library
=========================

Installation[​](#installation "Direct link to Installation")
------------------------------------------------------------

### Pip[​](#pip "Direct link to Pip")

[![PyPI version](https://badge.fury.io/py/playwright.svg)](https://pypi.python.org/pypi/playwright/)

    pip install --upgrade pippip install playwrightplaywright install

### Conda[​](#conda "Direct link to Conda")

[![Anaconda version](https://img.shields.io/conda/v/microsoft/playwright)](https://anaconda.org/Microsoft/playwright)

    conda config --add channels conda-forgeconda config --add channels microsoftconda install playwrightplaywright install

These commands download the Playwright package and install browser binaries for Chromium, Firefox and WebKit. To modify this behavior see [installation parameters](/python/docs/browsers#install-browsers).

Usage[​](#usage "Direct link to Usage")
---------------------------------------

Once installed, you can `import` Playwright in a Python script, and launch any of the 3 browsers (`chromium`, `firefox` and `webkit`).

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    browser = p.chromium.launch()    page = browser.new_page()    page.goto("https://playwright.dev")    print(page.title())    browser.close()

Playwright supports two variations of the API: synchronous and asynchronous. If your modern project uses [asyncio](https://docs.python.org/3/library/asyncio.html), you should use async API:

    import asynciofrom playwright.async_api import async_playwrightasync def main():    async with async_playwright() as p:        browser = await p.chromium.launch()        page = await browser.new_page()        await page.goto("https://playwright.dev")        print(await page.title())        await browser.close()asyncio.run(main())

First script[​](#first-script "Direct link to First script")
------------------------------------------------------------

In our first script, we will navigate to `https://playwright.dev/` and take a screenshot in WebKit.

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    browser = p.webkit.launch()    page = browser.new_page()    page.goto("https://playwright.dev/")    page.screenshot(path="example.png")    browser.close()

By default, Playwright runs the browsers in headless mode. To see the browser UI, set [headless](/python/docs/api/class-browsertype#browser-type-launch-option-headless) option to `False`. You can also use [slow\_mo](/python/docs/api/class-browsertype#browser-type-launch-option-slow-mo) to slow down execution. Learn more in the debugging tools [section](/python/docs/debug).

    firefox.launch(headless=False, slow_mo=50)

Interactive mode (REPL)[​](#interactive-mode-repl "Direct link to Interactive mode (REPL)")
-------------------------------------------------------------------------------------------

You can launch the interactive python REPL:

    python

and then launch Playwright within it for quick experimentation:

    from playwright.sync_api import sync_playwrightplaywright = sync_playwright().start()# Use playwright.chromium, playwright.firefox or playwright.webkit# Pass headless=False to launch() to see the browser UIbrowser = playwright.chromium.launch()page = browser.new_page()page.goto("https://playwright.dev/")page.screenshot(path="example.png")browser.close()playwright.stop()

Async REPL such as `asyncio` REPL:

    python -m asyncio

    from playwright.async_api import async_playwrightplaywright = await async_playwright().start()browser = await playwright.chromium.launch()page = await browser.new_page()await page.goto("https://playwright.dev/")await page.screenshot(path="example.png")await browser.close()await playwright.stop()

Pyinstaller[​](#pyinstaller "Direct link to Pyinstaller")
---------------------------------------------------------

You can use Playwright with [Pyinstaller](https://www.pyinstaller.org/) to create standalone executables.

main.py

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    browser = p.chromium.launch()    page = browser.new_page()    page.goto("https://playwright.dev/")    page.screenshot(path="example.png")    browser.close()

If you want to bundle browsers with the executables:

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_BROWSERS_PATH=0 playwright install chromiumpyinstaller -F main.py

    $env:PLAYWRIGHT_BROWSERS_PATH="0"playwright install chromiumpyinstaller -F main.py

    set PLAYWRIGHT_BROWSERS_PATH=0playwright install chromiumpyinstaller -F main.py

note

Bundling the browsers with the executables will generate bigger binaries. It is recommended to only bundle the browsers you use.

Known issues[​](#known-issues "Direct link to Known issues")
------------------------------------------------------------

### `time.sleep()` leads to outdated state[​](#timesleep-leads-to-outdated-state "Direct link to timesleep-leads-to-outdated-state")

Most likely you don't need to wait manually, since Playwright has [auto-waiting](/python/docs/actionability). If you still rely on it, you should use `page.wait_for_timeout(5000)` instead of `time.sleep(5)` and it is better to not wait for a timeout at all, but sometimes it is useful for debugging. In these cases, use our wait (`wait_for_timeout`) method instead of the `time` module. This is because we internally rely on asynchronous operations and when using `time.sleep(5)` they can't get processed correctly.

### incompatible with `SelectorEventLoop` of `asyncio` on Windows[​](#incompatible-with-selectoreventloop-of-asyncio-on-windows "Direct link to incompatible-with-selectoreventloop-of-asyncio-on-windows")

Playwright runs the driver in a subprocess, so it requires `ProactorEventLoop` of `asyncio` on Windows because `SelectorEventLoop` does not supports async subprocesses.

On Windows Python 3.7, Playwright sets the default event loop to `ProactorEventLoop` as it is default on Python 3.8+.

### Threading[​](#threading "Direct link to Threading")

Playwright's API is not thread-safe. If you are using Playwright in a multi-threaded environment, you should create a playwright instance per thread. See [threading issue](https://github.com/microsoft/playwright-python/issues/623) for more details.

# Release notes

Release notes
=============

Version 1.52[​](#version-152 "Direct link to Version 1.52")
-----------------------------------------------------------

### Highlights[​](#highlights "Direct link to Highlights")

*   New method [expect(locator).to\_contain\_class()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-class) to ergonomically assert individual class names on the element.
    
          expect(page.get_by_role('listitem', name='Ship v1.52')).to_contain_class('done')
    
*   [Aria Snapshots](/python/docs/aria-snapshots) got two new properties: [`/children`](/python/docs/aria-snapshots#strict-matching) for strict matching and `/url` for links.
    
        expect(locator).to_match_aria_snapshot("""  - list    - /children: equal    - listitem: Feature A    - listitem:      - link "Feature B":        - /url: "https://playwright.dev"""")
    

### Miscellaneous[​](#miscellaneous "Direct link to Miscellaneous")

*   New option [max\_redirects](/python/docs/api/class-apirequest#api-request-new-context-option-max-redirects) in [api\_request.new\_context()](/python/docs/api/class-apirequest#api-request-new-context) to control the maximum number of redirects.
*   New option [ref](/python/docs/api/class-locator#locator-aria-snapshot-option-ref) in [locator.aria\_snapshot()](/python/docs/api/class-locator#locator-aria-snapshot) to generate reference for each element in the snapshot which can later be used to locate the element.
*   HTML reporter now supports _NOT filtering_ via `!@my-tag` or `!my-file.spec.ts` or `!p:my-project`.

### Breaking Changes[​](#breaking-changes "Direct link to Breaking Changes")

*   Base URL matching is not supported in [page.frame()](/python/docs/api/class-page#page-frame) anymore. We recommend migrating to [page.frame\_locator()](/python/docs/api/class-page#page-frame-locator) instead for having a more convenient API.
*   Glob URL patterns in methods like [page.route()](/python/docs/api/class-page#page-route) do not support `?` and `[]` anymore. We recommend using regular expressions instead.
*   Method [route.continue\_()](/python/docs/api/class-route#route-continue) does not allow to override the `Cookie` header anymore. If a `Cookie` header is provided, it will be ignored, and the cookie will be loaded from the browser's cookie store. To set custom cookies, use [browser\_context.add\_cookies()](/python/docs/api/class-browsercontext#browser-context-add-cookies).
*   macOS 13 is now deprecated and will no longer receive WebKit updates. Please upgrade to a more recent macOS version to continue benefiting from the latest WebKit improvements.

### Browser Versions[​](#browser-versions "Direct link to Browser Versions")

*   Chromium 136.0.7103.25
*   Mozilla Firefox 137.0
*   WebKit 18.4

This version was also tested against the following stable channels:

*   Google Chrome 135
*   Microsoft Edge 135

Version 1.51[​](#version-151 "Direct link to Version 1.51")
-----------------------------------------------------------

### Highlights[​](#highlights-1 "Direct link to Highlights")

*   New option [indexed\_db](/python/docs/api/class-browsercontext#browser-context-storage-state-option-indexed-db) for [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state) allows to save and restore IndexedDB contents. Useful when your application uses [IndexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) to store authentication tokens, like Firebase Authentication.
    
    Here is an example following the [authentication guide](/python/docs/auth#reusing-signed-in-state):
    
        # Save storage state into the file. Make sure to include IndexedDB.storage = await context.storage_state(path="state.json", indexed_db=True)# Create a new context with the saved storage state.context = await browser.new_context(storage_state="state.json")
    
*   New option [visible](/python/docs/api/class-locator#locator-filter-option-visible) for [locator.filter()](/python/docs/api/class-locator#locator-filter) allows matching only visible elements.
    
        # Ignore invisible todo items.todo_items = page.get_by_test_id("todo-item").filter(visible=True)# Check there are exactly 3 visible ones.await expect(todo_items).to_have_count(3)
    
*   New option `contrast` for methods [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) and [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) allows to emulate the `prefers-contrast` media feature.
    
*   New option [fail\_on\_status\_code](/python/docs/api/class-apirequest#api-request-new-context-option-fail-on-status-code) makes all fetch requests made through the [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") throw on response codes other than 2xx and 3xx.
    

### Browser Versions[​](#browser-versions-1 "Direct link to Browser Versions")

*   Chromium 134.0.6998.35
*   Mozilla Firefox 135.0
*   WebKit 18.4

This version was also tested against the following stable channels:

*   Google Chrome 133
*   Microsoft Edge 133

Version 1.50[​](#version-150 "Direct link to Version 1.50")
-----------------------------------------------------------

### Async Pytest Plugin[​](#async-pytest-plugin "Direct link to Async Pytest Plugin")

*   [Playwright's Pytest plugin](/python/docs/test-runners) now has support for [Async Fixtures](https://playwright.dev/python/docs/test-runners#async-fixtures).

### Miscellaneous[​](#miscellaneous-1 "Direct link to Miscellaneous")

*   Added method [expect(locator).to\_have\_accessible\_error\_message()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-error-message) to assert the Locator points to an element with a given [aria errormessage](https://w3c.github.io/aria/#aria-errormessage).

### UI updates[​](#ui-updates "Direct link to UI updates")

*   New button in Codegen for picking elements to produce aria snapshots.
*   Additional details (such as keys pressed) are now displayed alongside action API calls in traces.
*   Display of `canvas` content in traces is error-prone. Display is now disabled by default, and can be enabled via the `Display canvas content` UI setting.
*   `Call` and `Network` panels now display additional time information.

### Breaking[​](#breaking "Direct link to Breaking")

*   [expect(locator).to\_be\_editable()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-editable) and [locator.is\_editable()](/python/docs/api/class-locator#locator-is-editable) now throw if the target element is not `<input>`, `<select>`, or a number of other editable elements.

### Browser Versions[​](#browser-versions-2 "Direct link to Browser Versions")

*   Chromium 133.0.6943.16
*   Mozilla Firefox 134.0
*   WebKit 18.2

This version was also tested against the following stable channels:

*   Google Chrome 132
*   Microsoft Edge 132

Version 1.49[​](#version-149 "Direct link to Version 1.49")
-----------------------------------------------------------

### Aria snapshots[​](#aria-snapshots "Direct link to Aria snapshots")

New assertion [expect(locator).to\_match\_aria\_snapshot()](/python/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot) verifies page structure by comparing to an expected accessibility tree, represented as YAML.

    page.goto("https://playwright.dev")expect(page.locator('body')).to_match_aria_snapshot('''  - banner:    - heading /Playwright enables reliable/ [level=1]    - link "Get started"    - link "Star microsoft/playwright on GitHub"  - main:    - img "Browsers (Chromium, Firefox, WebKit)"    - heading "Any browser • Any platform • One API"''')

You can generate this assertion with [Test Generator](/python/docs/codegen) or by calling [locator.aria\_snapshot()](/python/docs/api/class-locator#locator-aria-snapshot).

Learn more in the [aria snapshots guide](/python/docs/aria-snapshots).

### Tracing groups[​](#tracing-groups "Direct link to Tracing groups")

New method [tracing.group()](/python/docs/api/class-tracing#tracing-group) allows you to visually group actions in the trace viewer.

    # All actions between group and group_end# will be shown in the trace viewer as a group.page.context.tracing.group("Open Playwright.dev > API")page.goto("https://playwright.dev/")page.get_by_role("link", name="API").click()page.context.tracing.group_end()

### Breaking: `chrome` and `msedge` channels switch to new headless mode[​](#breaking-chrome-and-msedge-channels-switch-to-new-headless-mode "Direct link to breaking-chrome-and-msedge-channels-switch-to-new-headless-mode")

This change affects you if you're using one of the following channels in your `playwright.config.ts`:

*   `chrome`, `chrome-dev`, `chrome-beta`, or `chrome-canary`
*   `msedge`, `msedge-dev`, `msedge-beta`, or `msedge-canary`

After updating to Playwright v1.49, run your test suite. If it still passes, you're good to go. If not, you will probably need to update your snapshots, and adapt some of your test code around PDF viewers and extensions. See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for more details.

### Try new Chromium headless[​](#try-new-chromium-headless "Direct link to Try new Chromium headless")

You can opt into the new headless mode by using `'chromium'` channel. As [official Chrome documentation puts it](https://developer.chrome.com/blog/chrome-headless-shell):

> New Headless on the other hand is the real Chrome browser, and is thus more authentic, reliable, and offers more features. This makes it more suitable for high-accuracy end-to-end web app testing or browser extension testing.

See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for the list of possible breakages you could encounter and more details on Chromium headless. Please file an issue if you see any problems after opting in.

    pytest test_login.py --browser-channel chromium

### Miscellaneous[​](#miscellaneous-2 "Direct link to Miscellaneous")

*   There will be no more updates for WebKit on Ubuntu 20.04 and Debian 11. We recommend updating your OS to a later version.
*   `<canvas>` elements inside a snapshot now draw a preview.
*   Python 3.8 is not supported anymore.

### Browser Versions[​](#browser-versions-3 "Direct link to Browser Versions")

*   Chromium 131.0.6778.33
*   Mozilla Firefox 132.0
*   WebKit 18.2

This version was also tested against the following stable channels:

*   Google Chrome 130
*   Microsoft Edge 130

Version 1.48[​](#version-148 "Direct link to Version 1.48")
-----------------------------------------------------------

### WebSocket routing[​](#websocket-routing "Direct link to WebSocket routing")

New methods [page.route\_web\_socket()](/python/docs/api/class-page#page-route-web-socket) and [browser\_context.route\_web\_socket()](/python/docs/api/class-browsercontext#browser-context-route-web-socket) allow to intercept, modify and mock WebSocket connections initiated in the page. Below is a simple example that mocks WebSocket communication by responding to a `"request"` with a `"response"`.

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")page.route_web_socket("/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

See [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute") for more details.

### UI updates[​](#ui-updates-1 "Direct link to UI updates")

*   New "copy" buttons for annotations and test location in the HTML report.
*   Route method calls like [route.fulfill()](/python/docs/api/class-route#route-fulfill) are not shown in the report and trace viewer anymore. You can see which network requests were routed in the network tab instead.
*   New "Copy as cURL" and "Copy as fetch" buttons for requests in the network tab.

### Miscellaneous[​](#miscellaneous-3 "Direct link to Miscellaneous")

*   New method [page.request\_gc()](/python/docs/api/class-page#page-request-gc) may help detect memory leaks.
*   Requests made by [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") now record detailed timing and security information in the HAR.

### Browser Versions[​](#browser-versions-4 "Direct link to Browser Versions")

*   Chromium 130.0.6723.19
*   Mozilla Firefox 130.0
*   WebKit 18.0

This version was also tested against the following stable channels:

*   Google Chrome 129
*   Microsoft Edge 129

Version 1.47[​](#version-147 "Direct link to Version 1.47")
-----------------------------------------------------------

### Network Tab improvements[​](#network-tab-improvements "Direct link to Network Tab improvements")

The Network tab in the trace viewer has several nice improvements:

*   filtering by asset type and URL
*   better display of query string parameters
*   preview of font assets

![Network tab now has filters](https://github.com/user-attachments/assets/4bd1b67d-90bd-438b-a227-00b9e86872e2)

### Miscellaneous[​](#miscellaneous-4 "Direct link to Miscellaneous")

*   The `mcr.microsoft.com/playwright/python:v1.47.0` now serves a Playwright image based on Ubuntu 24.04 Noble. To use the 22.04 jammy-based image, please use `mcr.microsoft.com/playwright/python:v1.47.0-jammy` instead.
*   The `:latest`/`:focal`/`:jammy` tag for Playwright Docker images is no longer being published. Pin to a specific version for better stability and reproducibility.
*   TLS client certificates can now be passed from memory by passing [client\_certificates.cert](/python/docs/api/class-browser#browser-new-context-option-client-certificates) and [client\_certificates.key](/python/docs/api/class-browser#browser-new-context-option-client-certificates) as bytes instead of file paths.
*   [no\_wait\_after](/python/docs/api/class-locator#locator-select-option-option-no-wait-after) in [locator.select\_option()](/python/docs/api/class-locator#locator-select-option) was deprecated.
*   We've seen reports of WebGL in Webkit misbehaving on GitHub Actions `macos-13`. We recommend upgrading GitHub Actions to `macos-14`.

### Browser Versions[​](#browser-versions-5 "Direct link to Browser Versions")

*   Chromium 129.0.6668.29
*   Mozilla Firefox 130.0
*   WebKit 18.0

This version was also tested against the following stable channels:

*   Google Chrome 128
*   Microsoft Edge 128

Version 1.46[​](#version-146 "Direct link to Version 1.46")
-----------------------------------------------------------

### TLS Client Certificates[​](#tls-client-certificates "Direct link to TLS Client Certificates")

Playwright now allows to supply client-side certificates, so that server can verify them, as specified by TLS Client Authentication.

You can provide client certificates as a parameter of [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) and [api\_request.new\_context()](/python/docs/api/class-apirequest#api-request-new-context). The following snippet sets up a client certificate for `https://example.com`:

    context = browser.new_context(    client_certificates=[        {            "origin": "https://example.com",            "certPath": "client-certificates/cert.pem",            "keyPath": "client-certificates/key.pem",        }    ],)

### Trace Viewer Updates[​](#trace-viewer-updates "Direct link to Trace Viewer Updates")

*   Content of text attachments is now rendered inline in the attachments pane.
*   New setting to show/hide routing actions like [route.continue\_()](/python/docs/api/class-route#route-continue).
*   Request method and status are shown in the network details tab.
*   New button to copy source file location to clipboard.
*   Metadata pane now displays the `base_url`.

### Miscellaneous[​](#miscellaneous-5 "Direct link to Miscellaneous")

*   New `maxRetries` option in [api\_request\_context.fetch()](/python/docs/api/class-apirequestcontext#api-request-context-fetch) which retries on the `ECONNRESET` network error.

### Browser Versions[​](#browser-versions-6 "Direct link to Browser Versions")

*   Chromium 128.0.6613.18
*   Mozilla Firefox 128.0
*   WebKit 18.0

This version was also tested against the following stable channels:

*   Google Chrome 127
*   Microsoft Edge 127

Version 1.45[​](#version-145 "Direct link to Version 1.45")
-----------------------------------------------------------

### Clock[​](#clock "Direct link to Clock")

Utilizing the new [Clock](/python/docs/api/class-clock "Clock") API allows to manipulate and control time within tests to verify time-related behavior. This API covers many common scenarios, including:

*   testing with predefined time;
*   keeping consistent time and timers;
*   monitoring inactivity;
*   ticking through time manually.

    # Initialize clock with some time before the test time and let the page load# naturally. `Date.now` will progress as the timers fire.page.clock.install(time=datetime.datetime(2024, 2, 2, 8, 0, 0))page.goto("http://localhost:3333")# Pretend that the user closed the laptop lid and opened it again at 10am.# Pause the time once reached that point.page.clock.pause_at(datetime.datetime(2024, 2, 2, 10, 0, 0))# Assert the page state.expect(page.get_by_test_id("current-time")).to_have_text("2/2/2024, 10:00:00 AM")# Close the laptop lid again and open it at 10:30am.page.clock.fast_forward("30:00")expect(page.get_by_test_id("current-time")).to_have_text("2/2/2024, 10:30:00 AM")

See [the clock guide](/python/docs/clock) for more details.

### Miscellaneous[​](#miscellaneous-6 "Direct link to Miscellaneous")

*   Method [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) now supports uploading a directory for `<input type=file webkitdirectory>` elements.
    
        page.get_by_label("Upload directory").set_input_files('mydir')
    
*   Multiple methods like [locator.click()](/python/docs/api/class-locator#locator-click) or [locator.press()](/python/docs/api/class-locator#locator-press) now support a `ControlOrMeta` modifier key. This key maps to `Meta` on macOS and maps to `Control` on Windows and Linux.
    
        # Press the common keyboard shortcut Control+S or Meta+S to trigger a "Save" operation.page.keyboard.press("ControlOrMeta+S")
    
*   New property `httpCredentials.send` in [api\_request.new\_context()](/python/docs/api/class-apirequest#api-request-new-context) that allows to either always send the `Authorization` header or only send it in response to `401 Unauthorized`.
    
*   Playwright now supports Chromium, Firefox and WebKit on Ubuntu 24.04.
    
*   v1.45 is the last release to receive WebKit update for macOS 12 Monterey. Please update macOS to keep using the latest WebKit.
    

### Browser Versions[​](#browser-versions-7 "Direct link to Browser Versions")

*   Chromium 127.0.6533.5
*   Mozilla Firefox 127.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 126
*   Microsoft Edge 126

Version 1.44[​](#version-144 "Direct link to Version 1.44")
-----------------------------------------------------------

### New APIs[​](#new-apis "Direct link to New APIs")

**Accessibility assertions**

*   [expect(locator).to\_have\_accessible\_name()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name) checks if the element has the specified accessible name:
    
        locator = page.get_by_role("button")expect(locator).to_have_accessible_name("Submit")
    
*   [expect(locator).to\_have\_accessible\_description()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description) checks if the element has the specified accessible description:
    
        locator = page.get_by_role("button")expect(locator).to_have_accessible_description("Upload a photo")
    
*   [expect(locator).to\_have\_role()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-role) checks if the element has the specified ARIA role:
    
        locator = page.get_by_test_id("save-button")expect(locator).to_have_role("button")
    

**Locator handler**

*   After executing the handler added with [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler), Playwright will now wait until the overlay that triggered the handler is not visible anymore. You can opt-out of this behavior with the new `no_wait_after` option.
*   You can use new `times` option in [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler) to specify maximum number of times the handler should be run.
*   The handler in [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler) now accepts the locator as argument.
*   New [page.remove\_locator\_handler()](/python/docs/api/class-page#page-remove-locator-handler) method for removing previously added locator handlers.

    locator = page.get_by_text("This interstitial covers the button")page.add_locator_handler(locator, lambda overlay: overlay.locator("#close").click(), times=3, no_wait_after=True)# Run your tests that can be interrupted by the overlay.# ...page.remove_locator_handler(locator)

**Miscellaneous options**

*   [expect(page).to\_have\_url()](/python/docs/api/class-pageassertions#page-assertions-to-have-url) now supports `ignore_case` [option](/python/docs/api/class-pageassertions#page-assertions-to-have-url-option-ignore-case).

### Browser Versions[​](#browser-versions-8 "Direct link to Browser Versions")

*   Chromium 125.0.6422.14
*   Mozilla Firefox 125.0.1
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 124
*   Microsoft Edge 124

Version 1.43[​](#version-143 "Direct link to Version 1.43")
-----------------------------------------------------------

### New APIs[​](#new-apis-1 "Direct link to New APIs")

*   Method [browser\_context.clear\_cookies()](/python/docs/api/class-browsercontext#browser-context-clear-cookies) now supports filters to remove only some cookies.
    
        # Clear all cookies.context.clear_cookies()# New: clear cookies with a particular name.context.clear_cookies(name="session-id")# New: clear cookies for a particular domain.context.clear_cookies(domain="my-origin.com")
    
*   New method [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame) converts a [Locator](/python/docs/api/class-locator "Locator") object to a [FrameLocator](/python/docs/api/class-framelocator "FrameLocator"). This can be useful when you have a [Locator](/python/docs/api/class-locator "Locator") object obtained somewhere, and later on would like to interact with the content inside the frame.
    
        locator = page.locator("iframe[name='embedded']")# ...frame_locator = locator.content_frameframe_locator.getByRole("button").click()
    
*   New method [frame\_locator.owner](/python/docs/api/class-framelocator#frame-locator-owner) converts a [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") object to a [Locator](/python/docs/api/class-locator "Locator"). This can be useful when you have a [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") object obtained somewhere, and later on would like to interact with the `iframe` element.
    
        frame_locator = page.frame_locator("iframe[name='embedded']")# ...locator = frame_locator.ownerexpect(locator).to_be_visible()
    
*   Conda builds are now published for macOS-arm64 and Linux-arm64.
    

### Browser Versions[​](#browser-versions-9 "Direct link to Browser Versions")

*   Chromium 124.0.6367.8
*   Mozilla Firefox 124.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 123
*   Microsoft Edge 123

Version 1.42[​](#version-142 "Direct link to Version 1.42")
-----------------------------------------------------------

### New Locator Handler[​](#new-locator-handler "Direct link to New Locator Handler")

New method [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler) registers a callback that will be invoked when specified element becomes visible and may block Playwright actions. The callback can get rid of the overlay. Here is an example that closes a cookie dialog when it appears.

    # Setup the handler.page.add_locator_handler(    page.get_by_role("heading", name="Hej! You are in control of your cookies."),    lambda: page.get_by_role("button", name="Accept all").click(),)# Write the test as usual.page.goto("https://www.ikea.com/")page.get_by_role("link", name="Collection of blue and white").click()expect(page.get_by_role("heading", name="Light and easy")).to_be_visible()

### New APIs[​](#new-apis-2 "Direct link to New APIs")

*   [page.pdf()](/python/docs/api/class-page#page-pdf) accepts two new options [tagged](/python/docs/api/class-page#page-pdf-option-tagged) and [outline](/python/docs/api/class-page#page-pdf-option-outline).

### Announcements[​](#announcements "Direct link to Announcements")

*   ⚠️ Ubuntu 18 is not supported anymore.

### Browser Versions[​](#browser-versions-10 "Direct link to Browser Versions")

*   Chromium 123.0.6312.4
*   Mozilla Firefox 123.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 122
*   Microsoft Edge 123

Version 1.41[​](#version-141 "Direct link to Version 1.41")
-----------------------------------------------------------

### New APIs[​](#new-apis-3 "Direct link to New APIs")

*   New method [page.unroute\_all()](/python/docs/api/class-page#page-unroute-all) removes all routes registered by [page.route()](/python/docs/api/class-page#page-route) and [page.route\_from\_har()](/python/docs/api/class-page#page-route-from-har). Optionally allows to wait for ongoing routes to finish, or ignore any errors from them.
*   New method [browser\_context.unroute\_all()](/python/docs/api/class-browsercontext#browser-context-unroute-all) removes all routes registered by [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [browser\_context.route\_from\_har()](/python/docs/api/class-browsercontext#browser-context-route-from-har). Optionally allows to wait for ongoing routes to finish, or ignore any errors from them.
*   New options [style](/python/docs/api/class-page#page-screenshot-option-style) in [page.screenshot()](/python/docs/api/class-page#page-screenshot) and [style](/python/docs/api/class-locator#locator-screenshot-option-style) in [locator.screenshot()](/python/docs/api/class-locator#locator-screenshot) to add custom CSS to the page before taking a screenshot.

### Browser Versions[​](#browser-versions-11 "Direct link to Browser Versions")

*   Chromium 121.0.6167.57
*   Mozilla Firefox 121.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 120
*   Microsoft Edge 120

Version 1.40[​](#version-140 "Direct link to Version 1.40")
-----------------------------------------------------------

### Test Generator Update[​](#test-generator-update "Direct link to Test Generator Update")

![Playwright Test Generator](https://github.com/microsoft/playwright/assets/9881434/e8d67e2e-f36d-4301-8631-023948d3e190)

New tools to generate assertions:

*   "Assert visibility" tool generates [expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible).
*   "Assert value" tool generates [expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value).
*   "Assert text" tool generates [expect(locator).to\_contain\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text).

Here is an example of a generated test with assertions:

    from playwright.sync_api import Page, expectdef test_example(page: Page) -> None:    page.goto("https://playwright.dev/")    page.get_by_role("link", name="Get started").click()    expect(page.get_by_label("Breadcrumbs").get_by_role("list")).to_contain_text("Installation")    expect(page.get_by_label("Search")).to_be_visible()    page.get_by_label("Search").click()    page.get_by_placeholder("Search docs").fill("locator")    expect(page.get_by_placeholder("Search docs")).to_have_value("locator");

### New APIs[​](#new-apis-4 "Direct link to New APIs")

*   Options [reason](/python/docs/api/class-page#page-close-option-reason) in [page.close()](/python/docs/api/class-page#page-close), [reason](/python/docs/api/class-browsercontext#browser-context-close-option-reason) in [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) and [reason](/python/docs/api/class-browser#browser-close-option-reason) in [browser.close()](/python/docs/api/class-browser#browser-close). Close reason is reported for all operations interrupted by the closure.
*   Option [firefox\_user\_prefs](/python/docs/api/class-browsertype#browser-type-launch-persistent-context-option-firefox-user-prefs) in [browser\_type.launch\_persistent\_context()](/python/docs/api/class-browsertype#browser-type-launch-persistent-context).

### Other Changes[​](#other-changes "Direct link to Other Changes")

*   Method [download.path()](/python/docs/api/class-download#download-path) throws an error for failed and cancelled downloads.

### Browser Versions[​](#browser-versions-12 "Direct link to Browser Versions")

*   Chromium 120.0.6099.28
*   Mozilla Firefox 119.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 119
*   Microsoft Edge 119

Version 1.39[​](#version-139 "Direct link to Version 1.39")
-----------------------------------------------------------

Evergreen browsers update.

### Browser Versions[​](#browser-versions-13 "Direct link to Browser Versions")

*   Chromium 119.0.6045.9
*   Mozilla Firefox 118.0.1
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 118
*   Microsoft Edge 118

Version 1.38[​](#version-138 "Direct link to Version 1.38")
-----------------------------------------------------------

### Trace Viewer Updates[​](#trace-viewer-updates-1 "Direct link to Trace Viewer Updates")

![Playwright Trace Viewer](https://github.com/microsoft/playwright/assets/746130/0c41e20d-c54b-4600-8ca8-1cbb6393ddef)

1.  Zoom into time range.
2.  Network panel redesign.

### New APIs[​](#new-apis-5 "Direct link to New APIs")

*   [browser\_context.on("weberror")](/python/docs/api/class-browsercontext#browser-context-event-web-error)
*   [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially)

### Deprecations[​](#deprecations "Direct link to Deprecations")

*   The following methods were deprecated: [page.type()](/python/docs/api/class-page#page-type), [frame.type()](/python/docs/api/class-frame#frame-type), [locator.type()](/python/docs/api/class-locator#locator-type) and [element\_handle.type()](/python/docs/api/class-elementhandle#element-handle-type). Please use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead which is much faster. Use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially) only if there is a special keyboard handling on the page, and you need to press keys one-by-one.

### Browser Versions[​](#browser-versions-14 "Direct link to Browser Versions")

*   Chromium 117.0.5938.62
*   Mozilla Firefox 117.0
*   WebKit 17.0

This version was also tested against the following stable channels:

*   Google Chrome 116
*   Microsoft Edge 116

Version 1.37[​](#version-137 "Direct link to Version 1.37")
-----------------------------------------------------------

### Highlights[​](#highlights-2 "Direct link to Highlights")

*   New [\--full-page-screenshot](/python/docs/test-runners#cli-arguments) command line flag allows taking a full page screenshot on failure.
*   It is now possible to override the context options for a single test by using the [browser\_context\_args](/python/docs/test-runners#fixtures) marker.
*   `pytest-playwright` is now also getting published [on Anaconda](https://anaconda.org/Microsoft/pytest-playwright/)

### 📚 Debian 12 Bookworm Support[​](#-debian-12-bookworm-support "Direct link to 📚 Debian 12 Bookworm Support")

Playwright now supports Debian 12 Bookworm on both x86\_64 and arm64 for Chromium, Firefox and WebKit. Let us know if you encounter any issues!

Linux support looks like this:

Ubuntu 20.04

Ubuntu 22.04

Debian 11

Debian 12

Chromium

✅

✅

✅

✅

WebKit

✅

✅

✅

✅

Firefox

✅

✅

✅

✅

### Browser Versions[​](#browser-versions-15 "Direct link to Browser Versions")

*   Chromium 116.0.5845.82
*   Mozilla Firefox 115.0
*   WebKit 17.0

This version was also tested against the following stable channels:

*   Google Chrome 115
*   Microsoft Edge 115

Version 1.36[​](#version-136 "Direct link to Version 1.36")
-----------------------------------------------------------

🏝️ Summer maintenance release.

### Browser Versions[​](#browser-versions-16 "Direct link to Browser Versions")

*   Chromium 115.0.5790.75
*   Mozilla Firefox 115.0
*   WebKit 17.0

This version was also tested against the following stable channels:

*   Google Chrome 114
*   Microsoft Edge 114

Version 1.35[​](#version-135 "Direct link to Version 1.35")
-----------------------------------------------------------

### Highlights[​](#highlights-3 "Direct link to Highlights")

*   New option `mask_color` for methods [page.screenshot()](/python/docs/api/class-page#page-screenshot) and [locator.screenshot()](/python/docs/api/class-locator#locator-screenshot) to change default masking color.
    
*   New `uninstall` CLI command to uninstall browser binaries:
    
        $ playwright uninstall # remove browsers installed by this installation$ playwright uninstall --all # remove all ever-install Playwright browsers
    

### Browser Versions[​](#browser-versions-17 "Direct link to Browser Versions")

*   Chromium 115.0.5790.13
*   Mozilla Firefox 113.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 114
*   Microsoft Edge 114

Version 1.34[​](#version-134 "Direct link to Version 1.34")
-----------------------------------------------------------

### Highlights[​](#highlights-4 "Direct link to Highlights")

*   New [locator.and\_()](/python/docs/api/class-locator#locator-and) to create a locator that matches both locators.
    
        button = page.get_by_role("button").and_(page.get_by_title("Subscribe"))
    
*   New events [browser\_context.on("console")](/python/docs/api/class-browsercontext#browser-context-event-console) and [browser\_context.on("dialog")](/python/docs/api/class-browsercontext#browser-context-event-dialog) to subscribe to any dialogs and console messages from any page from the given browser context. Use the new methods [console\_message.page](/python/docs/api/class-consolemessage#console-message-page) and [dialog.page](/python/docs/api/class-dialog#dialog-page) to pin-point event source.
    

### Browser Versions[​](#browser-versions-18 "Direct link to Browser Versions")

*   Chromium 114.0.5735.26
*   Mozilla Firefox 113.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 113
*   Microsoft Edge 113

Version 1.33[​](#version-133 "Direct link to Version 1.33")
-----------------------------------------------------------

### Locators Update[​](#locators-update "Direct link to Locators Update")

*   Use [locator.or\_()](/python/docs/api/class-locator#locator-or) to create a locator that matches either of the two locators. Consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly:
    
        new_email = page.get_by_role("button", name="New email")dialog = page.get_by_text("Confirm security settings")expect(new_email.or_(dialog)).is_visible()if (dialog.is_visible()):  page.get_by_role("button", name="Dismiss").click()new_email.click()
    
*   Use new options [has\_not](/python/docs/api/class-locator#locator-filter-option-has-not) and [has\_not\_text](/python/docs/api/class-locator#locator-filter-option-has-not-text) in [locator.filter()](/python/docs/api/class-locator#locator-filter) to find elements that **do not match** certain conditions.
    
        row_locator = page.locator("tr")row_locator.filter(has_not_text="text in column 1").filter(    has_not=page.get_by_role("button", name="column 2 button")).screenshot()
    
*   Use new web-first assertion [expect(locator).to\_be\_attached()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-attached) to ensure that the element is present in the page's DOM. Do not confuse with the [expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible) that ensures that element is both attached & visible.
    

### New APIs[​](#new-apis-6 "Direct link to New APIs")

*   [locator.or\_()](/python/docs/api/class-locator#locator-or)
*   New option [has\_not](/python/docs/api/class-locator#locator-filter-option-has-not) in [locator.filter()](/python/docs/api/class-locator#locator-filter)
*   New option [has\_not\_text](/python/docs/api/class-locator#locator-filter-option-has-not-text) in [locator.filter()](/python/docs/api/class-locator#locator-filter)
*   [expect(locator).to\_be\_attached()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-attached)
*   New option [timeout](/python/docs/api/class-route#route-fetch-option-timeout) in [route.fetch()](/python/docs/api/class-route#route-fetch)

### ⚠️ Breaking change[​](#️-breaking-change "Direct link to ⚠️ Breaking change")

*   The `mcr.microsoft.com/playwright/python:v1.33.0` now serves a Playwright image based on Ubuntu Jammy. To use the focal-based image, please use `mcr.microsoft.com/playwright/python:v1.33.0-focal` instead.

### Browser Versions[​](#browser-versions-19 "Direct link to Browser Versions")

*   Chromium 113.0.5672.53
*   Mozilla Firefox 112.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 112
*   Microsoft Edge 112

Version 1.32[​](#version-132 "Direct link to Version 1.32")
-----------------------------------------------------------

### New APIs[​](#new-apis-7 "Direct link to New APIs")

*   Custom expect message, see [test assertions documentation](/python/docs/test-assertions#custom-expect-message).
*   New options [update\_mode](/python/docs/api/class-page#page-route-from-har-option-update-mode) and [update\_content](/python/docs/api/class-page#page-route-from-har-option-update-content) in [page.route\_from\_har()](/python/docs/api/class-page#page-route-from-har) and [browser\_context.route\_from\_har()](/python/docs/api/class-browsercontext#browser-context-route-from-har).
*   Chaining existing locator objects, see [locator docs](/python/docs/locators#matching-inside-a-locator) for details.
*   New option [name](/python/docs/api/class-tracing#tracing-start-chunk-option-name) in method [tracing.start\_chunk()](/python/docs/api/class-tracing#tracing-start-chunk).

### Browser Versions[​](#browser-versions-20 "Direct link to Browser Versions")

*   Chromium 112.0.5615.29
*   Mozilla Firefox 111.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 111
*   Microsoft Edge 111

Version 1.31[​](#version-131 "Direct link to Version 1.31")
-----------------------------------------------------------

### New APIs[​](#new-apis-8 "Direct link to New APIs")

*   New assertion [expect(locator).to\_be\_in\_viewport()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport) ensures that locator points to an element that intersects viewport, according to the [intersection observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).
    
        from playwright.sync_api import expectlocator = page.get_by_role("button")# Make sure at least some part of element intersects viewport.expect(locator).to_be_in_viewport()# Make sure element is fully outside of viewport.expect(locator).not_to_be_in_viewport()# Make sure that at least half of the element intersects viewport.expect(locator).to_be_in_viewport(ratio=0.5)
    

### Miscellaneous[​](#miscellaneous-7 "Direct link to Miscellaneous")

*   DOM snapshots in trace viewer can be now opened in a separate window.
*   New option [max\_redirects](/python/docs/api/class-route#route-fetch-option-max-redirects) for method [route.fetch()](/python/docs/api/class-route#route-fetch).
*   Playwright now supports Debian 11 arm64.
*   Official [docker images](/python/docs/docker) now include Node 18 instead of Node 16.

### Browser Versions[​](#browser-versions-21 "Direct link to Browser Versions")

*   Chromium 111.0.5563.19
*   Mozilla Firefox 109.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 110
*   Microsoft Edge 110

Version 1.30[​](#version-130 "Direct link to Version 1.30")
-----------------------------------------------------------

### Browser Versions[​](#browser-versions-22 "Direct link to Browser Versions")

*   Chromium 110.0.5481.38
*   Mozilla Firefox 108.0.2
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 109
*   Microsoft Edge 109

Version 1.29[​](#version-129 "Direct link to Version 1.29")
-----------------------------------------------------------

### New APIs[​](#new-apis-9 "Direct link to New APIs")

*   New method [route.fetch()](/python/docs/api/class-route#route-fetch) and new option `json` for [route.fulfill()](/python/docs/api/class-route#route-fulfill):
    
        def handle_route(route: Route):  # Fetch original settings.  response = route.fetch()  # Force settings theme to a predefined value.  json = response.json()  json["theme"] = "Solorized"  # Fulfill with modified data.  route.fulfill(json=json)page.route("**/api/settings", handle_route)
    
*   New method [locator.all()](/python/docs/api/class-locator#locator-all) to iterate over all matching elements:
    
        # Check all checkboxes!checkboxes = page.get_by_role("checkbox")for checkbox in checkboxes.all():  checkbox.check()
    
*   [locator.select\_option()](/python/docs/api/class-locator#locator-select-option) matches now by value or label:
    
        <select multiple>  <option value="red">Red</option>  <option value="green">Green</option>  <option value="blue">Blue</option></select>
    
        element.select_option("Red")
    

### Miscellaneous[​](#miscellaneous-8 "Direct link to Miscellaneous")

*   Option `postData` in method [route.continue\_()](/python/docs/api/class-route#route-continue) now supports [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") values.

### Browser Versions[​](#browser-versions-23 "Direct link to Browser Versions")

*   Chromium 109.0.5414.46
*   Mozilla Firefox 107.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 108
*   Microsoft Edge 108

Version 1.28[​](#version-128 "Direct link to Version 1.28")
-----------------------------------------------------------

### Playwright Tools[​](#playwright-tools "Direct link to Playwright Tools")

*   **Live Locators in CodeGen.** Generate a locator for any element on the page using "Explore" tool.

![Locator Explorer](https://user-images.githubusercontent.com/9798949/202293514-8e2eade6-c809-4b0a-864b-899dfcee3d84.png)

### New APIs[​](#new-apis-10 "Direct link to New APIs")

*   [locator.blur()](/python/docs/api/class-locator#locator-blur)
*   [locator.clear()](/python/docs/api/class-locator#locator-clear)

### Browser Versions[​](#browser-versions-24 "Direct link to Browser Versions")

*   Chromium 108.0.5359.29
*   Mozilla Firefox 106.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 107
*   Microsoft Edge 107

Version 1.27[​](#version-127 "Direct link to Version 1.27")
-----------------------------------------------------------

### Locators[​](#locators "Direct link to Locators")

With these new APIs writing locators is a joy:

*   [page.get\_by\_text()](/python/docs/api/class-page#page-get-by-text) to locate by text content.
*   [page.get\_by\_role()](/python/docs/api/class-page#page-get-by-role) to locate by [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
*   [page.get\_by\_label()](/python/docs/api/class-page#page-get-by-label) to locate a form control by associated label's text.
*   [page.get\_by\_test\_id()](/python/docs/api/class-page#page-get-by-test-id) to locate an element based on its `data-testid` attribute (other attribute can be configured).
*   [page.get\_by\_placeholder()](/python/docs/api/class-page#page-get-by-placeholder) to locate an input by placeholder.
*   [page.get\_by\_alt\_text()](/python/docs/api/class-page#page-get-by-alt-text) to locate an element, usually image, by its text alternative.
*   [page.get\_by\_title()](/python/docs/api/class-page#page-get-by-title) to locate an element by its title.

    page.get_by_label("User Name").fill("John")page.get_by_label("Password").fill("secret-password")page.get_by_role("button", name="Sign in").click()expect(page.get_by_text("Welcome, John!")).to_be_visible()

All the same methods are also available on [Locator](/python/docs/api/class-locator "Locator"), [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") and [Frame](/python/docs/api/class-frame "Frame") classes.

### Other highlights[​](#other-highlights "Direct link to Other highlights")

*   As announced in v1.25, Ubuntu 18 will not be supported as of Dec 2022. In addition to that, there will be no WebKit updates on Ubuntu 18 starting from the next Playwright release.

### Behavior Changes[​](#behavior-changes "Direct link to Behavior Changes")

*   [expect(locator).to\_have\_attribute()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute) with an empty value does not match missing attribute anymore. For example, the following snippet will succeed when `button` **does not** have a `disabled` attribute.
    
        expect(page.get_by_role("button")).to_have_attribute("disabled", "")
    

### Browser Versions[​](#browser-versions-25 "Direct link to Browser Versions")

*   Chromium 107.0.5304.18
*   Mozilla Firefox 105.0.1
*   WebKit 16.0

This version was also tested against the following stable channels:

*   Google Chrome 106
*   Microsoft Edge 106

Version 1.26[​](#version-126 "Direct link to Version 1.26")
-----------------------------------------------------------

### Assertions[​](#assertions "Direct link to Assertions")

*   New option `enabled` for [expect(locator).to\_be\_enabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-enabled).
*   [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) now pierces open shadow roots.
*   New option `editable` for [expect(locator).to\_be\_editable()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-editable).
*   New option `visible` for [expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible).

### Other highlights[​](#other-highlights-1 "Direct link to Other highlights")

*   New option `max_redirects` for [api\_request\_context.get()](/python/docs/api/class-apirequestcontext#api-request-context-get) and others to limit redirect count.
*   Python 3.11 is now supported.

### Behavior Change[​](#behavior-change "Direct link to Behavior Change")

A bunch of Playwright APIs already support the `wait_until: "domcontentloaded"` option. For example:

    page.goto("https://playwright.dev", wait_until="domcontentloaded")

Prior to 1.26, this would wait for all iframes to fire the `DOMContentLoaded` event.

To align with web specification, the `'domcontentloaded'` value only waits for the target frame to fire the `'DOMContentLoaded'` event. Use `wait_until="load"` to wait for all iframes.

### Browser Versions[​](#browser-versions-26 "Direct link to Browser Versions")

*   Chromium 106.0.5249.30
*   Mozilla Firefox 104.0
*   WebKit 16.0

This version was also tested against the following stable channels:

*   Google Chrome 105
*   Microsoft Edge 105

Version 1.25[​](#version-125 "Direct link to Version 1.25")
-----------------------------------------------------------

### Announcements[​](#announcements-1 "Direct link to Announcements")

*   🎁 We now ship Ubuntu 22.04 Jammy Jellyfish docker image: `mcr.microsoft.com/playwright/python:v1.34.0-jammy`.
*   🪦 This is the last release with macOS 10.15 support (deprecated as of 1.21).
*   ⚠️ Ubuntu 18 is now deprecated and will not be supported as of Dec 2022.

### Browser Versions[​](#browser-versions-27 "Direct link to Browser Versions")

*   Chromium 105.0.5195.19
*   Mozilla Firefox 103.0
*   WebKit 16.0

This version was also tested against the following stable channels:

*   Google Chrome 104
*   Microsoft Edge 104

Version 1.24[​](#version-124 "Direct link to Version 1.24")
-----------------------------------------------------------

### 🐂 Debian 11 Bullseye Support[​](#-debian-11-bullseye-support "Direct link to 🐂 Debian 11 Bullseye Support")

Playwright now supports Debian 11 Bullseye on x86\_64 for Chromium, Firefox and WebKit. Let us know if you encounter any issues!

Linux support looks like this:

| | Ubuntu 20.04 | Ubuntu 22.04 | Debian 11 | :--- | :---: | :---: | :---: | :---: | | Chromium | ✅ | ✅ | ✅ | | WebKit | ✅ | ✅ | ✅ | | Firefox | ✅ | ✅ | ✅ |

### New introduction docs[​](#new-introduction-docs "Direct link to New introduction docs")

We rewrote our Getting Started docs to be more end-to-end testing focused. Check them out on [playwright.dev](https://playwright.dev/python/docs/intro).

Version 1.23[​](#version-123 "Direct link to Version 1.23")
-----------------------------------------------------------

### Network Replay[​](#network-replay "Direct link to Network Replay")

Now you can record network traffic into a HAR file and re-use this traffic in your tests.

To record network into HAR file:

    npx playwright open --save-har=github.har.zip https://github.com/microsoft

Alternatively, you can record HAR programmatically:

*   Sync
*   Async

    context = browser.new_context(record_har_path="github.har.zip")# ... do stuff ...context.close()

    context = await browser.new_context(record_har_path="github.har.zip")# ... do stuff ...await context.close()

Use the new methods [page.route\_from\_har()](/python/docs/api/class-page#page-route-from-har) or [browser\_context.route\_from\_har()](/python/docs/api/class-browsercontext#browser-context-route-from-har) to serve matching responses from the [HAR](http://www.softwareishard.com/blog/har-12-spec/) file:

*   Sync
*   Async

    context.route_from_har("github.har.zip")

    await context.route_from_har("github.har.zip")

Read more in [our documentation](/python/docs/mock#mocking-with-har-files).

### Advanced Routing[​](#advanced-routing "Direct link to Advanced Routing")

You can now use [route.fallback()](/python/docs/api/class-route#route-fallback) to defer routing to other handlers.

Consider the following example:

*   Sync
*   Async

    # Remove a header from all requestsdef remove_header_handler(route: Route) -> None:    headers = route.request.all_headers()    if "if-none-match" in headers:        del headers["if-none-match"]    route.fallback(headers=headers)page.route("**/*", remove_header_handler)# Abort all imagesdef abort_images_handler(route: Route) -> None:    if route.request.resource_type == "image":        route.abort()    else:        route.fallback()page.route("**/*", abort_images_handler)

    # Remove a header from all requestsasync def remove_header_handler(route: Route) -> None:    headers = await route.request.all_headers()    if "if-none-match" in headers:        del headers["if-none-match"]    await route.fallback(headers=headers)await page.route("**/*", remove_header_handler)# Abort all imagesasync def abort_images_handler(route: Route) -> None:    if route.request.resource_type == "image":        await route.abort()    else:        await route.fallback()await page.route("**/*", abort_images_handler)

Note that the new methods [page.route\_from\_har()](/python/docs/api/class-page#page-route-from-har) and [browser\_context.route\_from\_har()](/python/docs/api/class-browsercontext#browser-context-route-from-har) also participate in routing and could be deferred to.

### Web-First Assertions Update[​](#web-first-assertions-update "Direct link to Web-First Assertions Update")

*   New method [expect(locator).to\_have\_values()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-values) that asserts all selected values of `<select multiple>` element.
*   Methods [expect(locator).to\_contain\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text) and [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) now accept `ignore_case` option.

### Miscellaneous[​](#miscellaneous-9 "Direct link to Miscellaneous")

*   If there's a service worker that's in your way, you can now easily disable it with a new context option `service_workers`:
    
    *   Sync
    *   Async
    
        context = browser.new_context(service_workers="block")page = context.new_page()
    
        context = await browser.new_context(service_workers="block")page = await context.new_page()
    
*   Using `.zip` path for `recordHar` context option automatically zips the resulting HAR:
    
    *   Sync
    *   Async
    
        context = browser.new_context(record_har_path="github.har.zip")
    
        context = await browser.new_context(record_har_path="github.har.zip")
    
*   If you intend to edit HAR by hand, consider using the `"minimal"` HAR recording mode that only records information that is essential for replaying:
    
    *   Sync
    *   Async
    
        context = browser.new_context(record_har_mode="minimal", record_har_path="har.har")
    
        context = await browser.new_context(record_har_mode="minimal", record_har_path="har.har")
    
*   Playwright now runs on Ubuntu 22 amd64 and Ubuntu 22 arm64.
    

Version 1.22[​](#version-122 "Direct link to Version 1.22")
-----------------------------------------------------------

### Highlights[​](#highlights-5 "Direct link to Highlights")

*   Role selectors that allow selecting elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
        # Click a button with accessible name "log in"page.locator("role=button[name='log in']").click()
    
    Read more in [our documentation](/python/docs/locators#locate-by-role).
    
*   New [locator.filter()](/python/docs/api/class-locator#locator-filter) API to filter an existing locator
    
        buttons = page.locator("role=button")# ...submit_button = buttons.filter(has_text="Submit")submit_button.click()
    
*   Codegen now supports generating Pytest Tests
    
    ![Graphics](https://user-images.githubusercontent.com/746130/168098384-40784024-6c26-4426-8255-e714862af6fc.png)
    

Version 1.21[​](#version-121 "Direct link to Version 1.21")
-----------------------------------------------------------

### Highlights[​](#highlights-6 "Direct link to Highlights")

*   New role selectors that allow selecting elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
    *   Sync
    *   Async
    
        # Click a button with accessible name "log in"page.locator("role=button[name='log in']").click()
    
        # Click a button with accessible name "log in"await page.locator("role=button[name='log in']").click()
    
    Read more in [our documentation](/python/docs/locators#locate-by-role).
    
*   New `scale` option in [page.screenshot()](/python/docs/api/class-page#page-screenshot) for smaller sized screenshots.
    
*   New `caret` option in [page.screenshot()](/python/docs/api/class-page#page-screenshot) to control text caret. Defaults to `"hide"`.
    

### Behavior Changes[​](#behavior-changes-1 "Direct link to Behavior Changes")

*   The `mcr.microsoft.com/playwright` docker image no longer contains Python. Please use `mcr.microsoft.com/playwright/python` as a Playwright-ready docker image with pre-installed Python.
*   Playwright now supports large file uploads (100s of MBs) via [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) API.

### Browser Versions[​](#browser-versions-28 "Direct link to Browser Versions")

*   Chromium 101.0.4951.26
*   Mozilla Firefox 98.0.2
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 100
*   Microsoft Edge 100

Version 1.20[​](#version-120 "Direct link to Version 1.20")
-----------------------------------------------------------

### Highlights[​](#highlights-7 "Direct link to Highlights")

*   New options for methods [page.screenshot()](/python/docs/api/class-page#page-screenshot), [locator.screenshot()](/python/docs/api/class-locator#locator-screenshot) and [element\_handle.screenshot()](/python/docs/api/class-elementhandle#element-handle-screenshot):
    *   Option `animations: "disabled"` rewinds all CSS animations and transitions to a consistent state
    *   Option `mask: Locator[]` masks given elements, overlaying them with pink `#FF00FF` boxes.
*   [Trace Viewer](/python/docs/trace-viewer) now shows [API testing requests](/python/docs/api-testing).
*   [locator.highlight()](/python/docs/api/class-locator#locator-highlight) visually reveals element(s) for easier debugging.

### Announcements[​](#announcements-2 "Direct link to Announcements")

*   We now ship a designated Python docker image `mcr.microsoft.com/playwright/python`. Please switch over to it if you use Python. This is the last release that includes Python inside our javascript `mcr.microsoft.com/playwright` docker image.
*   v1.20 is the last release to receive WebKit update for macOS 10.15 Catalina. Please update macOS to keep using latest & greatest WebKit!

### Browser Versions[​](#browser-versions-29 "Direct link to Browser Versions")

*   Chromium 101.0.4921.0
*   Mozilla Firefox 97.0.1
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 99
*   Microsoft Edge 99

Version 1.19[​](#version-119 "Direct link to Version 1.19")
-----------------------------------------------------------

### Highlights[​](#highlights-8 "Direct link to Highlights")

*   Locator now supports a `has` option that makes sure it contains another locator inside:
    
    *   Sync
    *   Async
    
        page.locator("article", has=page.locator(".highlight")).click()
    
        await page.locator("article", has=page.locator(".highlight")).click()
    
    Read more in [locator documentation](/python/docs/api/class-locator#locator-locator)
    
*   New [locator.page](/python/docs/api/class-locator#locator-page)
    
*   [page.screenshot()](/python/docs/api/class-page#page-screenshot) and [locator.screenshot()](/python/docs/api/class-locator#locator-screenshot) now automatically hide blinking caret
    
*   Playwright Codegen now generates locators and frame locators
    

### Browser Versions[​](#browser-versions-30 "Direct link to Browser Versions")

*   Chromium 100.0.4863.0
*   Mozilla Firefox 96.0.1
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 98
*   Microsoft Edge 98

Version 1.18[​](#version-118 "Direct link to Version 1.18")
-----------------------------------------------------------

### API Testing[​](#api-testing "Direct link to API Testing")

Playwright for Python 1.18 introduces new [API Testing](/python/docs/api/class-apirequestcontext) that lets you send requests to the server directly from Python! Now you can:

*   test your server API
*   prepare server side state before visiting the web application in a test
*   validate server side post-conditions after running some actions in the browser

To do a request on behalf of Playwright's Page, use **new [page.request](/python/docs/api/class-page#page-request) API**:

*   Sync
*   Async

    # Do a GET request on behalf of pageres = page.request.get("http://example.com/foo.json")

    # Do a GET request on behalf of pageres = await page.request.get("http://example.com/foo.json")

Read more in [our documentation](/python/docs/api/class-apirequestcontext).

### Web-First Assertions[​](#web-first-assertions "Direct link to Web-First Assertions")

Playwright for Python 1.18 introduces [Web-First Assertions](/python/docs/test-assertions).

Consider the following example:

*   Sync
*   Async

    from playwright.sync_api import Page, expectdef test_status_becomes_submitted(page: Page) -> None:    # ..    page.locator("#submit-button").click()    expect(page.locator(".status")).to_have_text("Submitted")

    from playwright.async_api import Page, expectasync def test_status_becomes_submitted(page: Page) -> None:    # ..    await page.locator("#submit-button").click()    await expect(page.locator(".status")).to_have_text("Submitted")

Playwright will be re-testing the node with the selector `.status` until fetched Node has the `"Submitted"` text. It will be re-fetching the node and checking it over and over, until the condition is met or until the timeout is reached. You can pass this timeout as an option.

Read more in [our documentation](/python/docs/test-assertions).

### Locator Improvements[​](#locator-improvements "Direct link to Locator Improvements")

*   [locator.drag\_to()](/python/docs/api/class-locator#locator-drag-to)
    
*   Each locator can now be optionally filtered by the text it contains:
    
    *   Sync
    *   Async
    
        page.locator("li", has_text="my item").locator("button").click()
    
        await page.locator("li", has_text="my item").locator("button").click()
    
    Read more in [locator documentation](/python/docs/api/class-locator#locator-locator)
    

### New APIs & changes[​](#new-apis--changes "Direct link to New APIs & changes")

*   [`accept_downloads`](/python/docs/api/class-browser#browser-new-context-option-accept-downloads) option now defaults to `True`.
*   [`sources`](/python/docs/api/class-tracing#tracing-start-option-sources) option to embed sources into traces.

### Browser Versions[​](#browser-versions-31 "Direct link to Browser Versions")

*   Chromium 99.0.4812.0
*   Mozilla Firefox 95.0
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 97
*   Microsoft Edge 97

Version 1.17[​](#version-117 "Direct link to Version 1.17")
-----------------------------------------------------------

### Frame Locators[​](#frame-locators "Direct link to Frame Locators")

Playwright 1.17 introduces [frame locators](/python/docs/api/class-framelocator) - a locator to the iframe on the page. Frame locators capture the logic sufficient to retrieve the `iframe` and then locate elements in that iframe. Frame locators are strict by default, will wait for `iframe` to appear and can be used in Web-First assertions.

![Graphics](https://user-images.githubusercontent.com/746130/142082759-2170db38-370d-43ec-8d41-5f9941f57d83.png)

Frame locators can be created with either [page.frame\_locator()](/python/docs/api/class-page#page-frame-locator) or [locator.frame\_locator()](/python/docs/api/class-locator#locator-frame-locator) method.

    locator = page.frame_locator("my-frame").locator("text=Submit")locator.click()

Read more at [our documentation](/python/docs/api/class-framelocator).

### Trace Viewer Update[​](#trace-viewer-update "Direct link to Trace Viewer Update")

Playwright Trace Viewer is now **available online** at [https://trace.playwright.dev](https://trace.playwright.dev)! Just drag-and-drop your `trace.zip` file to inspect its contents.

> **NOTE**: trace files are not uploaded anywhere; [trace.playwright.dev](https://trace.playwright.dev) is a [progressive web application](https://web.dev/progressive-web-apps/) that processes traces locally.

*   Playwright Test traces now include sources by default (these could be turned off with tracing option)
*   Trace Viewer now shows test name
*   New trace metadata tab with browser details
*   Snapshots now have URL bar

![image](https://user-images.githubusercontent.com/746130/141877831-29e37cd1-e574-4bd9-aab5-b13a463bb4ae.png)

### HTML Report Update[​](#html-report-update "Direct link to HTML Report Update")

*   HTML report now supports dynamic filtering
*   Report is now a **single static HTML file** that could be sent by e-mail or as a slack attachment.

![image](https://user-images.githubusercontent.com/746130/141877402-e486643d-72c7-4db3-8844-ed2072c5d676.png)

### Ubuntu ARM64 support + more[​](#ubuntu-arm64-support--more "Direct link to Ubuntu ARM64 support + more")

*   Playwright now supports **Ubuntu 20.04 ARM64**. You can now run Playwright tests inside Docker on Apple M1 and on Raspberry Pi.
    
*   You can now use Playwright to install stable version of Edge on Linux:
    
        npx playwright install msedge
    

### New APIs[​](#new-apis-11 "Direct link to New APIs")

*   Tracing now supports a [`'title'`](/python/docs/api/class-tracing#tracing-start-option-title) option
*   Page navigations support a new [`'commit'`](/python/docs/api/class-page#page-goto) waiting option

Version 1.16[​](#version-116 "Direct link to Version 1.16")
-----------------------------------------------------------

### 🎭 Playwright Library[​](#-playwright-library "Direct link to 🎭 Playwright Library")

#### `locator.wait_for`[​](#locatorwait_for "Direct link to locatorwait_for")

Wait for a locator to resolve to a single element with a given state. Defaults to the `state: 'visible'`.

Comes especially handy when working with lists:

    order_sent = page.locator("#order-sent")order_sent.wait_for()

Read more about [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for).

### Docker support for Arm64[​](#docker-support-for-arm64 "Direct link to Docker support for Arm64")

Playwright Docker image is now published for Arm64 so it can be used on Apple Silicon.

Read more about [Docker integration](/python/docs/docker).

### 🎭 Playwright Trace Viewer[​](#-playwright-trace-viewer "Direct link to 🎭 Playwright Trace Viewer")

*   run trace viewer with `npx playwright show-trace` and drop trace files to the trace viewer PWA
*   better visual attribution of action targets

Read more about [Trace Viewer](/python/docs/trace-viewer).

### Browser Versions[​](#browser-versions-32 "Direct link to Browser Versions")

*   Chromium 97.0.4666.0
*   Mozilla Firefox 93.0
*   WebKit 15.4

This version of Playwright was also tested against the following stable channels:

*   Google Chrome 94
*   Microsoft Edge 94

Version 1.15[​](#version-115 "Direct link to Version 1.15")
-----------------------------------------------------------

### 🖱️ Mouse Wheel[​](#️-mouse-wheel "Direct link to 🖱️ Mouse Wheel")

By using [mouse.wheel()](/python/docs/api/class-mouse#mouse-wheel) you are now able to scroll vertically or horizontally.

### 📜 New Headers API[​](#-new-headers-api "Direct link to 📜 New Headers API")

Previously it was not possible to get multiple header values of a response. This is now possible and additional helper functions are available:

*   [request.all\_headers()](/python/docs/api/class-request#request-all-headers)
*   [request.headers\_array()](/python/docs/api/class-request#request-headers-array)
*   [request.header\_value()](/python/docs/api/class-request#request-header-value)
*   [response.all\_headers()](/python/docs/api/class-response#response-all-headers)
*   [response.headers\_array()](/python/docs/api/class-response#response-headers-array)
*   [response.header\_value()](/python/docs/api/class-response#response-header-value)
*   [response.header\_values()](/python/docs/api/class-response#response-header-values)

### 🌈 Forced-Colors emulation[​](#-forced-colors-emulation "Direct link to 🌈 Forced-Colors emulation")

Its now possible to emulate the `forced-colors` CSS media feature by passing it in the [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) or calling [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media).

### New APIs[​](#new-apis-12 "Direct link to New APIs")

*   [page.route()](/python/docs/api/class-page#page-route) accepts new `times` option to specify how many times this route should be matched.
*   [page.set\_checked()](/python/docs/api/class-page#page-set-checked) and [locator.set\_checked()](/python/docs/api/class-locator#locator-set-checked) were introduced to set the checked state of a checkbox.
*   [request.sizes()](/python/docs/api/class-request#request-sizes) Returns resource size information for given http request.
*   [tracing.start\_chunk()](/python/docs/api/class-tracing#tracing-start-chunk) - Start a new trace chunk.
*   [tracing.stop\_chunk()](/python/docs/api/class-tracing#tracing-stop-chunk) - Stops a new trace chunk.

### Browser Versions[​](#browser-versions-33 "Direct link to Browser Versions")

*   Chromium 96.0.4641.0
*   Mozilla Firefox 92.0
*   WebKit 15.0

Version 1.14[​](#version-114 "Direct link to Version 1.14")
-----------------------------------------------------------

#### ⚡️ New "strict" mode[​](#️-new-strict-mode "Direct link to ⚡️ New \"strict\" mode")

Selector ambiguity is a common problem in automation testing. **"strict" mode** ensures that your selector points to a single element and throws otherwise.

Pass `strict=true` into your action calls to opt in.

    # This will throw if you have more than one button!page.click("button", strict=True)

#### 📍 New [**Locators API**](/python/docs/api/class-locator)[​](#-new-locators-api "Direct link to -new-locators-api")

Locator represents a view to the element(s) on the page. It captures the logic sufficient to retrieve the element at any given moment.

The difference between the [Locator](/python/docs/api/class-locator) and [ElementHandle](/python/docs/api/class-elementhandle) is that the latter points to a particular element, while [Locator](/python/docs/api/class-locator) captures the logic of how to retrieve that element.

Also, locators are **"strict" by default**!

    locator = page.locator("button")locator.click()

Learn more in the [documentation](/python/docs/api/class-locator).

#### 🧩 Experimental [**React**](/python/docs/other-locators#react-locator) and [**Vue**](/python/docs/other-locators#vue-locator) selector engines[​](#-experimental-react-and-vue-selector-engines "Direct link to -experimental-react-and-vue-selector-engines")

React and Vue selectors allow selecting elements by its component name and/or property values. The syntax is very similar to [attribute selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) and supports all attribute selector operators.

    page.locator("_react=SubmitButton[enabled=true]").click()page.locator("_vue=submit-button[enabled=true]").click()

Learn more in the [react selectors documentation](/python/docs/other-locators#react-locator) and the [vue selectors documentation](/python/docs/other-locators#vue-locator).

#### ✨ New [**`nth`**](/python/docs/other-locators#n-th-element-locator) and [**`visible`**](/python/docs/other-locators#css-matching-only-visible-elements) selector engines[​](#-new-nth-and-visible-selector-engines "Direct link to -new-nth-and-visible-selector-engines")

*   [`nth`](/python/docs/other-locators#n-th-element-locator) selector engine is equivalent to the `:nth-match` pseudo class, but could be combined with other selector engines.
*   [`visible`](/python/docs/other-locators#css-matching-only-visible-elements) selector engine is equivalent to the `:visible` pseudo class, but could be combined with other selector engines.

    # select the first button among all buttonsbutton.click("button >> nth=0")# or if you are using locators, you can use first, nth() and lastpage.locator("button").first.click()# click a visible buttonbutton.click("button >> visible=true")

### Browser Versions[​](#browser-versions-34 "Direct link to Browser Versions")

*   Chromium 94.0.4595.0
*   Mozilla Firefox 91.0
*   WebKit 15.0

Version 1.13[​](#version-113 "Direct link to Version 1.13")
-----------------------------------------------------------

#### Playwright[​](#playwright "Direct link to Playwright")

*   **🖖 Programmatic drag-and-drop support** via the [page.drag\_and\_drop()](/python/docs/api/class-page#page-drag-and-drop) API.
*   **🔎 Enhanced HAR** with body sizes for requests and responses. Use via `recordHar` option in [browser.new\_context()](/python/docs/api/class-browser#browser-new-context).

#### Tools[​](#tools "Direct link to Tools")

*   Playwright Trace Viewer now shows parameters, returned values and `console.log()` calls.

#### New and Overhauled Guides[​](#new-and-overhauled-guides "Direct link to New and Overhauled Guides")

*   [Intro](/python/docs/intro)
*   [Authentication](/python/docs/auth)
*   [Chrome Extensions](/python/docs/chrome-extensions)

#### Browser Versions[​](#browser-versions-35 "Direct link to Browser Versions")

*   Chromium 93.0.4576.0
*   Mozilla Firefox 90.0
*   WebKit 14.2

#### New Playwright APIs[​](#new-playwright-apis "Direct link to New Playwright APIs")

*   new `baseURL` option in [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) and [browser.new\_page()](/python/docs/api/class-browser#browser-new-page)
*   [response.security\_details()](/python/docs/api/class-response#response-security-details) and [response.server\_addr()](/python/docs/api/class-response#response-server-addr)
*   [page.drag\_and\_drop()](/python/docs/api/class-page#page-drag-and-drop) and [frame.drag\_and\_drop()](/python/docs/api/class-frame#frame-drag-and-drop)
*   [download.cancel()](/python/docs/api/class-download#download-cancel)
*   [page.input\_value()](/python/docs/api/class-page#page-input-value), [frame.input\_value()](/python/docs/api/class-frame#frame-input-value) and [element\_handle.input\_value()](/python/docs/api/class-elementhandle#element-handle-input-value)
*   new `force` option in [page.fill()](/python/docs/api/class-page#page-fill), [frame.fill()](/python/docs/api/class-frame#frame-fill), and [element\_handle.fill()](/python/docs/api/class-elementhandle#element-handle-fill)
*   new `force` option in [page.select\_option()](/python/docs/api/class-page#page-select-option), [frame.select\_option()](/python/docs/api/class-frame#frame-select-option), and [element\_handle.select\_option()](/python/docs/api/class-elementhandle#element-handle-select-option)

Version 1.12[​](#version-112 "Direct link to Version 1.12")
-----------------------------------------------------------

#### 🧟‍♂️ Introducing Playwright Trace Viewer[​](#️-introducing-playwright-trace-viewer "Direct link to 🧟‍♂️ Introducing Playwright Trace Viewer")

[Playwright Trace Viewer](/python/docs/trace-viewer) is a new GUI tool that helps exploring recorded Playwright traces after the script ran. Playwright traces let you examine:

*   page DOM before and after each Playwright action
*   page rendering before and after each Playwright action
*   browser network during script execution

Traces are recorded using the new [browser\_context.tracing](/python/docs/api/class-browsercontext#browser-context-tracing) API:

    browser = chromium.launch()context = browser.new_context()# Start tracing before creating / navigating a page.context.tracing.start(screenshots=True, snapshots=True)page.goto("https://playwright.dev")# Stop tracing and export it into a zip archive.context.tracing.stop(path = "trace.zip")

Traces are examined later with the Playwright CLI:

    playwright show-trace trace.zip

That will open the following GUI:

![image](https://user-images.githubusercontent.com/746130/121109654-d66c4480-c7c0-11eb-8d4d-eb70d2b03811.png)

👉 Read more in [trace viewer documentation](/python/docs/trace-viewer).

#### Browser Versions[​](#browser-versions-36 "Direct link to Browser Versions")

*   Chromium 93.0.4530.0
*   Mozilla Firefox 89.0
*   WebKit 14.2

This version of Playwright was also tested against the following stable channels:

*   Google Chrome 91
*   Microsoft Edge 91

#### New APIs[​](#new-apis-13 "Direct link to New APIs")

*   `reducedMotion` option in [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media), [browser\_type.launch\_persistent\_context()](/python/docs/api/class-browsertype#browser-type-launch-persistent-context), [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) and [browser.new\_page()](/python/docs/api/class-browser#browser-new-page)
*   [browser\_context.on("request")](/python/docs/api/class-browsercontext#browser-context-event-request)
*   [browser\_context.on("requestfailed")](/python/docs/api/class-browsercontext#browser-context-event-request-failed)
*   [browser\_context.on("requestfinished")](/python/docs/api/class-browsercontext#browser-context-event-request-finished)
*   [browser\_context.on("response")](/python/docs/api/class-browsercontext#browser-context-event-response)
*   `tracesDir` option in [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch) and [browser\_type.launch\_persistent\_context()](/python/docs/api/class-browsertype#browser-type-launch-persistent-context)
*   new [browser\_context.tracing](/python/docs/api/class-browsercontext#browser-context-tracing) API namespace
*   new [download.page](/python/docs/api/class-download#download-page) method

Version 1.11[​](#version-111 "Direct link to Version 1.11")
-----------------------------------------------------------

🎥 New video: [Playwright: A New Test Automation Framework for the Modern Web](https://youtu.be/_Jla6DyuEu4) ([slides](https://docs.google.com/presentation/d/1xFhZIJrdHkVe2CuMKOrni92HoG2SWslo0DhJJQMR1DI/edit?usp=sharing))

*   We talked about Playwright
*   Showed engineering work behind the scenes
*   Did live demos with new features ✨
*   **Special thanks** to [applitools](http://applitools.com/) for hosting the event and inviting us!

#### Browser Versions[​](#browser-versions-37 "Direct link to Browser Versions")

*   Chromium 92.0.4498.0
*   Mozilla Firefox 89.0b6
*   WebKit 14.2

#### New APIs[​](#new-apis-14 "Direct link to New APIs")

*   support for **async predicates** across the API in methods such as [page.expect\_request()](/python/docs/api/class-page#page-wait-for-request) and others
*   new **emulation devices**: Galaxy S8, Galaxy S9+, Galaxy Tab S4, Pixel 3, Pixel 4
*   new methods:
    *   [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url) to await navigations to URL
    *   [video.delete()](/python/docs/api/class-video#video-delete) and [video.save\_as()](/python/docs/api/class-video#video-save-as) to manage screen recording
*   new options:
    *   `screen` option in the [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) method to emulate `window.screen` dimensions
    *   `position` option in [page.check()](/python/docs/api/class-page#page-check) and [page.uncheck()](/python/docs/api/class-page#page-uncheck) methods
    *   `trial` option to dry-run actions in [page.check()](/python/docs/api/class-page#page-check), [page.uncheck()](/python/docs/api/class-page#page-uncheck), [page.click()](/python/docs/api/class-page#page-click), [page.dblclick()](/python/docs/api/class-page#page-dblclick), [page.hover()](/python/docs/api/class-page#page-hover) and [page.tap()](/python/docs/api/class-page#page-tap)

Version 1.10[​](#version-110 "Direct link to Version 1.10")
-----------------------------------------------------------

*   [Playwright for Java v1.10](https://github.com/microsoft/playwright-java) is **now stable**!
*   Run Playwright against **Google Chrome** and **Microsoft Edge** stable channels with the [new channels API](/python/docs/browsers).
*   Chromium screenshots are **fast** on Mac & Windows.

#### Bundled Browser Versions[​](#bundled-browser-versions "Direct link to Bundled Browser Versions")

*   Chromium 90.0.4430.0
*   Mozilla Firefox 87.0b10
*   WebKit 14.2

This version of Playwright was also tested against the following stable channels:

*   Google Chrome 89
*   Microsoft Edge 89

#### New APIs[​](#new-apis-15 "Direct link to New APIs")

*   [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch) now accepts the new `'channel'` option. Read more in [our documentation](/python/docs/browsers).

Version 1.9[​](#version-19 "Direct link to Version 1.9")
--------------------------------------------------------

*   [Playwright Inspector](/python/docs/debug) is a **new GUI tool** to author and debug your tests.
    *   **Line-by-line debugging** of your Playwright scripts, with play, pause and step-through.
    *   Author new scripts by **recording user actions**.
    *   **Generate element selectors** for your script by hovering over elements.
    *   Set the `PWDEBUG=1` environment variable to launch the Inspector
*   **Pause script execution** with [page.pause()](/python/docs/api/class-page#page-pause) in headed mode. Pausing the page launches [Playwright Inspector](/python/docs/debug) for debugging.
*   **New has-text pseudo-class** for CSS selectors. `:has-text("example")` matches any element containing `"example"` somewhere inside, possibly in a child or a descendant element. See [more examples](/python/docs/other-locators#css-matching-by-text).
*   **Page dialogs are now auto-dismissed** during execution, unless a listener for `dialog` event is configured. [Learn more](/python/docs/dialogs) about this.
*   [Playwright for Python](https://github.com/microsoft/playwright-python) is **now stable** with an idiomatic snake case API and pre-built [Docker image](/python/docs/docker) to run tests in CI/CD.

#### Browser Versions[​](#browser-versions-38 "Direct link to Browser Versions")

*   Chromium 90.0.4421.0
*   Mozilla Firefox 86.0b10
*   WebKit 14.1

#### New APIs[​](#new-apis-16 "Direct link to New APIs")

*   [page.pause()](/python/docs/api/class-page#page-pause).

Version 1.8[​](#version-18 "Direct link to Version 1.8")
--------------------------------------------------------

*   [Selecting elements based on layout](/python/docs/other-locators#css-matching-elements-based-on-layout) with `:left-of()`, `:right-of()`, `:above()` and `:below()`.
    
*   Playwright now includes command line interface, former playwright-cli.
    
        playwright --help
    
*   [page.select\_option()](/python/docs/api/class-page#page-select-option) now waits for the options to be present.
    
*   New methods to [assert element state](/python/docs/actionability#assertions) like [page.is\_editable()](/python/docs/api/class-page#page-is-editable).
    

#### New APIs[​](#new-apis-17 "Direct link to New APIs")

*   [element\_handle.is\_checked()](/python/docs/api/class-elementhandle#element-handle-is-checked).
*   [element\_handle.is\_disabled()](/python/docs/api/class-elementhandle#element-handle-is-disabled).
*   [element\_handle.is\_editable()](/python/docs/api/class-elementhandle#element-handle-is-editable).
*   [element\_handle.is\_enabled()](/python/docs/api/class-elementhandle#element-handle-is-enabled).
*   [element\_handle.is\_hidden()](/python/docs/api/class-elementhandle#element-handle-is-hidden).
*   [element\_handle.is\_visible()](/python/docs/api/class-elementhandle#element-handle-is-visible).
*   [page.is\_checked()](/python/docs/api/class-page#page-is-checked).
*   [page.is\_disabled()](/python/docs/api/class-page#page-is-disabled).
*   [page.is\_editable()](/python/docs/api/class-page#page-is-editable).
*   [page.is\_enabled()](/python/docs/api/class-page#page-is-enabled).
*   [page.is\_hidden()](/python/docs/api/class-page#page-is-hidden).
*   [page.is\_visible()](/python/docs/api/class-page#page-is-visible).
*   New option `'editable'` in [element\_handle.wait\_for\_element\_state()](/python/docs/api/class-elementhandle#element-handle-wait-for-element-state).

#### Browser Versions[​](#browser-versions-39 "Direct link to Browser Versions")

*   Chromium 90.0.4392.0
*   Mozilla Firefox 85.0b5
*   WebKit 14.1

Version 1.7[​](#version-17 "Direct link to Version 1.7")
--------------------------------------------------------

*   **New Java SDK**: [Playwright for Java](https://github.com/microsoft/playwright-java) is now on par with [JavaScript](https://github.com/microsoft/playwright), [Python](https://github.com/microsoft/playwright-python) and [.NET bindings](https://github.com/microsoft/playwright-dotnet).
*   **Browser storage API**: New convenience APIs to save and load browser storage state (cookies, local storage) to simplify automation scenarios with authentication.
*   **New CSS selectors**: We heard your feedback for more flexible selectors and have revamped the selectors implementation. Playwright 1.7 introduces [new CSS extensions](/python/docs/other-locators#css-locator) and there's more coming soon.
*   **New website**: The docs website at [playwright.dev](https://playwright.dev/) has been updated and is now built with [Docusaurus](https://v2.docusaurus.io/).
*   **Support for Apple Silicon**: Playwright browser binaries for WebKit and Chromium are now built for Apple Silicon.

#### New APIs[​](#new-apis-18 "Direct link to New APIs")

*   [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state) to get current state for later reuse.
*   `storageState` option in [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) and [browser.new\_page()](/python/docs/api/class-browser#browser-new-page) to setup browser context state.

#### Browser Versions[​](#browser-versions-40 "Direct link to Browser Versions")

*   Chromium 89.0.4344.0
*   Mozilla Firefox 84.0b9
*   WebKit 14.1

# Supported languages

Supported languages
===================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright is available in multiple languages that share the same underlying implementation. All core features for automating the browser are supported in all languages, while testing ecosystem integration is different. Pick the language based on your experience, familiarity with its testing ecosystem and your project constraints. For the best experience pick the test runner that we recommend for each language.

JavaScript and TypeScript[​](#javascript-and-typescript "Direct link to JavaScript and TypeScript")
---------------------------------------------------------------------------------------------------

Playwright for Node.js comes with its own [test runner](https://playwright.dev/docs/running-tests) that provides great parallelization mechanism, screenshot assertions, html reporter, automatic tracing etc.

*   [Documentation](https://playwright.dev/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright)

Python[​](#python "Direct link to Python")
------------------------------------------

Playwright [Pytest plugin](https://playwright.dev/python/docs/test-runners) is the recommended way to run end-to-end tests. It provides context isolation, running it on multiple browser configurations and more out of the box.

*   [Documentation](https://playwright.dev/python/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright-python)

Java[​](#java "Direct link to Java")
------------------------------------

You can choose any testing framework such as JUnit or TestNG based on your project requirements.

*   [Documentation](https://playwright.dev/java/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright-java)

.NET[​](#net "Direct link to .NET")
-----------------------------------

Playwright for .NET comes with MSTest, NUnit, and xUnit [base classes](https://playwright.dev/dotnet/docs/test-runners) for writing end-to-end tests.

*   [Documentation](https://playwright.dev/dotnet/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright-dotnet)

# Installation

Installation
============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright was created specifically to accommodate the needs of end-to-end testing. Playwright supports all modern rendering engines including Chromium, WebKit, and Firefox. Test on Windows, Linux, and macOS, locally or on CI, headless or headed with native mobile emulation.

The [Playwright library](/python/docs/library) can be used as a general purpose browser automation tool, providing a powerful set of APIs to automate web applications, for both sync and async Python.

This introduction describes the Playwright Pytest plugin, which is the recommended way to write end-to-end tests.

**You will learn**

*   [How to install Playwright Pytest](/python/docs/intro#installing-playwright-pytest)
*   [How to run the example test](/python/docs/intro#running-the-example-test)

Installing Playwright Pytest[​](#installing-playwright-pytest "Direct link to Installing Playwright Pytest")
------------------------------------------------------------------------------------------------------------

Playwright recommends using the official [Playwright Pytest plugin](/python/docs/test-runners) to write end-to-end tests. It provides context isolation, running it on multiple browser configurations out of the box.

Get started by installing Playwright and running the example test to see it in action.

*   PyPI
*   Anaconda

Install the [Pytest plugin](https://pypi.org/project/pytest-playwright/):

    pip install pytest-playwright

Install the [Pytest plugin](https://anaconda.org/Microsoft/pytest-playwright):

    conda config --add channels conda-forgeconda config --add channels microsoftconda install pytest-playwright

Install the required browsers:

    playwright install

Add Example Test[​](#add-example-test "Direct link to Add Example Test")
------------------------------------------------------------------------

Create a file that follows the `test_` prefix convention, such as `test_example.py`, inside the current working directory or in a sub-directory with the code below. Make sure your test name also follows the `test_` prefix convention.

test\_example.py

    import refrom playwright.sync_api import Page, expectdef test_has_title(page: Page):    page.goto("https://playwright.dev/")    # Expect a title "to contain" a substring.    expect(page).to_have_title(re.compile("Playwright"))def test_get_started_link(page: Page):    page.goto("https://playwright.dev/")    # Click the get started link.    page.get_by_role("link", name="Get started").click()    # Expects page to have a heading with the name of Installation.    expect(page.get_by_role("heading", name="Installation")).to_be_visible()

Running the Example Test[​](#running-the-example-test "Direct link to Running the Example Test")
------------------------------------------------------------------------------------------------

By default tests will be run on chromium. This can be configured via the [CLI options](/python/docs/running-tests). Tests are run in headless mode meaning no browser UI will open up when running the tests. Results of the tests and test logs will be shown in the terminal.

    pytest

Updating Playwright[​](#updating-playwright "Direct link to Updating Playwright")
---------------------------------------------------------------------------------

To update Playwright to the latest version run the following command:

    pip install pytest-playwright playwright -U

System requirements[​](#system-requirements "Direct link to System requirements")
---------------------------------------------------------------------------------

*   Python 3.8 or higher.
*   Windows 10+, Windows Server 2016+ or Windows Subsystem for Linux (WSL).
*   macOS 14 Ventura, or later.
*   Debian 12, Ubuntu 22.04, Ubuntu 24.04, on x86-64 and arm64 architecture.

What's next[​](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Write tests using web first assertions, page fixtures and locators](/python/docs/writing-tests)
*   [Run single test, multiple tests, headed mode](/python/docs/running-tests)
*   [Generate tests with Codegen](/python/docs/codegen)
*   [See a trace of your tests](/python/docs/trace-viewer-intro)

# Writing tests

Writing tests
=============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright tests are simple, they

*   **perform actions**, and
*   **assert the state** against expectations.

There is no need to wait for anything prior to performing an action: Playwright automatically waits for the wide range of [actionability](/python/docs/actionability) checks to pass prior to performing each action.

There is also no need to deal with the race conditions when performing the checks - Playwright assertions are designed in a way that they describe the expectations that need to be eventually met.

That's it! These design choices allow Playwright users to forget about flaky timeouts and racy checks in their tests altogether.

**You will learn**

*   [How to write the first test](/python/docs/writing-tests#first-test)
*   [How to perform actions](/python/docs/writing-tests#actions)
*   [How to use assertions](/python/docs/writing-tests#assertions)
*   [How tests run in isolation](/python/docs/writing-tests#test-isolation)
*   [How to use test hooks](/python/docs/writing-tests#using-fixtures)

First test[​](#first-test "Direct link to First test")
------------------------------------------------------

Take a look at the following example to see how to write a test. Note how the file name follows the `test_` prefix convention as well as each test name.

test\_example.py

    import refrom playwright.sync_api import Page, expectdef test_has_title(page: Page):    page.goto("https://playwright.dev/")    # Expect a title "to contain" a substring.    expect(page).to_have_title(re.compile("Playwright"))def test_get_started_link(page: Page):    page.goto("https://playwright.dev/")    # Click the get started link.    page.get_by_role("link", name="Get started").click()    # Expects page to have a heading with the name of Installation.    expect(page.get_by_role("heading", name="Installation")).to_be_visible()

Actions[​](#actions "Direct link to Actions")
---------------------------------------------

### Navigation[​](#navigation "Direct link to Navigation")

Most of the tests will start with navigating page to the URL. After that, test will be able to interact with the page elements.

    page.goto("https://playwright.dev/")

Playwright will wait for page to reach the load state prior to moving forward. Learn more about the [page.goto()](/python/docs/api/class-page#page-goto) options.

### Interactions[​](#interactions "Direct link to Interactions")

Performing actions starts with locating the elements. Playwright uses [Locators API](/python/docs/locators) for that. Locators represent a way to find element(s) on the page at any moment, learn more about the [different types](/python/docs/locators) of locators available. Playwright will wait for the element to be [actionable](/python/docs/actionability) prior to performing the action, so there is no need to wait for it to become available.

    # Create a locator.get_started = page.get_by_role("link", name="Get started")# Click it.get_started.click()

In most cases, it'll be written in one line:

    page.get_by_role("link", name="Get started").click()

### Basic actions[​](#basic-actions "Direct link to Basic actions")

This is the list of the most popular Playwright actions. Note that there are many more, so make sure to check the [Locator API](/python/docs/api/class-locator) section to learn more about them.

Action

Description

[locator.check()](/python/docs/api/class-locator#locator-check)

Check the input checkbox

[locator.click()](/python/docs/api/class-locator#locator-click)

Click the element

[locator.uncheck()](/python/docs/api/class-locator#locator-uncheck)

Uncheck the input checkbox

[locator.hover()](/python/docs/api/class-locator#locator-hover)

Hover mouse over the element

[locator.fill()](/python/docs/api/class-locator#locator-fill)

Fill the form field, input text

[locator.focus()](/python/docs/api/class-locator#locator-focus)

Focus the element

[locator.press()](/python/docs/api/class-locator#locator-press)

Press single key

[locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files)

Pick files to upload

[locator.select\_option()](/python/docs/api/class-locator#locator-select-option)

Select option in the drop down

Assertions[​](#assertions "Direct link to Assertions")
------------------------------------------------------

Playwright includes [assertions](/python/docs/test-assertions) that will wait until the expected condition is met. Using these assertions allows making the tests non-flaky and resilient. For example, this code will wait until the page gets the title containing "Playwright":

    import refrom playwright.sync_api import expectexpect(page).to_have_title(re.compile("Playwright"))

Here is the list of the most popular async assertions. Note that there are [many more](/python/docs/test-assertions) to get familiar with:

Assertion

Description

[expect(locator).to\_be\_checked()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked)

Checkbox is checked

[expect(locator).to\_be\_enabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)

Control is enabled

[expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible)

Element is visible

[expect(locator).to\_contain\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text)

Element contains text

[expect(locator).to\_have\_attribute()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)

Element has attribute

[expect(locator).to\_have\_count()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-count)

List of elements has given length

[expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text)

Element matches text

[expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value)

Input element has value

[expect(page).to\_have\_title()](/python/docs/api/class-pageassertions#page-assertions-to-have-title)

Page has title

[expect(page).to\_have\_url()](/python/docs/api/class-pageassertions#page-assertions-to-have-url)

Page has URL

### Test isolation[​](#test-isolation "Direct link to Test isolation")

The Playwright Pytest plugin is based on the concept of test fixtures such as the [built in page fixture](/python/docs/test-runners), which is passed into your test. Pages are [isolated between tests due to the Browser Context](/python/docs/browser-contexts), which is equivalent to a brand new browser profile, where every test gets a fresh environment, even when multiple tests run in a single Browser.

test\_example.py

    from playwright.sync_api import Pagedef test_example_test(page: Page):  pass  # "page" belongs to an isolated BrowserContext, created for this specific test.def test_another_test(page: Page):  pass  # "page" in this second test is completely isolated from the first test.

### Using fixtures[​](#using-fixtures "Direct link to Using fixtures")

You can use various [fixtures](https://docs.pytest.org/en/6.2.x/fixture.html#autouse-fixtures-fixtures-you-don-t-have-to-request) to execute code before or after your tests and to share objects between them. A `function` scoped fixture e.g. with autouse behaves like a beforeEach/afterEach. And a `module` scoped fixture with autouse behaves like a beforeAll/afterAll which runs before all and after all the tests.

test\_example.py

    import pytestfrom playwright.sync_api import Page, expect@pytest.fixture(scope="function", autouse=True)def before_each_after_each(page: Page):        print("before the test runs")    # Go to the starting url before each test.    page.goto("https://playwright.dev/")    yield        print("after the test runs")def test_main_navigation(page: Page):    # Assertions use the expect API.    expect(page).to_have_url("https://playwright.dev/")

What's next[​](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Run single test, multiple tests, headed mode](/python/docs/running-tests)
*   [Generate tests with Codegen](/python/docs/codegen-intro)
*   [See a trace of your tests](/python/docs/trace-viewer-intro)
*   [Run tests on CI with GitHub Actions](/python/docs/ci-intro)

# Generating tests

Generating tests
================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright comes with the ability to generate tests out of the box and is a great way to quickly get started with testing. It will open two windows, a browser window where you interact with the website you wish to test and the Playwright Inspector window where you can record your tests, copy the tests, clear your tests as well as change the language of your tests.

**You will learn**

*   [How to record a test](/python/docs/codegen#recording-a-test)
*   [How to generate locators](/python/docs/codegen#generating-locators)

Running Codegen[​](#running-codegen "Direct link to Running Codegen")
---------------------------------------------------------------------

Use the `codegen` command to run the test generator followed by the URL of the website you want to generate tests for. The URL is optional and you can always run the command without it and then add the URL directly into the browser window instead.

    playwright codegen demo.playwright.dev/todomvc

### Recording a test[​](#recording-a-test "Direct link to Recording a test")

Run `codegen` and perform actions in the browser. Playwright will generate the code for the user interactions. `Codegen` will look at the rendered page and figure out the recommended locator, prioritizing role, text and test id locators. If the generator identifies multiple elements matching the locator, it will improve the locator to make it resilient and uniquely identify the target element, therefore eliminating and reducing test(s) failing and flaking due to locators.

With the test generator you can record:

*   Actions like click or fill by simply interacting with the page
*   Assertions by clicking on one of the icons in the toolbar and then clicking on an element on the page to assert against. You can choose:
    *   `'assert visibility'` to assert that an element is visible
    *   `'assert text'` to assert that an element contains specific text
    *   `'assert value'` to assert that an element has a specific value

![recording a test](https://github.com/microsoft/playwright/assets/13063165/9751b609-6e4c-486b-a961-f86f177b1d58)

###### [​](#-1 "Direct link to -1")

When you have finished interacting with the page, press the `'record'` button to stop the recording and use the `'copy'` button to copy the generated code to your editor.

Use the `'clear'` button to clear the code to start recording again. Once finished close the Playwright inspector window or stop the terminal command.

To learn more about generating tests check out or detailed guide on [Codegen](/python/docs/codegen).

### Generating locators[​](#generating-locators "Direct link to Generating locators")

You can generate [locators](/python/docs/locators) with the test generator.

*   Press the `'Record'` button to stop the recording and the `'Pick Locator'` button will appear.
*   Click on the `'Pick Locator'` button and then hover over elements in the browser window to see the locator highlighted underneath each element.
*   To choose a locator click on the element you would like to locate and the code for that locator will appear in the locator playground next to the Pick Locator button.
*   You can then edit the locator in the locator playground to fine tune it and see the matching element highlighted in the browser window.
*   Use the copy button to copy the locator and paste it into your code.

###### [​](#-2 "Direct link to -2")

![picking a locator](https://github.com/microsoft/playwright/assets/13063165/95d11f48-96a4-46b9-9c2a-63c3aa4fdce7)

### Emulation[​](#emulation "Direct link to Emulation")

You can also generate tests using emulation so as to generate a test for a specific viewport, device, color scheme, as well as emulate the geolocation, language or timezone. The test generator can also generate a test while preserving authenticated state. Check out the [Test Generator](/python/docs/codegen#emulation) guide to learn more.

What's Next[​](#whats-next "Direct link to What's Next")
--------------------------------------------------------

*   [See a trace of your tests](/python/docs/trace-viewer-intro)

# Running and debugging tests

Running and debugging tests
===========================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

You can run a single test, a set of tests or all tests. Tests can be run on one browser or multiple browsers by using the `--browser` flag. By default, tests are run in a headless manner, meaning no browser window will be opened while running the tests and results will be seen in the terminal. If you prefer, you can run your tests in headed mode by using the `--headed` CLI argument.

**You will learn**

*   [How to run tests from the command line](/python/docs/running-tests#command-line)
*   [How to debug tests](/python/docs/running-tests#debugging-tests)

Running tests[​](#running-tests "Direct link to Running tests")
---------------------------------------------------------------

### Command Line[​](#command-line "Direct link to Command Line")

To run your tests, use the `pytest` command. This will run your tests on the Chromium browser by default. Tests run in headless mode by default meaning no browser window will be opened while running the tests and results will be seen in the terminal.

    pytest

### Run tests in headed mode[​](#run-tests-in-headed-mode "Direct link to Run tests in headed mode")

To run your tests in headed mode, use the `--headed` flag. This will open up a browser window while running your tests and once finished the browser window will close.

    pytest --headed

### Run tests on different browsers[​](#run-tests-on-different-browsers "Direct link to Run tests on different browsers")

To specify which browser you would like to run your tests on, use the `--browser` flag followed by the name of the browser.

    pytest --browser webkit

To specify multiple browsers to run your tests on, use the `--browser` flag multiple times followed by the name of each browser.

    pytest --browser webkit --browser firefox

### Run specific tests[​](#run-specific-tests "Direct link to Run specific tests")

To run a single test file, pass in the name of the test file that you want to run.

    pytest test_login.py

To run a set of test files, pass in the names of the test files that you want to run.

    pytest tests/test_todo_page.py tests/test_landing_page.py

To run a specific test, pass in the function name of the test you want to run.

    pytest -k test_add_a_todo_item

### Run tests in parallel[​](#run-tests-in-parallel "Direct link to Run tests in parallel")

To run your tests in parallel, use the `--numprocesses` flag followed by the number of processes you would like to run your tests on. We recommend half of logical CPU cores.

    pytest --numprocesses 2

(This assumes `pytest-xdist` is installed. For more information see [here](/python/docs/test-runners#parallelism-running-multiple-tests-at-once).)

For more information, see [Playwright Pytest usage](/python/docs/test-runners) or the Pytest documentation for [general CLI usage](https://docs.pytest.org/en/stable/usage.html).

Debugging tests[​](#debugging-tests "Direct link to Debugging tests")
---------------------------------------------------------------------

Since Playwright runs in Python, you can debug it with your debugger of choice, e.g., with the [Python extension](https://code.visualstudio.com/docs/python/python-tutorial) in Visual Studio Code. Playwright comes with the Playwright Inspector which allows you to step through Playwright API calls, see their debug logs and explore [locators](/python/docs/locators).

To debug all tests, run the following command.

*   Bash
*   PowerShell
*   Batch

    PWDEBUG=1 pytest -s

    $env:PWDEBUG=1pytest -s

    set PWDEBUG=1pytest -s

To debug one test file, run the command followed by the name of the test file that you want to debug.

*   Bash
*   PowerShell
*   Batch

    PWDEBUG=1 pytest -s test_example.py

    $env:PWDEBUG=1pytest -s test_example.py

    set PWDEBUG=1pytest -s test_example.py

To debug a specific test, add `-k` followed by the name of the test that you want to debug.

*   Bash
*   PowerShell
*   Batch

    PWDEBUG=1 pytest -s -k test_get_started_link

    $env:PWDEBUG=1pytest -s -k test_get_started_link

    set PWDEBUG=1pytest -s -k test_get_started_link

This command will open up a Browser window as well as the Playwright Inspector. You can use the step over button at the top of the inspector to step through your test. Or press the play button to run your test from start to finish. Once the test has finished, the browser window will close.

While debugging you can use the Pick Locator button to select an element on the page and see the locator that Playwright would use to find that element. You can also edit the locator and see it highlighting live on the Browser window. Use the Copy Locator button to copy the locator to your clipboard and then paste it into your test.

![Playwright Inspector](https://github.com/microsoft/playwright/assets/13063165/c94c89c8-f945-460c-a653-7809c6ca50ee)

Check out our [debugging guide](/python/docs/debug) to learn more about the [Playwright Inspector](/python/docs/debug#playwright-inspector) as well as debugging with [Browser Developer tools](/python/docs/debug#browser-developer-tools).

What's next[​](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Generate tests with Codegen](/python/docs/codegen)
*   [See a trace of your tests](/python/docs/trace-viewer-intro)
*   [Run your tests on CI with GitHub Actions](/python/docs/ci-intro)

# Trace viewer

Trace viewer
============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Trace Viewer is a GUI tool that lets you explore recorded Playwright traces of your tests meaning you can go back and forward though each action of your test and visually see what was happening during each action.

**You will learn**

*   How to record a trace
*   How to open the trace viewer

Recording a trace[​](#recording-a-trace "Direct link to Recording a trace")
---------------------------------------------------------------------------

Traces can be recorded by running your tests with the `--tracing` flag.

    pytest --tracing on

Options for tracing are:

*   `on`: Record trace for each test
*   `off`: Do not record trace. (default)
*   `retain-on-failure`: Record trace for each test, but remove all traces from successful test runs.

This will record the trace and place it into the file named `trace.zip` in your `test-results` directory.

If you are not using Pytest, click here to learn how to record traces.

*   Sync
*   Async

    browser = chromium.launch()context = browser.new_context()# Start tracing before creating / navigating a page.context.tracing.start(screenshots=True, snapshots=True, sources=True)page = context.new_page()page.goto("https://playwright.dev")# Stop tracing and export it into a zip archive.context.tracing.stop(path = "trace.zip")

    browser = await chromium.launch()context = await browser.new_context()# Start tracing before creating / navigating a page.await context.tracing.start(screenshots=True, snapshots=True, sources=True)page = await context.new_page()await page.goto("https://playwright.dev")# Stop tracing and export it into a zip archive.await context.tracing.stop(path = "trace.zip")

Opening the trace[​](#opening-the-trace "Direct link to Opening the trace")
---------------------------------------------------------------------------

You can open the saved trace using the Playwright CLI or in your browser on [`trace.playwright.dev`](https://trace.playwright.dev). Make sure to add the full path to where your trace's zip file is located. Once opened you can click on each action or use the timeline to see the state of the page before and after each action. You can also inspect the log, source and network during each step of the test. The trace viewer creates a DOM snapshot so you can fully interact with it, open devtools etc.

    playwright show-trace trace.zip

![playwright trace viewer](https://github.com/microsoft/playwright/assets/13063165/10fe3585-8401-4051-b1c2-b2e92ac4c274)

To learn more check out our detailed guide on [Trace Viewer](/python/docs/trace-viewer).

What's next[​](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Run tests on CI with GitHub Actions](/python/docs/ci-intro)
*   [Learn more about Trace Viewer](/python/docs/trace-viewer)

# Setting up CI

Setting up CI
=============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright tests can be run on any CI provider. In this section we will cover running tests on GitHub using GitHub actions. If you would like to see how to configure other CI providers check out our detailed doc on Continuous Integration.

#### You will learn[​](#you-will-learn "Direct link to You will learn")

*   [How to set up GitHub Actions](/python/docs/ci-intro#setting-up-github-actions)
*   [How to view test logs](/python/docs/ci-intro#viewing-test-logs)
*   [How to view the trace](/python/docs/ci-intro#viewing-the-trace)

Setting up GitHub Actions[​](#setting-up-github-actions "Direct link to Setting up GitHub Actions")
---------------------------------------------------------------------------------------------------

To add a [GitHub Actions](https://docs.github.com/en/actions) file first create `.github/workflows` folder and inside it add a `playwright.yml` file containing the example code below so that your tests will run on each push and pull request for the main/master branch.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    steps:    - uses: actions/checkout@v4    - name: Set up Python      uses: actions/setup-python@v4      with:        python-version: '3.11'    - name: Install dependencies      run: |        python -m pip install --upgrade pip        pip install -r requirements.txt    - name: Ensure browsers are installed      run: python -m playwright install --with-deps    - name: Run your tests      run: pytest --tracing=retain-on-failure    - uses: actions/upload-artifact@v4      if: ${{ !cancelled() }}      with:        name: playwright-traces        path: test-results/

To learn more about this, see ["Understanding GitHub Actions"](https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions).

Looking at the list of steps in `jobs.test.steps`, you can see that the workflow performs these steps:

1.  Clone your repository
2.  Install language dependencies
3.  Install project dependencies and build
4.  Install Playwright Browsers
5.  Run tests

Create a Repo and Push to GitHub[​](#create-a-repo-and-push-to-github "Direct link to Create a Repo and Push to GitHub")
------------------------------------------------------------------------------------------------------------------------

Once you have your [GitHub actions workflow](#setting-up-github-actions) setup then all you need to do is [Create a repo on GitHub](https://docs.github.com/en/get-started/quickstart/create-a-repo) or push your code to an existing repository. Follow the instructions on GitHub and don't forget to [initialize a git repository](https://github.com/git-guides/git-init) using the `git init` command so you can [add](https://github.com/git-guides/git-add), [commit](https://github.com/git-guides/git-commit) and [push](https://github.com/git-guides/git-push) your code.

![Create a Repo and Push to GitHub](https://user-images.githubusercontent.com/13063165/183423254-d2735278-a2ab-4d63-bb99-48d8e5e447bc.png)

Opening the Workflows[​](#opening-the-workflows "Direct link to Opening the Workflows")
---------------------------------------------------------------------------------------

Click on the **Actions** tab to see the workflows. Here you will see if your tests have passed or failed.

###### [​](#-1 "Direct link to -1")

![opening the workflow](https://user-images.githubusercontent.com/13063165/183423783-58bf2008-514e-4f96-9c12-c9a55703960c.png)

Viewing Test Logs[​](#viewing-test-logs "Direct link to Viewing Test Logs")
---------------------------------------------------------------------------

Clicking on the workflow run will show you the all the actions that GitHub performed and clicking on **Run Playwright tests** will show the error messages, what was expected and what was received as well as the call log.

###### [​](#-2 "Direct link to -2")

![Viewing Test Logs](https://user-images.githubusercontent.com/13063165/183423783-58bf2008-514e-4f96-9c12-c9a55703960c.png)

Viewing the Trace[​](#viewing-the-trace "Direct link to Viewing the Trace")
---------------------------------------------------------------------------

[trace.playwright.dev](https://trace.playwright.dev) is a statically hosted variant of the Trace Viewer. You can upload trace files using drag and drop.

![playwright trace viewer](https://github.com/microsoft/playwright/assets/13063165/6d5885dc-d511-4c20-b728-040a7ef6cea4)

What's Next[​](#whats-next "Direct link to What's Next")
--------------------------------------------------------

*   [Learn how to use Locators](/python/docs/locators)
*   [Learn how to perform Actions](/python/docs/input)
*   [Learn how to write Assertions](/python/docs/test-assertions)
*   [Learn more about the Trace Viewer](/python/docs/trace-viewer)
*   [Learn more ways of running tests on GitHub Actions](/python/docs/ci#github-actions)
*   [Learn more about running tests on other CI providers](/python/docs/ci)

# Pytest Plugin Reference

Pytest Plugin Reference
=======================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright provides a [Pytest](https://docs.pytest.org/en/stable/) plugin to write end-to-end tests. To get started with it, refer to the [getting started guide](/python/docs/intro).

Usage[​](#usage "Direct link to Usage")
---------------------------------------

To run your tests, use [Pytest](https://docs.pytest.org/en/stable/) CLI.

    pytest --browser webkit --headed

If you want to add the CLI arguments automatically without specifying them, you can use the [pytest.ini](https://docs.pytest.org/en/stable/reference.html#ini-options-ref) file:

    # content of pytest.ini[pytest]# Run firefox with UIaddopts = --headed --browser firefox

CLI arguments[​](#cli-arguments "Direct link to CLI arguments")
---------------------------------------------------------------

Note that CLI arguments are only applied to the default `browser`, `context` and `page` fixtures. If you create a browser, a context or a page with the API call like [browser.new\_context()](/python/docs/api/class-browser#browser-new-context), the CLI arguments are not applied.

*   `--headed`: Run tests in headed mode (default: headless).
*   `--browser`: Run tests in a different browser `chromium`, `firefox`, or `webkit`. It can be specified multiple times (default: `chromium`).
*   `--browser-channel` [Browser channel](/python/docs/browsers) to be used.
*   `--slowmo` Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on (default: 0).
*   `--device` [Device](/python/docs/emulation) to be emulated.
*   `--output` Directory for artifacts produced by tests (default: `test-results`).
*   `--tracing` Whether to record a [trace](/python/docs/trace-viewer) for each test. `on`, `off`, or `retain-on-failure` (default: `off`).
*   `--video` Whether to record video for each test. `on`, `off`, or `retain-on-failure` (default: `off`).
*   `--screenshot` Whether to automatically capture a screenshot after each test. `on`, `off`, or `only-on-failure` (default: `off`).
*   `--full-page-screenshot` Whether to take a full page screenshot on failure. By default, only the viewport is captured. Requires `--screenshot` to be enabled (default: `off`).

Fixtures[​](#fixtures "Direct link to Fixtures")
------------------------------------------------

This plugin configures Playwright-specific [fixtures for pytest](https://docs.pytest.org/en/latest/fixture.html). To use these fixtures, use the fixture name as an argument to the test function.

    def test_my_app_is_working(fixture_name):    pass    # Test using fixture_name    # ...

**Function scope**: These fixtures are created when requested in a test function and destroyed when the test ends.

*   `context`: New [browser context](/python/docs/browser-contexts) for a test.
*   `page`: New [browser page](/python/docs/pages) for a test.
*   `new_context`: Allows creating different [browser contexts](/python/docs/browser-contexts) for a test. Useful for multi-user scenarios. Accepts the same parameters as [browser.new\_context()](/python/docs/api/class-browser#browser-new-context).

**Session scope**: These fixtures are created when requested in a test function and destroyed when all tests end.

*   `playwright`: [Playwright](/python/docs/api/class-playwright) instance.
*   `browser_type`: [BrowserType](/python/docs/api/class-browsertype) instance of the current browser.
*   `browser`: [Browser](/python/docs/api/class-browser) instance launched by Playwright.
*   `browser_name`: Browser name as string.
*   `browser_channel`: Browser channel as string.
*   `is_chromium`, `is_webkit`, `is_firefox`: Booleans for the respective browser types.

**Customizing fixture options**: For `browser` and `context` fixtures, use the following fixtures to define custom launch options.

*   `browser_type_launch_args`: Override launch arguments for [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch). It should return a Dict.
*   `browser_context_args`: Override the options for [browser.new\_context()](/python/docs/api/class-browser#browser-new-context). It should return a Dict.

Its also possible to override the context options ([browser.new\_context()](/python/docs/api/class-browser#browser-new-context)) for a single test by using the `browser_context_args` marker:

    import pytest@pytest.mark.browser_context_args(timezone_id="Europe/Berlin", locale="en-GB")def test_browser_context_args(page):    assert page.evaluate("window.navigator.userAgent") == "Europe/Berlin"    assert page.evaluate("window.navigator.languages") == ["de-DE"]

Parallelism: Running Multiple Tests at Once[​](#parallelism-running-multiple-tests-at-once "Direct link to Parallelism: Running Multiple Tests at Once")
--------------------------------------------------------------------------------------------------------------------------------------------------------

If your tests are running on a machine with a lot of CPUs, you can speed up the overall execution time of your test suite by using [`pytest-xdist`](https://pypi.org/project/pytest-xdist/) to run multiple tests at once:

    # install dependencypip install pytest-xdist# use the --numprocesses flagpytest --numprocesses auto

Depending on the hardware and nature of your tests, you can set `numprocesses` to be anywhere from `2` to the number of CPUs on the machine. If set too high, you may notice unexpected behavior.

See [Running Tests](/python/docs/running-tests) for general information on `pytest` options.

Examples[​](#examples "Direct link to Examples")
------------------------------------------------

### Configure typings for auto-completion[​](#configure-typings-for-auto-completion "Direct link to Configure typings for auto-completion")

test\_my\_application.py

    from playwright.sync_api import Pagedef test_visit_admin_dashboard(page: Page):    page.goto("/admin")    # ...

If you're using VSCode with Pylance, these types can be inferred by enabling the `python.testing.pytestEnabled` setting so you don't need the type annotation.

### Using multiple contexts[​](#using-multiple-contexts "Direct link to Using multiple contexts")

In order to simulate multiple users, you can create multiple [`BrowserContext`](/python/docs/browser-contexts) instances.

test\_my\_application.py

    from playwright.sync_api import Page, BrowserContextfrom pytest_playwright.pytest_playwright import CreateContextCallbackdef test_foo(page: Page, new_context: CreateContextCallback) -> None:    page.goto("https://example.com")    context = new_context()    page2 = context.new_page()    # page and page2 are in different contexts

### Skip test by browser[​](#skip-test-by-browser "Direct link to Skip test by browser")

test\_my\_application.py

    import pytest@pytest.mark.skip_browser("firefox")def test_visit_example(page):    page.goto("https://example.com")    # ...

### Run on a specific browser[​](#run-on-a-specific-browser "Direct link to Run on a specific browser")

conftest.py

    import pytest@pytest.mark.only_browser("chromium")def test_visit_example(page):    page.goto("https://example.com")    # ...

### Run with a custom browser channel like Google Chrome or Microsoft Edge[​](#run-with-a-custom-browser-channel-like-google-chrome-or-microsoft-edge "Direct link to Run with a custom browser channel like Google Chrome or Microsoft Edge")

    pytest --browser-channel chrome

test\_my\_application.py

    def test_example(page):    page.goto("https://example.com")

### Configure base-url[​](#configure-base-url "Direct link to Configure base-url")

Start Pytest with the `base-url` argument. The [`pytest-base-url`](https://github.com/pytest-dev/pytest-base-url) plugin is used for that which allows you to set the base url from the config, CLI arg or as a fixture.

    pytest --base-url http://localhost:8080

test\_my\_application.py

    def test_visit_example(page):    page.goto("/admin")    # -> Will result in http://localhost:8080/admin

### Ignore HTTPS errors[​](#ignore-https-errors "Direct link to Ignore HTTPS errors")

conftest.py

    import pytest@pytest.fixture(scope="session")def browser_context_args(browser_context_args):    return {        **browser_context_args,        "ignore_https_errors": True    }

### Use custom viewport size[​](#use-custom-viewport-size "Direct link to Use custom viewport size")

conftest.py

    import pytest@pytest.fixture(scope="session")def browser_context_args(browser_context_args):    return {        **browser_context_args,        "viewport": {            "width": 1920,            "height": 1080,        }    }

### Device emulation / BrowserContext option overrides[​](#device-emulation--browsercontext-option-overrides "Direct link to Device emulation / BrowserContext option overrides")

conftest.py

    import pytest@pytest.fixture(scope="session")def browser_context_args(browser_context_args, playwright):    iphone_11 = playwright.devices['iPhone 11 Pro']    return {        **browser_context_args,        **iphone_11,    }

Or via the CLI `--device="iPhone 11 Pro"`

### Using with `unittest.TestCase`[​](#using-with-unittesttestcase "Direct link to using-with-unittesttestcase")

See the following example for using it with `unittest.TestCase`. This has a limitation, that only a single browser can be specified and no matrix of multiple browsers gets generated when specifying multiple.

    import pytestimport unittestfrom playwright.sync_api import Pageclass MyTest(unittest.TestCase):    @pytest.fixture(autouse=True)    def setup(self, page: Page):        self.page = page    def test_foobar(self):        self.page.goto("https://microsoft.com")        self.page.locator("#foobar").click()        assert self.page.evaluate("1 + 1") == 2

Debugging[​](#debugging "Direct link to Debugging")
---------------------------------------------------

### Use with pdb[​](#use-with-pdb "Direct link to Use with pdb")

Use the `breakpoint()` statement in your test code to pause execution and get a [pdb](https://docs.python.org/3/library/pdb.html) REPL.

    def test_bing_is_working(page):    page.goto("https://bing.com")    breakpoint()    # ...

Deploy to CI[​](#deploy-to-ci "Direct link to Deploy to CI")
------------------------------------------------------------

See the [guides for CI providers](/python/docs/ci) to deploy your tests to CI/CD.

Async Fixtures[​](#async-fixtures "Direct link to Async Fixtures")
------------------------------------------------------------------

To use async fixtures, install [`pytest-playwright-asyncio`](https://pypi.org/project/pytest-playwright-asyncio/).

Ensure you are using `pytest-asyncio>=0.26.0` and set [`asyncio_default_test_loop_scope = session`](https://pytest-asyncio.readthedocs.io/en/v0.26.0/how-to-guides/change_default_test_loop.html) in your configuration (`pytest.ini/pyproject.toml/setup.cfg`).

    import pytestfrom playwright.async_api import Page@pytest.mark.asyncio(loop_scope="session")async def test_foo(page: Page):    await page.goto("https://github.com")    # ...

# Actions

Actions
=======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can interact with HTML Input elements such as text inputs, checkboxes, radio buttons, select options, mouse clicks, type characters, keys and shortcuts as well as upload files and focus elements.

Text input[​](#text-input "Direct link to Text input")
------------------------------------------------------

Using [locator.fill()](/python/docs/api/class-locator#locator-fill) is the easiest way to fill out the form fields. It focuses the element and triggers an `input` event with the entered text. It works for `<input>`, `<textarea>` and `[contenteditable]` elements.

*   Sync
*   Async

    # Text inputpage.get_by_role("textbox").fill("Peter")# Date inputpage.get_by_label("Birth date").fill("2020-02-02")# Time inputpage.get_by_label("Appointment time").fill("13:15")# Local datetime inputpage.get_by_label("Local time").fill("2020-03-02T05:15")

    # Text inputawait page.get_by_role("textbox").fill("Peter")# Date inputawait page.get_by_label("Birth date").fill("2020-02-02")# Time inputawait page.get_by_label("Appointment time").fill("13:15")# Local datetime inputawait page.get_by_label("Local time").fill("2020-03-02T05:15")

Checkboxes and radio buttons[​](#checkboxes-and-radio-buttons "Direct link to Checkboxes and radio buttons")
------------------------------------------------------------------------------------------------------------

Using [locator.set\_checked()](/python/docs/api/class-locator#locator-set-checked) is the easiest way to check and uncheck a checkbox or a radio button. This method can be used with `input[type=checkbox]`, `input[type=radio]` and `[role=checkbox]` elements.

*   Sync
*   Async

    # Check the checkboxpage.get_by_label('I agree to the terms above').check()# Assert the checked stateexpect(page.get_by_label('Subscribe to newsletter')).to_be_checked()# Select the radio buttonpage.get_by_label('XL').check()

    # Check the checkboxawait page.get_by_label('I agree to the terms above').check()# Assert the checked stateawait expect(page.get_by_label('Subscribe to newsletter')).to_be_checked()# Select the radio buttonawait page.get_by_label('XL').check()

Select options[​](#select-options "Direct link to Select options")
------------------------------------------------------------------

Selects one or multiple options in the `<select>` element with [locator.select\_option()](/python/docs/api/class-locator#locator-select-option). You can specify option `value`, or `label` to select. Multiple options can be selected.

*   Sync
*   Async

    # Single selection matching the value or labelpage.get_by_label('Choose a color').select_option('blue')# Single selection matching the labelpage.get_by_label('Choose a color').select_option(label='Blue')# Multiple selected itemspage.get_by_label('Choose multiple colors').select_option(['red', 'green', 'blue'])

    # Single selection matching the value or labelawait page.get_by_label('Choose a color').select_option('blue')# Single selection matching the labelawait page.get_by_label('Choose a color').select_option(label='Blue')# Multiple selected itemsawait page.get_by_label('Choose multiple colors').select_option(['red', 'green', 'blue'])

Mouse click[​](#mouse-click "Direct link to Mouse click")
---------------------------------------------------------

Performs a simple human click.

*   Sync
*   Async

    # Generic clickpage.get_by_role("button").click()# Double clickpage.get_by_text("Item").dblclick()# Right clickpage.get_by_text("Item").click(button="right")# Shift + clickpage.get_by_text("Item").click(modifiers=["Shift"])# Hover over elementpage.get_by_text("Item").hover()# Click the top left cornerpage.get_by_text("Item").click(position={ "x": 0, "y": 0})

    # Generic clickawait page.get_by_role("button").click()# Double clickawait page.get_by_text("Item").dblclick()# Right clickawait page.get_by_text("Item").click(button="right")# Shift + clickawait page.get_by_text("Item").click(modifiers=["Shift"])# Ctrl + click on Windows and Linux# Meta + click on macOSawait page.get_by_text("Item").click(modifiers=["ControlOrMeta"])# Hover over elementawait page.get_by_text("Item").hover()# Click the top left cornerawait page.get_by_text("Item").click(position={ "x": 0, "y": 0})

Under the hood, this and other pointer-related methods:

*   wait for element with given selector to be in DOM
*   wait for it to become displayed, i.e. not empty, no `display:none`, no `visibility:hidden`
*   wait for it to stop moving, for example, until css transition finishes
*   scroll the element into view
*   wait for it to receive pointer events at the action point, for example, waits until element becomes non-obscured by other elements
*   retry if the element is detached during any of the above checks

#### Forcing the click[​](#forcing-the-click "Direct link to Forcing the click")

Sometimes, apps use non-trivial logic where hovering the element overlays it with another element that intercepts the click. This behavior is indistinguishable from a bug where element gets covered and the click is dispatched elsewhere. If you know this is taking place, you can bypass the [actionability](/python/docs/actionability) checks and force the click:

*   Sync
*   Async

    page.get_by_role("button").click(force=True)

    await page.get_by_role("button").click(force=True)

#### Programmatic click[​](#programmatic-click "Direct link to Programmatic click")

If you are not interested in testing your app under the real conditions and want to simulate the click by any means possible, you can trigger the [`HTMLElement.click()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click) behavior via simply dispatching a click event on the element with [locator.dispatch\_event()](/python/docs/api/class-locator#locator-dispatch-event):

*   Sync
*   Async

    page.get_by_role("button").dispatch_event('click')

    await page.get_by_role("button").dispatch_event('click')

Type characters[​](#type-characters "Direct link to Type characters")
---------------------------------------------------------------------

caution

Most of the time, you should input text with [locator.fill()](/python/docs/api/class-locator#locator-fill). See the [Text input](#text-input) section above. You only need to type characters if there is special keyboard handling on the page.

Type into the field character by character, as if it was a user with a real keyboard with [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

*   Sync
*   Async

    # Press keys one by onepage.locator('#area').press_sequentially('Hello World!')

    # Press keys one by oneawait page.locator('#area').press_sequentially('Hello World!')

This method will emit all the necessary keyboard events, with all the `keydown`, `keyup`, `keypress` events in place. You can even specify the optional `delay` between the key presses to simulate real user behavior.

Keys and shortcuts[​](#keys-and-shortcuts "Direct link to Keys and shortcuts")
------------------------------------------------------------------------------

*   Sync
*   Async

    # Hit Enterpage.get_by_text("Submit").press("Enter")# Dispatch Control+Rightpage.get_by_role("textbox").press("Control+ArrowRight")# Press $ sign on keyboardpage.get_by_role("textbox").press("$")

    # Hit Enterawait page.get_by_text("Submit").press("Enter")# Dispatch Control+Rightawait page.get_by_role("textbox").press("Control+ArrowRight")# Press $ sign on keyboardawait page.get_by_role("textbox").press("$")

The [locator.press()](/python/docs/api/class-locator#locator-press) method focuses the selected element and produces a single keystroke. It accepts the logical key names that are emitted in the [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) property of the keyboard events:

    Backquote, Minus, Equal, Backslash, Backspace, Tab, Delete, Escape,ArrowDown, End, Enter, Home, Insert, PageDown, PageUp, ArrowRight,ArrowUp, F1 - F12, Digit0 - Digit9, KeyA - KeyZ, etc.

*   You can alternatively specify a single character you'd like to produce such as `"a"` or `"#"`.
*   Following modification shortcuts are also supported: `Shift, Control, Alt, Meta`.

Simple version produces a single character. This character is case-sensitive, so `"a"` and `"A"` will produce different results.

*   Sync
*   Async

    # <input id=name>page.locator('#name').press('Shift+A')# <input id=name>page.locator('#name').press('Shift+ArrowLeft')

    # <input id=name>await page.locator('#name').press('Shift+A')# <input id=name>await page.locator('#name').press('Shift+ArrowLeft')

Shortcuts such as `"Control+o"` or `"Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

Note that you still need to specify the capital `A` in `Shift-A` to produce the capital character. `Shift-a` produces a lower-case one as if you had the `CapsLock` toggled.

Upload files[​](#upload-files "Direct link to Upload files")
------------------------------------------------------------

You can select input files for upload using the [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) method. It expects first argument to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input) with the type `"file"`. Multiple files can be passed in the array. If some of the file paths are relative, they are resolved relative to the current working directory. Empty array clears the selected files.

*   Sync
*   Async

    # Select one filepage.get_by_label("Upload file").set_input_files('myfile.pdf')# Select multiple filespage.get_by_label("Upload files").set_input_files(['file1.txt', 'file2.txt'])# Select a directorypage.get_by_label("Upload directory").set_input_files('mydir')# Remove all the selected filespage.get_by_label("Upload file").set_input_files([])# Upload buffer from memorypage.get_by_label("Upload file").set_input_files(    files=[        {"name": "test.txt", "mimeType": "text/plain", "buffer": b"this is a test"}    ],)

    # Select one fileawait page.get_by_label("Upload file").set_input_files('myfile.pdf')# Select multiple filesawait page.get_by_label("Upload files").set_input_files(['file1.txt', 'file2.txt'])# Select a directoryawait page.get_by_label("Upload directory").set_input_files('mydir')# Remove all the selected filesawait page.get_by_label("Upload file").set_input_files([])# Upload buffer from memoryawait page.get_by_label("Upload file").set_input_files(    files=[        {"name": "test.txt", "mimeType": "text/plain", "buffer": b"this is a test"}    ],)

If you don't have input element in hand (it is created dynamically), you can handle the [page.on("filechooser")](/python/docs/api/class-page#page-event-file-chooser) event or use a corresponding waiting method upon your action:

*   Sync
*   Async

    with page.expect_file_chooser() as fc_info:    page.get_by_label("Upload file").click()file_chooser = fc_info.valuefile_chooser.set_files("myfile.pdf")

    async with page.expect_file_chooser() as fc_info:    await page.get_by_label("Upload file").click()file_chooser = await fc_info.valueawait file_chooser.set_files("myfile.pdf")

Focus element[​](#focus-element "Direct link to Focus element")
---------------------------------------------------------------

For the dynamic pages that handle focus events, you can focus the given element with [locator.focus()](/python/docs/api/class-locator#locator-focus).

*   Sync
*   Async

    page.get_by_label('password').focus()

    await page.get_by_label('password').focus()

Drag and Drop[​](#drag-and-drop "Direct link to Drag and Drop")
---------------------------------------------------------------

You can perform drag&drop operation with [locator.drag\_to()](/python/docs/api/class-locator#locator-drag-to). This method will:

*   Hover the element that will be dragged.
*   Press left mouse button.
*   Move mouse to the element that will receive the drop.
*   Release left mouse button.

*   Sync
*   Async

    page.locator("#item-to-be-dragged").drag_to(page.locator("#item-to-drop-at"))

    await page.locator("#item-to-be-dragged").drag_to(page.locator("#item-to-drop-at"))

### Dragging manually[​](#dragging-manually "Direct link to Dragging manually")

If you want precise control over the drag operation, use lower-level methods like [locator.hover()](/python/docs/api/class-locator#locator-hover), [mouse.down()](/python/docs/api/class-mouse#mouse-down), [mouse.move()](/python/docs/api/class-mouse#mouse-move) and [mouse.up()](/python/docs/api/class-mouse#mouse-up).

*   Sync
*   Async

    page.locator("#item-to-be-dragged").hover()page.mouse.down()page.locator("#item-to-drop-at").hover()page.mouse.up()

    await page.locator("#item-to-be-dragged").hover()await page.mouse.down()await page.locator("#item-to-drop-at").hover()await page.mouse.up()

note

If your page relies on the `dragover` event being dispatched, you need at least two mouse moves to trigger it in all browsers. To reliably issue the second mouse move, repeat your [mouse.move()](/python/docs/api/class-mouse#mouse-move) or [locator.hover()](/python/docs/api/class-locator#locator-hover) twice. The sequence of operations would be: hover the drag element, mouse down, hover the drop element, hover the drop element second time, mouse up.

Scrolling[​](#scrolling "Direct link to Scrolling")
---------------------------------------------------

Most of the time, Playwright will automatically scroll for you before doing any actions. Therefore, you do not need to scroll explicitly.

*   Sync
*   Async

    # Scrolls automatically so that button is visiblepage.get_by_role("button").click()

    # Scrolls automatically so that button is visibleawait page.get_by_role("button").click()

However, in rare cases you might need to manually scroll. For example, you might want to force an "infinite list" to load more elements, or position the page for a specific screenshot. In such a case, the most reliable way is to find an element that you want to make visible at the bottom, and scroll it into view.

*   Sync
*   Async

    # Scroll the footer into view, forcing an "infinite list" to load more contentpage.get_by_text("Footer text").scroll_into_view_if_needed()

    # Scroll the footer into view, forcing an "infinite list" to load more contentawait page.get_by_text("Footer text").scroll_into_view_if_needed()

If you would like to control the scrolling more precisely, use [mouse.wheel()](/python/docs/api/class-mouse#mouse-wheel) or [locator.evaluate()](/python/docs/api/class-locator#locator-evaluate):

*   Sync
*   Async

    # Position the mouse and scroll with the mouse wheelpage.get_by_test_id("scrolling-container").hover()page.mouse.wheel(0, 10)# Alternatively, programmatically scroll a specific elementpage.get_by_test_id("scrolling-container").evaluate("e => e.scrollTop += 100")

    # Position the mouse and scroll with the mouse wheelawait page.get_by_test_id("scrolling-container").hover()await page.mouse.wheel(0, 10)# Alternatively, programmatically scroll a specific elementawait page.get_by_test_id("scrolling-container").evaluate("e => e.scrollTop += 100")

# Auto-waiting

Auto-waiting
============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright performs a range of actionability checks on the elements before making actions to ensure these actions behave as expected. It auto-waits for all the relevant checks to pass and only then performs the requested action. If the required checks do not pass within the given `timeout`, action fails with the `TimeoutError`.

For example, for [locator.click()](/python/docs/api/class-locator#locator-click), Playwright will ensure that:

*   locator resolves to exactly one element
*   element is [Visible](#visible "Visible")
*   element is [Stable](#stable "Stable"), as in not animating or completed animation
*   element [Receives Events](#receives-events "Receives Events"), as in not obscured by other elements
*   element is [Enabled](#enabled "Enabled")

Here is the complete list of actionability checks performed for each action:

Action

[Visible](#visible "Visible")

[Stable](#stable "Stable")

[Receives Events](#receives-events "Receives Events")

[Enabled](#enabled "Enabled")

[Editable](#editable "Editable")

[locator.check()](/python/docs/api/class-locator#locator-check)

Yes

Yes

Yes

Yes

\-

[locator.click()](/python/docs/api/class-locator#locator-click)

Yes

Yes

Yes

Yes

\-

[locator.dblclick()](/python/docs/api/class-locator#locator-dblclick)

Yes

Yes

Yes

Yes

\-

[locator.set\_checked()](/python/docs/api/class-locator#locator-set-checked)

Yes

Yes

Yes

Yes

\-

[locator.tap()](/python/docs/api/class-locator#locator-tap)

Yes

Yes

Yes

Yes

\-

[locator.uncheck()](/python/docs/api/class-locator#locator-uncheck)

Yes

Yes

Yes

Yes

\-

[locator.hover()](/python/docs/api/class-locator#locator-hover)

Yes

Yes

Yes

\-

\-

[locator.drag\_to()](/python/docs/api/class-locator#locator-drag-to)

Yes

Yes

Yes

\-

\-

[locator.screenshot()](/python/docs/api/class-locator#locator-screenshot)

Yes

Yes

\-

\-

\-

[locator.fill()](/python/docs/api/class-locator#locator-fill)

Yes

\-

\-

Yes

Yes

[locator.clear()](/python/docs/api/class-locator#locator-clear)

Yes

\-

\-

Yes

Yes

[locator.select\_option()](/python/docs/api/class-locator#locator-select-option)

Yes

\-

\-

Yes

\-

[locator.select\_text()](/python/docs/api/class-locator#locator-select-text)

Yes

\-

\-

\-

\-

[locator.scroll\_into\_view\_if\_needed()](/python/docs/api/class-locator#locator-scroll-into-view-if-needed)

\-

Yes

\-

\-

\-

[locator.blur()](/python/docs/api/class-locator#locator-blur)

\-

\-

\-

\-

\-

[locator.dispatch\_event()](/python/docs/api/class-locator#locator-dispatch-event)

\-

\-

\-

\-

\-

[locator.focus()](/python/docs/api/class-locator#locator-focus)

\-

\-

\-

\-

\-

[locator.press()](/python/docs/api/class-locator#locator-press)

\-

\-

\-

\-

\-

[locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially)

\-

\-

\-

\-

\-

[locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files)

\-

\-

\-

\-

\-

Forcing actions[​](#forcing-actions "Direct link to Forcing actions")
---------------------------------------------------------------------

Some actions like [locator.click()](/python/docs/api/class-locator#locator-click) support `force` option that disables non-essential actionability checks, for example passing truthy `force` to [locator.click()](/python/docs/api/class-locator#locator-click) method will not check that the target element actually receives click events.

Assertions[​](#assertions "Direct link to Assertions")
------------------------------------------------------

Playwright includes auto-retrying assertions that remove flakiness by waiting until the condition is met, similarly to auto-waiting before actions.

Assertion

Description

[expect(locator).to\_be\_attached()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-attached)

Element is attached

[expect(locator).to\_be\_checked()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked)

Checkbox is checked

[expect(locator).to\_be\_disabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-disabled)

Element is disabled

[expect(locator).to\_be\_editable()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-editable)

Element is editable

[expect(locator).to\_be\_empty()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-empty)

Container is empty

[expect(locator).to\_be\_enabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)

Element is enabled

[expect(locator).to\_be\_focused()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-focused)

Element is focused

[expect(locator).to\_be\_hidden()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-hidden)

Element is not visible

[expect(locator).to\_be\_in\_viewport()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport)

Element intersects viewport

[expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible)

Element is visible

[expect(locator).to\_contain\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text)

Element contains text

[expect(locator).to\_have\_attribute()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)

Element has a DOM attribute

[expect(locator).to\_have\_class()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-class)

Element has a class property

[expect(locator).to\_have\_count()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-count)

List has exact number of children

[expect(locator).to\_have\_css()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-css)

Element has CSS property

[expect(locator).to\_have\_id()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-id)

Element has an ID

[expect(locator).to\_have\_js\_property()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-js-property)

Element has a JavaScript property

[expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text)

Element matches text

[expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value)

Input has a value

[expect(locator).to\_have\_values()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-values)

Select has options selected

[expect(page).to\_have\_title()](/python/docs/api/class-pageassertions#page-assertions-to-have-title)

Page has a title

[expect(page).to\_have\_url()](/python/docs/api/class-pageassertions#page-assertions-to-have-url)

Page has a URL

[expect(response).to\_be\_ok()](/python/docs/api/class-apiresponseassertions#api-response-assertions-to-be-ok)

Response has an OK status

Learn more in the [assertions guide](/python/docs/test-assertions).

Visible[​](#visible "Direct link to Visible")
---------------------------------------------

Element is considered visible when it has non-empty bounding box and does not have `visibility:hidden` computed style.

Note that according to this definition:

*   Elements of zero size **are not** considered visible.
*   Elements with `display:none` **are not** considered visible.
*   Elements with `opacity:0` **are** considered visible.

Stable[​](#stable "Direct link to Stable")
------------------------------------------

Element is considered stable when it has maintained the same bounding box for at least two consecutive animation frames.

Enabled[​](#enabled "Direct link to Enabled")
---------------------------------------------

Element is considered enabled when it is **not disabled**.

Element is **disabled** when:

*   it is a `<button>`, `<select>`, `<input>`, `<textarea>`, `<option>` or `<optgroup>` with a `[disabled]` attribute;
*   it is a `<button>`, `<select>`, `<input>`, `<textarea>`, `<option>` or `<optgroup>` that is a part of a `<fieldset>` with a `[disabled]` attribute;
*   it is a descendant of an element with `[aria-disabled=true]` attribute.

Editable[​](#editable "Direct link to Editable")
------------------------------------------------

Element is considered editable when it is [enabled](#enabled "Enabled") and is **not readonly**.

Element is **readonly** when:

*   it is a `<select>`, `<input>` or `<textarea>` with a `[readonly]` attribute;
*   it has an `[aria-readonly=true]` attribute and an aria role that [supports it](https://w3c.github.io/aria/#aria-readonly).

Receives Events[​](#receives-events "Direct link to Receives Events")
---------------------------------------------------------------------

Element is considered receiving pointer events when it is the hit target of the pointer event at the action point. For example, when clicking at the point `(10;10)`, Playwright checks whether some other element (usually an overlay) will instead capture the click at `(10;10)`.

For example, consider a scenario where Playwright will click `Sign Up` button regardless of when the [locator.click()](/python/docs/api/class-locator#locator-click) call was made:

*   page is checking that user name is unique and `Sign Up` button is disabled;
*   after checking with the server, the disabled `Sign Up` button is replaced with another one that is now enabled.

# API testing

API testing
===========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can be used to get access to the [REST](https://en.wikipedia.org/wiki/Representational_state_transfer) API of your application.

Sometimes you may want to send requests to the server directly from Python without loading a page and running js code in it. A few examples where it may come in handy:

*   Test your server API.
*   Prepare server side state before visiting the web application in a test.
*   Validate server side post-conditions after running some actions in the browser.

All of that could be achieved via [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") methods.

The following examples rely on the [`pytest-playwright`](/python/docs/test-runners) package which add Playwright fixtures to the Pytest test-runner.

Writing API Test[​](#writing-api-test "Direct link to Writing API Test")
------------------------------------------------------------------------

[APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") can send all kinds of HTTP(S) requests over network.

The following example demonstrates how to use Playwright to test issues creation via [GitHub API](https://docs.github.com/en/rest). The test suite will do the following:

*   Create a new repository before running tests.
*   Create a few issues and validate server state.
*   Delete the repository after running tests.

### Configure[​](#configure "Direct link to Configure")

GitHub API requires authorization, so we'll configure the token once for all tests. While at it, we'll also set the `baseURL` to simplify the tests.

    import osfrom typing import Generatorimport pytestfrom playwright.sync_api import Playwright, APIRequestContextGITHUB_API_TOKEN = os.getenv("GITHUB_API_TOKEN")assert GITHUB_API_TOKEN, "GITHUB_API_TOKEN is not set"@pytest.fixture(scope="session")def api_request_context(    playwright: Playwright,) -> Generator[APIRequestContext, None, None]:    headers = {        # We set this header per GitHub guidelines.        "Accept": "application/vnd.github.v3+json",        # Add authorization token to all requests.        # Assuming personal access token available in the environment.        "Authorization": f"token {GITHUB_API_TOKEN}",    }    request_context = playwright.request.new_context(        base_url="https://api.github.com", extra_http_headers=headers    )    yield request_context    request_context.dispose()

### Write tests[​](#write-tests "Direct link to Write tests")

Now that we initialized request object we can add a few tests that will create new issues in the repository.

    import osfrom typing import Generatorimport pytestfrom playwright.sync_api import Playwright, APIRequestContextGITHUB_API_TOKEN = os.getenv("GITHUB_API_TOKEN")assert GITHUB_API_TOKEN, "GITHUB_API_TOKEN is not set"GITHUB_USER = os.getenv("GITHUB_USER")assert GITHUB_USER, "GITHUB_USER is not set"GITHUB_REPO = "test"# ...def test_should_create_bug_report(api_request_context: APIRequestContext) -> None:    data = {        "title": "[Bug] report 1",        "body": "Bug description",    }    new_issue = api_request_context.post(f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues", data=data)    assert new_issue.ok    issues = api_request_context.get(f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues")    assert issues.ok    issues_response = issues.json()    issue = list(filter(lambda issue: issue["title"] == "[Bug] report 1", issues_response))[0]    assert issue    assert issue["body"] == "Bug description"def test_should_create_feature_request(api_request_context: APIRequestContext) -> None:    data = {        "title": "[Feature] request 1",        "body": "Feature description",    }    new_issue = api_request_context.post(f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues", data=data)    assert new_issue.ok    issues = api_request_context.get(f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues")    assert issues.ok    issues_response = issues.json()    issue = list(filter(lambda issue: issue["title"] == "[Feature] request 1", issues_response))[0]    assert issue    assert issue["body"] == "Feature description"

### Setup and teardown[​](#setup-and-teardown "Direct link to Setup and teardown")

These tests assume that repository exists. You probably want to create a new one before running tests and delete it afterwards. Use a [session fixture](https://docs.pytest.org/en/stable/how-to/fixtures.html#fixture-scopes) for that. The part before `yield` is the before all and after is the after all.

    # ...@pytest.fixture(scope="session", autouse=True)def create_test_repository(    api_request_context: APIRequestContext,) -> Generator[None, None, None]:    # Before all    new_repo = api_request_context.post("/user/repos", data={"name": GITHUB_REPO})    assert new_repo.ok    yield    # After all    deleted_repo = api_request_context.delete(f"/repos/{GITHUB_USER}/{GITHUB_REPO}")    assert deleted_repo.ok

### Complete test example[​](#complete-test-example "Direct link to Complete test example")

Here is the complete example of an API test:

    from enum import autoimport osfrom typing import Generatorimport pytestfrom playwright.sync_api import Playwright, Page, APIRequestContext, expectGITHUB_API_TOKEN = os.getenv("GITHUB_API_TOKEN")assert GITHUB_API_TOKEN, "GITHUB_API_TOKEN is not set"GITHUB_USER = os.getenv("GITHUB_USER")assert GITHUB_USER, "GITHUB_USER is not set"GITHUB_REPO = "test"@pytest.fixture(scope="session")def api_request_context(    playwright: Playwright,) -> Generator[APIRequestContext, None, None]:    headers = {        # We set this header per GitHub guidelines.        "Accept": "application/vnd.github.v3+json",        # Add authorization token to all requests.        # Assuming personal access token available in the environment.        "Authorization": f"token {GITHUB_API_TOKEN}",    }    request_context = playwright.request.new_context(        base_url="https://api.github.com", extra_http_headers=headers    )    yield request_context    request_context.dispose()@pytest.fixture(scope="session", autouse=True)def create_test_repository(    api_request_context: APIRequestContext,) -> Generator[None, None, None]:    # Before all    new_repo = api_request_context.post("/user/repos", data={"name": GITHUB_REPO})    assert new_repo.ok    yield    # After all    deleted_repo = api_request_context.delete(f"/repos/{GITHUB_USER}/{GITHUB_REPO}")    assert deleted_repo.okdef test_should_create_bug_report(api_request_context: APIRequestContext) -> None:    data = {        "title": "[Bug] report 1",        "body": "Bug description",    }    new_issue = api_request_context.post(        f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues", data=data    )    assert new_issue.ok    issues = api_request_context.get(f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues")    assert issues.ok    issues_response = issues.json()    issue = list(        filter(lambda issue: issue["title"] == "[Bug] report 1", issues_response)    )[0]    assert issue    assert issue["body"] == "Bug description"def test_should_create_feature_request(api_request_context: APIRequestContext) -> None:    data = {        "title": "[Feature] request 1",        "body": "Feature description",    }    new_issue = api_request_context.post(        f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues", data=data    )    assert new_issue.ok    issues = api_request_context.get(f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues")    assert issues.ok    issues_response = issues.json()    issue = list(        filter(lambda issue: issue["title"] == "[Feature] request 1", issues_response)    )[0]    assert issue    assert issue["body"] == "Feature description"

Prepare server state via API calls[​](#prepare-server-state-via-api-calls "Direct link to Prepare server state via API calls")
------------------------------------------------------------------------------------------------------------------------------

The following test creates a new issue via API and then navigates to the list of all issues in the project to check that it appears at the top of the list. The check is performed using [LocatorAssertions](/python/docs/api/class-locatorassertions "LocatorAssertions").

    def test_last_created_issue_should_be_first_in_the_list(api_request_context: APIRequestContext, page: Page) -> None:    def create_issue(title: str) -> None:        data = {            "title": title,            "body": "Feature description",        }        new_issue = api_request_context.post(            f"/repos/{GITHUB_USER}/{GITHUB_REPO}/issues", data=data        )        assert new_issue.ok    create_issue("[Feature] request 1")    create_issue("[Feature] request 2")    page.goto(f"https://github.com/{GITHUB_USER}/{GITHUB_REPO}/issues")    first_issue = page.locator("a[data-hovercard-type='issue']").first    expect(first_issue).to_have_text("[Feature] request 2")

Check the server state after running user actions[​](#check-the-server-state-after-running-user-actions "Direct link to Check the server state after running user actions")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

The following test creates a new issue via user interface in the browser and then checks via API if it was created:

    def test_last_created_issue_should_be_on_the_server(api_request_context: APIRequestContext, page: Page) -> None:    page.goto(f"https://github.com/{GITHUB_USER}/{GITHUB_REPO}/issues")    page.locator("text=New issue").click()    page.locator("[aria-label='Title']").fill("Bug report 1")    page.locator("[aria-label='Comment body']").fill("Bug description")    page.locator("text=Submit new issue").click()    issue_id = page.url.split("/")[-1]    new_issue = api_request_context.get(f"https://github.com/{GITHUB_USER}/{GITHUB_REPO}/issues/{issue_id}")    assert new_issue.ok    assert new_issue.json()["title"] == "[Bug] report 1"    assert new_issue.json()["body"] == "Bug description"

Reuse authentication state[​](#reuse-authentication-state "Direct link to Reuse authentication state")
------------------------------------------------------------------------------------------------------

Web apps use cookie-based or token-based authentication, where authenticated state is stored as [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies). Playwright provides [api\_request\_context.storage\_state()](/python/docs/api/class-apirequestcontext#api-request-context-storage-state) method that can be used to retrieve storage state from an authenticated context and then create new contexts with that state.

Storage state is interchangeable between [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext") and [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext"). You can use it to log in via API calls and then create a new context with cookies already there. The following code snippet retrieves state from an authenticated [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") and creates a new [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext") with that state.

    request_context = playwright.request.new_context(http_credentials={"username": "test", "password": "test"})request_context.get("https://api.example.com/login")# Save storage state into a variable.state = request_context.storage_state()# Create a new context with the saved storage state.context = browser.new_context(storage_state=state)

# Assertions

Assertions
==========

List of assertions[​](#list-of-assertions "Direct link to List of assertions")
------------------------------------------------------------------------------

Assertion

Description

[expect(locator).to\_be\_attached()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-attached)

Element is attached

[expect(locator).to\_be\_checked()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked)

Checkbox is checked

[expect(locator).to\_be\_disabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-disabled)

Element is disabled

[expect(locator).to\_be\_editable()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-editable)

Element is editable

[expect(locator).to\_be\_empty()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-empty)

Container is empty

[expect(locator).to\_be\_enabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)

Element is enabled

[expect(locator).to\_be\_focused()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-focused)

Element is focused

[expect(locator).to\_be\_hidden()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-hidden)

Element is not visible

[expect(locator).to\_be\_in\_viewport()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport)

Element intersects viewport

[expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible)

Element is visible

[expect(locator).to\_contain\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text)

Element contains text

[expect(locator).to\_have\_accessible\_description()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description)

Element has a matching [accessible description](https://w3c.github.io/accname/#dfn-accessible-description)

[expect(locator).to\_have\_accessible\_name()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name)

Element has a matching [accessible name](https://w3c.github.io/accname/#dfn-accessible-name)

[expect(locator).to\_have\_attribute()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)

Element has a DOM attribute

[expect(locator).to\_have\_class()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-class)

Element has a class property

[expect(locator).to\_have\_count()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-count)

List has exact number of children

[expect(locator).to\_have\_css()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-css)

Element has CSS property

[expect(locator).to\_have\_id()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-id)

Element has an ID

[expect(locator).to\_have\_js\_property()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-js-property)

Element has a JavaScript property

[expect(locator).to\_have\_role()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-role)

Element has a specific [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles)

[expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text)

Element matches text

[expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value)

Input has a value

[expect(locator).to\_have\_values()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-values)

Select has options selected

[expect(page).to\_have\_title()](/python/docs/api/class-pageassertions#page-assertions-to-have-title)

Page has a title

[expect(page).to\_have\_url()](/python/docs/api/class-pageassertions#page-assertions-to-have-url)

Page has a URL

[expect(response).to\_be\_ok()](/python/docs/api/class-apiresponseassertions#api-response-assertions-to-be-ok)

Response has an OK status

Custom Expect Message[​](#custom-expect-message "Direct link to Custom Expect Message")
---------------------------------------------------------------------------------------

You can specify a custom expect message as a second argument to the `expect` function, for example:

    expect(page.get_by_text("Name"), "should be logged in").to_be_visible()

When expect fails, the error would look like this:

        def test_foobar(page: Page) -> None:>       expect(page.get_by_text("Name"), "should be logged in").to_be_visible()E       AssertionError: should be logged inE       Actual value: NoneE       Call log:E       LocatorAssertions.to_be_visible with timeout 5000msE       waiting for get_by_text("Name")E       waiting for get_by_text("Name")tests/test_foobar.py:22: AssertionError

Setting a custom timeout[​](#setting-a-custom-timeout "Direct link to Setting a custom timeout")
------------------------------------------------------------------------------------------------

You can specify a custom timeout for assertions either globally or per assertion. The default timeout is 5 seconds.

### Global timeout[​](#global-timeout "Direct link to Global timeout")

conftest.py

    from playwright.sync_api import expectexpect.set_options(timeout=10_000)

### Per assertion timeout[​](#per-assertion-timeout "Direct link to Per assertion timeout")

test\_foobar.py

    from playwright.sync_api import expectdef test_foobar(page: Page) -> None:    expect(page.get_by_text("Name")).to_be_visible(timeout=10_000)

# Authentication

Authentication
==============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright executes tests in isolated environments called [browser contexts](/python/docs/browser-contexts). This isolation model improves reproducibility and prevents cascading test failures. Tests can load existing authenticated state. This eliminates the need to authenticate in every test and speeds up test execution.

Core concepts[​](#core-concepts "Direct link to Core concepts")
---------------------------------------------------------------

Regardless of the authentication strategy you choose, you are likely to store authenticated browser state on the file system.

We recommend to create `playwright/.auth` directory and add it to your `.gitignore`. Your authentication routine will produce authenticated browser state and save it to a file in this `playwright/.auth` directory. Later on, tests will reuse this state and start already authenticated.

danger

The browser state file may contain sensitive cookies and headers that could be used to impersonate you or your test account. We strongly discourage checking them into private or public repositories.

*   Bash
*   PowerShell
*   Batch

    mkdir -p playwright/.authecho $'\nplaywright/.auth' >> .gitignore

    New-Item -ItemType Directory -Force -Path playwright\.authAdd-Content -path .gitignore "`r`nplaywright/.auth"

    md playwright\.authecho. >> .gitignoreecho "playwright/.auth" >> .gitignore

Signing in before each test[​](#signing-in-before-each-test "Direct link to Signing in before each test")
---------------------------------------------------------------------------------------------------------

The Playwright API can [automate interaction](/python/docs/input) with a login form.

The following example logs into GitHub. Once these steps are executed, the browser context will be authenticated.

*   Sync
*   Async

    page = context.new_page()page.goto('https://github.com/login')# Interact with login formpage.get_by_label("Username or email address").fill("username")page.get_by_label("Password").fill("password")page.get_by_role("button", name="Sign in").click()# Continue with the test

    page = await context.new_page()await page.goto('https://github.com/login')# Interact with login formawait page.get_by_label("Username or email address").fill("username")await page.get_by_label("Password").fill("password")await page.get_by_role("button", name="Sign in").click()# Continue with the test

Redoing login for every test can slow down test execution. To mitigate that, reuse existing authentication state instead.

Reusing signed in state[​](#reusing-signed-in-state "Direct link to Reusing signed in state")
---------------------------------------------------------------------------------------------

Playwright provides a way to reuse the signed-in state in the tests. That way you can log in only once and then skip the log in step for all of the tests.

Web apps use cookie-based or token-based authentication, where authenticated state is stored as [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), in [local storage](https://developer.mozilla.org/en-US/docs/Web/API/Storage) or in [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API). Playwright provides [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state) method that can be used to retrieve storage state from authenticated contexts and then create new contexts with prepopulated state.

Cookies, local storage and IndexedDB state can be used across different browsers. They depend on your application's authentication model which may require some combination of cookies, local storage or IndexedDB.

The following code snippet retrieves state from an authenticated context and creates a new context with that state.

*   Sync
*   Async

    # Save storage state into the file.storage = context.storage_state(path="state.json")# Create a new context with the saved storage state.context = browser.new_context(storage_state="state.json")

    # Save storage state into the file.storage = await context.storage_state(path="state.json")# Create a new context with the saved storage state.context = await browser.new_context(storage_state="state.json")

Advanced scenarios[​](#advanced-scenarios "Direct link to Advanced scenarios")
------------------------------------------------------------------------------

### Session storage[​](#session-storage "Direct link to Session storage")

Reusing authenticated state covers [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), [local storage](https://developer.mozilla.org/en-US/docs/Web/API/Storage) and [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) based authentication. Rarely, [session storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage) is used for storing information associated with the signed-in state. Session storage is specific to a particular domain and is not persisted across page loads. Playwright does not provide API to persist session storage, but the following snippet can be used to save/load session storage.

*   Sync
*   Async

    import os# Get session storage and store as env variablesession_storage = page.evaluate("() => JSON.stringify(sessionStorage)")os.environ["SESSION_STORAGE"] = session_storage# Set session storage in a new contextsession_storage = os.environ["SESSION_STORAGE"]context.add_init_script("""(storage => {  if (window.location.hostname === 'example.com') {    const entries = JSON.parse(storage)    for (const [key, value] of Object.entries(entries)) {      window.sessionStorage.setItem(key, value)    }  }})('""" + session_storage + "')")

    import os# Get session storage and store as env variablesession_storage = await page.evaluate("() => JSON.stringify(sessionStorage)")os.environ["SESSION_STORAGE"] = session_storage# Set session storage in a new contextsession_storage = os.environ["SESSION_STORAGE"]await context.add_init_script("""(storage => {  if (window.location.hostname === 'example.com') {    const entries = JSON.parse(storage)    for (const [key, value] of Object.entries(entries)) {      window.sessionStorage.setItem(key, value)    }  }})('""" + session_storage + "')")

# Browsers

Browsers
========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Each version of Playwright needs specific versions of browser binaries to operate. You will need to use the Playwright CLI to install these browsers.

With every release, Playwright updates the versions of the browsers it supports, so that the latest Playwright would support the latest browsers at any moment. It means that every time you update Playwright, you might need to re-run the `install` CLI command.

Install browsers[​](#install-browsers "Direct link to Install browsers")
------------------------------------------------------------------------

Playwright can install supported browsers. Running the command without arguments will install the default browsers.

    playwright install

You can also install specific browsers by providing an argument:

    playwright install webkit

See all supported browsers:

    playwright install --help

Install system dependencies[​](#install-system-dependencies "Direct link to Install system dependencies")
---------------------------------------------------------------------------------------------------------

System dependencies can get installed automatically. This is useful for CI environments.

    playwright install-deps

You can also install the dependencies for a single browser by passing it as an argument:

    playwright install-deps chromium

It's also possible to combine `install-deps` with `install` so that the browsers and OS dependencies are installed with a single command.

    playwright install --with-deps chromium

See [system requirements](/python/docs/intro#system-requirements) for officially supported operating systems.

Configure Browsers[​](#configure-browsers "Direct link to Configure Browsers")
------------------------------------------------------------------------------

Playwright can run tests on Chromium, WebKit and Firefox browsers as well as branded browsers such as Google Chrome and Microsoft Edge. It can also run on emulated tablet and mobile devices. See the [registry of device parameters](https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json) for a complete list of selected desktop, tablet and mobile devices.

### Run tests on different browsers[​](#run-tests-on-different-browsers "Direct link to Run tests on different browsers")

Run tests on a specific browser:

    pytest test_login.py --browser webkit

Run tests on multiple browsers:

    pytest test_login.py --browser webkit --browser firefox

Test against mobile viewports:

    pytest test_login.py --device="iPhone 13"

Test against branded browsers:

    pytest test_login.py --browser-channel msedge

### Chromium[​](#chromium "Direct link to Chromium")

For Google Chrome, Microsoft Edge and other Chromium-based browsers, by default, Playwright uses open source Chromium builds. Since the Chromium project is ahead of the branded browsers, when the world is on Google Chrome N, Playwright already supports Chromium N+1 that will be released in Google Chrome and Microsoft Edge a few weeks later.

### Chromium: headless shell[​](#chromium-headless-shell "Direct link to Chromium: headless shell")

Playwright ships a regular Chromium build for headed operations and a separate [chromium headless shell](https://developer.chrome.com/blog/chrome-headless-shell) for headless mode.

If you are only running tests in headless shell (i.e. the `channel` option is **not** specified), for example on CI, you can avoid downloading the full Chromium browser by passing `--only-shell` during installation.

    # only running tests headlesslyplaywright install --with-deps --only-shell

### Chromium: new headless mode[​](#chromium-new-headless-mode "Direct link to Chromium: new headless mode")

You can opt into the new headless mode by using `'chromium'` channel. As [official Chrome documentation puts it](https://developer.chrome.com/blog/chrome-headless-shell):

> New Headless on the other hand is the real Chrome browser, and is thus more authentic, reliable, and offers more features. This makes it more suitable for high-accuracy end-to-end web app testing or browser extension testing.

See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for details.

    pytest test_login.py --browser-channel chromium

With the new headless mode, you can skip downloading the headless shell during browser installation by using the `--no-shell` option:

    # only running tests headlesslyplaywright install --with-deps --no-shell

### Google Chrome & Microsoft Edge[​](#google-chrome--microsoft-edge "Direct link to Google Chrome & Microsoft Edge")

While Playwright can download and use the recent Chromium build, it can operate against the branded Google Chrome and Microsoft Edge browsers available on the machine (note that Playwright doesn't install them by default). In particular, the current Playwright version will support Stable and Beta channels of these browsers.

Available channels are `chrome`, `msedge`, `chrome-beta`, `msedge-beta`, `chrome-dev`, `msedge-dev`, `chrome-canary`, `msedge-canary`.

warning

Certain Enterprise Browser Policies may impact Playwright's ability to launch and control Google Chrome and Microsoft Edge. Running in an environment with browser policies is outside of the Playwright project's scope.

warning

Google Chrome and Microsoft Edge have switched to a [new headless mode](https://developer.chrome.com/docs/chromium/headless) implementation that is closer to a regular headed mode. This differs from [chromium headless shell](https://developer.chrome.com/blog/chrome-headless-shell) that is used in Playwright by default when running headless, so expect different behavior in some cases. See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for details.

    pytest test_login.py --browser-channel msedge

Alternatively when using the library directly, you can specify the browser [channel](/python/docs/api/class-browsertype#browser-type-launch-option-channel) when launching the browser:

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    # Channel can be "chrome", "msedge", "chrome-beta", "msedge-beta" or "msedge-dev".    browser = p.chromium.launch(channel="msedge")    page = browser.new_page()    page.goto("https://playwright.dev")    print(page.title())    browser.close()

#### Installing Google Chrome & Microsoft Edge[​](#installing-google-chrome--microsoft-edge "Direct link to Installing Google Chrome & Microsoft Edge")

If Google Chrome or Microsoft Edge is not available on your machine, you can install them using the Playwright command line tool:

    playwright install msedge

warning

Google Chrome or Microsoft Edge installations will be installed at the default global location of your operating system overriding your current browser installation.

Run with the `--help` option to see a full a list of browsers that can be installed.

#### When to use Google Chrome & Microsoft Edge and when not to?[​](#when-to-use-google-chrome--microsoft-edge-and-when-not-to "Direct link to When to use Google Chrome & Microsoft Edge and when not to?")

##### Defaults[​](#defaults "Direct link to Defaults")

Using the default Playwright configuration with the latest Chromium is a good idea most of the time. Since Playwright is ahead of Stable channels for the browsers, it gives peace of mind that the upcoming Google Chrome or Microsoft Edge releases won't break your site. You catch breakage early and have a lot of time to fix it before the official Chrome update.

##### Regression testing[​](#regression-testing "Direct link to Regression testing")

Having said that, testing policies often require regression testing to be performed against the current publicly available browsers. In this case, you can opt into one of the stable channels, `"chrome"` or `"msedge"`.

##### Media codecs[​](#media-codecs "Direct link to Media codecs")

Another reason for testing using official binaries is to test functionality related to media codecs. Chromium does not have all the codecs that Google Chrome or Microsoft Edge are bundling due to various licensing considerations and agreements. If your site relies on this kind of codecs (which is rarely the case), you will also want to use the official channel.

##### Enterprise policy[​](#enterprise-policy "Direct link to Enterprise policy")

Google Chrome and Microsoft Edge respect enterprise policies, which include limitations to the capabilities, network proxy, mandatory extensions that stand in the way of testing. So if you are part of the organization that uses such policies, it is easiest to use bundled Chromium for your local testing, you can still opt into stable channels on the bots that are typically free of such restrictions.

### Firefox[​](#firefox "Direct link to Firefox")

Playwright's Firefox version matches the recent [Firefox Stable](https://www.mozilla.org/en-US/firefox/new/) build. Playwright doesn't work with the branded version of Firefox since it relies on patches.

Note that availability of certain features, which depend heavily on the underlying platform, may vary between operating systems. For example, available media codecs vary substantially between Linux, macOS and Windows.

### WebKit[​](#webkit "Direct link to WebKit")

Playwright's WebKit is derived from the latest WebKit main branch sources, often before these updates are incorporated into Apple Safari and other WebKit-based browsers. This gives a lot of lead time to react on the potential browser update issues. Playwright doesn't work with the branded version of Safari since it relies on patches. Instead, you can test using the most recent WebKit build.

Note that availability of certain features, which depend heavily on the underlying platform, may vary between operating systems. For example, available media codecs vary substantially between Linux, macOS and Windows. While running WebKit on Linux CI is usually the most affordable option, for the closest-to-Safari experience you should run WebKit on mac, for example if you do video playback.

Install behind a firewall or a proxy[​](#install-behind-a-firewall-or-a-proxy "Direct link to Install behind a firewall or a proxy")
------------------------------------------------------------------------------------------------------------------------------------

By default, Playwright downloads browsers from Microsoft's CDN.

Sometimes companies maintain an internal proxy that blocks direct access to the public resources. In this case, Playwright can be configured to download browsers via a proxy server.

*   Bash
*   PowerShell
*   Batch

    pip install playwrightHTTPS_PROXY=https://192.0.2.1 playwright install

    $Env:HTTPS_PROXY="https://192.0.2.1"pip install playwrightplaywright install

    set HTTPS_PROXY=https://192.0.2.1pip install playwrightplaywright install

If the requests of the proxy get intercepted with a custom untrusted certificate authority (CA) and it yields to `Error: self signed certificate in certificate chain` while downloading the browsers, you must set your custom root certificates via the [`NODE_EXTRA_CA_CERTS`](https://nodejs.org/api/cli.html#node_extra_ca_certsfile) environment variable before installing the browsers:

*   Bash
*   PowerShell
*   Batch

    export NODE_EXTRA_CA_CERTS="/path/to/cert.pem"

    $Env:NODE_EXTRA_CA_CERTS="C:\certs\root.crt"

    set NODE_EXTRA_CA_CERTS="C:\certs\root.crt"

If your network is slow to connect to Playwright browser archive, you can increase the connection timeout in milliseconds with `PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT` environment variable:

*   Bash
*   PowerShell
*   Batch

    pip install playwrightPLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT=120000 playwright install

    $Env:PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT="120000"pip install playwrightplaywright install

    set PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT=120000pip install playwrightplaywright install

If you are [installing dependencies](#install-system-dependencies) and need to use a proxy on Linux, make sure to run the command as a root user. Otherwise, Playwright will attempt to become a root and will not pass environment variables like `HTTPS_PROXY` to the linux package manager.

    sudo HTTPS_PROXY=https://192.0.2.1 playwright install-deps

Download from artifact repository[​](#download-from-artifact-repository "Direct link to Download from artifact repository")
---------------------------------------------------------------------------------------------------------------------------

By default, Playwright downloads browsers from Microsoft's CDN.

Sometimes companies maintain an internal artifact repository to host browser binaries. In this case, Playwright can be configured to download from a custom location using the `PLAYWRIGHT_DOWNLOAD_HOST` env variable.

*   Bash
*   PowerShell
*   Batch

    pip install playwrightPLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1 playwright install

    $Env:PLAYWRIGHT_DOWNLOAD_HOST="http://192.0.2.1"pip install playwrightplaywright install

    set PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1pip install playwrightplaywright install

It is also possible to use a per-browser download hosts using `PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST`, `PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST` and `PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST` env variables that take precedence over `PLAYWRIGHT_DOWNLOAD_HOST`.

*   Bash
*   PowerShell
*   Batch

    pip install playwrightPLAYWRIGHT_FIREFOX_DOWNLOAD_HOST=http://203.0.113.3 PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1 playwright install

    $Env:PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST="http://203.0.113.3"$Env:PLAYWRIGHT_DOWNLOAD_HOST="http://192.0.2.1"pip install playwrightplaywright install

    set PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST=http://203.0.113.3set PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1pip install playwrightplaywright install

Managing browser binaries[​](#managing-browser-binaries "Direct link to Managing browser binaries")
---------------------------------------------------------------------------------------------------

Playwright downloads Chromium, WebKit and Firefox browsers into the OS-specific cache folders:

*   `%USERPROFILE%\AppData\Local\ms-playwright` on Windows
*   `~/Library/Caches/ms-playwright` on macOS
*   `~/.cache/ms-playwright` on Linux

These browsers will take a few hundred megabytes of disk space when installed:

    du -hs ~/Library/Caches/ms-playwright/*281M  chromium-XXXXXX187M  firefox-XXXX180M  webkit-XXXX

You can override default behavior using environment variables. When installing Playwright, ask it to download browsers into a specific location:

*   Bash
*   PowerShell
*   Batch

    pip install playwrightPLAYWRIGHT_BROWSERS_PATH=$HOME/pw-browsers python -m playwright install

    $Env:PLAYWRIGHT_BROWSERS_PATH="$Env:USERPROFILE\pw-browsers"pip install playwrightplaywright install

    set PLAYWRIGHT_BROWSERS_PATH=%USERPROFILE%\pw-browserspip install playwrightplaywright install

When running Playwright scripts, ask it to search for browsers in a shared location.

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_BROWSERS_PATH=$HOME/pw-browsers python playwright_script.py

    $Env:PLAYWRIGHT_BROWSERS_PATH="$Env:USERPROFILE\pw-browsers"python playwright_script.py

    set PLAYWRIGHT_BROWSERS_PATH=%USERPROFILE%\pw-browserspython playwright_script.py

Playwright keeps track of packages that need those browsers and will garbage collect them as you update Playwright to the newer versions.

note

Developers can opt-in in this mode via exporting `PLAYWRIGHT_BROWSERS_PATH=$HOME/pw-browsers` in their `.bashrc`.

### Stale browser removal[​](#stale-browser-removal "Direct link to Stale browser removal")

Playwright keeps track of the clients that use its browsers. When there are no more clients that require a particular version of the browser, that version is deleted from the system. That way you can safely use Playwright instances of different versions and at the same time, you don't waste disk space for the browsers that are no longer in use.

To opt-out from the unused browser removal, you can set the `PLAYWRIGHT_SKIP_BROWSER_GC=1` environment variable.

### Uninstall browsers[​](#uninstall-browsers "Direct link to Uninstall browsers")

This will remove the browsers (chromium, firefox, webkit) of the current Playwright installation:

    playwright uninstall

To remove browsers of other Playwright installations as well, pass `--all` flag:

    playwright uninstall --all

# Chrome extensions

Chrome extensions
=================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

note

Extensions only work in Chrome / Chromium launched with a persistent context. Use custom browser args at your own risk, as some of them may break Playwright functionality.

The snippet below retrieves the [background page](https://developer.chrome.com/extensions/background_pages) of a [Manifest v2](https://developer.chrome.com/docs/extensions/mv2/) extension whose source is located in `./my-extension`.

Note the use of the `chromium` channel that allows to run extensions in headless mode. Alternatively, you can launch the browser in headed mode.

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightpath_to_extension = "./my-extension"user_data_dir = "/tmp/test-user-data-dir"def run(playwright: Playwright):    context = playwright.chromium.launch_persistent_context(        user_data_dir,        channel="chromium",        args=[            f"--disable-extensions-except={path_to_extension}",            f"--load-extension={path_to_extension}",        ],    )    if len(context.background_pages) == 0:        background_page = context.wait_for_event('backgroundpage')    else:        background_page = context.background_pages[0]    # Test the background page as you would any other page.    context.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightpath_to_extension = "./my-extension"user_data_dir = "/tmp/test-user-data-dir"async def run(playwright: Playwright):    context = await playwright.chromium.launch_persistent_context(        user_data_dir,        channel="chromium",        args=[            f"--disable-extensions-except={path_to_extension}",            f"--load-extension={path_to_extension}",        ],    )    if len(context.background_pages) == 0:        background_page = await context.wait_for_event('backgroundpage')    else:        background_page = context.background_pages[0]    # Test the background page as you would any other page.    await context.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

Testing[​](#testing "Direct link to Testing")
---------------------------------------------

To have the extension loaded when running tests you can use a test fixture to set the context. You can also dynamically retrieve the extension id and use it to load and test the popup page for example.

Note the use of the `chromium` channel that allows to run extensions in headless mode. Alternatively, you can launch the browser in headed mode.

First, add fixtures that will load the extension:

conftest.py

    from typing import Generatorfrom pathlib import Pathfrom playwright.sync_api import Playwright, BrowserContextimport pytest@pytest.fixture()def context(playwright: Playwright) -> Generator[BrowserContext, None, None]:    path_to_extension = Path(__file__).parent.joinpath("my-extension")    context = playwright.chromium.launch_persistent_context(        "",        channel="chromium",        args=[            f"--disable-extensions-except={path_to_extension}",            f"--load-extension={path_to_extension}",        ],    )    yield context    context.close()@pytest.fixture()def extension_id(context) -> Generator[str, None, None]:    # for manifest v2:    # background = context.background_pages[0]    # if not background:    #     background = context.wait_for_event("backgroundpage")    # for manifest v3:    background = context.service_workers[0]    if not background:        background = context.wait_for_event("serviceworker")    extension_id = background.url.split("/")[2]    yield extension_id

Then use these fixtures in a test:

test\_foo.py

    from playwright.sync_api import expect, Pagedef test_example_test(page: Page) -> None:    page.goto("https://example.com")    expect(page.locator("body")).to_contain_text("Changed by my-extension")def test_popup_page(page: Page, extension_id: str) -> None:    page.goto(f"chrome-extension://{extension_id}/popup.html")    expect(page.locator("body")).to_have_text("my-extension popup")

# Clock

Clock
=====

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Accurately simulating time-dependent behavior is essential for verifying the correctness of applications. Utilizing [Clock](/python/docs/api/class-clock "Clock") functionality allows developers to manipulate and control time within tests, enabling the precise validation of features such as rendering time, timeouts, scheduled tasks without the delays and variability of real-time execution.

The [Clock](/python/docs/api/class-clock "Clock") API provides the following methods to control time:

*   `setFixedTime`: Sets the fixed time for `Date.now()` and `new Date()`.
*   `install`: initializes the clock and allows you to:
    *   `pauseAt`: Pauses the time at a specific time.
    *   `fastForward`: Fast forwards the time.
    *   `runFor`: Runs the time for a specific duration.
    *   `resume`: Resumes the time.
*   `setSystemTime`: Sets the current system time.

The recommended approach is to use `setFixedTime` to set the time to a specific value. If that doesn't work for your use case, you can use `install` which allows you to pause time later on, fast forward it, tick it, etc. `setSystemTime` is only recommended for advanced use cases.

note

[page.clock](/python/docs/api/class-page#page-clock) overrides native global classes and functions related to time allowing them to be manually controlled:

*   `Date`
*   `setTimeout`
*   `clearTimeout`
*   `setInterval`
*   `clearInterval`
*   `requestAnimationFrame`
*   `cancelAnimationFrame`
*   `requestIdleCallback`
*   `cancelIdleCallback`
*   `performance`
*   `Event.timeStamp`

warning

If you call `install` at any point in your test, the call _MUST_ occur before any other clock related calls (see note above for list). Calling these methods out of order will result in undefined behavior. For example, you cannot call `setInterval`, followed by `install`, then `clearInterval`, as `install` overrides the native definition of the clock functions.

Test with predefined time[​](#test-with-predefined-time "Direct link to Test with predefined time")
---------------------------------------------------------------------------------------------------

Often you only need to fake `Date.now` while keeping the timers going. That way the time flows naturally, but `Date.now` always returns a fixed value.

    <div id="current-time" data-testid="current-time"></div><script>  const renderTime = () => {    document.getElementById('current-time').textContent =        new Date().toLocaleString();  };  setInterval(renderTime, 1000);</script>

Consistent time and timers[​](#consistent-time-and-timers "Direct link to Consistent time and timers")
------------------------------------------------------------------------------------------------------

Sometimes your timers depend on `Date.now` and are confused when the `Date.now` value does not change over time. In this case, you can install the clock and fast forward to the time of interest when testing.

    <div id="current-time" data-testid="current-time"></div><script>  const renderTime = () => {    document.getElementById('current-time').textContent =        new Date().toLocaleString();  };  setInterval(renderTime, 1000);</script>

*   Sync
*   Async

    # Initialize clock with some time before the test time and let the page load# naturally. `Date.now` will progress as the timers fire.page.clock.install(time=datetime.datetime(2024, 2, 2, 8, 0, 0))page.goto("http://localhost:3333")# Pretend that the user closed the laptop lid and opened it again at 10am.# Pause the time once reached that point.page.clock.pause_at(datetime.datetime(2024, 2, 2, 10, 0, 0))# Assert the page state.expect(page.get_by_test_id("current-time")).to_have_text("2/2/2024, 10:00:00 AM")# Close the laptop lid again and open it at 10:30am.page.clock.fast_forward("30:00")expect(page.get_by_test_id("current-time")).to_have_text("2/2/2024, 10:30:00 AM")

    # Initialize clock with some time before the test time and let the page load# naturally. `Date.now` will progress as the timers fire.await page.clock.install(time=datetime.datetime(2024, 2, 2, 8, 0, 0))await page.goto("http://localhost:3333")# Pretend that the user closed the laptop lid and opened it again at 10am.# Pause the time once reached that point.await page.clock.pause_at(datetime.datetime(2024, 2, 2, 10, 0, 0))# Assert the page state.await expect(page.get_by_test_id("current-time")).to_have_text("2/2/2024, 10:00:00 AM")# Close the laptop lid again and open it at 10:30am.await page.clock.fast_forward("30:00")await expect(page.get_by_test_id("current-time")).to_have_text("2/2/2024, 10:30:00 AM")

Test inactivity monitoring[​](#test-inactivity-monitoring "Direct link to Test inactivity monitoring")
------------------------------------------------------------------------------------------------------

Inactivity monitoring is a common feature in web applications that logs out users after a period of inactivity. Testing this feature can be tricky because you need to wait for a long time to see the effect. With the help of the clock, you can speed up time and test this feature quickly.

    <div id="remaining-time" data-testid="remaining-time"></div><script>  const endTime = Date.now() + 5 * 60_000;  const renderTime = () => {    const diffInSeconds = Math.round((endTime - Date.now()) / 1000);    if (diffInSeconds <= 0) {      document.getElementById('remaining-time').textContent =        'You have been logged out due to inactivity.';    } else {      document.getElementById('remaining-time').textContent =        `You will be logged out in ${diffInSeconds} seconds.`;    }    setTimeout(renderTime, 1000);  };  renderTime();</script><button type="button">Interaction</button>

*   Sync
*   Async

    # Initial time does not matter for the test, so we can pick current time.page.clock.install()page.goto("http://localhost:3333")# Interact with the pagepage.get_by_role("button").click()# Fast forward time 5 minutes as if the user did not do anything.# Fast forward is like closing the laptop lid and opening it after 5 minutes.# All the timers due will fire once immediately, as in the real browser.page.clock.fast_forward("05:00")# Check that the user was logged out automatically.expect(page.get_by_text("You have been logged out due to inactivity.")).to_be_visible()

    # Initial time does not matter for the test, so we can pick current time.await page.clock.install()await page.goto("http://localhost:3333")# Interact with the pageawait page.get_by_role("button").click()# Fast forward time 5 minutes as if the user did not do anything.# Fast forward is like closing the laptop lid and opening it after 5 minutes.# All the timers due will fire once immediately, as in the real browser.await page.clock.fast_forward("05:00")# Check that the user was logged out automatically.await expect(page.getByText("You have been logged out due to inactivity.")).toBeVisible()

Tick through time manually, firing all the timers consistently[​](#tick-through-time-manually-firing-all-the-timers-consistently "Direct link to Tick through time manually, firing all the timers consistently")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

In rare cases, you may want to tick through time manually, firing all timers and animation frames in the process to achieve a fine-grained control over the passage of time.

    <div id="current-time" data-testid="current-time"></div><script>  const renderTime = () => {    document.getElementById('current-time').textContent =        new Date().toLocaleString();  };  setInterval(renderTime, 1000);</script>

*   Sync
*   Async

    # Initialize clock with a specific time, let the page load naturally.page.clock.install(    time=datetime.datetime(2024, 2, 2, 8, 0, 0, tzinfo=datetime.timezone.pst),)page.goto("http://localhost:3333")locator = page.get_by_test_id("current-time")# Pause the time flow, stop the timers, you now have manual control# over the page time.page.clock.pause_at(datetime.datetime(2024, 2, 2, 10, 0, 0))expect(locator).to_have_text("2/2/2024, 10:00:00 AM")# Tick through time manually, firing all timers in the process.# In this case, time will be updated in the screen 2 times.page.clock.run_for(2000)expect(locator).to_have_text("2/2/2024, 10:00:02 AM")

    # Initialize clock with a specific time, let the page load naturally.await page.clock.install(time=    datetime.datetime(2024, 2, 2, 8, 0, 0, tzinfo=datetime.timezone.pst),)await page.goto("http://localhost:3333")locator = page.get_by_test_id("current-time")# Pause the time flow, stop the timers, you now have manual control# over the page time.await page.clock.pause_at(datetime.datetime(2024, 2, 2, 10, 0, 0))await expect(locator).to_have_text("2/2/2024, 10:00:00 AM")# Tick through time manually, firing all timers in the process.# In this case, time will be updated in the screen 2 times.await page.clock.run_for(2000)await expect(locator).to_have_text("2/2/2024, 10:00:02 AM")

Related Videos[​](#related-videos "Direct link to Related Videos")
------------------------------------------------------------------

# Debugging Tests

Debugging Tests
===============

Playwright Inspector[​](#playwright-inspector "Direct link to Playwright Inspector")
------------------------------------------------------------------------------------

The Playwright Inspector is a GUI tool to help you debug your Playwright tests. It allows you to step through your tests, live edit locators, pick locators and see actionability logs.

![Playwright Inspector](https://user-images.githubusercontent.com/13063165/212924587-4b84e5f6-b147-40e9-8c75-d7b9ab6b7ca1.png)

### Run in debug mode[​](#run-in-debug-mode "Direct link to Run in debug mode")

Set the `PWDEBUG` environment variable to run your Playwright tests in debug mode. This configures Playwright for debugging and opens the inspector. Additional useful defaults are configured when `PWDEBUG=1` is set:

*   Browsers launch in headed mode
*   Default timeout is set to 0 (= no timeout)

*   Bash
*   PowerShell
*   Batch

    PWDEBUG=1 pytest -s

    $env:PWDEBUG=1pytest -s

    set PWDEBUG=1pytest -s

### Stepping through your tests[​](#stepping-through-your-tests "Direct link to Stepping through your tests")

You can play, pause or step through each action of your test using the toolbar at the top of the Inspector. You can see the current action highlighted in the test code, and matching elements highlighted in the browser window.

![Playwright Inspector and browser](https://user-images.githubusercontent.com/13063165/212936618-84b87acc-bc2e-46ed-994b-32b2ef742e60.png)

### Run a test from a specific breakpoint[​](#run-a-test-from-a-specific-breakpoint "Direct link to Run a test from a specific breakpoint")

To speed up the debugging process you can add a [page.pause()](/python/docs/api/class-page#page-pause) method to your test. This way you won't have to step through each action of your test to get to the point where you want to debug.

*   Sync
*   Async

    page.pause()

    await page.pause()

Once you add a `page.pause()` call, run your tests in debug mode. Clicking the "Resume" button in the Inspector will run the test and only stop on the `page.pause()`.

![test with page.pause](https://user-images.githubusercontent.com/13063165/219473050-122be4c2-31d0-4cbd-aa8b-8588e8b781a6.png)

### Live editing locators[​](#live-editing-locators "Direct link to Live editing locators")

While running in debug mode you can live edit the locators. Next to the 'Pick Locator' button there is a field showing the [locator](/python/docs/locators) that the test is paused on. You can edit this locator directly in the **Pick Locator** field, and matching elements will be highlighted in the browser window.

![live editing locators](https://user-images.githubusercontent.com/13063165/212980815-1cf6ef7b-e69a-496c-898a-ec603a3bc562.png)

### Picking locators[​](#picking-locators "Direct link to Picking locators")

While debugging, you might need to choose a more resilient locator. You can do this by clicking on the **Pick Locator** button and hovering over any element in the browser window. While hovering over an element you will see the code needed to locate this element highlighted below. Clicking an element in the browser will add the locator into the field where you can then either tweak it or copy it into your code.

![Picking locators](https://user-images.githubusercontent.com/13063165/212968640-ce82a027-9277-4bdf-b0a9-6282fb2becb7.png)

Playwright will look at your page and figure out the best locator, prioritizing [role, text and test id locators](/python/docs/locators). If Playwright finds multiple elements matching the locator, it will improve the locator to make it resilient and uniquely identify the target element, so you don't have to worry about failing tests due to locators.

### Actionability logs[​](#actionability-logs "Direct link to Actionability logs")

By the time Playwright has paused on a click action, it has already performed [actionability checks](/python/docs/actionability) that can be found in the log. This can help you understand what happened during your test and what Playwright did or tried to do. The log tells you if the element was visible, enabled and stable, if the locator resolved to an element, scrolled into view, and so much more. If actionability can't be reached, it will show the action as pending.

![Actionability Logs](https://user-images.githubusercontent.com/13063165/212968907-5dede739-e0e3-482a-91cd-726a0f5b0b6d.png)

Trace Viewer[​](#trace-viewer "Direct link to Trace Viewer")
------------------------------------------------------------

Playwright [Trace Viewer](/python/docs/trace-viewer) is a GUI tool that lets you explore recorded Playwright traces of your tests. You can go back and forward through each action on the left side, and visually see what was happening during the action. In the middle of the screen, you can see a DOM snapshot for the action. On the right side you can see action details, such as time, parameters, return value and log. You can also explore console messages, network requests and the source code.

To learn more about how to record traces and use the Trace Viewer, check out the [Trace Viewer](/python/docs/trace-viewer) guide.

Browser Developer Tools[​](#browser-developer-tools "Direct link to Browser Developer Tools")
---------------------------------------------------------------------------------------------

When running in Debug Mode with `PWDEBUG=console`, a `playwright` object is available in the Developer tools console. Developer tools can help you to:

*   Inspect the DOM tree and **find element selectors**
*   **See console logs** during execution (or learn how to [read logs via API](/python/docs/api/class-page#page-event-console))
*   Check **network activity** and other developer tools features

This will also set the default timeouts of Playwright to 0 (= no timeout).

![Browser Developer Tools with Playwright object](https://user-images.githubusercontent.com/13063165/219128002-898f604d-9697-4b7f-95b5-a6a8260b7282.png)

To debug your tests using the browser developer tools, start by setting a breakpoint in your test to pause the execution using the [page.pause()](/python/docs/api/class-page#page-pause) method.

*   Sync
*   Async

    page.pause()

    await page.pause()

Once you have set a breakpoint in your test, you can then run your test with `PWDEBUG=console`.

*   Bash
*   PowerShell
*   Batch

    PWDEBUG=console pytest -s

    $env:PWDEBUG=consolepytest -s

    set PWDEBUG=consolepytest -s

Once Playwright launches the browser window, you can open the developer tools. The `playwright` object will be available in the console panel.

#### playwright.$(selector)[​](#playwrightselector "Direct link to playwright.$(selector)")

Query the Playwright selector, using the actual Playwright query engine, for example:

    playwright.$('.auth-form >> text=Log in');<button>Log in</button>

#### playwright.$$(selector)[​](#playwrightselector-1 "Direct link to playwright.$$(selector)")

Same as `playwright.$`, but returns all matching elements.

    playwright.$$('li >> text=John')[<li>, <li>, <li>, <li>]

#### playwright.inspect(selector)[​](#playwrightinspectselector "Direct link to playwright.inspect(selector)")

Reveal element in the Elements panel.

    playwright.inspect('text=Log in')

#### playwright.locator(selector)[​](#playwrightlocatorselector "Direct link to playwright.locator(selector)")

Create a locator and query matching elements, for example:

    playwright.locator('.auth-form', { hasText: 'Log in' });Locator ()  - element: button  - elements: [button]

#### playwright.selector(element)[​](#playwrightselectorelement "Direct link to playwright.selector(element)")

Generates selector for the given element. For example, select an element in the Elements panel and pass `$0`:

    playwright.selector($0)"div[id="glow-ingress-block"] >> text=/.*Hello.*/"

Verbose API logs[​](#verbose-api-logs "Direct link to Verbose API logs")
------------------------------------------------------------------------

Playwright supports verbose logging with the `DEBUG` environment variable.

*   Bash
*   PowerShell
*   Batch

    DEBUG=pw:api pytest -s

    $env:DEBUG="pw:api"pytest -s

    set DEBUG=pw:apipytest -s

note

**For WebKit**: launching WebKit Inspector during the execution will prevent the Playwright script from executing any further and will reset pre-configured user agent and device emulation.

Headed mode[​](#headed-mode "Direct link to Headed mode")
---------------------------------------------------------

Playwright runs browsers in headless mode by default. To change this behavior, use `headless: false` as a launch option.

You can also use the [slow\_mo](/python/docs/api/class-browsertype#browser-type-launch-option-slow-mo) option to slow down execution (by N milliseconds per operation) and follow along while debugging.

*   Sync
*   Async

    # Chromium, Firefox, or WebKitchromium.launch(headless=False, slow_mo=100)

    # Chromium, Firefox, or WebKitawait chromium.launch(headless=False, slow_mo=100)

# Dialogs

Dialogs
=======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can interact with the web page dialogs such as [`alert`](https://developer.mozilla.org/en-US/docs/Web/API/Window/alert), [`confirm`](https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm), [`prompt`](https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt) as well as [`beforeunload`](https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event) confirmation. For print dialogs, see [Print](#print-dialogs).

alert(), confirm(), prompt() dialogs[​](#alert-confirm-prompt-dialogs "Direct link to alert(), confirm(), prompt() dialogs")
----------------------------------------------------------------------------------------------------------------------------

By default, dialogs are auto-dismissed by Playwright, so you don't have to handle them. However, you can register a dialog handler before the action that triggers the dialog to either [dialog.accept()](/python/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/python/docs/api/class-dialog#dialog-dismiss) it.

*   Sync
*   Async

    page.on("dialog", lambda dialog: dialog.accept())page.get_by_role("button").click()

    page.on("dialog", lambda dialog: dialog.accept())await page.get_by_role("button".click())

note

[page.on("dialog")](/python/docs/api/class-page#page-event-dialog) listener **must handle** the dialog. Otherwise your action will stall, be it [locator.click()](/python/docs/api/class-locator#locator-click) or something else. That's because dialogs in Web are modals and therefore block further page execution until they are handled.

As a result, the following snippet will never resolve:

warning

WRONG!

*   Sync
*   Async

    page.on("dialog", lambda dialog: print(dialog.message))page.get_by_role("button").click() # Will hang here

    page.on("dialog", lambda dialog: print(dialog.message))await page.get_by_role("button").click() # Will hang here

note

If there is no listener for [page.on("dialog")](/python/docs/api/class-page#page-event-dialog), all dialogs are automatically dismissed.

beforeunload dialog[​](#beforeunload-dialog "Direct link to beforeunload dialog")
---------------------------------------------------------------------------------

When [page.close()](/python/docs/api/class-page#page-close) is invoked with the truthy [run\_before\_unload](/python/docs/api/class-page#page-close-option-run-before-unload) value, the page runs its unload handlers. This is the only case when [page.close()](/python/docs/api/class-page#page-close) does not wait for the page to actually close, because it might be that the page stays open in the end of the operation.

You can register a dialog handler to handle the `beforeunload` dialog yourself:

*   Sync
*   Async

    def handle_dialog(dialog):    assert dialog.type == 'beforeunload'    dialog.dismiss()page.on('dialog', lambda: handle_dialog)page.close(run_before_unload=True)

    async def handle_dialog(dialog):    assert dialog.type == 'beforeunload'    await dialog.dismiss()page.on('dialog', lambda: handle_dialog)await page.close(run_before_unload=True)

Print dialogs[​](#print-dialogs "Direct link to Print dialogs")
---------------------------------------------------------------

In order to assert that a print dialog via [`window.print`](https://developer.mozilla.org/en-US/docs/Web/API/Window/print) was triggered, you can use the following snippet:

*   Sync
*   Async

    page.goto("<url>")page.evaluate("(() => {window.waitForPrintDialog = new Promise(f => window.print = f);})()")page.get_by_text("Print it!").click()page.wait_for_function("window.waitForPrintDialog")

    await page.goto("<url>")await page.evaluate("(() => {window.waitForPrintDialog = new Promise(f => window.print = f);})()")await page.get_by_text("Print it!").click()await page.wait_for_function("window.waitForPrintDialog")

This will wait for the print dialog to be opened after the button is clicked. Make sure to evaluate the script before clicking the button / after the page is loaded.

# Downloads

Downloads
=========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

For every attachment downloaded by the page, [page.on("download")](/python/docs/api/class-page#page-event-download) event is emitted. All these attachments are downloaded into a temporary folder. You can obtain the download url, file name and payload stream using the [Download](/python/docs/api/class-download "Download") object from the event.

You can specify where to persist downloaded files using the [downloads\_path](/python/docs/api/class-browsertype#browser-type-launch-option-downloads-path) option in [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch).

note

Downloaded files are deleted when the browser context that produced them is closed.

Here is the simplest way to handle the file download:

*   Sync
*   Async

    # Start waiting for the downloadwith page.expect_download() as download_info:    # Perform the action that initiates download    page.get_by_text("Download file").click()download = download_info.value# Wait for the download process to complete and save the downloaded file somewheredownload.save_as("/path/to/save/at/" + download.suggested_filename)

    # Start waiting for the downloadasync with page.expect_download() as download_info:    # Perform the action that initiates download    await page.get_by_text("Download file").click()download = await download_info.value# Wait for the download process to complete and save the downloaded file somewhereawait download.save_as("/path/to/save/at/" + download.suggested_filename)

#### Variations[​](#variations "Direct link to Variations")

If you have no idea what initiates the download, you can still handle the event:

*   Sync
*   Async

    page.on("download", lambda download: print(download.path()))

    async def handle_download(download):    print(await download.path())page.on("download", handle_download)

Note that handling the event forks the control flow and makes the script harder to follow. Your scenario might end while you are downloading a file since your main control flow is not awaiting for this operation to resolve.

note

For uploading files, see the [uploading files](/python/docs/input#upload-files) section.

# Emulation

Emulation
=========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

With Playwright you can test your app on any browser as well as emulate a real device such as a mobile phone or tablet. Simply configure the devices you would like to emulate and Playwright will simulate the browser behavior such as `"userAgent"`, `"screenSize"`, `"viewport"` and if it `"hasTouch"` enabled. You can also emulate the `"geolocation"`, `"locale"` and `"timezone"` for all tests or for a specific test as well as set the `"permissions"` to show notifications or change the `"colorScheme"`.

Devices[​](#devices "Direct link to Devices")
---------------------------------------------

Playwright comes with a [registry of device parameters](https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json) using [playwright.devices](/python/docs/api/class-playwright#playwright-devices) for selected desktop, tablet and mobile devices. It can be used to simulate browser behavior for a specific device such as user agent, screen size, viewport and if it has touch enabled. All tests will run with the specified device parameters.

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    iphone_13 = playwright.devices['iPhone 13']    browser = playwright.webkit.launch(headless=False)    context = browser.new_context(        **iphone_13,    )with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    iphone_13 = playwright.devices['iPhone 13']    browser = await playwright.webkit.launch(headless=False)    context = await browser.new_context(        **iphone_13,    )async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

![playwright.dev website emulated for iPhone 13](https://user-images.githubusercontent.com/13063165/220411073-76fe59f9-9a2d-463d-8e30-c19a7deca133.png)

Viewport[​](#viewport "Direct link to Viewport")
------------------------------------------------

The viewport is included in the device but you can override it for some tests with [page.set\_viewport\_size()](/python/docs/api/class-page#page-set-viewport-size).

Test file:

The same works inside a test file.

*   Sync
*   Async

    # Create context with given viewportcontext = browser.new_context(  viewport={ 'width': 1280, 'height': 1024 })# Resize viewport for individual pagepage.set_viewport_size({"width": 1600, "height": 1200})# Emulate high-DPIcontext = browser.new_context(  viewport={ 'width': 2560, 'height': 1440 },  device_scale_factor=2,)

    # Create context with given viewportcontext = await browser.new_context(  viewport={ 'width': 1280, 'height': 1024 })# Resize viewport for individual pageawait page.set_viewport_size({"width": 1600, "height": 1200})# Emulate high-DPIcontext = await browser.new_context(  viewport={ 'width': 2560, 'height': 1440 },  device_scale_factor=2,)

isMobile[​](#ismobile "Direct link to isMobile")
------------------------------------------------

Whether the meta viewport tag is taken into account and touch events are enabled.

*   Sync
*   Async

    context = browser.new_context(  isMobile=false)

    context = await browser.new_context(  isMobile=false)

Locale & Timezone[​](#locale--timezone "Direct link to Locale & Timezone")
--------------------------------------------------------------------------

Emulate the browser Locale and Timezone which can be set globally for all tests in the config and then overridden for particular tests.

*   Sync
*   Async

    context = browser.new_context(  locale='de-DE',  timezone_id='Europe/Berlin',)

    context = await browser.new_context(  locale='de-DE',  timezone_id='Europe/Berlin',)

![Bing in german lang and timezone](https://user-images.githubusercontent.com/13063165/220416571-ccc96ab1-44bb-4579-8430-64502fc24a15.png)

Permissions[​](#permissions "Direct link to Permissions")
---------------------------------------------------------

Allow app to show system notifications.

*   Sync
*   Async

    context = browser.new_context(  permissions=['notifications'],)

    context = await browser.new_context(  permissions=['notifications'],)

Allow notifications for a specific domain.

*   Sync
*   Async

    context.grant_permissions(['notifications'], origin='https://skype.com')

    await context.grant_permissions(['notifications'], origin='https://skype.com')

Revoke all permissions with [browser\_context.clear\_permissions()](/python/docs/api/class-browsercontext#browser-context-clear-permissions).

*   Sync
*   Async

    context.clear_permissions()

    await context.clear_permissions()

Geolocation[​](#geolocation "Direct link to Geolocation")
---------------------------------------------------------

Grant `"geolocation"` permissions and set geolocation to a specific area.

*   Sync
*   Async

    context = browser.new_context(  geolocation={"longitude": 41.890221, "latitude": 12.492348},  permissions=["geolocation"])

    context = await browser.new_context(  geolocation={"longitude": 41.890221, "latitude": 12.492348},  permissions=["geolocation"])

![geolocation for italy on bing maps](https://user-images.githubusercontent.com/13063165/220417670-bb22d815-f5cd-47c4-8562-0b88165eac27.png)

Change the location later:

*   Sync
*   Async

    context.set_geolocation({"longitude": 48.858455, "latitude": 2.294474})

    await context.set_geolocation({"longitude": 48.858455, "latitude": 2.294474})

**Note** you can only change geolocation for all pages in the context.

Color Scheme and Media[​](#color-scheme-and-media "Direct link to Color Scheme and Media")
------------------------------------------------------------------------------------------

Emulate the users `"colorScheme"`. Supported values are 'light' and 'dark'. You can also emulate the media type with [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media).

*   Sync
*   Async

    # Create context with dark modecontext = browser.new_context(  color_scheme='dark' # or 'light')# Create page with dark modepage = browser.new_page(  color_scheme='dark' # or 'light')# Change color scheme for the pagepage.emulate_media(color_scheme='dark')# Change media for pagepage.emulate_media(media='print')

    # Create context with dark modecontext = await browser.new_context(  color_scheme='dark' # or 'light')# Create page with dark modepage = await browser.new_page(  color_scheme='dark' # or 'light')# Change color scheme for the pageawait page.emulate_media(color_scheme='dark')# Change media for pageawait page.emulate_media(media='print')

![playwright web in dark mode](https://user-images.githubusercontent.com/13063165/220411638-55d2b051-4678-4da7-9f0b-ed22f5a3c47c.png)

User Agent[​](#user-agent "Direct link to User Agent")
------------------------------------------------------

The User Agent is included in the device and therefore you will rarely need to change it however if you do need to test a different user agent you can override it with the `userAgent` property.

*   Sync
*   Async

    context = browser.new_context(  user_agent='My user agent')

    context = await browser.new_context(  user_agent='My user agent')

Offline[​](#offline "Direct link to Offline")
---------------------------------------------

Emulate the network being offline.

*   Sync
*   Async

    context = browser.new_context(  offline=True)

    context = await browser.new_context(  offline=True)

JavaScript Enabled[​](#javascript-enabled "Direct link to JavaScript Enabled")
------------------------------------------------------------------------------

Emulate a user scenario where JavaScript is disabled.

*   Sync
*   Async

    context = browser.new_context(  java_script_enabled=False)

    context = await browser.new_context(  java_script_enabled=False)

# Evaluating JavaScript

Evaluating JavaScript
=====================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright scripts run in your Playwright environment. Your page scripts run in the browser page environment. Those environments don't intersect, they are running in different virtual machines in different processes and even potentially on different computers.

The [page.evaluate()](/python/docs/api/class-page#page-evaluate) API can run a JavaScript function in the context of the web page and bring results back to the Playwright environment. Browser globals like `window` and `document` can be used in `evaluate`.

*   Sync
*   Async

    href = page.evaluate('() => document.location.href')

    href = await page.evaluate('() => document.location.href')

If the result is a Promise or if the function is asynchronous evaluate will automatically wait until it's resolved:

*   Sync
*   Async

    status = page.evaluate("""async () => {  response = await fetch(location.href)  return response.status}""")

    status = await page.evaluate("""async () => {  response = await fetch(location.href)  return response.status}""")

Different environments[​](#different-environments "Direct link to Different environments")
------------------------------------------------------------------------------------------

Evaluated scripts run in the browser environment, while your test runs in a testing environments. This means you cannot use variables from your test in the page and vice versa. Instead, you should pass them explicitly as an argument.

The following snippet is **WRONG** because it uses the variable directly:

*   Sync
*   Async

    data = "some data"result = page.evaluate("""() => {  // WRONG: there is no "data" in the web page.  window.myApp.use(data)}""")

    data = "some data"result = await page.evaluate("""() => {  // WRONG: there is no "data" in the web page.  window.myApp.use(data)}""")

The following snippet is **CORRECT** because it passes the value explicitly as an argument:

*   Sync
*   Async

    data = "some data"# Pass |data| as a parameter.result = page.evaluate("""data => {  window.myApp.use(data)}""", data)

    data = "some data"# Pass |data| as a parameter.result = await page.evaluate("""data => {  window.myApp.use(data)}""", data)

Evaluation Argument[​](#evaluation-argument "Direct link to Evaluation Argument")
---------------------------------------------------------------------------------

Playwright evaluation methods like [page.evaluate()](/python/docs/api/class-page#page-evaluate) take a single optional argument. This argument can be a mix of [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") values and [JSHandle](/python/docs/api/class-jshandle "JSHandle") instances. Handles are automatically converted to the value they represent.

*   Sync
*   Async

    # A primitive value.page.evaluate('num => num', 42)# An array.page.evaluate('array => array.length', [1, 2, 3])# An object.page.evaluate('object => object.foo', { 'foo': 'bar' })# A single handle.button = page.evaluate_handle('window.button')page.evaluate('button => button.textContent', button)# Alternative notation using JSHandle.evaluate.button.evaluate('(button, from) => button.textContent.substring(from)', 5)# Object with multiple handles.button1 = page.evaluate_handle('window.button1')button2 = page.evaluate_handle('.button2')page.evaluate("""o => o.button1.textContent + o.button2.textContent""",    { 'button1': button1, 'button2': button2 })# Object destructuring works. Note that property names must match# between the destructured object and the argument.# Also note the required parenthesis.page.evaluate("""    ({ button1, button2 }) => button1.textContent + button2.textContent""",    { 'button1': button1, 'button2': button2 })# Array works as well. Arbitrary names can be used for destructuring.# Note the required parenthesis.page.evaluate("""    ([b1, b2]) => b1.textContent + b2.textContent""",    [button1, button2])# Any mix of serializables and handles works.page.evaluate("""    x => x.button1.textContent + x.list[0].textContent + String(x.foo)""",    { 'button1': button1, 'list': [button2], 'foo': None })

    # A primitive value.await page.evaluate('num => num', 42)# An array.await page.evaluate('array => array.length', [1, 2, 3])# An object.await page.evaluate('object => object.foo', { 'foo': 'bar' })# A single handle.button = await page.evaluate_handle('button')await page.evaluate('button => button.textContent', button)# Alternative notation using JSHandle.evaluate.await button.evaluate('(button, from) => button.textContent.substring(from)', 5)# Object with multiple handles.button1 = await page.evaluate_handle('window.button1')button2 = await page.evaluate_handle('window.button2')await page.evaluate("""    o => o.button1.textContent + o.button2.textContent""",    { 'button1': button1, 'button2': button2 })# Object destructuring works. Note that property names must match# between the destructured object and the argument.# Also note the required parenthesis.await page.evaluate("""    ({ button1, button2 }) => button1.textContent + button2.textContent""",    { 'button1': button1, 'button2': button2 })# Array works as well. Arbitrary names can be used for destructuring.# Note the required parenthesis.await page.evaluate("""    ([b1, b2]) => b1.textContent + b2.textContent""",    [button1, button2])# Any mix of serializables and handles works.await page.evaluate("""    x => x.button1.textContent + x.list[0].textContent + String(x.foo)""",    { 'button1': button1, 'list': [button2], 'foo': None })

Init scripts[​](#init-scripts "Direct link to Init scripts")
------------------------------------------------------------

Sometimes it is convenient to evaluate something in the page before it starts loading. For example, you might want to setup some mocks or test data.

In this case, use [page.add\_init\_script()](/python/docs/api/class-page#page-add-init-script) or [browser\_context.add\_init\_script()](/python/docs/api/class-browsercontext#browser-context-add-init-script). In the example below, we will replace `Math.random()` with a constant value.

First, create a `preload.js` file that contains the mock.

    // preload.jsMath.random = () => 42;

Next, add init script to the page.

*   Sync
*   Async

    # In your test, assuming the "preload.js" file is in the "mocks" directory.page.add_init_script(path="mocks/preload.js")

    # In your test, assuming the "preload.js" file is in the "mocks" directory.await page.add_init_script(path="mocks/preload.js")

# Events

Events
======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright allows listening to various types of events happening on the web page, such as network requests, creation of child pages, dedicated workers etc. There are several ways to subscribe to such events, such as waiting for events or adding or removing event listeners.

Waiting for event[​](#waiting-for-event "Direct link to Waiting for event")
---------------------------------------------------------------------------

Most of the time, scripts will need to wait for a particular event to happen. Below are some of the typical event awaiting patterns.

Wait for a request with the specified url using [page.expect\_request()](/python/docs/api/class-page#page-wait-for-request):

*   Sync
*   Async

    with page.expect_request("**/*logo*.png") as first:  page.goto("https://wikipedia.org")print(first.value.url)

    async with page.expect_request("**/*logo*.png") as first:  await page.goto("https://wikipedia.org")first_request = await first.valueprint(first_request.url)

Wait for popup window:

*   Sync
*   Async

    with page.expect_popup() as popup:  page.get_by_text("open the popup").click()popup.value.goto("https://wikipedia.org")

    async with page.expect_popup() as popup:  await page.get_by_text("open the popup").click()child_page = await popup.valueawait child_page.goto("https://wikipedia.org")

Adding/removing event listener[​](#addingremoving-event-listener "Direct link to Adding/removing event listener")
-----------------------------------------------------------------------------------------------------------------

Sometimes, events happen in random time and instead of waiting for them, they need to be handled. Playwright supports traditional language mechanisms for subscribing and unsubscribing from the events:

*   Sync
*   Async

    def print_request_sent(request):  print("Request sent: " + request.url)def print_request_finished(request):  print("Request finished: " + request.url)page.on("request", print_request_sent)page.on("requestfinished", print_request_finished)page.goto("https://wikipedia.org")page.remove_listener("requestfinished", print_request_finished)page.goto("https://www.openstreetmap.org/")

    def print_request_sent(request):  print("Request sent: " + request.url)def print_request_finished(request):  print("Request finished: " + request.url)page.on("request", print_request_sent)page.on("requestfinished", print_request_finished)await page.goto("https://wikipedia.org")page.remove_listener("requestfinished", print_request_finished)await page.goto("https://www.openstreetmap.org/")

Adding one-off listeners[​](#adding-one-off-listeners "Direct link to Adding one-off listeners")
------------------------------------------------------------------------------------------------

If a certain event needs to be handled once, there is a convenience API for that:

*   Sync
*   Async

    page.once("dialog", lambda dialog: dialog.accept("2021"))page.evaluate("prompt('Enter a number:')")

    page.once("dialog", lambda dialog: dialog.accept("2021"))await page.evaluate("prompt('Enter a number:')")

# Extensibility

Extensibility
=============

Custom selector engines[​](#custom-selector-engines "Direct link to Custom selector engines")
---------------------------------------------------------------------------------------------

Playwright supports custom selector engines, registered with [selectors.register()](/python/docs/api/class-selectors#selectors-register).

Selector engine should have the following properties:

*   `query` function to query first element matching `selector` relative to the `root`.
*   `queryAll` function to query all elements matching `selector` relative to the `root`.

By default the engine is run directly in the frame's JavaScript context and, for example, can call an application-defined function. To isolate the engine from any JavaScript in the frame, but leave access to the DOM, register the engine with `{contentScript: true}` option. Content script engine is safer because it is protected from any tampering with the global objects, for example altering `Node.prototype` methods. All built-in selector engines run as content scripts. Note that running as a content script is not guaranteed when the engine is used together with other custom engines.

Selectors must be registered before creating the page.

An example of registering selector engine that queries elements based on a tag name:

*   Sync
*   Async

    tag_selector = """    // Must evaluate to a selector engine instance.    {      // Returns the first element matching given selector in the root's subtree.      query(root, selector) {        return root.querySelector(selector);      },      // Returns all elements matching given selector in the root's subtree.      queryAll(root, selector) {        return Array.from(root.querySelectorAll(selector));      }    }"""# register the engine. selectors will be prefixed with "tag=".playwright.selectors.register("tag", tag_selector)# now we can use "tag=" selectors.button = page.locator("tag=button")button.click()# we can combine it with built-in locators.page.locator("tag=div").get_by_text("click me").click()# we can use it in any methods supporting selectors.button_count = page.locator("tag=button").count()

    tag_selector = """    // Must evaluate to a selector engine instance.    {      // Returns the first element matching given selector in the root's subtree.      query(root, selector) {        return root.querySelector(selector);      },      // Returns all elements matching given selector in the root's subtree.      queryAll(root, selector) {        return Array.from(root.querySelectorAll(selector));      }    }"""# register the engine. selectors will be prefixed with "tag=".await playwright.selectors.register("tag", tag_selector)# now we can use "tag=" selectors.button = page.locator("tag=button")await button.click()# we can combine it with built-in locators.await page.locator("tag=div").get_by_text("click me").click()# we can use it in any methods supporting selectors.button_count = await page.locator("tag=button").count()

# Frames

Frames
======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

A [Page](/python/docs/api/class-page "Page") can have one or more [Frame](/python/docs/api/class-frame "Frame") objects attached to it. Each page has a main frame and page-level interactions (like `click`) are assumed to operate in the main frame.

A page can have additional frames attached with the `iframe` HTML tag. These frames can be accessed for interactions inside the frame.

*   Sync
*   Async

    # Locate element inside frame# Get frame using any other selectorusername = page.frame_locator('.frame-class').get_by_label('User Name')username.fill('John')

    # Locate element inside frameusername = await page.frame_locator('.frame-class').get_by_label('User Name')await username.fill('John')

Frame objects[​](#frame-objects "Direct link to Frame objects")
---------------------------------------------------------------

One can access frame objects using the [page.frame()](/python/docs/api/class-page#page-frame) API:

*   Sync
*   Async

    # Get frame using the frame's name attributeframe = page.frame('frame-login')# Get frame using frame's URLframe = page.frame(url=r'.*domain.*')# Interact with the frameframe.fill('#username-input', 'John')

    # Get frame using the frame's name attributeframe = page.frame('frame-login')# Get frame using frame's URLframe = page.frame(url=r'.*domain.*')# Interact with the frameawait frame.fill('#username-input', 'John')

# Handles

Handles
=======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can create handles to the page DOM elements or any other objects inside the page. These handles live in the Playwright process, whereas the actual objects live in the browser. There are two types of handles:

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle") to reference any JavaScript objects in the page
*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") to reference DOM elements in the page, it has extra methods that allow performing actions on the elements and asserting their properties.

Since any DOM element in the page is also a JavaScript object, any [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") is a [JSHandle](/python/docs/api/class-jshandle "JSHandle") as well.

Handles are used to perform operations on those actual objects in the page. You can evaluate on a handle, get handle properties, pass handle as an evaluation parameter, serialize page object into JSON etc. See the [JSHandle](/python/docs/api/class-jshandle "JSHandle") class API for these and methods.

### API reference[​](#api-reference "Direct link to API reference")

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")
*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")

Here is the easiest way to obtain a [JSHandle](/python/docs/api/class-jshandle "JSHandle").

*   Sync
*   Async

    js_handle = page.evaluate_handle('window')#  Use jsHandle for evaluations.

    js_handle = await page.evaluate_handle('window')#  Use jsHandle for evaluations.

Element Handles[​](#element-handles "Direct link to Element Handles")
---------------------------------------------------------------------

Discouraged

The use of [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/python/docs/api/class-locator "Locator") objects and web-first assertions instead.

When [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") is required, it is recommended to fetch it with the [page.wait\_for\_selector()](/python/docs/api/class-page#page-wait-for-selector) or [frame.wait\_for\_selector()](/python/docs/api/class-frame#frame-wait-for-selector) methods. These APIs wait for the element to be attached and visible.

*   Sync
*   Async

    # Get the element handleelement_handle = page.wait_for_selector('#box')# Assert bounding box for the elementbounding_box = element_handle.bounding_box()assert bounding_box.width == 100# Assert attribute for the elementclass_names = element_handle.get_attribute('class')assert 'highlighted' in class_names

    # Get the element handleelement_handle = page.wait_for_selector('#box')# Assert bounding box for the elementbounding_box = await element_handle.bounding_box()assert bounding_box.width == 100# Assert attribute for the elementclass_names = await element_handle.get_attribute('class')assert 'highlighted' in class_names

Handles as parameters[​](#handles-as-parameters "Direct link to Handles as parameters")
---------------------------------------------------------------------------------------

Handles can be passed into the [page.evaluate()](/python/docs/api/class-page#page-evaluate) and similar methods. The following snippet creates a new array in the page, initializes it with data and returns a handle to this array into Playwright. It then uses the handle in subsequent evaluations:

*   Sync
*   Async

    # Create new array in page.my_array_handle = page.evaluate_handle("""() => {  window.myArray = [1];  return myArray;}""")# Get current length of the array.length = page.evaluate("a => a.length", my_array_handle)# Add one more element to the array using the handlepage.evaluate("(arg) => arg.myArray.push(arg.newElement)", {  'myArray': my_array_handle,  'newElement': 2})# Release the object when it's no longer needed.my_array_handle.dispose()

    # Create new array in page.my_array_handle = await page.evaluate_handle("""() => {  window.myArray = [1];  return myArray;}""")# Get current length of the array.length = await page.evaluate("a => a.length", my_array_handle)# Add one more element to the array using the handleawait page.evaluate("(arg) => arg.myArray.push(arg.newElement)", {  'myArray': my_array_handle,  'newElement': 2})# Release the object when it's no longer needed.await my_array_handle.dispose()

Handle Lifecycle[​](#handle-lifecycle "Direct link to Handle Lifecycle")
------------------------------------------------------------------------

Handles can be acquired using the page methods such as [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle), [page.query\_selector()](/python/docs/api/class-page#page-query-selector) or [page.query\_selector\_all()](/python/docs/api/class-page#page-query-selector-all) or their frame counterparts [frame.evaluate\_handle()](/python/docs/api/class-frame#frame-evaluate-handle), [frame.query\_selector()](/python/docs/api/class-frame#frame-query-selector) or [frame.query\_selector\_all()](/python/docs/api/class-frame#frame-query-selector-all). Once created, handles will retain object from [garbage collection](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management) unless page navigates or the handle is manually disposed via the [js\_handle.dispose()](/python/docs/api/class-jshandle#js-handle-dispose) method.

### API reference[​](#api-reference-1 "Direct link to API reference")

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")
*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")
*   [element\_handle.bounding\_box()](/python/docs/api/class-elementhandle#element-handle-bounding-box)
*   [element\_handle.get\_attribute()](/python/docs/api/class-elementhandle#element-handle-get-attribute)
*   [element\_handle.inner\_text()](/python/docs/api/class-elementhandle#element-handle-inner-text)
*   [element\_handle.inner\_html()](/python/docs/api/class-elementhandle#element-handle-inner-html)
*   [element\_handle.text\_content()](/python/docs/api/class-elementhandle#element-handle-text-content)
*   [js\_handle.evaluate()](/python/docs/api/class-jshandle#js-handle-evaluate)
*   [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle)
*   [page.query\_selector()](/python/docs/api/class-page#page-query-selector)
*   [page.query\_selector\_all()](/python/docs/api/class-page#page-query-selector-all)

Locator vs ElementHandle[​](#locator-vs-elementhandle "Direct link to Locator vs ElementHandle")
------------------------------------------------------------------------------------------------

caution

We only recommend using [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") in the rare cases when you need to perform extensive DOM traversal on a static page. For all user actions and assertions use locator instead.

The difference between the [Locator](/python/docs/api/class-locator "Locator") and [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") is that the latter points to a particular element, while Locator captures the logic of how to retrieve that element.

In the example below, handle points to a particular DOM element on page. If that element changes text or is used by React to render an entirely different component, handle is still pointing to that very stale DOM element. This can lead to unexpected behaviors.

*   Sync
*   Async

    handle = page.query_selector("text=Submit")handle.hover()handle.click()

    handle = await page.query_selector("text=Submit")await handle.hover()await handle.click()

With the locator, every time the locator is used, up-to-date DOM element is located in the page using the selector. So in the snippet below, underlying DOM element is going to be located twice.

*   Sync
*   Async

    locator = page.get_by_text("Submit")locator.hover()locator.click()

    locator = page.get_by_text("Submit")await locator.hover()await locator.click()

# Isolation

Isolation
=========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Tests written with Playwright execute in isolated clean-slate environments called browser contexts. This isolation model improves reproducibility and prevents cascading test failures.

What is Test Isolation?[​](#what-is-test-isolation "Direct link to What is Test Isolation?")
--------------------------------------------------------------------------------------------

Test Isolation is when each test is completely isolated from another test. Every test runs independently from any other test. This means that each test has its own local storage, session storage, cookies etc. Playwright achieves this using [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")s which are equivalent to incognito-like profiles. They are fast and cheap to create and are completely isolated, even when running in a single browser. Playwright creates a context for each test, and provides a default [Page](/python/docs/api/class-page "Page") in that context.

Why is Test Isolation Important?[​](#why-is-test-isolation-important "Direct link to Why is Test Isolation Important?")
-----------------------------------------------------------------------------------------------------------------------

*   No failure carry-over. If one test fails it doesn't affect the other test.
*   Easy to debug errors or flakiness, because you can run just a single test as many times as you'd like.
*   Don't have to think about the order when running in parallel, sharding, etc.

Two Ways of Test Isolation[​](#two-ways-of-test-isolation "Direct link to Two Ways of Test Isolation")
------------------------------------------------------------------------------------------------------

There are two different strategies when it comes to Test Isolation: start from scratch or cleanup in between. The problem with cleaning up in between tests is that it can be easy to forget to clean up and some things are impossible to clean up such as "visited links". State from one test can leak into the next test which could cause your test to fail and make debugging harder as the problem comes from another test. Starting from scratch means everything is new, so if the test fails you only have to look within that test to debug.

How Playwright Achieves Test Isolation[​](#how-playwright-achieves-test-isolation "Direct link to How Playwright Achieves Test Isolation")
------------------------------------------------------------------------------------------------------------------------------------------

Playwright uses browser contexts to achieve Test Isolation. Each test has its own Browser Context. Running the test creates a new browser context each time. When using Playwright as a Test Runner, browser contexts are created by default. Otherwise, you can create browser contexts manually.

*   Sync
*   Async

    browser = playwright.chromium.launch()context = browser.new_context()page = context.new_page()

    browser = await playwright.chromium.launch()context = await browser.new_context()page = await context.new_page()

Browser contexts can also be used to emulate multi-page scenarios involving mobile devices, permissions, locale and color scheme. Check out our [Emulation](/python/docs/emulation) guide for more details.

Multiple Contexts in a Single Test[​](#multiple-contexts-in-a-single-test "Direct link to Multiple Contexts in a Single Test")
------------------------------------------------------------------------------------------------------------------------------

Playwright can create multiple browser contexts within a single scenario. This is useful when you want to test for multi-user functionality, like a chat.

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    # create a chromium browser instance    chromium = playwright.chromium    browser = chromium.launch()    # create two isolated browser contexts    user_context = browser.new_context()    admin_context = browser.new_context()    # create pages and interact with contexts independentlywith sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    # create a chromium browser instance    chromium = playwright.chromium    browser = await chromium.launch()    # create two isolated browser contexts    user_context = await browser.new_context()    admin_context = await browser.new_context()    # create pages and interact with contexts independentlyasync def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

# Locators

Locators
========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

[Locator](/python/docs/api/class-locator "Locator")s are the central piece of Playwright's auto-waiting and retry-ability. In a nutshell, locators represent a way to find element(s) on the page at any moment.

### Quick Guide[​](#quick-guide "Direct link to Quick Guide")

These are the recommended built-in locators.

*   [page.get\_by\_role()](#locate-by-role) to locate by explicit and implicit accessibility attributes.
*   [page.get\_by\_text()](#locate-by-text) to locate by text content.
*   [page.get\_by\_label()](#locate-by-label) to locate a form control by associated label's text.
*   [page.get\_by\_placeholder()](#locate-by-placeholder) to locate an input by placeholder.
*   [page.get\_by\_alt\_text()](#locate-by-alt-text) to locate an element, usually image, by its text alternative.
*   [page.get\_by\_title()](#locate-by-title) to locate an element by its title attribute.
*   [page.get\_by\_test\_id()](#locate-by-test-id) to locate an element based on its `data-testid` attribute (other attributes can be configured).

*   Sync
*   Async

    page.get_by_label("User Name").fill("John")page.get_by_label("Password").fill("secret-password")page.get_by_role("button", name="Sign in").click()expect(page.get_by_text("Welcome, John!")).to_be_visible()

    await page.get_by_label("User Name").fill("John")await page.get_by_label("Password").fill("secret-password")await page.get_by_role("button", name="Sign in").click()await expect(page.get_by_text("Welcome, John!")).to_be_visible()

Locating elements[​](#locating-elements "Direct link to Locating elements")
---------------------------------------------------------------------------

Playwright comes with multiple built-in locators. To make tests resilient, we recommend prioritizing user-facing attributes and explicit contracts such as [page.get\_by\_role()](/python/docs/api/class-page#page-get-by-role).

For example, consider the following DOM structure.

http://localhost:3000

Sign in

    <button>Sign in</button>

Locate the element by its role of `button` with name "Sign in".

*   Sync
*   Async

    page.get_by_role("button", name="Sign in").click()

    await page.get_by_role("button", name="Sign in").click()

note

Use the [code generator](/python/docs/codegen) to generate a locator, and then edit it as you'd like.

Every time a locator is used for an action, an up-to-date DOM element is located in the page. In the snippet below, the underlying DOM element will be located twice, once prior to every action. This means that if the DOM changes in between the calls due to re-render, the new element corresponding to the locator will be used.

*   Sync
*   Async

    locator = page.get_by_role("button", name="Sign in")locator.hover()locator.click()

    locator = page.get_by_role("button", name="Sign in")await locator.hover()await locator.click()

Note that all methods that create a locator, such as [page.get\_by\_label()](/python/docs/api/class-page#page-get-by-label), are also available on the [Locator](/python/docs/api/class-locator "Locator") and [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") classes, so you can chain them and iteratively narrow down your locator.

*   Sync
*   Async

    locator = page.frame_locator("my-frame").get_by_role("button", name="Sign in")locator.click()

    locator = page.frame_locator("#my-frame").get_by_role("button", name="Sign in")await locator.click()

### Locate by role[​](#locate-by-role "Direct link to Locate by role")

The [page.get\_by\_role()](/python/docs/api/class-page#page-get-by-role) locator reflects how users and assistive technology perceive the page, for example whether some element is a button or a checkbox. When locating by role, you should usually pass the accessible name as well, so that the locator pinpoints the exact element.

For example, consider the following DOM structure.

http://localhost:3000

### Sign up

 Subscribe  
Submit

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by its implicit role:

*   Sync
*   Async

    expect(page.get_by_role("heading", name="Sign up")).to_be_visible()page.get_by_role("checkbox", name="Subscribe").check()page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

    await expect(page.get_by_role("heading", name="Sign up")).to_be_visible()await page.get_by_role("checkbox", name="Subscribe").check()await page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

Role locators include [buttons, checkboxes, headings, links, lists, tables, and many more](https://www.w3.org/TR/html-aria/#docconformance) and follow W3C specifications for [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). Note that many html elements like `<button>` have an [implicitly defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role locator.

Note that role locators **do not replace** accessibility audits and conformance tests, but rather give early feedback about the ARIA guidelines.

When to use role locators

We recommend prioritizing role locators to locate elements, as it is the closest way to how users and assistive technology perceive the page.

### Locate by label[​](#locate-by-label "Direct link to Locate by label")

Most form controls usually have dedicated labels that could be conveniently used to interact with the form. In this case, you can locate the control by its associated label using [page.get\_by\_label()](/python/docs/api/class-page#page-get-by-label).

For example, consider the following DOM structure.

http://localhost:3000

Password 

    <label>Password <input type="password" /></label>

You can fill the input after locating it by the label text:

*   Sync
*   Async

    page.get_by_label("Password").fill("secret")

    await page.get_by_label("Password").fill("secret")

When to use label locators

Use this locator when locating form fields.

### Locate by placeholder[​](#locate-by-placeholder "Direct link to Locate by placeholder")

Inputs may have a placeholder attribute to hint to the user what value should be entered. You can locate such an input using [page.get\_by\_placeholder()](/python/docs/api/class-page#page-get-by-placeholder).

For example, consider the following DOM structure.

http://localhost:3000

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

*   Sync
*   Async

    page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

    await page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

When to use placeholder locators

Use this locator when locating form elements that do not have labels but do have placeholder texts.

### Locate by text[​](#locate-by-text "Direct link to Locate by text")

Find an element by the text it contains. You can match by a substring, exact string, or a regular expression when using [page.get\_by\_text()](/python/docs/api/class-page#page-get-by-text).

For example, consider the following DOM structure.

http://localhost:3000

Welcome, John

    <span>Welcome, John</span>

You can locate the element by the text it contains:

*   Sync
*   Async

    expect(page.get_by_text("Welcome, John")).to_be_visible()

    await expect(page.get_by_text("Welcome, John")).to_be_visible()

Set an exact match:

*   Sync
*   Async

    expect(page.get_by_text("Welcome, John", exact=True)).to_be_visible()

    await expect(page.get_by_text("Welcome, John", exact=True)).to_be_visible()

Match with a regular expression:

*   Sync
*   Async

    expect(page.get_by_text(re.compile("welcome, john", re.IGNORECASE))).to_be_visible()

    await expect(    page.get_by_text(re.compile("welcome, john", re.IGNORECASE))).to_be_visible()

note

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

When to use text locators

We recommend using text locators to find non interactive elements like `div`, `span`, `p`, etc. For interactive elements like `button`, `a`, `input`, etc. use [role locators](#locate-by-role).

You can also [filter by text](#filter-by-text) which can be useful when trying to find a particular item in a list.

### Locate by alt text[​](#locate-by-alt-text "Direct link to Locate by alt text")

All images should have an `alt` attribute that describes the image. You can locate an image based on the text alternative using [page.get\_by\_alt\_text()](/python/docs/api/class-page#page-get-by-alt-text).

For example, consider the following DOM structure.

http://localhost:3000

![playwright logo](/img/playwright-logo.svg)

    <img alt="playwright logo" src="/img/playwright-logo.svg" width="100" />

You can click on the image after locating it by the text alternative:

*   Sync
*   Async

    page.get_by_alt_text("playwright logo").click()

    await page.get_by_alt_text("playwright logo").click()

When to use alt locators

Use this locator when your element supports alt text such as `img` and `area` elements.

### Locate by title[​](#locate-by-title "Direct link to Locate by title")

Locate an element with a matching title attribute using [page.get\_by\_title()](/python/docs/api/class-page#page-get-by-title).

For example, consider the following DOM structure.

http://localhost:3000

25 issues

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

*   Sync
*   Async

    expect(page.get_by_title("Issues count")).to_have_text("25 issues")

    await expect(page.get_by_title("Issues count")).to_have_text("25 issues")

When to use title locators

Use this locator when your element has the `title` attribute.

### Locate by test id[​](#locate-by-test-id "Direct link to Locate by test id")

Testing by test ids is the most resilient way of testing as even if your text or role of the attribute changes, the test will still pass. QA's and developers should define explicit test ids and query them with [page.get\_by\_test\_id()](/python/docs/api/class-page#page-get-by-test-id). However testing by test ids is not user facing. If the role or text value is important to you then consider using user facing locators such as [role](#locate-by-role) and [text locators](#locate-by-text).

For example, consider the following DOM structure.

http://localhost:3000

Itinéraire

    <button data-testid="directions">Itinéraire</button>

You can locate the element by its test id:

*   Sync
*   Async

    page.get_by_test_id("directions").click()

    await page.get_by_test_id("directions").click()

When to use testid locators

You can also use test ids when you choose to use the test id methodology or when you can't locate by [role](#locate-by-role) or [text](#locate-by-text).

#### Set a custom test id attribute[​](#set-a-custom-test-id-attribute "Direct link to Set a custom test id attribute")

By default, [page.get\_by\_test\_id()](/python/docs/api/class-page#page-get-by-test-id) will locate elements based on the `data-testid` attribute, but you can configure it in your test config or by calling [selectors.set\_test\_id\_attribute()](/python/docs/api/class-selectors#selectors-set-test-id-attribute).

Set the test id to use a custom data attribute for your tests.

*   Sync
*   Async

    playwright.selectors.set_test_id_attribute("data-pw")

    playwright.selectors.set_test_id_attribute("data-pw")

In your html you can now use `data-pw` as your test id instead of the default `data-testid`.

http://localhost:3000

Itinéraire

    <button data-pw="directions">Itinéraire</button>

And then locate the element as you would normally do:

*   Sync
*   Async

    page.get_by_test_id("directions").click()

    await page.get_by_test_id("directions").click()

### Locate by CSS or XPath[​](#locate-by-css-or-xpath "Direct link to Locate by CSS or XPath")

If you absolutely must use CSS or XPath locators, you can use [page.locator()](/python/docs/api/class-page#page-locator) to create a locator that takes a selector describing how to find an element in the page. Playwright supports CSS and XPath selectors, and auto-detects them if you omit `css=` or `xpath=` prefix.

*   Sync
*   Async

    page.locator("css=button").click()page.locator("xpath=//button").click()page.locator("button").click()page.locator("//button").click()

    await page.locator("css=button").click()await page.locator("xpath=//button").click()await page.locator("button").click()await page.locator("//button").click()

XPath and CSS selectors can be tied to the DOM structure or implementation. These selectors can break when the DOM structure changes. Long CSS or XPath chains below are an example of a **bad practice** that leads to unstable tests:

*   Sync
*   Async

    page.locator(    "#tsf > div:nth-child(2) > div.A8SBwf > div.RNNXgb > div > div.a4bIc > input").click()page.locator('//*[@id="tsf"]/div[2]/div[1]/div[1]/div/div[2]/input').click()

    await page.locator(    "#tsf > div:nth-child(2) > div.A8SBwf > div.RNNXgb > div > div.a4bIc > input").click()await page.locator('//*[@id="tsf"]/div[2]/div[1]/div[1]/div/div[2]/input').click()

When to use this

CSS and XPath are not recommended as the DOM can often change leading to non resilient tests. Instead, try to come up with a locator that is close to how the user perceives the page such as [role locators](#locate-by-role) or [define an explicit testing contract](#locate-by-test-id) using test ids.

Locate in Shadow DOM[​](#locate-in-shadow-dom "Direct link to Locate in Shadow DOM")
------------------------------------------------------------------------------------

All locators in Playwright **by default** work with elements in Shadow DOM. The exceptions are:

*   Locating by XPath does not pierce shadow roots.
*   [Closed-mode shadow roots](https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#parameters) are not supported.

Consider the following example with a custom web component:

    <x-details role=button aria-expanded=true aria-controls=inner-details>  <div>Title</div>  #shadow-root    <div id=inner-details>Details</div></x-details>

You can locate in the same way as if the shadow root was not present at all.

To click `<div>Details</div>`:

*   Sync
*   Async

    page.get_by_text("Details").click()

    await page.get_by_text("Details").click()

    <x-details role=button aria-expanded=true aria-controls=inner-details>  <div>Title</div>  #shadow-root    <div id=inner-details>Details</div></x-details>

To click `<x-details>`:

*   Sync
*   Async

    page.locator("x-details", has_text="Details").click()

    await page.locator("x-details", has_text="Details").click()

    <x-details role=button aria-expanded=true aria-controls=inner-details>  <div>Title</div>  #shadow-root    <div id=inner-details>Details</div></x-details>

To ensure that `<x-details>` contains the text "Details":

*   Sync
*   Async

    expect(page.locator("x-details")).to_contain_text("Details")

    await expect(page.locator("x-details")).to_contain_text("Details")

Filtering Locators[​](#filtering-locators "Direct link to Filtering Locators")
------------------------------------------------------------------------------

Consider the following DOM structure where we want to click on the buy button of the second product card. We have a few options in order to filter the locators to get the right one.

http://localhost:3000

*   ### Product 1
    
    Add to cart
*   ### Product 2
    
    Add to cart

    <ul>  <li>    <h3>Product 1</h3>    <button>Add to cart</button>  </li>  <li>    <h3>Product 2</h3>    <button>Add to cart</button>  </li></ul>

### Filter by text[​](#filter-by-text "Direct link to Filter by text")

Locators can be filtered by text with the [locator.filter()](/python/docs/api/class-locator#locator-filter) method. It will search for a particular string somewhere inside the element, possibly in a descendant element, case-insensitively. You can also pass a regular expression.

*   Sync
*   Async

    page.get_by_role("listitem").filter(has_text="Product 2").get_by_role(    "button", name="Add to cart").click()

    await page.get_by_role("listitem").filter(has_text="Product 2").get_by_role(    "button", name="Add to cart").click()

Use a regular expression:

*   Sync
*   Async

    page.get_by_role("listitem").filter(has_text=re.compile("Product 2")).get_by_role(    "button", name="Add to cart").click()

    await page.get_by_role("listitem").filter(has_text=re.compile("Product 2")).get_by_role(    "button", name="Add to cart").click()

### Filter by not having text[​](#filter-by-not-having-text "Direct link to Filter by not having text")

Alternatively, filter by **not having** text:

*   Sync
*   Async

    # 5 in-stock itemsexpect(page.get_by_role("listitem").filter(has_not_text="Out of stock")).to_have_count(5)

    # 5 in-stock itemsawait expect(page.get_by_role("listitem").filter(has_not_text="Out of stock")).to_have_count(5)

### Filter by child/descendant[​](#filter-by-childdescendant "Direct link to Filter by child/descendant")

Locators support an option to only select elements that have or have not a descendant matching another locator. You can therefore filter by any other locator such as a [locator.get\_by\_role()](/python/docs/api/class-locator#locator-get-by-role), [locator.get\_by\_test\_id()](/python/docs/api/class-locator#locator-get-by-test-id), [locator.get\_by\_text()](/python/docs/api/class-locator#locator-get-by-text) etc.

http://localhost:3000

*   ### Product 1
    
    Add to cart
*   ### Product 2
    
    Add to cart

    <ul>  <li>    <h3>Product 1</h3>    <button>Add to cart</button>  </li>  <li>    <h3>Product 2</h3>    <button>Add to cart</button>  </li></ul>

*   Sync
*   Async

    page.get_by_role("listitem").filter(    has=page.get_by_role("heading", name="Product 2")).get_by_role("button", name="Add to cart").click()

    await page.get_by_role("listitem").filter(    has=page.get_by_role("heading", name="Product 2")).get_by_role("button", name="Add to cart").click()

We can also assert the product card to make sure there is only one:

*   Sync
*   Async

    expect(    page.get_by_role("listitem").filter(        has=page.get_by_role("heading", name="Product 2")    )).to_have_count(1)

    await expect(    page.get_by_role("listitem").filter(        has=page.get_by_role("heading", name="Product 2")    )).to_have_count(1)

The filtering locator **must be relative** to the original locator and is queried starting with the original locator match, not the document root. Therefore, the following will not work, because the filtering locator starts matching from the `<ul>` list element that is outside of the `<li>` list item matched by the original locator:

*   Sync
*   Async

    # ✖ WRONGexpect(    page.get_by_role("listitem").filter(        has=page.get_by_role("list").get_by_role("heading", name="Product 2")    )).to_have_count(1)

    # ✖ WRONGawait expect(    page.get_by_role("listitem").filter(        has=page.get_by_role("list").get_by_role("heading", name="Product 2")    )).to_have_count(1)

### Filter by not having child/descendant[​](#filter-by-not-having-childdescendant "Direct link to Filter by not having child/descendant")

We can also filter by **not having** a matching element inside.

*   Sync
*   Async

    expect(    page.get_by_role("listitem").filter(        has_not=page.get_by_role("heading", name="Product 2")    )).to_have_count(1)

    await expect(    page.get_by_role("listitem").filter(        has_not=page.get_by_role("heading", name="Product 2")    )).to_have_count(1)

Note that the inner locator is matched starting from the outer one, not from the document root.

Locator operators[​](#locator-operators "Direct link to Locator operators")
---------------------------------------------------------------------------

### Matching inside a locator[​](#matching-inside-a-locator "Direct link to Matching inside a locator")

You can chain methods that create a locator, like [page.get\_by\_text()](/python/docs/api/class-page#page-get-by-text) or [locator.get\_by\_role()](/python/docs/api/class-locator#locator-get-by-role), to narrow down the search to a particular part of the page.

In this example we first create a locator called product by locating its role of `listitem`. We then filter by text. We can use the product locator again to get by role of button and click it and then use an assertion to make sure there is only one product with the text "Product 2".

*   Sync
*   Async

    product = page.get_by_role("listitem").filter(has_text="Product 2")product.get_by_role("button", name="Add to cart").click()

    product = page.get_by_role("listitem").filter(has_text="Product 2")await product.get_by_role("button", name="Add to cart").click()

You can also chain two locators together, for example to find a "Save" button inside a particular dialog:

*   Sync
*   Async

    save_button = page.get_by_role("button", name="Save")# ...dialog = page.get_by_test_id("settings-dialog")dialog.locator(save_button).click()

    save_button = page.get_by_role("button", name="Save")# ...dialog = page.get_by_test_id("settings-dialog")await dialog.locator(save_button).click()

### Matching two locators simultaneously[​](#matching-two-locators-simultaneously "Direct link to Matching two locators simultaneously")

Method [locator.and\_()](/python/docs/api/class-locator#locator-and) narrows down an existing locator by matching an additional locator. For example, you can combine [page.get\_by\_role()](/python/docs/api/class-page#page-get-by-role) and [page.get\_by\_title()](/python/docs/api/class-page#page-get-by-title) to match by both role and title.

*   Sync
*   Async

    button = page.get_by_role("button").and_(page.getByTitle("Subscribe"))

    button = page.get_by_role("button").and_(page.getByTitle("Subscribe"))

### Matching one of the two alternative locators[​](#matching-one-of-the-two-alternative-locators "Direct link to Matching one of the two alternative locators")

If you'd like to target one of the two or more elements, and you don't know which one it will be, use [locator.or\_()](/python/docs/api/class-locator#locator-or) to create a locator that matches any one or both of the alternatives.

For example, consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly.

note

If both "New email" button and security dialog appear on screen, the "or" locator will match both of them, possibly throwing the ["strict mode violation" error](#strictness). In this case, you can use [locator.first](/python/docs/api/class-locator#locator-first) to only match one of them.

*   Sync
*   Async

    new_email = page.get_by_role("button", name="New")dialog = page.get_by_text("Confirm security settings")expect(new_email.or_(dialog).first).to_be_visible()if (dialog.is_visible()):  page.get_by_role("button", name="Dismiss").click()new_email.click()

    new_email = page.get_by_role("button", name="New")dialog = page.get_by_text("Confirm security settings")await expect(new_email.or_(dialog).first).to_be_visible()if (await dialog.is_visible()):  await page.get_by_role("button", name="Dismiss").click()await new_email.click()

### Matching only visible elements[​](#matching-only-visible-elements "Direct link to Matching only visible elements")

note

It's usually better to find a [more reliable way](/python/docs/locators#quick-guide) to uniquely identify the element instead of checking the visibility.

Consider a page with two buttons, the first invisible and the second [visible](/python/docs/actionability#visible).

    <button style='display: none'>Invisible</button><button>Visible</button>

*   This will find both buttons and throw a [strictness](/python/docs/locators#strictness) violation error:
    
    *   Sync
    *   Async
    
        page.locator("button").click()
    
        await page.locator("button").click()
    
*   This will only find a second button, because it is visible, and then click it.
    
    *   Sync
    *   Async
    
        page.locator("button").filter(visible=True).click()
    
        await page.locator("button").filter(visible=True).click()
    

Lists[​](#lists "Direct link to Lists")
---------------------------------------

### Count items in a list[​](#count-items-in-a-list "Direct link to Count items in a list")

You can assert locators in order to count the items in a list.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Use the count assertion to ensure that the list has 3 items.

*   Sync
*   Async

    expect(page.get_by_role("listitem")).to_have_count(3)

    await expect(page.get_by_role("listitem")).to_have_count(3)

### Assert all text in a list[​](#assert-all-text-in-a-list "Direct link to Assert all text in a list")

You can assert locators in order to find all the text in a list.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Use [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) to ensure that the list has the text "apple", "banana" and "orange".

*   Sync
*   Async

    expect(page.get_by_role("listitem")).to_have_text(["apple", "banana", "orange"])

    await expect(page.get_by_role("listitem")).to_have_text(["apple", "banana", "orange"])

### Get a specific item[​](#get-a-specific-item "Direct link to Get a specific item")

There are many ways to get a specific item in a list.

#### Get by text[​](#get-by-text "Direct link to Get by text")

Use the [page.get\_by\_text()](/python/docs/api/class-page#page-get-by-text) method to locate an element in a list by its text content and then click on it.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Locate an item by its text content and click it.

*   Sync
*   Async

    page.get_by_text("orange").click()

    await page.get_by_text("orange").click()

#### Filter by text[​](#filter-by-text-1 "Direct link to Filter by text")

Use the [locator.filter()](/python/docs/api/class-locator#locator-filter) to locate a specific item in a list.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Locate an item by the role of "listitem" and then filter by the text of "orange" and then click it.

*   Sync
*   Async

    page.get_by_role("listitem").filter(has_text="orange").click()

    await page.get_by_role("listitem").filter(has_text="orange").click()

#### Get by test id[​](#get-by-test-id "Direct link to Get by test id")

Use the [page.get\_by\_test\_id()](/python/docs/api/class-page#page-get-by-test-id) method to locate an element in a list. You may need to modify the html and add a test id if you don't already have a test id.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li data-testid='apple'>apple</li>  <li data-testid='banana'>banana</li>  <li data-testid='orange'>orange</li></ul>

Locate an item by its test id of "orange" and then click it.

*   Sync
*   Async

    page.get_by_test_id("orange").click()

    await page.get_by_test_id("orange").click()

#### Get by nth item[​](#get-by-nth-item "Direct link to Get by nth item")

If you have a list of identical elements, and the only way to distinguish between them is the order, you can choose a specific element from a list with [locator.first](/python/docs/api/class-locator#locator-first), [locator.last](/python/docs/api/class-locator#locator-last) or [locator.nth()](/python/docs/api/class-locator#locator-nth).

*   Sync
*   Async

    banana = page.get_by_role("listitem").nth(1)

    banana = await page.get_by_role("listitem").nth(1)

However, use this method with caution. Often times, the page might change, and the locator will point to a completely different element from the one you expected. Instead, try to come up with a unique locator that will pass the [strictness criteria](#strictness).

### Chaining filters[​](#chaining-filters "Direct link to Chaining filters")

When you have elements with various similarities, you can use the [locator.filter()](/python/docs/api/class-locator#locator-filter) method to select the right one. You can also chain multiple filters to narrow down the selection.

For example, consider the following DOM structure:

http://localhost:3000

*   John
    
    Say hello
    
*   Mary
    
    Say hello
    
*   John
    
    Say goodbye
    
*   Mary
    
    Say goodbye
    

    <ul>  <li>    <div>John</div>    <div><button>Say hello</button></div>  </li>  <li>    <div>Mary</div>    <div><button>Say hello</button></div>  </li>  <li>    <div>John</div>    <div><button>Say goodbye</button></div>  </li>  <li>    <div>Mary</div>    <div><button>Say goodbye</button></div>  </li></ul>

To take a screenshot of the row with "Mary" and "Say goodbye":

*   Sync
*   Async

    row_locator = page.get_by_role("listitem")row_locator.filter(has_text="Mary").filter(    has=page.get_by_role("button", name="Say goodbye")).screenshot(path="screenshot.png")

    row_locator = page.get_by_role("listitem")await row_locator.filter(has_text="Mary").filter(    has=page.get_by_role("button", name="Say goodbye")).screenshot(path="screenshot.png")

You should now have a "screenshot.png" file in your project's root directory.

### Rare use cases[​](#rare-use-cases "Direct link to Rare use cases")

#### Do something with each element in the list[​](#do-something-with-each-element-in-the-list "Direct link to Do something with each element in the list")

Iterate elements:

*   Sync
*   Async

    for row in page.get_by_role("listitem").all():    print(row.text_content())

    for row in await page.get_by_role("listitem").all():    print(await row.text_content())

Iterate using regular for loop:

*   Sync
*   Async

    rows = page.get_by_role("listitem")count = rows.count()for i in range(count):    print(rows.nth(i).text_content())

    rows = page.get_by_role("listitem")count = await rows.count()for i in range(count):    print(await rows.nth(i).text_content())

#### Evaluate in the page[​](#evaluate-in-the-page "Direct link to Evaluate in the page")

The code inside [locator.evaluate\_all()](/python/docs/api/class-locator#locator-evaluate-all) runs in the page, you can call any DOM apis there.

*   Sync
*   Async

    rows = page.get_by_role("listitem")texts = rows.evaluate_all("list => list.map(element => element.textContent)")

    rows = page.get_by_role("listitem")texts = await rows.evaluate_all("list => list.map(element => element.textContent)")

Strictness[​](#strictness "Direct link to Strictness")
------------------------------------------------------

Locators are strict. This means that all operations on locators that imply some target DOM element will throw an exception if more than one element matches. For example, the following call throws if there are several buttons in the DOM:

#### Throws an error if more than one[​](#throws-an-error-if-more-than-one "Direct link to Throws an error if more than one")

*   Sync
*   Async

    page.get_by_role("button").click()

    await page.get_by_role("button").click()

On the other hand, Playwright understands when you perform a multiple-element operation, so the following call works perfectly fine when the locator resolves to multiple elements.

#### Works fine with multiple elements[​](#works-fine-with-multiple-elements "Direct link to Works fine with multiple elements")

*   Sync
*   Async

    page.get_by_role("button").count()

    await page.get_by_role("button").count()

You can explicitly opt-out from strictness check by telling Playwright which element to use when multiple elements match, through [locator.first](/python/docs/api/class-locator#locator-first), [locator.last](/python/docs/api/class-locator#locator-last), and [locator.nth()](/python/docs/api/class-locator#locator-nth). These methods are **not recommended** because when your page changes, Playwright may click on an element you did not intend. Instead, follow best practices above to create a locator that uniquely identifies the target element.

More Locators[​](#more-locators "Direct link to More Locators")
---------------------------------------------------------------

For less commonly used locators, look at the [other locators](/python/docs/other-locators) guide.

# Mock APIs

Mock APIs
=========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Web APIs are usually implemented as HTTP endpoints. Playwright provides APIs to **mock** and **modify** network traffic, both HTTP and HTTPS. Any requests that a page does, including [XHRs](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) and [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) requests, can be tracked, modified and mocked. With Playwright you can also mock using HAR files that contain multiple network requests made by the page.

Mock API requests[​](#mock-api-requests "Direct link to Mock API requests")
---------------------------------------------------------------------------

The following code will intercept all the calls to `*/**/api/v1/fruits` and will return a custom response instead. No requests to the API will be made. The test goes to the URL that uses the mocked route and asserts that mock data is present on the page.

*   Sync
*   Async

    def test_mock_the_fruit_api(page: Page):    def handle(route: Route):        json = [{"name": "Strawberry", "id": 21}]        # fulfill the route with the mock data        route.fulfill(json=json)    # Intercept the route to the fruit API    page.route("*/**/api/v1/fruits", handle)    # Go to the page    page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the Strawberry fruit is visible    expect(page.get_by_text("Strawberry")).to_be_visible()

    async def test_mock_the_fruit_api(page: Page):    async def handle(route: Route):        json = [{"name": "Strawberry", "id": 21}]        # fulfill the route with the mock data        await route.fulfill(json=json)    # Intercept the route to the fruit API    await page.route("*/**/api/v1/fruits", handle)    # Go to the page    await page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the Strawberry fruit is visible    await expect(page.get_by_text("Strawberry")).to_be_visible()

You can see from the trace of the example test that the API was never called, it was however fulfilled with the mock data. ![api mocking trace](https://github.com/microsoft/playwright/assets/13063165/3dc14cbf-c100-4efc-ac21-d7b52d698b53)

Read more about [advanced networking](/python/docs/network).

Modify API responses[​](#modify-api-responses "Direct link to Modify API responses")
------------------------------------------------------------------------------------

Sometimes, it is essential to make an API request, but the response needs to be patched to allow for reproducible testing. In that case, instead of mocking the request, one can perform the request and fulfill it with the modified response.

In the example below we intercept the call to the fruit API and add a new fruit called 'Loquat', to the data. We then go to the url and assert that this data is there:

*   Sync
*   Async

    def test_gets_the_json_from_api_and_adds_a_new_fruit(page: Page):    def handle(route: Route):        response = route.fetch()        json = response.json()        json.append({ "name": "Loquat", "id": 100})        # Fulfill using the original response, while patching the response body        # with the given JSON object.        route.fulfill(response=response, json=json)    page.route("https://demo.playwright.dev/api-mocking/api/v1/fruits", handle)    # Go to the page    page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the new fruit is visible    expect(page.get_by_text("Loquat", exact=True)).to_be_visible()

    async def test_gets_the_json_from_api_and_adds_a_new_fruit(page: Page):    async def handle(route: Route):        response = await route.fetch()        json = await response.json()        json.append({ "name": "Loquat", "id": 100})        # Fulfill using the original response, while patching the response body        # with the given JSON object.        await route.fulfill(response=response, json=json)    await page.route("https://demo.playwright.dev/api-mocking/api/v1/fruits", handle)    # Go to the page    await page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the new fruit is visible    await expect(page.get_by_text("Loquat", exact=True)).to_be_visible()

In the trace of our test we can see that the API was called and the response was modified. ![trace of test showing api being called and fulfilled](https://github.com/microsoft/playwright/assets/13063165/8b8dd82d-1b3e-428e-871b-840581fed439)

By inspecting the response we can see that our new fruit was added to the list. ![trace of test showing the mock response](https://github.com/microsoft/playwright/assets/13063165/03e6c87c-4ecc-47e8-9ca0-30fface25e9d)

Read more about [advanced networking](/python/docs/network).

Mocking with HAR files[​](#mocking-with-har-files "Direct link to Mocking with HAR files")
------------------------------------------------------------------------------------------

A HAR file is an [HTTP Archive](http://www.softwareishard.com/blog/har-12-spec/) file that contains a record of all the network requests that are made when a page is loaded. It contains information about the request and response headers, cookies, content, timings, and more. You can use HAR files to mock network requests in your tests. You'll need to:

1.  Record a HAR file.
2.  Commit the HAR file alongside the tests.
3.  Route requests using the saved HAR files in the tests.

### Recording a HAR file[​](#recording-a-har-file "Direct link to Recording a HAR file")

To record a HAR file we use [page.route\_from\_har()](/python/docs/api/class-page#page-route-from-har) or [browser\_context.route\_from\_har()](/python/docs/api/class-browsercontext#browser-context-route-from-har) method. This method takes in the path to the HAR file and an optional object of options. The options object can contain the URL so that only requests with the URL matching the specified glob pattern will be served from the HAR File. If not specified, all requests will be served from the HAR file.

Setting `update` option to true will create or update the HAR file with the actual network information instead of serving the requests from the HAR file. Use it when creating a test to populate the HAR with real data.

*   Sync
*   Async

    def test_records_or_updates_the_har_file(page: Page):    # Get the response from the HAR file    page.route_from_har("./hars/fruit.har", url="*/**/api/v1/fruits", update=True)    # Go to the page    page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the fruit is visible    expect(page.get_by_text("Strawberry")).to_be_visible()

    async def test_records_or_updates_the_har_file(page: Page):    # Get the response from the HAR file    await page.route_from_har("./hars/fruit.har", url="*/**/api/v1/fruits", update=True)    # Go to the page    await page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the fruit is visible    await expect(page.get_by_text("Strawberry")).to_be_visible()

### Modifying a HAR file[​](#modifying-a-har-file "Direct link to Modifying a HAR file")

Once you have recorded a HAR file you can modify it by opening the hashed .txt file inside your 'hars' folder and editing the JSON. This file should be committed to your source control. Anytime you run this test with `update: true` it will update your HAR file with the request from the API.

    [  {    "name": "Playwright",    "id": 100  },  // ... other fruits]

### Replaying from HAR[​](#replaying-from-har "Direct link to Replaying from HAR")

Now that you have the HAR file recorded and modified the mock data, it can be used to serve matching responses in the test. For this, just turn off or simply remove the `update` option. This will run the test against the HAR file instead of hitting the API.

*   Sync
*   Async

    def test_gets_the_json_from_har_and_checks_the_new_fruit_has_been_added(page: Page):    # Replay API requests from HAR.    # Either use a matching response from the HAR,    # or abort the request if nothing matches.    page.route_from_har("./hars/fruit.har", url="*/**/api/v1/fruits", update=False)    # Go to the page    page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the Playwright fruit is visible    expect(page.get_by_text("Playwright", exact=True)).to_be_visible()

    async def test_gets_the_json_from_har_and_checks_the_new_fruit_has_been_added(page: Page):    # Replay API requests from HAR.    # Either use a matching response from the HAR,    # or abort the request if nothing matches.    await page.route_from_har("./hars/fruit.har", url="*/**/api/v1/fruits", update=False)    # Go to the page    await page.goto("https://demo.playwright.dev/api-mocking")    # Assert that the Playwright fruit is visible    await expect(page.get_by_text("Playwright", exact=True)).to_be_visible()

In the trace of our test we can see that the route was fulfilled from the HAR file and the API was not called. ![trace showing the HAR file being used](https://github.com/microsoft/playwright/assets/13063165/1bd7ab66-ea4f-43c2-a4e5-ca17d4837ff1)

If we inspect the response we can see our new fruit was added to the JSON, which was done by manually updating the hashed `.txt` file inside the `hars` folder. ![trace showing response from HAR file](https://github.com/microsoft/playwright/assets/13063165/db3117fc-7b02-4973-9a51-29e213261a6a)

HAR replay matches URL and HTTP method strictly. For POST requests, it also matches POST payloads strictly. If multiple recordings match a request, the one with the most matching headers is picked. An entry resulting in a redirect will be followed automatically.

Similar to when recording, if given HAR file name ends with `.zip`, it is considered an archive containing the HAR file along with network payloads stored as separate entries. You can also extract this archive, edit payloads or HAR log manually and point to the extracted har file. All the payloads will be resolved relative to the extracted har file on the file system.

#### Recording HAR with CLI[​](#recording-har-with-cli "Direct link to Recording HAR with CLI")

We recommend the `update` option to record HAR file for your test. However, you can also record the HAR with Playwright CLI.

Open the browser with Playwright CLI and pass `--save-har` option to produce a HAR file. Optionally, use `--save-har-glob` to only save requests you are interested in, for example API endpoints. If the har file name ends with `.zip`, artifacts are written as separate files and are all compressed into a single `zip`.

    # Save API requests from example.com as "example.har" archive.playwright open --save-har=example.har --save-har-glob="**/api/**" https://example.com

Read more about [advanced networking](/python/docs/network).

Mock WebSockets[​](#mock-websockets "Direct link to Mock WebSockets")
---------------------------------------------------------------------

The following code will intercept WebSocket connections and mock entire communcation over the WebSocket, instead of connecting to the server. This example responds to a `"request"` with a `"response"`.

*   Sync
*   Async

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")page.route_web_socket("wss://example.com/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")await page.route_web_socket("wss://example.com/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

Alternatively, you may want to connect to the actual server, but intercept messages in-between and modify or block them. Here is an example that modifies some of the messages sent by the page to the server, and leaves the rest unmodified.

*   Sync
*   Async

    def message_handler(server: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    server.send("request2")  else:    server.send(message)def handler(ws: WebSocketRoute):  server = ws.connect_to_server()  ws.on_message(lambda message: message_handler(server, message))page.route_web_socket("wss://example.com/ws", handler)

    def message_handler(server: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    server.send("request2")  else:    server.send(message)def handler(ws: WebSocketRoute):  server = ws.connect_to_server()  ws.on_message(lambda message: message_handler(server, message))await page.route_web_socket("wss://example.com/ws", handler)

For more details, see [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute").

# Navigations

Navigations
===========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can navigate to URLs and handle navigations caused by the page interactions.

Basic navigation[​](#basic-navigation "Direct link to Basic navigation")
------------------------------------------------------------------------

Simplest form of a navigation is opening a URL:

*   Sync
*   Async

    # Navigate the pagepage.goto("https://example.com")

    # Navigate the pageawait page.goto("https://example.com")

The code above loads the page and waits for the web page to fire the [load](https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event) event. The load event is fired when the whole page has loaded, including all dependent resources such as stylesheets, scripts, iframes, and images.

note

If the page does a client-side redirect before `load`, [page.goto()](/python/docs/api/class-page#page-goto) will wait for the redirected page to fire the `load` event.

When is the page loaded?[​](#when-is-the-page-loaded "Direct link to When is the page loaded?")
-----------------------------------------------------------------------------------------------

Modern pages perform numerous activities after the `load` event was fired. They fetch data lazily, populate UI, load expensive resources, scripts and styles after the `load` event was fired. There is no way to tell that the page is `loaded`, it depends on the page, framework, etc. So when can you start interacting with it?

In Playwright you can interact with the page at any moment. It will automatically wait for the target elements to become [actionable](/python/docs/actionability).

*   Sync
*   Async

    # Navigate and click element# Click will auto-wait for the elementpage.goto("https://example.com")page.get_by_text("example domain").click()

    # Navigate and click element# Click will auto-wait for the elementawait page.goto("https://example.com")await page.get_by_text("example domain").click()

For the scenario above, Playwright will wait for the text to become visible, will wait for the rest of the actionability checks to pass for that element, and will click it.

Playwright operates as a very fast user - the moment it sees the button, it clicks it. In the general case, you don't need to worry about whether all the resources loaded, etc.

Hydration[​](#hydration "Direct link to Hydration")
---------------------------------------------------

At some point in time, you'll stumble upon a use case where Playwright performs an action, but nothing seemingly happens. Or you enter some text into the input field and it will disappear. The most probable reason behind that is a poor page [hydration](https://en.wikipedia.org/wiki/Hydration_\(web_development\)).

When page is hydrated, first, a static version of the page is sent to the browser. Then the dynamic part is sent and the page becomes "live". As a very fast user, Playwright will start interacting with the page the moment it sees it. And if the button on a page is enabled, but the listeners have not yet been added, Playwright will do its job, but the click won't have any effect.

A simple way to verify if your page suffers from a poor hydration is to open Chrome DevTools, pick "Slow 3G" network emulation in the Network panel and reload the page. Once you see the element of interest, interact with it. You'll see that the button clicks will be ignored and the entered text will be reset by the subsequent page load code. The right fix for this issue is to make sure that all the interactive controls are disabled until after the hydration, when the page is fully functional.

Waiting for navigation[​](#waiting-for-navigation "Direct link to Waiting for navigation")
------------------------------------------------------------------------------------------

Clicking an element could trigger multiple navigations. In these cases, it is recommended to explicitly [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url) to a specific url.

*   Sync
*   Async

    page.get_by_text("Click me").click()page.wait_for_url("**/login")

    await page.get_by_text("Click me").click()await page.wait_for_url("**/login")

Navigation events[​](#navigation-events "Direct link to Navigation events")
---------------------------------------------------------------------------

Playwright splits the process of showing a new document in a page into **navigation** and **loading**.

**Navigation starts** by changing the page URL or by interacting with the page (e.g., clicking a link). The navigation intent may be canceled, for example, on hitting an unresolved DNS address or transformed into a file download.

**Navigation is committed** when the response headers have been parsed and session history is updated. Only after the navigation succeeds (is committed), the page starts **loading** the document.

**Loading** covers getting the remaining response body over the network, parsing, executing the scripts and firing load events:

*   [page.url](/python/docs/api/class-page#page-url) is set to the new url
*   document content is loaded over network and parsed
*   [page.on("domcontentloaded")](/python/docs/api/class-page#page-event-dom-content-loaded) event is fired
*   page executes some scripts and loads resources like stylesheets and images
*   [page.on("load")](/python/docs/api/class-page#page-event-load) event is fired
*   page executes dynamically loaded scripts

# Network

Network
=======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright provides APIs to **monitor** and **modify** browser network traffic, both HTTP and HTTPS. Any requests that a page does, including [XHRs](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) and [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) requests, can be tracked, modified and handled.

Mock APIs[​](#mock-apis "Direct link to Mock APIs")
---------------------------------------------------

Check out our [API mocking guide](/python/docs/mock) to learn more on how to

*   mock API requests and never hit the API
*   perform the API request and modify the response
*   use HAR files to mock network requests.

HTTP Authentication[​](#http-authentication "Direct link to HTTP Authentication")
---------------------------------------------------------------------------------

Perform HTTP Authentication.

*   Sync
*   Async

    context = browser.new_context(    http_credentials={"username": "bill", "password": "pa55w0rd"})page = context.new_page()page.goto("https://example.com")

    context = await browser.new_context(    http_credentials={"username": "bill", "password": "pa55w0rd"})page = await context.new_page()await page.goto("https://example.com")

HTTP Proxy[​](#http-proxy "Direct link to HTTP Proxy")
------------------------------------------------------

You can configure pages to load over the HTTP(S) proxy or SOCKSv5. Proxy can be either set globally for the entire browser, or for each browser context individually.

You can optionally specify username and password for HTTP(S) proxy, you can also specify hosts to bypass the [proxy](/python/docs/api/class-browser#browser-new-context-option-proxy) for.

Here is an example of a global proxy:

*   Sync
*   Async

    browser = chromium.launch(proxy={  "server": "http://myproxy.com:3128",  "username": "usr",  "password": "pwd"})

    browser = await chromium.launch(proxy={  "server": "http://myproxy.com:3128",  "username": "usr",  "password": "pwd"})

Its also possible to specify it per context:

*   Sync
*   Async

    browser = chromium.launch()context = browser.new_context(proxy={"server": "http://myproxy.com:3128"})

    browser = await chromium.launch()context = await browser.new_context(proxy={"server": "http://myproxy.com:3128"})

Network events[​](#network-events "Direct link to Network events")
------------------------------------------------------------------

You can monitor all the [Request](/python/docs/api/class-request "Request")s and [Response](/python/docs/api/class-response "Response")s:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    chromium = playwright.chromium    browser = chromium.launch()    page = browser.new_page()    # Subscribe to "request" and "response" events.    page.on("request", lambda request: print(">>", request.method, request.url))    page.on("response", lambda response: print("<<", response.status, response.url))    page.goto("https://example.com")    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    chromium = playwright.chromium    browser = await chromium.launch()    page = await browser.new_page()    # Subscribe to "request" and "response" events.    page.on("request", lambda request: print(">>", request.method, request.url))    page.on("response", lambda response: print("<<", response.status, response.url))    await page.goto("https://example.com")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

Or wait for a network response after the button click with [page.expect\_response()](/python/docs/api/class-page#page-wait-for-response):

*   Sync
*   Async

    # Use a glob url patternwith page.expect_response("**/api/fetch_data") as response_info:    page.get_by_text("Update").click()response = response_info.value

    # Use a glob url patternasync with page.expect_response("**/api/fetch_data") as response_info:    await page.get_by_text("Update").click()response = await response_info.value

#### Variations[​](#variations "Direct link to Variations")

Wait for [Response](/python/docs/api/class-response "Response")s with [page.expect\_response()](/python/docs/api/class-page#page-wait-for-response)

*   Sync
*   Async

    # Use a regular expressionwith page.expect_response(re.compile(r"\.jpeg$")) as response_info:    page.get_by_text("Update").click()response = response_info.value# Use a predicate taking a response objectwith page.expect_response(lambda response: token in response.url) as response_info:    page.get_by_text("Update").click()response = response_info.value

    # Use a regular expressionasync with page.expect_response(re.compile(r"\.jpeg$")) as response_info:    await page.get_by_text("Update").click()response = await response_info.value# Use a predicate taking a response objectasync with page.expect_response(lambda response: token in response.url) as response_info:    await page.get_by_text("Update").click()response = await response_info.value

Handle requests[​](#handle-requests "Direct link to Handle requests")
---------------------------------------------------------------------

*   Sync
*   Async

    page.route(    "**/api/fetch_data",    lambda route: route.fulfill(status=200, body=test_data))page.goto("https://example.com")

    await page.route(    "**/api/fetch_data",    lambda route: route.fulfill(status=200, body=test_data))await page.goto("https://example.com")

You can mock API endpoints via handling the network requests in your Playwright script.

#### Variations[​](#variations-1 "Direct link to Variations")

Set up route on the entire browser context with [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) or page with [page.route()](/python/docs/api/class-page#page-route). It will apply to popup windows and opened links.

*   Sync
*   Async

    context.route(    "**/api/login",    lambda route: route.fulfill(status=200, body="accept"))page.goto("https://example.com")

    await context.route(    "**/api/login",    lambda route: route.fulfill(status=200, body="accept"))await page.goto("https://example.com")

Modify requests[​](#modify-requests "Direct link to Modify requests")
---------------------------------------------------------------------

*   Sync
*   Async

    # Delete headerdef handle_route(route):    headers = route.request.headers    del headers["x-secret"]    route.continue_(headers=headers)page.route("**/*", handle_route)# Continue requests as POST.page.route("**/*", lambda route: route.continue_(method="POST"))

    # Delete headerasync def handle_route(route):    headers = route.request.headers    del headers["x-secret"]    await route.continue_(headers=headers)await page.route("**/*", handle_route)# Continue requests as POST.await page.route("**/*", lambda route: route.continue_(method="POST"))

You can continue requests with modifications. Example above removes an HTTP header from the outgoing requests.

Abort requests[​](#abort-requests "Direct link to Abort requests")
------------------------------------------------------------------

You can abort requests using [page.route()](/python/docs/api/class-page#page-route) and [route.abort()](/python/docs/api/class-route#route-abort).

*   Sync
*   Async

    page.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())# Abort based on the request typepage.route("**/*", lambda route: route.abort() if route.request.resource_type == "image"  else route.continue_())

    await page.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())# Abort based on the request typeawait page.route("**/*", lambda route: route.abort() if route.request.resource_type == "image"  else route.continue_())

Modify responses[​](#modify-responses "Direct link to Modify responses")
------------------------------------------------------------------------

To modify a response use [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") to get the original response and then pass the response to [route.fulfill()](/python/docs/api/class-route#route-fulfill). You can override individual fields on the response via options:

*   Sync
*   Async

    def handle_route(route: Route) -> None:    # Fetch original response.    response = route.fetch()    # Add a prefix to the title.    body = response.text()    body = body.replace("<title>", "<title>My prefix:")    route.fulfill(        # Pass all fields from the response.        response=response,        # Override response body.        body=body,        # Force content type to be html.        headers={**response.headers, "content-type": "text/html"},    )page.route("**/title.html", handle_route)

    async def handle_route(route: Route) -> None:    # Fetch original response.    response = await route.fetch()    # Add a prefix to the title.    body = await response.text()    body = body.replace("<title>", "<title>My prefix:")    await route.fulfill(        # Pass all fields from the response.        response=response,        # Override response body.        body=body,        # Force content type to be html.        headers={**response.headers, "content-type": "text/html"},    )await page.route("**/title.html", handle_route)

Glob URL patterns[​](#glob-url-patterns "Direct link to Glob URL patterns")
---------------------------------------------------------------------------

Playwright uses simplified glob patterns for URL matching in network interception methods like [page.route()](/python/docs/api/class-page#page-route) or [page.expect\_response()](/python/docs/api/class-page#page-wait-for-response). These patterns support basic wildcards:

1.  Asterisks:
    *   A single `*` matches any characters except `/`
    *   A double `**` matches any characters including `/`
2.  Question mark `?` matches only question mark `?`. If you want to match any character, use `*` instead.
3.  Curly braces `{}` can be used to match a list of options separated by commas `,`
4.  Backslash `\` can be used to escape any of special characters (note to escape backslash itself as `\\`)

Examples:

*   `https://example.com/*.js` matches `https://example.com/file.js` but not `https://example.com/path/file.js`
*   `https://example.com/?page=1` matches `https://example.com/?page=1` but not `https://example.com`
*   `**/*.js` matches both `https://example.com/file.js` and `https://example.com/path/file.js`
*   `**/*.{png,jpg,jpeg}` matches all image requests

Important notes:

*   The glob pattern must match the entire URL, not just a part of it.
*   When using globs for URL matching, consider the full URL structure, including the protocol and path separators.
*   For more complex matching requirements, consider using \[RegExp\] instead of glob patterns.

WebSockets[​](#websockets "Direct link to WebSockets")
------------------------------------------------------

Playwright supports [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API) inspection, mocking and modifying out of the box. See our [API mocking guide](/python/docs/mock#mock-websockets) to learn how to mock WebSockets.

Every time a WebSocket is created, the [page.on("websocket")](/python/docs/api/class-page#page-event-web-socket) event is fired. This event contains the [WebSocket](/python/docs/api/class-websocket "WebSocket") instance for further web socket frames inspection:

    def on_web_socket(ws):    print(f"WebSocket opened: {ws.url}")    ws.on("framesent", lambda payload: print(payload))    ws.on("framereceived", lambda payload: print(payload))    ws.on("close", lambda payload: print("WebSocket closed"))page.on("websocket", on_web_socket)

Missing Network Events and Service Workers[​](#missing-network-events-and-service-workers "Direct link to Missing Network Events and Service Workers")
------------------------------------------------------------------------------------------------------------------------------------------------------

Playwright's built-in [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [page.route()](/python/docs/api/class-page#page-route) allow your tests to natively route requests and perform mocking and interception.

1.  If you're using Playwright's native [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [page.route()](/python/docs/api/class-page#page-route), and it appears network events are missing, disable Service Workers by setting [service\_workers](/python/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.
2.  It might be that you are using a mock tool such as Mock Service Worker (MSW). While this tool works out of the box for mocking responses, it adds its own Service Worker that takes over the network requests, hence making them invisible to [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [page.route()](/python/docs/api/class-page#page-route). If you are interested in both network testing and mocking, consider using built-in [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [page.route()](/python/docs/api/class-page#page-route) for [response mocking](#handle-requests).
3.  If you're interested in not solely using Service Workers for testing and network mocking, but in routing and listening for requests made by Service Workers themselves, please see [this experimental feature](https://github.com/microsoft/playwright/issues/15684).

# Other locators

Other locators
==============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

note

Check out the main [locators guide](/python/docs/locators) for most common and recommended locators.

In addition to recommended locators like [page.get\_by\_role()](/python/docs/api/class-page#page-get-by-role) and [page.get\_by\_text()](/python/docs/api/class-page#page-get-by-text), Playwright supports a variety of other locators described in this guide.

CSS locator[​](#css-locator "Direct link to CSS locator")
---------------------------------------------------------

note

We recommend prioritizing [user-visible locators](/python/docs/locators#quick-guide) like text or accessible role instead of using CSS that is tied to the implementation and could break when the page changes.

Playwright can locate an element by CSS selector.

*   Sync
*   Async

    page.locator("css=button").click()

    await page.locator("css=button").click()

Playwright augments standard CSS selectors in two ways:

*   CSS selectors pierce open shadow DOM.
*   Playwright adds custom pseudo-classes like `:visible`, `:has-text()`, `:has()`, `:is()`, `:nth-match()` and more.

### CSS: matching by text[​](#css-matching-by-text "Direct link to CSS: matching by text")

Playwright include a number of CSS pseudo-classes to match elements by their text content.

*   `article:has-text("Playwright")` - the `:has-text()` matches any element containing specified text somewhere inside, possibly in a child or a descendant element. Matching is case-insensitive, trims whitespace and searches for a substring.
    
    For example, `article:has-text("Playwright")` matches `<article><div>Playwright</div></article>`.
    
    Note that `:has-text()` should be used together with other CSS specifiers, otherwise it will match all the elements containing specified text, including the `<body>`.
    
    *   Sync
    *   Async
    
        # Wrong, will match many elements including <body>page.locator(':has-text("Playwright")').click()# Correct, only matches the <article> elementpage.locator('article:has-text("All products")').click()
    
        # Wrong, will match many elements including <body>await page.locator(':has-text("Playwright")').click()# Correct, only matches the <article> elementawait page.locator('article:has-text("Playwright")').click()
    
*   `#nav-bar :text("Home")` - the `:text()` pseudo-class matches the smallest element containing specified text. Matching is case-insensitive, trims whitespace and searches for a substring.
    
    For example, this will find an element with text "Home" somewhere inside the `#nav-bar` element:
    
    *   Sync
    *   Async
    
        page.locator("#nav-bar :text('Home')").click()
    
        await page.locator("#nav-bar :text('Home')").click()
    
*   `#nav-bar :text-is("Home")` - the `:text-is()` pseudo-class matches the smallest element with exact text. Exact matching is case-sensitive, trims whitespace and searches for the full string.
    
    For example, `:text-is("Log")` does not match `<button>Log in</button>` because `<button>` contains a single text node `"Log in"` that is not equal to `"Log"`. However, `:text-is("Log")` matches `<button> Log <span>in</span></button>`, because `<button>` contains a text node `" Log "`.
    
    Similarly, `:text-is("Download")` will not match `<button>download</button>` because it is case-sensitive.
    

*   `#nav-bar :text-matches("reg?ex", "i")` - the `:text-matches()` pseudo-class matches the smallest element with text content matching the [JavaScript-like regex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp).
    
    For example, `:text-matches("Log\s*in", "i")` matches `<button>Login</button>` and `<button>log IN</button>`.
    

note

Text matching always normalizes whitespace. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

note

Input elements of the type `button` and `submit` are matched by their `value` instead of text content. For example, `:text("Log in")` matches `<input type=button value="Log in">`.

### CSS: matching only visible elements[​](#css-matching-only-visible-elements "Direct link to CSS: matching only visible elements")

Playwright supports the `:visible` pseudo class in CSS selectors. For example, `css=button` matches all the buttons on the page, while `css=button:visible` only matches visible buttons. This is useful to distinguish elements that are very similar but differ in visibility.

Consider a page with two buttons, first invisible and second visible.

    <button style='display: none'>Invisible</button><button>Visible</button>

*   This will find both buttons and throw a [strictness](/python/docs/locators#strictness) violation error:
    
    *   Sync
    *   Async
    
        page.locator("button").click()
    
        await page.locator("button").click()
    
*   This will only find a second button, because it is visible, and then click it.
    
    *   Sync
    *   Async
    
        page.locator("button:visible").click()
    
        await page.locator("button:visible").click()
    

### CSS: elements that contain other elements[​](#css-elements-that-contain-other-elements "Direct link to CSS: elements that contain other elements")

The `:has()` pseudo-class is an [experimental CSS pseudo-class](https://developer.mozilla.org/en-US/docs/Web/CSS/:has). It returns an element if any of the selectors passed as parameters relative to the `:scope` of the given element match at least one element.

Following snippet returns text content of an `<article>` element that has a `<div class=promo>` inside.

*   Sync
*   Async

    page.locator("article:has(div.promo)").text_content()

    await page.locator("article:has(div.promo)").text_content()

### CSS: elements matching one of the conditions[​](#css-elements-matching-one-of-the-conditions "Direct link to CSS: elements matching one of the conditions")

Comma-separated list of CSS selectors will match all elements that can be selected by one of the selectors in that list.

*   Sync
*   Async

    # Clicks a <button> that has either a "Log in" or "Sign in" text.page.locator('button:has-text("Log in"), button:has-text("Sign in")').click()

    # Clicks a <button> that has either a "Log in" or "Sign in" text.await page.locator('button:has-text("Log in"), button:has-text("Sign in")').click()

The `:is()` pseudo-class is an [experimental CSS pseudo-class](https://developer.mozilla.org/en-US/docs/Web/CSS/:is) that may be useful for specifying a list of extra conditions on an element.

### CSS: matching elements based on layout[​](#css-matching-elements-based-on-layout "Direct link to CSS: matching elements based on layout")

note

Matching based on layout may produce unexpected results. For example, a different element could be matched when layout changes by one pixel.

Sometimes, it is hard to come up with a good selector to the target element when it lacks distinctive features. In this case, using Playwright layout CSS pseudo-classes could help. These can be combined with regular CSS to pinpoint one of the multiple choices.

For example, `input:right-of(:text("Password"))` matches an input field that is to the right of text "Password" - useful when the page has multiple inputs that are hard to distinguish between each other.

Note that layout pseudo-classes are useful in addition to something else, like `input`. If you use a layout pseudo-class alone, like `:right-of(:text("Password"))`, most likely you'll get not the input you are looking for, but some empty element in between the text and the target input.

Layout pseudo-classes use [bounding client rect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect) to compute distance and relative position of the elements.

*   `:right-of(div > button)` - Matches elements that are to the right of any element matching the inner selector, at any vertical position.
*   `:left-of(div > button)` - Matches elements that are to the left of any element matching the inner selector, at any vertical position.
*   `:above(div > button)` - Matches elements that are above any of the elements matching the inner selector, at any horizontal position.
*   `:below(div > button)` - Matches elements that are below any of the elements matching the inner selector, at any horizontal position.
*   `:near(div > button)` - Matches elements that are near (within 50 CSS pixels) any of the elements matching the inner selector.

Note that resulting matches are sorted by their distance to the anchor element, so you can use [locator.first](/python/docs/api/class-locator#locator-first) to pick the closest one. This is only useful if you have something like a list of similar elements, where the closest is obviously the right one. However, using [locator.first](/python/docs/api/class-locator#locator-first) in other cases most likely won't work as expected - it will not target the element you are searching for, but some other element that happens to be the closest like a random empty `<div>`, or an element that is scrolled out and is not currently visible.

*   Sync
*   Async

    # Fill an input to the right of "Username".page.locator("input:right-of(:text(\"Username\"))").fill("value")# Click a button near the promo card.page.locator("button:near(.promo-card)").click()# Click the radio input in the list closest to the "Label 3".page.locator("[type=radio]:left-of(:text(\"Label 3\"))").first.click()

    # Fill an input to the right of "Username".await page.locator("input:right-of(:text(\"Username\"))").fill("value")# Click a button near the promo card.await page.locator("button:near(.promo-card)").click()# Click the radio input in the list closest to the "Label 3".await page.locator("[type=radio]:left-of(:text(\"Label 3\"))").first.click()

All layout pseudo-classes support optional maximum pixel distance as the last argument. For example `button:near(:text("Username"), 120)` matches a button that is at most 120 CSS pixels away from the element with the text "Username".

### CSS: pick n-th match from the query result[​](#css-pick-n-th-match-from-the-query-result "Direct link to CSS: pick n-th match from the query result")

note

It is usually possible to distinguish elements by some attribute or text content, which is more resilient to page changes.

Sometimes page contains a number of similar elements, and it is hard to select a particular one. For example:

    <section> <button>Buy</button> </section><article><div> <button>Buy</button> </div></article><div><div> <button>Buy</button> </div></div>

In this case, `:nth-match(:text("Buy"), 3)` will select the third button from the snippet above. Note that index is one-based.

*   Sync
*   Async

    # Click the third "Buy" buttonpage.locator(":nth-match(:text('Buy'), 3)").click()

    # Click the third "Buy" buttonawait page.locator(":nth-match(:text('Buy'), 3)").click()

`:nth-match()` is also useful to wait until a specified number of elements appear, using [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for).

*   Sync
*   Async

    # Wait until all three buttons are visiblepage.locator(":nth-match(:text('Buy'), 3)").wait_for()

    # Wait until all three buttons are visibleawait page.locator(":nth-match(:text('Buy'), 3)").wait_for()

note

Unlike [`:nth-child()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child), elements do not have to be siblings, they could be anywhere on the page. In the snippet above, all three buttons match `:text("Buy")` selector, and `:nth-match()` selects the third button.

N-th element locator[​](#n-th-element-locator "Direct link to N-th element locator")
------------------------------------------------------------------------------------

You can narrow down query to the n-th match using the `nth=` locator passing a zero-based index.

*   Sync
*   Async

    # Click first buttonpage.locator("button").locator("nth=0").click()# Click last buttonpage.locator("button").locator("nth=-1").click()

    # Click first buttonawait page.locator("button").locator("nth=0").click()# Click last buttonawait page.locator("button").locator("nth=-1").click()

Parent element locator[​](#parent-element-locator "Direct link to Parent element locator")
------------------------------------------------------------------------------------------

When you need to target a parent element of some other element, most of the time you should [locator.filter()](/python/docs/api/class-locator#locator-filter) by the child locator. For example, consider the following DOM structure:

    <li><label>Hello</label></li><li><label>World</label></li>

If you'd like to target the parent `<li>` of a label with text `"Hello"`, using [locator.filter()](/python/docs/api/class-locator#locator-filter) works best:

*   Sync
*   Async

    child = page.get_by_text("Hello")parent = page.get_by_role("listitem").filter(has=child)

    child = page.get_by_text("Hello")parent = page.get_by_role("listitem").filter(has=child)

Alternatively, if you cannot find a suitable locator for the parent element, use `xpath=..`. Note that this method is not as reliable, because any changes to the DOM structure will break your tests. Prefer [locator.filter()](/python/docs/api/class-locator#locator-filter) when possible.

*   Sync
*   Async

    parent = page.get_by_text("Hello").locator('xpath=..')

    parent = page.get_by_text("Hello").locator('xpath=..')

React locator[​](#react-locator "Direct link to React locator")
---------------------------------------------------------------

note

React locator is experimental and prefixed with `_`. The functionality might change in future.

React locator allows finding elements by their component name and property values. The syntax is very similar to [CSS attribute selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) and supports all CSS attribute selector operators.

In React locator, component names are transcribed with **CamelCase**.

*   Sync
*   Async

    page.locator("_react=BookItem").click()

    await page.locator("_react=BookItem").click()

More examples:

*   match by **component**: `_react=BookItem`
*   match by component and **exact property value**, case-sensitive: `_react=BookItem[author = "Steven King"]`
*   match by property value only, **case-insensitive**: `_react=[author = "steven king" i]`
*   match by component and **truthy property value**: `_react=MyButton[enabled]`
*   match by component and **boolean value**: `_react=MyButton[enabled = false]`
*   match by property **value substring**: `_react=[author *= "King"]`
*   match by component and **multiple properties**: `_react=BookItem[author *= "king" i][year = 1990]`
*   match by **nested** property value: `_react=[some.nested.value = 12]`
*   match by component and property value **prefix**: `_react=BookItem[author ^= "Steven"]`
*   match by component and property value **suffix**: `_react=BookItem[author $= "Steven"]`
*   match by component and **key**: `_react=BookItem[key = '2']`
*   match by property value **regex**: `_react=[author = /Steven(\\s+King)?/i]`

To find React element names in a tree use [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi).

note

React locator supports React 15 and above.

note

React locator, as well as [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi), only work against **unminified** application builds.

Vue locator[​](#vue-locator "Direct link to Vue locator")
---------------------------------------------------------

note

Vue locator is experimental and prefixed with `_`. The functionality might change in future.

Vue locator allows finding elements by their component name and property values. The syntax is very similar to [CSS attribute selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) and supports all CSS attribute selector operators.

In Vue locator, component names are transcribed with **kebab-case**.

*   Sync
*   Async

    page.locator("_vue=book-item").click()

    await page.locator("_vue=book-item").click()

More examples:

*   match by **component**: `_vue=book-item`
*   match by component and **exact property value**, case-sensitive: `_vue=book-item[author = "Steven King"]`
*   match by property value only, **case-insensitive**: `_vue=[author = "steven king" i]`
*   match by component and **truthy property value**: `_vue=my-button[enabled]`
*   match by component and **boolean value**: `_vue=my-button[enabled = false]`
*   match by property **value substring**: `_vue=[author *= "King"]`
*   match by component and **multiple properties**: `_vue=book-item[author *= "king" i][year = 1990]`
*   match by **nested** property value: `_vue=[some.nested.value = 12]`
*   match by component and property value **prefix**: `_vue=book-item[author ^= "Steven"]`
*   match by component and property value **suffix**: `_vue=book-item[author $= "Steven"]`
*   match by property value **regex**: `_vue=[author = /Steven(\\s+King)?/i]`

To find Vue element names in a tree use [Vue DevTools](https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=en).

note

Vue locator supports Vue2 and above.

note

Vue locator, as well as [Vue DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi), only work against **unminified** application builds.

XPath locator[​](#xpath-locator "Direct link to XPath locator")
---------------------------------------------------------------

warning

We recommend prioritizing [user-visible locators](/python/docs/locators#quick-guide) like text or accessible role instead of using XPath that is tied to the implementation and easily break when the page changes.

XPath locators are equivalent to calling [`Document.evaluate`](https://developer.mozilla.org/en/docs/Web/API/Document/evaluate).

*   Sync
*   Async

    page.locator("xpath=//button").click()

    await page.locator("xpath=//button").click()

note

Any selector string starting with `//` or `..` are assumed to be an xpath selector. For example, Playwright converts `'//html/body'` to `'xpath=//html/body'`.

note

XPath does not pierce shadow roots.

### XPath union[​](#xpath-union "Direct link to XPath union")

Pipe operator (`|`) can be used to specify multiple selectors in XPath. It will match all elements that can be selected by one of the selectors in that list.

*   Sync
*   Async

    # Waits for either confirmation dialog or load spinner.page.locator("//span[contains(@class, 'spinner__loading')]|//div[@id='confirmation']").wait_for()

    # Waits for either confirmation dialog or load spinner.await page.locator("//span[contains(@class, 'spinner__loading')]|//div[@id='confirmation']").wait_for()

Label to form control retargeting[​](#label-to-form-control-retargeting "Direct link to Label to form control retargeting")
---------------------------------------------------------------------------------------------------------------------------

warning

We recommend [locating by label text](/python/docs/locators#locate-by-label) instead of relying to label-to-control retargeting.

Targeted input actions in Playwright automatically distinguish between labels and controls, so you can target the label to perform an action on the associated control.

For example, consider the following DOM structure: `<label for="password">Password:</label><input id="password" type="password">`. You can target the label by its "Password" text using [page.get\_by\_text()](/python/docs/api/class-page#page-get-by-text). However, the following actions will be performed on the input instead of the label:

*   [locator.click()](/python/docs/api/class-locator#locator-click) will click the label and automatically focus the input field;
*   [locator.fill()](/python/docs/api/class-locator#locator-fill) will fill the input field;
*   [locator.input\_value()](/python/docs/api/class-locator#locator-input-value) will return the value of the input field;
*   [locator.select\_text()](/python/docs/api/class-locator#locator-select-text) will select text in the input field;
*   [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) will set files for the input field with `type=file`;
*   [locator.select\_option()](/python/docs/api/class-locator#locator-select-option) will select an option from the select box.

*   Sync
*   Async

    # Fill the input by targeting the label.page.get_by_text("Password").fill("secret")

    # Fill the input by targeting the label.await page.get_by_text("Password").fill("secret")

However, other methods will target the label itself, for example [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) will assert the text content of the label, not the input field.

*   Sync
*   Async

    # Fill the input by targeting the label.expect(page.locator("label")).to_have_text("Password")

    # Fill the input by targeting the label.await expect(page.locator("label")).to_have_text("Password")

Legacy text locator[​](#legacy-text-locator "Direct link to Legacy text locator")
---------------------------------------------------------------------------------

warning

We recommend the modern [text locator](/python/docs/locators#get-by-text) instead.

Legacy text locator matches elements that contain passed text.

*   Sync
*   Async

    page.locator("text=Log in").click()

    await page.locator("text=Log in").click()

Legacy text locator has a few variations:

*   `text=Log in` - default matching is case-insensitive, trims whitespace and searches for a substring. For example, `text=Log` matches `<button>Log in</button>`.
    
    *   Sync
    *   Async
    
        page.locator("text=Log in").click()
    
        await page.locator("text=Log in").click()
    
*   `text="Log in"` - text body can be escaped with single or double quotes to search for a text node with exact content after trimming whitespace.
    
    For example, `text="Log"` does not match `<button>Log in</button>` because `<button>` contains a single text node `"Log in"` that is not equal to `"Log"`. However, `text="Log"` matches `<button> Log <span>in</span></button>`, because `<button>` contains a text node `" Log "`. This exact mode implies case-sensitive matching, so `text="Download"` will not match `<button>download</button>`.
    
    Quoted body follows the usual escaping rules, e.g. use `\"` to escape double quote in a double-quoted string: `text="foo\"bar"`.
    
    *   Sync
    *   Async
    
        page.locator("text='Log in'").click()
    
        await page.locator("text='Log in'").click()
    
*   `/Log\s*in/i` - body can be a [JavaScript-like regex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp) wrapped in `/` symbols. For example, `text=/Log\s*in/i` matches `<button>Login</button>` and `<button>log IN</button>`.
    
    *   Sync
    *   Async
    
        page.locator("text=/Log\s*in/i").click()
    
        await page.locator("text=/Log\s*in/i").click()
    

note

String selectors starting and ending with a quote (either `"` or `'`) are assumed to be a legacy text locators. For example, `"Log in"` is converted to `text="Log in"` internally.

note

Matching always normalizes whitespace. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

note

Input elements of the type `button` and `submit` are matched by their `value` instead of text content. For example, `text=Log in` matches `<input type=button value="Log in">`.

id, data-testid, data-test-id, data-test selectors[​](#id-data-testid-data-test-id-data-test-selectors "Direct link to id, data-testid, data-test-id, data-test selectors")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

warning

We recommend [locating by test id](/python/docs/locators#locate-by-test-id) instead.

Playwright supports shorthand for selecting elements using certain attributes. Currently, only the following attributes are supported:

*   `id`
*   `data-testid`
*   `data-test-id`
*   `data-test`

*   Sync
*   Async

    # Fill an input with the id "username"page.locator('id=username').fill('value')# Click an element with data-test-id "submit"page.locator('data-test-id=submit').click()

    # Fill an input with the id "username"await page.locator('id=username').fill('value')# Click an element with data-test-id "submit"await page.locator('data-test-id=submit').click()

note

Attribute selectors are not CSS selectors, so anything CSS-specific like `:enabled` is not supported. For more features, use a proper [css](#css-locator) selector, e.g. `css=[data-test="login"]:enabled`.

Chaining selectors[​](#chaining-selectors "Direct link to Chaining selectors")
------------------------------------------------------------------------------

warning

We recommend [chaining locators](/python/docs/locators#matching-inside-a-locator) instead.

Selectors defined as `engine=body` or in short-form can be combined with the `>>` token, e.g. `selector1 >> selector2 >> selectors3`. When selectors are chained, the next one is queried relative to the previous one's result.

For example,

    css=article >> css=.bar > .baz >> css=span[attr=value]

is equivalent to

    document    .querySelector('article')    .querySelector('.bar > .baz')    .querySelector('span[attr=value]');

If a selector needs to include `>>` in the body, it should be escaped inside a string to not be confused with chaining separator, e.g. `text="some >> text"`.

### Intermediate matches[​](#intermediate-matches "Direct link to Intermediate matches")

warning

We recommend [filtering by another locator](/python/docs/locators#filter-by-childdescendant) to locate elements that contain other elements.

By default, chained selectors resolve to an element queried by the last selector. A selector can be prefixed with `*` to capture elements that are queried by an intermediate selector.

For example, `css=article >> text=Hello` captures the element with the text `Hello`, and `*css=article >> text=Hello` (note the `*`) captures the `article` element that contains some element with the text `Hello`.

# Pages

Pages
=====

Pages[​](#pages "Direct link to Pages")
---------------------------------------

Each [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext") can have multiple pages. A [Page](/python/docs/api/class-page "Page") refers to a single tab or a popup window within a browser context. It should be used to navigate to URLs and interact with the page content.

*   Sync
*   Async

    page = context.new_page()# Navigate explicitly, similar to entering a URL in the browser.page.goto('http://example.com')# Fill an input.page.locator('#search').fill('query')# Navigate implicitly by clicking a link.page.locator('#submit').click()# Expect a new url.print(page.url)

    page = await context.new_page()# Navigate explicitly, similar to entering a URL in the browser.await page.goto('http://example.com')# Fill an input.await page.locator('#search').fill('query')# Navigate implicitly by clicking a link.await page.locator('#submit').click()# Expect a new url.print(page.url)

Multiple pages[​](#multiple-pages "Direct link to Multiple pages")
------------------------------------------------------------------

Each browser context can host multiple pages (tabs).

*   Each page behaves like a focused, active page. Bringing the page to front is not required.
*   Pages inside a context respect context-level emulation, like viewport sizes, custom network routes or browser locale.

*   Sync
*   Async

    # create two pagespage_one = context.new_page()page_two = context.new_page()# get pages of a browser contextall_pages = context.pages

    # create two pagespage_one = await context.new_page()page_two = await context.new_page()# get pages of a browser contextall_pages = context.pages

Handling new pages[​](#handling-new-pages "Direct link to Handling new pages")
------------------------------------------------------------------------------

The `page` event on browser contexts can be used to get new pages that are created in the context. This can be used to handle new pages opened by `target="_blank"` links.

*   Sync
*   Async

    # Get page after a specific action (e.g. clicking a link)with context.expect_page() as new_page_info:    page.get_by_text("open new tab").click() # Opens a new tabnew_page = new_page_info.value# Interact with the new page normallynew_page.get_by_role("button").click()print(new_page.title())

    # Get page after a specific action (e.g. clicking a link)async with context.expect_page() as new_page_info:    await page.get_by_text("open new tab").click() # Opens a new tabnew_page = await new_page_info.value# Interact with the new page normallyawait new_page.get_by_role("button").click()print(await new_page.title())

If the action that triggers the new page is unknown, the following pattern can be used.

*   Sync
*   Async

    # Get all new pages (including popups) in the contextdef handle_page(page):    page.wait_for_load_state()    print(page.title())context.on("page", handle_page)

    # Get all new pages (including popups) in the contextasync def handle_page(page):    await page.wait_for_load_state()    print(await page.title())context.on("page", handle_page)

Handling popups[​](#handling-popups "Direct link to Handling popups")
---------------------------------------------------------------------

If the page opens a pop-up (e.g. pages opened by `target="_blank"` links), you can get a reference to it by listening to the `popup` event on the page.

This event is emitted in addition to the `browserContext.on('page')` event, but only for popups relevant to this page.

*   Sync
*   Async

    # Get popup after a specific action (e.g., click)with page.expect_popup() as popup_info:    page.get_by_text("open the popup").click()popup = popup_info.value# Interact with the popup normallypopup.get_by_role("button").click()print(popup.title())

    # Get popup after a specific action (e.g., click)async with page.expect_popup() as popup_info:    await page.get_by_text("open the popup").click()popup = await popup_info.value# Interact with the popup normallyawait popup.get_by_role("button").click()print(await popup.title())

If the action that triggers the popup is unknown, the following pattern can be used.

*   Sync
*   Async

    # Get all popups when they opendef handle_popup(popup):    popup.wait_for_load_state()    print(popup.title())page.on("popup", handle_popup)

    # Get all popups when they openasync def handle_popup(popup):    await popup.wait_for_load_state()    print(await popup.title())page.on("popup", handle_popup)

# Page object models

Page object models
==================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Large test suites can be structured to optimize ease of authoring and maintenance. Page object models are one such approach to structure your test suite.

A page object represents a part of your web application. An e-commerce web application might have a home page, a listings page and a checkout page. Each of them can be represented by page object models.

Page objects **simplify authoring** by creating a higher-level API which suits your application and **simplify maintenance** by capturing element selectors in one place and create reusable code to avoid repetition.

Implementation[​](#implementation "Direct link to Implementation")
------------------------------------------------------------------

Page object models wrap over a Playwright [Page](/python/docs/api/class-page "Page").

*   Sync
*   Async

models/search.py

    class SearchPage:    def __init__(self, page):        self.page = page        self.search_term_input = page.locator('[aria-label="Enter your search term"]')    def navigate(self):        self.page.goto("https://bing.com")    def search(self, text):        self.search_term_input.fill(text)        self.search_term_input.press("Enter")

models/search.py

    class SearchPage:    def __init__(self, page):        self.page = page        self.search_term_input = page.locator('[aria-label="Enter your search term"]')    async def navigate(self):        await self.page.goto("https://bing.com")    async def search(self, text):        await self.search_term_input.fill(text)        await self.search_term_input.press("Enter")

Page objects can then be used inside a test.

*   Sync
*   Async

test\_search.py

    from models.search import SearchPage# in the testpage = browser.new_page()search_page = SearchPage(page)search_page.navigate()search_page.search("search query")

test\_search.py

    from models.search import SearchPage# in the testpage = await browser.new_page()search_page = SearchPage(page)await search_page.navigate()await search_page.search("search query")

# Screenshots

Screenshots
===========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Here is a quick way to capture a screenshot and save it into a file:

*   Sync
*   Async

    page.screenshot(path="screenshot.png")

    await page.screenshot(path="screenshot.png")

[Screenshots API](/python/docs/api/class-page#page-screenshot) accepts many parameters for image format, clip area, quality, etc. Make sure to check them out.

Full page screenshots[​](#full-page-screenshots "Direct link to Full page screenshots")
---------------------------------------------------------------------------------------

Full page screenshot is a screenshot of a full scrollable page, as if you had a very tall screen and the page could fit it entirely.

*   Sync
*   Async

    page.screenshot(path="screenshot.png", full_page=True)

    await page.screenshot(path="screenshot.png", full_page=True)

Capture into buffer[​](#capture-into-buffer "Direct link to Capture into buffer")
---------------------------------------------------------------------------------

Rather than writing into a file, you can get a buffer with the image and post-process it or pass it to a third party pixel diff facility.

*   Sync
*   Async

    screenshot_bytes = page.screenshot()print(base64.b64encode(screenshot_bytes).decode())

    # Capture into Imagescreenshot_bytes = await page.screenshot()print(base64.b64encode(screenshot_bytes).decode())

Element screenshot[​](#element-screenshot "Direct link to Element screenshot")
------------------------------------------------------------------------------

Sometimes it is useful to take a screenshot of a single element.

*   Sync
*   Async

    page.locator(".header").screenshot(path="screenshot.png")

    await page.locator(".header").screenshot(path="screenshot.png")

# Snapshot testing

Snapshot testing
================

Overview[​](#overview "Direct link to Overview")
------------------------------------------------

With Playwright's Snapshot testing you can assert the accessibility tree of a page against a predefined snapshot template.

*   Sync
*   Async

    page.goto('https://playwright.dev/')expect(page.query_selector('banner')).to_match_aria_snapshot("""  - banner:    - heading /Playwright enables reliable end-to-end/ [level=1]    - link "Get started"    - link "Star microsoft/playwright on GitHub"    - link /[\\d]+k\\+ stargazers on GitHub/""")

    await page.goto('https://playwright.dev/')await expect(page.query_selector('banner')).to_match_aria_snapshot("""  - banner:    - heading /Playwright enables reliable end-to-end/ [level=1]    - link "Get started"    - link "Star microsoft/playwright on GitHub"    - link /[\\d]+k\\+ stargazers on GitHub/""")

Assertion testing vs Snapshot testing[​](#assertion-testing-vs-snapshot-testing "Direct link to Assertion testing vs Snapshot testing")
---------------------------------------------------------------------------------------------------------------------------------------

Snapshot testing and assertion testing serve different purposes in test automation:

### Assertion testing[​](#assertion-testing "Direct link to Assertion testing")

Assertion testing is a targeted approach where you assert specific values or conditions about elements or components. For instance, with Playwright, [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) verifies that an element contains the expected text, and [expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value) confirms that an input field has the expected value. Assertion tests are specific and generally check the current state of an element or property against an expected, predefined state. They work well for predictable, single-value checks but are limited in scope when testing the broader structure or variations.

**Advantages**

*   **Clarity**: The intent of the test is explicit and easy to understand.
*   **Specificity**: Tests focus on particular aspects of functionality, making them more robust against unrelated changes.
*   **Debugging**: Failures provide targeted feedback, pointing directly to the problematic aspect.

**Disadvantages**

*   **Verbose for complex outputs**: Writing assertions for complex data structures or large outputs can be cumbersome and error-prone.
*   **Maintenance overhead**: As code evolves, manually updating assertions can be time-consuming.

### Snapshot testing[​](#snapshot-testing "Direct link to Snapshot testing")

Snapshot testing captures a “snapshot” or representation of the entire state of an element, component, or data at a given moment, which is then saved for future comparisons. When re-running tests, the current state is compared to the snapshot, and if there are differences, the test fails. This approach is especially useful for complex or dynamic structures, where manually asserting each detail would be too time-consuming. Snapshot testing is broader and more holistic than assertion testing, allowing you to track more complex changes over time.

**Advantages**

*   **Simplifies complex outputs**: For example, testing a UI component's rendered output can be tedious with traditional assertions. Snapshots capture the entire output for easy comparison.
*   **Quick Feedback loop**: Developers can easily spot unintended changes in the output.
*   **Encourages consistency**: Helps maintain consistent output as code evolves.

**Disadvantages**

*   **Over-Reliance**: It can be tempting to accept changes to snapshots without fully understanding them, potentially hiding bugs.
*   **Granularity**: Large snapshots may be hard to interpret when differences arise, especially if minor changes affect large portions of the output.
*   **Suitability**: Not ideal for highly dynamic content where outputs change frequently or unpredictably.

### When to use[​](#when-to-use "Direct link to When to use")

*   **Snapshot testing** is ideal for:
    *   UI testing of whole pages and components.
    *   Broad structural checks for complex UI components.
    *   Regression testing for outputs that rarely change structure.
*   **Assertion testing** is ideal for:
    *   Core logic validation.
    *   Computed value testing.
    *   Fine-grained tests requiring precise conditions.

By combining snapshot testing for broad, structural checks and assertion testing for specific functionality, you can achieve a well-rounded testing strategy.

Aria snapshots[​](#aria-snapshots "Direct link to Aria snapshots")
------------------------------------------------------------------

In Playwright, aria snapshots provide a YAML representation of the accessibility tree of a page. These snapshots can be stored and compared later to verify if the page structure remains consistent or meets defined expectations.

The YAML format describes the hierarchical structure of accessible elements on the page, detailing **roles**, **attributes**, **values**, and **text content**. The structure follows a tree-like syntax, where each node represents an accessible element, and indentation indicates nested elements.

Each accessible element in the tree is represented as a YAML node:

    - role "name" [attribute=value]

*   **role**: Specifies the ARIA or HTML role of the element (e.g., `heading`, `list`, `listitem`, `button`).
*   **"name"**: Accessible name of the element. Quoted strings indicate exact values, `/patterns/` are used for regular expression.
*   **\[attribute=value\]**: Attributes and values, in square brackets, represent specific ARIA attributes, such as `checked`, `disabled`, `expanded`, `level`, `pressed`, or `selected`.

These values are derived from ARIA attributes or calculated based on HTML semantics. To inspect the accessibility tree structure of a page, use the [Chrome DevTools Accessibility Tab](https://developer.chrome.com/docs/devtools/accessibility/reference#tab).

Snapshot matching[​](#snapshot-matching "Direct link to Snapshot matching")
---------------------------------------------------------------------------

The [expect(locator).to\_match\_aria\_snapshot()](/python/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot) assertion method in Playwright compares the accessible structure of the locator scope with a predefined aria snapshot template, helping validate the page's state against testing requirements.

For the following DOM:

    <h1>title</h1>

You can match it using the following snapshot template:

*   Sync
*   Async

    expect(page.locator("body")).to_match_aria_snapshot("""  - heading "title"""")

    await expect(page.locator("body")).to_match_aria_snapshot("""  - heading "title"""")

When matching, the snapshot template is compared to the current accessibility tree of the page:

*   If the tree structure matches the template, the test passes; otherwise, it fails, indicating a mismatch between expected and actual accessibility states.
*   The comparison is case-sensitive and collapses whitespace, so indentation and line breaks are ignored.
*   The comparison is order-sensitive, meaning the order of elements in the snapshot template must match the order in the page's accessibility tree.

### Partial matching[​](#partial-matching "Direct link to Partial matching")

You can perform partial matches on nodes by omitting attributes or accessible names, enabling verification of specific parts of the accessibility tree without requiring exact matches. This flexibility is helpful for dynamic or irrelevant attributes.

    <button>Submit</button>

_aria snapshot_

    - button

In this example, the button role is matched, but the accessible name ("Submit") is not specified, allowing the test to pass regardless of the button's label.

* * *

For elements with ARIA attributes like `checked` or `disabled`, omitting these attributes allows partial matching, focusing solely on role and hierarchy.

    <input type="checkbox" checked>

_aria snapshot for partial match_

    - checkbox

In this partial match, the `checked` attribute is ignored, so the test will pass regardless of the checkbox state.

* * *

Similarly, you can partially match children in lists or groups by omitting specific list items or nested elements.

    <ul>  <li>Feature A</li>  <li>Feature B</li>  <li>Feature C</li></ul>

_aria snapshot for partial match_

    - list  - listitem: Feature B

Partial matches let you create flexible snapshot tests that verify essential page structure without enforcing specific content or attributes.

### Strict matching[​](#strict-matching "Direct link to Strict matching")

By default, a template containing the subset of children will be matched:

    <ul>  <li>Feature A</li>  <li>Feature B</li>  <li>Feature C</li></ul>

_aria snapshot for partial match_

    - list  - listitem: Feature B

The `/children` property can be used to control how child elements are matched:

*   `contain` (default): Matches if all specified children are present in order
*   `equal`: Matches if the children exactly match the specified list in order
*   `deep-equal`: Matches if the children exactly match the specified list in order, including nested children

    <ul>  <li>Feature A</li>  <li>Feature B</li>  <li>Feature C</li></ul>

_aria snapshot will fail due to Feature C not being in the template_

    - list  - /children: equal  - listitem: Feature A  - listitem: Feature B

### Matching with regular expressions[​](#matching-with-regular-expressions "Direct link to Matching with regular expressions")

Regular expressions allow flexible matching for elements with dynamic or variable text. Accessible names and text can support regex patterns.

    <h1>Issues 12</h1>

_aria snapshot with regular expression_

    - heading /Issues \d+/

Generating snapshots[​](#generating-snapshots "Direct link to Generating snapshots")
------------------------------------------------------------------------------------

Creating aria snapshots in Playwright helps ensure and maintain your application's structure. You can generate snapshots in various ways depending on your testing setup and workflow.

### Generating snapshots with the Playwright code generator[​](#generating-snapshots-with-the-playwright-code-generator "Direct link to Generating snapshots with the Playwright code generator")

If you're using Playwright's [Code Generator](/python/docs/codegen), generating aria snapshots is streamlined with its interactive interface:

*   **"Assert snapshot" Action**: In the code generator, you can use the "Assert snapshot" action to automatically create a snapshot assertion for the selected elements. This is a quick way to capture the aria snapshot as part of your recorded test flow.
*   **"Aria snapshot" Tab**: The "Aria snapshot" tab within the code generator interface visually represents the aria snapshot for a selected locator, letting you explore, inspect, and verify element roles, attributes, and accessible names to aid snapshot creation and review.

### Using the `Locator.ariaSnapshot` method[​](#using-the-locatorariasnapshot-method "Direct link to using-the-locatorariasnapshot-method")

The [locator.aria\_snapshot()](/python/docs/api/class-locator#locator-aria-snapshot) method allows you to programmatically create a YAML representation of accessible elements within a locator's scope, especially helpful for generating snapshots dynamically during test execution.

**Example**:

*   Sync
*   Async

    snapshot = page.locator("body").aria_snapshot()print(snapshot)

    snapshot = await page.locator("body").aria_snapshot()print(snapshot)

This command outputs the aria snapshot within the specified locator's scope in YAML format, which you can validate or store as needed.

Accessibility tree examples[​](#accessibility-tree-examples "Direct link to Accessibility tree examples")
---------------------------------------------------------------------------------------------------------

### Headings with level attributes[​](#headings-with-level-attributes "Direct link to Headings with level attributes")

Headings can include a `level` attribute indicating their heading level.

    <h1>Title</h1><h2>Subtitle</h2>

_aria snapshot_

    - heading "Title" [level=1]- heading "Subtitle" [level=2]

### Text nodes[​](#text-nodes "Direct link to Text nodes")

Standalone or descriptive text elements appear as text nodes.

    <div>Sample accessible name</div>

_aria snapshot_

    - text: Sample accessible name

### Inline multiline text[​](#inline-multiline-text "Direct link to Inline multiline text")

Multiline text, such as paragraphs, is normalized in the aria snapshot.

    <p>Line 1<br>Line 2</p>

_aria snapshot_

    - paragraph: Line 1 Line 2

### Links[​](#links "Direct link to Links")

Links display their text or composed content from pseudo-elements.

    <a href="#more-info">Read more about Accessibility</a>

_aria snapshot_

    - link "Read more about Accessibility"

### Text boxes[​](#text-boxes "Direct link to Text boxes")

Input elements of type `text` show their `value` attribute content.

    <input type="text" value="Enter your name">

_aria snapshot_

    - textbox: Enter your name

### Lists with items[​](#lists-with-items "Direct link to Lists with items")

Ordered and unordered lists include their list items.

    <ul aria-label="Main Features">  <li>Feature 1</li>  <li>Feature 2</li></ul>

_aria snapshot_

    - list "Main Features":  - listitem: Feature 1  - listitem: Feature 2

### Grouped elements[​](#grouped-elements "Direct link to Grouped elements")

Groups capture nested elements, such as `<details>` elements with summary content.

    <details>  <summary>Summary</summary>  <p>Detail content here</p></details>

_aria snapshot_

    - group: Summary

### Attributes and states[​](#attributes-and-states "Direct link to Attributes and states")

Commonly used ARIA attributes, like `checked`, `disabled`, `expanded`, `level`, `pressed`, and `selected`, represent control states.

#### Checkbox with `checked` attribute[​](#checkbox-with-checked-attribute "Direct link to checkbox-with-checked-attribute")

    <input type="checkbox" checked>

_aria snapshot_

    - checkbox [checked]

#### Button with `pressed` attribute[​](#button-with-pressed-attribute "Direct link to button-with-pressed-attribute")

    <button aria-pressed="true">Toggle</button>

_aria snapshot_

    - button "Toggle" [pressed=true]

# Test generator

Test generator
==============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright comes with the ability to generate tests for you as you perform actions in the browser and is a great way to quickly get started with testing. Playwright will look at your page and figure out the best locator, prioritizing [role, text and test id locators](/python/docs/locators). If the generator finds multiple elements matching the locator, it will improve the locator to make it resilient that uniquely identify the target element.

Generate tests with the Playwright Inspector[​](#generate-tests-with-the-playwright-inspector "Direct link to Generate tests with the Playwright Inspector")
------------------------------------------------------------------------------------------------------------------------------------------------------------

When running the `codegen` command two windows will be opened, a browser window where you interact with the website you wish to test and the Playwright Inspector window where you can record your tests and then copy them into your editor.

### Running Codegen[​](#running-codegen "Direct link to Running Codegen")

Use the `codegen` command to run the test generator followed by the URL of the website you want to generate tests for. The URL is optional and you can always run the command without it and then add the URL directly into the browser window instead.

    playwright codegen demo.playwright.dev/todomvc

### Recording a test[​](#recording-a-test "Direct link to Recording a test")

Run the `codegen` command and perform actions in the browser window. Playwright will generate the code for the user interactions which you can see in the Playwright Inspector window. Once you have finished recording your test stop the recording and press the **copy** button to copy your generated test into your editor.

With the test generator you can record:

*   Actions like click or fill by simply interacting with the page
*   Assertions by clicking on one of the icons in the toolbar and then clicking on an element on the page to assert against. You can choose:
    *   `'assert visibility'` to assert that an element is visible
    *   `'assert text'` to assert that an element contains specific text
    *   `'assert value'` to assert that an element has a specific value

![recording a test](https://github.com/microsoft/playwright/assets/13063165/9751b609-6e4c-486b-a961-f86f177b1d58)

###### [​](#-1 "Direct link to -1")

When you have finished interacting with the page, press the **record** button to stop the recording and use the **copy** button to copy the generated code to your editor.

Use the **clear** button to clear the code to start recording again. Once finished, close the Playwright inspector window or stop the terminal command.

### Generating locators[​](#generating-locators "Direct link to Generating locators")

You can generate [locators](/python/docs/locators) with the test generator.

*   Press the `'Record'` button to stop the recording and the `'Pick Locator'` button will appear.
*   Click on the `'Pick Locator'` button and then hover over elements in the browser window to see the locator highlighted underneath each element.
*   To choose a locator, click on the element you would like to locate and the code for that locator will appear in the field next to the Pick Locator button.
*   You can then edit the locator in this field to fine tune it or use the copy button to copy it and paste it into your code.

###### [​](#-2 "Direct link to -2")

![picking a locator](https://github.com/microsoft/playwright/assets/13063165/95d11f48-96a4-46b9-9c2a-63c3aa4fdce7)

Emulation[​](#emulation "Direct link to Emulation")
---------------------------------------------------

You can use the test generator to generate tests using emulation so as to generate a test for a specific viewport, device, color scheme, as well as emulate the geolocation, language or timezone. The test generator can also generate a test while preserving authenticated state.

### Emulate viewport size[​](#emulate-viewport-size "Direct link to Emulate viewport size")

Playwright opens a browser window with its viewport set to a specific width and height and is not responsive as tests need to be run under the same conditions. Use the `--viewport` option to generate tests with a different viewport size.

    playwright codegen --viewport-size="800,600" playwright.dev

###### [​](#-3 "Direct link to -3")

![Codegen generating code for tests for playwright.dev website with a specific viewport python](https://user-images.githubusercontent.com/13063165/220403118-7704b708-dea3-44b3-97a4-04c2b9d1d0fa.png)

### Emulate devices[​](#emulate-devices "Direct link to Emulate devices")

Record scripts and tests while emulating a mobile device using the `--device` option which sets the viewport size and user agent among others.

    playwright codegen --device="iPhone 13" playwright.dev

###### [​](#-4 "Direct link to -4")

![Codegen generating code for tests for playwright.dev website emulated for iPhone 13 python](https://user-images.githubusercontent.com/13063165/220922790-5c5a4d1a-e27d-4c9b-90ac-13cf9c925706.png)

### Emulate color scheme[​](#emulate-color-scheme "Direct link to Emulate color scheme")

Record scripts and tests while emulating the color scheme with the `--color-scheme` option.

    playwright codegen --color-scheme=dark playwright.dev

###### [​](#-5 "Direct link to -5")

![Codegen generating code for tests for playwright.dev website in dark mode python](https://user-images.githubusercontent.com/13063165/220930714-737647fd-ae99-4dd3-b7a4-4f3eb4fe712d.png)

### Emulate geolocation, language and timezone[​](#emulate-geolocation-language-and-timezone "Direct link to Emulate geolocation, language and timezone")

Record scripts and tests while emulating timezone, language & location using the `--timezone`, `--geolocation` and `--lang` options. Once the page opens:

1.  Accept the cookies
2.  On the top right, click on the locate me button to see geolocation in action.

    playwright codegen --timezone="Europe/Rome" --geolocation="41.890221,12.492348" --lang="it-IT" bing.com/maps

###### [​](#-6 "Direct link to -6")

![Codegen generating code for tests for bing maps showing timezone, geolocation as Rome, Italy and in Italian language python](https://user-images.githubusercontent.com/13063165/220932413-f2943956-dd38-4560-94b9-51968076210d.png)

### Preserve authenticated state[​](#preserve-authenticated-state "Direct link to Preserve authenticated state")

Run `codegen` with `--save-storage` to save [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) and [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) data at the end of the session. This is useful to separately record an authentication step and reuse it later when recording more tests.

    playwright codegen github.com/microsoft/playwright --save-storage=auth.json

###### [​](#-7 "Direct link to -7")

![github page before logging in python](https://user-images.githubusercontent.com/13063165/220929429-8756ec49-fbf2-46e0-8f41-d25f5f5a6623.png)

#### Login[​](#login "Direct link to Login")

After performing authentication and closing the browser, `auth.json` will contain the storage state which you can then reuse in your tests.

![login to GitHub screen](https://user-images.githubusercontent.com/13063165/220561688-04b2b984-4ba6-4446-8b0a-8058876e2a02.png)

Make sure you only use the `auth.json` locally as it contains sensitive information. Add it to your `.gitignore` or delete it once you have finished generating your tests.

#### Load authenticated state[​](#load-authenticated-state "Direct link to Load authenticated state")

Run with `--load-storage` to consume the previously loaded storage from the `auth.json`. This way, all [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) and [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) data will be restored, bringing most web apps to the authenticated state without the need to login again. This means you can continue generating tests from the logged in state.

    playwright codegen --load-storage=auth.json github.com/microsoft/playwright

###### [​](#-8 "Direct link to -8")

![github signed in showing use of load storage python](https://user-images.githubusercontent.com/13063165/220928211-ca1d4dc9-9966-414e-ab23-a3ef1d2d5ed9.png)

Record using custom setup[​](#record-using-custom-setup "Direct link to Record using custom setup")
---------------------------------------------------------------------------------------------------

If you would like to use codegen in some non-standard setup (for example, use [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route)), it is possible to call [page.pause()](/python/docs/api/class-page#page-pause) that will open a separate window with codegen controls.

*   Sync
*   Async

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    # Make sure to run headed.    browser = p.chromium.launch(headless=False)    # Setup context however you like.    context = browser.new_context() # Pass any options    context.route('**/*', lambda route: route.continue_())    # Pause the page, and start recording manually.    page = context.new_page()    page.pause()

    import asynciofrom playwright.async_api import async_playwrightasync def main():    async with async_playwright() as p:        # Make sure to run headed.        browser = await p.chromium.launch(headless=False)        # Setup context however you like.        context = await browser.new_context() # Pass any options        await context.route('**/*', lambda route: route.continue_())        # Pause the page, and start recording manually.        page = await context.new_page()        await page.pause()asyncio.run(main())

# Touch events (legacy)

Touch events (legacy)
=====================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Web applications that handle legacy [touch events](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events) to respond to gestures like swipe, pinch, and tap can be tested by manually dispatching [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)s to the page. The examples below demonstrate how to use [locator.dispatch\_event()](/python/docs/api/class-locator#locator-dispatch-event) and pass [Touch](https://developer.mozilla.org/en-US/docs/Web/API/Touch) points as arguments.

### Emulating pan gesture[​](#emulating-pan-gesture "Direct link to Emulating pan gesture")

In the example below, we emulate pan gesture that is expected to move the map. The app under test only uses `clientX/clientY` coordinates of the touch point, so we initialize just that. In a more complex scenario you may need to also set `pageX/pageY/screenX/screenY`, if your app needs them.

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, expectdef pan(locator, deltaX=0, deltaY=0, steps=5):    bounds = locator.bounding_box()    centerX = bounds['x'] + bounds['width'] / 2    centerY = bounds['y'] + bounds['height'] / 2    touches = [{        'identifier': 0,        'clientX': centerX,        'clientY': centerY,    }]    locator.dispatch_event('touchstart', {        'touches': touches,        'changedTouches': touches,        'targetTouches': touches    })    for i in range(1, steps + 1):        touches = [{            'identifier': 0,            'clientX': centerX + deltaX * i / steps,            'clientY': centerY + deltaY * i / steps,        }]        locator.dispatch_event('touchmove', {            'touches': touches,            'changedTouches': touches,            'targetTouches': touches        })    locator.dispatch_event('touchend')def test_pan_gesture_to_move_the_map(page):    page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z', wait_until='commit')    page.get_by_role('button', name='Keep using web').click()    expect(page.get_by_role('button', name='Keep using web')).not_to_be_visible()    met = page.locator('[data-test-id="met"]')    for _ in range(5):        pan(met, 200, 100)    page.screenshot(path="screenshot.png")with sync_playwright() as p:    browser = p.chromium.launch()    context = browser.new_context(**p.devices['Pixel 7'])    page = context.new_page()    test_pan_gesture_to_move_the_map(page)    browser.close()

    from playwright.async_api import async_playwright, expectasync def pan(locator, deltaX=0, deltaY=0, steps=5):    bounds = await locator.bounding_box()    centerX = bounds['x'] + bounds['width'] / 2    centerY = bounds['y'] + bounds['height'] / 2    touches = [{        'identifier': 0,        'clientX': centerX,        'clientY': centerY,    }]    await locator.dispatch_event('touchstart', {        'touches': touches,        'changedTouches': touches,        'targetTouches': touches    })    for i in range(1, steps + 1):        touches = [{            'identifier': 0,            'clientX': centerX + deltaX * i / steps,            'clientY': centerY + deltaY * i / steps,        }]        await locator.dispatch_event('touchmove', {            'touches': touches,            'changedTouches': touches,            'targetTouches': touches        })    await locator.dispatch_event('touchend')async def test_pan_gesture_to_move_the_map(page):    await page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z', wait_until='commit')    await page.get_by_role('button', name='Keep using web').click()    await expect(page.get_by_role('button', name='Keep using web')).not_to_be_visible()    met = page.locator('[data-test-id="met"]')    for _ in range(5):        await pan(met, 200, 100)    await page.screenshot(path="screenshot.png")async def main():    async with async_playwright() as p:        browser = await p.chromium.launch()        context = await browser.new_context(**p.devices['Pixel 7'])        page = await context.new_page()        await test_pan_gesture_to_move_the_map(page)        await browser.close()import asyncioasyncio.run(main())

### Emulating pinch gesture[​](#emulating-pinch-gesture "Direct link to Emulating pinch gesture")

In the example below, we emulate pinch gesture, i.e. two touch points moving closer to each other. It is expected to zoom out the map. The app under test only uses `clientX/clientY` coordinates of touch points, so we initialize just that. In a more complex scenario you may need to also set `pageX/pageY/screenX/screenY`, if your app needs them.

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, expectdef pinch(locator, arg):    bounds = locator.bounding_box()    centerX = bounds['x'] + bounds['width'] / 2    centerY = bounds['y'] + bounds['height'] / 2    deltaX = arg.get('deltaX', 50)    steps = arg.get('steps', 5)    stepDeltaX = deltaX / (steps + 1)    touches = [        {            'identifier': 0,            'clientX': centerX - (deltaX if arg.get('direction') == 'in' else stepDeltaX),            'clientY': centerY,        },        {            'identifier': 1,            'clientX': centerX + (deltaX if arg.get('direction') == 'in' else stepDeltaX),            'clientY': centerY,        },    ]    locator.dispatch_event('touchstart', {        'touches': touches,        'changedTouches': touches,        'targetTouches': touches    })    for i in range(1, steps + 1):        offset = deltaX - i * stepDeltaX if arg.get('direction') == 'in' else stepDeltaX * (i + 1)        touches = [            {                'identifier': 0,                'clientX': centerX - offset,                'clientY': centerY,            },            {                'identifier': 1,                'clientX': centerX + offset,                'clientY': centerY,            },        ]        locator.dispatch_event('touchmove', {            'touches': touches,            'changedTouches': touches,            'targetTouches': touches        })    locator.dispatch_event('touchend', {        'touches': [],        'changedTouches': [],        'targetTouches': []    })def test_pinch_in_gesture_to_zoom_out_the_map(page):    page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z', wait_until='commit')    page.get_by_role('button', name='Keep using web').click()    expect(page.get_by_role('button', name='Keep using web')).not_to_be_visible()    met = page.locator('[data-test-id="met"]')    for _ in range(5):        pinch(met, {'deltaX': 40, 'direction': 'in'})    page.screenshot(path="screenshot.png")with sync_playwright() as p:    browser = p.chromium.launch()    context = browser.new_context(**p.devices['Pixel 7'])    page = context.new_page()    test_pinch_in_gesture_to_zoom_out_the_map(page)    browser.close()

    from playwright.async_api import async_playwright, expectasync def pinch(locator, arg):    bounds = await locator.bounding_box()    centerX = bounds['x'] + bounds['width'] / 2    centerY = bounds['y'] + bounds['height'] / 2    deltaX = arg.get('deltaX', 50)    steps = arg.get('steps', 5)    stepDeltaX = deltaX / (steps + 1)    touches = [        {            'identifier': 0,            'clientX': centerX - (deltaX if arg.get('direction') == 'in' else stepDeltaX),            'clientY': centerY,        },        {            'identifier': 1,            'clientX': centerX + (deltaX if arg.get('direction') == 'in' else stepDeltaX),            'clientY': centerY,        },    ]    await locator.dispatch_event('touchstart', {        'touches': touches,        'changedTouches': touches,        'targetTouches': touches    })    for i in range(1, steps + 1):        offset = deltaX - i * stepDeltaX if arg.get('direction') == 'in' else stepDeltaX * (i + 1)        touches = [            {                'identifier': 0,                'clientX': centerX - offset,                'clientY': centerY,            },            {                'identifier': 1,                'clientX': centerX + offset,                'clientY': centerY,            },        ]        await locator.dispatch_event('touchmove', {            'touches': touches,            'changedTouches': touches,            'targetTouches': touches        })    await locator.dispatch_event('touchend', {        'touches': [],        'changedTouches': [],        'targetTouches': []    })async def test_pinch_in_gesture_to_zoom_out_the_map(page):    await page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z', wait_until='commit')    await page.get_by_role('button', name='Keep using web').click()    await expect(page.get_by_role('button', name='Keep using web')).not_to_be_visible()    met = page.locator('[data-test-id="met"]')    for _ in range(5):        await pinch(met, {'deltaX': 40, 'direction': 'in'})    await page.screenshot(path="screenshot.png")async def main():    async with async_playwright() as p:        browser = await p.chromium.launch()        context = await browser.new_context(**p.devices['Pixel 7'])        page = await context.new_page()        await test_pinch_in_gesture_to_zoom_out_the_map(page)        await browser.close()import asyncioasyncio.run(main())

# Trace viewer

Trace viewer
============

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Trace Viewer is a GUI tool that helps you explore recorded Playwright traces after the script has run. Traces are a great way for debugging your tests when they fail on CI. You can open traces [locally](#opening-the-trace) or in your browser on [trace.playwright.dev](https://trace.playwright.dev).

Opening Trace Viewer[​](#opening-trace-viewer "Direct link to Opening Trace Viewer")
------------------------------------------------------------------------------------

You can open a saved trace using either the Playwright CLI or in the browser at [trace.playwright.dev](https://trace.playwright.dev). Make sure to add the full path to where your `trace.zip` file is located.

    playwright show-trace trace.zip

### Using [trace.playwright.dev](https://trace.playwright.dev)[​](#using-traceplaywrightdev "Direct link to using-traceplaywrightdev")

[trace.playwright.dev](https://trace.playwright.dev) is a statically hosted variant of the Trace Viewer. You can upload trace files using drag and drop or via the `Select file(s)` button.

Trace Viewer loads the trace entirely in your browser and does not transmit any data externally.

![Drop Playwright Trace to load](https://user-images.githubusercontent.com/13063165/194577918-b4d45726-2692-4093-8a28-9e73552617ef.png)

### Viewing remote traces[​](#viewing-remote-traces "Direct link to Viewing remote traces")

You can open remote traces directly using its URL. This makes it easy to view the remote trace without having to manually download the file from CI runs, for example.

    playwright show-trace https://example.com/trace.zip

When using [trace.playwright.dev](https://trace.playwright.dev), you can also pass the URL of your uploaded trace at some accessible storage (e.g. inside your CI) as a query parameter. CORS (Cross-Origin Resource Sharing) rules might apply.

    https://trace.playwright.dev/?trace=https://demo.playwright.dev/reports/todomvc/data/fa874b0d59cdedec675521c21124e93161d66533.zip

Recording a trace[​](#recording-a-trace "Direct link to Recording a trace")
---------------------------------------------------------------------------

Traces can be recorded by running your tests with the `--tracing` flag.

    pytest --tracing on

Options for tracing are:

*   `on`: Record trace for each test
*   `off`: Do not record trace. (default)
*   `retain-on-failure`: Record trace for each test, but remove all traces from successful test runs.

This will record the trace and place it into the file named `trace.zip` in your `test-results` directory.

If you are not using Pytest, click here to learn how to record traces.

*   Sync
*   Async

    browser = chromium.launch()context = browser.new_context()# Start tracing before creating / navigating a page.context.tracing.start(screenshots=True, snapshots=True, sources=True)page = context.new_page()page.goto("https://playwright.dev")# Stop tracing and export it into a zip archive.context.tracing.stop(path = "trace.zip")

    browser = await chromium.launch()context = await browser.new_context()# Start tracing before creating / navigating a page.await context.tracing.start(screenshots=True, snapshots=True, sources=True)page = await context.new_page()await page.goto("https://playwright.dev")# Stop tracing and export it into a zip archive.await context.tracing.stop(path = "trace.zip")

Trace Viewer features[​](#trace-viewer-features "Direct link to Trace Viewer features")
---------------------------------------------------------------------------------------

### Actions[​](#actions "Direct link to Actions")

In the Actions tab you can see what locator was used for every action and how long each one took to run. Hover over each action of your test and visually see the change in the DOM snapshot. Go back and forward in time and click an action to inspect and debug. Use the Before and After tabs to visually see what happened before and after the action.

![actions tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/948b65cd-f0fd-4c7f-8e53-2c632b5a07f1)

**Selecting each action reveals:**

*   Action snapshots
*   Action log
*   Source code location

### Screenshots[​](#screenshots "Direct link to Screenshots")

When tracing with the [screenshots](/python/docs/api/class-tracing#tracing-start-option-screenshots) option turned on (default), each trace records a screencast and renders it as a film strip. You can hover over the film strip to see a magnified image of for each action and state which helps you easily find the action you want to inspect.

Double click on an action to see the time range for that action. You can use the slider in the timeline to increase the actions selected and these will be shown in the Actions tab and all console logs and network logs will be filtered to only show the logs for the actions selected.

![timeline view in trace viewer](https://github.com/microsoft/playwright/assets/13063165/b04a7d75-54bb-4ab2-9e30-e76f6f74a2c8)

### Snapshots[​](#snapshots "Direct link to Snapshots")

When tracing with the [snapshots](/python/docs/api/class-tracing#tracing-start-option-snapshots) option turned on (default), Playwright captures a set of complete DOM snapshots for each action. Depending on the type of the action, it will capture:

Type

Description

Before

A snapshot at the time action is called.

Action

A snapshot at the moment of the performed input. This type of snapshot is especially useful when exploring where exactly Playwright clicked.

After

A snapshot after the action.

Here is what the typical Action snapshot looks like:

![action tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/7168d549-eb0a-4964-9c93-483f03711fa9)

Notice how it highlights both, the DOM Node as well as the exact click position.

### Source[​](#source "Direct link to Source")

When you click on an action in the sidebar, the line of code for that action is highlighted in the source panel.

![showing source code tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/daa8845d-c250-4923-aa7a-5d040da9adc5)

### Call[​](#call "Direct link to Call")

The call tab shows you information about the action such as the time it took, what locator was used, if in strict mode and what key was used.

![showing call tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/95498580-f9dd-4932-a123-c37fe7cfc3c2)

### Log[​](#log "Direct link to Log")

See a full log of your test to better understand what Playwright is doing behind the scenes such as scrolling into view, waiting for element to be visible, enabled and stable and performing actions such as click, fill, press etc.

![showing log of tests in trace viewer](https://github.com/microsoft/playwright/assets/13063165/de621461-3bab-4140-b39d-9f02d6672dbf)

### Errors[​](#errors "Direct link to Errors")

If your test fails you will see the error messages for each test in the Errors tab. The timeline will also show a red line highlighting where the error occurred. You can also click on the source tab to see on which line of the source code the error is.

![showing errors in trace viewer](https://github.com/microsoft/playwright/assets/13063165/e9ef77b3-05d1-4df2-852c-981023723d34)

### Console[​](#console "Direct link to Console")

See console logs from the browser as well as from your test. Different icons are displayed to show you if the console log came from the browser or from the test file.

![showing log of tests in trace viewer](https://github.com/microsoft/playwright/assets/13063165/4107c08d-1eaf-421c-bdd4-9dd2aa641d4a)

Double click on an action from your test in the actions sidebar. This will filter the console to only show the logs that were made during that action. Click the _Show all_ button to see all console logs again.

Use the timeline to filter actions, by clicking a start point and dragging to an ending point. The console tab will also be filtered to only show the logs that were made during the actions selected.

### Network[​](#network "Direct link to Network")

The Network tab shows you all the network requests that were made during your test. You can sort by different types of requests, status code, method, request, content type, duration and size. Click on a request to see more information about it such as the request headers, response headers, request body and response body.

![network requests tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/0a3d1671-8ccd-4f7a-a844-35f5eb37f236)

Double click on an action from your test in the actions sidebar. This will filter the network requests to only show the requests that were made during that action. Click the _Show all_ button to see all network requests again.

Use the timeline to filter actions, by clicking a start point and dragging to an ending point. The network tab will also be filtered to only show the network requests that were made during the actions selected.

### Metadata[​](#metadata "Direct link to Metadata")

Next to the Actions tab you will find the Metadata tab which will show you more information on your test such as the Browser, viewport size, test duration and more.

![meta data in trace viewer](https://github.com/microsoft/playwright/assets/13063165/82ab3d33-1ec9-4b8a-9cf2-30a6e2d59091)

# Videos

Videos
======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

With Playwright you can record videos for your tests.

Record video[​](#record-video "Direct link to Record video")
------------------------------------------------------------

Videos are saved upon [browser context](/python/docs/browser-contexts) closure at the end of a test. If you create a browser context manually, make sure to await [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close).

*   Sync
*   Async

    context = browser.new_context(record_video_dir="videos/")# Make sure to close, so that videos are saved.context.close()

    context = await browser.new_context(record_video_dir="videos/")# Make sure to await close, so that videos are saved.await context.close()

You can also specify video size. The video size defaults to the viewport size scaled down to fit 800x800. The video of the viewport is placed in the top-left corner of the output video, scaled down to fit if necessary. You may need to set the viewport size to match your desired video size.

*   Sync
*   Async

    context = browser.new_context(    record_video_dir="videos/",    record_video_size={"width": 640, "height": 480})

    context = await browser.new_context(    record_video_dir="videos/",    record_video_size={"width": 640, "height": 480})

Saved video files will appear in the specified folder. They all have generated unique names. For the multi-page scenarios, you can access the video file associated with the page via the [page.video](/python/docs/api/class-page#page-video).

*   Sync
*   Async

    path = page.video.path()

    path = await page.video.path()

note

Note that the video is only available after the page or browser context is closed.

# WebView2

WebView2
========

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

The following will explain how to use Playwright with [Microsoft Edge WebView2](https://docs.microsoft.com/en-us/microsoft-edge/webview2/). WebView2 is a WinForms control, which will use Microsoft Edge under the hood to render web content. It is a part of the Microsoft Edge browser and is available on Windows 10 and Windows 11. Playwright can be used to automate WebView2 applications and can be used to test web content in WebView2. For connecting to WebView2, Playwright uses [browser\_type.connect\_over\_cdp()](/python/docs/api/class-browsertype#browser-type-connect-over-cdp) which connects to it via the Chrome DevTools Protocol (CDP).

Overview[​](#overview "Direct link to Overview")
------------------------------------------------

A WebView2 control can be instructed to listen to incoming CDP connections by setting either the `WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS` environment variable with `--remote-debugging-port=9222` or calling [EnsureCoreWebView2Async](https://docs.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.wpf.webview2.ensurecorewebview2async?view=webview2-dotnet-1.0.1343.22) with the `--remote-debugging-port=9222` argument. This will start the WebView2 process with the Chrome DevTools Protocol enabled which allows the automation by Playwright. 9222 is an example port in this case, but any other unused port can be used as well.

    await this.webView.EnsureCoreWebView2Async(await CoreWebView2Environment.CreateAsync(null, null, new CoreWebView2EnvironmentOptions(){  AdditionalBrowserArguments = "--remote-debugging-port=9222",})).ConfigureAwait(false);

Once your application with the WebView2 control is running, you can connect to it via Playwright:

*   Sync
*   Async

    browser = playwright.chromium.connect_over_cdp("http://localhost:9222")context = browser.contexts[0]page = context.pages[0]

    browser = await playwright.chromium.connect_over_cdp("http://localhost:9222")context = browser.contexts[0]page = context.pages[0]

To ensure that the WebView2 control is ready, you can wait for the [`CoreWebView2InitializationCompleted`](https://learn.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.wpf.webview2.corewebview2initializationcompleted?view=webview2-dotnet-1.0.1343.22) event:

    this.webView.CoreWebView2InitializationCompleted += (_, e) =>{    if (e.IsSuccess)    {        Console.WriteLine("WebView2 initialized");    }};

Writing and running tests[​](#writing-and-running-tests "Direct link to Writing and running tests")
---------------------------------------------------------------------------------------------------

By default, the WebView2 control will use the same user data directory for all instances. This means that if you run multiple tests in parallel, they will interfere with each other. To avoid this, you should set the `WEBVIEW2_USER_DATA_FOLDER` environment variable (or use [WebView2.EnsureCoreWebView2Async Method](https://docs.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.wpf.webview2.ensurecorewebview2async?view=webview2-dotnet-1.0.1343.22)) to a different folder for each test. This will make sure that each test runs in its own user data directory.

Using the following, Playwright will run your WebView2 application as a sub-process, assign a unique user data directory to it and provide the [Page](/python/docs/api/class-page "Page") instance to your test:

conftest.py

    import osimport socketimport tempfileimport pytestfrom pathlib import Pathfrom playwright.sync_api import Playwright, Browser, BrowserContextimport subprocessEXECUTABLE_PATH = (    Path(__file__).parent    / ".."    / "webview2-app"    / "bin"    / "Debug"    / "net8.0-windows"    / "webview2.exe")@pytest.fixture(scope="session")def data_dir():    with tempfile.TemporaryDirectory(        prefix="playwright-webview2-tests", ignore_cleanup_errors=True    ) as tmpdirname:        yield tmpdirname@pytest.fixture(scope="session")def webview2_process_cdp_port(data_dir: str):    cdp_port = _find_free_port()    process = subprocess.Popen(        [EXECUTABLE_PATH],        env={            **dict(os.environ),            "WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS": f"--remote-debugging-port={cdp_port}",            "WEBVIEW2_USER_DATA_FOLDER": data_dir,        },        stdout=subprocess.PIPE,        stderr=subprocess.STDOUT,        universal_newlines=True,    )    while True:        line = process.stdout.readline()        if "WebView2 initialized" in line:            break    yield cdp_port    process.terminate()@pytest.fixture(scope="session")def browser(playwright: Playwright, webview2_process_cdp_port: int):    browser = playwright.chromium.connect_over_cdp(        f"http://127.0.0.1:{webview2_process_cdp_port}"    )    yield browser@pytest.fixture(scope="function")def context(browser: Browser):    context = browser.contexts[0]    yield context@pytest.fixture(scope="function")def page(context: BrowserContext):    page = context.pages[0]    yield pagedef _find_free_port(port=9000, max_port=65535):    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)    while port <= max_port:        try:            sock.bind(("", port))            sock.close()            return port        except OSError:            port += 1    raise IOError("no free ports")

test\_webview2.py

    from playwright.sync_api import Page, expectdef test_webview2(page: Page):    page.goto("https://playwright.dev")    get_started = page.get_by_text("Get Started")    expect(get_started).to_be_visible()

Debugging[​](#debugging "Direct link to Debugging")
---------------------------------------------------

Inside your webview2 control, you can just right-click to open the context menu and select "Inspect" to open the DevTools or press F12. You can also use the [WebView2.CoreWebView2.OpenDevToolsWindow](https://learn.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.core.corewebview2.opendevtoolswindow?view=webview2-dotnet-1.0.1462.37) method to open the DevTools programmatically.

For debugging tests, see the Playwright [Debugging guide](/python/docs/debug).

# Docker

Docker
======

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

[Dockerfile.noble](https://github.com/microsoft/playwright-python/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble") can be used to run Playwright scripts in Docker environment. This image includes the [Playwright browsers](/python/docs/browsers#install-browsers) and [browser system dependencies](/python/docs/browsers#install-system-dependencies). The Playwright package/dependency is not included in the image and should be installed separately.

Usage[​](#usage "Direct link to Usage")
---------------------------------------

This Docker image is published to [Microsoft Artifact Registry](https://mcr.microsoft.com/en-us/product/playwright/python/about "Microsoft Artifact Registry").

info

This Docker image is intended to be used for testing and development purposes only. It is not recommended to use this Docker image to visit untrusted websites.

### Pull the image[​](#pull-the-image "Direct link to Pull the image")

    docker pull mcr.microsoft.com/playwright/python:v1.51.0-noble

### Run the image[​](#run-the-image "Direct link to Run the image")

By default, the Docker image will use the `root` user to run the browsers. This will disable the Chromium sandbox which is not available with root. If you run trusted code (e.g. End-to-end tests) and want to avoid the hassle of managing separate user then the root user may be fine. For web scraping or crawling, we recommend to create a separate user inside the Docker container and use the seccomp profile.

#### End-to-end tests[​](#end-to-end-tests "Direct link to End-to-end tests")

On trusted websites, you can avoid creating a separate user and use root for it since you trust the code which will run on the browsers.

    docker run -it --rm --ipc=host mcr.microsoft.com/playwright/python:v1.51.0-noble /bin/bash

#### Crawling and scraping[​](#crawling-and-scraping "Direct link to Crawling and scraping")

On untrusted websites, it's recommended to use a separate user for launching the browsers in combination with the seccomp profile. Inside the container or if you are using the Docker image as a base image you have to use `adduser` for it.

    docker run -it --rm --ipc=host --user pwuser --security-opt seccomp=seccomp_profile.json mcr.microsoft.com/playwright/python:v1.51.0-noble /bin/bash

[`seccomp_profile.json`](https://github.com/microsoft/playwright/blob/main/utils/docker/seccomp_profile.json) is needed to run Chromium with sandbox. This is a [default Docker seccomp profile](https://github.com/docker/engine/blob/d0d99b04cf6e00ed3fc27e81fc3d94e7eda70af3/profiles/seccomp/default.json) with extra user namespace cloning permissions:

    {  "comment": "Allow create user namespaces",  "names": [    "clone",    "setns",    "unshare"  ],  "action": "SCMP_ACT_ALLOW",  "args": [],  "includes": {},  "excludes": {}}

### Recommended Docker Configuration[​](#recommended-docker-configuration "Direct link to Recommended Docker Configuration")

When running Playwright in Docker, the following configuration is recommended:

1.  **Using [`--init`](https://docs.docker.com/reference/cli/docker/container/run/#init)** Docker flag is recommended to avoid special treatment for processes with PID=1. This is a common reason for zombie processes.
2.  **Using `--ipc=host`** is recommended when using Chromium. Without it, Chromium can run out of memory and crash. Learn more about this option in [Docker docs](https://docs.docker.com/reference/cli/docker/container/run/#ipc).
3.  **If seeing weird errors when launching Chromium**, try running your container with `docker run --cap-add=SYS_ADMIN` when developing locally.

### Using on CI[​](#using-on-ci "Direct link to Using on CI")

See our [Continuous Integration guides](/python/docs/ci) for sample configs.

### Remote Connection[​](#remote-connection "Direct link to Remote Connection")

You can run Playwright Server in Docker while keeping your tests running on the host system or another machine. This is useful for running tests on unsupported Linux distributions or remote execution scenarios.

#### Running the Playwright Server[​](#running-the-playwright-server "Direct link to Running the Playwright Server")

Start the Playwright Server in Docker:

    docker run -p 3000:3000 --rm --init -it --workdir /home/pwuser --user pwuser mcr.microsoft.com/playwright:v1.51.0-noble /bin/sh -c "npx -y playwright@1.51.0 run-server --port 3000 --host 0.0.0.0"

#### Connecting to the Server[​](#connecting-to-the-server "Direct link to Connecting to the Server")

*   Sync
*   Async

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    browser = p.chromium.connect("ws://127.0.0.1:3000/")

    from playwright.async_api import async_playwrightasync with async_playwright() as p:    browser = await p.chromium.connect("ws://127.0.0.1:3000/")

#### Network Configuration[​](#network-configuration "Direct link to Network Configuration")

If you need to access local servers from within the Docker container:

    docker run --add-host=hostmachine:host-gateway -p 3000:3000 --rm --init -it --workdir /home/pwuser --user pwuser mcr.microsoft.com/playwright:v1.51.0-noble /bin/sh -c "npx -y playwright@1.51.0 run-server --port 3000 --host 0.0.0.0"

This makes `hostmachine` point to the host's localhost. Your tests should use `hostmachine` instead of `localhost` when accessing local servers.

note

When running tests remotely, ensure the Playwright version in your tests matches the version running in the Docker container.

Image tags[​](#image-tags "Direct link to Image tags")
------------------------------------------------------

See [all available image tags](https://mcr.microsoft.com/en-us/product/playwright/python/about "all available image tags").

We currently publish images with the following tags:

*   `:v1.51.0` - Playwright v1.51.0 release docker image based on Ubuntu 24.04 LTS (Noble Numbat).
*   `:v1.51.0-noble` - Playwright v1.51.0 release docker image based on Ubuntu 24.04 LTS (Noble Numbat).
*   `:v1.51.0-jammy` - Playwright v1.51.0 release docker image based on Ubuntu 22.04 LTS (Jammy Jellyfish).

note

It is recommended to always pin your Docker image to a specific version if possible. If the Playwright version in your Docker image does not match the version in your project/tests, Playwright will be unable to locate browser executables.

### Base images[​](#base-images "Direct link to Base images")

We currently publish images based on the following [Ubuntu](https://hub.docker.com/_/ubuntu) versions:

*   **Ubuntu 24.04 LTS** (Noble Numbat), image tags include `noble`
*   **Ubuntu 22.04 LTS** (Jammy Jellyfish), image tags include `jammy`

#### Alpine[​](#alpine "Direct link to Alpine")

Browser builds for Firefox and WebKit are built for the [glibc](https://en.wikipedia.org/wiki/Glibc) library. Alpine Linux and other distributions that are based on the [musl](https://en.wikipedia.org/wiki/Musl) standard library are not supported.

Build your own image[​](#build-your-own-image "Direct link to Build your own image")
------------------------------------------------------------------------------------

To run Playwright inside Docker, you need to have Python, [Playwright browsers](/python/docs/browsers#install-browsers) and [browser system dependencies](/python/docs/browsers#install-system-dependencies) installed. See the following Dockerfile:

    FROM python:3.12-bookwormRUN pip install playwright==@1.51.0 && \    playwright install --with-deps

# Continuous Integration

Continuous Integration
======================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright tests can be executed in CI environments. We have created sample configurations for common CI providers.

3 steps to get your tests running on CI:

1.  **Ensure CI agent can run browsers**: Use [our Docker image](/python/docs/docker) in Linux agents or install your dependencies using the [CLI](/python/docs/browsers#install-system-dependencies).
    
2.  **Install Playwright**:
    
        pip install playwrightplaywright install --with-deps
    
3.  **Run your tests**:
    
        pytest
    

CI configurations[​](#ci-configurations "Direct link to CI configurations")
---------------------------------------------------------------------------

The [Command line tools](/python/docs/browsers#install-system-dependencies) can be used to install all operating system dependencies in CI.

### GitHub Actions[​](#github-actions "Direct link to GitHub Actions")

#### On push/pull\_request[​](#on-pushpull_request "Direct link to On push/pull_request")

Tests will run on push or pull request on branches main/master. The [workflow](https://docs.github.com/en/actions/using-workflows/about-workflows) will install all dependencies, install Playwright and then run the tests.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    steps:    - uses: actions/checkout@v4    - name: Set up Python      uses: actions/setup-python@v4      with:        python-version: '3.11'    - name: Install dependencies      run: |        python -m pip install --upgrade pip        pip install -r requirements.txt    - name: Ensure browsers are installed      run: python -m playwright install --with-deps    - name: Run your tests      run: pytest --tracing=retain-on-failure    - uses: actions/upload-artifact@v4      if: ${{ !cancelled() }}      with:        name: playwright-traces        path: test-results/

#### Via Containers[​](#via-containers "Direct link to Via Containers")

GitHub Actions support [running jobs in a container](https://docs.github.com/en/actions/using-jobs/running-jobs-in-a-container) by using the [`jobs.<job_id>.container`](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idcontainer) option. This is useful to not pollute the host environment with dependencies and to have a consistent environment for e.g. screenshots/visual regression testing across different operating systems.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  playwright:    name: 'Playwright Tests'    runs-on: ubuntu-latest    container:      image: mcr.microsoft.com/playwright/python:v1.51.0-noble      options: --user 1001    steps:      - uses: actions/checkout@v4      - name: Set up Python        uses: actions/setup-python@v4        with:          python-version: '3.11'      - name: Install dependencies        run: |          python -m pip install --upgrade pip          pip install -r local-requirements.txt          pip install -e .      - name: Run your tests        run: pytest

#### On deployment[​](#on-deployment "Direct link to On deployment")

This will start the tests after a [GitHub Deployment](https://developer.github.com/v3/repos/deployments/) went into the `success` state. Services like Vercel use this pattern so you can run your end-to-end tests on their deployed environment.

.github/workflows/playwright.yml

    name: Playwright Testson:  deployment_status:jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    if: github.event.deployment_status.state == 'success'    steps:    - uses: actions/checkout@v4      uses: actions/setup-python@v4      with:        python-version: '3.11'    - name: Install dependencies      run: |        python -m pip install --upgrade pip        pip install -r requirements.txt    - name: Ensure browsers are installed      run: python -m playwright install --with-deps    - name: Run tests      run: pytest      env:        # This might depend on your test-runner        PLAYWRIGHT_TEST_BASE_URL: ${{ github.event.deployment_status.target_url }}

### Docker[​](#docker "Direct link to Docker")

We have a [pre-built Docker image](/python/docs/docker) which can either be used directly or as a reference to update your existing Docker definitions. Make sure to follow the [Recommended Docker Configuration](/python/docs/docker#recommended-docker-configuration) to ensure the best performance.

### Azure Pipelines[​](#azure-pipelines "Direct link to Azure Pipelines")

For Windows or macOS agents, no additional configuration is required, just install Playwright and run your tests.

For Linux agents, you can use [our Docker container](/python/docs/docker) with Azure Pipelines support [running containerized jobs](https://docs.microsoft.com/en-us/azure/devops/pipelines/process/container-phases?view=azure-devops). Alternatively, you can use [Command line tools](/python/docs/browsers#install-system-dependencies) to install all necessary dependencies.

For running the Playwright tests use this pipeline task:

    trigger:- mainpool:  vmImage: ubuntu-lateststeps:- task: UsePythonVersion@0  inputs:    versionSpec: '3.11'  displayName: 'Use Python'- script: |    python -m pip install --upgrade pip    pip install -r requirements.txt  displayName: 'Install dependencies'- script: playwright install --with-deps  displayName: 'Install Playwright browsers'- script: pytest  displayName: 'Run Playwright tests'

#### Azure Pipelines (containerized)[​](#azure-pipelines-containerized "Direct link to Azure Pipelines (containerized)")

    trigger:- mainpool:  vmImage: ubuntu-latestcontainer: mcr.microsoft.com/playwright/python:v1.51.0-noblesteps:- task: UsePythonVersion@0  inputs:    versionSpec: '3.11'  displayName: 'Use Python'- script: |    python -m pip install --upgrade pip    pip install -r requirements.txt  displayName: 'Install dependencies'- script: pytest  displayName: 'Run tests'

### CircleCI[​](#circleci "Direct link to CircleCI")

Running Playwright on CircleCI is very similar to running on GitHub Actions. In order to specify the pre-built Playwright [Docker image](/python/docs/docker), simply modify the agent definition with `docker:` in your config like so:

    executors:  pw-noble-development:    docker:      - image: mcr.microsoft.com/playwright/python:v1.51.0-noble

Note: When using the docker agent definition, you are specifying the resource class of where playwright runs to the 'medium' tier [here](https://circleci.com/docs/configuration-reference?#docker-execution-environment). The default behavior of Playwright is to set the number of workers to the detected core count (2 in the case of the medium tier). Overriding the number of workers to greater than this number will cause unnecessary timeouts and failures.

### Jenkins[​](#jenkins "Direct link to Jenkins")

Jenkins supports Docker agents for pipelines. Use the [Playwright Docker image](/python/docs/docker) to run tests on Jenkins.

    pipeline {   agent { docker { image 'mcr.microsoft.com/playwright/python:v1.51.0-noble' } }   stages {      stage('e2e-tests') {         steps {            sh 'pip install -r requirements.txt'            sh 'pytest'         }      }   }}

### Bitbucket Pipelines[​](#bitbucket-pipelines "Direct link to Bitbucket Pipelines")

Bitbucket Pipelines can use public [Docker images as build environments](https://confluence.atlassian.com/bitbucket/use-docker-images-as-build-environments-792298897.html). To run Playwright tests on Bitbucket, use our public Docker image ([see Dockerfile](/python/docs/docker)).

    image: mcr.microsoft.com/playwright/python:v1.51.0-noble

### GitLab CI[​](#gitlab-ci "Direct link to GitLab CI")

To run Playwright tests on GitLab, use our public Docker image ([see Dockerfile](/python/docs/docker)).

    stages:  - testtests:  stage: test  image: mcr.microsoft.com/playwright/python:v1.51.0-noble  script:  ...

Caching browsers[​](#caching-browsers "Direct link to Caching browsers")
------------------------------------------------------------------------

Caching browser binaries is not recommended, since the amount of time it takes to restore the cache is comparable to the time it takes to download the binaries. Especially under Linux, [operating system dependencies](/python/docs/browsers#install-system-dependencies) need to be installed, which are not cacheable.

If you still want to cache the browser binaries between CI runs, cache [these directories](/python/docs/browsers#managing-browser-binaries) in your CI configuration, against a hash of the Playwright version.

Debugging browser launches[​](#debugging-browser-launches "Direct link to Debugging browser launches")
------------------------------------------------------------------------------------------------------

Playwright supports the `DEBUG` environment variable to output debug logs during execution. Setting it to `pw:browser` is helpful while debugging `Error: Failed to launch browser` errors.

    DEBUG=pw:browser pytest

Running headed[​](#running-headed "Direct link to Running headed")
------------------------------------------------------------------

By default, Playwright launches browsers in headless mode. See in our [Running tests](/python/docs/running-tests#run-tests-in-headed-mode) guide how to run tests in headed mode.

On Linux agents, headed execution requires [Xvfb](https://en.wikipedia.org/wiki/Xvfb) to be installed. Our [Docker image](/python/docs/docker) and GitHub Action have Xvfb pre-installed. To run browsers in headed mode with Xvfb, add `xvfb-run` before the actual command.

    xvfb-run pytest

# Selenium Grid (experimental)

Selenium Grid (experimental)
============================

Introduction[​](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can connect to [Selenium Grid Hub](https://www.selenium.dev/documentation/grid/) that runs Selenium 4 to launch **Google Chrome** or **Microsoft Edge** browser, instead of running browser on the local machine. Note this feature is **experimental** and is prioritized accordingly.

warning

There is a risk of Playwright integration with Selenium Grid Hub breaking in the future. Make sure you weight risks against benefits before using it.

More details

Internally, Playwright connects to the browser using [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) websocket. Selenium 4 currently exposes this capability. However, this [might not be the case in the future](https://github.com/SeleniumHQ/selenium/issues/11590#issuecomment-1436113950). If Selenium drops this capability, Playwright will stop working with it.

Before connecting Playwright to your Selenium Grid, make sure that grid works with [Selenium WebDriver](https://www.selenium.dev/documentation/webdriver/). For example, run [one of the examples](https://github.com/SeleniumHQ/selenium/tree/trunk/javascript/selenium-webdriver/example) and pass `SELENIUM_REMOTE_URL` environment variable. If webdriver example does not work, look for any errors at your Selenium hub/node/standalone output and search [Selenium issues](https://github.com/SeleniumHQ/selenium/issues) for a possible solution.

Starting Selenium Grid[​](#starting-selenium-grid "Direct link to Starting Selenium Grid")
------------------------------------------------------------------------------------------

If you run distributed Selenium Grid, Playwright needs selenium nodes to be registered with an accessible address, so that it could connect to the browsers. To make sure it works as expected, set `SE_NODE_GRID_URL` environment variable pointing to the hub when running selenium nodes.

    # Start selenium nodeSE_NODE_GRID_URL="http://<selenium-hub-ip>:4444" java -jar selenium-server-<version>.jar node

Connecting Playwright to Selenium Grid[​](#connecting-playwright-to-selenium-grid "Direct link to Connecting Playwright to Selenium Grid")
------------------------------------------------------------------------------------------------------------------------------------------

To connect Playwright to **Selenium Grid 4**, set `SELENIUM_REMOTE_URL` environment variable pointing to your Selenium Grid Hub. Note that this only works for Google Chrome and Microsoft Edge.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 pytest --browser chromium

You don't have to change your code, just use your testing harness or [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch) as usual.

### Passing additional capabilities[​](#passing-additional-capabilities "Direct link to Passing additional capabilities")

If your grid requires additional capabilities to be set (for example, you use an external service), you can set `SELENIUM_REMOTE_CAPABILITIES` environment variable to provide JSON-serialized capabilities.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 SELENIUM_REMOTE_CAPABILITIES="{'mygrid:options':{os:'windows',username:'John',password:'secure'}}" pytest --browser chromium

### Passing additional headers[​](#passing-additional-headers "Direct link to Passing additional headers")

If your grid requires additional headers to be set (for example, you should provide authorization token to use browsers in your cloud), you can set `SELENIUM_REMOTE_HEADERS` environment variable to provide JSON-serialized headers.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 SELENIUM_REMOTE_HEADERS="{'Authorization':'Basic b64enc'}" pytest --browser chromium

### Detailed logs[​](#detailed-logs "Direct link to Detailed logs")

Run with `DEBUG=pw:browser*` environment variable to see how Playwright is connecting to Selenium Grid.

    DEBUG=pw:browser* SELENIUM_REMOTE_URL=http://internal.grid:4444 pytest --browser chromium

If you file an issue, please include this log.

Using Selenium Docker[​](#using-selenium-docker "Direct link to Using Selenium Docker")
---------------------------------------------------------------------------------------

One easy way to use Selenium Grid is to run official docker containers. Read more in [selenium docker images](https://github.com/SeleniumHQ/docker-selenium) documentation. For image tagging convention, [read more](https://github.com/SeleniumHQ/docker-selenium/wiki/Tagging-Convention#selenium-grid-4x-and-above).

### Standalone mode[​](#standalone-mode "Direct link to Standalone mode")

Here is an example of running selenium standalone and connecting Playwright to it. Note that hub and node are on the same `localhost`, and we pass `SE_NODE_GRID_URL` environment variable pointing to it.

First start Selenium.

    docker run -d -p 4444:4444 --shm-size="2g" -e SE_NODE_GRID_URL="http://localhost:4444" selenium/standalone-chromium:latest

Then run Playwright.

    SELENIUM_REMOTE_URL=http://localhost:4444 pytest --browser chromium

### Hub and nodes mode[​](#hub-and-nodes-mode "Direct link to Hub and nodes mode")

Here is an example of running selenium hub and a single selenium node, and connecting Playwright to the hub. Note that hub and node have different IPs, and we pass `SE_NODE_GRID_URL` environment variable pointing to the hub when starting node containers.

First start the hub container and one or more node containers.

    docker run -d -p 4442-4444:4442-4444 --name selenium-hub selenium/hub:4.25.0docker run -d -p 5555:5555 \    --shm-size="2g" \    -e SE_EVENT_BUS_HOST=<selenium-hub-ip> \    -e SE_EVENT_BUS_PUBLISH_PORT=4442 \    -e SE_EVENT_BUS_SUBSCRIBE_PORT=4443 \    -e SE_NODE_GRID_URL="http://<selenium-hub-ip>:4444"    selenium/node-chromium:4.25.0

Then run Playwright.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 pytest --browser chromium

Selenium 3[​](#selenium-3 "Direct link to Selenium 3")
------------------------------------------------------

Internally, Playwright connects to the browser using [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) websocket. Selenium 4 exposes this capability, while Selenium 3 does not.

This means that Selenium 3 is supported in a best-effort manner, where Playwright tries to connect to the grid node directly. Grid nodes must be directly accessible from the machine that runs Playwright.

# Playwright

Playwright
==========

Playwright module provides a method to launch a browser instance. The following is a typical example of using Playwright to drive automation:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    chromium = playwright.chromium # or "firefox" or "webkit".    browser = chromium.launch()    page = browser.new_page()    page.goto("http://example.com")    # other actions...    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    chromium = playwright.chromium # or "firefox" or "webkit".    browser = await chromium.launch()    page = await browser.new_page()    await page.goto("http://example.com")    # other actions...    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### stop[​](#playwright-stop "Direct link to stop")

Added before v1.9 playwright.stop

Terminates this instance of Playwright in case it was created bypassing the Python context manager. This is useful in REPL applications.

    from playwright.sync_api import sync_playwrightplaywright = sync_playwright().start()browser = playwright.chromium.launch()page = browser.new_page()page.goto("https://playwright.dev/")page.screenshot(path="example.png")browser.close()playwright.stop()

**Usage**

    playwright.stop()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#playwright-stop-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### chromium[​](#playwright-chromium "Direct link to chromium")

Added before v1.9 playwright.chromium

This object can be used to launch or connect to Chromium, returning instances of [Browser](/python/docs/api/class-browser "Browser").

**Usage**

    playwright.chromium

**Type**

*   [BrowserType](/python/docs/api/class-browsertype "BrowserType")

* * *

### devices[​](#playwright-devices "Direct link to devices")

Added before v1.9 playwright.devices

Returns a dictionary of devices to be used with [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) or [browser.new\_page()](/python/docs/api/class-browser#browser-new-page).

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    webkit = playwright.webkit    iphone = playwright.devices["iPhone 6"]    browser = webkit.launch()    context = browser.new_context(**iphone)    page = context.new_page()    page.goto("http://example.com")    # other actions...    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    webkit = playwright.webkit    iphone = playwright.devices["iPhone 6"]    browser = await webkit.launch()    context = await browser.new_context(**iphone)    page = await context.new_page()    await page.goto("http://example.com")    # other actions...    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Usage**

    playwright.devices

**Type**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")

* * *

### firefox[​](#playwright-firefox "Direct link to firefox")

Added before v1.9 playwright.firefox

This object can be used to launch or connect to Firefox, returning instances of [Browser](/python/docs/api/class-browser "Browser").

**Usage**

    playwright.firefox

**Type**

*   [BrowserType](/python/docs/api/class-browsertype "BrowserType")

* * *

### request[​](#playwright-request "Direct link to request")

Added in: v1.16 playwright.request

Exposes API that can be used for the Web API testing.

**Usage**

    playwright.request

**Type**

*   [APIRequest](/python/docs/api/class-apirequest "APIRequest")

* * *

### selectors[​](#playwright-selectors "Direct link to selectors")

Added before v1.9 playwright.selectors

Selectors can be used to install custom selector engines. See [extensibility](/python/docs/extensibility) for more information.

**Usage**

    playwright.selectors

**Type**

*   [Selectors](/python/docs/api/class-selectors "Selectors")

* * *

### webkit[​](#playwright-webkit "Direct link to webkit")

Added before v1.9 playwright.webkit

This object can be used to launch or connect to WebKit, returning instances of [Browser](/python/docs/api/class-browser "Browser").

**Usage**

    playwright.webkit

**Type**

*   [BrowserType](/python/docs/api/class-browsertype "BrowserType")

# APIRequest

APIRequest
==========

Exposes API that can be used for the Web API testing. This class is used for creating [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") instance which in turn can be used for sending web requests. An instance of this class can be obtained via [playwright.request](/python/docs/api/class-playwright#playwright-request). For more information see [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext").

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### new\_context[​](#api-request-new-context "Direct link to new_context")

Added in: v1.16 apiRequest.new\_context

Creates new instances of [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext").

**Usage**

    api_request.new_context()api_request.new_context(**kwargs)

**Arguments**

*   `base_url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-new-context-option-base-url)
    
    Methods like [api\_request\_context.get()](/python/docs/api/class-apirequestcontext#api-request-context-get) take the base URL into consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Examples:
    
    *   baseURL: `http://localhost:3000` and sending request to `/bar.html` results in `http://localhost:3000/bar.html`
    *   baseURL: `http://localhost:3000/foo/` and sending request to `./bar.html` results in `http://localhost:3000/foo/bar.html`
    *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
*   `client_certificates` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: 1.46[#](#api-request-new-context-option-client-certificates)
    
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
        
    *   `certPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the certificate in PEM format.
        
    *   `cert` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the certificate in PEM format.
        
    *   `keyPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the private key in PEM format.
        
    *   `key` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the private key in PEM format.
        
    *   `pfxPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `pfx` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `passphrase` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Passphrase for the private key (PEM or PFX).
        
    
    TLS Client Authentication allows the server to request a client certificate and verify it.
    
    **Details**
    
    An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
    
    note
    
    When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
    
*   `extra_http_headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-new-context-option-extra-http-headers)
    
    An object containing additional HTTP headers to be sent with every request. Defaults to none.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.51[#](#api-request-new-context-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `http_credentials` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-new-context-option-http-credentials)
    
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Restrain sending http credentials on specific origin (scheme://host:port).
        
    *   `send` "unauthorized" | "always" _(optional)_
        
        This option only applies to the requests sent from corresponding [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
        
    
    Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-new-context-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.52[#](#api-request-new-context-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects. This can be overwritten for each request individually.
    
*   `proxy` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-new-context-option-proxy)
    
    *   `server` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
        
    *   `bypass` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
        
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional username to use if HTTP proxy requires authentication.
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional password to use if HTTP proxy requires authentication.
        
    
    Network proxy settings.
    
*   `storage_state` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-new-context-option-storage-state)
    
    *   `cookies` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
            
            Unix time in seconds.
            
        *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
    *   `origins` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `localStorage` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
            
            *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
    
    Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state) or [api\_request\_context.storage\_state()](/python/docs/api/class-apirequestcontext#api-request-context-storage-state). Either a path to the file with saved storage, or the value returned by one of [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state) or [api\_request\_context.storage\_state()](/python/docs/api/class-apirequestcontext#api-request-context-storage-state) methods.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-new-context-option-timeout)
    
    Maximum time in milliseconds to wait for the response. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    
*   `user_agent` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-new-context-option-user-agent)
    
    Specific user agent to use in this context.
    

**Returns**

*   [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext")[#](#api-request-new-context-return)

# APIRequestContext

APIRequestContext
=================

This API is used for the Web API testing. You can use it to trigger API endpoints, configure micro-services, prepare environment or the service to your e2e test.

Each Playwright browser context has associated with it [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") instance which shares cookie storage with the browser context and can be accessed via [browser\_context.request](/python/docs/api/class-browsercontext#browser-context-request) or [page.request](/python/docs/api/class-page#page-request). It is also possible to create a new APIRequestContext instance manually by calling [api\_request.new\_context()](/python/docs/api/class-apirequest#api-request-new-context).

**Cookie management**

[APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") returned by [browser\_context.request](/python/docs/api/class-browsercontext#browser-context-request) and [page.request](/python/docs/api/class-page#page-request) shares cookie storage with the corresponding [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext"). Each API request will have `Cookie` header populated with the values from the browser context. If the API response contains `Set-Cookie` header it will automatically update [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext") cookies and requests made from the page will pick them up. This means that if you log in using this API, your e2e test will be logged in and vice versa.

If you want API requests to not interfere with the browser cookies you should create a new [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") by calling [api\_request.new\_context()](/python/docs/api/class-apirequest#api-request-new-context). Such `APIRequestContext` object will have its own isolated cookie storage.

*   Sync
*   Async

    import osfrom playwright.sync_api import sync_playwrightREPO = "test-repo-1"USER = "github-username"API_TOKEN = os.getenv("GITHUB_API_TOKEN")with sync_playwright() as p:    # This will launch a new browser, create a context and page. When making HTTP    # requests with the internal APIRequestContext (e.g. `context.request` or `page.request`)    # it will automatically set the cookies to the browser page and vice versa.    browser = p.chromium.launch()    context = browser.new_context(base_url="https://api.github.com")    api_request_context = context.request    page = context.new_page()    # Alternatively you can create a APIRequestContext manually without having a browser context attached:    # api_request_context = p.request.new_context(base_url="https://api.github.com")    # Create a repository.    response = api_request_context.post(        "/user/repos",        headers={            "Accept": "application/vnd.github.v3+json",            # Add GitHub personal access token.            "Authorization": f"token {API_TOKEN}",        },        data={"name": REPO},    )    assert response.ok    assert response.json()["name"] == REPO    # Delete a repository.    response = api_request_context.delete(        f"/repos/{USER}/{REPO}",        headers={            "Accept": "application/vnd.github.v3+json",            # Add GitHub personal access token.            "Authorization": f"token {API_TOKEN}",        },    )    assert response.ok    assert await response.body() == '{"status": "ok"}'

    import osimport asynciofrom playwright.async_api import async_playwright, PlaywrightREPO = "test-repo-1"USER = "github-username"API_TOKEN = os.getenv("GITHUB_API_TOKEN")async def run(playwright: Playwright):    # This will launch a new browser, create a context and page. When making HTTP    # requests with the internal APIRequestContext (e.g. `context.request` or `page.request`)    # it will automatically set the cookies to the browser page and vice versa.    browser = await playwright.chromium.launch()    context = await browser.new_context(base_url="https://api.github.com")    api_request_context = context.request    page = await context.new_page()    # Alternatively you can create a APIRequestContext manually without having a browser context attached:    # api_request_context = await playwright.request.new_context(base_url="https://api.github.com")    # Create a repository.    response = await api_request_context.post(        "/user/repos",        headers={            "Accept": "application/vnd.github.v3+json",            # Add GitHub personal access token.            "Authorization": f"token {API_TOKEN}",        },        data={"name": REPO},    )    assert response.ok    assert response.json()["name"] == REPO    # Delete a repository.    response = await api_request_context.delete(        f"/repos/{USER}/{REPO}",        headers={            "Accept": "application/vnd.github.v3+json",            # Add GitHub personal access token.            "Authorization": f"token {API_TOKEN}",        },    )    assert response.ok    assert await response.body() == '{"status": "ok"}'async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### delete[​](#api-request-context-delete "Direct link to delete")

Added in: v1.16 apiRequestContext.delete

Sends HTTP(S) [DELETE](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    api_request_context.delete(url)api_request_context.delete(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-request-context-delete-option-url)
    
    Target URL.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.17[#](#api-request-context-delete-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-delete-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_ Added in: v1.17[#](#api-request-context-delete-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-delete-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-delete-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-delete-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-delete-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: v1.17[#](#api-request-context-delete-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-delete-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-delete-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-delete-return)

* * *

### dispose[​](#api-request-context-dispose "Direct link to dispose")

Added in: v1.16 apiRequestContext.dispose

All responses returned by [api\_request\_context.get()](/python/docs/api/class-apirequestcontext#api-request-context-get) and similar methods are stored in the memory, so that you can later call [api\_response.body()](/python/docs/api/class-apiresponse#api-response-body).This method discards all its resources, calling any method on disposed [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") will throw an exception.

**Usage**

    api_request_context.dispose()api_request_context.dispose(**kwargs)

**Arguments**

*   `reason` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.45[#](#api-request-context-dispose-option-reason)
    
    The reason to be reported to the operations interrupted by the context disposal.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#api-request-context-dispose-return)

* * *

### fetch[​](#api-request-context-fetch "Direct link to fetch")

Added in: v1.16 apiRequestContext.fetch

Sends HTTP(S) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

JSON objects can be passed directly to the request:

    data = {    "title": "Book Title",    "body": "John Doe",}api_request_context.fetch("https://example.com/api/createBook", method="post", data=data)

The common way to send file(s) in the body of a request is to upload them as form fields with `multipart/form-data` encoding, by specifiying the `multipart` parameter:

    api_request_context.fetch(  "https://example.com/api/uploadScript",  method="post",  multipart={    "fileField": {      "name": "f.js",      "mimeType": "text/javascript",      "buffer": b"console.log(2022);",    },  })

**Arguments**

*   `url_or_request` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Request](/python/docs/api/class-request "Request")[#](#api-request-context-fetch-option-url-or-request)
    
    Target URL or Request to get all parameters from.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-context-fetch-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-fetch-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#api-request-context-fetch-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-fetch-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-fetch-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-fetch-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-fetch-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `method` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-fetch-option-method)
    
    If set changes the fetch method (e.g. [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) or [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST)). If not specified, GET method is used.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_[#](#api-request-context-fetch-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-fetch-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-fetch-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-fetch-return)

* * *

### get[​](#api-request-context-get "Direct link to get")

Added in: v1.16 apiRequestContext.get

Sends HTTP(S) [GET](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

Request parameters can be configured with `params` option, they will be serialized into the URL search parameters:

    query_params = {  "isbn": "1234",  "page": "23"}api_request_context.get("https://example.com/api/getText", params=query_params)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-request-context-get-option-url)
    
    Target URL.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.26[#](#api-request-context-get-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-get-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_ Added in: v1.26[#](#api-request-context-get-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-get-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-get-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-get-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-get-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: v1.26[#](#api-request-context-get-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-get-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-get-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-get-return)

* * *

### head[​](#api-request-context-head "Direct link to head")

Added in: v1.16 apiRequestContext.head

Sends HTTP(S) [HEAD](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    api_request_context.head(url)api_request_context.head(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-request-context-head-option-url)
    
    Target URL.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.26[#](#api-request-context-head-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-head-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_ Added in: v1.26[#](#api-request-context-head-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-head-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-head-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-head-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-head-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: v1.26[#](#api-request-context-head-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-head-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-head-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-head-return)

* * *

### patch[​](#api-request-context-patch "Direct link to patch")

Added in: v1.16 apiRequestContext.patch

Sends HTTP(S) [PATCH](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    api_request_context.patch(url)api_request_context.patch(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-request-context-patch-option-url)
    
    Target URL.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-context-patch-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-patch-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#api-request-context-patch-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-patch-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-patch-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-patch-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-patch-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_[#](#api-request-context-patch-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-patch-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-patch-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-patch-return)

* * *

### post[​](#api-request-context-post "Direct link to post")

Added in: v1.16 apiRequestContext.post

Sends HTTP(S) [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

JSON objects can be passed directly to the request:

    data = {    "title": "Book Title",    "body": "John Doe",}api_request_context.post("https://example.com/api/createBook", data=data)

To send form data to the server use `form` option. Its value will be encoded into the request body with `application/x-www-form-urlencoded` encoding (see below how to use `multipart/form-data` form encoding to send files):

    formData = {    "title": "Book Title",    "body": "John Doe",}api_request_context.post("https://example.com/api/findBook", form=formData)

The common way to send file(s) in the body of a request is to upload them as form fields with `multipart/form-data` encoding. Use \[FormData\] to construct request body and pass it to the request as `multipart` parameter:

    api_request_context.post(  "https://example.com/api/uploadScript'",  multipart={    "fileField": {      "name": "f.js",      "mimeType": "text/javascript",      "buffer": b"console.log(2022);",    },  })

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-request-context-post-option-url)
    
    Target URL.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-context-post-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-post-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#api-request-context-post-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-post-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-post-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-post-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-post-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_[#](#api-request-context-post-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-post-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-post-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-post-return)

* * *

### put[​](#api-request-context-put "Direct link to put")

Added in: v1.16 apiRequestContext.put

Sends HTTP(S) [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    api_request_context.put(url)api_request_context.put(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-request-context-put-option-url)
    
    Target URL.
    
*   `data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#api-request-context-put-option-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `fail_on_status_code` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-put-option-fail-on-status-code)
    
    Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
    
*   `form` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#api-request-context-put-option-form)
    
    Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#api-request-context-put-option-headers)
    
    Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#api-request-context-put-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.26[#](#api-request-context-put-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#api-request-context-put-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `multipart` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool") | \[ReadStream\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_[#](#api-request-context-put-option-multipart)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
    
    Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed as file-like object containing file name, mime-type and its content.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#api-request-context-put-option-params)
    
    Query parameters to be sent with the URL.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#api-request-context-put-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#api-request-context-put-return)

* * *

### storage\_state[​](#api-request-context-storage-state "Direct link to storage_state")

Added in: v1.16 apiRequestContext.storage\_state

Returns storage state for this request context, contains current cookies and local storage snapshot if it was passed to the constructor.

**Usage**

    api_request_context.storage_state()api_request_context.storage_state(**kwargs)

**Arguments**

*   `indexed_db` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.51[#](#api-request-context-storage-state-option-indexed-db)
    
    Set to `true` to include IndexedDB in the storage state snapshot.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#api-request-context-storage-state-option-path)
    
    The file path to save the storage state to. If [path](/python/docs/api/class-apirequestcontext#api-request-context-storage-state-option-path) is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won't be saved to the disk.
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#api-request-context-storage-state-return)
    *   `cookies` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
            
            Unix time in seconds.
            
        *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
    *   `origins` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `localStorage` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
            
            *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")

# APIResponse

APIResponse
===========

[APIResponse](/python/docs/api/class-apiresponse "APIResponse") class represents responses returned by [api\_request\_context.get()](/python/docs/api/class-apirequestcontext#api-request-context-get) and similar methods.

*   Sync
*   Async

    from playwright.sync_api import sync_playwrightwith sync_playwright() as p:    context = playwright.request.new_context()    response = context.get("https://example.com/user/repos")    assert response.ok    assert response.status == 200    assert response.headers["content-type"] == "application/json; charset=utf-8"    assert response.json()["name"] == "foobar"    assert response.body() == '{"status": "ok"}'

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    context = await playwright.request.new_context()    response = await context.get("https://example.com/user/repos")    assert response.ok    assert response.status == 200    assert response.headers["content-type"] == "application/json; charset=utf-8"    json_data = await response.json()    assert json_data["name"] == "foobar"    assert await response.body() == '{"status": "ok"}'async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### body[​](#api-response-body "Direct link to body")

Added in: v1.16 apiResponse.body

Returns the buffer with response body.

**Usage**

    api_response.body()

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#api-response-body-return)

* * *

### dispose[​](#api-response-dispose "Direct link to dispose")

Added in: v1.16 apiResponse.dispose

Disposes the body of this response. If not called then the body will stay in memory until the context closes.

**Usage**

    api_response.dispose()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#api-response-dispose-return)

* * *

### json[​](#api-response-json "Direct link to json")

Added in: v1.16 apiResponse.json

Returns the JSON representation of response body.

This method will throw if the response body is not parsable via `JSON.parse`.

**Usage**

    api_response.json()

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#api-response-json-return)

* * *

### text[​](#api-response-text "Direct link to text")

Added in: v1.16 apiResponse.text

Returns the text representation of response body.

**Usage**

    api_response.text()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-response-text-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### headers[​](#api-response-headers "Direct link to headers")

Added in: v1.16 apiResponse.headers

An object with all the response HTTP headers associated with this response.

**Usage**

    api_response.headers

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#api-response-headers-return)

* * *

### headers\_array[​](#api-response-headers-array "Direct link to headers_array")

Added in: v1.16 apiResponse.headers\_array

An array with all the response HTTP headers associated with this response. Header names are not lower-cased. Headers with multiple entries, such as `Set-Cookie`, appear in the array multiple times.

**Usage**

    api_response.headers_array

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#api-response-headers-array-return)
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Name of the header.
        
    *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Value of the header.
        

* * *

### ok[​](#api-response-ok "Direct link to ok")

Added in: v1.16 apiResponse.ok

Contains a boolean stating whether the response was successful (status in the range 200-299) or not.

**Usage**

    api_response.ok

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#api-response-ok-return)

* * *

### status[​](#api-response-status "Direct link to status")

Added in: v1.16 apiResponse.status

Contains the status code of the response (e.g., 200 for a success).

**Usage**

    api_response.status

**Returns**

*   [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")[#](#api-response-status-return)

* * *

### status\_text[​](#api-response-status-text "Direct link to status_text")

Added in: v1.16 apiResponse.status\_text

Contains the status text of the response (e.g. usually an "OK" for a success).

**Usage**

    api_response.status_text

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-response-status-text-return)

* * *

### url[​](#api-response-url "Direct link to url")

Added in: v1.16 apiResponse.url

Contains the URL of the response.

**Usage**

    api_response.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#api-response-url-return)

# Accessibility

Accessibility
=============

The Accessibility class provides methods for inspecting Chromium's accessibility tree. The accessibility tree is used by assistive technology such as [screen readers](https://en.wikipedia.org/wiki/Screen_reader) or [switches](https://en.wikipedia.org/wiki/Switch_access).

Accessibility is a very platform-specific thing. On different platforms, there are different screen readers that might have wildly different output.

Rendering engines of Chromium, Firefox and WebKit have a concept of "accessibility tree", which is then translated into different platform-specific APIs. Accessibility namespace gives access to this Accessibility Tree.

Most of the accessibility tree gets filtered out when converting from internal browser AX Tree to Platform-specific AX-Tree or by assistive technologies themselves. By default, Playwright tries to approximate this filtering, exposing only the "interesting" nodes of the tree.

* * *

Deprecated[​](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### snapshot[​](#accessibility-snapshot "Direct link to snapshot")

Added before v1.9 accessibility.snapshot

Deprecated

This method is deprecated. Please use other libraries such as [Axe](https://www.deque.com/axe/) if you need to test page accessibility. See our Node.js [guide](https://playwright.dev/docs/accessibility-testing) for integration with Axe.

Captures the current state of the accessibility tree. The returned object represents the root accessible node of the page.

note

The Chromium accessibility tree contains nodes that go unused on most platforms and by most screen readers. Playwright will discard them as well for an easier to process tree, unless [interesting\_only](/python/docs/api/class-accessibility#accessibility-snapshot-option-interesting-only) is set to `false`.

**Usage**

An example of dumping the entire accessibility tree:

*   Sync
*   Async

    snapshot = page.accessibility.snapshot()print(snapshot)

    snapshot = await page.accessibility.snapshot()print(snapshot)

An example of logging the focused node's name:

*   Sync
*   Async

    def find_focused_node(node):    if node.get("focused"):        return node    for child in (node.get("children") or []):        found_node = find_focused_node(child)        if found_node:            return found_node    return Nonesnapshot = page.accessibility.snapshot()node = find_focused_node(snapshot)if node:    print(node["name"])

    def find_focused_node(node):    if node.get("focused"):        return node    for child in (node.get("children") or []):        found_node = find_focused_node(child)        if found_node:            return found_node    return Nonesnapshot = await page.accessibility.snapshot()node = find_focused_node(snapshot)if node:    print(node["name"])

**Arguments**

*   `interesting_only` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#accessibility-snapshot-option-interesting-only)
    
    Prune uninteresting nodes from the tree. Defaults to `true`.
    
*   `root` [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") _(optional)_[#](#accessibility-snapshot-option-root)
    
    The root DOM element for the snapshot. Defaults to the whole page.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#accessibility-snapshot-return)
    *   `role` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        The [role](https://www.w3.org/TR/wai-aria/#usage).
        
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        A human readable name for the node.
        
    *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        The current value of the node, if applicable.
        
    *   `description` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        An additional human readable description of the node, if applicable.
        
    *   `keyshortcuts` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Keyboard shortcuts associated with this node, if applicable.
        
    *   `roledescription` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        A human readable alternative to the role, if applicable.
        
    *   `valuetext` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        A description of the current value, if applicable.
        
    *   `disabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is disabled, if applicable.
        
    *   `expanded` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is expanded or collapsed, if applicable.
        
    *   `focused` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is focused, if applicable.
        
    *   `modal` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is [modal](https://en.wikipedia.org/wiki/Modal_window), if applicable.
        
    *   `multiline` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node text input supports multiline, if applicable.
        
    *   `multiselectable` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether more than one child can be selected, if applicable.
        
    *   `readonly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is read only, if applicable.
        
    *   `required` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is required, if applicable.
        
    *   `selected` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
        Whether the node is selected in its parent node, if applicable.
        
    *   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool") | "mixed"
        
        Whether the checkbox is checked, or "mixed", if applicable.
        
    *   `pressed` [bool](https://docs.python.org/3/library/stdtypes.html "bool") | "mixed"
        
        Whether the toggle button is checked, or "mixed", if applicable.
        
    *   `level` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        The level of a heading, if applicable.
        
    *   `valuemin` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        The minimum value in a node, if applicable.
        
    *   `valuemax` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        The maximum value in a node, if applicable.
        
    *   `autocomplete` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        What kind of autocomplete is supported by a control, if applicable.
        
    *   `haspopup` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        What kind of popup is currently being shown for a node, if applicable.
        
    *   `invalid` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Whether and in what way this node's value is invalid, if applicable.
        
    *   `orientation` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Whether the node is oriented horizontally or vertically, if applicable.
        
    *   `children` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        
        Child nodes, if any, if applicable.

# Browser

Browser
=======

A Browser is created via [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch). An example of using a [Browser](/python/docs/api/class-browser "Browser") to create a [Page](/python/docs/api/class-page "Page"):

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    firefox = playwright.firefox    browser = firefox.launch()    page = browser.new_page()    page.goto("https://example.com")    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    firefox = playwright.firefox    browser = await firefox.launch()    page = await browser.new_page()    await page.goto("https://example.com")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### close[​](#browser-close "Direct link to close")

Added before v1.9 browser.close

In case this browser is obtained using [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch), closes the browser and all of its pages (if any were opened).

In case this browser is connected to, clears all created contexts belonging to this browser and disconnects from the browser server.

note

This is similar to force-quitting the browser. To close pages gracefully and ensure you receive page close events, call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) on any [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext") instances you explicitly created earlier using [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) **before** calling [browser.close()](/python/docs/api/class-browser#browser-close).

The [Browser](/python/docs/api/class-browser "Browser") object itself is considered to be disposed and cannot be used anymore.

**Usage**

    browser.close()browser.close(**kwargs)

**Arguments**

*   `reason` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.40[#](#browser-close-option-reason)
    
    The reason to be reported to the operations interrupted by the browser closure.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-close-return)

* * *

### new\_browser\_cdp\_session[​](#browser-new-browser-cdp-session "Direct link to new_browser_cdp_session")

Added in: v1.11 browser.new\_browser\_cdp\_session

note

CDP Sessions are only supported on Chromium-based browsers.

Returns the newly created browser session.

**Usage**

    browser.new_browser_cdp_session()

**Returns**

*   [CDPSession](/python/docs/api/class-cdpsession "CDPSession")[#](#browser-new-browser-cdp-session-return)

* * *

### new\_context[​](#browser-new-context "Direct link to new_context")

Added before v1.9 browser.new\_context

Creates a new browser context. It won't share cookies/cache with other browser contexts.

note

If directly using this method to create [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")s, it is best practice to explicitly close the returned context via [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) when your code is done with the [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext"), and before calling [browser.close()](/python/docs/api/class-browser#browser-close). This will ensure the `context` is closed gracefully and any artifacts—like HARs and videos—are fully flushed and saved.

**Usage**

*   Sync
*   Async

    browser = playwright.firefox.launch() # or "chromium" or "webkit".# create a new incognito browser context.context = browser.new_context()# create a new page in a pristine context.page = context.new_page()page.goto("https://example.com")# gracefully close up everythingcontext.close()browser.close()

    browser = await playwright.firefox.launch() # or "chromium" or "webkit".# create a new incognito browser context.context = await browser.new_context()# create a new page in a pristine context.page = await context.new_page()await page.goto("https://example.com")# gracefully close up everythingawait context.close()await browser.close()

**Arguments**

*   `accept_downloads` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-accept-downloads)
    
    Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
    
*   `base_url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-context-option-base-url)
    
    When using [page.goto()](/python/docs/api/class-page#page-goto), [page.route()](/python/docs/api/class-page#page-route), [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url), [page.expect\_request()](/python/docs/api/class-page#page-wait-for-request), or [page.expect\_response()](/python/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
    
    *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
    *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
    *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
*   `bypass_csp` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-bypass-csp)
    
    Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
    
*   `client_certificates` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: 1.46[#](#browser-new-context-option-client-certificates)
    
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
        
    *   `certPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the certificate in PEM format.
        
    *   `cert` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the certificate in PEM format.
        
    *   `keyPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the private key in PEM format.
        
    *   `key` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the private key in PEM format.
        
    *   `pfxPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `pfx` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `passphrase` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Passphrase for the private key (PEM or PFX).
        
    
    TLS Client Authentication allows the server to request a client certificate and verify it.
    
    **Details**
    
    An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
    
    note
    
    When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
    
*   `color_scheme` "light" | "dark" | "no-preference" | "null" _(optional)_[#](#browser-new-context-option-color-scheme)
    
    Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'light'`.
    
*   `contrast` "no-preference" | "more" | "null" _(optional)_[#](#browser-new-context-option-contrast)
    
    Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'no-preference'`.
    
*   `device_scale_factor` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-new-context-option-device-scale-factor)
    
    Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/python/docs/emulation#devices).
    
*   `extra_http_headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-new-context-option-extra-http-headers)
    
    An object containing additional HTTP headers to be sent with every request. Defaults to none.
    
*   `forced_colors` "active" | "none" | "null" _(optional)_[#](#browser-new-context-option-forced-colors)
    
    Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'none'`.
    
*   `geolocation` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-geolocation)
    
    *   `latitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Latitude between -90 and 90.
        
    *   `longitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Longitude between -180 and 180.
        
    *   `accuracy` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Non-negative accuracy value. Defaults to `0`.
        
*   `has_touch` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-has-touch)
    
    Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/python/docs/emulation#devices).
    
*   `http_credentials` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-http-credentials)
    
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Restrain sending http credentials on specific origin (scheme://host:port).
        
    *   `send` "unauthorized" | "always" _(optional)_
        
        This option only applies to the requests sent from corresponding [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
        
    
    Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `is_mobile` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-is-mobile)
    
    Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/python/docs/emulation#ismobile).
    
*   `java_script_enabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-java-script-enabled)
    
    Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/python/docs/emulation#javascript-enabled).
    
*   `locale` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-context-option-locale)
    
    Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/python/docs/emulation#locale--timezone).
    
*   `no_viewport` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-no-viewport)
    
    Does not enforce fixed viewport, allows resizing window in the headed mode.
    
*   `offline` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-offline)
    
    Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/python/docs/emulation#offline).
    
*   `permissions` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-new-context-option-permissions)
    
    A list of permissions to grant to all pages in this context. See [browser\_context.grant\_permissions()](/python/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
    
*   `proxy` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-proxy)
    
    *   `server` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
        
    *   `bypass` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
        
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional username to use if HTTP proxy requires authentication.
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional password to use if HTTP proxy requires authentication.
        
    
    Network proxy settings to use with this context. Defaults to none.
    
*   `record_har_content` "omit" | "embed" | "attach" _(optional)_[#](#browser-new-context-option-record-har-content)
    
    Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files and all of these files are archived along with the HAR file. Defaults to `embed`, which stores content inline the HAR file as per HAR specification.
    
*   `record_har_mode` "full" | "minimal" _(optional)_[#](#browser-new-context-option-record-har-mode)
    
    When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
    
*   `record_har_omit_content` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-record-har-omit-content)
    
    Optional setting to control whether to omit request content from the HAR. Defaults to `false`.
    
*   `record_har_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-new-context-option-record-har-path)
    
    Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into the specified HAR file on the filesystem. If not specified, the HAR is not recorded. Make sure to call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
    
*   `record_har_url_filter` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#browser-new-context-option-record-har-url-filter)
    
*   `record_video_dir` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-new-context-option-record-video-dir)
    
    Enables video recording for all pages into the specified directory. If not specified videos are not recorded. Make sure to call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
    
*   `record_video_size` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-record-video-size)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Video frame width.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Video frame height.
        
    
    Dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
    
*   `reduced_motion` "reduce" | "no-preference" | "null" _(optional)_[#](#browser-new-context-option-reduced-motion)
    
    Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'no-preference'`.
    
*   `screen` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-screen)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        
    
    Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/python/docs/api/class-browser#browser-new-context-option-viewport) is set.
    
*   `service_workers` "allow" | "block" _(optional)_[#](#browser-new-context-option-service-workers)
    
    Whether to allow sites to register Service workers. Defaults to `'allow'`.
    
    *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
    *   `'block'`: Playwright will block all registration of Service Workers.
*   `storage_state` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-storage-state)
    
    *   `cookies` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
            Domain and path are required. For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com"
            
        *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
            Domain and path are required
            
        *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
            
            Unix time in seconds.
            
        *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
            sameSite flag
            Cookies to set for context
    *   `origins` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `localStorage` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
            
            *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            
            localStorage to set for context
            
    
    Learn more about [storage state and auth](/python/docs/auth).
    
    Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state).
    
*   `strict_selectors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-context-option-strict-selectors)
    
    If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/python/docs/api/class-locator "Locator") to learn more about the strict mode.
    
*   `timezone_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-context-option-timezone-id)
    
    Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
    
*   `user_agent` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-context-option-user-agent)
    
    Specific user agent to use in this context.
    
*   `viewport` [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-context-option-viewport)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        
    
    Sets a consistent viewport for each page. Defaults to an 1280x720 viewport. `no_viewport` disables the fixed viewport. Learn more about [viewport emulation](/python/docs/emulation#viewport).
    

**Returns**

*   [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")[#](#browser-new-context-return)

* * *

### new\_page[​](#browser-new-page "Direct link to new_page")

Added before v1.9 browser.new\_page

Creates a new page in a new browser context. Closing this page will close the context as well.

This is a convenience API that should only be used for the single-page scenarios and short snippets. Production code and testing frameworks should explicitly create [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) followed by the [browser\_context.new\_page()](/python/docs/api/class-browsercontext#browser-context-new-page) to control their exact life times.

**Usage**

    browser.new_page()browser.new_page(**kwargs)

**Arguments**

*   `accept_downloads` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-accept-downloads)
    
    Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
    
*   `base_url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-page-option-base-url)
    
    When using [page.goto()](/python/docs/api/class-page#page-goto), [page.route()](/python/docs/api/class-page#page-route), [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url), [page.expect\_request()](/python/docs/api/class-page#page-wait-for-request), or [page.expect\_response()](/python/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
    
    *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
    *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
    *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
*   `bypass_csp` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-bypass-csp)
    
    Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
    
*   `client_certificates` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: 1.46[#](#browser-new-page-option-client-certificates)
    
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
        
    *   `certPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the certificate in PEM format.
        
    *   `cert` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the certificate in PEM format.
        
    *   `keyPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the private key in PEM format.
        
    *   `key` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the private key in PEM format.
        
    *   `pfxPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `pfx` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `passphrase` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Passphrase for the private key (PEM or PFX).
        
    
    TLS Client Authentication allows the server to request a client certificate and verify it.
    
    **Details**
    
    An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
    
    note
    
    When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
    
*   `color_scheme` "light" | "dark" | "no-preference" | "null" _(optional)_[#](#browser-new-page-option-color-scheme)
    
    Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'light'`.
    
*   `contrast` "no-preference" | "more" | "null" _(optional)_[#](#browser-new-page-option-contrast)
    
    Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'no-preference'`.
    
*   `device_scale_factor` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-new-page-option-device-scale-factor)
    
    Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/python/docs/emulation#devices).
    
*   `extra_http_headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-new-page-option-extra-http-headers)
    
    An object containing additional HTTP headers to be sent with every request. Defaults to none.
    
*   `forced_colors` "active" | "none" | "null" _(optional)_[#](#browser-new-page-option-forced-colors)
    
    Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'none'`.
    
*   `geolocation` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-geolocation)
    
    *   `latitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Latitude between -90 and 90.
        
    *   `longitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Longitude between -180 and 180.
        
    *   `accuracy` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Non-negative accuracy value. Defaults to `0`.
        
*   `has_touch` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-has-touch)
    
    Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/python/docs/emulation#devices).
    
*   `http_credentials` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-http-credentials)
    
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Restrain sending http credentials on specific origin (scheme://host:port).
        
    *   `send` "unauthorized" | "always" _(optional)_
        
        This option only applies to the requests sent from corresponding [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
        
    
    Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `is_mobile` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-is-mobile)
    
    Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/python/docs/emulation#ismobile).
    
*   `java_script_enabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-java-script-enabled)
    
    Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/python/docs/emulation#javascript-enabled).
    
*   `locale` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-page-option-locale)
    
    Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/python/docs/emulation#locale--timezone).
    
*   `no_viewport` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-no-viewport)
    
    Does not enforce fixed viewport, allows resizing window in the headed mode.
    
*   `offline` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-offline)
    
    Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/python/docs/emulation#offline).
    
*   `permissions` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-new-page-option-permissions)
    
    A list of permissions to grant to all pages in this context. See [browser\_context.grant\_permissions()](/python/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
    
*   `proxy` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-proxy)
    
    *   `server` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
        
    *   `bypass` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
        
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional username to use if HTTP proxy requires authentication.
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional password to use if HTTP proxy requires authentication.
        
    
    Network proxy settings to use with this context. Defaults to none.
    
*   `record_har_content` "omit" | "embed" | "attach" _(optional)_[#](#browser-new-page-option-record-har-content)
    
    Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files and all of these files are archived along with the HAR file. Defaults to `embed`, which stores content inline the HAR file as per HAR specification.
    
*   `record_har_mode` "full" | "minimal" _(optional)_[#](#browser-new-page-option-record-har-mode)
    
    When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
    
*   `record_har_omit_content` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-record-har-omit-content)
    
    Optional setting to control whether to omit request content from the HAR. Defaults to `false`.
    
*   `record_har_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-new-page-option-record-har-path)
    
    Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into the specified HAR file on the filesystem. If not specified, the HAR is not recorded. Make sure to call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
    
*   `record_har_url_filter` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#browser-new-page-option-record-har-url-filter)
    
*   `record_video_dir` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-new-page-option-record-video-dir)
    
    Enables video recording for all pages into the specified directory. If not specified videos are not recorded. Make sure to call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
    
*   `record_video_size` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-record-video-size)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Video frame width.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Video frame height.
        
    
    Dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
    
*   `reduced_motion` "reduce" | "no-preference" | "null" _(optional)_[#](#browser-new-page-option-reduced-motion)
    
    Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'no-preference'`.
    
*   `screen` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-screen)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        
    
    Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/python/docs/api/class-browser#browser-new-page-option-viewport) is set.
    
*   `service_workers` "allow" | "block" _(optional)_[#](#browser-new-page-option-service-workers)
    
    Whether to allow sites to register Service workers. Defaults to `'allow'`.
    
    *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
    *   `'block'`: Playwright will block all registration of Service Workers.
*   `storage_state` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-storage-state)
    
    *   `cookies` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
            Domain and path are required. For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com"
            
        *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
            Domain and path are required
            
        *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
            
            Unix time in seconds.
            
        *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
            sameSite flag
            Cookies to set for context
    *   `origins` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `localStorage` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
            
            *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            
            localStorage to set for context
            
    
    Learn more about [storage state and auth](/python/docs/auth).
    
    Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browser\_context.storage\_state()](/python/docs/api/class-browsercontext#browser-context-storage-state).
    
*   `strict_selectors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-new-page-option-strict-selectors)
    
    If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/python/docs/api/class-locator "Locator") to learn more about the strict mode.
    
*   `timezone_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-page-option-timezone-id)
    
    Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
    
*   `user_agent` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-new-page-option-user-agent)
    
    Specific user agent to use in this context.
    
*   `viewport` [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-new-page-option-viewport)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        
    
    Sets a consistent viewport for each page. Defaults to an 1280x720 viewport. `no_viewport` disables the fixed viewport. Learn more about [viewport emulation](/python/docs/emulation#viewport).
    

**Returns**

*   [Page](/python/docs/api/class-page "Page")[#](#browser-new-page-return)

* * *

### start\_tracing[​](#browser-start-tracing "Direct link to start_tracing")

Added in: v1.11 browser.start\_tracing

note

This API controls [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool) which is a low-level chromium-specific debugging tool. API to control [Playwright Tracing](/python/docs/trace-viewer) could be found [here](/python/docs/api/class-tracing).

You can use [browser.start\_tracing()](/python/docs/api/class-browser#browser-start-tracing) and [browser.stop\_tracing()](/python/docs/api/class-browser#browser-stop-tracing) to create a trace file that can be opened in Chrome DevTools performance panel.

**Usage**

*   Sync
*   Async

    browser.start_tracing(page, path="trace.json")page.goto("https://www.google.com")browser.stop_tracing()

    await browser.start_tracing(page, path="trace.json")await page.goto("https://www.google.com")await browser.stop_tracing()

**Arguments**

*   `page` [Page](/python/docs/api/class-page "Page") _(optional)_[#](#browser-start-tracing-option-page)
    
    Optional, if specified, tracing includes screenshots of the given page.
    
*   `categories` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-start-tracing-option-categories)
    
    specify custom categories to use instead of default.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-start-tracing-option-path)
    
    A path to write the trace file to.
    
*   `screenshots` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-start-tracing-option-screenshots)
    
    captures screenshots in the trace.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-start-tracing-return)

* * *

### stop\_tracing[​](#browser-stop-tracing "Direct link to stop_tracing")

Added in: v1.11 browser.stop\_tracing

note

This API controls [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool) which is a low-level chromium-specific debugging tool. API to control [Playwright Tracing](/python/docs/trace-viewer) could be found [here](/python/docs/api/class-tracing).

Returns the buffer with trace data.

**Usage**

    browser.stop_tracing()

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#browser-stop-tracing-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### browser\_type[​](#browser-browser-type "Direct link to browser_type")

Added in: v1.23 browser.browser\_type

Get the browser type (chromium, firefox or webkit) that the browser belongs to.

**Usage**

    browser.browser_type

**Returns**

*   [BrowserType](/python/docs/api/class-browsertype "BrowserType")[#](#browser-browser-type-return)

* * *

### contexts[​](#browser-contexts "Direct link to contexts")

Added before v1.9 browser.contexts

Returns an array of all open browser contexts. In a newly created browser, this will return zero browser contexts.

**Usage**

*   Sync
*   Async

    browser = pw.webkit.launch()print(len(browser.contexts)) # prints `0`context = browser.new_context()print(len(browser.contexts)) # prints `1`

    browser = await pw.webkit.launch()print(len(browser.contexts)) # prints `0`context = await browser.new_context()print(len(browser.contexts)) # prints `1`

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")\][#](#browser-contexts-return)

* * *

### is\_connected[​](#browser-is-connected "Direct link to is_connected")

Added before v1.9 browser.is\_connected

Indicates that the browser is connected.

**Usage**

    browser.is_connected()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#browser-is-connected-return)

* * *

### version[​](#browser-version "Direct link to version")

Added before v1.9 browser.version

Returns the browser version.

**Usage**

    browser.version

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-version-return)

* * *

Events[​](#events "Direct link to Events")
------------------------------------------

### on("disconnected")[​](#browser-event-disconnected "Direct link to on(\"disconnected\")")

Added before v1.9 browser.on("disconnected")

Emitted when Browser gets disconnected from the browser application. This might happen because of one of the following:

*   Browser application is closed or crashed.
*   The [browser.close()](/python/docs/api/class-browser#browser-close) method was called.

**Usage**

    browser.on("disconnected", handler)

**Event data**

*   [Browser](/python/docs/api/class-browser "Browser")

# BrowserContext

BrowserContext
==============

BrowserContexts provide a way to operate multiple independent browser sessions.

If a page opens another page, e.g. with a `window.open` call, the popup will belong to the parent page's browser context.

Playwright allows creating isolated non-persistent browser contexts with [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) method. Non-persistent browser contexts don't write any browsing data to disk.

*   Sync
*   Async

    # create a new incognito browser contextcontext = browser.new_context()# create a new page inside context.page = context.new_page()page.goto("https://example.com")# dispose context once it is no longer needed.context.close()

    # create a new incognito browser contextcontext = await browser.new_context()# create a new page inside context.page = await context.new_page()await page.goto("https://example.com")# dispose context once it is no longer needed.await context.close()

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### add\_cookies[​](#browser-context-add-cookies "Direct link to add_cookies")

Added before v1.9 browserContext.add\_cookies

Adds cookies into this browser context. All pages within this context will have these cookies installed. Cookies can be obtained via [browser\_context.cookies()](/python/docs/api/class-browsercontext#browser-context-cookies).

**Usage**

*   Sync
*   Async

    browser_context.add_cookies([cookie_object1, cookie_object2])

    await browser_context.add_cookies([cookie_object1, cookie_object2])

**Arguments**

*   `cookies` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#browser-context-add-cookies-option-cookies)
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Either url or domain / path are required. Optional.
        
    *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com". Either url or domain / path are required. Optional.
        
    *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Either url or domain / path are required Optional.
        
    *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Unix time in seconds. Optional.
        
    *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_
        
        Optional.
        
    *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_
        
        Optional.
        
    *   `sameSite` "Strict" | "Lax" | "None" _(optional)_
        
        Optional.
        

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-add-cookies-return)

* * *

### add\_init\_script[​](#browser-context-add-init-script "Direct link to add_init_script")

Added before v1.9 browserContext.add\_init\_script

Adds a script which would be evaluated in one of the following scenarios:

*   Whenever a page is created in the browser context or is navigated.
*   Whenever a child frame is attached or navigated in any page in the browser context. In this case, the script is evaluated in the context of the newly attached frame.

The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed `Math.random`.

**Usage**

An example of overriding `Math.random` before the page loads:

    // preload.jsMath.random = () => 42;

*   Sync
*   Async

    # in your playwright script, assuming the preload.js file is in same directory.browser_context.add_init_script(path="preload.js")

    # in your playwright script, assuming the preload.js file is in same directory.await browser_context.add_init_script(path="preload.js")

note

The order of evaluation of multiple scripts installed via [browser\_context.add\_init\_script()](/python/docs/api/class-browsercontext#browser-context-add-init-script) and [page.add\_init\_script()](/python/docs/api/class-page#page-add-init-script) is not defined.

**Arguments**

*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-context-add-init-script-option-path)
    
    Path to the JavaScript file. If `path` is a relative path, then it is resolved relative to the current working directory. Optional.
    
*   `script` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-context-add-init-script-option-script)
    
    Script to be evaluated in all pages in the browser context. Optional.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-add-init-script-return)

* * *

### clear\_cookies[​](#browser-context-clear-cookies "Direct link to clear_cookies")

Added before v1.9 browserContext.clear\_cookies

Removes cookies from context. Accepts optional filter.

**Usage**

*   Sync
*   Async

    context.clear_cookies()context.clear_cookies(name="session-id")context.clear_cookies(domain="my-origin.com")context.clear_cookies(path="/api/v1")context.clear_cookies(name="session-id", domain="my-origin.com")

    await context.clear_cookies()await context.clear_cookies(name="session-id")await context.clear_cookies(domain="my-origin.com")await context.clear_cookies(path="/api/v1")await context.clear_cookies(name="session-id", domain="my-origin.com")

**Arguments**

*   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.43[#](#browser-context-clear-cookies-option-domain)
    
    Only removes cookies with the given domain.
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.43[#](#browser-context-clear-cookies-option-name)
    
    Only removes cookies with the given name.
    
*   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.43[#](#browser-context-clear-cookies-option-path)
    
    Only removes cookies with the given path.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-clear-cookies-return)

* * *

### clear\_permissions[​](#browser-context-clear-permissions "Direct link to clear_permissions")

Added before v1.9 browserContext.clear\_permissions

Clears all permission overrides for the browser context.

**Usage**

*   Sync
*   Async

    context = browser.new_context()context.grant_permissions(["clipboard-read"])# do stuff ..context.clear_permissions()

    context = await browser.new_context()await context.grant_permissions(["clipboard-read"])# do stuff ..context.clear_permissions()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-clear-permissions-return)

* * *

### close[​](#browser-context-close "Direct link to close")

Added before v1.9 browserContext.close

Closes the browser context. All the pages that belong to the browser context will be closed.

note

The default browser context cannot be closed.

**Usage**

    browser_context.close()browser_context.close(**kwargs)

**Arguments**

*   `reason` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.40[#](#browser-context-close-option-reason)
    
    The reason to be reported to the operations interrupted by the context closure.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-close-return)

* * *

### cookies[​](#browser-context-cookies "Direct link to cookies")

Added before v1.9 browserContext.cookies

If no URLs are specified, this method returns all cookies. If URLs are specified, only cookies that affect those URLs are returned.

**Usage**

    browser_context.cookies()browser_context.cookies(**kwargs)

**Arguments**

*   `urls` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-context-cookies-option-urls)
    
    Optional list of URLs.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#browser-context-cookies-return)
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Unix time in seconds.
        
    *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
    *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
        
    *   `sameSite` "Strict" | "Lax" | "None"
        

* * *

### expect\_console\_message[​](#browser-context-wait-for-console-message "Direct link to expect_console_message")

Added in: v1.34 browserContext.expect\_console\_message

Performs action and waits for a [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") to be logged by in the pages in the context. If predicate is provided, it passes [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") value into the `predicate` function and waits for `predicate(message)` to return a truthy value. Will throw an error if the page is closed before the [browser\_context.on("console")](/python/docs/api/class-browsercontext#browser-context-event-console) event is fired.

**Usage**

    browser_context.expect_console_message()browser_context.expect_console_message(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-context-wait-for-console-message-option-predicate)
    
    Receives the [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-context-wait-for-console-message-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage")\][#](#browser-context-wait-for-console-message-return)

* * *

### expect\_event[​](#browser-context-wait-for-event "Direct link to expect_event")

Added before v1.9 browserContext.expect\_event

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the context closes before the event is fired. Returns the event data value.

**Usage**

*   Sync
*   Async

    with context.expect_event("page") as event_info:    page.get_by_role("button").click()page = event_info.value

    async with context.expect_event("page") as event_info:    await page.get_by_role("button").click()page = await event_info.value

**Arguments**

*   `event` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-context-wait-for-event-option-event)
    
    Event name, same one would pass into `browserContext.on(event)`.
    
*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable") _(optional)_[#](#browser-context-wait-for-event-option-predicate)
    
    Receives the event data and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-context-wait-for-event-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")[#](#browser-context-wait-for-event-return)

* * *

### expect\_page[​](#browser-context-wait-for-page "Direct link to expect_page")

Added in: v1.9 browserContext.expect\_page

Performs action and waits for a new [Page](/python/docs/api/class-page "Page") to be created in the context. If predicate is provided, it passes [Page](/python/docs/api/class-page "Page") value into the `predicate` function and waits for `predicate(event)` to return a truthy value. Will throw an error if the context closes before new [Page](/python/docs/api/class-page "Page") is created.

**Usage**

    browser_context.expect_page()browser_context.expect_page(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Page](/python/docs/api/class-page "Page")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-context-wait-for-page-option-predicate)
    
    Receives the [Page](/python/docs/api/class-page "Page") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-context-wait-for-page-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Page](/python/docs/api/class-page "Page")\][#](#browser-context-wait-for-page-return)

* * *

### expose\_binding[​](#browser-context-expose-binding "Direct link to expose_binding")

Added before v1.9 browserContext.expose\_binding

The method adds a function called [name](/python/docs/api/class-browsercontext#browser-context-expose-binding-option-name) on the `window` object of every frame in every page in the context. When called, the function executes [callback](/python/docs/api/class-browsercontext#browser-context-expose-binding-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/python/docs/api/class-browsercontext#browser-context-expose-binding-option-callback). If the [callback](/python/docs/api/class-browsercontext#browser-context-expose-binding-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

The first argument of the [callback](/python/docs/api/class-browsercontext#browser-context-expose-binding-option-callback) function contains information about the caller: `{ browserContext: BrowserContext, page: Page, frame: Frame }`.

See [page.expose\_binding()](/python/docs/api/class-page#page-expose-binding) for page-only version.

**Usage**

An example of exposing page URL to all frames in all pages in the context:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch(headless=False)    context = browser.new_context()    context.expose_binding("pageURL", lambda source: source["page"].url)    page = context.new_page()    page.set_content("""    <script>      async function onClick() {        document.querySelector('div').textContent = await window.pageURL();      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>    """)    page.get_by_role("button").click()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch(headless=False)    context = await browser.new_context()    await context.expose_binding("pageURL", lambda source: source["page"].url)    page = await context.new_page()    await page.set_content("""    <script>      async function onClick() {        document.querySelector('div').textContent = await window.pageURL();      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>    """)    await page.get_by_role("button").click()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-context-expose-binding-option-name)
    
    Name of the function on the window object.
    
*   `callback` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")[#](#browser-context-expose-binding-option-callback)
    
    Callback function that will be called in the Playwright's context.
    
*   `handle` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-context-expose-binding-option-handle)
    
    Deprecated
    
    This option will be removed in the future.
    
    Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-expose-binding-return)

* * *

### expose\_function[​](#browser-context-expose-function "Direct link to expose_function")

Added before v1.9 browserContext.expose\_function

The method adds a function called [name](/python/docs/api/class-browsercontext#browser-context-expose-function-option-name) on the `window` object of every frame in every page in the context. When called, the function executes [callback](/python/docs/api/class-browsercontext#browser-context-expose-function-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/python/docs/api/class-browsercontext#browser-context-expose-function-option-callback).

If the [callback](/python/docs/api/class-browsercontext#browser-context-expose-function-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

See [page.expose\_function()](/python/docs/api/class-page#page-expose-function) for page-only version.

**Usage**

An example of adding a `sha256` function to all pages in the context:

*   Sync
*   Async

    import hashlibfrom playwright.sync_api import sync_playwrightdef sha256(text: str) -> str:    m = hashlib.sha256()    m.update(bytes(text, "utf8"))    return m.hexdigest()def run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch(headless=False)    context = browser.new_context()    context.expose_function("sha256", sha256)    page = context.new_page()    page.set_content("""        <script>          async function onClick() {            document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');          }        </script>        <button onclick="onClick()">Click me</button>        <div></div>    """)    page.get_by_role("button").click()with sync_playwright() as playwright:    run(playwright)

    import asyncioimport hashlibfrom playwright.async_api import async_playwright, Playwrightdef sha256(text: str) -> str:    m = hashlib.sha256()    m.update(bytes(text, "utf8"))    return m.hexdigest()async def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch(headless=False)    context = await browser.new_context()    await context.expose_function("sha256", sha256)    page = await context.new_page()    await page.set_content("""        <script>          async function onClick() {            document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');          }        </script>        <button onclick="onClick()">Click me</button>        <div></div>    """)    await page.get_by_role("button").click()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-context-expose-function-option-name)
    
    Name of the function on the window object.
    
*   `callback` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")[#](#browser-context-expose-function-option-callback)
    
    Callback function that will be called in the Playwright's context.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-expose-function-return)

* * *

### grant\_permissions[​](#browser-context-grant-permissions "Direct link to grant_permissions")

Added before v1.9 browserContext.grant\_permissions

Grants specified permissions to the browser context. Only grants corresponding permissions to the given origin if specified.

**Usage**

    browser_context.grant_permissions(permissions)browser_context.grant_permissions(permissions, **kwargs)

**Arguments**

*   `permissions` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#browser-context-grant-permissions-option-permissions)
    
    A list of permissions to grant.
    
    danger
    
    Supported permissions differ between browsers, and even between different versions of the same browser. Any permission may stop working after an update.
    
    Here are some permissions that may be supported by some browsers:
    
    *   `'accelerometer'`
    *   `'ambient-light-sensor'`
    *   `'background-sync'`
    *   `'camera'`
    *   `'clipboard-read'`
    *   `'clipboard-write'`
    *   `'geolocation'`
    *   `'gyroscope'`
    *   `'magnetometer'`
    *   `'microphone'`
    *   `'midi-sysex'` (system-exclusive midi)
    *   `'midi'`
    *   `'notifications'`
    *   `'payment-handler'`
    *   `'storage-access'`
*   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-context-grant-permissions-option-origin)
    
    The [origin](https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin") to grant permissions to, e.g. "[https://example.com](https://example.com)".
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-grant-permissions-return)

* * *

### new\_cdp\_session[​](#browser-context-new-cdp-session "Direct link to new_cdp_session")

Added in: v1.11 browserContext.new\_cdp\_session

note

CDP sessions are only supported on Chromium-based browsers.

Returns the newly created session.

**Usage**

    browser_context.new_cdp_session(page)

**Arguments**

*   `page` [Page](/python/docs/api/class-page "Page") | [Frame](/python/docs/api/class-frame "Frame")[#](#browser-context-new-cdp-session-option-page)
    
    Target to create new session for. For backwards-compatibility, this parameter is named `page`, but it can be a `Page` or `Frame` type.
    

**Returns**

*   [CDPSession](/python/docs/api/class-cdpsession "CDPSession")[#](#browser-context-new-cdp-session-return)

* * *

### new\_page[​](#browser-context-new-page "Direct link to new_page")

Added before v1.9 browserContext.new\_page

Creates a new page in the browser context.

**Usage**

    browser_context.new_page()

**Returns**

*   [Page](/python/docs/api/class-page "Page")[#](#browser-context-new-page-return)

* * *

### route[​](#browser-context-route "Direct link to route")

Added before v1.9 browserContext.route

Routing provides the capability to modify network requests that are made by any page in the browser context. Once route is enabled, every request matching the url pattern will stall unless it's continued, fulfilled or aborted.

note

[browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) will not intercept requests intercepted by Service Worker. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [service\_workers](/python/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

**Usage**

An example of a naive handler that aborts all image requests:

*   Sync
*   Async

    context = browser.new_context()page = context.new_page()context.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())page.goto("https://example.com")browser.close()

    context = await browser.new_context()page = await context.new_page()await context.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())await page.goto("https://example.com")await browser.close()

or the same snippet using a regex pattern instead:

*   Sync
*   Async

    context = browser.new_context()page = context.new_page()context.route(re.compile(r"(\.png$)|(\.jpg$)"), lambda route: route.abort())page = await context.new_page()page = context.new_page()page.goto("https://example.com")browser.close()

    context = await browser.new_context()page = await context.new_page()await context.route(re.compile(r"(\.png$)|(\.jpg$)"), lambda route: route.abort())page = await context.new_page()await page.goto("https://example.com")await browser.close()

It is possible to examine the request to decide the route action. For example, mocking all requests that contain some post data, and leaving all other requests as is:

*   Sync
*   Async

    def handle_route(route: Route):  if ("my-string" in route.request.post_data):    route.fulfill(body="mocked-data")  else:    route.continue_()context.route("/api/**", handle_route)

    async def handle_route(route: Route):  if ("my-string" in route.request.post_data):    await route.fulfill(body="mocked-data")  else:    await route.continue_()await context.route("/api/**", handle_route)

Page routes (set up with [page.route()](/python/docs/api/class-page#page-route)) take precedence over browser context routes when request matches both handlers.

To remove a route with its handler you can use [browser\_context.unroute()](/python/docs/api/class-browsercontext#browser-context-unroute).

note

Enabling routing disables http cache.

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#browser-context-route-option-url)
    
    A glob pattern, regex pattern, or predicate that receives a [URL](https://en.wikipedia.org/wiki/URL "URL") to match during routing. If [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) is set in the context options and the provided URL is a string that does not start with `*`, it is resolved using the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Route](/python/docs/api/class-route "Route"), [Request](/python/docs/api/class-request "Request")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#browser-context-route-option-handler)
    
    handler function to route the request.
    
*   `times` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.15[#](#browser-context-route-option-times)
    
    How often a route should be used. By default it will be used every time.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-route-return)

* * *

### route\_from\_har[​](#browser-context-route-from-har "Direct link to route_from_har")

Added in: v1.23 browserContext.route\_from\_har

If specified the network requests that are made in the context will be served from the HAR file. Read more about [Replaying from HAR](/python/docs/mock#replaying-from-har).

Playwright will not serve requests intercepted by Service Worker from the HAR file. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [service\_workers](/python/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

**Usage**

    browser_context.route_from_har(har)browser_context.route_from_har(har, **kwargs)

**Arguments**

*   `har` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\][#](#browser-context-route-from-har-option-har)
    
    Path to a [HAR](http://www.softwareishard.com/blog/har-12-spec) file with prerecorded network data. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `not_found` "abort" | "fallback" _(optional)_[#](#browser-context-route-from-har-option-not-found)
    
    *   If set to 'abort' any request not found in the HAR file will be aborted.
    *   If set to 'fallback' falls through to the next route handler in the handler chain.
    
    Defaults to abort.
    
*   `update` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-context-route-from-har-option-update)
    
    If specified, updates the given HAR with the actual network information instead of serving from file. The file is written to disk when [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) is called.
    
*   `update_content` "embed" | "attach" _(optional)_ Added in: v1.32[#](#browser-context-route-from-har-option-update-content)
    
    Optional setting to control resource content management. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file.
    
*   `update_mode` "full" | "minimal" _(optional)_ Added in: v1.32[#](#browser-context-route-from-har-option-update-mode)
    
    When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `minimal`.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#browser-context-route-from-har-option-url)
    
    A glob pattern, regular expression or predicate to match the request URL. Only requests with URL matching the pattern will be served from the HAR file. If not specified, all requests are served from the HAR file.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-route-from-har-return)

* * *

### route\_web\_socket[​](#browser-context-route-web-socket "Direct link to route_web_socket")

Added in: v1.48 browserContext.route\_web\_socket

This method allows to modify websocket connections that are made by any page in the browser context.

Note that only `WebSocket`s created after this method was called will be routed. It is recommended to call this method before creating any pages.

**Usage**

Below is an example of a simple handler that blocks some websocket messages. See [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute") for more details and examples.

*   Sync
*   Async

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "to-be-blocked":    return  ws.send(message)def handler(ws: WebSocketRoute):  ws.route_send(lambda message: message_handler(ws, message))  ws.connect()context.route_web_socket("/ws", handler)

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "to-be-blocked":    return  ws.send(message)async def handler(ws: WebSocketRoute):  ws.route_send(lambda message: message_handler(ws, message))  await ws.connect()await context.route_web_socket("/ws", handler)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#browser-context-route-web-socket-option-url)
    
    Only WebSockets with the url matching this pattern will be routed. A string pattern can be relative to the [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) context option.
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#browser-context-route-web-socket-option-handler)
    
    Handler function to route the WebSocket.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-route-web-socket-return)

* * *

### set\_default\_navigation\_timeout[​](#browser-context-set-default-navigation-timeout "Direct link to set_default_navigation_timeout")

Added before v1.9 browserContext.set\_default\_navigation\_timeout

This setting will change the default maximum navigation time for the following methods and related shortcuts:

*   [page.go\_back()](/python/docs/api/class-page#page-go-back)
*   [page.go\_forward()](/python/docs/api/class-page#page-go-forward)
*   [page.goto()](/python/docs/api/class-page#page-goto)
*   [page.reload()](/python/docs/api/class-page#page-reload)
*   [page.set\_content()](/python/docs/api/class-page#page-set-content)
*   [page.expect\_navigation()](/python/docs/api/class-page#page-wait-for-navigation)

note

[page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) and [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) take priority over [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout).

**Usage**

    browser_context.set_default_navigation_timeout(timeout)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#browser-context-set-default-navigation-timeout-option-timeout)
    
    Maximum navigation time in milliseconds
    

* * *

### set\_default\_timeout[​](#browser-context-set-default-timeout "Direct link to set_default_timeout")

Added before v1.9 browserContext.set\_default\_timeout

This setting will change the default maximum time for all the methods accepting [timeout](/python/docs/api/class-browsercontext#browser-context-set-default-timeout-option-timeout) option.

note

[page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout), [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) and [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout) take priority over [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).

**Usage**

    browser_context.set_default_timeout(timeout)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#browser-context-set-default-timeout-option-timeout)
    
    Maximum time in milliseconds. Pass `0` to disable timeout.
    

* * *

### set\_extra\_http\_headers[​](#browser-context-set-extra-http-headers "Direct link to set_extra_http_headers")

Added before v1.9 browserContext.set\_extra\_http\_headers

The extra HTTP headers will be sent with every request initiated by any page in the context. These headers are merged with page-specific extra HTTP headers set with [page.set\_extra\_http\_headers()](/python/docs/api/class-page#page-set-extra-http-headers). If page overrides a particular header, page-specific header value will be used instead of the browser context header value.

note

[browser\_context.set\_extra\_http\_headers()](/python/docs/api/class-browsercontext#browser-context-set-extra-http-headers) does not guarantee the order of headers in the outgoing requests.

**Usage**

    browser_context.set_extra_http_headers(headers)

**Arguments**

*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#browser-context-set-extra-http-headers-option-headers)
    
    An object containing additional HTTP headers to be sent with every request. All header values must be strings.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-set-extra-http-headers-return)

* * *

### set\_geolocation[​](#browser-context-set-geolocation "Direct link to set_geolocation")

Added before v1.9 browserContext.set\_geolocation

Sets the context's geolocation. Passing `null` or `undefined` emulates position unavailable.

**Usage**

*   Sync
*   Async

    browser_context.set_geolocation({"latitude": 59.95, "longitude": 30.31667})

    await browser_context.set_geolocation({"latitude": 59.95, "longitude": 30.31667})

note

Consider using [browser\_context.grant\_permissions()](/python/docs/api/class-browsercontext#browser-context-grant-permissions) to grant permissions for the browser context pages to read its geolocation.

**Arguments**

*   `geolocation` [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#browser-context-set-geolocation-option-geolocation)
    *   `latitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Latitude between -90 and 90.
        
    *   `longitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Longitude between -180 and 180.
        
    *   `accuracy` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Non-negative accuracy value. Defaults to `0`.
        

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-set-geolocation-return)

* * *

### set\_offline[​](#browser-context-set-offline "Direct link to set_offline")

Added before v1.9 browserContext.set\_offline

**Usage**

    browser_context.set_offline(offline)

**Arguments**

*   `offline` [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#browser-context-set-offline-option-offline)
    
    Whether to emulate network being offline for the browser context.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-set-offline-return)

* * *

### storage\_state[​](#browser-context-storage-state "Direct link to storage_state")

Added before v1.9 browserContext.storage\_state

Returns storage state for this browser context, contains current cookies, local storage snapshot and IndexedDB snapshot.

**Usage**

    browser_context.storage_state()browser_context.storage_state(**kwargs)

**Arguments**

*   `indexed_db` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.51[#](#browser-context-storage-state-option-indexed-db)
    
    Set to `true` to include [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) in the storage state snapshot. If your application uses IndexedDB to store authentication tokens, like Firebase Authentication, enable this.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-context-storage-state-option-path)
    
    The file path to save the storage state to. If [path](/python/docs/api/class-browsercontext#browser-context-storage-state-option-path) is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won't be saved to the disk.
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#browser-context-storage-state-return)
    *   `cookies` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `domain` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `path` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `expires` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
            
            Unix time in seconds.
            
        *   `httpOnly` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `secure` [bool](https://docs.python.org/3/library/stdtypes.html "bool")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
    *   `origins` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
        *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
            
        *   `localStorage` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\]
            
            *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                
            *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
                

* * *

### unroute[​](#browser-context-unroute "Direct link to unroute")

Added before v1.9 browserContext.unroute

Removes a route created with [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route). When [handler](/python/docs/api/class-browsercontext#browser-context-unroute-option-handler) is not specified, removes all routes for the [url](/python/docs/api/class-browsercontext#browser-context-unroute-option-url).

**Usage**

    browser_context.unroute(url)browser_context.unroute(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#browser-context-unroute-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://en.wikipedia.org/wiki/URL "URL") used to register a routing with [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route).
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Route](/python/docs/api/class-route "Route"), [Request](/python/docs/api/class-request "Request")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any") _(optional)_[#](#browser-context-unroute-option-handler)
    
    Optional handler function used to register a routing with [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route).
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-unroute-return)

* * *

### unroute\_all[​](#browser-context-unroute-all "Direct link to unroute_all")

Added in: v1.41 browserContext.unroute\_all

Removes all routes created with [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [browser\_context.route\_from\_har()](/python/docs/api/class-browsercontext#browser-context-route-from-har).

**Usage**

    browser_context.unroute_all()browser_context.unroute_all(**kwargs)

**Arguments**

*   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#browser-context-unroute-all-option-behavior)
    
    Specifies whether to wait for already running handlers and what to do if they throw errors:
    
    *   `'default'` - do not wait for current handler calls (if any) to finish, if unrouted handler throws, it may result in unhandled error
    *   `'wait'` - wait for current handler calls (if any) to finish
    *   `'ignoreErrors'` - do not wait for current handler calls (if any) to finish, all errors thrown by the handlers after unrouting are silently caught

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#browser-context-unroute-all-return)

* * *

### wait\_for\_event[​](#browser-context-wait-for-event-2 "Direct link to wait_for_event")

Added before v1.9 browserContext.wait\_for\_event

note

In most cases, you should use [browser\_context.expect\_event()](/python/docs/api/class-browsercontext#browser-context-wait-for-event).

Waits for given `event` to fire. If predicate is provided, it passes event's value into the `predicate` function and waits for `predicate(event)` to return a truthy value. Will throw an error if the browser context is closed before the `event` is fired.

**Usage**

    browser_context.wait_for_event(event)browser_context.wait_for_event(event, **kwargs)

**Arguments**

*   `event` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-context-wait-for-event-2-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable") _(optional)_[#](#browser-context-wait-for-event-2-option-predicate)
    
    Receives the event data and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-context-wait-for-event-2-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#browser-context-wait-for-event-2-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### background\_pages[​](#browser-context-background-pages "Direct link to background_pages")

Added in: v1.11 browserContext.background\_pages

note

Background pages are only supported on Chromium-based browsers.

All existing background pages in the context.

**Usage**

    browser_context.background_pages

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Page](/python/docs/api/class-page "Page")\][#](#browser-context-background-pages-return)

* * *

### browser[​](#browser-context-browser "Direct link to browser")

Added before v1.9 browserContext.browser

Returns the browser instance of the context. If it was launched as a persistent context null gets returned.

**Usage**

    browser_context.browser

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Browser](/python/docs/api/class-browser "Browser")[#](#browser-context-browser-return)

* * *

### clock[​](#browser-context-clock "Direct link to clock")

Added in: v1.45 browserContext.clock

Playwright has ability to mock clock and passage of time.

**Usage**

    browser_context.clock

**Type**

*   [Clock](/python/docs/api/class-clock "Clock")

* * *

### pages[​](#browser-context-pages "Direct link to pages")

Added before v1.9 browserContext.pages

Returns all open pages in the context.

**Usage**

    browser_context.pages

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Page](/python/docs/api/class-page "Page")\][#](#browser-context-pages-return)

* * *

### request[​](#browser-context-request "Direct link to request")

Added in: v1.16 browserContext.request

API testing helper associated with this context. Requests made with this API will use context cookies.

**Usage**

    browser_context.request

**Type**

*   [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext")

* * *

### service\_workers[​](#browser-context-service-workers "Direct link to service_workers")

Added in: v1.11 browserContext.service\_workers

note

Service workers are only supported on Chromium-based browsers.

All existing service workers in the context.

**Usage**

    browser_context.service_workers

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Worker](/python/docs/api/class-worker "Worker")\][#](#browser-context-service-workers-return)

* * *

### tracing[​](#browser-context-tracing "Direct link to tracing")

Added in: v1.12 browserContext.tracing

**Usage**

    browser_context.tracing

**Type**

*   [Tracing](/python/docs/api/class-tracing "Tracing")

* * *

Events[​](#events "Direct link to Events")
------------------------------------------

### on("backgroundpage")[​](#browser-context-event-background-page "Direct link to on(\"backgroundpage\")")

Added in: v1.11 browserContext.on("backgroundpage")

note

Only works with Chromium browser's persistent context.

Emitted when new background page is created in the context.

*   Sync
*   Async

    background_page = context.wait_for_event("backgroundpage")

    background_page = await context.wait_for_event("backgroundpage")

**Usage**

    browser_context.on("backgroundpage", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("close")[​](#browser-context-event-close "Direct link to on(\"close\")")

Added before v1.9 browserContext.on("close")

Emitted when Browser context gets closed. This might happen because of one of the following:

*   Browser context is closed.
*   Browser application is closed or crashed.
*   The [browser.close()](/python/docs/api/class-browser#browser-close) method was called.

**Usage**

    browser_context.on("close", handler)

**Event data**

*   [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")

* * *

### on("console")[​](#browser-context-event-console "Direct link to on(\"console\")")

Added in: v1.34 browserContext.on("console")

Emitted when JavaScript within the page calls one of console API methods, e.g. `console.log` or `console.dir`.

The arguments passed into `console.log` and the page are available on the [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") event handler argument.

**Usage**

*   Sync
*   Async

    def print_args(msg):    for arg in msg.args:        print(arg.json_value())context.on("console", print_args)page.evaluate("console.log('hello', 5, { foo: 'bar' })")

    async def print_args(msg):    values = []    for arg in msg.args:        values.append(await arg.json_value())    print(values)context.on("console", print_args)await page.evaluate("console.log('hello', 5, { foo: 'bar' })")

**Event data**

*   [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage")

* * *

### on("dialog")[​](#browser-context-event-dialog "Direct link to on(\"dialog\")")

Added in: v1.34 browserContext.on("dialog")

Emitted when a JavaScript dialog appears, such as `alert`, `prompt`, `confirm` or `beforeunload`. Listener **must** either [dialog.accept()](/python/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/python/docs/api/class-dialog#dialog-dismiss) the dialog - otherwise the page will [freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking) waiting for the dialog, and actions like click will never finish.

**Usage**

    context.on("dialog", lambda dialog: dialog.accept())

note

When no [page.on("dialog")](/python/docs/api/class-page#page-event-dialog) or [browser\_context.on("dialog")](/python/docs/api/class-browsercontext#browser-context-event-dialog) listeners are present, all dialogs are automatically dismissed.

**Event data**

*   [Dialog](/python/docs/api/class-dialog "Dialog")

* * *

### on("page")[​](#browser-context-event-page "Direct link to on(\"page\")")

Added before v1.9 browserContext.on("page")

The event is emitted when a new Page is created in the BrowserContext. The page may still be loading. The event will also fire for popup pages. See also [page.on("popup")](/python/docs/api/class-page#page-event-popup) to receive events about popups relevant to a specific page.

The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with `window.open('http://example.com')`, this event will fire when the network request to "[http://example.com](http://example.com)" is done and its response has started loading in the popup. If you would like to route/listen to this network request, use [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [browser\_context.on("request")](/python/docs/api/class-browsercontext#browser-context-event-request) respectively instead of similar methods on the [Page](/python/docs/api/class-page "Page").

*   Sync
*   Async

    with context.expect_page() as page_info:    page.get_by_text("open new page").click(),page = page_info.valueprint(page.evaluate("location.href"))

    async with context.expect_page() as page_info:    await page.get_by_text("open new page").click(),page = await page_info.valueprint(await page.evaluate("location.href"))

note

Use [page.wait\_for\_load\_state()](/python/docs/api/class-page#page-wait-for-load-state) to wait until the page gets to a particular state (you should not need it in most cases).

**Usage**

    browser_context.on("page", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("request")[​](#browser-context-event-request "Direct link to on(\"request\")")

Added in: v1.12 browserContext.on("request")

Emitted when a request is issued from any pages created through this context. The [request](/python/docs/api/class-request "Request") object is read-only. To only listen for requests from a particular page, use [page.on("request")](/python/docs/api/class-page#page-event-request).

In order to intercept and mutate requests, see [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) or [page.route()](/python/docs/api/class-page#page-route).

**Usage**

    browser_context.on("request", handler)

**Event data**

*   [Request](/python/docs/api/class-request "Request")

* * *

### on("requestfailed")[​](#browser-context-event-request-failed "Direct link to on(\"requestfailed\")")

Added in: v1.12 browserContext.on("requestfailed")

Emitted when a request fails, for example by timing out. To only listen for failed requests from a particular page, use [page.on("requestfailed")](/python/docs/api/class-page#page-event-request-failed).

note

HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with [browser\_context.on("requestfinished")](/python/docs/api/class-browsercontext#browser-context-event-request-finished) event and not with [browser\_context.on("requestfailed")](/python/docs/api/class-browsercontext#browser-context-event-request-failed).

**Usage**

    browser_context.on("requestfailed", handler)

**Event data**

*   [Request](/python/docs/api/class-request "Request")

* * *

### on("requestfinished")[​](#browser-context-event-request-finished "Direct link to on(\"requestfinished\")")

Added in: v1.12 browserContext.on("requestfinished")

Emitted when a request finishes successfully after downloading the response body. For a successful response, the sequence of events is `request`, `response` and `requestfinished`. To listen for successful requests from a particular page, use [page.on("requestfinished")](/python/docs/api/class-page#page-event-request-finished).

**Usage**

    browser_context.on("requestfinished", handler)

**Event data**

*   [Request](/python/docs/api/class-request "Request")

* * *

### on("response")[​](#browser-context-event-response "Direct link to on(\"response\")")

Added in: v1.12 browserContext.on("response")

Emitted when [response](/python/docs/api/class-response "Response") status and headers are received for a request. For a successful response, the sequence of events is `request`, `response` and `requestfinished`. To listen for response events from a particular page, use [page.on("response")](/python/docs/api/class-page#page-event-response).

**Usage**

    browser_context.on("response", handler)

**Event data**

*   [Response](/python/docs/api/class-response "Response")

* * *

### on("serviceworker")[​](#browser-context-event-service-worker "Direct link to on(\"serviceworker\")")

Added in: v1.11 browserContext.on("serviceworker")

note

Service workers are only supported on Chromium-based browsers.

Emitted when new service worker is created in the context.

**Usage**

    browser_context.on("serviceworker", handler)

**Event data**

*   [Worker](/python/docs/api/class-worker "Worker")

* * *

### on("weberror")[​](#browser-context-event-web-error "Direct link to on(\"weberror\")")

Added in: v1.38 browserContext.on("weberror")

Emitted when exception is unhandled in any of the pages in this context. To listen for errors from a particular page, use [page.on("pageerror")](/python/docs/api/class-page#page-event-page-error) instead.

**Usage**

    browser_context.on("weberror", handler)

**Event data**

*   [WebError](/python/docs/api/class-weberror "WebError")

# BrowserType

BrowserType
===========

BrowserType provides methods to launch a specific browser instance or connect to an existing one. The following is a typical example of using Playwright to drive automation:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    chromium = playwright.chromium    browser = chromium.launch()    page = browser.new_page()    page.goto("https://example.com")    # other actions...    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    chromium = playwright.chromium    browser = await chromium.launch()    page = await browser.new_page()    await page.goto("https://example.com")    # other actions...    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### connect[​](#browser-type-connect "Direct link to connect")

Added before v1.9 browserType.connect

This method attaches Playwright to an existing browser instance created via `BrowserType.launchServer` in Node.js.

note

The major and minor version of the Playwright instance that connects needs to match the version of Playwright that launches the browser (1.2.3 → is compatible with 1.2.x).

**Usage**

    browser_type.connect(ws_endpoint)browser_type.connect(ws_endpoint, **kwargs)

**Arguments**

*   `ws_endpoint` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.10[#](#browser-type-connect-option-ws-endpoint)
    
    A Playwright browser websocket endpoint to connect to. You obtain this endpoint via `BrowserServer.wsEndpoint`.
    
*   `expose_network` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.37[#](#browser-type-connect-option-expose-network)
    
    This option exposes network available on the connecting client to the browser being connected to. Consists of a list of rules separated by comma.
    
    Available rules:
    
    1.  Hostname pattern, for example: `example.com`, `*.org:99`, `x.*.y.com`, `*foo.org`.
    2.  IP literal, for example: `127.0.0.1`, `0.0.0.0:99`, `[::1]`, `[0:0::1]:99`.
    3.  `<loopback>` that matches local loopback interfaces: `localhost`, `*.localhost`, `127.0.0.1`, `[::1]`.
    
    Some common examples:
    
    1.  `"*"` to expose all network.
    2.  `"<loopback>"` to expose localhost network.
    3.  `"*.test.internal-domain,*.staging.internal-domain,<loopback>"` to expose test/staging deployments and localhost.
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_ Added in: v1.11[#](#browser-type-connect-option-headers)
    
    Additional HTTP headers to be sent with web socket connect request. Optional.
    
*   `slow_mo` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.10[#](#browser-type-connect-option-slow-mo)
    
    Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on. Defaults to 0.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.10[#](#browser-type-connect-option-timeout)
    
    Maximum time in milliseconds to wait for the connection to be established. Defaults to `0` (no timeout).
    

**Returns**

*   [Browser](/python/docs/api/class-browser "Browser")[#](#browser-type-connect-return)

* * *

### connect\_over\_cdp[​](#browser-type-connect-over-cdp "Direct link to connect_over_cdp")

Added in: v1.9 browserType.connect\_over\_cdp

This method attaches Playwright to an existing browser instance using the Chrome DevTools Protocol.

The default browser context is accessible via [browser.contexts](/python/docs/api/class-browser#browser-contexts).

note

Connecting over the Chrome DevTools Protocol is only supported for Chromium-based browsers.

note

This connection is significantly lower fidelity than the Playwright protocol connection via [browser\_type.connect()](/python/docs/api/class-browsertype#browser-type-connect). If you are experiencing issues or attempting to use advanced functionality, you probably want to use [browser\_type.connect()](/python/docs/api/class-browsertype#browser-type-connect).

**Usage**

*   Sync
*   Async

    browser = playwright.chromium.connect_over_cdp("http://localhost:9222")default_context = browser.contexts[0]page = default_context.pages[0]

    browser = await playwright.chromium.connect_over_cdp("http://localhost:9222")default_context = browser.contexts[0]page = default_context.pages[0]

**Arguments**

*   `endpoint_url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.11[#](#browser-type-connect-over-cdp-option-endpoint-url)
    
    A CDP websocket endpoint or http url to connect to. For example `http://localhost:9222/` or `ws://127.0.0.1:9222/devtools/browser/387adf4c-243f-4051-a181-46798f4a46f4`.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_ Added in: v1.11[#](#browser-type-connect-over-cdp-option-headers)
    
    Additional HTTP headers to be sent with connect request. Optional.
    
*   `slow_mo` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.11[#](#browser-type-connect-over-cdp-option-slow-mo)
    
    Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on. Defaults to 0.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.11[#](#browser-type-connect-over-cdp-option-timeout)
    
    Maximum time in milliseconds to wait for the connection to be established. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [Browser](/python/docs/api/class-browser "Browser")[#](#browser-type-connect-over-cdp-return)

* * *

### launch[​](#browser-type-launch "Direct link to launch")

Added before v1.9 browserType.launch

Returns the browser instance.

**Usage**

You can use [ignore\_default\_args](/python/docs/api/class-browsertype#browser-type-launch-option-ignore-default-args) to filter out `--mute-audio` from default arguments:

*   Sync
*   Async

    browser = playwright.chromium.launch( # or "firefox" or "webkit".    ignore_default_args=["--mute-audio"])

    browser = await playwright.chromium.launch( # or "firefox" or "webkit".    ignore_default_args=["--mute-audio"])

> **Chromium-only** Playwright can also be used to control the Google Chrome or Microsoft Edge browsers, but it works best with the version of Chromium it is bundled with. There is no guarantee it will work with any other version. Use [executable\_path](/python/docs/api/class-browsertype#browser-type-launch-option-executable-path) option with extreme caution.
> 
> If Google Chrome (rather than Chromium) is preferred, a [Chrome Canary](https://www.google.com/chrome/browser/canary.html) or [Dev Channel](https://www.chromium.org/getting-involved/dev-channel) build is suggested.
> 
> Stock browsers like Google Chrome and Microsoft Edge are suitable for tests that require proprietary media codecs for video playback. See [this article](https://www.howtogeek.com/202825/what%E2%80%99s-the-difference-between-chromium-and-chrome/) for other differences between Chromium and Chrome. [This article](https://chromium.googlesource.com/chromium/src/+/lkgr/docs/chromium_browser_vs_google_chrome.md) describes some differences for Linux users.

**Arguments**

*   `args` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-type-launch-option-args)
    
    warning
    
    Use custom browser args at your own risk, as some of them may break Playwright functionality.
    
    Additional arguments to pass to the browser instance. The list of Chromium flags can be found [here](https://peter.sh/experiments/chromium-command-line-switches/).
    
*   `channel` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-type-launch-option-channel)
    
    Browser distribution channel.
    
    Use "chromium" to [opt in to new headless mode](/python/docs/browsers#chromium-new-headless-mode).
    
    Use "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev", or "msedge-canary" to use branded [Google Chrome and Microsoft Edge](/python/docs/browsers#google-chrome--microsoft-edge).
    
*   `chromium_sandbox` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-option-chromium-sandbox)
    
    Enable Chromium sandboxing. Defaults to `false`.
    
*   `devtools` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-option-devtools)
    
    Deprecated
    
    Use [debugging tools](/python/docs/debug) instead.
    
    **Chromium-only** Whether to auto-open a Developer Tools panel for each tab. If this option is `true`, the [headless](/python/docs/api/class-browsertype#browser-type-launch-option-headless) option will be set `false`.
    
*   `downloads_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-option-downloads-path)
    
    If specified, accepted downloads are downloaded into this directory. Otherwise, temporary directory is created and is deleted when browser is closed. In either case, the downloads are deleted when the browser context they were created in is closed.
    
*   `env` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#browser-type-launch-option-env)
    
    Specify environment variables that will be visible to the browser. Defaults to `process.env`.
    
*   `executable_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-option-executable-path)
    
    Path to a browser executable to run instead of the bundled one. If [executable\_path](/python/docs/api/class-browsertype#browser-type-launch-option-executable-path) is a relative path, then it is resolved relative to the current working directory. Note that Playwright only works with the bundled Chromium, Firefox or WebKit, use at your own risk.
    
*   `firefox_user_prefs` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#browser-type-launch-option-firefox-user-prefs)
    
    Firefox user preferences. Learn more about the Firefox user preferences at [`about:config`](https://support.mozilla.org/en-US/kb/about-config-editor-firefox).
    
*   `handle_sighup` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-option-handle-sighup)
    
    Close the browser process on SIGHUP. Defaults to `true`.
    
*   `handle_sigint` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-option-handle-sigint)
    
    Close the browser process on Ctrl-C. Defaults to `true`.
    
*   `handle_sigterm` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-option-handle-sigterm)
    
    Close the browser process on SIGTERM. Defaults to `true`.
    
*   `headless` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-option-headless)
    
    Whether to run browser in headless mode. More details for [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) and [Firefox](https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/). Defaults to `true` unless the [devtools](/python/docs/api/class-browsertype#browser-type-launch-option-devtools) option is `true`.
    
*   `ignore_default_args` [bool](https://docs.python.org/3/library/stdtypes.html "bool") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-type-launch-option-ignore-default-args)
    
    If `true`, Playwright does not pass its own configurations args and only uses the ones from [args](/python/docs/api/class-browsertype#browser-type-launch-option-args). If an array is given, then filters out the given default arguments. Dangerous option; use with care. Defaults to `false`.
    
*   `proxy` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-option-proxy)
    
    *   `server` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
        
    *   `bypass` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
        
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional username to use if HTTP proxy requires authentication.
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional password to use if HTTP proxy requires authentication.
        
    
    Network proxy settings.
    
*   `slow_mo` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-type-launch-option-slow-mo)
    
    Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-type-launch-option-timeout)
    
    Maximum time in milliseconds to wait for the browser instance to start. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    
*   `traces_dir` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-option-traces-dir)
    
    If specified, traces are saved into this directory.
    

**Returns**

*   [Browser](/python/docs/api/class-browser "Browser")[#](#browser-type-launch-return)

* * *

### launch\_persistent\_context[​](#browser-type-launch-persistent-context "Direct link to launch_persistent_context")

Added before v1.9 browserType.launch\_persistent\_context

Returns the persistent browser context instance.

Launches browser that uses persistent storage located at [user\_data\_dir](/python/docs/api/class-browsertype#browser-type-launch-persistent-context-option-user-data-dir) and returns the only context. Closing this context will automatically close the browser.

**Usage**

    browser_type.launch_persistent_context(user_data_dir)browser_type.launch_persistent_context(user_data_dir, **kwargs)

**Arguments**

*   `user_data_dir` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\][#](#browser-type-launch-persistent-context-option-user-data-dir)
    
    Path to a User Data Directory, which stores browser session data like cookies and local storage. Pass an empty string to create a temporary directory.
    
    More details for [Chromium](https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md#introduction) and [Firefox](https://wiki.mozilla.org/Firefox/CommandLineOptions#User_profile). Chromium's user data directory is the **parent** directory of the "Profile Path" seen at `chrome://version`.
    
    Note that browsers do not allow launching multiple instances with the same User Data Directory.
    
*   `accept_downloads` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-accept-downloads)
    
    Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
    
*   `args` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-type-launch-persistent-context-option-args)
    
    warning
    
    Use custom browser args at your own risk, as some of them may break Playwright functionality.
    
    Additional arguments to pass to the browser instance. The list of Chromium flags can be found [here](https://peter.sh/experiments/chromium-command-line-switches/).
    
*   `base_url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-type-launch-persistent-context-option-base-url)
    
    When using [page.goto()](/python/docs/api/class-page#page-goto), [page.route()](/python/docs/api/class-page#page-route), [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url), [page.expect\_request()](/python/docs/api/class-page#page-wait-for-request), or [page.expect\_response()](/python/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
    
    *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
    *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
    *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
*   `bypass_csp` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-bypass-csp)
    
    Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
    
*   `channel` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-type-launch-persistent-context-option-channel)
    
    Browser distribution channel.
    
    Use "chromium" to [opt in to new headless mode](/python/docs/browsers#chromium-new-headless-mode).
    
    Use "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev", or "msedge-canary" to use branded [Google Chrome and Microsoft Edge](/python/docs/browsers#google-chrome--microsoft-edge).
    
*   `chromium_sandbox` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-chromium-sandbox)
    
    Enable Chromium sandboxing. Defaults to `false`.
    
*   `client_certificates` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\] _(optional)_ Added in: 1.46[#](#browser-type-launch-persistent-context-option-client-certificates)
    
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
        
    *   `certPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the certificate in PEM format.
        
    *   `cert` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the certificate in PEM format.
        
    *   `keyPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the file with the private key in PEM format.
        
    *   `key` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the private key in PEM format.
        
    *   `pfxPath` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_
        
        Path to the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `pfx` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_
        
        Direct value of the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `passphrase` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Passphrase for the private key (PEM or PFX).
        
    
    TLS Client Authentication allows the server to request a client certificate and verify it.
    
    **Details**
    
    An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
    
    note
    
    When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
    
*   `color_scheme` "light" | "dark" | "no-preference" | "null" _(optional)_[#](#browser-type-launch-persistent-context-option-color-scheme)
    
    Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'light'`.
    
*   `contrast` "no-preference" | "more" | "null" _(optional)_[#](#browser-type-launch-persistent-context-option-contrast)
    
    Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'no-preference'`.
    
*   `device_scale_factor` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-type-launch-persistent-context-option-device-scale-factor)
    
    Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/python/docs/emulation#devices).
    
*   `devtools` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-devtools)
    
    Deprecated
    
    Use [debugging tools](/python/docs/debug) instead.
    
    **Chromium-only** Whether to auto-open a Developer Tools panel for each tab. If this option is `true`, the [headless](/python/docs/api/class-browsertype#browser-type-launch-persistent-context-option-headless) option will be set `false`.
    
*   `downloads_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-persistent-context-option-downloads-path)
    
    If specified, accepted downloads are downloaded into this directory. Otherwise, temporary directory is created and is deleted when browser is closed. In either case, the downloads are deleted when the browser context they were created in is closed.
    
*   `env` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_[#](#browser-type-launch-persistent-context-option-env)
    
    Specify environment variables that will be visible to the browser. Defaults to `process.env`.
    
*   `executable_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-persistent-context-option-executable-path)
    
    Path to a browser executable to run instead of the bundled one. If [executable\_path](/python/docs/api/class-browsertype#browser-type-launch-persistent-context-option-executable-path) is a relative path, then it is resolved relative to the current working directory. Note that Playwright only works with the bundled Chromium, Firefox or WebKit, use at your own risk.
    
*   `extra_http_headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-type-launch-persistent-context-option-extra-http-headers)
    
    An object containing additional HTTP headers to be sent with every request. Defaults to none.
    
*   `firefox_user_prefs` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [bool](https://docs.python.org/3/library/stdtypes.html "bool")\] _(optional)_ Added in: v1.40[#](#browser-type-launch-persistent-context-option-firefox-user-prefs)
    
    Firefox user preferences. Learn more about the Firefox user preferences at [`about:config`](https://support.mozilla.org/en-US/kb/about-config-editor-firefox).
    
*   `forced_colors` "active" | "none" | "null" _(optional)_[#](#browser-type-launch-persistent-context-option-forced-colors)
    
    Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'none'`.
    
*   `geolocation` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-persistent-context-option-geolocation)
    
    *   `latitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Latitude between -90 and 90.
        
    *   `longitude` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Longitude between -180 and 180.
        
    *   `accuracy` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Non-negative accuracy value. Defaults to `0`.
        
*   `handle_sighup` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-handle-sighup)
    
    Close the browser process on SIGHUP. Defaults to `true`.
    
*   `handle_sigint` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-handle-sigint)
    
    Close the browser process on Ctrl-C. Defaults to `true`.
    
*   `handle_sigterm` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-handle-sigterm)
    
    Close the browser process on SIGTERM. Defaults to `true`.
    
*   `has_touch` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-has-touch)
    
    Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/python/docs/emulation#devices).
    
*   `headless` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-headless)
    
    Whether to run browser in headless mode. More details for [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) and [Firefox](https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/). Defaults to `true` unless the [devtools](/python/docs/api/class-browsertype#browser-type-launch-option-devtools) option is `true`.
    
*   `http_credentials` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-persistent-context-option-http-credentials)
    
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `origin` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Restrain sending http credentials on specific origin (scheme://host:port).
        
    *   `send` "unauthorized" | "always" _(optional)_
        
        This option only applies to the requests sent from corresponding [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
        
    
    Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
    
*   `ignore_default_args` [bool](https://docs.python.org/3/library/stdtypes.html "bool") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-type-launch-persistent-context-option-ignore-default-args)
    
    If `true`, Playwright does not pass its own configurations args and only uses the ones from [args](/python/docs/api/class-browsertype#browser-type-launch-persistent-context-option-args). If an array is given, then filters out the given default arguments. Dangerous option; use with care. Defaults to `false`.
    
*   `ignore_https_errors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-ignore-https-errors)
    
    Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
    
*   `is_mobile` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-is-mobile)
    
    Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/python/docs/emulation#ismobile).
    
*   `java_script_enabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-java-script-enabled)
    
    Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/python/docs/emulation#javascript-enabled).
    
*   `locale` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-type-launch-persistent-context-option-locale)
    
    Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/python/docs/emulation#locale--timezone).
    
*   `no_viewport` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-no-viewport)
    
    Does not enforce fixed viewport, allows resizing window in the headed mode.
    
*   `offline` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-offline)
    
    Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/python/docs/emulation#offline).
    
*   `permissions` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#browser-type-launch-persistent-context-option-permissions)
    
    A list of permissions to grant to all pages in this context. See [browser\_context.grant\_permissions()](/python/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
    
*   `proxy` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-persistent-context-option-proxy)
    
    *   `server` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
        
    *   `bypass` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
        
    *   `username` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional username to use if HTTP proxy requires authentication.
        
    *   `password` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Optional password to use if HTTP proxy requires authentication.
        
    
    Network proxy settings.
    
*   `record_har_content` "omit" | "embed" | "attach" _(optional)_[#](#browser-type-launch-persistent-context-option-record-har-content)
    
    Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files and all of these files are archived along with the HAR file. Defaults to `embed`, which stores content inline the HAR file as per HAR specification.
    
*   `record_har_mode` "full" | "minimal" _(optional)_[#](#browser-type-launch-persistent-context-option-record-har-mode)
    
    When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
    
*   `record_har_omit_content` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-record-har-omit-content)
    
    Optional setting to control whether to omit request content from the HAR. Defaults to `false`.
    
*   `record_har_path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-persistent-context-option-record-har-path)
    
    Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into the specified HAR file on the filesystem. If not specified, the HAR is not recorded. Make sure to call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
    
*   `record_har_url_filter` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#browser-type-launch-persistent-context-option-record-har-url-filter)
    
*   `record_video_dir` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-persistent-context-option-record-video-dir)
    
    Enables video recording for all pages into the specified directory. If not specified videos are not recorded. Make sure to call [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
    
*   `record_video_size` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-persistent-context-option-record-video-size)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Video frame width.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Video frame height.
        
    
    Dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
    
*   `reduced_motion` "reduce" | "no-preference" | "null" _(optional)_[#](#browser-type-launch-persistent-context-option-reduced-motion)
    
    Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) for more details. Passing `'null'` resets emulation to system defaults. Defaults to `'no-preference'`.
    
*   `screen` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-persistent-context-option-screen)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        
    
    Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/python/docs/api/class-browsertype#browser-type-launch-persistent-context-option-viewport) is set.
    
*   `service_workers` "allow" | "block" _(optional)_[#](#browser-type-launch-persistent-context-option-service-workers)
    
    Whether to allow sites to register Service workers. Defaults to `'allow'`.
    
    *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
    *   `'block'`: Playwright will block all registration of Service Workers.
*   `slow_mo` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-type-launch-persistent-context-option-slow-mo)
    
    Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on.
    
*   `strict_selectors` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#browser-type-launch-persistent-context-option-strict-selectors)
    
    If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/python/docs/api/class-locator "Locator") to learn more about the strict mode.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#browser-type-launch-persistent-context-option-timeout)
    
    Maximum time in milliseconds to wait for the browser instance to start. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    
*   `timezone_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-type-launch-persistent-context-option-timezone-id)
    
    Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
    
*   `traces_dir` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#browser-type-launch-persistent-context-option-traces-dir)
    
    If specified, traces are saved into this directory.
    
*   `user_agent` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#browser-type-launch-persistent-context-option-user-agent)
    
    Specific user agent to use in this context.
    
*   `viewport` [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#browser-type-launch-persistent-context-option-viewport)
    
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        
    
    Sets a consistent viewport for each page. Defaults to an 1280x720 viewport. `no_viewport` disables the fixed viewport. Learn more about [viewport emulation](/python/docs/emulation#viewport).
    

**Returns**

*   [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")[#](#browser-type-launch-persistent-context-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### executable\_path[​](#browser-type-executable-path "Direct link to executable_path")

Added before v1.9 browserType.executable\_path

A path where Playwright expects to find a bundled browser executable.

**Usage**

    browser_type.executable_path

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-type-executable-path-return)

* * *

### name[​](#browser-type-name "Direct link to name")

Added before v1.9 browserType.name

Returns browser name. For example: `'chromium'`, `'webkit'` or `'firefox'`.

**Usage**

    browser_type.name

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#browser-type-name-return)

# CDPSession

CDPSession
==========

The `CDPSession` instances are used to talk raw Chrome Devtools Protocol:

*   protocol methods can be called with `session.send` method.
*   protocol events can be subscribed to with `session.on` method.

Useful links:

*   Documentation on DevTools Protocol can be found here: [DevTools Protocol Viewer](https://chromedevtools.github.io/devtools-protocol/).
*   Getting Started with DevTools Protocol: [https://github.com/aslushnikov/getting-started-with-cdp/blob/master/README.md](https://github.com/aslushnikov/getting-started-with-cdp/blob/master/README.md)

*   Sync
*   Async

    client = page.context.new_cdp_session(page)client.send("Animation.enable")client.on("Animation.animationCreated", lambda: print("animation created!"))response = client.send("Animation.getPlaybackRate")print("playback rate is " + str(response["playbackRate"]))client.send("Animation.setPlaybackRate", {    "playbackRate": response["playbackRate"] / 2})

    client = await page.context.new_cdp_session(page)await client.send("Animation.enable")client.on("Animation.animationCreated", lambda: print("animation created!"))response = await client.send("Animation.getPlaybackRate")print("playback rate is " + str(response["playbackRate"]))await client.send("Animation.setPlaybackRate", {    "playbackRate": response["playbackRate"] / 2})

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### detach[​](#cdp-session-detach "Direct link to detach")

Added before v1.9 cdpSession.detach

Detaches the CDPSession from the target. Once detached, the CDPSession object won't emit any events and can't be used to send messages.

**Usage**

    cdp_session.detach()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#cdp-session-detach-return)

* * *

### send[​](#cdp-session-send "Direct link to send")

Added before v1.9 cdpSession.send

**Usage**

    cdp_session.send(method)cdp_session.send(method, **kwargs)

**Arguments**

*   `method` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#cdp-session-send-option-method)
    
    Protocol method name.
    
*   `params` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#cdp-session-send-option-params)
    
    Optional method parameters.
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#cdp-session-send-return)

# Clock

Clock
=====

Accurately simulating time-dependent behavior is essential for verifying the correctness of applications. Learn more about [clock emulation](/python/docs/clock).

Note that clock is installed for the entire [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext"), so the time in all the pages and iframes is controlled by the same clock.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### fast\_forward[​](#clock-fast-forward "Direct link to fast_forward")

Added in: v1.45 clock.fast\_forward

Advance the clock by jumping forward in time. Only fires due timers at most once. This is equivalent to user closing the laptop lid for a while and reopening it later, after given time.

**Usage**

*   Sync
*   Async

    page.clock.fast_forward(1000)page.clock.fast_forward("30:00")

    await page.clock.fast_forward(1000)await page.clock.fast_forward("30:00")

**Arguments**

*   `ticks` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#clock-fast-forward-option-ticks)
    
    Time may be the number of milliseconds to advance the clock by or a human-readable string. Valid string formats are "08" for eight seconds, "01:00" for one minute and "02:34:10" for two hours, 34 minutes and ten seconds.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-fast-forward-return)

* * *

### install[​](#clock-install "Direct link to install")

Added in: v1.45 clock.install

Install fake implementations for the following time-related functions:

*   `Date`
*   `setTimeout`
*   `clearTimeout`
*   `setInterval`
*   `clearInterval`
*   `requestAnimationFrame`
*   `cancelAnimationFrame`
*   `requestIdleCallback`
*   `cancelIdleCallback`
*   `performance`

Fake timers are used to manually control the flow of time in tests. They allow you to advance time, fire timers, and control the behavior of time-dependent functions. See [clock.run\_for()](/python/docs/api/class-clock#clock-run-for) and [clock.fast\_forward()](/python/docs/api/class-clock#clock-fast-forward) for more information.

**Usage**

    clock.install()clock.install(**kwargs)

**Arguments**

*   `time` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [datetime](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime") _(optional)_[#](#clock-install-option-time)
    
    Time to initialize with, current system time by default.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-install-return)

* * *

### pause\_at[​](#clock-pause-at "Direct link to pause_at")

Added in: v1.45 clock.pause\_at

Advance the clock by jumping forward in time and pause the time. Once this method is called, no timers are fired unless [clock.run\_for()](/python/docs/api/class-clock#clock-run-for), [clock.fast\_forward()](/python/docs/api/class-clock#clock-fast-forward), [clock.pause\_at()](/python/docs/api/class-clock#clock-pause-at) or [clock.resume()](/python/docs/api/class-clock#clock-resume) is called.

Only fires due timers at most once. This is equivalent to user closing the laptop lid for a while and reopening it at the specified time and pausing.

**Usage**

*   Sync
*   Async

    page.clock.pause_at(datetime.datetime(2020, 2, 2))page.clock.pause_at("2020-02-02")

    await page.clock.pause_at(datetime.datetime(2020, 2, 2))await page.clock.pause_at("2020-02-02")

For best results, install the clock before navigating the page and set it to a time slightly before the intended test time. This ensures that all timers run normally during page loading, preventing the page from getting stuck. Once the page has fully loaded, you can safely use [clock.pause\_at()](/python/docs/api/class-clock#clock-pause-at) to pause the clock.

*   Sync
*   Async

    # Initialize clock with some time before the test time and let the page load# naturally. `Date.now` will progress as the timers fire.page.clock.install(time=datetime.datetime(2024, 12, 10, 8, 0, 0))page.goto("http://localhost:3333")page.clock.pause_at(datetime.datetime(2024, 12, 10, 10, 0, 0))

    # Initialize clock with some time before the test time and let the page load# naturally. `Date.now` will progress as the timers fire.await page.clock.install(time=datetime.datetime(2024, 12, 10, 8, 0, 0))await page.goto("http://localhost:3333")await page.clock.pause_at(datetime.datetime(2024, 12, 10, 10, 0, 0))

**Arguments**

*   `time` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [datetime](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime")[#](#clock-pause-at-option-time)
    
    Time to pause at.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-pause-at-return)

* * *

### resume[​](#clock-resume "Direct link to resume")

Added in: v1.45 clock.resume

Resumes timers. Once this method is called, time resumes flowing, timers are fired as usual.

**Usage**

    clock.resume()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-resume-return)

* * *

### run\_for[​](#clock-run-for "Direct link to run_for")

Added in: v1.45 clock.run\_for

Advance the clock, firing all the time-related callbacks.

**Usage**

*   Sync
*   Async

    page.clock.run_for(1000);page.clock.run_for("30:00")

    await page.clock.run_for(1000);await page.clock.run_for("30:00")

**Arguments**

*   `ticks` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#clock-run-for-option-ticks)
    
    Time may be the number of milliseconds to advance the clock by or a human-readable string. Valid string formats are "08" for eight seconds, "01:00" for one minute and "02:34:10" for two hours, 34 minutes and ten seconds.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-run-for-return)

* * *

### set\_fixed\_time[​](#clock-set-fixed-time "Direct link to set_fixed_time")

Added in: v1.45 clock.set\_fixed\_time

Makes `Date.now` and `new Date()` return fixed fake time at all times, keeps all the timers running.

Use this method for simple scenarios where you only need to test with a predefined time. For more advanced scenarios, use [clock.install()](/python/docs/api/class-clock#clock-install) instead. Read docs on [clock emulation](/python/docs/clock) to learn more.

**Usage**

*   Sync
*   Async

    page.clock.set_fixed_time(datetime.datetime.now())page.clock.set_fixed_time(datetime.datetime(2020, 2, 2))page.clock.set_fixed_time("2020-02-02")

    await page.clock.set_fixed_time(datetime.datetime.now())await page.clock.set_fixed_time(datetime.datetime(2020, 2, 2))await page.clock.set_fixed_time("2020-02-02")

**Arguments**

*   `time` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [datetime](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime")[#](#clock-set-fixed-time-option-time)
    
    Time to be set.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-set-fixed-time-return)

* * *

### set\_system\_time[​](#clock-set-system-time "Direct link to set_system_time")

Added in: v1.45 clock.set\_system\_time

Sets system time, but does not trigger any timers. Use this to test how the web page reacts to a time shift, for example switching from summer to winter time, or changing time zones.

**Usage**

*   Sync
*   Async

    page.clock.set_system_time(datetime.datetime.now())page.clock.set_system_time(datetime.datetime(2020, 2, 2))page.clock.set_system_time("2020-02-02")

    await page.clock.set_system_time(datetime.datetime.now())await page.clock.set_system_time(datetime.datetime(2020, 2, 2))await page.clock.set_system_time("2020-02-02")

**Arguments**

*   `time` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [datetime](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime")[#](#clock-set-system-time-option-time)
    
    Time to be set.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#clock-set-system-time-return)

# ConsoleMessage

ConsoleMessage
==============

[ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") objects are dispatched by page via the [page.on("console")](/python/docs/api/class-page#page-event-console) event. For each console message logged in the page there will be corresponding event in the Playwright context.

*   Sync
*   Async

    # Listen for all console logspage.on("console", lambda msg: print(msg.text))# Listen for all console events and handle errorspage.on("console", lambda msg: print(f"error: {msg.text}") if msg.type == "error" else None)# Get the next console logwith page.expect_console_message() as msg_info:    # Issue console.log inside the page    page.evaluate("console.log('hello', 42, { foo: 'bar' })")msg = msg_info.value# Deconstruct print argumentsmsg.args[0].json_value() # hellomsg.args[1].json_value() # 42

    # Listen for all console logspage.on("console", lambda msg: print(msg.text))# Listen for all console events and handle errorspage.on("console", lambda msg: print(f"error: {msg.text}") if msg.type == "error" else None)# Get the next console logasync with page.expect_console_message() as msg_info:    # Issue console.log inside the page    await page.evaluate("console.log('hello', 42, { foo: 'bar' })")msg = await msg_info.value# Deconstruct print argumentsawait msg.args[0].json_value() # helloawait msg.args[1].json_value() # 42

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### args[​](#console-message-args "Direct link to args")

Added before v1.9 consoleMessage.args

List of arguments passed to a `console` function call. See also [page.on("console")](/python/docs/api/class-page#page-event-console).

**Usage**

    console_message.args

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[JSHandle](/python/docs/api/class-jshandle "JSHandle")\][#](#console-message-args-return)

* * *

### location[​](#console-message-location "Direct link to location")

Added before v1.9 consoleMessage.location

**Usage**

    console_message.location

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#console-message-location-return)
    *   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        URL of the resource.
        
    *   `lineNumber` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        0-based line number in the resource.
        
    *   `columnNumber` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        0-based column number in the resource.
        

* * *

### page[​](#console-message-page "Direct link to page")

Added in: v1.34 consoleMessage.page

The page that produced this console message, if any.

**Usage**

    console_message.page

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Page](/python/docs/api/class-page "Page")[#](#console-message-page-return)

* * *

### text[​](#console-message-text "Direct link to text")

Added before v1.9 consoleMessage.text

The text of the console message.

**Usage**

    console_message.text

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#console-message-text-return)

* * *

### type[​](#console-message-type "Direct link to type")

Added before v1.9 consoleMessage.type

One of the following values: `'log'`, `'debug'`, `'info'`, `'error'`, `'warning'`, `'dir'`, `'dirxml'`, `'table'`, `'trace'`, `'clear'`, `'startGroup'`, `'startGroupCollapsed'`, `'endGroup'`, `'assert'`, `'profile'`, `'profileEnd'`, `'count'`, `'timeEnd'`.

**Usage**

    console_message.type

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#console-message-type-return)

# Dialog

Dialog
======

[Dialog](/python/docs/api/class-dialog "Dialog") objects are dispatched by page via the [page.on("dialog")](/python/docs/api/class-page#page-event-dialog) event.

An example of using `Dialog` class:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef handle_dialog(dialog):    print(dialog.message)    dialog.dismiss()def run(playwright: Playwright):    chromium = playwright.chromium    browser = chromium.launch()    page = browser.new_page()    page.on("dialog", handle_dialog)    page.evaluate("alert('1')")    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def handle_dialog(dialog):    print(dialog.message)    await dialog.dismiss()async def run(playwright: Playwright):    chromium = playwright.chromium    browser = await chromium.launch()    page = await browser.new_page()    page.on("dialog", handle_dialog)    page.evaluate("alert('1')")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

note

Dialogs are dismissed automatically, unless there is a [page.on("dialog")](/python/docs/api/class-page#page-event-dialog) listener. When listener is present, it **must** either [dialog.accept()](/python/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/python/docs/api/class-dialog#dialog-dismiss) the dialog - otherwise the page will [freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking) waiting for the dialog, and actions like click will never finish.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### accept[​](#dialog-accept "Direct link to accept")

Added before v1.9 dialog.accept

Returns when the dialog has been accepted.

**Usage**

    dialog.accept()dialog.accept(**kwargs)

**Arguments**

*   `prompt_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#dialog-accept-option-prompt-text)
    
    A text to enter in prompt. Does not cause any effects if the dialog's `type` is not prompt. Optional.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#dialog-accept-return)

* * *

### dismiss[​](#dialog-dismiss "Direct link to dismiss")

Added before v1.9 dialog.dismiss

Returns when the dialog has been dismissed.

**Usage**

    dialog.dismiss()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#dialog-dismiss-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### default\_value[​](#dialog-default-value "Direct link to default_value")

Added before v1.9 dialog.default\_value

If dialog is prompt, returns default prompt value. Otherwise, returns empty string.

**Usage**

    dialog.default_value

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#dialog-default-value-return)

* * *

### message[​](#dialog-message "Direct link to message")

Added before v1.9 dialog.message

A message displayed in the dialog.

**Usage**

    dialog.message

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#dialog-message-return)

* * *

### page[​](#dialog-page "Direct link to page")

Added in: v1.34 dialog.page

The page that initiated this dialog, if available.

**Usage**

    dialog.page

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Page](/python/docs/api/class-page "Page")[#](#dialog-page-return)

* * *

### type[​](#dialog-type "Direct link to type")

Added before v1.9 dialog.type

Returns dialog's type, can be one of `alert`, `beforeunload`, `confirm` or `prompt`.

**Usage**

    dialog.type

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#dialog-type-return)

# Download

Download
========

[Download](/python/docs/api/class-download "Download") objects are dispatched by page via the [page.on("download")](/python/docs/api/class-page#page-event-download) event.

All the downloaded files belonging to the browser context are deleted when the browser context is closed.

Download event is emitted once the download starts. Download path becomes available once download completes.

*   Sync
*   Async

    # Start waiting for the downloadwith page.expect_download() as download_info:    # Perform the action that initiates download    page.get_by_text("Download file").click()download = download_info.value# Wait for the download process to complete and save the downloaded file somewheredownload.save_as("/path/to/save/at/" + download.suggested_filename)

    # Start waiting for the downloadasync with page.expect_download() as download_info:    # Perform the action that initiates download    await page.get_by_text("Download file").click()download = await download_info.value# Wait for the download process to complete and save the downloaded file somewhereawait download.save_as("/path/to/save/at/" + download.suggested_filename)

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### cancel[​](#download-cancel "Direct link to cancel")

Added in: v1.13 download.cancel

Cancels a download. Will not fail if the download is already finished or canceled. Upon successful cancellations, `download.failure()` would resolve to `'canceled'`.

**Usage**

    download.cancel()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#download-cancel-return)

* * *

### delete[​](#download-delete "Direct link to delete")

Added before v1.9 download.delete

Deletes the downloaded file. Will wait for the download to finish if necessary.

**Usage**

    download.delete()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#download-delete-return)

* * *

### failure[​](#download-failure "Direct link to failure")

Added before v1.9 download.failure

Returns download error if any. Will wait for the download to finish if necessary.

**Usage**

    download.failure()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#download-failure-return)

* * *

### path[​](#download-path "Direct link to path")

Added before v1.9 download.path

Returns path to the downloaded file for a successful download, or throws for a failed/canceled download. The method will wait for the download to finish if necessary. The method throws when connected remotely.

Note that the download's file name is a random GUID, use [download.suggested\_filename](/python/docs/api/class-download#download-suggested-filename) to get suggested file name.

**Usage**

    download.path()

**Returns**

*   [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")[#](#download-path-return)

* * *

### save\_as[​](#download-save-as "Direct link to save_as")

Added before v1.9 download.save\_as

Copy the download to a user-specified path. It is safe to call this method while the download is still in progress. Will wait for the download to finish if necessary.

**Usage**

*   Sync
*   Async

    download.save_as("/path/to/save/at/" + download.suggested_filename)

    await download.save_as("/path/to/save/at/" + download.suggested_filename)

**Arguments**

*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\][#](#download-save-as-option-path)
    
    Path where the download should be copied.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#download-save-as-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### page[​](#download-page "Direct link to page")

Added in: v1.12 download.page

Get the page that the download belongs to.

**Usage**

    download.page

**Returns**

*   [Page](/python/docs/api/class-page "Page")[#](#download-page-return)

* * *

### suggested\_filename[​](#download-suggested-filename "Direct link to suggested_filename")

Added before v1.9 download.suggested\_filename

Returns suggested filename for this download. It is typically computed by the browser from the [`Content-Disposition`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition) response header or the `download` attribute. See the spec on [whatwg](https://html.spec.whatwg.org/#downloading-resources). Different browsers can use different logic for computing it.

**Usage**

    download.suggested_filename

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#download-suggested-filename-return)

* * *

### url[​](#download-url "Direct link to url")

Added before v1.9 download.url

Returns downloaded url.

**Usage**

    download.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#download-url-return)

# ElementHandle

ElementHandle
=============

*   extends: [JSHandle](/python/docs/api/class-jshandle "JSHandle")

ElementHandle represents an in-page DOM element. ElementHandles can be created with the [page.query\_selector()](/python/docs/api/class-page#page-query-selector) method.

Discouraged

The use of ElementHandle is discouraged, use [Locator](/python/docs/api/class-locator "Locator") objects and web-first assertions instead.

*   Sync
*   Async

    href_element = page.query_selector("a")href_element.click()

    href_element = await page.query_selector("a")await href_element.click()

ElementHandle prevents DOM element from garbage collection unless the handle is disposed with [js\_handle.dispose()](/python/docs/api/class-jshandle#js-handle-dispose). ElementHandles are auto-disposed when their origin frame gets navigated.

ElementHandle instances can be used as an argument in [page.eval\_on\_selector()](/python/docs/api/class-page#page-eval-on-selector) and [page.evaluate()](/python/docs/api/class-page#page-evaluate) methods.

The difference between the [Locator](/python/docs/api/class-locator "Locator") and ElementHandle is that the ElementHandle points to a particular element, while [Locator](/python/docs/api/class-locator "Locator") captures the logic of how to retrieve an element.

In the example below, handle points to a particular DOM element on page. If that element changes text or is used by React to render an entirely different component, handle is still pointing to that very DOM element. This can lead to unexpected behaviors.

*   Sync
*   Async

    handle = page.query_selector("text=Submit")handle.hover()handle.click()

    handle = await page.query_selector("text=Submit")await handle.hover()await handle.click()

With the locator, every time the `element` is used, up-to-date DOM element is located in the page using the selector. So in the snippet below, underlying DOM element is going to be located twice.

*   Sync
*   Async

    locator = page.get_by_text("Submit")locator.hover()locator.click()

    locator = page.get_by_text("Submit")await locator.hover()await locator.click()

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### bounding\_box[​](#element-handle-bounding-box "Direct link to bounding_box")

Added before v1.9 elementHandle.bounding\_box

This method returns the bounding box of the element, or `null` if the element is not visible. The bounding box is calculated relative to the main frame viewport - which is usually the same as the browser window.

Scrolling affects the returned bounding box, similarly to [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect). That means `x` and/or `y` may be negative.

Elements from child frames return the bounding box relative to the main frame, unlike the [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).

Assuming the page is static, it is safe to use bounding box coordinates to perform input. For example, the following snippet should click the center of the element.

**Usage**

*   Sync
*   Async

    box = element_handle.bounding_box()page.mouse.click(box["x"] + box["width"] / 2, box["y"] + box["height"] / 2)

    box = await element_handle.bounding_box()await page.mouse.click(box["x"] + box["width"] / 2, box["y"] + box["height"] / 2)

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#element-handle-bounding-box-return)
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the x coordinate of the element in pixels.
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the y coordinate of the element in pixels.
        
    *   `width` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the width of the element in pixels.
        
    *   `height` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the height of the element in pixels.
        

* * *

### content\_frame[​](#element-handle-content-frame "Direct link to content_frame")

Added before v1.9 elementHandle.content\_frame

Returns the content frame for element handles referencing iframe nodes, or `null` otherwise

**Usage**

    element_handle.content_frame()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Frame](/python/docs/api/class-frame "Frame")[#](#element-handle-content-frame-return)

* * *

### owner\_frame[​](#element-handle-owner-frame "Direct link to owner_frame")

Added before v1.9 elementHandle.owner\_frame

Returns the frame containing the given element.

**Usage**

    element_handle.owner_frame()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Frame](/python/docs/api/class-frame "Frame")[#](#element-handle-owner-frame-return)

* * *

### wait\_for\_element\_state[​](#element-handle-wait-for-element-state "Direct link to wait_for_element_state")

Added before v1.9 elementHandle.wait\_for\_element\_state

Returns when the element satisfies the [state](/python/docs/api/class-elementhandle#element-handle-wait-for-element-state-option-state).

Depending on the [state](/python/docs/api/class-elementhandle#element-handle-wait-for-element-state-option-state) parameter, this method waits for one of the [actionability](/python/docs/actionability) checks to pass. This method throws when the element is detached while waiting, unless waiting for the `"hidden"` state.

*   `"visible"` Wait until the element is [visible](/python/docs/actionability#visible).
*   `"hidden"` Wait until the element is [not visible](/python/docs/actionability#visible) or not attached. Note that waiting for hidden does not throw when the element detaches.
*   `"stable"` Wait until the element is both [visible](/python/docs/actionability#visible) and [stable](/python/docs/actionability#stable).
*   `"enabled"` Wait until the element is [enabled](/python/docs/actionability#enabled).
*   `"disabled"` Wait until the element is [not enabled](/python/docs/actionability#enabled).
*   `"editable"` Wait until the element is [editable](/python/docs/actionability#editable).

If the element does not satisfy the condition for the [timeout](/python/docs/api/class-elementhandle#element-handle-wait-for-element-state-option-timeout) milliseconds, this method will throw.

**Usage**

    element_handle.wait_for_element_state(state)element_handle.wait_for_element_state(state, **kwargs)

**Arguments**

*   `state` "visible" | "hidden" | "stable" | "enabled" | "disabled" | "editable"[#](#element-handle-wait-for-element-state-option-state)
    
    A state to wait for, see below for more details.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-wait-for-element-state-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-wait-for-element-state-return)

* * *

Deprecated[​](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### check[​](#element-handle-check "Direct link to check")

Added before v1.9 elementHandle.check

Discouraged

Use locator-based [locator.check()](/python/docs/api/class-locator#locator-check) instead. Read more about [locators](/python/docs/locators).

This method checks the element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
2.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-elementhandle#element-handle-check-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now checked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-check-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    element_handle.check()element_handle.check(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-check-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-check-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.11[#](#element-handle-check-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-check-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#element-handle-check-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-check-return)

* * *

### click[​](#element-handle-click "Direct link to click")

Added before v1.9 elementHandle.click

Discouraged

Use locator-based [locator.click()](/python/docs/api/class-locator#locator-click) instead. Read more about [locators](/python/docs/locators).

This method clicks the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-elementhandle#element-handle-click-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/python/docs/api/class-elementhandle#element-handle-click-option-position).
4.  Wait for initiated navigations to either succeed or fail, unless [no\_wait\_after](/python/docs/api/class-elementhandle#element-handle-click-option-no-wait-after) option is set.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-click-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    element_handle.click()element_handle.click(**kwargs)

**Arguments**

*   `button` "left" | "right" | "middle" _(optional)_[#](#element-handle-click-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#element-handle-click-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-click-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-click-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#element-handle-click-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-click-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#element-handle-click-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-click-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#element-handle-click-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-click-return)

* * *

### dblclick[​](#element-handle-dblclick "Direct link to dblclick")

Added before v1.9 elementHandle.dblclick

Discouraged

Use locator-based [locator.dblclick()](/python/docs/api/class-locator#locator-dblclick) instead. Read more about [locators](/python/docs/locators).

This method double clicks the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-elementhandle#element-handle-dblclick-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/python/docs/api/class-elementhandle#element-handle-dblclick-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-dblclick-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`elementHandle.dblclick()` dispatches two `click` events and a single `dblclick` event.

**Usage**

    element_handle.dblclick()element_handle.dblclick(**kwargs)

**Arguments**

*   `button` "left" | "right" | "middle" _(optional)_[#](#element-handle-dblclick-option-button)
    
    Defaults to `left`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-dblclick-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-dblclick-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#element-handle-dblclick-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-dblclick-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#element-handle-dblclick-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-dblclick-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#element-handle-dblclick-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-dblclick-return)

* * *

### dispatch\_event[​](#element-handle-dispatch-event "Direct link to dispatch_event")

Added before v1.9 elementHandle.dispatch\_event

Discouraged

Use locator-based [locator.dispatch\_event()](/python/docs/api/class-locator#locator-dispatch-event) instead. Read more about [locators](/python/docs/locators).

The snippet below dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

**Usage**

*   Sync
*   Async

    element_handle.dispatch_event("click")

    await element_handle.dispatch_event("click")

Under the hood, it creates an instance of an event based on the given [type](/python/docs/api/class-elementhandle#element-handle-dispatch-event-option-type), initializes it with [event\_init](/python/docs/api/class-elementhandle#element-handle-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [event\_init](/python/docs/api/class-elementhandle#element-handle-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify `JSHandle` as the property value if you want live objects to be passed into the event:

*   Sync
*   Async

    # note you can only create data_transfer in chromium and firefoxdata_transfer = page.evaluate_handle("new DataTransfer()")element_handle.dispatch_event("#source", "dragstart", {"dataTransfer": data_transfer})

    # note you can only create data_transfer in chromium and firefoxdata_transfer = await page.evaluate_handle("new DataTransfer()")await element_handle.dispatch_event("#source", "dragstart", {"dataTransfer": data_transfer})

**Arguments**

*   `type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `event_init` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#element-handle-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-dispatch-event-return)

* * *

### eval\_on\_selector[​](#element-handle-eval-on-selector "Direct link to eval_on_selector")

Added in: v1.9 elementHandle.eval\_on\_selector

Discouraged

This method does not wait for the element to pass actionability checks and therefore can lead to the flaky tests. Use [locator.evaluate()](/python/docs/api/class-locator#locator-evaluate), other [Locator](/python/docs/api/class-locator "Locator") helper methods or web-first assertions instead.

Returns the return value of [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression).

The method finds an element matching the specified selector in the `ElementHandle`s subtree and passes it as a first argument to [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression). If no elements match the selector, the method throws an error.

If [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [element\_handle.eval\_on\_selector()](/python/docs/api/class-elementhandle#element-handle-eval-on-selector) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    tweet_handle = page.query_selector(".tweet")assert tweet_handle.eval_on_selector(".like", "node => node.innerText") == "100"assert tweet_handle.eval_on_selector(".retweets", "node => node.innerText") == "10"

    tweet_handle = await page.query_selector(".tweet")assert await tweet_handle.eval_on_selector(".like", "node => node.innerText") == "100"assert await tweet_handle.eval_on_selector(".retweets", "node => node.innerText") == "10"

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-eval-on-selector-option-selector)
    
    A selector to query for.
    
*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-eval-on-selector-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#element-handle-eval-on-selector-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#element-handle-eval-on-selector-return)

* * *

### eval\_on\_selector\_all[​](#element-handle-eval-on-selector-all "Direct link to eval_on_selector_all")

Added in: v1.9 elementHandle.eval\_on\_selector\_all

Discouraged

In most cases, [locator.evaluate\_all()](/python/docs/api/class-locator#locator-evaluate-all), other [Locator](/python/docs/api/class-locator "Locator") helper methods and web-first assertions do a better job.

Returns the return value of [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression).

The method finds all elements matching the specified selector in the `ElementHandle`'s subtree and passes an array of matched elements as a first argument to [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression).

If [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [element\_handle.eval\_on\_selector\_all()](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-all) would wait for the promise to resolve and return its value.

**Usage**

    <div class="feed">  <div class="tweet">Hello!</div>  <div class="tweet">Hi!</div></div>

*   Sync
*   Async

    feed_handle = page.query_selector(".feed")assert feed_handle.eval_on_selector_all(".tweet", "nodes => nodes.map(n => n.innerText)") == ["hello!", "hi!"]

    feed_handle = await page.query_selector(".feed")assert await feed_handle.eval_on_selector_all(".tweet", "nodes => nodes.map(n => n.innerText)") == ["hello!", "hi!"]

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-eval-on-selector-all-option-selector)
    
    A selector to query for.
    
*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-eval-on-selector-all-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#element-handle-eval-on-selector-all-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#element-handle-eval-on-selector-all-return)

* * *

### fill[​](#element-handle-fill "Direct link to fill")

Added before v1.9 elementHandle.fill

Discouraged

Use locator-based [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. Read more about [locators](/python/docs/locators).

This method waits for [actionability](/python/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

**Usage**

    element_handle.fill(value)element_handle.fill(value, **kwargs)

**Arguments**

*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-fill-option-value)
    
    Value to set for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#element-handle-fill-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-fill-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-fill-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-fill-return)

* * *

### focus[​](#element-handle-focus "Direct link to focus")

Added before v1.9 elementHandle.focus

Discouraged

Use locator-based [locator.focus()](/python/docs/api/class-locator#locator-focus) instead. Read more about [locators](/python/docs/locators).

Calls [focus](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus) on the element.

**Usage**

    element_handle.focus()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-focus-return)

* * *

### get\_attribute[​](#element-handle-get-attribute "Direct link to get_attribute")

Added before v1.9 elementHandle.get\_attribute

Discouraged

Use locator-based [locator.get\_attribute()](/python/docs/api/class-locator#locator-get-attribute) instead. Read more about [locators](/python/docs/locators).

Returns element attribute value.

**Usage**

    element_handle.get_attribute(name)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-get-attribute-option-name)
    
    Attribute name to get the value for.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-get-attribute-return)

* * *

### hover[​](#element-handle-hover "Direct link to hover")

Added before v1.9 elementHandle.hover

Discouraged

Use locator-based [locator.hover()](/python/docs/api/class-locator#locator-hover) instead. Read more about [locators](/python/docs/locators).

This method hovers over the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-elementhandle#element-handle-hover-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/python/docs/api/class-elementhandle#element-handle-hover-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-hover-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    element_handle.hover()element_handle.hover(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-hover-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#element-handle-hover-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#element-handle-hover-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#element-handle-hover-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-hover-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#element-handle-hover-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-hover-return)

* * *

### inner\_html[​](#element-handle-inner-html "Direct link to inner_html")

Added before v1.9 elementHandle.inner\_html

Discouraged

Use locator-based [locator.inner\_html()](/python/docs/api/class-locator#locator-inner-html) instead. Read more about [locators](/python/docs/locators).

Returns the `element.innerHTML`.

**Usage**

    element_handle.inner_html()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-inner-html-return)

* * *

### inner\_text[​](#element-handle-inner-text "Direct link to inner_text")

Added before v1.9 elementHandle.inner\_text

Discouraged

Use locator-based [locator.inner\_text()](/python/docs/api/class-locator#locator-inner-text) instead. Read more about [locators](/python/docs/locators).

Returns the `element.innerText`.

**Usage**

    element_handle.inner_text()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-inner-text-return)

* * *

### input\_value[​](#element-handle-input-value "Direct link to input_value")

Added in: v1.13 elementHandle.input\_value

Discouraged

Use locator-based [locator.input\_value()](/python/docs/api/class-locator#locator-input-value) instead. Read more about [locators](/python/docs/locators).

Returns `input.value` for the selected `<input>` or `<textarea>` or `<select>` element.

Throws for non-input elements. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

**Usage**

    element_handle.input_value()element_handle.input_value(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-input-value-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-input-value-return)

* * *

### is\_checked[​](#element-handle-is-checked "Direct link to is_checked")

Added before v1.9 elementHandle.is\_checked

Discouraged

Use locator-based [locator.is\_checked()](/python/docs/api/class-locator#locator-is-checked) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

**Usage**

    element_handle.is_checked()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-is-checked-return)

* * *

### is\_disabled[​](#element-handle-is-disabled "Direct link to is_disabled")

Added before v1.9 elementHandle.is\_disabled

Discouraged

Use locator-based [locator.is\_disabled()](/python/docs/api/class-locator#locator-is-disabled) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is disabled, the opposite of [enabled](/python/docs/actionability#enabled).

**Usage**

    element_handle.is_disabled()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-is-disabled-return)

* * *

### is\_editable[​](#element-handle-is-editable "Direct link to is_editable")

Added before v1.9 elementHandle.is\_editable

Discouraged

Use locator-based [locator.is\_editable()](/python/docs/api/class-locator#locator-is-editable) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [editable](/python/docs/actionability#editable).

**Usage**

    element_handle.is_editable()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-is-editable-return)

* * *

### is\_enabled[​](#element-handle-is-enabled "Direct link to is_enabled")

Added before v1.9 elementHandle.is\_enabled

Discouraged

Use locator-based [locator.is\_enabled()](/python/docs/api/class-locator#locator-is-enabled) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [enabled](/python/docs/actionability#enabled).

**Usage**

    element_handle.is_enabled()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-is-enabled-return)

* * *

### is\_hidden[​](#element-handle-is-hidden "Direct link to is_hidden")

Added before v1.9 elementHandle.is\_hidden

Discouraged

Use locator-based [locator.is\_hidden()](/python/docs/api/class-locator#locator-is-hidden) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is hidden, the opposite of [visible](/python/docs/actionability#visible).

**Usage**

    element_handle.is_hidden()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-is-hidden-return)

* * *

### is\_visible[​](#element-handle-is-visible "Direct link to is_visible")

Added before v1.9 elementHandle.is\_visible

Discouraged

Use locator-based [locator.is\_visible()](/python/docs/api/class-locator#locator-is-visible) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [visible](/python/docs/actionability#visible).

**Usage**

    element_handle.is_visible()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-is-visible-return)

* * *

### press[​](#element-handle-press "Direct link to press")

Added before v1.9 elementHandle.press

Discouraged

Use locator-based [locator.press()](/python/docs/api/class-locator#locator-press) instead. Read more about [locators](/python/docs/locators).

Focuses the element, and then uses [keyboard.down()](/python/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up).

[key](/python/docs/api/class-elementhandle#element-handle-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/python/docs/api/class-elementhandle#element-handle-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`.

Holding down `Shift` will type the text that corresponds to the [key](/python/docs/api/class-elementhandle#element-handle-press-option-key) in the upper case.

If [key](/python/docs/api/class-elementhandle#element-handle-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

    element_handle.press(key)element_handle.press(key, **kwargs)

**Arguments**

*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-press-option-delay)
    
    Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-press-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-press-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-press-return)

* * *

### query\_selector[​](#element-handle-query-selector "Direct link to query_selector")

Added in: v1.9 elementHandle.query\_selector

Discouraged

Use locator-based [page.locator()](/python/docs/api/class-page#page-locator) instead. Read more about [locators](/python/docs/locators).

The method finds an element matching the specified selector in the `ElementHandle`'s subtree. If no elements match the selector, returns `null`.

**Usage**

    element_handle.query_selector(selector)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-query-selector-option-selector)
    
    A selector to query for.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#element-handle-query-selector-return)

* * *

### query\_selector\_all[​](#element-handle-query-selector-all "Direct link to query_selector_all")

Added in: v1.9 elementHandle.query\_selector\_all

Discouraged

Use locator-based [page.locator()](/python/docs/api/class-page#page-locator) instead. Read more about [locators](/python/docs/locators).

The method finds all elements matching the specified selector in the `ElementHandle`s subtree. If no elements match the selector, returns empty array.

**Usage**

    element_handle.query_selector_all(selector)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-query-selector-all-option-selector)
    
    A selector to query for.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\][#](#element-handle-query-selector-all-return)

* * *

### screenshot[​](#element-handle-screenshot "Direct link to screenshot")

Added before v1.9 elementHandle.screenshot

Discouraged

Use locator-based [locator.screenshot()](/python/docs/api/class-locator#locator-screenshot) instead. Read more about [locators](/python/docs/locators).

This method captures a screenshot of the page, clipped to the size and position of this particular element. If the element is covered by other elements, it will not be actually visible on the screenshot. If the element is a scrollable container, only the currently scrolled content will be visible on the screenshot.

This method waits for the [actionability](/python/docs/actionability) checks, then scrolls element into view before taking a screenshot. If the element is detached from DOM, the method throws an error.

Returns the buffer with the captured screenshot.

**Usage**

    element_handle.screenshot()element_handle.screenshot(**kwargs)

**Arguments**

*   `animations` "disabled" | "allow" _(optional)_[#](#element-handle-screenshot-option-animations)
    
    When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
    
    *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
    *   infinite animations are canceled to initial state, and then played over after the screenshot.
    
    Defaults to `"allow"` that leaves animations untouched.
    
*   `caret` "hide" | "initial" _(optional)_[#](#element-handle-screenshot-option-caret)
    
    When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
    
*   `mask` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Locator](/python/docs/api/class-locator "Locator")\] _(optional)_[#](#element-handle-screenshot-option-mask)
    
    Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [mask\_color](/python/docs/api/class-elementhandle#element-handle-screenshot-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/python/docs/locators#matching-only-visible-elements) to disable that.
    
*   `mask_color` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.35[#](#element-handle-screenshot-option-mask-color)
    
    Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
    
*   `omit_background` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-screenshot-option-omit-background)
    
    Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#element-handle-screenshot-option-path)
    
    The file path to save the image to. The screenshot type will be inferred from file extension. If [path](/python/docs/api/class-elementhandle#element-handle-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
    
*   `quality` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#element-handle-screenshot-option-quality)
    
    The quality of the image, between 0-100. Not applicable to `png` images.
    
*   `scale` "css" | "device" _(optional)_[#](#element-handle-screenshot-option-scale)
    
    When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
    
    Defaults to `"device"`.
    
*   `style` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.41[#](#element-handle-screenshot-option-style)
    
    Text of the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-screenshot-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `type` "png" | "jpeg" _(optional)_[#](#element-handle-screenshot-option-type)
    
    Specify screenshot type, defaults to `png`.
    

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#element-handle-screenshot-return)

* * *

### scroll\_into\_view\_if\_needed[​](#element-handle-scroll-into-view-if-needed "Direct link to scroll_into_view_if_needed")

Added before v1.9 elementHandle.scroll\_into\_view\_if\_needed

Discouraged

Use locator-based [locator.scroll\_into\_view\_if\_needed()](/python/docs/api/class-locator#locator-scroll-into-view-if-needed) instead. Read more about [locators](/python/docs/locators).

This method waits for [actionability](/python/docs/actionability) checks, then tries to scroll element into view, unless it is completely visible as defined by [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)'s `ratio`.

Throws when `elementHandle` does not point to an element [connected](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected) to a Document or a ShadowRoot.

See [scrolling](/python/docs/input#scrolling) for alternative ways to scroll.

**Usage**

    element_handle.scroll_into_view_if_needed()element_handle.scroll_into_view_if_needed(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-scroll-into-view-if-needed-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-scroll-into-view-if-needed-return)

* * *

### select\_option[​](#element-handle-select-option "Direct link to select_option")

Added before v1.9 elementHandle.select\_option

Discouraged

Use locator-based [locator.select\_option()](/python/docs/api/class-locator#locator-select-option) instead. Read more about [locators](/python/docs/locators).

This method waits for [actionability](/python/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

**Usage**

*   Sync
*   Async

    # Single selection matching the value or labelhandle.select_option("blue")# single selection matching both the labelhandle.select_option(label="blue")# multiple selectionhandle.select_option(value=["red", "green", "blue"])

    # Single selection matching the value or labelawait handle.select_option("blue")# single selection matching the labelawait handle.select_option(label="blue")# multiple selectionawait handle.select_option(value=["red", "green", "blue"])

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#element-handle-select-option-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-select-option-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-select-option-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `element` [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\] _(optional)_[#](#element-handle-select-option-option-element)
    
    Option elements to select. Optional.
    
*   `index` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")\] _(optional)_[#](#element-handle-select-option-option-index)
    
    Options to select by index. Optional.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#element-handle-select-option-option-value)
    
    Options to select by value. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    
*   `label` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#element-handle-select-option-option-label)
    
    Options to select by label. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#element-handle-select-option-return)

* * *

### select\_text[​](#element-handle-select-text "Direct link to select_text")

Added before v1.9 elementHandle.select\_text

Discouraged

Use locator-based [locator.select\_text()](/python/docs/api/class-locator#locator-select-text) instead. Read more about [locators](/python/docs/locators).

This method waits for [actionability](/python/docs/actionability) checks, then focuses the element and selects all its text content.

If the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), focuses and selects text in the control instead.

**Usage**

    element_handle.select_text()element_handle.select_text(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#element-handle-select-text-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-select-text-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-select-text-return)

* * *

### set\_checked[​](#element-handle-set-checked "Direct link to set_checked")

Added in: v1.15 elementHandle.set\_checked

Discouraged

Use locator-based [locator.set\_checked()](/python/docs/api/class-locator#locator-set-checked) instead. Read more about [locators](/python/docs/locators).

This method checks or unchecks an element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws.
2.  If the element already has the right checked state, this method returns immediately.
3.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-elementhandle#element-handle-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-set-checked-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    element_handle.set_checked(checked)element_handle.set_checked(checked, **kwargs)

**Arguments**

*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#element-handle-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-set-checked-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-set-checked-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#element-handle-set-checked-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-set-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-set-checked-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-set-checked-return)

* * *

### set\_input\_files[​](#element-handle-set-input-files "Direct link to set_input_files")

Added before v1.9 elementHandle.set\_input\_files

Discouraged

Use locator-based [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) instead. Read more about [locators](/python/docs/locators).

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files. For inputs with a `[webkitdirectory]` attribute, only a single directory path is supported.

This method expects [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

**Usage**

    element_handle.set_input_files(files)element_handle.set_input_files(files, **kwargs)

**Arguments**

*   `files` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\]\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#element-handle-set-input-files-option-files)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-set-input-files-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-set-input-files-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-set-input-files-return)

* * *

### tap[​](#element-handle-tap "Direct link to tap")

Added before v1.9 elementHandle.tap

Discouraged

Use locator-based [locator.tap()](/python/docs/api/class-locator#locator-tap) instead. Read more about [locators](/python/docs/locators).

This method taps the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-elementhandle#element-handle-tap-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.touchscreen](/python/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/python/docs/api/class-elementhandle#element-handle-tap-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-tap-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`elementHandle.tap()` requires that the `hasTouch` option of the browser context be set to true.

**Usage**

    element_handle.tap()element_handle.tap(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-tap-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#element-handle-tap-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-tap-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#element-handle-tap-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-tap-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#element-handle-tap-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-tap-return)

* * *

### text\_content[​](#element-handle-text-content "Direct link to text_content")

Added before v1.9 elementHandle.text\_content

Discouraged

Use locator-based [locator.text\_content()](/python/docs/api/class-locator#locator-text-content) instead. Read more about [locators](/python/docs/locators).

Returns the `node.textContent`.

**Usage**

    element_handle.text_content()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-text-content-return)

* * *

### type[​](#element-handle-type "Direct link to type")

Added before v1.9 elementHandle.type

Deprecated

In most cases, you should use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

Focuses the element, and then sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [element\_handle.press()](/python/docs/api/class-elementhandle#element-handle-press).

**Usage**

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-type-option-text)
    
    A text to type into a focused element.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-type-option-delay)
    
    Time to wait between key presses in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-type-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-type-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-type-return)

* * *

### uncheck[​](#element-handle-uncheck "Direct link to uncheck")

Added before v1.9 elementHandle.uncheck

Discouraged

Use locator-based [locator.uncheck()](/python/docs/api/class-locator#locator-uncheck) instead. Read more about [locators](/python/docs/locators).

This method checks the element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
2.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-elementhandle#element-handle-uncheck-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now unchecked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-elementhandle#element-handle-uncheck-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    element_handle.uncheck()element_handle.uncheck(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-uncheck-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#element-handle-uncheck-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.11[#](#element-handle-uncheck-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-uncheck-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#element-handle-uncheck-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#element-handle-uncheck-return)

* * *

### wait\_for\_selector[​](#element-handle-wait-for-selector "Direct link to wait_for_selector")

Added before v1.9 elementHandle.wait\_for\_selector

Discouraged

Use web assertions that assert visibility or a locator-based [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for) instead.

Returns element specified by selector when it satisfies [state](/python/docs/api/class-elementhandle#element-handle-wait-for-selector-option-state) option. Returns `null` if waiting for `hidden` or `detached`.

Wait for the [selector](/python/docs/api/class-elementhandle#element-handle-wait-for-selector-option-selector) relative to the element handle to satisfy [state](/python/docs/api/class-elementhandle#element-handle-wait-for-selector-option-state) option (either appear/disappear from dom, or become visible/hidden). If at the moment of calling the method [selector](/python/docs/api/class-elementhandle#element-handle-wait-for-selector-option-selector) already satisfies the condition, the method will return immediately. If the selector doesn't satisfy the condition for the [timeout](/python/docs/api/class-elementhandle#element-handle-wait-for-selector-option-timeout) milliseconds, the function will throw.

**Usage**

*   Sync
*   Async

    page.set_content("<div><span></span></div>")div = page.query_selector("div")# waiting for the "span" selector relative to the div.span = div.wait_for_selector("span", state="attached")

    await page.set_content("<div><span></span></div>")div = await page.query_selector("div")# waiting for the "span" selector relative to the div.span = await div.wait_for_selector("span", state="attached")

note

This method does not work across navigations, use [page.wait\_for\_selector()](/python/docs/api/class-page#page-wait-for-selector) instead.

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#element-handle-wait-for-selector-option-selector)
    
    A selector to query for.
    
*   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#element-handle-wait-for-selector-option-state)
    
    Defaults to `'visible'`. Can be either:
    
    *   `'attached'` - wait for element to be present in DOM.
    *   `'detached'` - wait for element to not be present in DOM.
    *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
    *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.15[#](#element-handle-wait-for-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#element-handle-wait-for-selector-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#element-handle-wait-for-selector-return)

# Error

Error
=====

*   extends: [Exception](https://docs.python.org/3/library/exceptions.html#Exception "Exception")

Error is raised whenever certain operations are terminated abnormally, e.g. browser closes while [page.evaluate()](/python/docs/api/class-page#page-evaluate) is running. All Playwright exceptions inherit from this class.

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### message[​](#error-message "Direct link to message")

Added in: v1.11 error.message

Message of the error.

**Usage**

    error.message

**Type**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")

* * *

### name[​](#error-name "Direct link to name")

Added in: v1.11 error.name

Name of the error which got thrown inside the browser. Optional.

**Usage**

    error.name

**Type**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")

* * *

### stack[​](#error-stack "Direct link to stack")

Added in: v1.11 error.stack

Stack of the error which got thrown inside the browser. Optional.

**Usage**

    error.stack

**Type**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")

# FileChooser

FileChooser
===========

[FileChooser](/python/docs/api/class-filechooser "FileChooser") objects are dispatched by the page in the [page.on("filechooser")](/python/docs/api/class-page#page-event-file-chooser) event.

*   Sync
*   Async

    with page.expect_file_chooser() as fc_info:    page.get_by_text("Upload file").click()file_chooser = fc_info.valuefile_chooser.set_files("myfile.pdf")

    async with page.expect_file_chooser() as fc_info:    await page.get_by_text("Upload file").click()file_chooser = await fc_info.valueawait file_chooser.set_files("myfile.pdf")

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### set\_files[​](#file-chooser-set-files "Direct link to set_files")

Added before v1.9 fileChooser.set\_files

Sets the value of the file input this chooser is associated with. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files.

**Usage**

    file_chooser.set_files(files)file_chooser.set_files(files, **kwargs)

**Arguments**

*   `files` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\]\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#file-chooser-set-files-option-files)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#file-chooser-set-files-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#file-chooser-set-files-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#file-chooser-set-files-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### element[​](#file-chooser-element "Direct link to element")

Added before v1.9 fileChooser.element

Returns input element associated with this file chooser.

**Usage**

    file_chooser.element

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#file-chooser-element-return)

* * *

### is\_multiple[​](#file-chooser-is-multiple "Direct link to is_multiple")

Added before v1.9 fileChooser.is\_multiple

Returns whether this file chooser accepts multiple files.

**Usage**

    file_chooser.is_multiple()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#file-chooser-is-multiple-return)

* * *

### page[​](#file-chooser-page "Direct link to page")

Added before v1.9 fileChooser.page

Returns page this file chooser belongs to.

**Usage**

    file_chooser.page

**Returns**

*   [Page](/python/docs/api/class-page "Page")[#](#file-chooser-page-return)

# Frame

Frame
=====

At every point of time, page exposes its current frame tree via the [page.main\_frame](/python/docs/api/class-page#page-main-frame) and [frame.child\_frames](/python/docs/api/class-frame#frame-child-frames) methods.

[Frame](/python/docs/api/class-frame "Frame") object's lifecycle is controlled by three events, dispatched on the page object:

*   [page.on("frameattached")](/python/docs/api/class-page#page-event-frame-attached) - fired when the frame gets attached to the page. A Frame can be attached to the page only once.
*   [page.on("framenavigated")](/python/docs/api/class-page#page-event-frame-navigated) - fired when the frame commits navigation to a different URL.
*   [page.on("framedetached")](/python/docs/api/class-page#page-event-frame-detached) - fired when the frame gets detached from the page. A Frame can be detached from the page only once.

An example of dumping frame tree:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    firefox = playwright.firefox    browser = firefox.launch()    page = browser.new_page()    page.goto("https://www.theverge.com")    dump_frame_tree(page.main_frame, "")    browser.close()def dump_frame_tree(frame, indent):    print(indent + frame.name + '@' + frame.url)    for child in frame.child_frames:        dump_frame_tree(child, indent + "    ")with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    firefox = playwright.firefox    browser = await firefox.launch()    page = await browser.new_page()    await page.goto("https://www.theverge.com")    dump_frame_tree(page.main_frame, "")    await browser.close()def dump_frame_tree(frame, indent):    print(indent + frame.name + '@' + frame.url)    for child in frame.child_frames:        dump_frame_tree(child, indent + "    ")async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### add\_script\_tag[​](#frame-add-script-tag "Direct link to add_script_tag")

Added before v1.9 frame.add\_script\_tag

Returns the added tag when the script's onload fires or when the script content was injected into frame.

Adds a `<script>` tag into the page with the desired url or content.

**Usage**

    frame.add_script_tag()frame.add_script_tag(**kwargs)

**Arguments**

*   `content` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#frame-add-script-tag-option-content)
    
    Raw JavaScript content to be injected into frame.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#frame-add-script-tag-option-path)
    
    Path to the JavaScript file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#frame-add-script-tag-option-type)
    
    Script type. Use 'module' in order to load a JavaScript ES6 module. See [script](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) for more details.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#frame-add-script-tag-option-url)
    
    URL of a script to be added.
    

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#frame-add-script-tag-return)

* * *

### add\_style\_tag[​](#frame-add-style-tag "Direct link to add_style_tag")

Added before v1.9 frame.add\_style\_tag

Returns the added tag when the stylesheet's onload fires or when the CSS content was injected into frame.

Adds a `<link rel="stylesheet">` tag into the page with the desired url or a `<style type="text/css">` tag with the content.

**Usage**

    frame.add_style_tag()frame.add_style_tag(**kwargs)

**Arguments**

*   `content` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#frame-add-style-tag-option-content)
    
    Raw CSS content to be injected into frame.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#frame-add-style-tag-option-path)
    
    Path to the CSS file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#frame-add-style-tag-option-url)
    
    URL of the `<link>` tag.
    

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#frame-add-style-tag-return)

* * *

### content[​](#frame-content "Direct link to content")

Added before v1.9 frame.content

Gets the full HTML contents of the frame, including the doctype.

**Usage**

    frame.content()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-content-return)

* * *

### drag\_and\_drop[​](#frame-drag-and-drop "Direct link to drag_and_drop")

Added in: v1.13 frame.drag\_and\_drop

**Usage**

    frame.drag_and_drop(source, target)frame.drag_and_drop(source, target, **kwargs)

**Arguments**

*   `source` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-drag-and-drop-option-source)
    
    A selector to search for an element to drag. If there are multiple elements satisfying the selector, the first will be used.
    
*   `target` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-drag-and-drop-option-target)
    
    A selector to search for an element to drop onto. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-drag-and-drop-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-drag-and-drop-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `source_position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.14[#](#frame-drag-and-drop-option-source-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-drag-and-drop-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `target_position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.14[#](#frame-drag-and-drop-option-target-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-drag-and-drop-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-drag-and-drop-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-drag-and-drop-return)

* * *

### evaluate[​](#frame-evaluate "Direct link to evaluate")

Added before v1.9 frame.evaluate

Returns the return value of [expression](/python/docs/api/class-frame#frame-evaluate-option-expression).

If the function passed to the [frame.evaluate()](/python/docs/api/class-frame#frame-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.evaluate()](/python/docs/api/class-frame#frame-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [frame.evaluate()](/python/docs/api/class-frame#frame-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [frame.evaluate()](/python/docs/api/class-frame#frame-evaluate) returns `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

*   Sync
*   Async

    result = frame.evaluate("([x, y]) => Promise.resolve(x * y)", [7, 8])print(result) # prints "56"

    result = await frame.evaluate("([x, y]) => Promise.resolve(x * y)", [7, 8])print(result) # prints "56"

A string can also be passed in instead of a function.

*   Sync
*   Async

    print(frame.evaluate("1 + 2")) # prints "3"x = 10print(frame.evaluate(f"1 + {x}")) # prints "11"

    print(await frame.evaluate("1 + 2")) # prints "3"x = 10print(await frame.evaluate(f"1 + {x}")) # prints "11"

[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") instances can be passed as an argument to the [frame.evaluate()](/python/docs/api/class-frame#frame-evaluate):

*   Sync
*   Async

    body_handle = frame.evaluate("document.body")html = frame.evaluate("([body, suffix]) => body.innerHTML + suffix", [body_handle, "hello"])body_handle.dispose()

    body_handle = await frame.evaluate("document.body")html = await frame.evaluate("([body, suffix]) => body.innerHTML + suffix", [body_handle, "hello"])await body_handle.dispose()

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-evaluate-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-evaluate-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-frame#frame-evaluate-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#frame-evaluate-return)

* * *

### evaluate\_handle[​](#frame-evaluate-handle "Direct link to evaluate_handle")

Added before v1.9 frame.evaluate\_handle

Returns the return value of [expression](/python/docs/api/class-frame#frame-evaluate-handle-option-expression) as a [JSHandle](/python/docs/api/class-jshandle "JSHandle").

The only difference between [frame.evaluate()](/python/docs/api/class-frame#frame-evaluate) and [frame.evaluate\_handle()](/python/docs/api/class-frame#frame-evaluate-handle) is that [frame.evaluate\_handle()](/python/docs/api/class-frame#frame-evaluate-handle) returns [JSHandle](/python/docs/api/class-jshandle "JSHandle").

If the function, passed to the [frame.evaluate\_handle()](/python/docs/api/class-frame#frame-evaluate-handle), returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.evaluate\_handle()](/python/docs/api/class-frame#frame-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    a_window_handle = frame.evaluate_handle("Promise.resolve(window)")a_window_handle # handle for the window object.

    a_window_handle = await frame.evaluate_handle("Promise.resolve(window)")a_window_handle # handle for the window object.

A string can also be passed in instead of a function.

*   Sync
*   Async

    a_handle = page.evaluate_handle("document") # handle for the "document"

    a_handle = await page.evaluate_handle("document") # handle for the "document"

[JSHandle](/python/docs/api/class-jshandle "JSHandle") instances can be passed as an argument to the [frame.evaluate\_handle()](/python/docs/api/class-frame#frame-evaluate-handle):

*   Sync
*   Async

    a_handle = page.evaluate_handle("document.body")result_handle = page.evaluate_handle("body => body.innerHTML", a_handle)print(result_handle.json_value())result_handle.dispose()

    a_handle = await page.evaluate_handle("document.body")result_handle = await page.evaluate_handle("body => body.innerHTML", a_handle)print(await result_handle.json_value())await result_handle.dispose()

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-evaluate-handle-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-evaluate-handle-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-frame#frame-evaluate-handle-option-expression).
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#frame-evaluate-handle-return)

* * *

### frame\_element[​](#frame-frame-element "Direct link to frame_element")

Added before v1.9 frame.frame\_element

Returns the `frame` or `iframe` element handle which corresponds to this frame.

This is an inverse of [element\_handle.content\_frame()](/python/docs/api/class-elementhandle#element-handle-content-frame). Note that returned handle actually belongs to the parent frame.

This method throws an error if the frame has been detached before `frameElement()` returns.

**Usage**

*   Sync
*   Async

    frame_element = frame.frame_element()content_frame = frame_element.content_frame()assert frame == content_frame

    frame_element = await frame.frame_element()content_frame = await frame_element.content_frame()assert frame == content_frame

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#frame-frame-element-return)

* * *

### frame\_locator[​](#frame-frame-locator "Direct link to frame_locator")

Added in: v1.17 frame.frame\_locator

When working with iframes, you can create a frame locator that will enter the iframe and allow selecting elements in that iframe.

**Usage**

Following snippet locates element with text "Submit" in the iframe with id `my-frame`, like `<iframe id="my-frame">`:

*   Sync
*   Async

    locator = frame.frame_locator("#my-iframe").get_by_text("Submit")locator.click()

    locator = frame.frame_locator("#my-iframe").get_by_text("Submit")await locator.click()

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#frame-frame-locator-return)

* * *

### get\_by\_alt\_text[​](#frame-get-by-alt-text "Direct link to get_by_alt_text")

Added in: v1.27 frame.get\_by\_alt\_text

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

*   Sync
*   Async

    page.get_by_alt_text("Playwright logo").click()

    await page.get_by_alt_text("Playwright logo").click()

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-alt-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-alt-text-return)

* * *

### get\_by\_label[​](#frame-get-by-label "Direct link to get_by_label")

Added in: v1.27 frame.get\_by\_label

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

*   Sync
*   Async

    page.get_by_label("Username").fill("john")page.get_by_label("Password").fill("secret")

    await page.get_by_label("Username").fill("john")await page.get_by_label("Password").fill("secret")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-label-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-label-return)

* * *

### get\_by\_placeholder[​](#frame-get-by-placeholder "Direct link to get_by_placeholder")

Added in: v1.27 frame.get\_by\_placeholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

*   Sync
*   Async

    page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

    await page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-placeholder-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-placeholder-return)

* * *

### get\_by\_role[​](#frame-get-by-role "Direct link to get_by_role")

Added in: v1.27 frame.get\_by\_role

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

*   Sync
*   Async

    expect(page.get_by_role("heading", name="Sign up")).to_be_visible()page.get_by_role("checkbox", name="Subscribe").check()page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

    await expect(page.get_by_role("heading", name="Sign up")).to_be_visible()await page.get_by_role("checkbox", name="Subscribe").check()await page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#frame-get-by-role-option-role)
    
    Required aria role.
    
*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-role-option-checked)
    
    An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
    
    Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
    
*   `disabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-role-option-disabled)
    
    An attribute that is usually set by `aria-disabled` or `disabled`.
    
    note
    
    Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#frame-get-by-role-option-exact)
    
    Whether [name](/python/docs/api/class-frame#frame-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/python/docs/api/class-frame#frame-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
    
*   `expanded` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-role-option-expanded)
    
    An attribute that is usually set by `aria-expanded`.
    
    Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
    
*   `include_hidden` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-role-option-include-hidden)
    
    Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
    
    Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
    
*   `level` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#frame-get-by-role-option-level)
    
    A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
    
    Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#frame-get-by-role-option-name)
    
    Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/python/docs/api/class-frame#frame-get-by-role-option-exact) to control this behavior.
    
    Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
*   `pressed` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-role-option-pressed)
    
    An attribute that is usually set by `aria-pressed`.
    
    Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
    
*   `selected` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-role-option-selected)
    
    An attribute that is usually set by `aria-selected`.
    
    Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### get\_by\_test\_id[​](#frame-get-by-test-id "Direct link to get_by_test_id")

Added in: v1.27 frame.get\_by\_test\_id

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">Itinéraire</button>

You can locate the element by it's test id:

*   Sync
*   Async

    page.get_by_test_id("directions").click()

    await page.get_by_test_id("directions").click()

**Arguments**

*   `test_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.set\_test\_id\_attribute()](/python/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

* * *

### get\_by\_text[​](#frame-get-by-text "Direct link to get_by_text")

Added in: v1.27 frame.get\_by\_text

Allows locating elements that contain given text.

See also [locator.filter()](/python/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

*   Sync
*   Async

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### get\_by\_title[​](#frame-get-by-title "Direct link to get_by_title")

Added in: v1.27 frame.get\_by\_title

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

*   Sync
*   Async

    expect(page.get_by_title("Issues count")).to_have_text("25 issues")

    await expect(page.get_by_title("Issues count")).to_have_text("25 issues")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-get-by-title-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-get-by-title-return)

* * *

### goto[​](#frame-goto "Direct link to goto")

Added before v1.9 frame.goto

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect.

The method will throw an error if:

*   there's an SSL error (e.g. in case of self-signed certificates).
*   target URL is invalid.
*   the [timeout](/python/docs/api/class-frame#frame-goto-option-timeout) is exceeded during navigation.
*   the remote server does not respond or is unreachable.
*   the main resource failed to load.

The method will not throw an error when any valid HTTP status code is returned by the remote server, including 404 "Not Found" and 500 "Internal Server Error". The status code for such responses can be retrieved by calling [response.status](/python/docs/api/class-response#response-status).

note

The method either throws an error or returns a main resource response. The only exceptions are navigation to `about:blank` or navigation to the same URL with a different hash, which would succeed and return `null`.

note

Headless mode doesn't support navigation to a PDF document. See the [upstream issue](https://bugs.chromium.org/p/chromium/issues/detail?id=761295).

**Usage**

    frame.goto(url)frame.goto(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-goto-option-url)
    
    URL to navigate frame to. The url should include scheme, e.g. `https://`.
    
*   `referer` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#frame-goto-option-referer)
    
    Referer header value. If provided it will take preference over the referer header value set by [page.set\_extra\_http\_headers()](/python/docs/api/class-page#page-set-extra-http-headers).
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-goto-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-goto-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Response](/python/docs/api/class-response "Response")[#](#frame-goto-return)

* * *

### is\_enabled[​](#frame-is-enabled "Direct link to is_enabled")

Added before v1.9 frame.is\_enabled

Returns whether the element is [enabled](/python/docs/actionability#enabled).

**Usage**

    frame.is_enabled(selector)frame.is_enabled(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-is-enabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-is-enabled-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-is-enabled-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-enabled-return)

* * *

### locator[​](#frame-locator "Direct link to locator")

Added in: v1.14 frame.locator

The method returns an element locator that can be used to perform actions on this page / frame. Locator is resolved to the element immediately before performing an action, so a series of actions on the same locator can in fact be performed on different DOM elements. That would happen if the DOM structure between those actions has changed.

[Learn more about locators](/python/docs/locators).

[Learn more about locators](/python/docs/locators).

**Usage**

    frame.locator(selector)frame.locator(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    
*   `has` [Locator](/python/docs/api/class-locator "Locator") _(optional)_[#](#frame-locator-option-has)
    
    Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
    
    Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not` [Locator](/python/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#frame-locator-option-has-not)
    
    Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.33[#](#frame-locator-option-has-not-text)
    
    Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring.
    
*   `has_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#frame-locator-option-has-text)
    
    Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-return)

* * *

### set\_content[​](#frame-set-content "Direct link to set_content")

Added before v1.9 frame.set\_content

This method internally calls [document.write()](https://developer.mozilla.org/en-US/docs/Web/API/Document/write), inheriting all its specific characteristics and behaviors.

**Usage**

    frame.set_content(html)frame.set_content(html, **kwargs)

**Arguments**

*   `html` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-set-content-option-html)
    
    HTML markup to assign to the page.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-set-content-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-set-content-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-set-content-return)

* * *

### title[​](#frame-title "Direct link to title")

Added before v1.9 frame.title

Returns the page title.

**Usage**

    frame.title()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-title-return)

* * *

### wait\_for\_function[​](#frame-wait-for-function "Direct link to wait_for_function")

Added before v1.9 frame.wait\_for\_function

Returns when the [expression](/python/docs/api/class-frame#frame-wait-for-function-option-expression) returns a truthy value, returns that value.

**Usage**

The [frame.wait\_for\_function()](/python/docs/api/class-frame#frame-wait-for-function) can be used to observe viewport size change:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch()    page = browser.new_page()    page.evaluate("window.x = 0; setTimeout(() => { window.x = 100 }, 1000);")    page.main_frame.wait_for_function("() => window.x > 0")    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch()    page = await browser.new_page()    await page.evaluate("window.x = 0; setTimeout(() => { window.x = 100 }, 1000);")    await page.main_frame.wait_for_function("() => window.x > 0")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

To pass an argument to the predicate of `frame.waitForFunction` function:

*   Sync
*   Async

    selector = ".foo"frame.wait_for_function("selector => !!document.querySelector(selector)", selector)

    selector = ".foo"await frame.wait_for_function("selector => !!document.querySelector(selector)", selector)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-wait-for-function-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-wait-for-function-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-frame#frame-wait-for-function-option-expression).
    
*   `polling` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | "raf" _(optional)_[#](#frame-wait-for-function-option-polling)
    
    If [polling](/python/docs/api/class-frame#frame-wait-for-function-option-polling) is `'raf'`, then [expression](/python/docs/api/class-frame#frame-wait-for-function-option-expression) is constantly executed in `requestAnimationFrame` callback. If [polling](/python/docs/api/class-frame#frame-wait-for-function-option-polling) is a number, then it is treated as an interval in milliseconds at which the function would be executed. Defaults to `raf`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-wait-for-function-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#frame-wait-for-function-return)

* * *

### wait\_for\_load\_state[​](#frame-wait-for-load-state "Direct link to wait_for_load_state")

Added before v1.9 frame.wait\_for\_load\_state

Waits for the required load state to be reached.

This returns when the frame reaches a required load state, `load` by default. The navigation must have been committed when this method is called. If current document has already reached the required state, resolves immediately.

note

Most of the time, this method is not needed because Playwright [auto-waits before every action](/python/docs/actionability).

**Usage**

*   Sync
*   Async

    frame.click("button") # click triggers navigation.frame.wait_for_load_state() # the promise resolves after "load" event.

    await frame.click("button") # click triggers navigation.await frame.wait_for_load_state() # the promise resolves after "load" event.

**Arguments**

*   `state` "load" | "domcontentloaded" | "networkidle" _(optional)_[#](#frame-wait-for-load-state-option-state)
    
    Optional load state to wait for, defaults to `load`. If the state has been already reached while loading current document, the method resolves immediately. Can be one of:
    
    *   `'load'` - wait for the `load` event to be fired.
    *   `'domcontentloaded'` - wait for the `DOMContentLoaded` event to be fired.
    *   `'networkidle'` - **DISCOURAGED** wait until there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-wait-for-load-state-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-wait-for-load-state-return)

* * *

### wait\_for\_url[​](#frame-wait-for-url "Direct link to wait_for_url")

Added in: v1.11 frame.wait\_for\_url

Waits for the frame to navigate to the given URL.

**Usage**

*   Sync
*   Async

    frame.click("a.delayed-navigation") # clicking the link will indirectly cause a navigationframe.wait_for_url("**/target.html")

    await frame.click("a.delayed-navigation") # clicking the link will indirectly cause a navigationawait frame.wait_for_url("**/target.html")

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-wait-for-url-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://en.wikipedia.org/wiki/URL "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-wait-for-url-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-wait-for-url-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-wait-for-url-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### child\_frames[​](#frame-child-frames "Direct link to child_frames")

Added before v1.9 frame.child\_frames

**Usage**

    frame.child_frames

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Frame](/python/docs/api/class-frame "Frame")\][#](#frame-child-frames-return)

* * *

### is\_detached[​](#frame-is-detached "Direct link to is_detached")

Added before v1.9 frame.is\_detached

Returns `true` if the frame has been detached, or `false` otherwise.

**Usage**

    frame.is_detached()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-detached-return)

* * *

### name[​](#frame-name "Direct link to name")

Added before v1.9 frame.name

Returns frame's name attribute as specified in the tag.

If the name is empty, returns the id attribute instead.

note

This value is calculated once when the frame is created, and will not update if the attribute is changed later.

**Usage**

    frame.name

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-name-return)

* * *

### page[​](#frame-page "Direct link to page")

Added before v1.9 frame.page

Returns the page containing this frame.

**Usage**

    frame.page

**Returns**

*   [Page](/python/docs/api/class-page "Page")[#](#frame-page-return)

* * *

### parent\_frame[​](#frame-parent-frame "Direct link to parent_frame")

Added before v1.9 frame.parent\_frame

Parent frame, if any. Detached frames and main frames return `null`.

**Usage**

    frame.parent_frame

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Frame](/python/docs/api/class-frame "Frame")[#](#frame-parent-frame-return)

* * *

### url[​](#frame-url "Direct link to url")

Added before v1.9 frame.url

Returns frame's url.

**Usage**

    frame.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-url-return)

* * *

Deprecated[​](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### check[​](#frame-check "Direct link to check")

Added before v1.9 frame.check

Discouraged

Use locator-based [locator.check()](/python/docs/api/class-locator#locator-check) instead. Read more about [locators](/python/docs/locators).

This method checks an element matching [selector](/python/docs/api/class-frame#frame-check-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-check-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
3.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-check-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-check-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    frame.check(selector)frame.check(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-check-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-check-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-check-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.11[#](#frame-check-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-check-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-check-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#frame-check-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-check-return)

* * *

### click[​](#frame-click "Direct link to click")

Added before v1.9 frame.click

Discouraged

Use locator-based [locator.click()](/python/docs/api/class-locator#locator-click) instead. Read more about [locators](/python/docs/locators).

This method clicks an element matching [selector](/python/docs/api/class-frame#frame-click-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-click-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-click-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/python/docs/api/class-frame#frame-click-option-position).
5.  Wait for initiated navigations to either succeed or fail, unless [no\_wait\_after](/python/docs/api/class-frame#frame-click-option-no-wait-after) option is set.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-click-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    frame.click(selector)frame.click(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-click-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `button` "left" | "right" | "middle" _(optional)_[#](#frame-click-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#frame-click-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-click-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-click-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#frame-click-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-click-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#frame-click-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-click-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-click-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#frame-click-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-click-return)

* * *

### dblclick[​](#frame-dblclick "Direct link to dblclick")

Added before v1.9 frame.dblclick

Discouraged

Use locator-based [locator.dblclick()](/python/docs/api/class-locator#locator-dblclick) instead. Read more about [locators](/python/docs/locators).

This method double clicks an element matching [selector](/python/docs/api/class-frame#frame-dblclick-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-dblclick-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-dblclick-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/python/docs/api/class-frame#frame-dblclick-option-position). if the first click of the `dblclick()` triggers a navigation event, this method will throw.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-dblclick-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`frame.dblclick()` dispatches two `click` events and a single `dblclick` event.

**Usage**

    frame.dblclick(selector)frame.dblclick(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-dblclick-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `button` "left" | "right" | "middle" _(optional)_[#](#frame-dblclick-option-button)
    
    Defaults to `left`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-dblclick-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-dblclick-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#frame-dblclick-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-dblclick-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#frame-dblclick-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-dblclick-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-dblclick-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#frame-dblclick-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-dblclick-return)

* * *

### dispatch\_event[​](#frame-dispatch-event "Direct link to dispatch_event")

Added before v1.9 frame.dispatch\_event

Discouraged

Use locator-based [locator.dispatch\_event()](/python/docs/api/class-locator#locator-dispatch-event) instead. Read more about [locators](/python/docs/locators).

The snippet below dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

**Usage**

*   Sync
*   Async

    frame.dispatch_event("button#submit", "click")

    await frame.dispatch_event("button#submit", "click")

Under the hood, it creates an instance of an event based on the given [type](/python/docs/api/class-frame#frame-dispatch-event-option-type), initializes it with [event\_init](/python/docs/api/class-frame#frame-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [event\_init](/python/docs/api/class-frame#frame-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify `JSHandle` as the property value if you want live objects to be passed into the event:

*   Sync
*   Async

    # note you can only create data_transfer in chromium and firefoxdata_transfer = frame.evaluate_handle("new DataTransfer()")frame.dispatch_event("#source", "dragstart", { "dataTransfer": data_transfer })

    # note you can only create data_transfer in chromium and firefoxdata_transfer = await frame.evaluate_handle("new DataTransfer()")await frame.dispatch_event("#source", "dragstart", { "dataTransfer": data_transfer })

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-dispatch-event-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `event_init` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-dispatch-event-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-dispatch-event-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-dispatch-event-return)

* * *

### eval\_on\_selector[​](#frame-eval-on-selector "Direct link to eval_on_selector")

Added in: v1.9 frame.eval\_on\_selector

Discouraged

This method does not wait for the element to pass the actionability checks and therefore can lead to the flaky tests. Use [locator.evaluate()](/python/docs/api/class-locator#locator-evaluate), other [Locator](/python/docs/api/class-locator "Locator") helper methods or web-first assertions instead.

Returns the return value of [expression](/python/docs/api/class-frame#frame-eval-on-selector-option-expression).

The method finds an element matching the specified selector within the frame and passes it as a first argument to [expression](/python/docs/api/class-frame#frame-eval-on-selector-option-expression). If no elements match the selector, the method throws an error.

If [expression](/python/docs/api/class-frame#frame-eval-on-selector-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.eval\_on\_selector()](/python/docs/api/class-frame#frame-eval-on-selector) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    search_value = frame.eval_on_selector("#search", "el => el.value")preload_href = frame.eval_on_selector("link[rel=preload]", "el => el.href")html = frame.eval_on_selector(".main-container", "(e, suffix) => e.outerHTML + suffix", "hello")

    search_value = await frame.eval_on_selector("#search", "el => el.value")preload_href = await frame.eval_on_selector("link[rel=preload]", "el => el.href")html = await frame.eval_on_selector(".main-container", "(e, suffix) => e.outerHTML + suffix", "hello")

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-eval-on-selector-option-selector)
    
    A selector to query for.
    
*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-eval-on-selector-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-eval-on-selector-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-frame#frame-eval-on-selector-option-expression).
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-eval-on-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#frame-eval-on-selector-return)

* * *

### eval\_on\_selector\_all[​](#frame-eval-on-selector-all "Direct link to eval_on_selector_all")

Added in: v1.9 frame.eval\_on\_selector\_all

Discouraged

In most cases, [locator.evaluate\_all()](/python/docs/api/class-locator#locator-evaluate-all), other [Locator](/python/docs/api/class-locator "Locator") helper methods and web-first assertions do a better job.

Returns the return value of [expression](/python/docs/api/class-frame#frame-eval-on-selector-all-option-expression).

The method finds all elements matching the specified selector within the frame and passes an array of matched elements as a first argument to [expression](/python/docs/api/class-frame#frame-eval-on-selector-all-option-expression).

If [expression](/python/docs/api/class-frame#frame-eval-on-selector-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.eval\_on\_selector\_all()](/python/docs/api/class-frame#frame-eval-on-selector-all) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    divs_counts = frame.eval_on_selector_all("div", "(divs, min) => divs.length >= min", 10)

    divs_counts = await frame.eval_on_selector_all("div", "(divs, min) => divs.length >= min", 10)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-eval-on-selector-all-option-selector)
    
    A selector to query for.
    
*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-eval-on-selector-all-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-eval-on-selector-all-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-frame#frame-eval-on-selector-all-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#frame-eval-on-selector-all-return)

* * *

### expect\_navigation[​](#frame-wait-for-navigation "Direct link to expect_navigation")

Added before v1.9 frame.expect\_navigation

Deprecated

This method is inherently racy, please use [frame.wait\_for\_url()](/python/docs/api/class-frame#frame-wait-for-url) instead.

Waits for the frame navigation and returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. In case of navigation to a different anchor or navigation due to History API usage, the navigation will resolve with `null`.

**Usage**

This method waits for the frame to navigate to a new URL. It is useful for when you run code which will indirectly cause the frame to navigate. Consider this example:

*   Sync
*   Async

    with frame.expect_navigation():    frame.click("a.delayed-navigation") # clicking the link will indirectly cause a navigation# Resolves after navigation has finished

    async with frame.expect_navigation():    await frame.click("a.delayed-navigation") # clicking the link will indirectly cause a navigation# Resolves after navigation has finished

note

Usage of the [History API](https://developer.mozilla.org/en-US/docs/Web/API/History_API) to change the URL is considered a navigation.

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-wait-for-navigation-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-wait-for-navigation-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://en.wikipedia.org/wiki/URL "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-wait-for-navigation-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Response](/python/docs/api/class-response "Response")\][#](#frame-wait-for-navigation-return)

* * *

### fill[​](#frame-fill "Direct link to fill")

Added before v1.9 frame.fill

Discouraged

Use locator-based [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. Read more about [locators](/python/docs/locators).

This method waits for an element matching [selector](/python/docs/api/class-frame#frame-fill-option-selector), waits for [actionability](/python/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

**Usage**

    frame.fill(selector, value)frame.fill(selector, value, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-fill-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-fill-option-value)
    
    Value to fill for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#frame-fill-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-fill-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-fill-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-fill-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-fill-return)

* * *

### focus[​](#frame-focus "Direct link to focus")

Added before v1.9 frame.focus

Discouraged

Use locator-based [locator.focus()](/python/docs/api/class-locator#locator-focus) instead. Read more about [locators](/python/docs/locators).

This method fetches an element with [selector](/python/docs/api/class-frame#frame-focus-option-selector) and focuses it. If there's no element matching [selector](/python/docs/api/class-frame#frame-focus-option-selector), the method waits until a matching element appears in the DOM.

**Usage**

    frame.focus(selector)frame.focus(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-focus-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-focus-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-focus-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-focus-return)

* * *

### get\_attribute[​](#frame-get-attribute "Direct link to get_attribute")

Added before v1.9 frame.get\_attribute

Discouraged

Use locator-based [locator.get\_attribute()](/python/docs/api/class-locator#locator-get-attribute) instead. Read more about [locators](/python/docs/locators).

Returns element attribute value.

**Usage**

    frame.get_attribute(selector, name)frame.get_attribute(selector, name, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-get-attribute-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-get-attribute-option-name)
    
    Attribute name to get the value for.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-get-attribute-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-get-attribute-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-get-attribute-return)

* * *

### hover[​](#frame-hover "Direct link to hover")

Added before v1.9 frame.hover

Discouraged

Use locator-based [locator.hover()](/python/docs/api/class-locator#locator-hover) instead. Read more about [locators](/python/docs/locators).

This method hovers over an element matching [selector](/python/docs/api/class-frame#frame-hover-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-hover-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-hover-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/python/docs/api/class-frame#frame-hover-option-position).

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-hover-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    frame.hover(selector)frame.hover(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-hover-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-hover-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#frame-hover-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#frame-hover-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#frame-hover-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-hover-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-hover-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#frame-hover-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-hover-return)

* * *

### inner\_html[​](#frame-inner-html "Direct link to inner_html")

Added before v1.9 frame.inner\_html

Discouraged

Use locator-based [locator.inner\_html()](/python/docs/api/class-locator#locator-inner-html) instead. Read more about [locators](/python/docs/locators).

Returns `element.innerHTML`.

**Usage**

    frame.inner_html(selector)frame.inner_html(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-inner-html-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-inner-html-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-inner-html-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-inner-html-return)

* * *

### inner\_text[​](#frame-inner-text "Direct link to inner_text")

Added before v1.9 frame.inner\_text

Discouraged

Use locator-based [locator.inner\_text()](/python/docs/api/class-locator#locator-inner-text) instead. Read more about [locators](/python/docs/locators).

Returns `element.innerText`.

**Usage**

    frame.inner_text(selector)frame.inner_text(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-inner-text-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-inner-text-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-inner-text-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-inner-text-return)

* * *

### input\_value[​](#frame-input-value "Direct link to input_value")

Added in: v1.13 frame.input\_value

Discouraged

Use locator-based [locator.input\_value()](/python/docs/api/class-locator#locator-input-value) instead. Read more about [locators](/python/docs/locators).

Returns `input.value` for the selected `<input>` or `<textarea>` or `<select>` element.

Throws for non-input elements. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

**Usage**

    frame.input_value(selector)frame.input_value(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-input-value-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-input-value-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-input-value-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-input-value-return)

* * *

### is\_checked[​](#frame-is-checked "Direct link to is_checked")

Added before v1.9 frame.is\_checked

Discouraged

Use locator-based [locator.is\_checked()](/python/docs/api/class-locator#locator-is-checked) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

**Usage**

    frame.is_checked(selector)frame.is_checked(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-is-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-is-checked-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-is-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-checked-return)

* * *

### is\_disabled[​](#frame-is-disabled "Direct link to is_disabled")

Added before v1.9 frame.is\_disabled

Discouraged

Use locator-based [locator.is\_disabled()](/python/docs/api/class-locator#locator-is-disabled) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is disabled, the opposite of [enabled](/python/docs/actionability#enabled).

**Usage**

    frame.is_disabled(selector)frame.is_disabled(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-is-disabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-is-disabled-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-is-disabled-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-disabled-return)

* * *

### is\_editable[​](#frame-is-editable "Direct link to is_editable")

Added before v1.9 frame.is\_editable

Discouraged

Use locator-based [locator.is\_editable()](/python/docs/api/class-locator#locator-is-editable) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [editable](/python/docs/actionability#editable).

**Usage**

    frame.is_editable(selector)frame.is_editable(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-is-editable-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-is-editable-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-is-editable-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-editable-return)

* * *

### is\_hidden[​](#frame-is-hidden "Direct link to is_hidden")

Added before v1.9 frame.is\_hidden

Discouraged

Use locator-based [locator.is\_hidden()](/python/docs/api/class-locator#locator-is-hidden) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is hidden, the opposite of [visible](/python/docs/actionability#visible). [selector](/python/docs/api/class-frame#frame-is-hidden-option-selector) that does not match any elements is considered hidden.

**Usage**

    frame.is_hidden(selector)frame.is_hidden(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-is-hidden-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-is-hidden-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-is-hidden-option-timeout)
    
    Deprecated
    
    This option is ignored. [frame.is\_hidden()](/python/docs/api/class-frame#frame-is-hidden) does not wait for the element to become hidden and returns immediately.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-hidden-return)

* * *

### is\_visible[​](#frame-is-visible "Direct link to is_visible")

Added before v1.9 frame.is\_visible

Discouraged

Use locator-based [locator.is\_visible()](/python/docs/api/class-locator#locator-is-visible) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [visible](/python/docs/actionability#visible). [selector](/python/docs/api/class-frame#frame-is-visible-option-selector) that does not match any elements is considered not visible.

**Usage**

    frame.is_visible(selector)frame.is_visible(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-is-visible-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-is-visible-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-is-visible-option-timeout)
    
    Deprecated
    
    This option is ignored. [frame.is\_visible()](/python/docs/api/class-frame#frame-is-visible) does not wait for the element to become visible and returns immediately.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-is-visible-return)

* * *

### press[​](#frame-press "Direct link to press")

Added before v1.9 frame.press

Discouraged

Use locator-based [locator.press()](/python/docs/api/class-locator#locator-press) instead. Read more about [locators](/python/docs/locators).

[key](/python/docs/api/class-frame#frame-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/python/docs/api/class-frame#frame-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/python/docs/api/class-frame#frame-press-option-key) in the upper case.

If [key](/python/docs/api/class-frame#frame-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

    frame.press(selector, key)frame.press(selector, key, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-press-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-press-option-delay)
    
    Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-press-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-press-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-press-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-press-return)

* * *

### query\_selector[​](#frame-query-selector "Direct link to query_selector")

Added in: v1.9 frame.query\_selector

Discouraged

Use locator-based [frame.locator()](/python/docs/api/class-frame#frame-locator) instead. Read more about [locators](/python/docs/locators).

Returns the ElementHandle pointing to the frame element.

caution

The use of [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/python/docs/api/class-locator "Locator") objects and web-first assertions instead.

The method finds an element matching the specified selector within the frame. If no elements match the selector, returns `null`.

**Usage**

    frame.query_selector(selector)frame.query_selector(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-query-selector-option-selector)
    
    A selector to query for.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-query-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#frame-query-selector-return)

* * *

### query\_selector\_all[​](#frame-query-selector-all "Direct link to query_selector_all")

Added in: v1.9 frame.query\_selector\_all

Discouraged

Use locator-based [frame.locator()](/python/docs/api/class-frame#frame-locator) instead. Read more about [locators](/python/docs/locators).

Returns the ElementHandles pointing to the frame elements.

caution

The use of [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/python/docs/api/class-locator "Locator") objects instead.

The method finds all elements matching the specified selector within the frame. If no elements match the selector, returns empty array.

**Usage**

    frame.query_selector_all(selector)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-query-selector-all-option-selector)
    
    A selector to query for.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\][#](#frame-query-selector-all-return)

* * *

### select\_option[​](#frame-select-option "Direct link to select_option")

Added before v1.9 frame.select\_option

Discouraged

Use locator-based [locator.select\_option()](/python/docs/api/class-locator#locator-select-option) instead. Read more about [locators](/python/docs/locators).

This method waits for an element matching [selector](/python/docs/api/class-frame#frame-select-option-option-selector), waits for [actionability](/python/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

**Usage**

*   Sync
*   Async

    # Single selection matching the value or labelframe.select_option("select#colors", "blue")# single selection matching both the labelframe.select_option("select#colors", label="blue")# multiple selectionframe.select_option("select#colors", value=["red", "green", "blue"])

    # Single selection matching the value or labelawait frame.select_option("select#colors", "blue")# single selection matching the labelawait frame.select_option("select#colors", label="blue")# multiple selectionawait frame.select_option("select#colors", value=["red", "green", "blue"])

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-select-option-option-selector)
    
    A selector to query for.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#frame-select-option-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-select-option-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-select-option-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-select-option-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `element` [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\] _(optional)_[#](#frame-select-option-option-element)
    
    Option elements to select. Optional.
    
*   `index` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")\] _(optional)_[#](#frame-select-option-option-index)
    
    Options to select by index. Optional.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#frame-select-option-option-value)
    
    Options to select by value. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    
*   `label` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#frame-select-option-option-label)
    
    Options to select by label. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#frame-select-option-return)

* * *

### set\_checked[​](#frame-set-checked "Direct link to set_checked")

Added in: v1.15 frame.set\_checked

Discouraged

Use locator-based [locator.set\_checked()](/python/docs/api/class-locator#locator-set-checked) instead. Read more about [locators](/python/docs/locators).

This method checks or unchecks an element matching [selector](/python/docs/api/class-frame#frame-set-checked-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-set-checked-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws.
3.  If the element already has the right checked state, this method returns immediately.
4.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
5.  Scroll the element into view if needed.
6.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
7.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-set-checked-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    frame.set_checked(selector, checked)frame.set_checked(selector, checked, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-set-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#frame-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-set-checked-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-set-checked-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#frame-set-checked-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-set-checked-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-set-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-set-checked-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-set-checked-return)

* * *

### set\_input\_files[​](#frame-set-input-files "Direct link to set_input_files")

Added before v1.9 frame.set\_input\_files

Discouraged

Use locator-based [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) instead. Read more about [locators](/python/docs/locators).

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files.

This method expects [selector](/python/docs/api/class-frame#frame-set-input-files-option-selector) to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

**Usage**

    frame.set_input_files(selector, files)frame.set_input_files(selector, files, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-set-input-files-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `files` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\]\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#frame-set-input-files-option-files)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-set-input-files-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-set-input-files-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-set-input-files-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-set-input-files-return)

* * *

### tap[​](#frame-tap "Direct link to tap")

Added before v1.9 frame.tap

Discouraged

Use locator-based [locator.tap()](/python/docs/api/class-locator#locator-tap) instead. Read more about [locators](/python/docs/locators).

This method taps an element matching [selector](/python/docs/api/class-frame#frame-tap-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-tap-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-tap-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.touchscreen](/python/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/python/docs/api/class-frame#frame-tap-option-position).

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-tap-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`frame.tap()` requires that the `hasTouch` option of the browser context be set to true.

**Usage**

    frame.tap(selector)frame.tap(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-tap-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-tap-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#frame-tap-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-tap-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#frame-tap-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-tap-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-tap-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#frame-tap-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-tap-return)

* * *

### text\_content[​](#frame-text-content "Direct link to text_content")

Added before v1.9 frame.text\_content

Discouraged

Use locator-based [locator.text\_content()](/python/docs/api/class-locator#locator-text-content) instead. Read more about [locators](/python/docs/locators).

Returns `element.textContent`.

**Usage**

    frame.text_content(selector)frame.text_content(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-text-content-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-text-content-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-text-content-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-text-content-return)

* * *

### type[​](#frame-type "Direct link to type")

Added before v1.9 frame.type

Deprecated

In most cases, you should use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text. `frame.type` can be used to send fine-grained keyboard events. To fill values in form fields, use [frame.fill()](/python/docs/api/class-frame#frame-fill).

To press a special key, like `Control` or `ArrowDown`, use [keyboard.press()](/python/docs/api/class-keyboard#keyboard-press).

**Usage**

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-type-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-type-option-text)
    
    A text to type into a focused element.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-type-option-delay)
    
    Time to wait between key presses in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-type-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-type-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-type-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-type-return)

* * *

### uncheck[​](#frame-uncheck "Direct link to uncheck")

Added before v1.9 frame.uncheck

Discouraged

Use locator-based [locator.uncheck()](/python/docs/api/class-locator#locator-uncheck) instead. Read more about [locators](/python/docs/locators).

This method checks an element matching [selector](/python/docs/api/class-frame#frame-uncheck-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-frame#frame-uncheck-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
3.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-frame#frame-uncheck-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-frame#frame-uncheck-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    frame.uncheck(selector)frame.uncheck(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-uncheck-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-uncheck-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-uncheck-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.11[#](#frame-uncheck-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-uncheck-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-uncheck-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#frame-uncheck-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-uncheck-return)

* * *

### wait\_for\_selector[​](#frame-wait-for-selector "Direct link to wait_for_selector")

Added before v1.9 frame.wait\_for\_selector

Discouraged

Use web assertions that assert visibility or a locator-based [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for) instead. Read more about [locators](/python/docs/locators).

Returns when element specified by selector satisfies [state](/python/docs/api/class-frame#frame-wait-for-selector-option-state) option. Returns `null` if waiting for `hidden` or `detached`.

note

Playwright automatically waits for element to be ready before performing an action. Using [Locator](/python/docs/api/class-locator "Locator") objects and web-first assertions make the code wait-for-selector-free.

Wait for the [selector](/python/docs/api/class-frame#frame-wait-for-selector-option-selector) to satisfy [state](/python/docs/api/class-frame#frame-wait-for-selector-option-state) option (either appear/disappear from dom, or become visible/hidden). If at the moment of calling the method [selector](/python/docs/api/class-frame#frame-wait-for-selector-option-selector) already satisfies the condition, the method will return immediately. If the selector doesn't satisfy the condition for the [timeout](/python/docs/api/class-frame#frame-wait-for-selector-option-timeout) milliseconds, the function will throw.

**Usage**

This method works across navigations:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    chromium = playwright.chromium    browser = chromium.launch()    page = browser.new_page()    for current_url in ["https://google.com", "https://bbc.com"]:        page.goto(current_url, wait_until="domcontentloaded")        element = page.main_frame.wait_for_selector("img")        print("Loaded image: " + str(element.get_attribute("src")))    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    chromium = playwright.chromium    browser = await chromium.launch()    page = await browser.new_page()    for current_url in ["https://google.com", "https://bbc.com"]:        await page.goto(current_url, wait_until="domcontentloaded")        element = await page.main_frame.wait_for_selector("img")        print("Loaded image: " + str(await element.get_attribute("src")))    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-wait-for-selector-option-selector)
    
    A selector to query for.
    
*   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#frame-wait-for-selector-option-state)
    
    Defaults to `'visible'`. Can be either:
    
    *   `'attached'` - wait for element to be present in DOM.
    *   `'detached'` - wait for element to not be present in DOM.
    *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
    *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#frame-wait-for-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#frame-wait-for-selector-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#frame-wait-for-selector-return)

* * *

### wait\_for\_timeout[​](#frame-wait-for-timeout "Direct link to wait_for_timeout")

Added before v1.9 frame.wait\_for\_timeout

Discouraged

Never wait for timeout in production. Tests that wait for time are inherently flaky. Use [Locator](/python/docs/api/class-locator "Locator") actions and web assertions that wait automatically.

Waits for the given [timeout](/python/docs/api/class-frame#frame-wait-for-timeout-option-timeout) in milliseconds.

Note that `frame.waitForTimeout()` should only be used for debugging. Tests using the timer in production are going to be flaky. Use signals such as network events, selectors becoming visible and others instead.

**Usage**

    frame.wait_for_timeout(timeout)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#frame-wait-for-timeout-option-timeout)
    
    A timeout to wait for
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#frame-wait-for-timeout-return)

# FrameLocator

FrameLocator
============

FrameLocator represents a view to the `iframe` on the page. It captures the logic sufficient to retrieve the `iframe` and locate elements in that iframe. FrameLocator can be created with either [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame), [page.frame\_locator()](/python/docs/api/class-page#page-frame-locator) or [locator.frame\_locator()](/python/docs/api/class-locator#locator-frame-locator) method.

*   Sync
*   Async

    locator = page.locator("my-frame").content_frame.get_by_text("Submit")locator.click()

    locator = page.locator("#my-frame").content_frame.get_by_text("Submit")await locator.click()

**Strictness**

Frame locators are strict. This means that all operations on frame locators will throw if more than one element matches a given selector.

*   Sync
*   Async

    # Throws if there are several frames in DOM:page.locator('.result-frame').content_frame.get_by_role('button').click()# Works because we explicitly tell locator to pick the first frame:page.locator('.result-frame').first.content_frame.get_by_role('button').click()

    # Throws if there are several frames in DOM:await page.locator('.result-frame').content_frame.get_by_role('button').click()# Works because we explicitly tell locator to pick the first frame:await page.locator('.result-frame').first.content_frame.get_by_role('button').click()

**Converting Locator to FrameLocator**

If you have a [Locator](/python/docs/api/class-locator "Locator") object pointing to an `iframe` it can be converted to [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") using [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame).

**Converting FrameLocator to Locator**

If you have a [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") object it can be converted to [Locator](/python/docs/api/class-locator "Locator") pointing to the same `iframe` using [frame\_locator.owner](/python/docs/api/class-framelocator#frame-locator-owner).

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### frame\_locator[​](#frame-locator-frame-locator "Direct link to frame_locator")

Added in: v1.17 frameLocator.frame\_locator

When working with iframes, you can create a frame locator that will enter the iframe and allow selecting elements in that iframe.

**Usage**

    frame_locator.frame_locator(selector)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#frame-locator-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-frame-locator-return)

* * *

### get\_by\_alt\_text[​](#frame-locator-get-by-alt-text "Direct link to get_by_alt_text")

Added in: v1.27 frameLocator.get\_by\_alt\_text

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

*   Sync
*   Async

    page.get_by_alt_text("Playwright logo").click()

    await page.get_by_alt_text("Playwright logo").click()

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-locator-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-alt-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-alt-text-return)

* * *

### get\_by\_label[​](#frame-locator-get-by-label "Direct link to get_by_label")

Added in: v1.27 frameLocator.get\_by\_label

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

*   Sync
*   Async

    page.get_by_label("Username").fill("john")page.get_by_label("Password").fill("secret")

    await page.get_by_label("Username").fill("john")await page.get_by_label("Password").fill("secret")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-locator-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-label-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-label-return)

* * *

### get\_by\_placeholder[​](#frame-locator-get-by-placeholder "Direct link to get_by_placeholder")

Added in: v1.27 frameLocator.get\_by\_placeholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

*   Sync
*   Async

    page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

    await page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-locator-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-placeholder-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-placeholder-return)

* * *

### get\_by\_role[​](#frame-locator-get-by-role "Direct link to get_by_role")

Added in: v1.27 frameLocator.get\_by\_role

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

*   Sync
*   Async

    expect(page.get_by_role("heading", name="Sign up")).to_be_visible()page.get_by_role("checkbox", name="Subscribe").check()page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

    await expect(page.get_by_role("heading", name="Sign up")).to_be_visible()await page.get_by_role("checkbox", name="Subscribe").check()await page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#frame-locator-get-by-role-option-role)
    
    Required aria role.
    
*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-role-option-checked)
    
    An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
    
    Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
    
*   `disabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-role-option-disabled)
    
    An attribute that is usually set by `aria-disabled` or `disabled`.
    
    note
    
    Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#frame-locator-get-by-role-option-exact)
    
    Whether [name](/python/docs/api/class-framelocator#frame-locator-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/python/docs/api/class-framelocator#frame-locator-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
    
*   `expanded` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-role-option-expanded)
    
    An attribute that is usually set by `aria-expanded`.
    
    Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
    
*   `include_hidden` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-role-option-include-hidden)
    
    Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
    
    Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
    
*   `level` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#frame-locator-get-by-role-option-level)
    
    A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
    
    Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#frame-locator-get-by-role-option-name)
    
    Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/python/docs/api/class-framelocator#frame-locator-get-by-role-option-exact) to control this behavior.
    
    Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
*   `pressed` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-role-option-pressed)
    
    An attribute that is usually set by `aria-pressed`.
    
    Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
    
*   `selected` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-role-option-selected)
    
    An attribute that is usually set by `aria-selected`.
    
    Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### get\_by\_test\_id[​](#frame-locator-get-by-test-id "Direct link to get_by_test_id")

Added in: v1.27 frameLocator.get\_by\_test\_id

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">Itinéraire</button>

You can locate the element by it's test id:

*   Sync
*   Async

    page.get_by_test_id("directions").click()

    await page.get_by_test_id("directions").click()

**Arguments**

*   `test_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-locator-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.set\_test\_id\_attribute()](/python/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

* * *

### get\_by\_text[​](#frame-locator-get-by-text "Direct link to get_by_text")

Added in: v1.27 frameLocator.get\_by\_text

Allows locating elements that contain given text.

See also [locator.filter()](/python/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

*   Sync
*   Async

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-locator-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### get\_by\_title[​](#frame-locator-get-by-title "Direct link to get_by_title")

Added in: v1.27 frameLocator.get\_by\_title

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

*   Sync
*   Async

    expect(page.get_by_title("Issues count")).to_have_text("25 issues")

    await expect(page.get_by_title("Issues count")).to_have_text("25 issues")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#frame-locator-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#frame-locator-get-by-title-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-get-by-title-return)

* * *

### locator[​](#frame-locator-locator "Direct link to locator")

Added in: v1.17 frameLocator.locator

The method finds an element matching the specified selector in the locator's subtree. It also accepts filter options, similar to [locator.filter()](/python/docs/api/class-locator#locator-filter) method.

[Learn more about locators](/python/docs/locators).

**Usage**

    frame_locator.locator(selector_or_locator)frame_locator.locator(selector_or_locator, **kwargs)

**Arguments**

*   `selector_or_locator` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-locator-option-selector-or-locator)
    
    A selector or locator to use when resolving DOM element.
    
*   `has` [Locator](/python/docs/api/class-locator "Locator") _(optional)_[#](#frame-locator-locator-option-has)
    
    Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
    
    Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not` [Locator](/python/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#frame-locator-locator-option-has-not)
    
    Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.33[#](#frame-locator-locator-option-has-not-text)
    
    Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring.
    
*   `has_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#frame-locator-locator-option-has-text)
    
    Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-locator-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### owner[​](#frame-locator-owner "Direct link to owner")

Added in: v1.43 frameLocator.owner

Returns a [Locator](/python/docs/api/class-locator "Locator") object pointing to the same `iframe` as this frame locator.

Useful when you have a [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") object obtained somewhere, and later on would like to interact with the `iframe` element.

For a reverse operation, use [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame).

**Usage**

*   Sync
*   Async

    frame_locator = page.locator("iframe[name=\"embedded\"]").content_frame# ...locator = frame_locator.ownerexpect(locator).to_be_visible()

    frame_locator = page.locator("iframe[name=\"embedded\"]").content_frame# ...locator = frame_locator.ownerawait expect(locator).to_be_visible()

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#frame-locator-owner-return)

* * *

Deprecated[​](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### first[​](#frame-locator-first "Direct link to first")

Added in: v1.17 frameLocator.first

Deprecated

Use [locator.first](/python/docs/api/class-locator#locator-first) followed by [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame) instead.

Returns locator to the first matching frame.

**Usage**

    frame_locator.first

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-first-return)

* * *

### last[​](#frame-locator-last "Direct link to last")

Added in: v1.17 frameLocator.last

Deprecated

Use [locator.last](/python/docs/api/class-locator#locator-last) followed by [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame) instead.

Returns locator to the last matching frame.

**Usage**

    frame_locator.last

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-last-return)

* * *

### nth[​](#frame-locator-nth "Direct link to nth")

Added in: v1.17 frameLocator.nth

Deprecated

Use [locator.nth()](/python/docs/api/class-locator#locator-nth) followed by [locator.content\_frame](/python/docs/api/class-locator#locator-content-frame) instead.

Returns locator to the n-th matching frame. It's zero based, `nth(0)` selects the first frame.

**Usage**

    frame_locator.nth(index)

**Arguments**

*   `index` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")[#](#frame-locator-nth-option-index)

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-nth-return)

# JSHandle

JSHandle
========

JSHandle represents an in-page JavaScript object. JSHandles can be created with the [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) method.

*   Sync
*   Async

    window_handle = page.evaluate_handle("window")# ...

    window_handle = await page.evaluate_handle("window")# ...

JSHandle prevents the referenced JavaScript object being garbage collected unless the handle is exposed with [js\_handle.dispose()](/python/docs/api/class-jshandle#js-handle-dispose). JSHandles are auto-disposed when their origin frame gets navigated or the parent context gets destroyed.

JSHandle instances can be used as an argument in [page.eval\_on\_selector()](/python/docs/api/class-page#page-eval-on-selector), [page.evaluate()](/python/docs/api/class-page#page-evaluate) and [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) methods.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### dispose[​](#js-handle-dispose "Direct link to dispose")

Added before v1.9 jsHandle.dispose

The `jsHandle.dispose` method stops referencing the element handle.

**Usage**

    js_handle.dispose()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#js-handle-dispose-return)

* * *

### evaluate[​](#js-handle-evaluate "Direct link to evaluate")

Added before v1.9 jsHandle.evaluate

Returns the return value of [expression](/python/docs/api/class-jshandle#js-handle-evaluate-option-expression).

This method passes this handle as the first argument to [expression](/python/docs/api/class-jshandle#js-handle-evaluate-option-expression).

If [expression](/python/docs/api/class-jshandle#js-handle-evaluate-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then `handle.evaluate` would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    tweet_handle = page.query_selector(".tweet .retweets")assert tweet_handle.evaluate("node => node.innerText") == "10 retweets"

    tweet_handle = await page.query_selector(".tweet .retweets")assert await tweet_handle.evaluate("node => node.innerText") == "10 retweets"

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#js-handle-evaluate-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#js-handle-evaluate-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-jshandle#js-handle-evaluate-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#js-handle-evaluate-return)

* * *

### evaluate\_handle[​](#js-handle-evaluate-handle "Direct link to evaluate_handle")

Added before v1.9 jsHandle.evaluate\_handle

Returns the return value of [expression](/python/docs/api/class-jshandle#js-handle-evaluate-handle-option-expression) as a [JSHandle](/python/docs/api/class-jshandle "JSHandle").

This method passes this handle as the first argument to [expression](/python/docs/api/class-jshandle#js-handle-evaluate-handle-option-expression).

The only difference between `jsHandle.evaluate` and `jsHandle.evaluateHandle` is that `jsHandle.evaluateHandle` returns [JSHandle](/python/docs/api/class-jshandle "JSHandle").

If the function passed to the `jsHandle.evaluateHandle` returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then `jsHandle.evaluateHandle` would wait for the promise to resolve and return its value.

See [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) for more details.

**Usage**

    js_handle.evaluate_handle(expression)js_handle.evaluate_handle(expression, **kwargs)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#js-handle-evaluate-handle-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#js-handle-evaluate-handle-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-jshandle#js-handle-evaluate-handle-option-expression).
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#js-handle-evaluate-handle-return)

* * *

### get\_properties[​](#js-handle-get-properties "Direct link to get_properties")

Added before v1.9 jsHandle.get\_properties

The method returns a map with **own property names** as keys and JSHandle instances for the property values.

**Usage**

*   Sync
*   Async

    handle = page.evaluate_handle("({ window, document })")properties = handle.get_properties()window_handle = properties.get("window")document_handle = properties.get("document")handle.dispose()

    handle = await page.evaluate_handle("({ window, document })")properties = await handle.get_properties()window_handle = properties.get("window")document_handle = properties.get("document")await handle.dispose()

**Returns**

*   \[Map\]\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [JSHandle](/python/docs/api/class-jshandle "JSHandle")\][#](#js-handle-get-properties-return)

* * *

### get\_property[​](#js-handle-get-property "Direct link to get_property")

Added before v1.9 jsHandle.get\_property

Fetches a single property from the referenced object.

**Usage**

    js_handle.get_property(property_name)

**Arguments**

*   `property_name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#js-handle-get-property-option-property-name)
    
    property to get
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#js-handle-get-property-return)

* * *

### json\_value[​](#js-handle-json-value "Direct link to json_value")

Added before v1.9 jsHandle.json\_value

Returns a JSON representation of the object. If the object has a `toJSON` function, it **will not be called**.

note

The method will return an empty JSON object if the referenced object is not stringifiable. It will throw an error if the object has circular references.

**Usage**

    js_handle.json_value()

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#js-handle-json-value-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### as\_element[​](#js-handle-as-element "Direct link to as_element")

Added before v1.9 jsHandle.as\_element

Returns either `null` or the object handle itself, if the object handle is an instance of [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle").

**Usage**

    js_handle.as_element()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#js-handle-as-element-return)

# Keyboard

Keyboard
========

Keyboard provides an api for managing a virtual keyboard. The high level api is [keyboard.type()](/python/docs/api/class-keyboard#keyboard-type), which takes raw characters and generates proper `keydown`, `keypress`/`input`, and `keyup` events on your page.

For finer control, you can use [keyboard.down()](/python/docs/api/class-keyboard#keyboard-down), [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up), and [keyboard.insert\_text()](/python/docs/api/class-keyboard#keyboard-insert-text) to manually fire events as if they were generated from a real keyboard.

An example of holding down `Shift` in order to select and delete some text:

*   Sync
*   Async

    page.keyboard.type("Hello World!")page.keyboard.press("ArrowLeft")page.keyboard.down("Shift")for i in range(6):    page.keyboard.press("ArrowLeft")page.keyboard.up("Shift")page.keyboard.press("Backspace")# result text will end up saying "Hello!"

    await page.keyboard.type("Hello World!")await page.keyboard.press("ArrowLeft")await page.keyboard.down("Shift")for i in range(6):    await page.keyboard.press("ArrowLeft")await page.keyboard.up("Shift")await page.keyboard.press("Backspace")# result text will end up saying "Hello!"

An example of pressing uppercase `A`

*   Sync
*   Async

    page.keyboard.press("Shift+KeyA")# orpage.keyboard.press("Shift+A")

    await page.keyboard.press("Shift+KeyA")# orawait page.keyboard.press("Shift+A")

An example to trigger select-all with the keyboard

*   Sync
*   Async

    page.keyboard.press("ControlOrMeta+A")

    await page.keyboard.press("ControlOrMeta+A")

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### down[​](#keyboard-down "Direct link to down")

Added before v1.9 keyboard.down

Dispatches a `keydown` event.

[key](/python/docs/api/class-keyboard#keyboard-down-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/python/docs/api/class-keyboard#keyboard-down-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/python/docs/api/class-keyboard#keyboard-down-option-key) in the upper case.

If [key](/python/docs/api/class-keyboard#keyboard-down-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

If [key](/python/docs/api/class-keyboard#keyboard-down-option-key) is a modifier key, `Shift`, `Meta`, `Control`, or `Alt`, subsequent key presses will be sent with that modifier active. To release the modifier key, use [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up).

After the key is pressed once, subsequent calls to [keyboard.down()](/python/docs/api/class-keyboard#keyboard-down) will have [repeat](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/repeat) set to true. To release the key, use [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up).

note

Modifier keys DO influence `keyboard.down`. Holding down `Shift` will type the text in upper case.

**Usage**

    keyboard.down(key)

**Arguments**

*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#keyboard-down-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#keyboard-down-return)

* * *

### insert\_text[​](#keyboard-insert-text "Direct link to insert_text")

Added before v1.9 keyboard.insert\_text

Dispatches only `input` event, does not emit the `keydown`, `keyup` or `keypress` events.

**Usage**

*   Sync
*   Async

    page.keyboard.insert_text("嗨")

    await page.keyboard.insert_text("嗨")

note

Modifier keys DO NOT effect `keyboard.insertText`. Holding down `Shift` will not type the text in upper case.

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#keyboard-insert-text-option-text)
    
    Sets input to the specified text value.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#keyboard-insert-text-return)

* * *

### press[​](#keyboard-press "Direct link to press")

Added before v1.9 keyboard.press

tip

In most cases, you should use [locator.press()](/python/docs/api/class-locator#locator-press) instead.

[key](/python/docs/api/class-keyboard#keyboard-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/python/docs/api/class-keyboard#keyboard-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/python/docs/api/class-keyboard#keyboard-press-option-key) in the upper case.

If [key](/python/docs/api/class-keyboard#keyboard-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

*   Sync
*   Async

    page = browser.new_page()page.goto("https://keycode.info")page.keyboard.press("a")page.screenshot(path="a.png")page.keyboard.press("ArrowLeft")page.screenshot(path="arrow_left.png")page.keyboard.press("Shift+O")page.screenshot(path="o.png")browser.close()

    page = await browser.new_page()await page.goto("https://keycode.info")await page.keyboard.press("a")await page.screenshot(path="a.png")await page.keyboard.press("ArrowLeft")await page.screenshot(path="arrow_left.png")await page.keyboard.press("Shift+O")await page.screenshot(path="o.png")await browser.close()

Shortcut for [keyboard.down()](/python/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up).

**Arguments**

*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#keyboard-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#keyboard-press-option-delay)
    
    Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#keyboard-press-return)

* * *

### type[​](#keyboard-type "Direct link to type")

Added before v1.9 keyboard.type

caution

In most cases, you should use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [keyboard.press()](/python/docs/api/class-keyboard#keyboard-press).

**Usage**

*   Sync
*   Async

    page.keyboard.type("Hello") # types instantlypage.keyboard.type("World", delay=100) # types slower, like a user

    await page.keyboard.type("Hello") # types instantlyawait page.keyboard.type("World", delay=100) # types slower, like a user

note

Modifier keys DO NOT effect `keyboard.type`. Holding down `Shift` will not type the text in upper case.

note

For characters that are not on a US keyboard, only an `input` event will be sent.

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#keyboard-type-option-text)
    
    A text to type into a focused element.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#keyboard-type-option-delay)
    
    Time to wait between key presses in milliseconds. Defaults to 0.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#keyboard-type-return)

* * *

### up[​](#keyboard-up "Direct link to up")

Added before v1.9 keyboard.up

Dispatches a `keyup` event.

**Usage**

    keyboard.up(key)

**Arguments**

*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#keyboard-up-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#keyboard-up-return)

# Locator

Locator
=======

Locators are the central piece of Playwright's auto-waiting and retry-ability. In a nutshell, locators represent a way to find element(s) on the page at any moment. A locator can be created with the [page.locator()](/python/docs/api/class-page#page-locator) method.

[Learn more about locators](/python/docs/locators).

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### all[​](#locator-all "Direct link to all")

Added in: v1.29 locator.all

When the locator points to a list of elements, this returns an array of locators, pointing to their respective elements.

note

[locator.all()](/python/docs/api/class-locator#locator-all) does not wait for elements to match the locator, and instead immediately returns whatever is present in the page.

When the list of elements changes dynamically, [locator.all()](/python/docs/api/class-locator#locator-all) will produce unpredictable and flaky results.

When the list of elements is stable, but loaded dynamically, wait for the full list to finish loading before calling [locator.all()](/python/docs/api/class-locator#locator-all).

**Usage**

*   Sync
*   Async

    for li in page.get_by_role('listitem').all():  li.click();

    for li in await page.get_by_role('listitem').all():  await li.click();

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Locator](/python/docs/api/class-locator "Locator")\][#](#locator-all-return)

* * *

### all\_inner\_texts[​](#locator-all-inner-texts "Direct link to all_inner_texts")

Added in: v1.14 locator.all\_inner\_texts

Returns an array of `node.innerText` values for all matching nodes.

Asserting text

If you need to assert text on the page, prefer [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) with [use\_inner\_text](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text-option-use-inner-text) option to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    texts = page.get_by_role("link").all_inner_texts()

    texts = await page.get_by_role("link").all_inner_texts()

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#locator-all-inner-texts-return)

* * *

### all\_text\_contents[​](#locator-all-text-contents "Direct link to all_text_contents")

Added in: v1.14 locator.all\_text\_contents

Returns an array of `node.textContent` values for all matching nodes.

Asserting text

If you need to assert text on the page, prefer [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    texts = page.get_by_role("link").all_text_contents()

    texts = await page.get_by_role("link").all_text_contents()

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#locator-all-text-contents-return)

* * *

### and\_[​](#locator-and "Direct link to and_")

Added in: v1.34 locator.and\_

Creates a locator that matches both this locator and the argument locator.

**Usage**

The following example finds a button with a specific title.

*   Sync
*   Async

    button = page.get_by_role("button").and_(page.getByTitle("Subscribe"))

    button = page.get_by_role("button").and_(page.getByTitle("Subscribe"))

**Arguments**

*   `locator` [Locator](/python/docs/api/class-locator "Locator")[#](#locator-and-option-locator)
    
    Additional locator to match.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-and-return)

* * *

### aria\_snapshot[​](#locator-aria-snapshot "Direct link to aria_snapshot")

Added in: v1.49 locator.aria\_snapshot

Captures the aria snapshot of the given element. Read more about [aria snapshots](/python/docs/aria-snapshots) and [expect(locator).to\_match\_aria\_snapshot()](/python/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot) for the corresponding assertion.

**Usage**

*   Sync
*   Async

    page.get_by_role("link").aria_snapshot()

    await page.get_by_role("link").aria_snapshot()

**Arguments**

*   `ref` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.52[#](#locator-aria-snapshot-option-ref)
    
    Generate symbolic reference for each element. One can use `aria-ref=<ref>` locator immediately after capturing the snapshot to perform actions on the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-aria-snapshot-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-aria-snapshot-return)

**Details**

This method captures the aria snapshot of the given element. The snapshot is a string that represents the state of the element and its children. The snapshot can be used to assert the state of the element in the test, or to compare it to state in the future.

The ARIA snapshot is represented using [YAML](https://yaml.org/spec/1.2.2/) markup language:

*   The keys of the objects are the roles and optional accessible names of the elements.
*   The values are either text content or an array of child elements.
*   Generic static text can be represented with the `text` key.

Below is the HTML markup and the respective ARIA snapshot:

    <ul aria-label="Links">  <li><a href="/">Home</a></li>  <li><a href="/about">About</a></li><ul>

    - list "Links":  - listitem:    - link "Home"  - listitem:    - link "About"

* * *

### blur[​](#locator-blur "Direct link to blur")

Added in: v1.28 locator.blur

Calls [blur](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/blur) on the element.

**Usage**

    locator.blur()locator.blur(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-blur-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-blur-return)

* * *

### bounding\_box[​](#locator-bounding-box "Direct link to bounding_box")

Added in: v1.14 locator.bounding\_box

This method returns the bounding box of the element matching the locator, or `null` if the element is not visible. The bounding box is calculated relative to the main frame viewport - which is usually the same as the browser window.

**Usage**

*   Sync
*   Async

    box = page.get_by_role("button").bounding_box()page.mouse.click(box["x"] + box["width"] / 2, box["y"] + box["height"] / 2)

    box = await page.get_by_role("button").bounding_box()await page.mouse.click(box["x"] + box["width"] / 2, box["y"] + box["height"] / 2)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-bounding-box-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#locator-bounding-box-return)
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the x coordinate of the element in pixels.
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the y coordinate of the element in pixels.
        
    *   `width` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the width of the element in pixels.
        
    *   `height` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        the height of the element in pixels.
        

**Details**

Scrolling affects the returned bounding box, similarly to [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect). That means `x` and/or `y` may be negative.

Elements from child frames return the bounding box relative to the main frame, unlike the [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).

Assuming the page is static, it is safe to use bounding box coordinates to perform input. For example, the following snippet should click the center of the element.

* * *

### check[​](#locator-check "Direct link to check")

Added in: v1.14 locator.check

Ensure that checkbox or radio element is checked.

**Usage**

*   Sync
*   Async

    page.get_by_role("checkbox").check()

    await page.get_by_role("checkbox").check()

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-check-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-check-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-check-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-check-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-check-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-check-return)

**Details**

Performs the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
2.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-locator#locator-check-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now checked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-check-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### clear[​](#locator-clear "Direct link to clear")

Added in: v1.28 locator.clear

Clear the input field.

**Usage**

*   Sync
*   Async

    page.get_by_role("textbox").clear()

    await page.get_by_role("textbox").clear()

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-clear-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-clear-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-clear-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-clear-return)

**Details**

This method waits for [actionability](/python/docs/actionability) checks, focuses the element, clears it and triggers an `input` event after clearing.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be cleared instead.

* * *

### click[​](#locator-click "Direct link to click")

Added in: v1.14 locator.click

Click an element.

**Usage**

Click a button:

*   Sync
*   Async

    page.get_by_role("button").click()

    await page.get_by_role("button").click()

Shift-right-click at a specific position on a canvas:

*   Sync
*   Async

    page.locator("canvas").click(    button="right", modifiers=["Shift"], position={"x": 23, "y": 32})

    await page.locator("canvas").click(    button="right", modifiers=["Shift"], position={"x": 23, "y": 32})

**Arguments**

*   `button` "left" | "right" | "middle" _(optional)_[#](#locator-click-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#locator-click-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-click-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-click-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#locator-click-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-click-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-click-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-click-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-click-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-click-return)

**Details**

This method clicks the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-locator#locator-click-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/python/docs/api/class-locator#locator-click-option-position).
4.  Wait for initiated navigations to either succeed or fail, unless [no\_wait\_after](/python/docs/api/class-locator#locator-click-option-no-wait-after) option is set.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-click-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### count[​](#locator-count "Direct link to count")

Added in: v1.14 locator.count

Returns the number of elements matching the locator.

Asserting count

If you need to assert the number of elements on the page, prefer [expect(locator).to\_have\_count()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-count) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    count = page.get_by_role("listitem").count()

    count = await page.get_by_role("listitem").count()

**Returns**

*   [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")[#](#locator-count-return)

* * *

### dblclick[​](#locator-dblclick "Direct link to dblclick")

Added in: v1.14 locator.dblclick

Double-click an element.

**Usage**

    locator.dblclick()locator.dblclick(**kwargs)

**Arguments**

*   `button` "left" | "right" | "middle" _(optional)_[#](#locator-dblclick-option-button)
    
    Defaults to `left`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-dblclick-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-dblclick-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#locator-dblclick-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-dblclick-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-dblclick-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-dblclick-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-dblclick-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-dblclick-return)

**Details**

This method double clicks the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-locator#locator-dblclick-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/python/docs/api/class-locator#locator-dblclick-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-dblclick-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`element.dblclick()` dispatches two `click` events and a single `dblclick` event.

* * *

### dispatch\_event[​](#locator-dispatch-event "Direct link to dispatch_event")

Added in: v1.14 locator.dispatch\_event

Programmatically dispatch an event on the matching element.

**Usage**

*   Sync
*   Async

    locator.dispatch_event("click")

    await locator.dispatch_event("click")

**Arguments**

*   `type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `event_init` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-dispatch-event-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-dispatch-event-return)

**Details**

The snippet above dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

Under the hood, it creates an instance of an event based on the given [type](/python/docs/api/class-locator#locator-dispatch-event-option-type), initializes it with [event\_init](/python/docs/api/class-locator#locator-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [event\_init](/python/docs/api/class-locator#locator-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify [JSHandle](/python/docs/api/class-jshandle "JSHandle") as the property value if you want live objects to be passed into the event:

*   Sync
*   Async

    data_transfer = page.evaluate_handle("new DataTransfer()")locator.dispatch_event("#source", "dragstart", {"dataTransfer": data_transfer})

    data_transfer = await page.evaluate_handle("new DataTransfer()")await locator.dispatch_event("#source", "dragstart", {"dataTransfer": data_transfer})

* * *

### drag\_to[​](#locator-drag-to "Direct link to drag_to")

Added in: v1.18 locator.drag\_to

Drag the source element towards the target element and drop it.

**Usage**

*   Sync
*   Async

    source = page.locator("#source")target = page.locator("#target")source.drag_to(target)# or specify exact positions relative to the top-left corners of the elements:source.drag_to(  target,  source_position={"x": 34, "y": 7},  target_position={"x": 10, "y": 20})

    source = page.locator("#source")target = page.locator("#target")await source.drag_to(target)# or specify exact positions relative to the top-left corners of the elements:await source.drag_to(  target,  source_position={"x": 34, "y": 7},  target_position={"x": 10, "y": 20})

**Arguments**

*   `target` [Locator](/python/docs/api/class-locator "Locator")[#](#locator-drag-to-option-target)
    
    Locator of the element to drag to.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-drag-to-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-drag-to-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `source_position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-drag-to-option-source-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
    
*   `target_position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-drag-to-option-target-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-drag-to-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-drag-to-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-drag-to-return)

**Details**

This method drags the locator to another target locator or target position. It will first move to the source element, perform a `mousedown`, then move to the target element or position and perform a `mouseup`.

* * *

### evaluate[​](#locator-evaluate "Direct link to evaluate")

Added in: v1.14 locator.evaluate

Execute JavaScript code in the page, taking the matching element as an argument.

**Usage**

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-evaluate-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-evaluate-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-locator#locator-evaluate-option-expression).
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-evaluate-option-timeout)
    
    Maximum time in milliseconds to wait for the locator before evaluating. Note that after locator is resolved, evaluation itself is not limited by the timeout. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#locator-evaluate-return)

**Details**

Returns the return value of [expression](/python/docs/api/class-locator#locator-evaluate-option-expression), called with the matching element as a first argument, and [arg](/python/docs/api/class-locator#locator-evaluate-option-arg) as a second argument.

If [expression](/python/docs/api/class-locator#locator-evaluate-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), this method will wait for the promise to resolve and return its value.

If [expression](/python/docs/api/class-locator#locator-evaluate-option-expression) throws or rejects, this method throws.

* * *

### evaluate\_all[​](#locator-evaluate-all "Direct link to evaluate_all")

Added in: v1.14 locator.evaluate\_all

Execute JavaScript code in the page, taking all matching elements as an argument.

**Usage**

*   Sync
*   Async

    locator = page.locator("div")more_than_ten = locator.evaluate_all("(divs, min) => divs.length > min", 10)

    locator = page.locator("div")more_than_ten = await locator.evaluate_all("(divs, min) => divs.length > min", 10)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-evaluate-all-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-evaluate-all-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-locator#locator-evaluate-all-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#locator-evaluate-all-return)

**Details**

Returns the return value of [expression](/python/docs/api/class-locator#locator-evaluate-all-option-expression), called with an array of all matching elements as a first argument, and [arg](/python/docs/api/class-locator#locator-evaluate-all-option-arg) as a second argument.

If [expression](/python/docs/api/class-locator#locator-evaluate-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), this method will wait for the promise to resolve and return its value.

If [expression](/python/docs/api/class-locator#locator-evaluate-all-option-expression) throws or rejects, this method throws.

* * *

### evaluate\_handle[​](#locator-evaluate-handle "Direct link to evaluate_handle")

Added in: v1.14 locator.evaluate\_handle

Execute JavaScript code in the page, taking the matching element as an argument, and return a [JSHandle](/python/docs/api/class-jshandle "JSHandle") with the result.

**Usage**

    locator.evaluate_handle(expression)locator.evaluate_handle(expression, **kwargs)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-evaluate-handle-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-evaluate-handle-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-locator#locator-evaluate-handle-option-expression).
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-evaluate-handle-option-timeout)
    
    Maximum time in milliseconds to wait for the locator before evaluating. Note that after locator is resolved, evaluation itself is not limited by the timeout. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#locator-evaluate-handle-return)

**Details**

Returns the return value of [expression](/python/docs/api/class-locator#locator-evaluate-handle-option-expression) as a[JSHandle](/python/docs/api/class-jshandle "JSHandle"), called with the matching element as a first argument, and [arg](/python/docs/api/class-locator#locator-evaluate-handle-option-arg) as a second argument.

The only difference between [locator.evaluate()](/python/docs/api/class-locator#locator-evaluate) and [locator.evaluate\_handle()](/python/docs/api/class-locator#locator-evaluate-handle) is that [locator.evaluate\_handle()](/python/docs/api/class-locator#locator-evaluate-handle) returns [JSHandle](/python/docs/api/class-jshandle "JSHandle").

If [expression](/python/docs/api/class-locator#locator-evaluate-handle-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), this method will wait for the promise to resolve and return its value.

If [expression](/python/docs/api/class-locator#locator-evaluate-handle-option-expression) throws or rejects, this method throws.

See [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) for more details.

* * *

### fill[​](#locator-fill "Direct link to fill")

Added in: v1.14 locator.fill

Set a value to the input field.

**Usage**

*   Sync
*   Async

    page.get_by_role("textbox").fill("example value")

    await page.get_by_role("textbox").fill("example value")

**Arguments**

*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-fill-option-value)
    
    Value to set for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-fill-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-fill-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-fill-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-fill-return)

**Details**

This method waits for [actionability](/python/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

* * *

### filter[​](#locator-filter "Direct link to filter")

Added in: v1.22 locator.filter

This method narrows existing locator according to the options, for example filters by text. It can be chained to filter multiple times.

**Usage**

*   Sync
*   Async

    row_locator = page.locator("tr")# ...row_locator.filter(has_text="text in column 1").filter(    has=page.get_by_role("button", name="column 2 button")).screenshot()

    row_locator = page.locator("tr")# ...await row_locator.filter(has_text="text in column 1").filter(    has=page.get_by_role("button", name="column 2 button")).screenshot()

**Arguments**

*   `has` [Locator](/python/docs/api/class-locator "Locator") _(optional)_[#](#locator-filter-option-has)
    
    Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
    
    Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not` [Locator](/python/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#locator-filter-option-has-not)
    
    Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.33[#](#locator-filter-option-has-not-text)
    
    Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring.
    
*   `has_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#locator-filter-option-has-text)
    
    Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
    
*   `visible` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.51[#](#locator-filter-option-visible)
    
    Only matches visible or invisible elements.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-filter-return)

* * *

### focus[​](#locator-focus "Direct link to focus")

Added in: v1.14 locator.focus

Calls [focus](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus) on the matching element.

**Usage**

    locator.focus()locator.focus(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-focus-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-focus-return)

* * *

### frame\_locator[​](#locator-frame-locator "Direct link to frame_locator")

Added in: v1.17 locator.frame\_locator

When working with iframes, you can create a frame locator that will enter the iframe and allow locating elements in that iframe:

**Usage**

*   Sync
*   Async

    locator = page.frame_locator("iframe").get_by_text("Submit")locator.click()

    locator = page.frame_locator("iframe").get_by_text("Submit")await locator.click()

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#locator-frame-locator-return)

* * *

### get\_attribute[​](#locator-get-attribute "Direct link to get_attribute")

Added in: v1.14 locator.get\_attribute

Returns the matching element's attribute value.

Asserting attributes

If you need to assert an element's attribute, prefer [expect(locator).to\_have\_attribute()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

    locator.get_attribute(name)locator.get_attribute(name, **kwargs)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-get-attribute-option-name)
    
    Attribute name to get the value for.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-get-attribute-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-get-attribute-return)

* * *

### get\_by\_alt\_text[​](#locator-get-by-alt-text "Direct link to get_by_alt_text")

Added in: v1.27 locator.get\_by\_alt\_text

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

*   Sync
*   Async

    page.get_by_alt_text("Playwright logo").click()

    await page.get_by_alt_text("Playwright logo").click()

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-alt-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-alt-text-return)

* * *

### get\_by\_label[​](#locator-get-by-label "Direct link to get_by_label")

Added in: v1.27 locator.get\_by\_label

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

*   Sync
*   Async

    page.get_by_label("Username").fill("john")page.get_by_label("Password").fill("secret")

    await page.get_by_label("Username").fill("john")await page.get_by_label("Password").fill("secret")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-label-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-label-return)

* * *

### get\_by\_placeholder[​](#locator-get-by-placeholder "Direct link to get_by_placeholder")

Added in: v1.27 locator.get\_by\_placeholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

*   Sync
*   Async

    page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

    await page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-placeholder-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-placeholder-return)

* * *

### get\_by\_role[​](#locator-get-by-role "Direct link to get_by_role")

Added in: v1.27 locator.get\_by\_role

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

*   Sync
*   Async

    expect(page.get_by_role("heading", name="Sign up")).to_be_visible()page.get_by_role("checkbox", name="Subscribe").check()page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

    await expect(page.get_by_role("heading", name="Sign up")).to_be_visible()await page.get_by_role("checkbox", name="Subscribe").check()await page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#locator-get-by-role-option-role)
    
    Required aria role.
    
*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-role-option-checked)
    
    An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
    
    Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
    
*   `disabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-role-option-disabled)
    
    An attribute that is usually set by `aria-disabled` or `disabled`.
    
    note
    
    Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#locator-get-by-role-option-exact)
    
    Whether [name](/python/docs/api/class-locator#locator-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/python/docs/api/class-locator#locator-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
    
*   `expanded` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-role-option-expanded)
    
    An attribute that is usually set by `aria-expanded`.
    
    Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
    
*   `include_hidden` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-role-option-include-hidden)
    
    Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
    
    Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
    
*   `level` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#locator-get-by-role-option-level)
    
    A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
    
    Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#locator-get-by-role-option-name)
    
    Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/python/docs/api/class-locator#locator-get-by-role-option-exact) to control this behavior.
    
    Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
*   `pressed` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-role-option-pressed)
    
    An attribute that is usually set by `aria-pressed`.
    
    Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
    
*   `selected` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-role-option-selected)
    
    An attribute that is usually set by `aria-selected`.
    
    Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### get\_by\_test\_id[​](#locator-get-by-test-id "Direct link to get_by_test_id")

Added in: v1.27 locator.get\_by\_test\_id

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">Itinéraire</button>

You can locate the element by it's test id:

*   Sync
*   Async

    page.get_by_test_id("directions").click()

    await page.get_by_test_id("directions").click()

**Arguments**

*   `test_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.set\_test\_id\_attribute()](/python/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

* * *

### get\_by\_text[​](#locator-get-by-text "Direct link to get_by_text")

Added in: v1.27 locator.get\_by\_text

Allows locating elements that contain given text.

See also [locator.filter()](/python/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

*   Sync
*   Async

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### get\_by\_title[​](#locator-get-by-title "Direct link to get_by_title")

Added in: v1.27 locator.get\_by\_title

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

*   Sync
*   Async

    expect(page.get_by_title("Issues count")).to_have_text("25 issues")

    await expect(page.get_by_title("Issues count")).to_have_text("25 issues")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-get-by-title-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-get-by-title-return)

* * *

### highlight[​](#locator-highlight "Direct link to highlight")

Added in: v1.20 locator.highlight

Highlight the corresponding element(s) on the screen. Useful for debugging, don't commit the code that uses [locator.highlight()](/python/docs/api/class-locator#locator-highlight).

**Usage**

    locator.highlight()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-highlight-return)

* * *

### hover[​](#locator-hover "Direct link to hover")

Added in: v1.14 locator.hover

Hover over the matching element.

**Usage**

*   Sync
*   Async

    page.get_by_role("link").hover()

    await page.get_by_role("link").hover()

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-hover-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#locator-hover-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#locator-hover-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-hover-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-hover-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-hover-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-hover-return)

**Details**

This method hovers over the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-locator#locator-hover-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/python/docs/api/class-locator#locator-hover-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-hover-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### inner\_html[​](#locator-inner-html "Direct link to inner_html")

Added in: v1.14 locator.inner\_html

Returns the [`element.innerHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML).

**Usage**

    locator.inner_html()locator.inner_html(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-inner-html-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-inner-html-return)

* * *

### inner\_text[​](#locator-inner-text "Direct link to inner_text")

Added in: v1.14 locator.inner\_text

Returns the [`element.innerText`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText).

Asserting text

If you need to assert text on the page, prefer [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) with [use\_inner\_text](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text-option-use-inner-text) option to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

    locator.inner_text()locator.inner_text(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-inner-text-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-inner-text-return)

* * *

### input\_value[​](#locator-input-value "Direct link to input_value")

Added in: v1.14 locator.input\_value

Returns the value for the matching `<input>` or `<textarea>` or `<select>` element.

Asserting value

If you need to assert input value, prefer [expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    value = page.get_by_role("textbox").input_value()

    value = await page.get_by_role("textbox").input_value()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-input-value-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-input-value-return)

**Details**

Throws elements that are not an input, textarea or a select. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

* * *

### is\_checked[​](#locator-is-checked "Direct link to is_checked")

Added in: v1.14 locator.is\_checked

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

Asserting checked state

If you need to assert that checkbox is checked, prefer [expect(locator).to\_be\_checked()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    checked = page.get_by_role("checkbox").is_checked()

    checked = await page.get_by_role("checkbox").is_checked()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-is-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-is-checked-return)

* * *

### is\_disabled[​](#locator-is-disabled "Direct link to is_disabled")

Added in: v1.14 locator.is\_disabled

Returns whether the element is disabled, the opposite of [enabled](/python/docs/actionability#enabled).

Asserting disabled state

If you need to assert that an element is disabled, prefer [expect(locator).to\_be\_disabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-disabled) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    disabled = page.get_by_role("button").is_disabled()

    disabled = await page.get_by_role("button").is_disabled()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-is-disabled-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-is-disabled-return)

* * *

### is\_editable[​](#locator-is-editable "Direct link to is_editable")

Added in: v1.14 locator.is\_editable

Returns whether the element is [editable](/python/docs/actionability#editable). If the target element is not an `<input>`, `<textarea>`, `<select>`, `[contenteditable]` and does not have a role allowing `[aria-readonly]`, this method throws an error.

Asserting editable state

If you need to assert that an element is editable, prefer [expect(locator).to\_be\_editable()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-editable) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    editable = page.get_by_role("textbox").is_editable()

    editable = await page.get_by_role("textbox").is_editable()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-is-editable-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-is-editable-return)

* * *

### is\_enabled[​](#locator-is-enabled "Direct link to is_enabled")

Added in: v1.14 locator.is\_enabled

Returns whether the element is [enabled](/python/docs/actionability#enabled).

Asserting enabled state

If you need to assert that an element is enabled, prefer [expect(locator).to\_be\_enabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-enabled) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    enabled = page.get_by_role("button").is_enabled()

    enabled = await page.get_by_role("button").is_enabled()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-is-enabled-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-is-enabled-return)

* * *

### is\_hidden[​](#locator-is-hidden "Direct link to is_hidden")

Added in: v1.14 locator.is\_hidden

Returns whether the element is hidden, the opposite of [visible](/python/docs/actionability#visible).

Asserting visibility

If you need to assert that element is hidden, prefer [expect(locator).to\_be\_hidden()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-hidden) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    hidden = page.get_by_role("button").is_hidden()

    hidden = await page.get_by_role("button").is_hidden()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-is-hidden-option-timeout)
    
    Deprecated
    
    This option is ignored. [locator.is\_hidden()](/python/docs/api/class-locator#locator-is-hidden) does not wait for the element to become hidden and returns immediately.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-is-hidden-return)

* * *

### is\_visible[​](#locator-is-visible "Direct link to is_visible")

Added in: v1.14 locator.is\_visible

Returns whether the element is [visible](/python/docs/actionability#visible).

Asserting visibility

If you need to assert that element is visible, prefer [expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

*   Sync
*   Async

    visible = page.get_by_role("button").is_visible()

    visible = await page.get_by_role("button").is_visible()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-is-visible-option-timeout)
    
    Deprecated
    
    This option is ignored. [locator.is\_visible()](/python/docs/api/class-locator#locator-is-visible) does not wait for the element to become visible and returns immediately.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-is-visible-return)

* * *

### locator[​](#locator-locator "Direct link to locator")

Added in: v1.14 locator.locator

The method finds an element matching the specified selector in the locator's subtree. It also accepts filter options, similar to [locator.filter()](/python/docs/api/class-locator#locator-filter) method.

[Learn more about locators](/python/docs/locators).

**Usage**

    locator.locator(selector_or_locator)locator.locator(selector_or_locator, **kwargs)

**Arguments**

*   `selector_or_locator` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Locator](/python/docs/api/class-locator "Locator")[#](#locator-locator-option-selector-or-locator)
    
    A selector or locator to use when resolving DOM element.
    
*   `has` [Locator](/python/docs/api/class-locator "Locator") _(optional)_[#](#locator-locator-option-has)
    
    Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
    
    Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not` [Locator](/python/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#locator-locator-option-has-not)
    
    Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.33[#](#locator-locator-option-has-not-text)
    
    Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring.
    
*   `has_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#locator-locator-option-has-text)
    
    Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-locator-return)

* * *

### nth[​](#locator-nth "Direct link to nth")

Added in: v1.14 locator.nth

Returns locator to the n-th matching element. It's zero based, `nth(0)` selects the first element.

**Usage**

*   Sync
*   Async

    banana = page.get_by_role("listitem").nth(2)

    banana = await page.get_by_role("listitem").nth(2)

**Arguments**

*   `index` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")[#](#locator-nth-option-index)

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-nth-return)

* * *

### or\_[​](#locator-or "Direct link to or_")

Added in: v1.33 locator.or\_

Creates a locator matching all elements that match one or both of the two locators.

Note that when both locators match something, the resulting locator will have multiple matches, potentially causing a [locator strictness](/python/docs/locators#strictness) violation.

**Usage**

Consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly.

note

If both "New email" button and security dialog appear on screen, the "or" locator will match both of them, possibly throwing the ["strict mode violation" error](/python/docs/locators#strictness). In this case, you can use [locator.first](/python/docs/api/class-locator#locator-first) to only match one of them.

*   Sync
*   Async

    new_email = page.get_by_role("button", name="New")dialog = page.get_by_text("Confirm security settings")expect(new_email.or_(dialog).first).to_be_visible()if (dialog.is_visible()):  page.get_by_role("button", name="Dismiss").click()new_email.click()

    new_email = page.get_by_role("button", name="New")dialog = page.get_by_text("Confirm security settings")await expect(new_email.or_(dialog).first).to_be_visible()if (await dialog.is_visible()):  await page.get_by_role("button", name="Dismiss").click()await new_email.click()

**Arguments**

*   `locator` [Locator](/python/docs/api/class-locator "Locator")[#](#locator-or-option-locator)
    
    Alternative locator to match.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-or-return)

* * *

### press[​](#locator-press "Direct link to press")

Added in: v1.14 locator.press

Focuses the matching element and presses a combination of the keys.

**Usage**

*   Sync
*   Async

    page.get_by_role("textbox").press("Backspace")

    await page.get_by_role("textbox").press("Backspace")

**Arguments**

*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-press-option-delay)
    
    Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-press-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-press-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-press-return)

**Details**

Focuses the element, and then uses [keyboard.down()](/python/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up).

[key](/python/docs/api/class-locator#locator-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/python/docs/api/class-locator#locator-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/python/docs/api/class-locator#locator-press-option-key) in the upper case.

If [key](/python/docs/api/class-locator#locator-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

* * *

### press\_sequentially[​](#locator-press-sequentially "Direct link to press_sequentially")

Added in: v1.38 locator.press\_sequentially

tip

In most cases, you should use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page.

Focuses the element, and then sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [locator.press()](/python/docs/api/class-locator#locator-press).

**Usage**

*   Sync
*   Async

    locator.press_sequentially("hello") # types instantlylocator.press_sequentially("world", delay=100) # types slower, like a user

    await locator.press_sequentially("hello") # types instantlyawait locator.press_sequentially("world", delay=100) # types slower, like a user

An example of typing into a text field and then submitting the form:

*   Sync
*   Async

    locator = page.get_by_label("Password")locator.press_sequentially("my password")locator.press("Enter")

    locator = page.get_by_label("Password")await locator.press_sequentially("my password")await locator.press("Enter")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-press-sequentially-option-text)
    
    String of characters to sequentially press into a focused element.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-press-sequentially-option-delay)
    
    Time to wait between key presses in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-press-sequentially-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-press-sequentially-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-press-sequentially-return)

* * *

### screenshot[​](#locator-screenshot "Direct link to screenshot")

Added in: v1.14 locator.screenshot

Take a screenshot of the element matching the locator.

**Usage**

*   Sync
*   Async

    page.get_by_role("link").screenshot()

    await page.get_by_role("link").screenshot()

Disable animations and save screenshot to a file:

*   Sync
*   Async

    page.get_by_role("link").screenshot(animations="disabled", path="link.png")

    await page.get_by_role("link").screenshot(animations="disabled", path="link.png")

**Arguments**

*   `animations` "disabled" | "allow" _(optional)_[#](#locator-screenshot-option-animations)
    
    When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
    
    *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
    *   infinite animations are canceled to initial state, and then played over after the screenshot.
    
    Defaults to `"allow"` that leaves animations untouched.
    
*   `caret` "hide" | "initial" _(optional)_[#](#locator-screenshot-option-caret)
    
    When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
    
*   `mask` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Locator](/python/docs/api/class-locator "Locator")\] _(optional)_[#](#locator-screenshot-option-mask)
    
    Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [mask\_color](/python/docs/api/class-locator#locator-screenshot-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/python/docs/locators#matching-only-visible-elements) to disable that.
    
*   `mask_color` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.35[#](#locator-screenshot-option-mask-color)
    
    Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
    
*   `omit_background` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-screenshot-option-omit-background)
    
    Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#locator-screenshot-option-path)
    
    The file path to save the image to. The screenshot type will be inferred from file extension. If [path](/python/docs/api/class-locator#locator-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
    
*   `quality` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#locator-screenshot-option-quality)
    
    The quality of the image, between 0-100. Not applicable to `png` images.
    
*   `scale` "css" | "device" _(optional)_[#](#locator-screenshot-option-scale)
    
    When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
    
    Defaults to `"device"`.
    
*   `style` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.41[#](#locator-screenshot-option-style)
    
    Text of the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-screenshot-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `type` "png" | "jpeg" _(optional)_[#](#locator-screenshot-option-type)
    
    Specify screenshot type, defaults to `png`.
    

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#locator-screenshot-return)

**Details**

This method captures a screenshot of the page, clipped to the size and position of a particular element matching the locator. If the element is covered by other elements, it will not be actually visible on the screenshot. If the element is a scrollable container, only the currently scrolled content will be visible on the screenshot.

This method waits for the [actionability](/python/docs/actionability) checks, then scrolls element into view before taking a screenshot. If the element is detached from DOM, the method throws an error.

Returns the buffer with the captured screenshot.

* * *

### scroll\_into\_view\_if\_needed[​](#locator-scroll-into-view-if-needed "Direct link to scroll_into_view_if_needed")

Added in: v1.14 locator.scroll\_into\_view\_if\_needed

This method waits for [actionability](/python/docs/actionability) checks, then tries to scroll element into view, unless it is completely visible as defined by [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)'s `ratio`.

See [scrolling](/python/docs/input#scrolling) for alternative ways to scroll.

**Usage**

    locator.scroll_into_view_if_needed()locator.scroll_into_view_if_needed(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-scroll-into-view-if-needed-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-scroll-into-view-if-needed-return)

* * *

### select\_option[​](#locator-select-option "Direct link to select_option")

Added in: v1.14 locator.select\_option

Selects option or options in `<select>`.

**Usage**

    <select multiple>  <option value="red">Red</option>  <option value="green">Green</option>  <option value="blue">Blue</option></select>

*   Sync
*   Async

    # single selection matching the value or labelelement.select_option("blue")# single selection matching the labelelement.select_option(label="blue")# multiple selection for blue, red and second optionelement.select_option(value=["red", "green", "blue"])

    # single selection matching the value or labelawait element.select_option("blue")# single selection matching the labelawait element.select_option(label="blue")# multiple selection for blue, red and second optionawait element.select_option(value=["red", "green", "blue"])

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-select-option-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-select-option-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-select-option-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `element` [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\] _(optional)_[#](#locator-select-option-option-element)
    
    Option elements to select. Optional.
    
*   `index` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")\] _(optional)_[#](#locator-select-option-option-index)
    
    Options to select by index. Optional.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#locator-select-option-option-value)
    
    Options to select by value. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    
*   `label` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#locator-select-option-option-label)
    
    Options to select by label. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#locator-select-option-return)

**Details**

This method waits for [actionability](/python/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

* * *

### select\_text[​](#locator-select-text "Direct link to select_text")

Added in: v1.14 locator.select\_text

This method waits for [actionability](/python/docs/actionability) checks, then focuses the element and selects all its text content.

If the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), focuses and selects text in the control instead.

**Usage**

    locator.select_text()locator.select_text(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-select-text-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-select-text-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-select-text-return)

* * *

### set\_checked[​](#locator-set-checked "Direct link to set_checked")

Added in: v1.15 locator.set\_checked

Set the state of a checkbox or a radio element.

**Usage**

*   Sync
*   Async

    page.get_by_role("checkbox").set_checked(True)

    await page.get_by_role("checkbox").set_checked(True)

**Arguments**

*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#locator-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-set-checked-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-set-checked-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-set-checked-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-set-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-set-checked-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-set-checked-return)

**Details**

This method checks or unchecks an element by performing the following steps:

1.  Ensure that matched element is a checkbox or a radio input. If not, this method throws.
2.  If the element already has the right checked state, this method returns immediately.
3.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-locator#locator-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-set-checked-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### set\_input\_files[​](#locator-set-input-files "Direct link to set_input_files")

Added in: v1.14 locator.set\_input\_files

Upload file or multiple files into `<input type=file>`. For inputs with a `[webkitdirectory]` attribute, only a single directory path is supported.

**Usage**

*   Sync
*   Async

    # Select one filepage.get_by_label("Upload file").set_input_files('myfile.pdf')# Select multiple filespage.get_by_label("Upload files").set_input_files(['file1.txt', 'file2.txt'])# Select a directorypage.get_by_label("Upload directory").set_input_files('mydir')# Remove all the selected filespage.get_by_label("Upload file").set_input_files([])# Upload buffer from memorypage.get_by_label("Upload file").set_input_files(    files=[        {"name": "test.txt", "mimeType": "text/plain", "buffer": b"this is a test"}    ],)

    # Select one fileawait page.get_by_label("Upload file").set_input_files('myfile.pdf')# Select multiple filesawait page.get_by_label("Upload files").set_input_files(['file1.txt', 'file2.txt'])# Select a directoryawait page.get_by_label("Upload directory").set_input_files('mydir')# Remove all the selected filesawait page.get_by_label("Upload file").set_input_files([])# Upload buffer from memoryawait page.get_by_label("Upload file").set_input_files(    files=[        {"name": "test.txt", "mimeType": "text/plain", "buffer": b"this is a test"}    ],)

**Arguments**

*   `files` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\]\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#locator-set-input-files-option-files)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-set-input-files-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-set-input-files-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-set-input-files-return)

**Details**

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files.

This method expects [Locator](/python/docs/api/class-locator "Locator") to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

* * *

### tap[​](#locator-tap "Direct link to tap")

Added in: v1.14 locator.tap

Perform a tap gesture on the element matching the locator. For examples of emulating other gestures by manually dispatching touch events, see the [emulating legacy touch events](/python/docs/touch-events) page.

**Usage**

    locator.tap()locator.tap(**kwargs)

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-tap-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#locator-tap-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-tap-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-tap-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-tap-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-tap-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-tap-return)

**Details**

This method taps the element by performing the following steps:

1.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-locator#locator-tap-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.touchscreen](/python/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/python/docs/api/class-locator#locator-tap-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-tap-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`element.tap()` requires that the `hasTouch` option of the browser context be set to true.

* * *

### text\_content[​](#locator-text-content "Direct link to text_content")

Added in: v1.14 locator.text\_content

Returns the [`node.textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent).

Asserting text

If you need to assert text on the page, prefer [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text) to avoid flakiness. See [assertions guide](/python/docs/test-assertions) for more details.

**Usage**

    locator.text_content()locator.text_content(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-text-content-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-text-content-return)

* * *

### uncheck[​](#locator-uncheck "Direct link to uncheck")

Added in: v1.14 locator.uncheck

Ensure that checkbox or radio element is unchecked.

**Usage**

*   Sync
*   Async

    page.get_by_role("checkbox").uncheck()

    await page.get_by_role("checkbox").uncheck()

**Arguments**

*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-uncheck-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-uncheck-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#locator-uncheck-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-uncheck-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-uncheck-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-uncheck-return)

**Details**

This method unchecks the element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
2.  Wait for [actionability](/python/docs/actionability) checks on the element, unless [force](/python/docs/api/class-locator#locator-uncheck-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now unchecked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-locator#locator-uncheck-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### wait\_for[​](#locator-wait-for "Direct link to wait_for")

Added in: v1.16 locator.wait\_for

Returns when element specified by locator satisfies the [state](/python/docs/api/class-locator#locator-wait-for-option-state) option.

If target element already satisfies the condition, the method returns immediately. Otherwise, waits for up to [timeout](/python/docs/api/class-locator#locator-wait-for-option-timeout) milliseconds until the condition is met.

**Usage**

*   Sync
*   Async

    order_sent = page.locator("#order-sent")order_sent.wait_for()

    order_sent = page.locator("#order-sent")await order_sent.wait_for()

**Arguments**

*   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#locator-wait-for-option-state)
    
    Defaults to `'visible'`. Can be either:
    
    *   `'attached'` - wait for element to be present in DOM.
    *   `'detached'` - wait for element to not be present in DOM.
    *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
    *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-wait-for-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-wait-for-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### content\_frame[​](#locator-content-frame "Direct link to content_frame")

Added in: v1.43 locator.content\_frame

Returns a [FrameLocator](/python/docs/api/class-framelocator "FrameLocator") object pointing to the same `iframe` as this locator.

Useful when you have a [Locator](/python/docs/api/class-locator "Locator") object obtained somewhere, and later on would like to interact with the content inside the frame.

For a reverse operation, use [frame\_locator.owner](/python/docs/api/class-framelocator#frame-locator-owner).

**Usage**

*   Sync
*   Async

    locator = page.locator("iframe[name=\"embedded\"]")# ...frame_locator = locator.content_frameframe_locator.get_by_role("button").click()

    locator = page.locator("iframe[name=\"embedded\"]")# ...frame_locator = locator.content_frameawait frame_locator.get_by_role("button").click()

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#locator-content-frame-return)

* * *

### first[​](#locator-first "Direct link to first")

Added in: v1.14 locator.first

Returns locator to the first matching element.

**Usage**

    locator.first

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-first-return)

* * *

### last[​](#locator-last "Direct link to last")

Added in: v1.14 locator.last

Returns locator to the last matching element.

**Usage**

*   Sync
*   Async

    banana = page.get_by_role("listitem").last

    banana = await page.get_by_role("listitem").last

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#locator-last-return)

* * *

### page[​](#locator-page "Direct link to page")

Added in: v1.19 locator.page

A page this locator belongs to.

**Usage**

    locator.page

**Returns**

*   [Page](/python/docs/api/class-page "Page")[#](#locator-page-return)

* * *

Deprecated[​](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### element\_handle[​](#locator-element-handle "Direct link to element_handle")

Added in: v1.14 locator.element\_handle

Discouraged

Always prefer using [Locator](/python/docs/api/class-locator "Locator")s and web assertions over [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")s because latter are inherently racy.

Resolves given locator to the first matching DOM element. If there are no matching elements, waits for one. If multiple elements match the locator, throws.

**Usage**

    locator.element_handle()locator.element_handle(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-element-handle-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#locator-element-handle-return)

* * *

### element\_handles[​](#locator-element-handles "Direct link to element_handles")

Added in: v1.14 locator.element\_handles

Discouraged

Always prefer using [Locator](/python/docs/api/class-locator "Locator")s and web assertions over [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")s because latter are inherently racy.

Resolves given locator to all matching DOM elements. If there are no matching elements, returns an empty list.

**Usage**

    locator.element_handles()

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\][#](#locator-element-handles-return)

* * *

### type[​](#locator-type "Direct link to type")

Added in: v1.14 locator.type

Deprecated

In most cases, you should use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

Focuses the element, and then sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [locator.press()](/python/docs/api/class-locator#locator-press).

**Usage**

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-type-option-text)
    
    A text to type into a focused element.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-type-option-delay)
    
    Time to wait between key presses in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-type-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-type-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-type-return)

# Mouse

Mouse
=====

The Mouse class operates in main-frame CSS pixels relative to the top-left corner of the viewport.

Every `page` object has its own Mouse, accessible with [page.mouse](/python/docs/api/class-page#page-mouse).

*   Sync
*   Async

    # using ‘page.mouse’ to trace a 100x100 square.page.mouse.move(0, 0)page.mouse.down()page.mouse.move(0, 100)page.mouse.move(100, 100)page.mouse.move(100, 0)page.mouse.move(0, 0)page.mouse.up()

    # using ‘page.mouse’ to trace a 100x100 square.await page.mouse.move(0, 0)await page.mouse.down()await page.mouse.move(0, 100)await page.mouse.move(100, 100)await page.mouse.move(100, 0)await page.mouse.move(0, 0)await page.mouse.up()

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### click[​](#mouse-click "Direct link to click")

Added before v1.9 mouse.click

Shortcut for [mouse.move()](/python/docs/api/class-mouse#mouse-move), [mouse.down()](/python/docs/api/class-mouse#mouse-down), [mouse.up()](/python/docs/api/class-mouse#mouse-up).

**Usage**

    mouse.click(x, y)mouse.click(x, y, **kwargs)

**Arguments**

*   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-click-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-click-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    
*   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-click-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#mouse-click-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#mouse-click-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#mouse-click-return)

* * *

### dblclick[​](#mouse-dblclick "Direct link to dblclick")

Added before v1.9 mouse.dblclick

Shortcut for [mouse.move()](/python/docs/api/class-mouse#mouse-move), [mouse.down()](/python/docs/api/class-mouse#mouse-down), [mouse.up()](/python/docs/api/class-mouse#mouse-up), [mouse.down()](/python/docs/api/class-mouse#mouse-down) and [mouse.up()](/python/docs/api/class-mouse#mouse-up).

**Usage**

    mouse.dblclick(x, y)mouse.dblclick(x, y, **kwargs)

**Arguments**

*   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-dblclick-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-dblclick-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    
*   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-dblclick-option-button)
    
    Defaults to `left`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#mouse-dblclick-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#mouse-dblclick-return)

* * *

### down[​](#mouse-down "Direct link to down")

Added before v1.9 mouse.down

Dispatches a `mousedown` event.

**Usage**

    mouse.down()mouse.down(**kwargs)

**Arguments**

*   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-down-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#mouse-down-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#mouse-down-return)

* * *

### move[​](#mouse-move "Direct link to move")

Added before v1.9 mouse.move

Dispatches a `mousemove` event.

**Usage**

    mouse.move(x, y)mouse.move(x, y, **kwargs)

**Arguments**

*   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-move-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-move-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    
*   `steps` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#mouse-move-option-steps)
    
    Defaults to 1. Sends intermediate `mousemove` events.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#mouse-move-return)

* * *

### up[​](#mouse-up "Direct link to up")

Added before v1.9 mouse.up

Dispatches a `mouseup` event.

**Usage**

    mouse.up()mouse.up(**kwargs)

**Arguments**

*   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-up-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#mouse-up-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#mouse-up-return)

* * *

### wheel[​](#mouse-wheel "Direct link to wheel")

Added in: v1.15 mouse.wheel

Dispatches a `wheel` event. This method is usually used to manually scroll the page. See [scrolling](/python/docs/input#scrolling) for alternative ways to scroll.

note

Wheel events may cause scrolling if they are not handled, and this method does not wait for the scrolling to finish before returning.

**Usage**

    mouse.wheel(delta_x, delta_y)

**Arguments**

*   `delta_x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-wheel-option-delta-x)
    
    Pixels to scroll horizontally.
    
*   `delta_y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#mouse-wheel-option-delta-y)
    
    Pixels to scroll vertically.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#mouse-wheel-return)

# Page

Page
====

Page provides methods to interact with a single tab in a [Browser](/python/docs/api/class-browser "Browser"), or an [extension background page](https://developer.chrome.com/extensions/background_pages) in Chromium. One [Browser](/python/docs/api/class-browser "Browser") instance might have multiple [Page](/python/docs/api/class-page "Page") instances.

This example creates a page, navigates it to a URL, and then saves a screenshot:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch()    context = browser.new_context()    page = context.new_page()    page.goto("https://example.com")    page.screenshot(path="screenshot.png")    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch()    context = await browser.new_context()    page = await context.new_page()    await page.goto("https://example.com")    await page.screenshot(path="screenshot.png")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

The Page class emits various events (described below) which can be handled using any of Node's native [`EventEmitter`](https://nodejs.org/api/events.html#events_class_eventemitter) methods, such as `on`, `once` or `removeListener`.

This example logs a message for a single page `load` event:

    page.once("load", lambda: print("page loaded!"))

To unsubscribe from events use the `removeListener` method:

    def log_request(intercepted_request):    print("a request was made:", intercepted_request.url)page.on("request", log_request)# sometime later...page.remove_listener("request", log_request)

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### add\_init\_script[​](#page-add-init-script "Direct link to add_init_script")

Added before v1.9 page.add\_init\_script

Adds a script which would be evaluated in one of the following scenarios:

*   Whenever the page is navigated.
*   Whenever the child frame is attached or navigated. In this case, the script is evaluated in the context of the newly attached frame.

The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed `Math.random`.

**Usage**

An example of overriding `Math.random` before the page loads:

    // preload.jsMath.random = () => 42;

*   Sync
*   Async

    # in your playwright script, assuming the preload.js file is in same directorypage.add_init_script(path="./preload.js")

    # in your playwright script, assuming the preload.js file is in same directoryawait page.add_init_script(path="./preload.js")

note

The order of evaluation of multiple scripts installed via [browser\_context.add\_init\_script()](/python/docs/api/class-browsercontext#browser-context-add-init-script) and [page.add\_init\_script()](/python/docs/api/class-page#page-add-init-script) is not defined.

**Arguments**

*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#page-add-init-script-option-path)
    
    Path to the JavaScript file. If `path` is a relative path, then it is resolved relative to the current working directory. Optional.
    
*   `script` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-add-init-script-option-script)
    
    Script to be evaluated in all pages in the browser context. Optional.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-add-init-script-return)

* * *

### add\_locator\_handler[​](#page-add-locator-handler "Direct link to add_locator_handler")

Added in: v1.42 page.add\_locator\_handler

When testing a web page, sometimes unexpected overlays like a "Sign up" dialog appear and block actions you want to automate, e.g. clicking a button. These overlays don't always show up in the same way or at the same time, making them tricky to handle in automated tests.

This method lets you set up a special function, called a handler, that activates when it detects that overlay is visible. The handler's job is to remove the overlay, allowing your test to continue as if the overlay wasn't there.

Things to keep in mind:

*   When an overlay is shown predictably, we recommend explicitly waiting for it in your test and dismissing it as a part of your normal test flow, instead of using [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler).
*   Playwright checks for the overlay every time before executing or retrying an action that requires an [actionability check](/python/docs/actionability), or before performing an auto-waiting assertion check. When overlay is visible, Playwright calls the handler first, and then proceeds with the action/assertion. Note that the handler is only called when you perform an action/assertion - if the overlay becomes visible but you don't perform any actions, the handler will not be triggered.
*   After executing the handler, Playwright will ensure that overlay that triggered the handler is not visible anymore. You can opt-out of this behavior with [no\_wait\_after](/python/docs/api/class-page#page-add-locator-handler-option-no-wait-after).
*   The execution time of the handler counts towards the timeout of the action/assertion that executed the handler. If your handler takes too long, it might cause timeouts.
*   You can register multiple handlers. However, only a single handler will be running at a time. Make sure the actions within a handler don't depend on another handler.

warning

Running the handler will alter your page state mid-test. For example it will change the currently focused element and move the mouse. Make sure that actions that run after the handler are self-contained and do not rely on the focus and mouse state being unchanged.

For example, consider a test that calls [locator.focus()](/python/docs/api/class-locator#locator-focus) followed by [keyboard.press()](/python/docs/api/class-keyboard#keyboard-press). If your handler clicks a button between these two actions, the focused element most likely will be wrong, and key press will happen on the unexpected element. Use [locator.press()](/python/docs/api/class-locator#locator-press) instead to avoid this problem.

Another example is a series of mouse actions, where [mouse.move()](/python/docs/api/class-mouse#mouse-move) is followed by [mouse.down()](/python/docs/api/class-mouse#mouse-down). Again, when the handler runs between these two actions, the mouse position will be wrong during the mouse down. Prefer self-contained actions like [locator.click()](/python/docs/api/class-locator#locator-click) that do not rely on the state being unchanged by a handler.

**Usage**

An example that closes a "Sign up to the newsletter" dialog when it appears:

*   Sync
*   Async

    # Setup the handler.def handler():  page.get_by_role("button", name="No thanks").click()page.add_locator_handler(page.get_by_text("Sign up to the newsletter"), handler)# Write the test as usual.page.goto("https://example.com")page.get_by_role("button", name="Start here").click()

    # Setup the handler.def handler():  await page.get_by_role("button", name="No thanks").click()await page.add_locator_handler(page.get_by_text("Sign up to the newsletter"), handler)# Write the test as usual.await page.goto("https://example.com")await page.get_by_role("button", name="Start here").click()

An example that skips the "Confirm your security details" page when it is shown:

*   Sync
*   Async

    # Setup the handler.def handler():  page.get_by_role("button", name="Remind me later").click()page.add_locator_handler(page.get_by_text("Confirm your security details"), handler)# Write the test as usual.page.goto("https://example.com")page.get_by_role("button", name="Start here").click()

    # Setup the handler.def handler():  await page.get_by_role("button", name="Remind me later").click()await page.add_locator_handler(page.get_by_text("Confirm your security details"), handler)# Write the test as usual.await page.goto("https://example.com")await page.get_by_role("button", name="Start here").click()

An example with a custom callback on every actionability check. It uses a `<body>` locator that is always visible, so the handler is called before every actionability check. It is important to specify [no\_wait\_after](/python/docs/api/class-page#page-add-locator-handler-option-no-wait-after), because the handler does not hide the `<body>` element.

*   Sync
*   Async

    # Setup the handler.def handler():  page.evaluate("window.removeObstructionsForTestIfNeeded()")page.add_locator_handler(page.locator("body"), handler, no_wait_after=True)# Write the test as usual.page.goto("https://example.com")page.get_by_role("button", name="Start here").click()

    # Setup the handler.def handler():  await page.evaluate("window.removeObstructionsForTestIfNeeded()")await page.add_locator_handler(page.locator("body"), handler, no_wait_after=True)# Write the test as usual.await page.goto("https://example.com")await page.get_by_role("button", name="Start here").click()

Handler takes the original locator as an argument. You can also automatically remove the handler after a number of invocations by setting [times](/python/docs/api/class-page#page-add-locator-handler-option-times):

*   Sync
*   Async

    def handler(locator):  locator.click()page.add_locator_handler(page.get_by_label("Close"), handler, times=1)

    def handler(locator):  await locator.click()await page.add_locator_handler(page.get_by_label("Close"), handler, times=1)

**Arguments**

*   `locator` [Locator](/python/docs/api/class-locator "Locator")[#](#page-add-locator-handler-option-locator)
    
    Locator that triggers the handler.
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Locator](/python/docs/api/class-locator "Locator")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\][#](#page-add-locator-handler-option-handler)
    
    Function that should be run once [locator](/python/docs/api/class-page#page-add-locator-handler-option-locator) appears. This function should get rid of the element that blocks actions like click.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.44[#](#page-add-locator-handler-option-no-wait-after)
    
    By default, after calling the handler Playwright will wait until the overlay becomes hidden, and only then Playwright will continue with the action/assertion that triggered the handler. This option allows to opt-out of this behavior, so that overlay can stay visible after the handler has run.
    
*   `times` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.44[#](#page-add-locator-handler-option-times)
    
    Specifies the maximum number of times this handler should be called. Unlimited by default.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-add-locator-handler-return)

* * *

### add\_script\_tag[​](#page-add-script-tag "Direct link to add_script_tag")

Added before v1.9 page.add\_script\_tag

Adds a `<script>` tag into the page with the desired url or content. Returns the added tag when the script's onload fires or when the script content was injected into frame.

**Usage**

    page.add_script_tag()page.add_script_tag(**kwargs)

**Arguments**

*   `content` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-add-script-tag-option-content)
    
    Raw JavaScript content to be injected into frame.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#page-add-script-tag-option-path)
    
    Path to the JavaScript file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-add-script-tag-option-type)
    
    Script type. Use 'module' in order to load a JavaScript ES6 module. See [script](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) for more details.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-add-script-tag-option-url)
    
    URL of a script to be added.
    

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#page-add-script-tag-return)

* * *

### add\_style\_tag[​](#page-add-style-tag "Direct link to add_style_tag")

Added before v1.9 page.add\_style\_tag

Adds a `<link rel="stylesheet">` tag into the page with the desired url or a `<style type="text/css">` tag with the content. Returns the added tag when the stylesheet's onload fires or when the CSS content was injected into frame.

**Usage**

    page.add_style_tag()page.add_style_tag(**kwargs)

**Arguments**

*   `content` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-add-style-tag-option-content)
    
    Raw CSS content to be injected into frame.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#page-add-style-tag-option-path)
    
    Path to the CSS file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-add-style-tag-option-url)
    
    URL of the `<link>` tag.
    

**Returns**

*   [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#page-add-style-tag-return)

* * *

### bring\_to\_front[​](#page-bring-to-front "Direct link to bring_to_front")

Added before v1.9 page.bring\_to\_front

Brings page to front (activates tab).

**Usage**

    page.bring_to_front()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-bring-to-front-return)

* * *

### close[​](#page-close "Direct link to close")

Added before v1.9 page.close

If [run\_before\_unload](/python/docs/api/class-page#page-close-option-run-before-unload) is `false`, does not run any unload handlers and waits for the page to be closed. If [run\_before\_unload](/python/docs/api/class-page#page-close-option-run-before-unload) is `true` the method will run unload handlers, but will **not** wait for the page to close.

By default, `page.close()` **does not** run `beforeunload` handlers.

note

if [run\_before\_unload](/python/docs/api/class-page#page-close-option-run-before-unload) is passed as true, a `beforeunload` dialog might be summoned and should be handled manually via [page.on("dialog")](/python/docs/api/class-page#page-event-dialog) event.

**Usage**

    page.close()page.close(**kwargs)

**Arguments**

*   `reason` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.40[#](#page-close-option-reason)
    
    The reason to be reported to the operations interrupted by the page closure.
    
*   `run_before_unload` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-close-option-run-before-unload)
    
    Defaults to `false`. Whether to run the [before unload](https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload) page handlers.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-close-return)

* * *

### content[​](#page-content "Direct link to content")

Added before v1.9 page.content

Gets the full HTML contents of the page, including the doctype.

**Usage**

    page.content()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-content-return)

* * *

### drag\_and\_drop[​](#page-drag-and-drop "Direct link to drag_and_drop")

Added in: v1.13 page.drag\_and\_drop

This method drags the source element to the target element. It will first move to the source element, perform a `mousedown`, then move to the target element and perform a `mouseup`.

**Usage**

*   Sync
*   Async

    page.drag_and_drop("#source", "#target")# or specify exact positions relative to the top-left corners of the elements:page.drag_and_drop(  "#source",  "#target",  source_position={"x": 34, "y": 7},  target_position={"x": 10, "y": 20})

    await page.drag_and_drop("#source", "#target")# or specify exact positions relative to the top-left corners of the elements:await page.drag_and_drop(  "#source",  "#target",  source_position={"x": 34, "y": 7},  target_position={"x": 10, "y": 20})

**Arguments**

*   `source` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-drag-and-drop-option-source)
    
    A selector to search for an element to drag. If there are multiple elements satisfying the selector, the first will be used.
    
*   `target` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-drag-and-drop-option-target)
    
    A selector to search for an element to drop onto. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-drag-and-drop-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-drag-and-drop-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `source_position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.14[#](#page-drag-and-drop-option-source-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-drag-and-drop-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `target_position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.14[#](#page-drag-and-drop-option-target-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-drag-and-drop-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-drag-and-drop-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-drag-and-drop-return)

* * *

### emulate\_media[​](#page-emulate-media "Direct link to emulate_media")

Added before v1.9 page.emulate\_media

This method changes the `CSS media type` through the `media` argument, and/or the `'prefers-colors-scheme'` media feature, using the `colorScheme` argument.

**Usage**

*   Sync
*   Async

    page.evaluate("matchMedia('screen').matches")# → Truepage.evaluate("matchMedia('print').matches")# → Falsepage.emulate_media(media="print")page.evaluate("matchMedia('screen').matches")# → Falsepage.evaluate("matchMedia('print').matches")# → Truepage.emulate_media()page.evaluate("matchMedia('screen').matches")# → Truepage.evaluate("matchMedia('print').matches")# → False

    await page.evaluate("matchMedia('screen').matches")# → Trueawait page.evaluate("matchMedia('print').matches")# → Falseawait page.emulate_media(media="print")await page.evaluate("matchMedia('screen').matches")# → Falseawait page.evaluate("matchMedia('print').matches")# → Trueawait page.emulate_media()await page.evaluate("matchMedia('screen').matches")# → Trueawait page.evaluate("matchMedia('print').matches")# → False

*   Sync
*   Async

    page.emulate_media(color_scheme="dark")page.evaluate("matchMedia('(prefers-color-scheme: dark)').matches")# → Truepage.evaluate("matchMedia('(prefers-color-scheme: light)').matches")# → False

    await page.emulate_media(color_scheme="dark")await page.evaluate("matchMedia('(prefers-color-scheme: dark)').matches")# → Trueawait page.evaluate("matchMedia('(prefers-color-scheme: light)').matches")# → False

**Arguments**

*   `color_scheme` "light" | "dark" | "no-preference" | "null" _(optional)_ Added in: v1.9[#](#page-emulate-media-option-color-scheme)
    
    Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. Passing `'Null'` disables color scheme emulation. `'no-preference'` is deprecated.
    
*   `contrast` "no-preference" | "more" | "null" _(optional)_ Added in: v1.51[#](#page-emulate-media-option-contrast)
    
*   `forced_colors` "active" | "none" | "null" _(optional)_ Added in: v1.15[#](#page-emulate-media-option-forced-colors)
    
*   `media` "screen" | "print" | "null" _(optional)_ Added in: v1.9[#](#page-emulate-media-option-media)
    
    Changes the CSS media type of the page. The only allowed values are `'Screen'`, `'Print'` and `'Null'`. Passing `'Null'` disables CSS media emulation.
    
*   `reduced_motion` "reduce" | "no-preference" | "null" _(optional)_ Added in: v1.12[#](#page-emulate-media-option-reduced-motion)
    
    Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. Passing `null` disables reduced motion emulation.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-emulate-media-return)

* * *

### evaluate[​](#page-evaluate "Direct link to evaluate")

Added before v1.9 page.evaluate

Returns the value of the [expression](/python/docs/api/class-page#page-evaluate-option-expression) invocation.

If the function passed to the [page.evaluate()](/python/docs/api/class-page#page-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.evaluate()](/python/docs/api/class-page#page-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [page.evaluate()](/python/docs/api/class-page#page-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [page.evaluate()](/python/docs/api/class-page#page-evaluate) resolves to `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

Passing argument to [expression](/python/docs/api/class-page#page-evaluate-option-expression):

*   Sync
*   Async

    result = page.evaluate("([x, y]) => Promise.resolve(x * y)", [7, 8])print(result) # prints "56"

    result = await page.evaluate("([x, y]) => Promise.resolve(x * y)", [7, 8])print(result) # prints "56"

A string can also be passed in instead of a function:

*   Sync
*   Async

    print(page.evaluate("1 + 2")) # prints "3"x = 10print(page.evaluate(f"1 + {x}")) # prints "11"

    print(await page.evaluate("1 + 2")) # prints "3"x = 10print(await page.evaluate(f"1 + {x}")) # prints "11"

[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") instances can be passed as an argument to the [page.evaluate()](/python/docs/api/class-page#page-evaluate):

*   Sync
*   Async

    body_handle = page.evaluate("document.body")html = page.evaluate("([body, suffix]) => body.innerHTML + suffix", [body_handle, "hello"])body_handle.dispose()

    body_handle = await page.evaluate("document.body")html = await page.evaluate("([body, suffix]) => body.innerHTML + suffix", [body_handle, "hello"])await body_handle.dispose()

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-evaluate-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-evaluate-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-page#page-evaluate-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#page-evaluate-return)

* * *

### evaluate\_handle[​](#page-evaluate-handle "Direct link to evaluate_handle")

Added before v1.9 page.evaluate\_handle

Returns the value of the [expression](/python/docs/api/class-page#page-evaluate-handle-option-expression) invocation as a [JSHandle](/python/docs/api/class-jshandle "JSHandle").

The only difference between [page.evaluate()](/python/docs/api/class-page#page-evaluate) and [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) is that [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) returns [JSHandle](/python/docs/api/class-jshandle "JSHandle").

If the function passed to the [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    a_window_handle = page.evaluate_handle("Promise.resolve(window)")a_window_handle # handle for the window object.

    a_window_handle = await page.evaluate_handle("Promise.resolve(window)")a_window_handle # handle for the window object.

A string can also be passed in instead of a function:

*   Sync
*   Async

    a_handle = page.evaluate_handle("document") # handle for the "document"

    a_handle = await page.evaluate_handle("document") # handle for the "document"

[JSHandle](/python/docs/api/class-jshandle "JSHandle") instances can be passed as an argument to the [page.evaluate\_handle()](/python/docs/api/class-page#page-evaluate-handle):

*   Sync
*   Async

    a_handle = page.evaluate_handle("document.body")result_handle = page.evaluate_handle("body => body.innerHTML", a_handle)print(result_handle.json_value())result_handle.dispose()

    a_handle = await page.evaluate_handle("document.body")result_handle = await page.evaluate_handle("body => body.innerHTML", a_handle)print(await result_handle.json_value())await result_handle.dispose()

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-evaluate-handle-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-evaluate-handle-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-page#page-evaluate-handle-option-expression).
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#page-evaluate-handle-return)

* * *

### expect\_console\_message[​](#page-wait-for-console-message "Direct link to expect_console_message")

Added in: v1.9 page.expect\_console\_message

Performs action and waits for a [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") to be logged by in the page. If predicate is provided, it passes [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") value into the `predicate` function and waits for `predicate(message)` to return a truthy value. Will throw an error if the page is closed before the [page.on("console")](/python/docs/api/class-page#page-event-console) event is fired.

**Usage**

    page.expect_console_message()page.expect_console_message(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-console-message-option-predicate)
    
    Receives the [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-console-message-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage")\][#](#page-wait-for-console-message-return)

* * *

### expect\_download[​](#page-wait-for-download "Direct link to expect_download")

Added in: v1.9 page.expect\_download

Performs action and waits for a new [Download](/python/docs/api/class-download "Download"). If predicate is provided, it passes [Download](/python/docs/api/class-download "Download") value into the `predicate` function and waits for `predicate(download)` to return a truthy value. Will throw an error if the page is closed before the download event is fired.

**Usage**

    page.expect_download()page.expect_download(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Download](/python/docs/api/class-download "Download")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-download-option-predicate)
    
    Receives the [Download](/python/docs/api/class-download "Download") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-download-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Download](/python/docs/api/class-download "Download")\][#](#page-wait-for-download-return)

* * *

### expect\_event[​](#page-wait-for-event "Direct link to expect_event")

Added before v1.9 page.expect\_event

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the page is closed before the event is fired. Returns the event data value.

**Usage**

*   Sync
*   Async

    with page.expect_event("framenavigated") as event_info:    page.get_by_role("button")frame = event_info.value

    async with page.expect_event("framenavigated") as event_info:    await page.get_by_role("button")frame = await event_info.value

**Arguments**

*   `event` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-wait-for-event-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable") _(optional)_[#](#page-wait-for-event-option-predicate)
    
    Receives the event data and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-event-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")[#](#page-wait-for-event-return)

* * *

### expect\_file\_chooser[​](#page-wait-for-file-chooser "Direct link to expect_file_chooser")

Added in: v1.9 page.expect\_file\_chooser

Performs action and waits for a new [FileChooser](/python/docs/api/class-filechooser "FileChooser") to be created. If predicate is provided, it passes [FileChooser](/python/docs/api/class-filechooser "FileChooser") value into the `predicate` function and waits for `predicate(fileChooser)` to return a truthy value. Will throw an error if the page is closed before the file chooser is opened.

**Usage**

    page.expect_file_chooser()page.expect_file_chooser(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[FileChooser](/python/docs/api/class-filechooser "FileChooser")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-file-chooser-option-predicate)
    
    Receives the [FileChooser](/python/docs/api/class-filechooser "FileChooser") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-file-chooser-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[FileChooser](/python/docs/api/class-filechooser "FileChooser")\][#](#page-wait-for-file-chooser-return)

* * *

### expect\_popup[​](#page-wait-for-popup "Direct link to expect_popup")

Added in: v1.9 page.expect\_popup

Performs action and waits for a popup [Page](/python/docs/api/class-page "Page"). If predicate is provided, it passes \[Popup\] value into the `predicate` function and waits for `predicate(page)` to return a truthy value. Will throw an error if the page is closed before the popup event is fired.

**Usage**

    page.expect_popup()page.expect_popup(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Page](/python/docs/api/class-page "Page")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-popup-option-predicate)
    
    Receives the [Page](/python/docs/api/class-page "Page") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-popup-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Page](/python/docs/api/class-page "Page")\][#](#page-wait-for-popup-return)

* * *

### expect\_request[​](#page-wait-for-request "Direct link to expect_request")

Added before v1.9 page.expect\_request

Waits for the matching request and returns it. See [waiting for event](/python/docs/events#waiting-for-event) for more details about events.

**Usage**

*   Sync
*   Async

    with page.expect_request("http://example.com/resource") as first:    page.get_by_text("trigger request").click()first_request = first.value# or with a lambdawith page.expect_request(lambda request: request.url == "http://example.com" and request.method == "get") as second:    page.get_by_text("trigger request").click()second_request = second.value

    async with page.expect_request("http://example.com/resource") as first:    await page.get_by_text("trigger request").click()first_request = await first.value# or with a lambdaasync with page.expect_request(lambda request: request.url == "http://example.com" and request.method == "get") as second:    await page.get_by_text("trigger request").click()second_request = await second.value

**Arguments**

*   `url_or_predicate` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Request](/python/docs/api/class-request "Request")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-wait-for-request-option-url-or-predicate)
    
    Request URL string, regex or predicate receiving [Request](/python/docs/api/class-request "Request") object. When a [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-request-option-timeout)
    
    Maximum wait time in milliseconds, defaults to 30 seconds, pass `0` to disable the timeout. The default value can be changed by using the [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) method.
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Request](/python/docs/api/class-request "Request")\][#](#page-wait-for-request-return)

* * *

### expect\_request\_finished[​](#page-wait-for-request-finished "Direct link to expect_request_finished")

Added in: v1.12 page.expect\_request\_finished

Performs action and waits for a [Request](/python/docs/api/class-request "Request") to finish loading. If predicate is provided, it passes [Request](/python/docs/api/class-request "Request") value into the `predicate` function and waits for `predicate(request)` to return a truthy value. Will throw an error if the page is closed before the [page.on("requestfinished")](/python/docs/api/class-page#page-event-request-finished) event is fired.

**Usage**

    page.expect_request_finished()page.expect_request_finished(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Request](/python/docs/api/class-request "Request")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-request-finished-option-predicate)
    
    Receives the [Request](/python/docs/api/class-request "Request") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-request-finished-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Request](/python/docs/api/class-request "Request")\][#](#page-wait-for-request-finished-return)

* * *

### expect\_response[​](#page-wait-for-response "Direct link to expect_response")

Added before v1.9 page.expect\_response

Returns the matched response. See [waiting for event](/python/docs/events#waiting-for-event) for more details about events.

**Usage**

*   Sync
*   Async

    with page.expect_response("https://example.com/resource") as response_info:    page.get_by_text("trigger response").click()response = response_info.valuereturn response.ok# or with a lambdawith page.expect_response(lambda response: response.url == "https://example.com" and response.status == 200 and response.request.method == "get") as response_info:    page.get_by_text("trigger response").click()response = response_info.valuereturn response.ok

    async with page.expect_response("https://example.com/resource") as response_info:    await page.get_by_text("trigger response").click()response = await response_info.valuereturn response.ok# or with a lambdaasync with page.expect_response(lambda response: response.url == "https://example.com" and response.status == 200 and response.request.method == "get") as response_info:    await page.get_by_text("trigger response").click()response = await response_info.valuereturn response.ok

**Arguments**

*   `url_or_predicate` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Response](/python/docs/api/class-response "Response")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-wait-for-response-option-url-or-predicate)
    
    Request URL string, regex or predicate receiving [Response](/python/docs/api/class-response "Response") object. When a [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-response-option-timeout)
    
    Maximum wait time in milliseconds, defaults to 30 seconds, pass `0` to disable the timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Response](/python/docs/api/class-response "Response")\][#](#page-wait-for-response-return)

* * *

### expect\_websocket[​](#page-wait-for-web-socket "Direct link to expect_websocket")

Added in: v1.9 page.expect\_websocket

Performs action and waits for a new [WebSocket](/python/docs/api/class-websocket "WebSocket"). If predicate is provided, it passes [WebSocket](/python/docs/api/class-websocket "WebSocket") value into the `predicate` function and waits for `predicate(webSocket)` to return a truthy value. Will throw an error if the page is closed before the WebSocket event is fired.

**Usage**

    page.expect_websocket()page.expect_websocket(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[WebSocket](/python/docs/api/class-websocket "WebSocket")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-web-socket-option-predicate)
    
    Receives the [WebSocket](/python/docs/api/class-websocket "WebSocket") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-web-socket-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[WebSocket](/python/docs/api/class-websocket "WebSocket")\][#](#page-wait-for-web-socket-return)

* * *

### expect\_worker[​](#page-wait-for-worker "Direct link to expect_worker")

Added in: v1.9 page.expect\_worker

Performs action and waits for a new [Worker](/python/docs/api/class-worker "Worker"). If predicate is provided, it passes [Worker](/python/docs/api/class-worker "Worker") value into the `predicate` function and waits for `predicate(worker)` to return a truthy value. Will throw an error if the page is closed before the worker event is fired.

**Usage**

    page.expect_worker()page.expect_worker(**kwargs)

**Arguments**

*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Worker](/python/docs/api/class-worker "Worker")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-worker-option-predicate)
    
    Receives the [Worker](/python/docs/api/class-worker "Worker") object and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-worker-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Worker](/python/docs/api/class-worker "Worker")\][#](#page-wait-for-worker-return)

* * *

### expose\_binding[​](#page-expose-binding "Direct link to expose_binding")

Added before v1.9 page.expose\_binding

The method adds a function called [name](/python/docs/api/class-page#page-expose-binding-option-name) on the `window` object of every frame in this page. When called, the function executes [callback](/python/docs/api/class-page#page-expose-binding-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/python/docs/api/class-page#page-expose-binding-option-callback). If the [callback](/python/docs/api/class-page#page-expose-binding-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

The first argument of the [callback](/python/docs/api/class-page#page-expose-binding-option-callback) function contains information about the caller: `{ browserContext: BrowserContext, page: Page, frame: Frame }`.

See [browser\_context.expose\_binding()](/python/docs/api/class-browsercontext#browser-context-expose-binding) for the context-wide version.

note

Functions installed via [page.expose\_binding()](/python/docs/api/class-page#page-expose-binding) survive navigations.

**Usage**

An example of exposing page URL to all frames in a page:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch(headless=False)    context = browser.new_context()    page = context.new_page()    page.expose_binding("pageURL", lambda source: source["page"].url)    page.set_content("""    <script>      async function onClick() {        document.querySelector('div').textContent = await window.pageURL();      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>    """)    page.click("button")with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch(headless=False)    context = await browser.new_context()    page = await context.new_page()    await page.expose_binding("pageURL", lambda source: source["page"].url)    await page.set_content("""    <script>      async function onClick() {        document.querySelector('div').textContent = await window.pageURL();      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>    """)    await page.click("button")async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-expose-binding-option-name)
    
    Name of the function on the window object.
    
*   `callback` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")[#](#page-expose-binding-option-callback)
    
    Callback function that will be called in the Playwright's context.
    
*   `handle` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-expose-binding-option-handle)
    
    Deprecated
    
    This option will be removed in the future.
    
    Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-expose-binding-return)

* * *

### expose\_function[​](#page-expose-function "Direct link to expose_function")

Added before v1.9 page.expose\_function

The method adds a function called [name](/python/docs/api/class-page#page-expose-function-option-name) on the `window` object of every frame in the page. When called, the function executes [callback](/python/docs/api/class-page#page-expose-function-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/python/docs/api/class-page#page-expose-function-option-callback).

If the [callback](/python/docs/api/class-page#page-expose-function-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

See [browser\_context.expose\_function()](/python/docs/api/class-browsercontext#browser-context-expose-function) for context-wide exposed function.

note

Functions installed via [page.expose\_function()](/python/docs/api/class-page#page-expose-function) survive navigations.

**Usage**

An example of adding a `sha256` function to the page:

*   Sync
*   Async

    import hashlibfrom playwright.sync_api import sync_playwright, Playwrightdef sha256(text):    m = hashlib.sha256()    m.update(bytes(text, "utf8"))    return m.hexdigest()def run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch(headless=False)    page = browser.new_page()    page.expose_function("sha256", sha256)    page.set_content("""        <script>          async function onClick() {            document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');          }        </script>        <button onclick="onClick()">Click me</button>        <div></div>    """)    page.click("button")with sync_playwright() as playwright:    run(playwright)

    import asyncioimport hashlibfrom playwright.async_api import async_playwright, Playwrightdef sha256(text):    m = hashlib.sha256()    m.update(bytes(text, "utf8"))    return m.hexdigest()async def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch(headless=False)    page = await browser.new_page()    await page.expose_function("sha256", sha256)    await page.set_content("""        <script>          async function onClick() {            document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');          }        </script>        <button onclick="onClick()">Click me</button>        <div></div>    """)    await page.click("button")async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-expose-function-option-name)
    
    Name of the function on the window object
    
*   `callback` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")[#](#page-expose-function-option-callback)
    
    Callback function which will be called in Playwright's context.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-expose-function-return)

* * *

### frame[​](#page-frame "Direct link to frame")

Added before v1.9 page.frame

Returns frame matching the specified criteria. Either `name` or `url` must be specified.

**Usage**

    frame = page.frame(name="frame-name")

    frame = page.frame(url=r".*domain.*")

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-frame-option-name)
    
    Frame name specified in the `iframe`'s `name` attribute. Optional.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-frame-option-url)
    
    A glob pattern, regex pattern or predicate receiving frame's `url` as a [URL](https://en.wikipedia.org/wiki/URL "URL") object. Optional.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Frame](/python/docs/api/class-frame "Frame")[#](#page-frame-return)

* * *

### frame\_locator[​](#page-frame-locator "Direct link to frame_locator")

Added in: v1.17 page.frame\_locator

When working with iframes, you can create a frame locator that will enter the iframe and allow selecting elements in that iframe.

**Usage**

Following snippet locates element with text "Submit" in the iframe with id `my-frame`, like `<iframe id="my-frame">`:

*   Sync
*   Async

    locator = page.frame_locator("#my-iframe").get_by_text("Submit")locator.click()

    locator = page.frame_locator("#my-iframe").get_by_text("Submit")await locator.click()

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")[#](#page-frame-locator-return)

* * *

### get\_by\_alt\_text[​](#page-get-by-alt-text "Direct link to get_by_alt_text")

Added in: v1.27 page.get\_by\_alt\_text

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

*   Sync
*   Async

    page.get_by_alt_text("Playwright logo").click()

    await page.get_by_alt_text("Playwright logo").click()

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#page-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-alt-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-alt-text-return)

* * *

### get\_by\_label[​](#page-get-by-label "Direct link to get_by_label")

Added in: v1.27 page.get\_by\_label

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

*   Sync
*   Async

    page.get_by_label("Username").fill("john")page.get_by_label("Password").fill("secret")

    await page.get_by_label("Username").fill("john")await page.get_by_label("Password").fill("secret")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#page-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-label-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-label-return)

* * *

### get\_by\_placeholder[​](#page-get-by-placeholder "Direct link to get_by_placeholder")

Added in: v1.27 page.get\_by\_placeholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

*   Sync
*   Async

    page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

    await page.get_by_placeholder("name@example.com").fill("playwright@microsoft.com")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#page-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-placeholder-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-placeholder-return)

* * *

### get\_by\_role[​](#page-get-by-role "Direct link to get_by_role")

Added in: v1.27 page.get\_by\_role

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

*   Sync
*   Async

    expect(page.get_by_role("heading", name="Sign up")).to_be_visible()page.get_by_role("checkbox", name="Subscribe").check()page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

    await expect(page.get_by_role("heading", name="Sign up")).to_be_visible()await page.get_by_role("checkbox", name="Subscribe").check()await page.get_by_role("button", name=re.compile("submit", re.IGNORECASE)).click()

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#page-get-by-role-option-role)
    
    Required aria role.
    
*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-role-option-checked)
    
    An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
    
    Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
    
*   `disabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-role-option-disabled)
    
    An attribute that is usually set by `aria-disabled` or `disabled`.
    
    note
    
    Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#page-get-by-role-option-exact)
    
    Whether [name](/python/docs/api/class-page#page-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/python/docs/api/class-page#page-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
    
*   `expanded` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-role-option-expanded)
    
    An attribute that is usually set by `aria-expanded`.
    
    Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
    
*   `include_hidden` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-role-option-include-hidden)
    
    Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
    
    Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
    
*   `level` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#page-get-by-role-option-level)
    
    A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
    
    Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#page-get-by-role-option-name)
    
    Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/python/docs/api/class-page#page-get-by-role-option-exact) to control this behavior.
    
    Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
*   `pressed` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-role-option-pressed)
    
    An attribute that is usually set by `aria-pressed`.
    
    Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
    
*   `selected` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-role-option-selected)
    
    An attribute that is usually set by `aria-selected`.
    
    Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### get\_by\_test\_id[​](#page-get-by-test-id "Direct link to get_by_test_id")

Added in: v1.27 page.get\_by\_test\_id

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">Itinéraire</button>

You can locate the element by it's test id:

*   Sync
*   Async

    page.get_by_test_id("directions").click()

    await page.get_by_test_id("directions").click()

**Arguments**

*   `test_id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#page-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.set\_test\_id\_attribute()](/python/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

* * *

### get\_by\_text[​](#page-get-by-text "Direct link to get_by_text")

Added in: v1.27 page.get\_by\_text

Allows locating elements that contain given text.

See also [locator.filter()](/python/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

*   Sync
*   Async

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

    # Matches <span>page.get_by_text("world")# Matches first <div>page.get_by_text("Hello world")# Matches second <div>page.get_by_text("Hello", exact=True)# Matches both <div>spage.get_by_text(re.compile("Hello"))# Matches second <div>page.get_by_text(re.compile("^hello$", re.IGNORECASE))

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#page-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-text-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### get\_by\_title[​](#page-get-by-title "Direct link to get_by_title")

Added in: v1.27 page.get\_by\_title

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

*   Sync
*   Async

    expect(page.get_by_title("Issues count")).to_have_text("25 issues")

    await expect(page.get_by_title("Issues count")).to_have_text("25 issues")

**Arguments**

*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#page-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `exact` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-get-by-title-option-exact)
    
    Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-get-by-title-return)

* * *

### go\_back[​](#page-go-back "Direct link to go_back")

Added before v1.9 page.go\_back

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. If cannot go back, returns `null`.

Navigate to the previous page in history.

**Usage**

    page.go_back()page.go_back(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-go-back-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-go-back-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Response](/python/docs/api/class-response "Response")[#](#page-go-back-return)

* * *

### go\_forward[​](#page-go-forward "Direct link to go_forward")

Added before v1.9 page.go\_forward

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. If cannot go forward, returns `null`.

Navigate to the next page in history.

**Usage**

    page.go_forward()page.go_forward(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-go-forward-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-go-forward-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Response](/python/docs/api/class-response "Response")[#](#page-go-forward-return)

* * *

### goto[​](#page-goto "Direct link to goto")

Added before v1.9 page.goto

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the first non-redirect response.

The method will throw an error if:

*   there's an SSL error (e.g. in case of self-signed certificates).
*   target URL is invalid.
*   the [timeout](/python/docs/api/class-page#page-goto-option-timeout) is exceeded during navigation.
*   the remote server does not respond or is unreachable.
*   the main resource failed to load.

The method will not throw an error when any valid HTTP status code is returned by the remote server, including 404 "Not Found" and 500 "Internal Server Error". The status code for such responses can be retrieved by calling [response.status](/python/docs/api/class-response#response-status).

note

The method either throws an error or returns a main resource response. The only exceptions are navigation to `about:blank` or navigation to the same URL with a different hash, which would succeed and return `null`.

note

Headless mode doesn't support navigation to a PDF document. See the [upstream issue](https://bugs.chromium.org/p/chromium/issues/detail?id=761295).

**Usage**

    page.goto(url)page.goto(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-goto-option-url)
    
    URL to navigate page to. The url should include scheme, e.g. `https://`. When a [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `referer` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-goto-option-referer)
    
    Referer header value. If provided it will take preference over the referer header value set by [page.set\_extra\_http\_headers()](/python/docs/api/class-page#page-set-extra-http-headers).
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-goto-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-goto-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Response](/python/docs/api/class-response "Response")[#](#page-goto-return)

* * *

### locator[​](#page-locator "Direct link to locator")

Added in: v1.14 page.locator

The method returns an element locator that can be used to perform actions on this page / frame. Locator is resolved to the element immediately before performing an action, so a series of actions on the same locator can in fact be performed on different DOM elements. That would happen if the DOM structure between those actions has changed.

[Learn more about locators](/python/docs/locators).

**Usage**

    page.locator(selector)page.locator(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-locator-option-selector)
    
    A selector to use when resolving DOM element.
    
*   `has` [Locator](/python/docs/api/class-locator "Locator") _(optional)_[#](#page-locator-option-has)
    
    Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
    
    Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not` [Locator](/python/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#page-locator-option-has-not)
    
    Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
    
    Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/python/docs/api/class-framelocator "FrameLocator")s.
    
*   `has_not_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_ Added in: v1.33[#](#page-locator-option-has-not-text)
    
    Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring.
    
*   `has_text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#page-locator-option-has-text)
    
    Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a \[string\], matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
    

**Returns**

*   [Locator](/python/docs/api/class-locator "Locator")[#](#page-locator-return)

* * *

### opener[​](#page-opener "Direct link to opener")

Added before v1.9 page.opener

Returns the opener for popup pages and `null` for others. If the opener has been closed already the returns `null`.

**Usage**

    page.opener()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Page](/python/docs/api/class-page "Page")[#](#page-opener-return)

* * *

### pause[​](#page-pause "Direct link to pause")

Added in: v1.9 page.pause

Pauses script execution. Playwright will stop executing the script and wait for the user to either press 'Resume' button in the page overlay or to call `playwright.resume()` in the DevTools console.

User can inspect selectors or perform manual steps while paused. Resume will continue running the original script from the place it was paused.

note

This method requires Playwright to be started in a headed mode, with a falsy [headless](/python/docs/api/class-browsertype#browser-type-launch-option-headless) option.

**Usage**

    page.pause()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-pause-return)

* * *

### pdf[​](#page-pdf "Direct link to pdf")

Added before v1.9 page.pdf

Returns the PDF buffer.

`page.pdf()` generates a pdf of the page with `print` css media. To generate a pdf with `screen` media, call [page.emulate\_media()](/python/docs/api/class-page#page-emulate-media) before calling `page.pdf()`:

note

By default, `page.pdf()` generates a pdf with modified colors for printing. Use the [`-webkit-print-color-adjust`](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-print-color-adjust) property to force rendering of exact colors.

**Usage**

*   Sync
*   Async

    # generates a pdf with "screen" media type.page.emulate_media(media="screen")page.pdf(path="page.pdf")

    # generates a pdf with "screen" media type.await page.emulate_media(media="screen")await page.pdf(path="page.pdf")

The [width](/python/docs/api/class-page#page-pdf-option-width), [height](/python/docs/api/class-page#page-pdf-option-height), and [margin](/python/docs/api/class-page#page-pdf-option-margin) options accept values labeled with units. Unlabeled values are treated as pixels.

A few examples:

*   `page.pdf({width: 100})` - prints with width set to 100 pixels
*   `page.pdf({width: '100px'})` - prints with width set to 100 pixels
*   `page.pdf({width: '10cm'})` - prints with width set to 10 centimeters.

All possible units are:

*   `px` - pixel
*   `in` - inch
*   `cm` - centimeter
*   `mm` - millimeter

The [format](/python/docs/api/class-page#page-pdf-option-format) options are:

*   `Letter`: 8.5in x 11in
*   `Legal`: 8.5in x 14in
*   `Tabloid`: 11in x 17in
*   `Ledger`: 17in x 11in
*   `A0`: 33.1in x 46.8in
*   `A1`: 23.4in x 33.1in
*   `A2`: 16.54in x 23.4in
*   `A3`: 11.7in x 16.54in
*   `A4`: 8.27in x 11.7in
*   `A5`: 5.83in x 8.27in
*   `A6`: 4.13in x 5.83in

note

[header\_template](/python/docs/api/class-page#page-pdf-option-header-template) and [footer\_template](/python/docs/api/class-page#page-pdf-option-footer-template) markup have the following limitations: > 1. Script tags inside templates are not evaluated. > 2. Page styles are not visible inside templates.

**Arguments**

*   `display_header_footer` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-pdf-option-display-header-footer)
    
    Display header and footer. Defaults to `false`.
    
*   `footer_template` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-pdf-option-footer-template)
    
    HTML template for the print footer. Should use the same format as the [header\_template](/python/docs/api/class-page#page-pdf-option-header-template).
    
*   `format` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-pdf-option-format)
    
    Paper format. If set, takes priority over [width](/python/docs/api/class-page#page-pdf-option-width) or [height](/python/docs/api/class-page#page-pdf-option-height) options. Defaults to 'Letter'.
    
*   `header_template` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-pdf-option-header-template)
    
    HTML template for the print header. Should be valid HTML markup with following classes used to inject printing values into them:
    
    *   `'date'` formatted print date
    *   `'title'` document title
    *   `'url'` document location
    *   `'pageNumber'` current page number
    *   `'totalPages'` total pages in the document
*   `height` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-pdf-option-height)
    
    Paper height, accepts values labeled with units.
    
*   `landscape` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-pdf-option-landscape)
    
    Paper orientation. Defaults to `false`.
    
*   `margin` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-pdf-option-margin)
    
    *   `top` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Top margin, accepts values labeled with units. Defaults to `0`.
        
    *   `right` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Right margin, accepts values labeled with units. Defaults to `0`.
        
    *   `bottom` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Bottom margin, accepts values labeled with units. Defaults to `0`.
        
    *   `left` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Left margin, accepts values labeled with units. Defaults to `0`.
        
    
    Paper margins, defaults to none.
    
*   `outline` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.42[#](#page-pdf-option-outline)
    
    Whether or not to embed the document outline into the PDF. Defaults to `false`.
    
*   `page_ranges` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#page-pdf-option-page-ranges)
    
    Paper ranges to print, e.g., '1-5, 8, 11-13'. Defaults to the empty string, which means print all pages.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#page-pdf-option-path)
    
    The file path to save the PDF to. If [path](/python/docs/api/class-page#page-pdf-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the PDF won't be saved to the disk.
    
*   `prefer_css_page_size` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-pdf-option-prefer-css-page-size)
    
    Give any CSS `@page` size declared in the page priority over what is declared in [width](/python/docs/api/class-page#page-pdf-option-width) and [height](/python/docs/api/class-page#page-pdf-option-height) or [format](/python/docs/api/class-page#page-pdf-option-format) options. Defaults to `false`, which will scale the content to fit the paper size.
    
*   `print_background` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-pdf-option-print-background)
    
    Print background graphics. Defaults to `false`.
    
*   `scale` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-pdf-option-scale)
    
    Scale of the webpage rendering. Defaults to `1`. Scale amount must be between 0.1 and 2.
    
*   `tagged` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.42[#](#page-pdf-option-tagged)
    
    Whether or not to generate tagged (accessible) PDF. Defaults to `false`.
    
*   `width` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-pdf-option-width)
    
    Paper width, accepts values labeled with units.
    

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#page-pdf-return)

* * *

### reload[​](#page-reload "Direct link to reload")

Added before v1.9 page.reload

This method reloads the current page, in the same way as if the user had triggered a browser refresh. Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect.

**Usage**

    page.reload()page.reload(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-reload-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-reload-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Response](/python/docs/api/class-response "Response")[#](#page-reload-return)

* * *

### remove\_locator\_handler[​](#page-remove-locator-handler "Direct link to remove_locator_handler")

Added in: v1.44 page.remove\_locator\_handler

Removes all locator handlers added by [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler) for a specific locator.

**Usage**

    page.remove_locator_handler(locator)

**Arguments**

*   `locator` [Locator](/python/docs/api/class-locator "Locator")[#](#page-remove-locator-handler-option-locator)
    
    Locator passed to [page.add\_locator\_handler()](/python/docs/api/class-page#page-add-locator-handler).
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-remove-locator-handler-return)

* * *

### request\_gc[​](#page-request-gc "Direct link to request_gc")

Added in: v1.48 page.request\_gc

Request the page to perform garbage collection. Note that there is no guarantee that all unreachable objects will be collected.

This is useful to help detect memory leaks. For example, if your page has a large object `'suspect'` that might be leaked, you can check that it does not leak by using a [`WeakRef`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakRef).

*   Sync
*   Async

    # 1. In your page, save a WeakRef for the "suspect".page.evaluate("globalThis.suspectWeakRef = new WeakRef(suspect)")# 2. Request garbage collection.page.request_gc()# 3. Check that weak ref does not deref to the original object.assert page.evaluate("!globalThis.suspectWeakRef.deref()")

    # 1. In your page, save a WeakRef for the "suspect".await page.evaluate("globalThis.suspectWeakRef = new WeakRef(suspect)")# 2. Request garbage collection.await page.request_gc()# 3. Check that weak ref does not deref to the original object.assert await page.evaluate("!globalThis.suspectWeakRef.deref()")

**Usage**

    page.request_gc()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-request-gc-return)

* * *

### route[​](#page-route "Direct link to route")

Added before v1.9 page.route

Routing provides the capability to modify network requests that are made by a page.

Once routing is enabled, every request matching the url pattern will stall unless it's continued, fulfilled or aborted.

note

The handler will only be called for the first url if the response is a redirect.

note

[page.route()](/python/docs/api/class-page#page-route) will not intercept requests intercepted by Service Worker. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [service\_workers](/python/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

note

[page.route()](/python/docs/api/class-page#page-route) will not intercept the first request of a popup page. Use [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) instead.

**Usage**

An example of a naive handler that aborts all image requests:

*   Sync
*   Async

    page = browser.new_page()page.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())page.goto("https://example.com")browser.close()

    page = await browser.new_page()await page.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())await page.goto("https://example.com")await browser.close()

or the same snippet using a regex pattern instead:

*   Sync
*   Async

    page = browser.new_page()page.route(re.compile(r"(\.png$)|(\.jpg$)"), lambda route: route.abort())page.goto("https://example.com")browser.close()

    page = await browser.new_page()await page.route(re.compile(r"(\.png$)|(\.jpg$)"), lambda route: route.abort())await page.goto("https://example.com")await browser.close()

It is possible to examine the request to decide the route action. For example, mocking all requests that contain some post data, and leaving all other requests as is:

*   Sync
*   Async

    def handle_route(route: Route):  if ("my-string" in route.request.post_data):    route.fulfill(body="mocked-data")  else:    route.continue_()page.route("/api/**", handle_route)

    async def handle_route(route: Route):  if ("my-string" in route.request.post_data):    await route.fulfill(body="mocked-data")  else:    await route.continue_()await page.route("/api/**", handle_route)

Page routes take precedence over browser context routes (set up with [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route)) when request matches both handlers.

To remove a route with its handler you can use [page.unroute()](/python/docs/api/class-page#page-unroute).

note

Enabling routing disables http cache.

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-route-option-url)
    
    A glob pattern, regex pattern, or predicate that receives a [URL](https://en.wikipedia.org/wiki/URL "URL") to match during routing. If [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) is set in the context options and the provided URL is a string that does not start with `*`, it is resolved using the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Route](/python/docs/api/class-route "Route"), [Request](/python/docs/api/class-request "Request")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#page-route-option-handler)
    
    handler function to route the request.
    
*   `times` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.15[#](#page-route-option-times)
    
    How often a route should be used. By default it will be used every time.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-route-return)

* * *

### route\_from\_har[​](#page-route-from-har "Direct link to route_from_har")

Added in: v1.23 page.route\_from\_har

If specified the network requests that are made in the page will be served from the HAR file. Read more about [Replaying from HAR](/python/docs/mock#replaying-from-har).

Playwright will not serve requests intercepted by Service Worker from the HAR file. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [service\_workers](/python/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

**Usage**

    page.route_from_har(har)page.route_from_har(har, **kwargs)

**Arguments**

*   `har` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\][#](#page-route-from-har-option-har)
    
    Path to a [HAR](http://www.softwareishard.com/blog/har-12-spec) file with prerecorded network data. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `not_found` "abort" | "fallback" _(optional)_[#](#page-route-from-har-option-not-found)
    
    *   If set to 'abort' any request not found in the HAR file will be aborted.
    *   If set to 'fallback' missing requests will be sent to the network.
    
    Defaults to abort.
    
*   `update` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-route-from-har-option-update)
    
    If specified, updates the given HAR with the actual network information instead of serving from file. The file is written to disk when [browser\_context.close()](/python/docs/api/class-browsercontext#browser-context-close) is called.
    
*   `update_content` "embed" | "attach" _(optional)_ Added in: v1.32[#](#page-route-from-har-option-update-content)
    
    Optional setting to control resource content management. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file.
    
*   `update_mode` "full" | "minimal" _(optional)_ Added in: v1.32[#](#page-route-from-har-option-update-mode)
    
    When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `minimal`.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") _(optional)_[#](#page-route-from-har-option-url)
    
    A glob pattern, regular expression or predicate to match the request URL. Only requests with URL matching the pattern will be served from the HAR file. If not specified, all requests are served from the HAR file.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-route-from-har-return)

* * *

### route\_web\_socket[​](#page-route-web-socket "Direct link to route_web_socket")

Added in: v1.48 page.route\_web\_socket

This method allows to modify websocket connections that are made by the page.

Note that only `WebSocket`s created after this method was called will be routed. It is recommended to call this method before navigating the page.

**Usage**

Below is an example of a simple mock that responds to a single message. See [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute") for more details and examples.

*   Sync
*   Async

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")def handler(ws: WebSocketRoute):  ws.on_message(lambda message: message_handler(ws, message))page.route_web_socket("/ws", handler)

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")def handler(ws: WebSocketRoute):  ws.on_message(lambda message: message_handler(ws, message))await page.route_web_socket("/ws", handler)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-route-web-socket-option-url)
    
    Only WebSockets with the url matching this pattern will be routed. A string pattern can be relative to the [base\_url](/python/docs/api/class-browser#browser-new-context-option-base-url) context option.
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#page-route-web-socket-option-handler)
    
    Handler function to route the WebSocket.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-route-web-socket-return)

* * *

### screenshot[​](#page-screenshot "Direct link to screenshot")

Added before v1.9 page.screenshot

Returns the buffer with the captured screenshot.

**Usage**

    page.screenshot()page.screenshot(**kwargs)

**Arguments**

*   `animations` "disabled" | "allow" _(optional)_[#](#page-screenshot-option-animations)
    
    When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
    
    *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
    *   infinite animations are canceled to initial state, and then played over after the screenshot.
    
    Defaults to `"allow"` that leaves animations untouched.
    
*   `caret` "hide" | "initial" _(optional)_[#](#page-screenshot-option-caret)
    
    When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
    
*   `clip` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-screenshot-option-clip)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        x-coordinate of top-left corner of clip area
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        y-coordinate of top-left corner of clip area
        
    *   `width` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        width of clipping area
        
    *   `height` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        height of clipping area
        
    
    An object which specifies clipping of the resulting image.
    
*   `full_page` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-screenshot-option-full-page)
    
    When true, takes a screenshot of the full scrollable page, instead of the currently visible viewport. Defaults to `false`.
    
*   `mask` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Locator](/python/docs/api/class-locator "Locator")\] _(optional)_[#](#page-screenshot-option-mask)
    
    Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [mask\_color](/python/docs/api/class-page#page-screenshot-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/python/docs/locators#matching-only-visible-elements) to disable that.
    
*   `mask_color` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.35[#](#page-screenshot-option-mask-color)
    
    Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
    
*   `omit_background` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-screenshot-option-omit-background)
    
    Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#page-screenshot-option-path)
    
    The file path to save the image to. The screenshot type will be inferred from file extension. If [path](/python/docs/api/class-page#page-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
    
*   `quality` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#page-screenshot-option-quality)
    
    The quality of the image, between 0-100. Not applicable to `png` images.
    
*   `scale` "css" | "device" _(optional)_[#](#page-screenshot-option-scale)
    
    When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
    
    Defaults to `"device"`.
    
*   `style` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.41[#](#page-screenshot-option-style)
    
    Text of the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-screenshot-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `type` "png" | "jpeg" _(optional)_[#](#page-screenshot-option-type)
    
    Specify screenshot type, defaults to `png`.
    

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#page-screenshot-return)

* * *

### set\_content[​](#page-set-content "Direct link to set_content")

Added before v1.9 page.set\_content

This method internally calls [document.write()](https://developer.mozilla.org/en-US/docs/Web/API/Document/write), inheriting all its specific characteristics and behaviors.

**Usage**

    page.set_content(html)page.set_content(html, **kwargs)

**Arguments**

*   `html` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-set-content-option-html)
    
    HTML markup to assign to the page.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-set-content-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-set-content-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-set-content-return)

* * *

### set\_default\_navigation\_timeout[​](#page-set-default-navigation-timeout "Direct link to set_default_navigation_timeout")

Added before v1.9 page.set\_default\_navigation\_timeout

This setting will change the default maximum navigation time for the following methods and related shortcuts:

*   [page.go\_back()](/python/docs/api/class-page#page-go-back)
*   [page.go\_forward()](/python/docs/api/class-page#page-go-forward)
*   [page.goto()](/python/docs/api/class-page#page-goto)
*   [page.reload()](/python/docs/api/class-page#page-reload)
*   [page.set\_content()](/python/docs/api/class-page#page-set-content)
*   [page.expect\_navigation()](/python/docs/api/class-page#page-wait-for-navigation)
*   [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url)

note

[page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) takes priority over [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) and [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout).

**Usage**

    page.set_default_navigation_timeout(timeout)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#page-set-default-navigation-timeout-option-timeout)
    
    Maximum navigation time in milliseconds
    

* * *

### set\_default\_timeout[​](#page-set-default-timeout "Direct link to set_default_timeout")

Added before v1.9 page.set\_default\_timeout

This setting will change the default maximum time for all the methods accepting [timeout](/python/docs/api/class-page#page-set-default-timeout-option-timeout) option.

note

[page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) takes priority over [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout).

**Usage**

    page.set_default_timeout(timeout)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#page-set-default-timeout-option-timeout)
    
    Maximum time in milliseconds. Pass `0` to disable timeout.
    

* * *

### set\_extra\_http\_headers[​](#page-set-extra-http-headers "Direct link to set_extra_http_headers")

Added before v1.9 page.set\_extra\_http\_headers

The extra HTTP headers will be sent with every request the page initiates.

note

[page.set\_extra\_http\_headers()](/python/docs/api/class-page#page-set-extra-http-headers) does not guarantee the order of headers in the outgoing requests.

**Usage**

    page.set_extra_http_headers(headers)

**Arguments**

*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#page-set-extra-http-headers-option-headers)
    
    An object containing additional HTTP headers to be sent with every request. All header values must be strings.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-set-extra-http-headers-return)

* * *

### set\_viewport\_size[​](#page-set-viewport-size "Direct link to set_viewport_size")

Added before v1.9 page.set\_viewport\_size

In the case of multiple pages in a single browser, each page can have its own viewport size. However, [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) allows to set viewport size (and more) for all pages in the context at once.

[page.set\_viewport\_size()](/python/docs/api/class-page#page-set-viewport-size) will resize the page. A lot of websites don't expect phones to change size, so you should set the viewport size before navigating to the page. [page.set\_viewport\_size()](/python/docs/api/class-page#page-set-viewport-size) will also reset `screen` size, use [browser.new\_context()](/python/docs/api/class-browser#browser-new-context) with `screen` and `viewport` parameters if you need better control of these properties.

**Usage**

*   Sync
*   Async

    page = browser.new_page()page.set_viewport_size({"width": 640, "height": 480})page.goto("https://example.com")

    page = await browser.new_page()await page.set_viewport_size({"width": 640, "height": 480})await page.goto("https://example.com")

**Arguments**

*   `viewport_size` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#page-set-viewport-size-option-viewport-size)
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-set-viewport-size-return)

* * *

### title[​](#page-title "Direct link to title")

Added before v1.9 page.title

Returns the page's title.

**Usage**

    page.title()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-title-return)

* * *

### unroute[​](#page-unroute "Direct link to unroute")

Added before v1.9 page.unroute

Removes a route created with [page.route()](/python/docs/api/class-page#page-route). When [handler](/python/docs/api/class-page#page-unroute-option-handler) is not specified, removes all routes for the [url](/python/docs/api/class-page#page-unroute-option-url).

**Usage**

    page.unroute(url)page.unroute(url, **kwargs)

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-unroute-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://en.wikipedia.org/wiki/URL "URL") to match while routing.
    
*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[Route](/python/docs/api/class-route "Route"), [Request](/python/docs/api/class-request "Request")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any") _(optional)_[#](#page-unroute-option-handler)
    
    Optional handler function to route the request.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-unroute-return)

* * *

### unroute\_all[​](#page-unroute-all "Direct link to unroute_all")

Added in: v1.41 page.unroute\_all

Removes all routes created with [page.route()](/python/docs/api/class-page#page-route) and [page.route\_from\_har()](/python/docs/api/class-page#page-route-from-har).

**Usage**

    page.unroute_all()page.unroute_all(**kwargs)

**Arguments**

*   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#page-unroute-all-option-behavior)
    
    Specifies whether to wait for already running handlers and what to do if they throw errors:
    
    *   `'default'` - do not wait for current handler calls (if any) to finish, if unrouted handler throws, it may result in unhandled error
    *   `'wait'` - wait for current handler calls (if any) to finish
    *   `'ignoreErrors'` - do not wait for current handler calls (if any) to finish, all errors thrown by the handlers after unrouting are silently caught

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-unroute-all-return)

* * *

### wait\_for\_event[​](#page-wait-for-event-2 "Direct link to wait_for_event")

Added before v1.9 page.wait\_for\_event

note

In most cases, you should use [page.expect\_event()](/python/docs/api/class-page#page-wait-for-event).

Waits for given `event` to fire. If predicate is provided, it passes event's value into the `predicate` function and waits for `predicate(event)` to return a truthy value. Will throw an error if the page is closed before the `event` is fired.

**Usage**

    page.wait_for_event(event)page.wait_for_event(event, **kwargs)

**Arguments**

*   `event` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-wait-for-event-2-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable") _(optional)_[#](#page-wait-for-event-2-option-predicate)
    
    Receives the event data and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-event-2-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#page-wait-for-event-2-return)

* * *

### wait\_for\_function[​](#page-wait-for-function "Direct link to wait_for_function")

Added before v1.9 page.wait\_for\_function

Returns when the [expression](/python/docs/api/class-page#page-wait-for-function-option-expression) returns a truthy value. It resolves to a JSHandle of the truthy value.

**Usage**

The [page.wait\_for\_function()](/python/docs/api/class-page#page-wait-for-function) can be used to observe viewport size change:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    webkit = playwright.webkit    browser = webkit.launch()    page = browser.new_page()    page.evaluate("window.x = 0; setTimeout(() => { window.x = 100 }, 1000);")    page.wait_for_function("() => window.x > 0")    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    webkit = playwright.webkit    browser = await webkit.launch()    page = await browser.new_page()    await page.evaluate("window.x = 0; setTimeout(() => { window.x = 100 }, 1000);")    await page.wait_for_function("() => window.x > 0")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

To pass an argument to the predicate of [page.wait\_for\_function()](/python/docs/api/class-page#page-wait-for-function) function:

*   Sync
*   Async

    selector = ".foo"page.wait_for_function("selector => !!document.querySelector(selector)", selector)

    selector = ".foo"await page.wait_for_function("selector => !!document.querySelector(selector)", selector)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-wait-for-function-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-wait-for-function-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-page#page-wait-for-function-option-expression).
    
*   `polling` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") | "raf" _(optional)_[#](#page-wait-for-function-option-polling)
    
    If [polling](/python/docs/api/class-page#page-wait-for-function-option-polling) is `'raf'`, then [expression](/python/docs/api/class-page#page-wait-for-function-option-expression) is constantly executed in `requestAnimationFrame` callback. If [polling](/python/docs/api/class-page#page-wait-for-function-option-polling) is a number, then it is treated as an interval in milliseconds at which the function would be executed. Defaults to `raf`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-function-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#page-wait-for-function-return)

* * *

### wait\_for\_load\_state[​](#page-wait-for-load-state "Direct link to wait_for_load_state")

Added before v1.9 page.wait\_for\_load\_state

Returns when the required load state has been reached.

This resolves when the page reaches a required load state, `load` by default. The navigation must have been committed when this method is called. If current document has already reached the required state, resolves immediately.

note

Most of the time, this method is not needed because Playwright [auto-waits before every action](/python/docs/actionability).

**Usage**

*   Sync
*   Async

    page.get_by_role("button").click() # click triggers navigation.page.wait_for_load_state() # the promise resolves after "load" event.

    await page.get_by_role("button").click() # click triggers navigation.await page.wait_for_load_state() # the promise resolves after "load" event.

*   Sync
*   Async

    with page.expect_popup() as page_info:    page.get_by_role("button").click() # click triggers a popup.popup = page_info.value# Wait for the "DOMContentLoaded" event.popup.wait_for_load_state("domcontentloaded")print(popup.title()) # popup is ready to use.

    async with page.expect_popup() as page_info:    await page.get_by_role("button").click() # click triggers a popup.popup = await page_info.value# Wait for the "DOMContentLoaded" event.await popup.wait_for_load_state("domcontentloaded")print(await popup.title()) # popup is ready to use.

**Arguments**

*   `state` "load" | "domcontentloaded" | "networkidle" _(optional)_[#](#page-wait-for-load-state-option-state)
    
    Optional load state to wait for, defaults to `load`. If the state has been already reached while loading current document, the method resolves immediately. Can be one of:
    
    *   `'load'` - wait for the `load` event to be fired.
    *   `'domcontentloaded'` - wait for the `DOMContentLoaded` event to be fired.
    *   `'networkidle'` - **DISCOURAGED** wait until there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-load-state-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-wait-for-load-state-return)

* * *

### wait\_for\_url[​](#page-wait-for-url "Direct link to wait_for_url")

Added in: v1.11 page.wait\_for\_url

Waits for the main frame to navigate to the given URL.

**Usage**

*   Sync
*   Async

    page.click("a.delayed-navigation") # clicking the link will indirectly cause a navigationpage.wait_for_url("**/target.html")

    await page.click("a.delayed-navigation") # clicking the link will indirectly cause a navigationawait page.wait_for_url("**/target.html")

**Arguments**

*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-wait-for-url-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://en.wikipedia.org/wiki/URL "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-url-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-wait-for-url-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-wait-for-url-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### clock[​](#page-clock "Direct link to clock")

Added in: v1.45 page.clock

Playwright has ability to mock clock and passage of time.

**Usage**

    page.clock

**Type**

*   [Clock](/python/docs/api/class-clock "Clock")

* * *

### context[​](#page-context "Direct link to context")

Added before v1.9 page.context

Get the browser context that the page belongs to.

**Usage**

    page.context

**Returns**

*   [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext")[#](#page-context-return)

* * *

### frames[​](#page-frames "Direct link to frames")

Added before v1.9 page.frames

An array of all frames attached to the page.

**Usage**

    page.frames

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Frame](/python/docs/api/class-frame "Frame")\][#](#page-frames-return)

* * *

### is\_closed[​](#page-is-closed "Direct link to is_closed")

Added before v1.9 page.is\_closed

Indicates that the page has been closed.

**Usage**

    page.is_closed()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-closed-return)

* * *

### keyboard[​](#page-keyboard "Direct link to keyboard")

Added before v1.9 page.keyboard

**Usage**

    page.keyboard

**Type**

*   [Keyboard](/python/docs/api/class-keyboard "Keyboard")

* * *

### main\_frame[​](#page-main-frame "Direct link to main_frame")

Added before v1.9 page.main\_frame

The page's main frame. Page is guaranteed to have a main frame which persists during navigations.

**Usage**

    page.main_frame

**Returns**

*   [Frame](/python/docs/api/class-frame "Frame")[#](#page-main-frame-return)

* * *

### mouse[​](#page-mouse "Direct link to mouse")

Added before v1.9 page.mouse

**Usage**

    page.mouse

**Type**

*   [Mouse](/python/docs/api/class-mouse "Mouse")

* * *

### request[​](#page-request "Direct link to request")

Added in: v1.16 page.request

API testing helper associated with this page. This method returns the same instance as [browser\_context.request](/python/docs/api/class-browsercontext#browser-context-request) on the page's context. See [browser\_context.request](/python/docs/api/class-browsercontext#browser-context-request) for more details.

**Usage**

    page.request

**Type**

*   [APIRequestContext](/python/docs/api/class-apirequestcontext "APIRequestContext")

* * *

### touchscreen[​](#page-touchscreen "Direct link to touchscreen")

Added before v1.9 page.touchscreen

**Usage**

    page.touchscreen

**Type**

*   [Touchscreen](/python/docs/api/class-touchscreen "Touchscreen")

* * *

### url[​](#page-url "Direct link to url")

Added before v1.9 page.url

**Usage**

    page.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-url-return)

* * *

### video[​](#page-video "Direct link to video")

Added before v1.9 page.video

Video object associated with this page.

**Usage**

    page.video

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Video](/python/docs/api/class-video "Video")[#](#page-video-return)

* * *

### viewport\_size[​](#page-viewport-size "Direct link to viewport_size")

Added before v1.9 page.viewport\_size

**Usage**

    page.viewport_size

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#page-viewport-size-return)
    *   `width` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page width in pixels.
        
    *   `height` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        page height in pixels.
        

* * *

### workers[​](#page-workers "Direct link to workers")

Added before v1.9 page.workers

This method returns all of the dedicated [WebWorkers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) associated with the page.

note

This does not contain ServiceWorkers

**Usage**

    page.workers

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Worker](/python/docs/api/class-worker "Worker")\][#](#page-workers-return)

* * *

Events[​](#events "Direct link to Events")
------------------------------------------

### on("close")[​](#page-event-close "Direct link to on(\"close\")")

Added before v1.9 page.on("close")

Emitted when the page closes.

**Usage**

    page.on("close", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("console")[​](#page-event-console "Direct link to on(\"console\")")

Added before v1.9 page.on("console")

Emitted when JavaScript within the page calls one of console API methods, e.g. `console.log` or `console.dir`.

The arguments passed into `console.log` are available on the [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage") event handler argument.

**Usage**

*   Sync
*   Async

    def print_args(msg):    for arg in msg.args:        print(arg.json_value())page.on("console", print_args)page.evaluate("console.log('hello', 5, { foo: 'bar' })")

    async def print_args(msg):    values = []    for arg in msg.args:        values.append(await arg.json_value())    print(values)page.on("console", print_args)await page.evaluate("console.log('hello', 5, { foo: 'bar' })")

**Event data**

*   [ConsoleMessage](/python/docs/api/class-consolemessage "ConsoleMessage")

* * *

### on("crash")[​](#page-event-crash "Direct link to on(\"crash\")")

Added before v1.9 page.on("crash")

Emitted when the page crashes. Browser pages might crash if they try to allocate too much memory. When the page crashes, ongoing and subsequent operations will throw.

The most common way to deal with crashes is to catch an exception:

*   Sync
*   Async

    try:    # crash might happen during a click.    page.click("button")    # or while waiting for an event.    page.wait_for_event("popup")except Error as e:    pass    # when the page crashes, exception message contains "crash".

    try:    # crash might happen during a click.    await page.click("button")    # or while waiting for an event.    await page.wait_for_event("popup")except Error as e:    pass    # when the page crashes, exception message contains "crash".

**Usage**

    page.on("crash", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("dialog")[​](#page-event-dialog "Direct link to on(\"dialog\")")

Added before v1.9 page.on("dialog")

Emitted when a JavaScript dialog appears, such as `alert`, `prompt`, `confirm` or `beforeunload`. Listener **must** either [dialog.accept()](/python/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/python/docs/api/class-dialog#dialog-dismiss) the dialog - otherwise the page will [freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking) waiting for the dialog, and actions like click will never finish.

**Usage**

    page.on("dialog", lambda dialog: dialog.accept())

note

When no [page.on("dialog")](/python/docs/api/class-page#page-event-dialog) or [browser\_context.on("dialog")](/python/docs/api/class-browsercontext#browser-context-event-dialog) listeners are present, all dialogs are automatically dismissed.

**Event data**

*   [Dialog](/python/docs/api/class-dialog "Dialog")

* * *

### on("domcontentloaded")[​](#page-event-dom-content-loaded "Direct link to on(\"domcontentloaded\")")

Added in: v1.9 page.on("domcontentloaded")

Emitted when the JavaScript [`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded) event is dispatched.

**Usage**

    page.on("domcontentloaded", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("download")[​](#page-event-download "Direct link to on(\"download\")")

Added before v1.9 page.on("download")

Emitted when attachment download started. User can access basic file operations on downloaded content via the passed [Download](/python/docs/api/class-download "Download") instance.

**Usage**

    page.on("download", handler)

**Event data**

*   [Download](/python/docs/api/class-download "Download")

* * *

### on("filechooser")[​](#page-event-file-chooser "Direct link to on(\"filechooser\")")

Added in: v1.9 page.on("filechooser")

Emitted when a file chooser is supposed to appear, such as after clicking the `<input type=file>`. Playwright can respond to it via setting the input files using [file\_chooser.set\_files()](/python/docs/api/class-filechooser#file-chooser-set-files) that can be uploaded after that.

    page.on("filechooser", lambda file_chooser: file_chooser.set_files("/tmp/myfile.pdf"))

**Usage**

    page.on("filechooser", handler)

**Event data**

*   [FileChooser](/python/docs/api/class-filechooser "FileChooser")

* * *

### on("frameattached")[​](#page-event-frame-attached "Direct link to on(\"frameattached\")")

Added in: v1.9 page.on("frameattached")

Emitted when a frame is attached.

**Usage**

    page.on("frameattached", handler)

**Event data**

*   [Frame](/python/docs/api/class-frame "Frame")

* * *

### on("framedetached")[​](#page-event-frame-detached "Direct link to on(\"framedetached\")")

Added in: v1.9 page.on("framedetached")

Emitted when a frame is detached.

**Usage**

    page.on("framedetached", handler)

**Event data**

*   [Frame](/python/docs/api/class-frame "Frame")

* * *

### on("framenavigated")[​](#page-event-frame-navigated "Direct link to on(\"framenavigated\")")

Added in: v1.9 page.on("framenavigated")

Emitted when a frame is navigated to a new url.

**Usage**

    page.on("framenavigated", handler)

**Event data**

*   [Frame](/python/docs/api/class-frame "Frame")

* * *

### on("load")[​](#page-event-load "Direct link to on(\"load\")")

Added before v1.9 page.on("load")

Emitted when the JavaScript [`load`](https://developer.mozilla.org/en-US/docs/Web/Events/load) event is dispatched.

**Usage**

    page.on("load", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("pageerror")[​](#page-event-page-error "Direct link to on(\"pageerror\")")

Added in: v1.9 page.on("pageerror")

Emitted when an uncaught exception happens within the page.

*   Sync
*   Async

    # Log all uncaught errors to the terminalpage.on("pageerror", lambda exc: print(f"uncaught exception: {exc}"))# Navigate to a page with an exception.page.goto("data:text/html,<script>throw new Error('test')</script>")

    # Log all uncaught errors to the terminalpage.on("pageerror", lambda exc: print(f"uncaught exception: {exc}"))# Navigate to a page with an exception.await page.goto("data:text/html,<script>throw new Error('test')</script>")

**Usage**

    page.on("pageerror", handler)

**Event data**

*   [Error](/python/docs/api/class-error "Error")

* * *

### on("popup")[​](#page-event-popup "Direct link to on(\"popup\")")

Added before v1.9 page.on("popup")

Emitted when the page opens a new tab or window. This event is emitted in addition to the [browser\_context.on("page")](/python/docs/api/class-browsercontext#browser-context-event-page), but only for popups relevant to this page.

The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with `window.open('http://example.com')`, this event will fire when the network request to "[http://example.com](http://example.com)" is done and its response has started loading in the popup. If you would like to route/listen to this network request, use [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route) and [browser\_context.on("request")](/python/docs/api/class-browsercontext#browser-context-event-request) respectively instead of similar methods on the [Page](/python/docs/api/class-page "Page").

*   Sync
*   Async

    with page.expect_event("popup") as page_info:    page.get_by_text("open the popup").click()popup = page_info.valueprint(popup.evaluate("location.href"))

    async with page.expect_event("popup") as page_info:    await page.get_by_text("open the popup").click()popup = await page_info.valueprint(await popup.evaluate("location.href"))

note

Use [page.wait\_for\_load\_state()](/python/docs/api/class-page#page-wait-for-load-state) to wait until the page gets to a particular state (you should not need it in most cases).

**Usage**

    page.on("popup", handler)

**Event data**

*   [Page](/python/docs/api/class-page "Page")

* * *

### on("request")[​](#page-event-request "Direct link to on(\"request\")")

Added before v1.9 page.on("request")

Emitted when a page issues a request. The [request](/python/docs/api/class-request "Request") object is read-only. In order to intercept and mutate requests, see [page.route()](/python/docs/api/class-page#page-route) or [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route).

**Usage**

    page.on("request", handler)

**Event data**

*   [Request](/python/docs/api/class-request "Request")

* * *

### on("requestfailed")[​](#page-event-request-failed "Direct link to on(\"requestfailed\")")

Added in: v1.9 page.on("requestfailed")

Emitted when a request fails, for example by timing out.

    page.on("requestfailed", lambda request: print(request.url + " " + request.failure.error_text))

note

HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with [page.on("requestfinished")](/python/docs/api/class-page#page-event-request-finished) event and not with [page.on("requestfailed")](/python/docs/api/class-page#page-event-request-failed). A request will only be considered failed when the client cannot get an HTTP response from the server, e.g. due to network error net::ERR\_FAILED.

**Usage**

    page.on("requestfailed", handler)

**Event data**

*   [Request](/python/docs/api/class-request "Request")

* * *

### on("requestfinished")[​](#page-event-request-finished "Direct link to on(\"requestfinished\")")

Added in: v1.9 page.on("requestfinished")

Emitted when a request finishes successfully after downloading the response body. For a successful response, the sequence of events is `request`, `response` and `requestfinished`.

**Usage**

    page.on("requestfinished", handler)

**Event data**

*   [Request](/python/docs/api/class-request "Request")

* * *

### on("response")[​](#page-event-response "Direct link to on(\"response\")")

Added before v1.9 page.on("response")

Emitted when [response](/python/docs/api/class-response "Response") status and headers are received for a request. For a successful response, the sequence of events is `request`, `response` and `requestfinished`.

**Usage**

    page.on("response", handler)

**Event data**

*   [Response](/python/docs/api/class-response "Response")

* * *

### on("websocket")[​](#page-event-web-socket "Direct link to on(\"websocket\")")

Added in: v1.9 page.on("websocket")

Emitted when [WebSocket](/python/docs/api/class-websocket "WebSocket") request is sent.

**Usage**

    page.on("websocket", handler)

**Event data**

*   [WebSocket](/python/docs/api/class-websocket "WebSocket")

* * *

### on("worker")[​](#page-event-worker "Direct link to on(\"worker\")")

Added before v1.9 page.on("worker")

Emitted when a dedicated [WebWorker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) is spawned by the page.

**Usage**

    page.on("worker", handler)

**Event data**

*   [Worker](/python/docs/api/class-worker "Worker")

* * *

Deprecated[​](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### accessibility[​](#page-accessibility "Direct link to accessibility")

Added before v1.9 page.accessibility

Deprecated

This property is discouraged. Please use other libraries such as [Axe](https://www.deque.com/axe/) if you need to test page accessibility. See our Node.js [guide](https://playwright.dev/docs/accessibility-testing) for integration with Axe.

**Usage**

    page.accessibility

**Type**

*   [Accessibility](/python/docs/api/class-accessibility "Accessibility")

* * *

### check[​](#page-check "Direct link to check")

Added before v1.9 page.check

Discouraged

Use locator-based [locator.check()](/python/docs/api/class-locator#locator-check) instead. Read more about [locators](/python/docs/locators).

This method checks an element matching [selector](/python/docs/api/class-page#page-check-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-check-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
3.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-check-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-check-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    page.check(selector)page.check(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-check-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-check-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-check-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.11[#](#page-check-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-check-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-check-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#page-check-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-check-return)

* * *

### click[​](#page-click "Direct link to click")

Added before v1.9 page.click

Discouraged

Use locator-based [locator.click()](/python/docs/api/class-locator#locator-click) instead. Read more about [locators](/python/docs/locators).

This method clicks an element matching [selector](/python/docs/api/class-page#page-click-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-click-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-click-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/python/docs/api/class-page#page-click-option-position).
5.  Wait for initiated navigations to either succeed or fail, unless [no\_wait\_after](/python/docs/api/class-page#page-click-option-no-wait-after) option is set.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-click-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    page.click(selector)page.click(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-click-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `button` "left" | "right" | "middle" _(optional)_[#](#page-click-option-button)
    
    Defaults to `left`.
    
*   `click_count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#page-click-option-click-count)
    
    defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-click-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-click-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#page-click-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-click-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-click-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-click-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-click-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#page-click-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-click-return)

* * *

### dblclick[​](#page-dblclick "Direct link to dblclick")

Added before v1.9 page.dblclick

Discouraged

Use locator-based [locator.dblclick()](/python/docs/api/class-locator#locator-dblclick) instead. Read more about [locators](/python/docs/locators).

This method double clicks an element matching [selector](/python/docs/api/class-page#page-dblclick-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-dblclick-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-dblclick-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/python/docs/api/class-page#page-dblclick-option-position).

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-dblclick-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`page.dblclick()` dispatches two `click` events and a single `dblclick` event.

**Usage**

    page.dblclick(selector)page.dblclick(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-dblclick-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `button` "left" | "right" | "middle" _(optional)_[#](#page-dblclick-option-button)
    
    Defaults to `left`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-dblclick-option-delay)
    
    Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-dblclick-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#page-dblclick-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-dblclick-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-dblclick-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-dblclick-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-dblclick-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#page-dblclick-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-dblclick-return)

* * *

### dispatch\_event[​](#page-dispatch-event "Direct link to dispatch_event")

Added before v1.9 page.dispatch\_event

Discouraged

Use locator-based [locator.dispatch\_event()](/python/docs/api/class-locator#locator-dispatch-event) instead. Read more about [locators](/python/docs/locators).

The snippet below dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

**Usage**

*   Sync
*   Async

    page.dispatch_event("button#submit", "click")

    await page.dispatch_event("button#submit", "click")

Under the hood, it creates an instance of an event based on the given [type](/python/docs/api/class-page#page-dispatch-event-option-type), initializes it with [event\_init](/python/docs/api/class-page#page-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [event\_init](/python/docs/api/class-page#page-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify `JSHandle` as the property value if you want live objects to be passed into the event:

*   Sync
*   Async

    # note you can only create data_transfer in chromium and firefoxdata_transfer = page.evaluate_handle("new DataTransfer()")page.dispatch_event("#source", "dragstart", { "dataTransfer": data_transfer })

    # note you can only create data_transfer in chromium and firefoxdata_transfer = await page.evaluate_handle("new DataTransfer()")await page.dispatch_event("#source", "dragstart", { "dataTransfer": data_transfer })

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-dispatch-event-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `event_init` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-dispatch-event-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-dispatch-event-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-dispatch-event-return)

* * *

### eval\_on\_selector[​](#page-eval-on-selector "Direct link to eval_on_selector")

Added in: v1.9 page.eval\_on\_selector

Discouraged

This method does not wait for the element to pass actionability checks and therefore can lead to the flaky tests. Use [locator.evaluate()](/python/docs/api/class-locator#locator-evaluate), other [Locator](/python/docs/api/class-locator "Locator") helper methods or web-first assertions instead.

The method finds an element matching the specified selector within the page and passes it as a first argument to [expression](/python/docs/api/class-page#page-eval-on-selector-option-expression). If no elements match the selector, the method throws an error. Returns the value of [expression](/python/docs/api/class-page#page-eval-on-selector-option-expression).

If [expression](/python/docs/api/class-page#page-eval-on-selector-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.eval\_on\_selector()](/python/docs/api/class-page#page-eval-on-selector) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    search_value = page.eval_on_selector("#search", "el => el.value")preload_href = page.eval_on_selector("link[rel=preload]", "el => el.href")html = page.eval_on_selector(".main-container", "(e, suffix) => e.outer_html + suffix", "hello")

    search_value = await page.eval_on_selector("#search", "el => el.value")preload_href = await page.eval_on_selector("link[rel=preload]", "el => el.href")html = await page.eval_on_selector(".main-container", "(e, suffix) => e.outer_html + suffix", "hello")

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-eval-on-selector-option-selector)
    
    A selector to query for.
    
*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-eval-on-selector-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-eval-on-selector-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-page#page-eval-on-selector-option-expression).
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-eval-on-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#page-eval-on-selector-return)

* * *

### eval\_on\_selector\_all[​](#page-eval-on-selector-all "Direct link to eval_on_selector_all")

Added in: v1.9 page.eval\_on\_selector\_all

Discouraged

In most cases, [locator.evaluate\_all()](/python/docs/api/class-locator#locator-evaluate-all), other [Locator](/python/docs/api/class-locator "Locator") helper methods and web-first assertions do a better job.

The method finds all elements matching the specified selector within the page and passes an array of matched elements as a first argument to [expression](/python/docs/api/class-page#page-eval-on-selector-all-option-expression). Returns the result of [expression](/python/docs/api/class-page#page-eval-on-selector-all-option-expression) invocation.

If [expression](/python/docs/api/class-page#page-eval-on-selector-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.eval\_on\_selector\_all()](/python/docs/api/class-page#page-eval-on-selector-all) would wait for the promise to resolve and return its value.

**Usage**

*   Sync
*   Async

    div_counts = page.eval_on_selector_all("div", "(divs, min) => divs.length >= min", 10)

    div_counts = await page.eval_on_selector_all("div", "(divs, min) => divs.length >= min", 10)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-eval-on-selector-all-option-selector)
    
    A selector to query for.
    
*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-eval-on-selector-all-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-eval-on-selector-all-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-page#page-eval-on-selector-all-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#page-eval-on-selector-all-return)

* * *

### expect\_navigation[​](#page-wait-for-navigation "Direct link to expect_navigation")

Added before v1.9 page.expect\_navigation

Deprecated

This method is inherently racy, please use [page.wait\_for\_url()](/python/docs/api/class-page#page-wait-for-url) instead.

Waits for the main frame navigation and returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. In case of navigation to a different anchor or navigation due to History API usage, the navigation will resolve with `null`.

**Usage**

This resolves when the page navigates to a new URL or reloads. It is useful for when you run code which will indirectly cause the page to navigate. e.g. The click target has an `onclick` handler that triggers navigation from a `setTimeout`. Consider this example:

*   Sync
*   Async

    with page.expect_navigation():    # This action triggers the navigation after a timeout.    page.get_by_text("Navigate after timeout").click()# Resolves after navigation has finished

    async with page.expect_navigation():    # This action triggers the navigation after a timeout.    await page.get_by_text("Navigate after timeout").click()# Resolves after navigation has finished

note

Usage of the [History API](https://developer.mozilla.org/en-US/docs/Web/API/History_API) to change the URL is considered a navigation.

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-navigation-option-timeout)
    
    Maximum operation time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_navigation\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.set\_default\_navigation\_timeout()](/python/docs/api/class-page#page-set-default-navigation-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[URL](https://en.wikipedia.org/wiki/URL "URL")\]:[bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-wait-for-navigation-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://en.wikipedia.org/wiki/URL "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
    
*   `wait_until` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-wait-for-navigation-option-wait-until)
    
    When to consider operation succeeded, defaults to `load`. Events can be either:
    
    *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
    *   `'load'` - consider operation to be finished when the `load` event is fired.
    *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
    *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")\[[Response](/python/docs/api/class-response "Response")\][#](#page-wait-for-navigation-return)

* * *

### fill[​](#page-fill "Direct link to fill")

Added before v1.9 page.fill

Discouraged

Use locator-based [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. Read more about [locators](/python/docs/locators).

This method waits for an element matching [selector](/python/docs/api/class-page#page-fill-option-selector), waits for [actionability](/python/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

**Usage**

    page.fill(selector, value)page.fill(selector, value, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-fill-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-fill-option-value)
    
    Value to fill for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#page-fill-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-fill-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-fill-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-fill-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-fill-return)

* * *

### focus[​](#page-focus "Direct link to focus")

Added before v1.9 page.focus

Discouraged

Use locator-based [locator.focus()](/python/docs/api/class-locator#locator-focus) instead. Read more about [locators](/python/docs/locators).

This method fetches an element with [selector](/python/docs/api/class-page#page-focus-option-selector) and focuses it. If there's no element matching [selector](/python/docs/api/class-page#page-focus-option-selector), the method waits until a matching element appears in the DOM.

**Usage**

    page.focus(selector)page.focus(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-focus-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-focus-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-focus-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-focus-return)

* * *

### get\_attribute[​](#page-get-attribute "Direct link to get_attribute")

Added before v1.9 page.get\_attribute

Discouraged

Use locator-based [locator.get\_attribute()](/python/docs/api/class-locator#locator-get-attribute) instead. Read more about [locators](/python/docs/locators).

Returns element attribute value.

**Usage**

    page.get_attribute(selector, name)page.get_attribute(selector, name, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-get-attribute-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-get-attribute-option-name)
    
    Attribute name to get the value for.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-get-attribute-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-get-attribute-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-get-attribute-return)

* * *

### hover[​](#page-hover "Direct link to hover")

Added before v1.9 page.hover

Discouraged

Use locator-based [locator.hover()](/python/docs/api/class-locator#locator-hover) instead. Read more about [locators](/python/docs/locators).

This method hovers over an element matching [selector](/python/docs/api/class-page#page-hover-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-hover-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-hover-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/python/docs/api/class-page#page-hover-option-position).

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-hover-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    page.hover(selector)page.hover(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-hover-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-hover-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#page-hover-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.28[#](#page-hover-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-hover-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-hover-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-hover-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#page-hover-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-hover-return)

* * *

### inner\_html[​](#page-inner-html "Direct link to inner_html")

Added before v1.9 page.inner\_html

Discouraged

Use locator-based [locator.inner\_html()](/python/docs/api/class-locator#locator-inner-html) instead. Read more about [locators](/python/docs/locators).

Returns `element.innerHTML`.

**Usage**

    page.inner_html(selector)page.inner_html(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-inner-html-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-inner-html-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-inner-html-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-inner-html-return)

* * *

### inner\_text[​](#page-inner-text "Direct link to inner_text")

Added before v1.9 page.inner\_text

Discouraged

Use locator-based [locator.inner\_text()](/python/docs/api/class-locator#locator-inner-text) instead. Read more about [locators](/python/docs/locators).

Returns `element.innerText`.

**Usage**

    page.inner_text(selector)page.inner_text(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-inner-text-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-inner-text-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-inner-text-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-inner-text-return)

* * *

### input\_value[​](#page-input-value "Direct link to input_value")

Added in: v1.13 page.input\_value

Discouraged

Use locator-based [locator.input\_value()](/python/docs/api/class-locator#locator-input-value) instead. Read more about [locators](/python/docs/locators).

Returns `input.value` for the selected `<input>` or `<textarea>` or `<select>` element.

Throws for non-input elements. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

**Usage**

    page.input_value(selector)page.input_value(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-input-value-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-input-value-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-input-value-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-input-value-return)

* * *

### is\_checked[​](#page-is-checked "Direct link to is_checked")

Added before v1.9 page.is\_checked

Discouraged

Use locator-based [locator.is\_checked()](/python/docs/api/class-locator#locator-is-checked) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

**Usage**

    page.is_checked(selector)page.is_checked(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-is-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-is-checked-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-is-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-checked-return)

* * *

### is\_disabled[​](#page-is-disabled "Direct link to is_disabled")

Added before v1.9 page.is\_disabled

Discouraged

Use locator-based [locator.is\_disabled()](/python/docs/api/class-locator#locator-is-disabled) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is disabled, the opposite of [enabled](/python/docs/actionability#enabled).

**Usage**

    page.is_disabled(selector)page.is_disabled(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-is-disabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-is-disabled-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-is-disabled-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-disabled-return)

* * *

### is\_editable[​](#page-is-editable "Direct link to is_editable")

Added before v1.9 page.is\_editable

Discouraged

Use locator-based [locator.is\_editable()](/python/docs/api/class-locator#locator-is-editable) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [editable](/python/docs/actionability#editable).

**Usage**

    page.is_editable(selector)page.is_editable(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-is-editable-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-is-editable-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-is-editable-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-editable-return)

* * *

### is\_enabled[​](#page-is-enabled "Direct link to is_enabled")

Added before v1.9 page.is\_enabled

Discouraged

Use locator-based [locator.is\_enabled()](/python/docs/api/class-locator#locator-is-enabled) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [enabled](/python/docs/actionability#enabled).

**Usage**

    page.is_enabled(selector)page.is_enabled(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-is-enabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-is-enabled-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-is-enabled-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-enabled-return)

* * *

### is\_hidden[​](#page-is-hidden "Direct link to is_hidden")

Added before v1.9 page.is\_hidden

Discouraged

Use locator-based [locator.is\_hidden()](/python/docs/api/class-locator#locator-is-hidden) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is hidden, the opposite of [visible](/python/docs/actionability#visible). [selector](/python/docs/api/class-page#page-is-hidden-option-selector) that does not match any elements is considered hidden.

**Usage**

    page.is_hidden(selector)page.is_hidden(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-is-hidden-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-is-hidden-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-is-hidden-option-timeout)
    
    Deprecated
    
    This option is ignored. [page.is\_hidden()](/python/docs/api/class-page#page-is-hidden) does not wait for the element to become hidden and returns immediately.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-hidden-return)

* * *

### is\_visible[​](#page-is-visible "Direct link to is_visible")

Added before v1.9 page.is\_visible

Discouraged

Use locator-based [locator.is\_visible()](/python/docs/api/class-locator#locator-is-visible) instead. Read more about [locators](/python/docs/locators).

Returns whether the element is [visible](/python/docs/actionability#visible). [selector](/python/docs/api/class-page#page-is-visible-option-selector) that does not match any elements is considered not visible.

**Usage**

    page.is_visible(selector)page.is_visible(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-is-visible-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-is-visible-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-is-visible-option-timeout)
    
    Deprecated
    
    This option is ignored. [page.is\_visible()](/python/docs/api/class-page#page-is-visible) does not wait for the element to become visible and returns immediately.
    

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-is-visible-return)

* * *

### press[​](#page-press "Direct link to press")

Added before v1.9 page.press

Discouraged

Use locator-based [locator.press()](/python/docs/api/class-locator#locator-press) instead. Read more about [locators](/python/docs/locators).

Focuses the element, and then uses [keyboard.down()](/python/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/python/docs/api/class-keyboard#keyboard-up).

[key](/python/docs/api/class-page#page-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/python/docs/api/class-page#page-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/python/docs/api/class-page#page-press-option-key) in the upper case.

If [key](/python/docs/api/class-page#page-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

*   Sync
*   Async

    page = browser.new_page()page.goto("https://keycode.info")page.press("body", "A")page.screenshot(path="a.png")page.press("body", "ArrowLeft")page.screenshot(path="arrow_left.png")page.press("body", "Shift+O")page.screenshot(path="o.png")browser.close()

    page = await browser.new_page()await page.goto("https://keycode.info")await page.press("body", "A")await page.screenshot(path="a.png")await page.press("body", "ArrowLeft")await page.screenshot(path="arrow_left.png")await page.press("body", "Shift+O")await page.screenshot(path="o.png")await browser.close()

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-press-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `key` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-press-option-delay)
    
    Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-press-option-no-wait-after)
    
    Deprecated
    
    This option will default to `true` in the future.
    
    Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-press-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-press-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-press-return)

* * *

### query\_selector[​](#page-query-selector "Direct link to query_selector")

Added in: v1.9 page.query\_selector

Discouraged

Use locator-based [page.locator()](/python/docs/api/class-page#page-locator) instead. Read more about [locators](/python/docs/locators).

The method finds an element matching the specified selector within the page. If no elements match the selector, the return value resolves to `null`. To wait for an element on the page, use [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for).

**Usage**

    page.query_selector(selector)page.query_selector(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-query-selector-option-selector)
    
    A selector to query for.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-query-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#page-query-selector-return)

* * *

### query\_selector\_all[​](#page-query-selector-all "Direct link to query_selector_all")

Added in: v1.9 page.query\_selector\_all

Discouraged

Use locator-based [page.locator()](/python/docs/api/class-page#page-locator) instead. Read more about [locators](/python/docs/locators).

The method finds all elements matching the specified selector within the page. If no elements match the selector, the return value resolves to `[]`.

**Usage**

    page.query_selector_all(selector)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-query-selector-all-option-selector)
    
    A selector to query for.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\][#](#page-query-selector-all-return)

* * *

### select\_option[​](#page-select-option "Direct link to select_option")

Added before v1.9 page.select\_option

Discouraged

Use locator-based [locator.select\_option()](/python/docs/api/class-locator#locator-select-option) instead. Read more about [locators](/python/docs/locators).

This method waits for an element matching [selector](/python/docs/api/class-page#page-select-option-option-selector), waits for [actionability](/python/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

**Usage**

*   Sync
*   Async

    # Single selection matching the value or labelpage.select_option("select#colors", "blue")# single selection matching both the labelpage.select_option("select#colors", label="blue")# multiple selectionpage.select_option("select#colors", value=["red", "green", "blue"])

    # Single selection matching the value or labelawait page.select_option("select#colors", "blue")# single selection matching the labelawait page.select_option("select#colors", label="blue")# multiple selectionawait page.select_option("select#colors", value=["red", "green", "blue"])

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-select-option-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.13[#](#page-select-option-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-select-option-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-select-option-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-select-option-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `element` [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")\] _(optional)_[#](#page-select-option-option-element)
    
    Option elements to select. Optional.
    
*   `index` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")\] _(optional)_[#](#page-select-option-option-index)
    
    Options to select by index. Optional.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#page-select-option-option-value)
    
    Options to select by value. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    
*   `label` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#page-select-option-option-label)
    
    Options to select by label. If the `<select>` has the `multiple` attribute, all given options are selected, otherwise only the first option matching one of the passed options is selected. Optional.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#page-select-option-return)

* * *

### set\_checked[​](#page-set-checked "Direct link to set_checked")

Added in: v1.15 page.set\_checked

Discouraged

Use locator-based [locator.set\_checked()](/python/docs/api/class-locator#locator-set-checked) instead. Read more about [locators](/python/docs/locators).

This method checks or unchecks an element matching [selector](/python/docs/api/class-page#page-set-checked-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-set-checked-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws.
3.  If the element already has the right checked state, this method returns immediately.
4.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
5.  Scroll the element into view if needed.
6.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
7.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-set-checked-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    page.set_checked(selector, checked)page.set_checked(selector, checked, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-set-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#page-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-set-checked-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-set-checked-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-set-checked-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-set-checked-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-set-checked-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-set-checked-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-set-checked-return)

* * *

### set\_input\_files[​](#page-set-input-files "Direct link to set_input_files")

Added before v1.9 page.set\_input\_files

Discouraged

Use locator-based [locator.set\_input\_files()](/python/docs/api/class-locator#locator-set-input-files) instead. Read more about [locators](/python/docs/locators).

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files. For inputs with a `[webkitdirectory]` attribute, only a single directory path is supported.

This method expects [selector](/python/docs/api/class-page#page-set-input-files-option-selector) to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

**Usage**

    page.set_input_files(selector, files)page.set_input_files(selector, files, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-set-input-files-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `files` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\]\] | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#page-set-input-files-option-files)
    
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File name
        
    *   `mimeType` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        File type
        
    *   `buffer` [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")
        
        File content
        
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-set-input-files-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-set-input-files-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-set-input-files-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-set-input-files-return)

* * *

### tap[​](#page-tap "Direct link to tap")

Added before v1.9 page.tap

Discouraged

Use locator-based [locator.tap()](/python/docs/api/class-locator#locator-tap) instead. Read more about [locators](/python/docs/locators).

This method taps an element matching [selector](/python/docs/api/class-page#page-tap-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-tap-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-tap-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.touchscreen](/python/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/python/docs/api/class-page#page-tap-option-position).

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-tap-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

[page.tap()](/python/docs/api/class-page#page-tap) the method will throw if [has\_touch](/python/docs/api/class-browser#browser-new-context-option-has-touch) option of the browser context is false.

**Usage**

    page.tap(selector)page.tap(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-tap-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-tap-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `modifiers` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\["Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"\] _(optional)_[#](#page-tap-option-modifiers)
    
    Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-tap-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#page-tap-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-tap-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-tap-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#page-tap-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-tap-return)

* * *

### text\_content[​](#page-text-content "Direct link to text_content")

Added before v1.9 page.text\_content

Discouraged

Use locator-based [locator.text\_content()](/python/docs/api/class-locator#locator-text-content) instead. Read more about [locators](/python/docs/locators).

Returns `element.textContent`.

**Usage**

    page.text_content(selector)page.text_content(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-text-content-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-text-content-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-text-content-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-text-content-return)

* * *

### type[​](#page-type "Direct link to type")

Added before v1.9 page.type

Deprecated

In most cases, you should use [locator.fill()](/python/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.press\_sequentially()](/python/docs/api/class-locator#locator-press-sequentially).

Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text. `page.type` can be used to send fine-grained keyboard events. To fill values in form fields, use [page.fill()](/python/docs/api/class-page#page-fill).

To press a special key, like `Control` or `ArrowDown`, use [keyboard.press()](/python/docs/api/class-keyboard#keyboard-press).

**Usage**

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-type-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `text` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-type-option-text)
    
    A text to type into a focused element.
    
*   `delay` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-type-option-delay)
    
    Time to wait between key presses in milliseconds. Defaults to 0.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-type-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-type-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-type-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-type-return)

* * *

### uncheck[​](#page-uncheck "Direct link to uncheck")

Added before v1.9 page.uncheck

Discouraged

Use locator-based [locator.uncheck()](/python/docs/api/class-locator#locator-uncheck) instead. Read more about [locators](/python/docs/locators).

This method unchecks an element matching [selector](/python/docs/api/class-page#page-uncheck-option-selector) by performing the following steps:

1.  Find an element matching [selector](/python/docs/api/class-page#page-uncheck-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
3.  Wait for [actionability](/python/docs/actionability) checks on the matched element, unless [force](/python/docs/api/class-page#page-uncheck-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/python/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/python/docs/api/class-page#page-uncheck-option-timeout), this method throws a [TimeoutError](/python/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    page.uncheck(selector)page.uncheck(selector, **kwargs)

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-uncheck-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `force` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-uncheck-option-force)
    
    Whether to bypass the [actionability](/python/docs/actionability) checks. Defaults to `false`.
    
*   `no_wait_after` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#page-uncheck-option-no-wait-after)
    
    Deprecated
    
    This option has no effect.
    
    This option has no effect.
    
*   `position` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.11[#](#page-uncheck-option-position)
    
    *   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    *   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
    
    A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
    
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-uncheck-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-uncheck-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    
*   `trial` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.11[#](#page-uncheck-option-trial)
    
    When set, this method only performs the [actionability](/python/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-uncheck-return)

* * *

### wait\_for\_selector[​](#page-wait-for-selector "Direct link to wait_for_selector")

Added before v1.9 page.wait\_for\_selector

Discouraged

Use web assertions that assert visibility or a locator-based [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for) instead. Read more about [locators](/python/docs/locators).

Returns when element specified by selector satisfies [state](/python/docs/api/class-page#page-wait-for-selector-option-state) option. Returns `null` if waiting for `hidden` or `detached`.

note

Playwright automatically waits for element to be ready before performing an action. Using [Locator](/python/docs/api/class-locator "Locator") objects and web-first assertions makes the code wait-for-selector-free.

Wait for the [selector](/python/docs/api/class-page#page-wait-for-selector-option-selector) to satisfy [state](/python/docs/api/class-page#page-wait-for-selector-option-state) option (either appear/disappear from dom, or become visible/hidden). If at the moment of calling the method [selector](/python/docs/api/class-page#page-wait-for-selector-option-selector) already satisfies the condition, the method will return immediately. If the selector doesn't satisfy the condition for the [timeout](/python/docs/api/class-page#page-wait-for-selector-option-timeout) milliseconds, the function will throw.

**Usage**

This method works across navigations:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    chromium = playwright.chromium    browser = chromium.launch()    page = browser.new_page()    for current_url in ["https://google.com", "https://bbc.com"]:        page.goto(current_url, wait_until="domcontentloaded")        element = page.wait_for_selector("img")        print("Loaded image: " + str(element.get_attribute("src")))    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    chromium = playwright.chromium    browser = await chromium.launch()    page = await browser.new_page()    for current_url in ["https://google.com", "https://bbc.com"]:        await page.goto(current_url, wait_until="domcontentloaded")        element = await page.wait_for_selector("img")        print("Loaded image: " + str(await element.get_attribute("src")))    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `selector` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#page-wait-for-selector-option-selector)
    
    A selector to query for.
    
*   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#page-wait-for-selector-option-state)
    
    Defaults to `'visible'`. Can be either:
    
    *   `'attached'` - wait for element to be present in DOM.
    *   `'detached'` - wait for element to not be present in DOM.
    *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
    *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
*   `strict` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.14[#](#page-wait-for-selector-option-strict)
    
    When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#page-wait-for-selector-option-timeout)
    
    Maximum time in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.set\_default\_timeout()](/python/docs/api/class-page#page-set-default-timeout) methods.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [ElementHandle](/python/docs/api/class-elementhandle "ElementHandle")[#](#page-wait-for-selector-return)

* * *

### wait\_for\_timeout[​](#page-wait-for-timeout "Direct link to wait_for_timeout")

Added before v1.9 page.wait\_for\_timeout

Discouraged

Never wait for timeout in production. Tests that wait for time are inherently flaky. Use [Locator](/python/docs/api/class-locator "Locator") actions and web assertions that wait automatically.

Waits for the given [timeout](/python/docs/api/class-page#page-wait-for-timeout-option-timeout) in milliseconds.

Note that `page.waitForTimeout()` should only be used for debugging. Tests using the timer in production are going to be flaky. Use signals such as network events, selectors becoming visible and others instead.

**Usage**

*   Sync
*   Async

    # wait for 1 secondpage.wait_for_timeout(1000)

    # wait for 1 secondawait page.wait_for_timeout(1000)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#page-wait-for-timeout-option-timeout)
    
    A timeout to wait for
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-wait-for-timeout-return)

# Request

Request
=======

Whenever the page sends a request for a network resource the following sequence of events are emitted by [Page](/python/docs/api/class-page "Page"):

*   [page.on("request")](/python/docs/api/class-page#page-event-request) emitted when the request is issued by the page.
*   [page.on("response")](/python/docs/api/class-page#page-event-response) emitted when/if the response status and headers are received for the request.
*   [page.on("requestfinished")](/python/docs/api/class-page#page-event-request-finished) emitted when the response body is downloaded and the request is complete.

If request fails at some point, then instead of `'requestfinished'` event (and possibly instead of 'response' event), the [page.on("requestfailed")](/python/docs/api/class-page#page-event-request-failed) event is emitted.

note

HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with `'requestfinished'` event.

If request gets a 'redirect' response, the request is successfully finished with the `requestfinished` event, and a new request is issued to a redirected url.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### all\_headers[​](#request-all-headers "Direct link to all_headers")

Added in: v1.15 request.all\_headers

An object with all the request HTTP headers associated with this request. The header names are lower-cased.

**Usage**

    request.all_headers()

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#request-all-headers-return)

* * *

### header\_value[​](#request-header-value "Direct link to header_value")

Added in: v1.15 request.header\_value

Returns the value of the header matching the name. The name is case-insensitive.

**Usage**

    request.header_value(name)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-header-value-option-name)
    
    Name of the header.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-header-value-return)

* * *

### headers\_array[​](#request-headers-array "Direct link to headers_array")

Added in: v1.15 request.headers\_array

An array with all the request HTTP headers associated with this request. Unlike [request.all\_headers()](/python/docs/api/class-request#request-all-headers), header names are NOT lower-cased. Headers with multiple entries, such as `Set-Cookie`, appear in the array multiple times.

**Usage**

    request.headers_array()

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#request-headers-array-return)
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Name of the header.
        
    *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Value of the header.
        

* * *

### response[​](#request-response "Direct link to response")

Added before v1.9 request.response

Returns the matching [Response](/python/docs/api/class-response "Response") object, or `null` if the response was not received due to error.

**Usage**

    request.response()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Response](/python/docs/api/class-response "Response")[#](#request-response-return)

* * *

### sizes[​](#request-sizes "Direct link to sizes")

Added in: v1.15 request.sizes

Returns resource size information for given request.

**Usage**

    request.sizes()

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#request-sizes-return)
    *   `requestBodySize` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Size of the request body (POST data payload) in bytes. Set to 0 if there was no body.
        
    *   `requestHeadersSize` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Total number of bytes from the start of the HTTP request message until (and including) the double CRLF before the body.
        
    *   `responseBodySize` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Size of the received response body (encoded) in bytes.
        
    *   `responseHeadersSize` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        
        Total number of bytes from the start of the HTTP response message until (and including) the double CRLF before the body.
        

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### failure[​](#request-failure "Direct link to failure")

Added before v1.9 request.failure

The method returns `null` unless this request has failed, as reported by `requestfailed` event.

**Usage**

Example of logging of all the failed requests:

    page.on("requestfailed", lambda request: print(request.url + " " + request.failure))

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-failure-return)

* * *

### frame[​](#request-frame "Direct link to frame")

Added before v1.9 request.frame

Returns the [Frame](/python/docs/api/class-frame "Frame") that initiated this request.

**Usage**

    frame_url = request.frame.url

**Returns**

*   [Frame](/python/docs/api/class-frame "Frame")[#](#request-frame-return)

**Details**

Note that in some cases the frame is not available, and this method will throw.

*   When request originates in the Service Worker. You can use `request.serviceWorker()` to check that.
*   When navigation request is issued before the corresponding frame is created. You can use [request.is\_navigation\_request()](/python/docs/api/class-request#request-is-navigation-request) to check that.

Here is an example that handles all the cases:

* * *

### headers[​](#request-headers "Direct link to headers")

Added before v1.9 request.headers

An object with the request HTTP headers. The header names are lower-cased. Note that this method does not return security-related headers, including cookie-related ones. You can use [request.all\_headers()](/python/docs/api/class-request#request-all-headers) for complete list of headers that include `cookie` information.

**Usage**

    request.headers

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#request-headers-return)

* * *

### is\_navigation\_request[​](#request-is-navigation-request "Direct link to is_navigation_request")

Added before v1.9 request.is\_navigation\_request

Whether this request is driving frame's navigation.

Some navigation requests are issued before the corresponding frame is created, and therefore do not have [request.frame](/python/docs/api/class-request#request-frame) available.

**Usage**

    request.is_navigation_request()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#request-is-navigation-request-return)

* * *

### method[​](#request-method "Direct link to method")

Added before v1.9 request.method

Request's method (GET, POST, etc.)

**Usage**

    request.method

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-method-return)

* * *

### post\_data[​](#request-post-data "Direct link to post_data")

Added before v1.9 request.post\_data

Request's post body, if any.

**Usage**

    request.post_data

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-post-data-return)

* * *

### post\_data\_buffer[​](#request-post-data-buffer "Direct link to post_data_buffer")

Added before v1.9 request.post\_data\_buffer

Request's post body in a binary form, if any.

**Usage**

    request.post_data_buffer

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#request-post-data-buffer-return)

* * *

### post\_data\_json[​](#request-post-data-json "Direct link to post_data_json")

Added before v1.9 request.post\_data\_json

Returns parsed request's body for `form-urlencoded` and JSON as a fallback if any.

When the response is `application/x-www-form-urlencoded` then a key/value object of the values will be returned. Otherwise it will be parsed as JSON.

**Usage**

    request.post_data_json

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#request-post-data-json-return)

* * *

### redirected\_from[​](#request-redirected-from "Direct link to redirected_from")

Added before v1.9 request.redirected\_from

Request that was redirected by the server to this one, if any.

When the server responds with a redirect, Playwright creates a new [Request](/python/docs/api/class-request "Request") object. The two requests are connected by `redirectedFrom()` and `redirectedTo()` methods. When multiple server redirects has happened, it is possible to construct the whole redirect chain by repeatedly calling `redirectedFrom()`.

**Usage**

For example, if the website `http://example.com` redirects to `https://example.com`:

*   Sync
*   Async

    response = page.goto("http://example.com")print(response.request.redirected_from.url) # "http://example.com"

    response = await page.goto("http://example.com")print(response.request.redirected_from.url) # "http://example.com"

If the website `https://google.com` has no redirects:

*   Sync
*   Async

    response = page.goto("https://google.com")print(response.request.redirected_from) # None

    response = await page.goto("https://google.com")print(response.request.redirected_from) # None

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Request](/python/docs/api/class-request "Request")[#](#request-redirected-from-return)

* * *

### redirected\_to[​](#request-redirected-to "Direct link to redirected_to")

Added before v1.9 request.redirected\_to

New request issued by the browser if the server responded with redirect.

**Usage**

This method is the opposite of [request.redirected\_from](/python/docs/api/class-request#request-redirected-from):

    assert request.redirected_from.redirected_to == request

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Request](/python/docs/api/class-request "Request")[#](#request-redirected-to-return)

* * *

### resource\_type[​](#request-resource-type "Direct link to resource_type")

Added before v1.9 request.resource\_type

Contains the request's resource type as it was perceived by the rendering engine. ResourceType will be one of the following: `document`, `stylesheet`, `image`, `media`, `font`, `script`, `texttrack`, `xhr`, `fetch`, `eventsource`, `websocket`, `manifest`, `other`.

**Usage**

    request.resource_type

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-resource-type-return)

* * *

### timing[​](#request-timing "Direct link to timing")

Added before v1.9 request.timing

Returns resource timing information for given request. Most of the timing values become available upon the response, `responseEnd` becomes available when request finishes. Find more information at [Resource Timing API](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming).

**Usage**

*   Sync
*   Async

    with page.expect_event("requestfinished") as request_info:    page.goto("http://example.com")request = request_info.valueprint(request.timing)

    async with page.expect_event("requestfinished") as request_info:    await page.goto("http://example.com")request = await request_info.valueprint(request.timing)

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#request-timing-return)
    *   `startTime` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Request start time in milliseconds elapsed since January 1, 1970 00:00:00 UTC
        
    *   `domainLookupStart` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately before the browser starts the domain name lookup for the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `domainLookupEnd` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately after the browser starts the domain name lookup for the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `connectStart` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately before the user agent starts establishing the connection to the server to retrieve the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `secureConnectionStart` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately before the browser starts the handshake process to secure the current connection. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `connectEnd` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately before the user agent starts establishing the connection to the server to retrieve the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `requestStart` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately before the browser starts requesting the resource from the server, cache, or local resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `responseStart` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately after the browser receives the first byte of the response from the server, cache, or local resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `responseEnd` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")
        
        Time immediately after the browser receives the last byte of the resource or immediately before the transport connection is closed, whichever comes first. The value is given in milliseconds relative to `startTime`, -1 if not available.
        

* * *

### url[​](#request-url "Direct link to url")

Added before v1.9 request.url

URL of the request.

**Usage**

    request.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#request-url-return)

# Response

Response
========

[Response](/python/docs/api/class-response "Response") class represents responses which are received by page.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### all\_headers[​](#response-all-headers "Direct link to all_headers")

Added in: v1.15 response.all\_headers

An object with all the response HTTP headers associated with this response.

**Usage**

    response.all_headers()

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#response-all-headers-return)

* * *

### body[​](#response-body "Direct link to body")

Added before v1.9 response.body

Returns the buffer with response body.

**Usage**

    response.body()

**Returns**

*   [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#response-body-return)

* * *

### finished[​](#response-finished "Direct link to finished")

Added before v1.9 response.finished

Waits for this response to finish, returns always `null`.

**Usage**

    response.finished()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-finished-return)

* * *

### header\_value[​](#response-header-value "Direct link to header_value")

Added in: v1.15 response.header\_value

Returns the value of the header matching the name. The name is case-insensitive. If multiple headers have the same name (except `set-cookie`), they are returned as a list separated by `,` . For `set-cookie`, the `\n` separator is used. If no headers are found, `null` is returned.

**Usage**

    response.header_value(name)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-header-value-option-name)
    
    Name of the header.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-header-value-return)

* * *

### header\_values[​](#response-header-values "Direct link to header_values")

Added in: v1.15 response.header\_values

Returns all values of the headers matching the name, for example `set-cookie`. The name is case-insensitive.

**Usage**

    response.header_values(name)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-header-values-option-name)
    
    Name of the header.
    

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#response-header-values-return)

* * *

### headers\_array[​](#response-headers-array "Direct link to headers_array")

Added in: v1.15 response.headers\_array

An array with all the request HTTP headers associated with this response. Unlike [response.all\_headers()](/python/docs/api/class-response#response-all-headers), header names are NOT lower-cased. Headers with multiple entries, such as `Set-Cookie`, appear in the array multiple times.

**Usage**

    response.headers_array()

**Returns**

*   [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\][#](#response-headers-array-return)
    *   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Name of the header.
        
    *   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        Value of the header.
        

* * *

### json[​](#response-json "Direct link to json")

Added before v1.9 response.json

Returns the JSON representation of response body.

This method will throw if the response body is not parsable via `JSON.parse`.

**Usage**

    response.json()

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#response-json-return)

* * *

### security\_details[​](#response-security-details "Direct link to security_details")

Added in: v1.13 response.security\_details

Returns SSL and other security information.

**Usage**

    response.security_details()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#response-security-details-return)
    *   `issuer` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Common Name component of the Issuer field. from the certificate. This should only be used for informational purposes. Optional.
        
    *   `protocol` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        The specific TLS protocol used. (e.g. `TLS 1.3`). Optional.
        
    *   `subjectName` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_
        
        Common Name component of the Subject field from the certificate. This should only be used for informational purposes. Optional.
        
    *   `validFrom` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Unix timestamp (in seconds) specifying when this cert becomes valid. Optional.
        
    *   `validTo` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_
        
        Unix timestamp (in seconds) specifying when this cert becomes invalid. Optional.
        

* * *

### server\_addr[​](#response-server-addr "Direct link to server_addr")

Added in: v1.13 response.server\_addr

Returns the IP address and port of the server.

**Usage**

    response.server_addr()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#response-server-addr-return)
    *   `ipAddress` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
        IPv4 or IPV6 address of the server.
        
    *   `port` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")
        

* * *

### text[​](#response-text "Direct link to text")

Added before v1.9 response.text

Returns the text representation of response body.

**Usage**

    response.text()

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-text-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### frame[​](#response-frame "Direct link to frame")

Added before v1.9 response.frame

Returns the [Frame](/python/docs/api/class-frame "Frame") that initiated this response.

**Usage**

    response.frame

**Returns**

*   [Frame](/python/docs/api/class-frame "Frame")[#](#response-frame-return)

* * *

### from\_service\_worker[​](#response-from-service-worker "Direct link to from_service_worker")

Added in: v1.23 response.from\_service\_worker

Indicates whether this Response was fulfilled by a Service Worker's Fetch Handler (i.e. via [FetchEvent.respondWith](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/respondWith)).

**Usage**

    response.from_service_worker

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#response-from-service-worker-return)

* * *

### headers[​](#response-headers "Direct link to headers")

Added before v1.9 response.headers

An object with the response HTTP headers. The header names are lower-cased. Note that this method does not return security-related headers, including cookie-related ones. You can use [response.all\_headers()](/python/docs/api/class-response#response-all-headers) for complete list of headers that include `cookie` information.

**Usage**

    response.headers

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#response-headers-return)

* * *

### ok[​](#response-ok "Direct link to ok")

Added before v1.9 response.ok

Contains a boolean stating whether the response was successful (status in the range 200-299) or not.

**Usage**

    response.ok

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#response-ok-return)

* * *

### request[​](#response-request "Direct link to request")

Added before v1.9 response.request

Returns the matching [Request](/python/docs/api/class-request "Request") object.

**Usage**

    response.request

**Returns**

*   [Request](/python/docs/api/class-request "Request")[#](#response-request-return)

* * *

### status[​](#response-status "Direct link to status")

Added before v1.9 response.status

Contains the status code of the response (e.g., 200 for a success).

**Usage**

    response.status

**Returns**

*   [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int")[#](#response-status-return)

* * *

### status\_text[​](#response-status-text "Direct link to status_text")

Added before v1.9 response.status\_text

Contains the status text of the response (e.g. usually an "OK" for a success).

**Usage**

    response.status_text

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-status-text-return)

* * *

### url[​](#response-url "Direct link to url")

Added before v1.9 response.url

Contains the URL of the response.

**Usage**

    response.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#response-url-return)

# Route

Route
=====

Whenever a network route is set up with [page.route()](/python/docs/api/class-page#page-route) or [browser\_context.route()](/python/docs/api/class-browsercontext#browser-context-route), the `Route` object allows to handle the route.

Learn more about [networking](/python/docs/network).

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### abort[​](#route-abort "Direct link to abort")

Added before v1.9 route.abort

Aborts the route's request.

**Usage**

    route.abort()route.abort(**kwargs)

**Arguments**

*   `error_code` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-abort-option-error-code)
    
    Optional error code. Defaults to `failed`, could be one of the following:
    
    *   `'aborted'` - An operation was aborted (due to user action)
    *   `'accessdenied'` - Permission to access a resource, other than the network, was denied
    *   `'addressunreachable'` - The IP address is unreachable. This usually means that there is no route to the specified host or network.
    *   `'blockedbyclient'` - The client chose to block the request.
    *   `'blockedbyresponse'` - The request failed because the response was delivered along with requirements which are not met ('X-Frame-Options' and 'Content-Security-Policy' ancestor checks, for instance).
    *   `'connectionaborted'` - A connection timed out as a result of not receiving an ACK for data sent.
    *   `'connectionclosed'` - A connection was closed (corresponding to a TCP FIN).
    *   `'connectionfailed'` - A connection attempt failed.
    *   `'connectionrefused'` - A connection attempt was refused.
    *   `'connectionreset'` - A connection was reset (corresponding to a TCP RST).
    *   `'internetdisconnected'` - The Internet connection has been lost.
    *   `'namenotresolved'` - The host name could not be resolved.
    *   `'timedout'` - An operation timed out.
    *   `'failed'` - A generic failure occurred.

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#route-abort-return)

* * *

### continue\_[​](#route-continue "Direct link to continue_")

Added before v1.9 route.continue\_

Sends route's request to the network with optional overrides.

**Usage**

*   Sync
*   Async

    def handle(route, request):    # override headers    headers = {        **request.headers,        "foo": "foo-value", # set "foo" header        "bar": None # remove "bar" header    }    route.continue_(headers=headers)page.route("**/*", handle)

    async def handle(route, request):    # override headers    headers = {        **request.headers,        "foo": "foo-value", # set "foo" header        "bar": None # remove "bar" header    }    await route.continue_(headers=headers)await page.route("**/*", handle)

**Arguments**

*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#route-continue-option-headers)
    
    If set changes the request HTTP headers. Header values will be converted to a string.
    
*   `method` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-continue-option-method)
    
    If set changes the request method (e.g. GET or POST).
    
*   `post_data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#route-continue-option-post-data)
    
    If set changes the post data of request.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-continue-option-url)
    
    If set changes the request URL. New URL must have same protocol as original one.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#route-continue-return)

**Details**

The [headers](/python/docs/api/class-route#route-continue-option-headers) option applies to both the routed request and any redirects it initiates. However, [url](/python/docs/api/class-route#route-continue-option-url), [method](/python/docs/api/class-route#route-continue-option-method), and [post\_data](/python/docs/api/class-route#route-continue-option-post-data) only apply to the original request and are not carried over to redirected requests.

[route.continue\_()](/python/docs/api/class-route#route-continue) will immediately send the request to the network, other matching handlers won't be invoked. Use [route.fallback()](/python/docs/api/class-route#route-fallback) If you want next matching handler in the chain to be invoked.

warning

The `Cookie` header cannot be overridden using this method. If a value is provided, it will be ignored, and the cookie will be loaded from the browser's cookie store. To set custom cookies, use [browser\_context.add\_cookies()](/python/docs/api/class-browsercontext#browser-context-add-cookies).

* * *

### fallback[​](#route-fallback "Direct link to fallback")

Added in: v1.23 route.fallback

Continues route's request with optional overrides. The method is similar to [route.continue\_()](/python/docs/api/class-route#route-continue) with the difference that other matching handlers will be invoked before sending the request.

**Usage**

When several routes match the given pattern, they run in the order opposite to their registration. That way the last registered route can always override all the previous ones. In the example below, request will be handled by the bottom-most handler first, then it'll fall back to the previous one and in the end will be aborted by the first registered route.

*   Sync
*   Async

    page.route("**/*", lambda route: route.abort())  # Runs last.page.route("**/*", lambda route: route.fallback())  # Runs second.page.route("**/*", lambda route: route.fallback())  # Runs first.

    await page.route("**/*", lambda route: route.abort())  # Runs last.await page.route("**/*", lambda route: route.fallback())  # Runs second.await page.route("**/*", lambda route: route.fallback())  # Runs first.

Registering multiple routes is useful when you want separate handlers to handle different kinds of requests, for example API calls vs page resources or GET requests vs POST requests as in the example below.

*   Sync
*   Async

    # Handle GET requests.def handle_get(route):    if route.request.method != "GET":        route.fallback()        return  # Handling GET only.  # ...# Handle POST requests.def handle_post(route):    if route.request.method != "POST":        route.fallback()        return  # Handling POST only.  # ...page.route("**/*", handle_get)page.route("**/*", handle_post)

    # Handle GET requests.async def handle_get(route):    if route.request.method != "GET":        await route.fallback()        return  # Handling GET only.  # ...# Handle POST requests.async def handle_post(route):    if route.request.method != "POST":        await route.fallback()        return  # Handling POST only.  # ...await page.route("**/*", handle_get)await page.route("**/*", handle_post)

One can also modify request while falling back to the subsequent handler, that way intermediate route handler can modify url, method, headers and postData of the request.

*   Sync
*   Async

    def handle(route, request):    # override headers    headers = {        **request.headers,        "foo": "foo-value", # set "foo" header        "bar": None # remove "bar" header    }    route.fallback(headers=headers)page.route("**/*", handle)

    async def handle(route, request):    # override headers    headers = {        **request.headers,        "foo": "foo-value", # set "foo" header        "bar": None # remove "bar" header    }    await route.fallback(headers=headers)await page.route("**/*", handle)

Use [route.continue\_()](/python/docs/api/class-route#route-continue) to immediately send the request to the network, other matching handlers won't be invoked in that case.

**Arguments**

*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#route-fallback-option-headers)
    
    If set changes the request HTTP headers. Header values will be converted to a string.
    
*   `method` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-fallback-option-method)
    
    If set changes the request method (e.g. GET or POST).
    
*   `post_data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#route-fallback-option-post-data)
    
    If set changes the post data of request.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-fallback-option-url)
    
    If set changes the request URL. New URL must have same protocol as original one. Changing the URL won't affect the route matching, all the routes are matched using the original request URL.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#route-fallback-return)

* * *

### fetch[​](#route-fetch "Direct link to fetch")

Added in: v1.29 route.fetch

Performs the request and fetches result without fulfilling it, so that the response could be modified and then fulfilled.

**Usage**

*   Sync
*   Async

    def handle(route):    response = route.fetch()    json = response.json()    json["message"]["big_red_dog"] = []    route.fulfill(response=response, json=json)page.route("https://dog.ceo/api/breeds/list/all", handle)

    async def handle(route):    response = await route.fetch()    json = await response.json()    json["message"]["big_red_dog"] = []    await route.fulfill(response=response, json=json)await page.route("https://dog.ceo/api/breeds/list/all", handle)

**Arguments**

*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#route-fetch-option-headers)
    
    If set changes the request HTTP headers. Header values will be converted to a string.
    
*   `max_redirects` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.31[#](#route-fetch-option-max-redirects)
    
    Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
    
*   `max_retries` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_ Added in: v1.46[#](#route-fetch-option-max-retries)
    
    Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
    
*   `method` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-fetch-option-method)
    
    If set changes the request method (e.g. GET or POST).
    
*   `post_data` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") | [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#route-fetch-option-post-data)
    
    Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.33[#](#route-fetch-option-timeout)
    
    Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
    
*   `url` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-fetch-option-url)
    
    If set changes the request URL. New URL must have same protocol as original one.
    

**Returns**

*   [APIResponse](/python/docs/api/class-apiresponse "APIResponse")[#](#route-fetch-return)

**Details**

Note that [headers](/python/docs/api/class-route#route-fetch-option-headers) option will apply to the fetched request as well as any redirects initiated by it. If you want to only apply [headers](/python/docs/api/class-route#route-fetch-option-headers) to the original request, but not to redirects, look into [route.continue\_()](/python/docs/api/class-route#route-continue) instead.

* * *

### fulfill[​](#route-fulfill "Direct link to fulfill")

Added before v1.9 route.fulfill

Fulfills route's request with given response.

**Usage**

An example of fulfilling all requests with 404 responses:

*   Sync
*   Async

    page.route("**/*", lambda route: route.fulfill(    status=404,    content_type="text/plain",    body="not found!"))

    await page.route("**/*", lambda route: route.fulfill(    status=404,    content_type="text/plain",    body="not found!"))

An example of serving static file:

*   Sync
*   Async

    page.route("**/xhr_endpoint", lambda route: route.fulfill(path="mock_data.json"))

    await page.route("**/xhr_endpoint", lambda route: route.fulfill(path="mock_data.json"))

**Arguments**

*   `body` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") _(optional)_[#](#route-fulfill-option-body)
    
    Response body.
    
*   `content_type` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#route-fulfill-option-content-type)
    
    If set, equals to setting `Content-Type` response header.
    
*   `headers` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] _(optional)_[#](#route-fulfill-option-headers)
    
    Response headers. Header values will be converted to a string.
    
*   `json` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_ Added in: v1.29[#](#route-fulfill-option-json)
    
    JSON response. This method will set the content type to `application/json` if not set.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#route-fulfill-option-path)
    
    File path to respond with. The content type will be inferred from file extension. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `response` [APIResponse](/python/docs/api/class-apiresponse "APIResponse") _(optional)_ Added in: v1.15[#](#route-fulfill-option-response)
    
    [APIResponse](/python/docs/api/class-apiresponse "APIResponse") to fulfill route's request with. Individual fields of the response (such as headers) can be overridden using fulfill options.
    
*   `status` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#route-fulfill-option-status)
    
    Response status code, defaults to `200`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#route-fulfill-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### request[​](#route-request "Direct link to request")

Added before v1.9 route.request

A request to be routed.

**Usage**

    route.request

**Returns**

*   [Request](/python/docs/api/class-request "Request")[#](#route-request-return)

# Selectors

Selectors
=========

Selectors can be used to install custom selector engines. See [extensibility](/python/docs/extensibility) for more information.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### register[​](#selectors-register "Direct link to register")

Added before v1.9 selectors.register

Selectors must be registered before creating the page.

**Usage**

An example of registering selector engine that queries elements based on a tag name:

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, Playwrightdef run(playwright: Playwright):    tag_selector = """      {          // Returns the first element matching given selector in the root's subtree.          query(root, selector) {              return root.querySelector(selector);          },          // Returns all elements matching given selector in the root's subtree.          queryAll(root, selector) {              return Array.from(root.querySelectorAll(selector));          }      }"""    # Register the engine. Selectors will be prefixed with "tag=".    playwright.selectors.register("tag", tag_selector)    browser = playwright.chromium.launch()    page = browser.new_page()    page.set_content('<div><button>Click me</button></div>')    # Use the selector prefixed with its name.    button = page.locator('tag=button')    # Combine it with built-in locators.    page.locator('tag=div').get_by_text('Click me').click()    # Can use it in any methods supporting selectors.    button_count = page.locator('tag=button').count()    print(button_count)    browser.close()with sync_playwright() as playwright:    run(playwright)

    import asynciofrom playwright.async_api import async_playwright, Playwrightasync def run(playwright: Playwright):    tag_selector = """      {          // Returns the first element matching given selector in the root's subtree.          query(root, selector) {              return root.querySelector(selector);          },          // Returns all elements matching given selector in the root's subtree.          queryAll(root, selector) {              return Array.from(root.querySelectorAll(selector));          }      }"""    # Register the engine. Selectors will be prefixed with "tag=".    await playwright.selectors.register("tag", tag_selector)    browser = await playwright.chromium.launch()    page = await browser.new_page()    await page.set_content('<div><button>Click me</button></div>')    # Use the selector prefixed with its name.    button = await page.query_selector('tag=button')    # Combine it with built-in locators.    await page.locator('tag=div').get_by_text('Click me').click()    # Can use it in any methods supporting selectors.    button_count = await page.locator('tag=button').count()    print(button_count)    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#selectors-register-option-name)
    
    Name that is used in selectors as a prefix, e.g. `{name: 'foo'}` enables `foo=myselectorbody` selectors. May only contain `[a-zA-Z0-9_]` characters.
    
*   `script` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#selectors-register-option-script)
    
    Raw script content.
    
*   `content_script` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#selectors-register-option-content-script)
    
    Whether to run this selector engine in isolated JavaScript environment. This environment has access to the same DOM, but not any JavaScript objects from the frame's scripts. Defaults to `false`. Note that running as a content script is not guaranteed when this engine is used together with other registered engines.
    
*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#selectors-register-option-path)
    
    Path to the JavaScript file. If `path` is a relative path, then it is resolved relative to the current working directory.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#selectors-register-return)

* * *

### set\_test\_id\_attribute[​](#selectors-set-test-id-attribute "Direct link to set_test_id_attribute")

Added in: v1.27 selectors.set\_test\_id\_attribute

Defines custom attribute name to be used in [page.get\_by\_test\_id()](/python/docs/api/class-page#page-get-by-test-id). `data-testid` is used by default.

**Usage**

    selectors.set_test_id_attribute(attribute_name)

**Arguments**

*   `attribute_name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#selectors-set-test-id-attribute-option-attribute-name)
    
    Test id attribute name.

# TimeoutError

TimeoutError
============

*   extends: [Error](/python/docs/api/class-error "Error")

TimeoutError is emitted whenever certain operations are terminated due to timeout, e.g. [locator.wait\_for()](/python/docs/api/class-locator#locator-wait-for) or [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch).

*   Sync
*   Async

    from playwright.sync_api import sync_playwright, TimeoutError as PlaywrightTimeoutErrorwith sync_playwright() as p:    browser = p.chromium.launch()    page = browser.new_page()    try:      page.locator("text=Example").click(timeout=100)    except PlaywrightTimeoutError:      print("Timeout!")    browser.close()

    import asynciofrom playwright.async_api import async_playwright, TimeoutError as PlaywrightTimeoutError, Playwrightasync def run(playwright: Playwright):    browser = await playwright.chromium.launch()    page = await browser.new_page()    try:      await page.locator("text=Example").click(timeout=100)    except PlaywrightTimeoutError:      print("Timeout!")    await browser.close()async def main():    async with async_playwright() as playwright:        await run(playwright)asyncio.run(main())

# Touchscreen

Touchscreen
===========

The Touchscreen class operates in main-frame CSS pixels relative to the top-left corner of the viewport. Methods on the touchscreen can only be used in browser contexts that have been initialized with `hasTouch` set to true.

This class is limited to emulating tap gestures. For examples of other gestures simulated by manually dispatching touch events, see the [emulating legacy touch events](/python/docs/touch-events) page.

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### tap[​](#touchscreen-tap "Direct link to tap")

Added before v1.9 touchscreen.tap

Dispatches a `touchstart` and `touchend` event with a single touch at the position ([x](/python/docs/api/class-touchscreen#touchscreen-tap-option-x),[y](/python/docs/api/class-touchscreen#touchscreen-tap-option-y)).

note

[page.tap()](/python/docs/api/class-page#page-tap) the method will throw if [has\_touch](/python/docs/api/class-browser#browser-new-context-option-has-touch) option of the browser context is false.

**Usage**

    touchscreen.tap(x, y)

**Arguments**

*   `x` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#touchscreen-tap-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float")[#](#touchscreen-tap-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#touchscreen-tap-return)

# Tracing

Tracing
=======

API for collecting and saving Playwright traces. Playwright traces can be opened in [Trace Viewer](/python/docs/trace-viewer) after Playwright script runs.

Start recording a trace before performing actions. At the end, stop tracing and save it to a file.

*   Sync
*   Async

    browser = chromium.launch()context = browser.new_context()context.tracing.start(screenshots=True, snapshots=True)page = context.new_page()page.goto("https://playwright.dev")context.tracing.stop(path = "trace.zip")

    browser = await chromium.launch()context = await browser.new_context()await context.tracing.start(screenshots=True, snapshots=True)page = await context.new_page()await page.goto("https://playwright.dev")await context.tracing.stop(path = "trace.zip")

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### group[​](#tracing-group "Direct link to group")

Added in: v1.49 tracing.group

caution

Use `test.step` instead when available.

Creates a new group within the trace, assigning any subsequent API calls to this group, until [tracing.group\_end()](/python/docs/api/class-tracing#tracing-group-end) is called. Groups can be nested and will be visible in the trace viewer.

**Usage**

*   Sync
*   Async

    # All actions between group and group_end# will be shown in the trace viewer as a group.page.context.tracing.group("Open Playwright.dev > API")page.goto("https://playwright.dev/")page.get_by_role("link", name="API").click()page.context.tracing.group_end()

    # All actions between group and group_end# will be shown in the trace viewer as a group.await page.context.tracing.group("Open Playwright.dev > API")await page.goto("https://playwright.dev/")await page.get_by_role("link", name="API").click()await page.context.tracing.group_end()

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#tracing-group-option-name)
    
    Group name shown in the trace viewer.
    
*   `location` [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict") _(optional)_[#](#tracing-group-option-location)
    
    *   `file` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")
        
    *   `line` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_
        
    *   `column` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_
        
    
    Specifies a custom location for the group to be shown in the trace viewer. Defaults to the location of the [tracing.group()](/python/docs/api/class-tracing#tracing-group) call.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#tracing-group-return)

* * *

### group\_end[​](#tracing-group-end "Direct link to group_end")

Added in: v1.49 tracing.group\_end

Closes the last group created by [tracing.group()](/python/docs/api/class-tracing#tracing-group).

**Usage**

    tracing.group_end()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#tracing-group-end-return)

* * *

### start[​](#tracing-start "Direct link to start")

Added in: v1.12 tracing.start

Start tracing.

**Usage**

*   Sync
*   Async

    context.tracing.start(screenshots=True, snapshots=True)page = context.new_page()page.goto("https://playwright.dev")context.tracing.stop(path = "trace.zip")

    await context.tracing.start(screenshots=True, snapshots=True)page = await context.new_page()await page.goto("https://playwright.dev")await context.tracing.stop(path = "trace.zip")

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#tracing-start-option-name)
    
    If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the [traces\_dir](/python/docs/api/class-browsertype#browser-type-launch-option-traces-dir) directory specified in [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch). To specify the final trace zip file name, you need to pass `path` option to [tracing.stop()](/python/docs/api/class-tracing#tracing-stop) instead.
    
*   `screenshots` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#tracing-start-option-screenshots)
    
    Whether to capture screenshots during tracing. Screenshots are used to build a timeline preview.
    
*   `snapshots` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#tracing-start-option-snapshots)
    
    If this option is true tracing will
    
    *   capture DOM snapshot on every action
    *   record network activity
*   `sources` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.17[#](#tracing-start-option-sources)
    
    Whether to include source files for trace actions.
    
*   `title` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.17[#](#tracing-start-option-title)
    
    Trace name to be shown in the Trace Viewer.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#tracing-start-return)

* * *

### start\_chunk[​](#tracing-start-chunk "Direct link to start_chunk")

Added in: v1.15 tracing.start\_chunk

Start a new trace chunk. If you'd like to record multiple traces on the same [BrowserContext](/python/docs/api/class-browsercontext "BrowserContext"), use [tracing.start()](/python/docs/api/class-tracing#tracing-start) once, and then create multiple trace chunks with [tracing.start\_chunk()](/python/docs/api/class-tracing#tracing-start-chunk) and [tracing.stop\_chunk()](/python/docs/api/class-tracing#tracing-stop-chunk).

**Usage**

*   Sync
*   Async

    context.tracing.start(screenshots=True, snapshots=True)page = context.new_page()page.goto("https://playwright.dev")context.tracing.start_chunk()page.get_by_text("Get Started").click()# Everything between start_chunk and stop_chunk will be recorded in the trace.context.tracing.stop_chunk(path = "trace1.zip")context.tracing.start_chunk()page.goto("http://example.com")# Save a second trace file with different actions.context.tracing.stop_chunk(path = "trace2.zip")

    await context.tracing.start(screenshots=True, snapshots=True)page = await context.new_page()await page.goto("https://playwright.dev")await context.tracing.start_chunk()await page.get_by_text("Get Started").click()# Everything between start_chunk and stop_chunk will be recorded in the trace.await context.tracing.stop_chunk(path = "trace1.zip")await context.tracing.start_chunk()await page.goto("http://example.com")# Save a second trace file with different actions.await context.tracing.stop_chunk(path = "trace2.zip")

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.32[#](#tracing-start-chunk-option-name)
    
    If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the [traces\_dir](/python/docs/api/class-browsertype#browser-type-launch-option-traces-dir) directory specified in [browser\_type.launch()](/python/docs/api/class-browsertype#browser-type-launch). To specify the final trace zip file name, you need to pass `path` option to [tracing.stop\_chunk()](/python/docs/api/class-tracing#tracing-stop-chunk) instead.
    
*   `title` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_ Added in: v1.17[#](#tracing-start-chunk-option-title)
    
    Trace name to be shown in the Trace Viewer.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#tracing-start-chunk-return)

* * *

### stop[​](#tracing-stop "Direct link to stop")

Added in: v1.12 tracing.stop

Stop tracing.

**Usage**

    tracing.stop()tracing.stop(**kwargs)

**Arguments**

*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#tracing-stop-option-path)
    
    Export trace into the file with the given path.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#tracing-stop-return)

* * *

### stop\_chunk[​](#tracing-stop-chunk "Direct link to stop_chunk")

Added in: v1.15 tracing.stop\_chunk

Stop the trace chunk. See [tracing.start\_chunk()](/python/docs/api/class-tracing#tracing-start-chunk) for more details about multiple trace chunks.

**Usage**

    tracing.stop_chunk()tracing.stop_chunk(**kwargs)

**Arguments**

*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\] _(optional)_[#](#tracing-stop-chunk-option-path)
    
    Export trace collected since the last [tracing.start\_chunk()](/python/docs/api/class-tracing#tracing-start-chunk) call into the file with the given path.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#tracing-stop-chunk-return)

# Video

Video
=====

When browser context is created with the `recordVideo` option, each page has a video object associated with it.

*   Sync
*   Async

    print(page.video.path())

    print(await page.video.path())

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### delete[​](#video-delete "Direct link to delete")

Added in: v1.11 video.delete

Deletes the video file. Will wait for the video to finish if necessary.

**Usage**

    video.delete()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#video-delete-return)

* * *

### path[​](#video-path "Direct link to path")

Added before v1.9 video.path

Returns the file system path this video will be recorded to. The video is guaranteed to be written to the filesystem upon closing the browser context. This method throws when connected remotely.

**Usage**

    video.path()

**Returns**

*   [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")[#](#video-path-return)

* * *

### save\_as[​](#video-save-as "Direct link to save_as")

Added in: v1.11 video.save\_as

Saves the video to a user-specified path. It is safe to call this method while the video is still in progress, or after the page has closed. This method waits until the page is closed and the video is fully saved.

**Usage**

    video.save_as(path)

**Arguments**

*   `path` [Union](https://docs.python.org/3/library/typing.html#typing.Union "Union")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str"), [pathlib.Path](https://realpython.com/python-pathlib/ "pathlib.Path")\][#](#video-save-as-option-path)
    
    Path where the video should be saved.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#video-save-as-return)

# WebError

WebError
========

[WebError](/python/docs/api/class-weberror "WebError") class represents an unhandled exception thrown in the page. It is dispatched via the [browser\_context.on("weberror")](/python/docs/api/class-browsercontext#browser-context-event-web-error) event.

*   Sync
*   Async

    # Log all uncaught errors to the terminalcontext.on("weberror", lambda web_error: print(f"uncaught exception: {web_error.error}"))# Navigate to a page with an exception.page.goto("data:text/html,<script>throw new Error('test')</script>")

    # Log all uncaught errors to the terminalcontext.on("weberror", lambda web_error: print(f"uncaught exception: {web_error.error}"))# Navigate to a page with an exception.await page.goto("data:text/html,<script>throw new Error('test')</script>")

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### error[​](#web-error-error "Direct link to error")

Added in: v1.38 webError.error

Unhandled error that was thrown.

**Usage**

    web_error.error

**Returns**

*   [Error](/python/docs/api/class-error "Error")[#](#web-error-error-return)

* * *

### page[​](#web-error-page "Direct link to page")

Added in: v1.38 webError.page

The page that produced this unhandled exception, if any.

**Usage**

    web_error.page

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None") | [Page](/python/docs/api/class-page "Page")[#](#web-error-page-return)

# WebSocket

WebSocket
=========

The [WebSocket](/python/docs/api/class-websocket "WebSocket") class represents WebSocket connections within a page. It provides the ability to inspect and manipulate the data being transmitted and received.

If you want to intercept or modify WebSocket frames, consider using [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute").

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### expect\_event[​](#web-socket-wait-for-event "Direct link to expect_event")

Added before v1.9 webSocket.expect\_event

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the webSocket is closed before the event is fired. Returns the event data value.

**Usage**

    web_socket.expect_event(event)web_socket.expect_event(event, **kwargs)

**Arguments**

*   `event` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#web-socket-wait-for-event-option-event)
    
    Event name, same one would pass into `webSocket.on(event)`.
    
*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable") _(optional)_[#](#web-socket-wait-for-event-option-predicate)
    
    Receives the event data and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#web-socket-wait-for-event-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [EventContextManager](https://docs.python.org/3/reference/datamodel.html#context-managers "Event context manager")[#](#web-socket-wait-for-event-return)

* * *

### wait\_for\_event[​](#web-socket-wait-for-event-2 "Direct link to wait_for_event")

Added before v1.9 webSocket.wait\_for\_event

note

In most cases, you should use [web\_socket.expect\_event()](/python/docs/api/class-websocket#web-socket-wait-for-event).

Waits for given `event` to fire. If predicate is provided, it passes event's value into the `predicate` function and waits for `predicate(event)` to return a truthy value. Will throw an error if the socket is closed before the `event` is fired.

**Usage**

    web_socket.wait_for_event(event)web_socket.wait_for_event(event, **kwargs)

**Arguments**

*   `event` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#web-socket-wait-for-event-2-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `predicate` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable") _(optional)_[#](#web-socket-wait-for-event-2-option-predicate)
    
    Receives the event data and resolves to truthy value when the waiting should resolve.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#web-socket-wait-for-event-2-option-timeout)
    
    Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browser\_context.set\_default\_timeout()](/python/docs/api/class-browsercontext#browser-context-set-default-timeout).
    

**Returns**

*   [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#web-socket-wait-for-event-2-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### is\_closed[​](#web-socket-is-closed "Direct link to is_closed")

Added before v1.9 webSocket.is\_closed

Indicates that the web socket has been closed.

**Usage**

    web_socket.is_closed()

**Returns**

*   [bool](https://docs.python.org/3/library/stdtypes.html "bool")[#](#web-socket-is-closed-return)

* * *

### url[​](#web-socket-url "Direct link to url")

Added before v1.9 webSocket.url

Contains the URL of the WebSocket.

**Usage**

    web_socket.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#web-socket-url-return)

* * *

Events[​](#events "Direct link to Events")
------------------------------------------

### on("close")[​](#web-socket-event-close "Direct link to on(\"close\")")

Added before v1.9 webSocket.on("close")

Fired when the websocket closes.

**Usage**

    web_socket.on("close", handler)

**Event data**

*   [WebSocket](/python/docs/api/class-websocket "WebSocket")

* * *

### on("framereceived")[​](#web-socket-event-frame-received "Direct link to on(\"framereceived\")")

Added in: v1.9 webSocket.on("framereceived")

Fired when the websocket receives a frame.

**Usage**

    web_socket.on("framereceived", handler)

**Event data**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")

* * *

### on("framesent")[​](#web-socket-event-frame-sent "Direct link to on(\"framesent\")")

Added in: v1.9 webSocket.on("framesent")

Fired when the websocket sends a frame.

**Usage**

    web_socket.on("framesent", handler)

**Event data**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")

* * *

### on("socketerror")[​](#web-socket-event-socket-error "Direct link to on(\"socketerror\")")

Added in: v1.9 webSocket.on("socketerror")

Fired when the websocket has an error.

**Usage**

    web_socket.on("socketerror", handler)

**Event data**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")

# WebSocketRoute

WebSocketRoute
==============

Whenever a [`WebSocket`](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket) route is set up with [page.route\_web\_socket()](/python/docs/api/class-page#page-route-web-socket) or [browser\_context.route\_web\_socket()](/python/docs/api/class-browsercontext#browser-context-route-web-socket), the `WebSocketRoute` object allows to handle the WebSocket, like an actual server would do.

**Mocking**

By default, the routed WebSocket will not connect to the server. This way, you can mock entire communcation over the WebSocket. Here is an example that responds to a `"request"` with a `"response"`.

*   Sync
*   Async

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")page.route_web_socket("wss://example.com/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    ws.send("response")await page.route_web_socket("wss://example.com/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

Since we do not call [web\_socket\_route.connect\_to\_server](/python/docs/api/class-websocketroute#web-socket-route-connect-to-server) inside the WebSocket route handler, Playwright assumes that WebSocket will be mocked, and opens the WebSocket inside the page automatically.

Here is another example that handles JSON messages:

*   Sync
*   Async

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  json_message = json.loads(message)  if json_message["request"] == "question":    ws.send(json.dumps({ "response": "answer" }))page.route_web_socket("wss://example.com/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

    def message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  json_message = json.loads(message)  if json_message["request"] == "question":    ws.send(json.dumps({ "response": "answer" }))await page.route_web_socket("wss://example.com/ws", lambda ws: ws.on_message(    lambda message: message_handler(ws, message)))

**Intercepting**

Alternatively, you may want to connect to the actual server, but intercept messages in-between and modify or block them. Calling [web\_socket\_route.connect\_to\_server](/python/docs/api/class-websocketroute#web-socket-route-connect-to-server) returns a server-side `WebSocketRoute` instance that you can send messages to, or handle incoming messages.

Below is an example that modifies some messages sent by the page to the server. Messages sent from the server to the page are left intact, relying on the default forwarding.

*   Sync
*   Async

    def message_handler(server: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    server.send("request2")  else:    server.send(message)def handler(ws: WebSocketRoute):  server = ws.connect_to_server()  ws.on_message(lambda message: message_handler(server, message))page.route_web_socket("/ws", handler)

    def message_handler(server: WebSocketRoute, message: Union[str, bytes]):  if message == "request":    server.send("request2")  else:    server.send(message)def handler(ws: WebSocketRoute):  server = ws.connect_to_server()  ws.on_message(lambda message: message_handler(server, message))await page.route_web_socket("/ws", handler)

After connecting to the server, all **messages are forwarded** between the page and the server by default.

However, if you call [web\_socket\_route.on\_message()](/python/docs/api/class-websocketroute#web-socket-route-on-message) on the original route, messages from the page to the server **will not be forwarded** anymore, but should instead be handled by the [handler](/python/docs/api/class-websocketroute#web-socket-route-on-message-option-handler).

Similarly, calling [web\_socket\_route.on\_message()](/python/docs/api/class-websocketroute#web-socket-route-on-message) on the server-side WebSocket will **stop forwarding messages** from the server to the page, and [handler](/python/docs/api/class-websocketroute#web-socket-route-on-message-option-handler) should take care of them.

The following example blocks some messages in both directions. Since it calls [web\_socket\_route.on\_message()](/python/docs/api/class-websocketroute#web-socket-route-on-message) in both directions, there is no automatic forwarding at all.

*   Sync
*   Async

    def ws_message_handler(server: WebSocketRoute, message: Union[str, bytes]):  if message != "blocked-from-the-page":    server.send(message)def server_message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message != "blocked-from-the-server":    ws.send(message)def handler(ws: WebSocketRoute):  server = ws.connect_to_server()  ws.on_message(lambda message: ws_message_handler(server, message))  server.on_message(lambda message: server_message_handler(ws, message))page.route_web_socket("/ws", handler)

    def ws_message_handler(server: WebSocketRoute, message: Union[str, bytes]):  if message != "blocked-from-the-page":    server.send(message)def server_message_handler(ws: WebSocketRoute, message: Union[str, bytes]):  if message != "blocked-from-the-server":    ws.send(message)def handler(ws: WebSocketRoute):  server = ws.connect_to_server()  ws.on_message(lambda message: ws_message_handler(server, message))  server.on_message(lambda message: server_message_handler(ws, message))await page.route_web_socket("/ws", handler)

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### close[​](#web-socket-route-close "Direct link to close")

Added in: v1.48 webSocketRoute.close

Closes one side of the WebSocket connection.

**Usage**

    web_socket_route.close()web_socket_route.close(**kwargs)

**Arguments**

*   `code` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") _(optional)_[#](#web-socket-route-close-option-code)
    
    Optional [close code](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#code).
    
*   `reason` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") _(optional)_[#](#web-socket-route-close-option-reason)
    
    Optional [close reason](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#reason).
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#web-socket-route-close-return)

* * *

### on\_close[​](#web-socket-route-on-close "Direct link to on_close")

Added in: v1.48 webSocketRoute.on\_close

Allows to handle [`WebSocket.close`](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close).

By default, closing one side of the connection, either in the page or on the server, will close the other side. However, when [web\_socket\_route.on\_close()](/python/docs/api/class-websocketroute#web-socket-route-on-close) handler is set up, the default forwarding of closure is disabled, and handler should take care of it.

**Usage**

    web_socket_route.on_close(handler)

**Arguments**

*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") | \[undefined\]\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#web-socket-route-on-close-option-handler)
    
    Function that will handle WebSocket closure. Received an optional [close code](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#code) and an optional [close reason](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#reason).
    

* * *

### on\_message[​](#web-socket-route-on-message "Direct link to on_message")

Added in: v1.48 webSocketRoute.on\_message

This method allows to handle messages that are sent by the WebSocket, either from the page or from the server.

When called on the original WebSocket route, this method handles messages sent from the page. You can handle this messages by responding to them with [web\_socket\_route.send()](/python/docs/api/class-websocketroute#web-socket-route-send), forwarding them to the server-side connection returned by [web\_socket\_route.connect\_to\_server](/python/docs/api/class-websocketroute#web-socket-route-connect-to-server) or do something else.

Once this method is called, messages are not automatically forwarded to the server or to the page - you should do that manually by calling [web\_socket\_route.send()](/python/docs/api/class-websocketroute#web-socket-route-send). See examples at the top for more details.

Calling this method again will override the handler with a new one.

**Usage**

    web_socket_route.on_message(handler)

**Arguments**

*   `handler` [Callable](https://docs.python.org/3/library/typing.html#typing.Callable "Callable")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\]:[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")\[[Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")\] | [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any")[#](#web-socket-route-on-message-option-handler)
    
    Function that will handle messages.
    

* * *

### send[​](#web-socket-route-send "Direct link to send")

Added in: v1.48 webSocketRoute.send

Sends a message to the WebSocket. When called on the original WebSocket, sends the message to the page. When called on the result of [web\_socket\_route.connect\_to\_server](/python/docs/api/class-websocketroute#web-socket-route-connect-to-server), sends the message to the server. See examples at the top for more details.

**Usage**

    web_socket_route.send(message)

**Arguments**

*   `message` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [bytes](https://docs.python.org/3/library/stdtypes.html#bytes "bytes")[#](#web-socket-route-send-option-message)
    
    Message to send.
    

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### connect\_to\_server[​](#web-socket-route-connect-to-server "Direct link to connect_to_server")

Added in: v1.48 webSocketRoute.connect\_to\_server

By default, routed WebSocket does not connect to the server, so you can mock entire WebSocket communication. This method connects to the actual WebSocket server, and returns the server-side [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute") instance, giving the ability to send and receive messages from the server.

Once connected to the server:

*   Messages received from the server will be **automatically forwarded** to the WebSocket in the page, unless [web\_socket\_route.on\_message()](/python/docs/api/class-websocketroute#web-socket-route-on-message) is called on the server-side `WebSocketRoute`.
*   Messages sent by the [`WebSocket.send()`](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send) call in the page will be **automatically forwarded** to the server, unless [web\_socket\_route.on\_message()](/python/docs/api/class-websocketroute#web-socket-route-on-message) is called on the original `WebSocketRoute`.

See examples at the top for more details.

**Usage**

    web_socket_route.connect_to_server

**Returns**

*   [WebSocketRoute](/python/docs/api/class-websocketroute "WebSocketRoute")[#](#web-socket-route-connect-to-server-return)

* * *

### url[​](#web-socket-route-url "Direct link to url")

Added in: v1.48 webSocketRoute.url

URL of the WebSocket created in the page.

**Usage**

    web_socket_route.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#web-socket-route-url-return)

# Worker

Worker
======

The Worker class represents a [WebWorker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API). `worker` event is emitted on the page object to signal a worker creation. `close` event is emitted on the worker object when the worker is gone.

    def handle_worker(worker):    print("worker created: " + worker.url)    worker.on("close", lambda: print("worker destroyed: " + worker.url))page.on('worker', handle_worker)print("current workers:")for worker in page.workers:    print("    " + worker.url)

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### evaluate[​](#worker-evaluate "Direct link to evaluate")

Added before v1.9 worker.evaluate

Returns the return value of [expression](/python/docs/api/class-worker#worker-evaluate-option-expression).

If the function passed to the [worker.evaluate()](/python/docs/api/class-worker#worker-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [worker.evaluate()](/python/docs/api/class-worker#worker-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [worker.evaluate()](/python/docs/api/class-worker#worker-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [worker.evaluate()](/python/docs/api/class-worker#worker-evaluate) returns `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

    worker.evaluate(expression)worker.evaluate(expression, **kwargs)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#worker-evaluate-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#worker-evaluate-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-worker#worker-evaluate-option-expression).
    

**Returns**

*   [Dict](https://docs.python.org/3/library/typing.html#typing.Dict "Dict")[#](#worker-evaluate-return)

* * *

### evaluate\_handle[​](#worker-evaluate-handle "Direct link to evaluate_handle")

Added before v1.9 worker.evaluate\_handle

Returns the return value of [expression](/python/docs/api/class-worker#worker-evaluate-handle-option-expression) as a [JSHandle](/python/docs/api/class-jshandle "JSHandle").

The only difference between [worker.evaluate()](/python/docs/api/class-worker#worker-evaluate) and [worker.evaluate\_handle()](/python/docs/api/class-worker#worker-evaluate-handle) is that [worker.evaluate\_handle()](/python/docs/api/class-worker#worker-evaluate-handle) returns [JSHandle](/python/docs/api/class-jshandle "JSHandle").

If the function passed to the [worker.evaluate\_handle()](/python/docs/api/class-worker#worker-evaluate-handle) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [worker.evaluate\_handle()](/python/docs/api/class-worker#worker-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

    worker.evaluate_handle(expression)worker.evaluate_handle(expression, **kwargs)

**Arguments**

*   `expression` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#worker-evaluate-handle-option-expression)
    
    JavaScript expression to be evaluated in the browser context. If the expression evaluates to a function, the function is automatically invoked.
    
*   `arg` [EvaluationArgument](/python/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#worker-evaluate-handle-option-arg)
    
    Optional argument to pass to [expression](/python/docs/api/class-worker#worker-evaluate-handle-option-expression).
    

**Returns**

*   [JSHandle](/python/docs/api/class-jshandle "JSHandle")[#](#worker-evaluate-handle-return)

* * *

Properties[​](#properties "Direct link to Properties")
------------------------------------------------------

### url[​](#worker-url "Direct link to url")

Added before v1.9 worker.url

**Usage**

    worker.url

**Returns**

*   [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#worker-url-return)

* * *

Events[​](#events "Direct link to Events")
------------------------------------------

### on("close")[​](#worker-event-close "Direct link to on(\"close\")")

Added before v1.9 worker.on("close")

Emitted when this dedicated [WebWorker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) is terminated.

**Usage**

    worker.on("close", handler)

**Event data**

*   [Worker](/python/docs/api/class-worker "Worker")

# APIResponseAssertions

APIResponseAssertions
=====================

The [APIResponseAssertions](/python/docs/api/class-apiresponseassertions "APIResponseAssertions") class provides assertion methods that can be used to make assertions about the [APIResponse](/python/docs/api/class-apiresponse "APIResponse") in the tests.

*   Sync
*   Async

    from playwright.sync_api import Page, expectdef test_navigates_to_login_page(page: Page) -> None:    # ..    response = page.request.get('https://playwright.dev')    expect(response).to_be_ok()

    from playwright.async_api import Page, expectasync def test_navigates_to_login_page(page: Page) -> None:    # ..    response = await page.request.get('https://playwright.dev')    await expect(response).to_be_ok()

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### not\_to\_be\_ok[​](#api-response-assertions-not-to-be-ok "Direct link to not_to_be_ok")

Added in: v1.19 apiResponseAssertions.not\_to\_be\_ok

The opposite of [expect(response).to\_be\_ok()](/python/docs/api/class-apiresponseassertions#api-response-assertions-to-be-ok).

**Usage**

    expect(response).not_to_be_ok()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#api-response-assertions-not-to-be-ok-return)

* * *

### to\_be\_ok[​](#api-response-assertions-to-be-ok "Direct link to to_be_ok")

Added in: v1.18 apiResponseAssertions.to\_be\_ok

Ensures the response status code is within `200..299` range.

**Usage**

*   Sync
*   Async

    import refrom playwright.sync_api import expect# ...expect(response).to_be_ok()

    from playwright.async_api import expect# ...await expect(response).to_be_ok()

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#api-response-assertions-to-be-ok-return)

# LocatorAssertions

LocatorAssertions
=================

The [LocatorAssertions](/python/docs/api/class-locatorassertions "LocatorAssertions") class provides assertion methods that can be used to make assertions about the [Locator](/python/docs/api/class-locator "Locator") state in the tests.

*   Sync
*   Async

    from playwright.sync_api import Page, expectdef test_status_becomes_submitted(page: Page) -> None:    # ..    page.get_by_role("button").click()    expect(page.locator(".status")).to_have_text("Submitted")

    from playwright.async_api import Page, expectasync def test_status_becomes_submitted(page: Page) -> None:    # ..    await page.get_by_role("button").click()    await expect(page.locator(".status")).to_have_text("Submitted")

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### not\_to\_be\_attached[​](#locator-assertions-not-to-be-attached "Direct link to not_to_be_attached")

Added in: v1.33 locatorAssertions.not\_to\_be\_attached

The opposite of [expect(locator).to\_be\_attached()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-attached).

**Usage**

    expect(locator).not_to_be_attached()expect(locator).not_to_be_attached(**kwargs)

**Arguments**

*   `attached` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-not-to-be-attached-option-attached)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-be-attached-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-attached-return)

* * *

### not\_to\_be\_checked[​](#locator-assertions-not-to-be-checked "Direct link to not_to_be_checked")

Added in: v1.20 locatorAssertions.not\_to\_be\_checked

The opposite of [expect(locator).to\_be\_checked()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked).

**Usage**

    expect(locator).not_to_be_checked()expect(locator).not_to_be_checked(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-checked-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-checked-return)

* * *

### not\_to\_be\_disabled[​](#locator-assertions-not-to-be-disabled "Direct link to not_to_be_disabled")

Added in: v1.20 locatorAssertions.not\_to\_be\_disabled

The opposite of [expect(locator).to\_be\_disabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-disabled).

**Usage**

    expect(locator).not_to_be_disabled()expect(locator).not_to_be_disabled(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-disabled-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-disabled-return)

* * *

### not\_to\_be\_editable[​](#locator-assertions-not-to-be-editable "Direct link to not_to_be_editable")

Added in: v1.20 locatorAssertions.not\_to\_be\_editable

The opposite of [expect(locator).to\_be\_editable()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-editable).

**Usage**

    expect(locator).not_to_be_editable()expect(locator).not_to_be_editable(**kwargs)

**Arguments**

*   `editable` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.26[#](#locator-assertions-not-to-be-editable-option-editable)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-editable-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-editable-return)

* * *

### not\_to\_be\_empty[​](#locator-assertions-not-to-be-empty "Direct link to not_to_be_empty")

Added in: v1.20 locatorAssertions.not\_to\_be\_empty

The opposite of [expect(locator).to\_be\_empty()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-empty).

**Usage**

    expect(locator).not_to_be_empty()expect(locator).not_to_be_empty(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-empty-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-empty-return)

* * *

### not\_to\_be\_enabled[​](#locator-assertions-not-to-be-enabled "Direct link to not_to_be_enabled")

Added in: v1.20 locatorAssertions.not\_to\_be\_enabled

The opposite of [expect(locator).to\_be\_enabled()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-enabled).

**Usage**

    expect(locator).not_to_be_enabled()expect(locator).not_to_be_enabled(**kwargs)

**Arguments**

*   `enabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.26[#](#locator-assertions-not-to-be-enabled-option-enabled)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-enabled-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-enabled-return)

* * *

### not\_to\_be\_focused[​](#locator-assertions-not-to-be-focused "Direct link to not_to_be_focused")

Added in: v1.20 locatorAssertions.not\_to\_be\_focused

The opposite of [expect(locator).to\_be\_focused()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-focused).

**Usage**

    expect(locator).not_to_be_focused()expect(locator).not_to_be_focused(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-focused-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-focused-return)

* * *

### not\_to\_be\_hidden[​](#locator-assertions-not-to-be-hidden "Direct link to not_to_be_hidden")

Added in: v1.20 locatorAssertions.not\_to\_be\_hidden

The opposite of [expect(locator).to\_be\_hidden()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-hidden).

**Usage**

    expect(locator).not_to_be_hidden()expect(locator).not_to_be_hidden(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-hidden-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-hidden-return)

* * *

### not\_to\_be\_in\_viewport[​](#locator-assertions-not-to-be-in-viewport "Direct link to not_to_be_in_viewport")

Added in: v1.31 locatorAssertions.not\_to\_be\_in\_viewport

The opposite of [expect(locator).to\_be\_in\_viewport()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport).

**Usage**

    expect(locator).not_to_be_in_viewport()expect(locator).not_to_be_in_viewport(**kwargs)

**Arguments**

*   `ratio` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-be-in-viewport-option-ratio)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-be-in-viewport-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-in-viewport-return)

* * *

### not\_to\_be\_visible[​](#locator-assertions-not-to-be-visible "Direct link to not_to_be_visible")

Added in: v1.20 locatorAssertions.not\_to\_be\_visible

The opposite of [expect(locator).to\_be\_visible()](/python/docs/api/class-locatorassertions#locator-assertions-to-be-visible).

**Usage**

    expect(locator).not_to_be_visible()expect(locator).not_to_be_visible(**kwargs)

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-be-visible-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    
*   `visible` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.26[#](#locator-assertions-not-to-be-visible-option-visible)
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-be-visible-return)

* * *

### not\_to\_contain\_class[​](#locator-assertions-not-to-contain-class "Direct link to not_to_contain_class")

Added in: v1.52 locatorAssertions.not\_to\_contain\_class

The opposite of [expect(locator).to\_contain\_class()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-class).

**Usage**

    expect(locator).not_to_contain_class(expected)expect(locator).not_to_contain_class(expected, **kwargs)

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#locator-assertions-not-to-contain-class-option-expected)
    
    Expected class or RegExp or a list of those.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-contain-class-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-contain-class-return)

* * *

### not\_to\_contain\_text[​](#locator-assertions-not-to-contain-text "Direct link to not_to_contain_text")

Added in: v1.20 locatorAssertions.not\_to\_contain\_text

The opposite of [expect(locator).to\_contain\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text).

**Usage**

    expect(locator).not_to_contain_text(expected)expect(locator).not_to_contain_text(expected, **kwargs)

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\] Added in: v1.18[#](#locator-assertions-not-to-contain-text-option-expected)
    
    Expected substring or RegExp or a list of those.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.23[#](#locator-assertions-not-to-contain-text-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-not-to-contain-text-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-contain-text-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    
*   `use_inner_text` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-contain-text-option-use-inner-text)
    
    Whether to use `element.innerText` instead of `element.textContent` when retrieving DOM node text.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-contain-text-return)

* * *

### not\_to\_have\_accessible\_description[​](#locator-assertions-not-to-have-accessible-description "Direct link to not_to_have_accessible_description")

Added in: v1.44 locatorAssertions.not\_to\_have\_accessible\_description

The opposite of [expect(locator).to\_have\_accessible\_description()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description).

**Usage**

    expect(locator).not_to_have_accessible_description(name)expect(locator).not_to_have_accessible_description(name, **kwargs)

**Arguments**

*   `description` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-assertions-not-to-have-accessible-description-option-name)
    
    Expected accessible description.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-not-to-have-accessible-description-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-not-to-have-accessible-description-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-have-accessible-description-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-accessible-description-return)

* * *

### not\_to\_have\_accessible\_error\_message[​](#locator-assertions-not-to-have-accessible-error-message "Direct link to not_to_have_accessible_error_message")

Added in: v1.50 locatorAssertions.not\_to\_have\_accessible\_error\_message

The opposite of [expect(locator).to\_have\_accessible\_error\_message()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-error-message).

**Usage**

    expect(locator).not_to_have_accessible_error_message(error_message)expect(locator).not_to_have_accessible_error_message(error_message, **kwargs)

**Arguments**

*   `error_message` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-assertions-not-to-have-accessible-error-message-option-error-message)
    
    Expected accessible error message.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-not-to-have-accessible-error-message-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-not-to-have-accessible-error-message-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-have-accessible-error-message-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-accessible-error-message-return)

* * *

### not\_to\_have\_accessible\_name[​](#locator-assertions-not-to-have-accessible-name "Direct link to not_to_have_accessible_name")

Added in: v1.44 locatorAssertions.not\_to\_have\_accessible\_name

The opposite of [expect(locator).to\_have\_accessible\_name()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name).

**Usage**

    expect(locator).not_to_have_accessible_name(name)expect(locator).not_to_have_accessible_name(name, **kwargs)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-assertions-not-to-have-accessible-name-option-name)
    
    Expected accessible name.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-not-to-have-accessible-name-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-not-to-have-accessible-name-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-have-accessible-name-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-accessible-name-return)

* * *

### not\_to\_have\_attribute[​](#locator-assertions-not-to-have-attribute "Direct link to not_to_have_attribute")

Added in: v1.20 locatorAssertions.not\_to\_have\_attribute

The opposite of [expect(locator).to\_have\_attribute()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute).

**Usage**

    expect(locator).not_to_have_attribute(name, value)expect(locator).not_to_have_attribute(name, value, **kwargs)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.18[#](#locator-assertions-not-to-have-attribute-option-name)
    
    Attribute name.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-not-to-have-attribute-option-value)
    
    Expected attribute value.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.40[#](#locator-assertions-not-to-have-attribute-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-not-to-have-attribute-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-attribute-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-attribute-return)

* * *

### not\_to\_have\_class[​](#locator-assertions-not-to-have-class "Direct link to not_to_have_class")

Added in: v1.20 locatorAssertions.not\_to\_have\_class

The opposite of [expect(locator).to\_have\_class()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-class).

**Usage**

    expect(locator).not_to_have_class(expected)expect(locator).not_to_have_class(expected, **kwargs)

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\] Added in: v1.18[#](#locator-assertions-not-to-have-class-option-expected)
    
    Expected class or RegExp or a list of those.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-class-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-class-return)

* * *

### not\_to\_have\_count[​](#locator-assertions-not-to-have-count "Direct link to not_to_have_count")

Added in: v1.20 locatorAssertions.not\_to\_have\_count

The opposite of [expect(locator).to\_have\_count()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-count).

**Usage**

    expect(locator).not_to_have_count(count)expect(locator).not_to_have_count(count, **kwargs)

**Arguments**

*   `count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") Added in: v1.18[#](#locator-assertions-not-to-have-count-option-count)
    
    Expected count.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-count-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-count-return)

* * *

### not\_to\_have\_css[​](#locator-assertions-not-to-have-css "Direct link to not_to_have_css")

Added in: v1.20 locatorAssertions.not\_to\_have\_css

The opposite of [expect(locator).to\_have\_css()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-css).

**Usage**

    expect(locator).not_to_have_css(name, value)expect(locator).not_to_have_css(name, value, **kwargs)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.18[#](#locator-assertions-not-to-have-css-option-name)
    
    CSS property name.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-not-to-have-css-option-value)
    
    CSS property value.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-css-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-css-return)

* * *

### not\_to\_have\_id[​](#locator-assertions-not-to-have-id "Direct link to not_to_have_id")

Added in: v1.20 locatorAssertions.not\_to\_have\_id

The opposite of [expect(locator).to\_have\_id()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-id).

**Usage**

    expect(locator).not_to_have_id(id)expect(locator).not_to_have_id(id, **kwargs)

**Arguments**

*   `id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-not-to-have-id-option-id)
    
    Element id.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-id-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-id-return)

* * *

### not\_to\_have\_js\_property[​](#locator-assertions-not-to-have-js-property "Direct link to not_to_have_js_property")

Added in: v1.20 locatorAssertions.not\_to\_have\_js\_property

The opposite of [expect(locator).to\_have\_js\_property()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-js-property).

**Usage**

    expect(locator).not_to_have_js_property(name, value)expect(locator).not_to_have_js_property(name, value, **kwargs)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.18[#](#locator-assertions-not-to-have-js-property-option-name)
    
    Property name.
    
*   `value` [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any") Added in: v1.18[#](#locator-assertions-not-to-have-js-property-option-value)
    
    Property value.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-js-property-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-js-property-return)

* * *

### not\_to\_have\_role[​](#locator-assertions-not-to-have-role "Direct link to not_to_have_role")

Added in: v1.44 locatorAssertions.not\_to\_have\_role

The opposite of [expect(locator).to\_have\_role()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-role).

**Usage**

    expect(locator).not_to_have_role(role)expect(locator).not_to_have_role(role, **kwargs)

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#locator-assertions-not-to-have-role-option-role)
    
    Required aria role.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-have-role-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-role-return)

* * *

### not\_to\_have\_text[​](#locator-assertions-not-to-have-text "Direct link to not_to_have_text")

Added in: v1.20 locatorAssertions.not\_to\_have\_text

The opposite of [expect(locator).to\_have\_text()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text).

**Usage**

    expect(locator).not_to_have_text(expected)expect(locator).not_to_have_text(expected, **kwargs)

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\] Added in: v1.18[#](#locator-assertions-not-to-have-text-option-expected)
    
    Expected string or RegExp or a list of those.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.23[#](#locator-assertions-not-to-have-text-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-not-to-have-text-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-text-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    
*   `use_inner_text` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-text-option-use-inner-text)
    
    Whether to use `element.innerText` instead of `element.textContent` when retrieving DOM node text.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-text-return)

* * *

### not\_to\_have\_value[​](#locator-assertions-not-to-have-value "Direct link to not_to_have_value")

Added in: v1.20 locatorAssertions.not\_to\_have\_value

The opposite of [expect(locator).to\_have\_value()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-value).

**Usage**

    expect(locator).not_to_have_value(value)expect(locator).not_to_have_value(value, **kwargs)

**Arguments**

*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-not-to-have-value-option-value)
    
    Expected value.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-not-to-have-value-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-value-return)

* * *

### not\_to\_have\_values[​](#locator-assertions-not-to-have-values "Direct link to not_to_have_values")

Added in: v1.23 locatorAssertions.not\_to\_have\_values

The opposite of [expect(locator).to\_have\_values()](/python/docs/api/class-locatorassertions#locator-assertions-to-have-values).

**Usage**

    expect(locator).not_to_have_values(values)expect(locator).not_to_have_values(values, **kwargs)

**Arguments**

*   `values` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\][#](#locator-assertions-not-to-have-values-option-values)
    
    Expected options currently selected.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-have-values-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-have-values-return)

* * *

### not\_to\_match\_aria\_snapshot[​](#locator-assertions-not-to-match-aria-snapshot "Direct link to not_to_match_aria_snapshot")

Added in: v1.49 locatorAssertions.not\_to\_match\_aria\_snapshot

The opposite of [expect(locator).to\_match\_aria\_snapshot()](/python/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot).

**Usage**

    expect(locator).not_to_match_aria_snapshot(expected)expect(locator).not_to_match_aria_snapshot(expected, **kwargs)

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-assertions-not-to-match-aria-snapshot-option-expected)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-not-to-match-aria-snapshot-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-not-to-match-aria-snapshot-return)

* * *

### to\_be\_attached[​](#locator-assertions-to-be-attached "Direct link to to_be_attached")

Added in: v1.33 locatorAssertions.to\_be\_attached

Ensures that [Locator](/python/docs/api/class-locator "Locator") points to an element that is [connected](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected) to a Document or a ShadowRoot.

**Usage**

*   Sync
*   Async

    expect(page.get_by_text("Hidden text")).to_be_attached()

    await expect(page.get_by_text("Hidden text")).to_be_attached()

**Arguments**

*   `attached` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-to-be-attached-option-attached)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-be-attached-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-attached-return)

* * *

### to\_be\_checked[​](#locator-assertions-to-be-checked "Direct link to to_be_checked")

Added in: v1.20 locatorAssertions.to\_be\_checked

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to a checked input.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.get_by_label("Subscribe to newsletter")expect(locator).to_be_checked()

    from playwright.async_api import expectlocator = page.get_by_label("Subscribe to newsletter")await expect(locator).to_be_checked()

**Arguments**

*   `checked` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-checked-option-checked)
    
    Provides state to assert for. Asserts for input to be checked by default. This option can't be used when [indeterminate](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked-option-indeterminate) is set to true.
    
*   `indeterminate` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.50[#](#locator-assertions-to-be-checked-option-indeterminate)
    
    Asserts that the element is in the indeterminate (mixed) state. Only supported for checkboxes and radio buttons. This option can't be true when [checked](/python/docs/api/class-locatorassertions#locator-assertions-to-be-checked-option-checked) is provided.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-checked-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-checked-return)

* * *

### to\_be\_disabled[​](#locator-assertions-to-be-disabled "Direct link to to_be_disabled")

Added in: v1.20 locatorAssertions.to\_be\_disabled

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to a disabled element. Element is disabled if it has "disabled" attribute or is disabled via ['aria-disabled'](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-disabled). Note that only native control elements such as HTML `button`, `input`, `select`, `textarea`, `option`, `optgroup` can be disabled by setting "disabled" attribute. "disabled" attribute on other elements is ignored by the browser.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("button.submit")expect(locator).to_be_disabled()

    from playwright.async_api import expectlocator = page.locator("button.submit")await expect(locator).to_be_disabled()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-disabled-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-disabled-return)

* * *

### to\_be\_editable[​](#locator-assertions-to-be-editable "Direct link to to_be_editable")

Added in: v1.20 locatorAssertions.to\_be\_editable

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an editable element.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.get_by_role("textbox")expect(locator).to_be_editable()

    from playwright.async_api import expectlocator = page.get_by_role("textbox")await expect(locator).to_be_editable()

**Arguments**

*   `editable` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.26[#](#locator-assertions-to-be-editable-option-editable)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-editable-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-editable-return)

* * *

### to\_be\_empty[​](#locator-assertions-to-be-empty "Direct link to to_be_empty")

Added in: v1.20 locatorAssertions.to\_be\_empty

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an empty editable element or to a DOM node that has no text.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("div.warning")expect(locator).to_be_empty()

    from playwright.async_api import expectlocator = page.locator("div.warning")await expect(locator).to_be_empty()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-empty-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-empty-return)

* * *

### to\_be\_enabled[​](#locator-assertions-to-be-enabled "Direct link to to_be_enabled")

Added in: v1.20 locatorAssertions.to\_be\_enabled

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an enabled element.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("button.submit")expect(locator).to_be_enabled()

    from playwright.async_api import expectlocator = page.locator("button.submit")await expect(locator).to_be_enabled()

**Arguments**

*   `enabled` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.26[#](#locator-assertions-to-be-enabled-option-enabled)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-enabled-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-enabled-return)

* * *

### to\_be\_focused[​](#locator-assertions-to-be-focused "Direct link to to_be_focused")

Added in: v1.20 locatorAssertions.to\_be\_focused

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to a focused DOM node.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.get_by_role("textbox")expect(locator).to_be_focused()

    from playwright.async_api import expectlocator = page.get_by_role("textbox")await expect(locator).to_be_focused()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-focused-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-focused-return)

* * *

### to\_be\_hidden[​](#locator-assertions-to-be-hidden "Direct link to to_be_hidden")

Added in: v1.20 locatorAssertions.to\_be\_hidden

Ensures that [Locator](/python/docs/api/class-locator "Locator") either does not resolve to any DOM node, or resolves to a [non-visible](/python/docs/actionability#visible) one.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator('.my-element')expect(locator).to_be_hidden()

    from playwright.async_api import expectlocator = page.locator('.my-element')await expect(locator).to_be_hidden()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-hidden-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-hidden-return)

* * *

### to\_be\_in\_viewport[​](#locator-assertions-to-be-in-viewport "Direct link to to_be_in_viewport")

Added in: v1.31 locatorAssertions.to\_be\_in\_viewport

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element that intersects viewport, according to the [intersection observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.get_by_role("button")# Make sure at least some part of element intersects viewport.expect(locator).to_be_in_viewport()# Make sure element is fully outside of viewport.expect(locator).not_to_be_in_viewport()# Make sure that at least half of the element intersects viewport.expect(locator).to_be_in_viewport(ratio=0.5)

    from playwright.async_api import expectlocator = page.get_by_role("button")# Make sure at least some part of element intersects viewport.await expect(locator).to_be_in_viewport()# Make sure element is fully outside of viewport.await expect(locator).not_to_be_in_viewport()# Make sure that at least half of the element intersects viewport.await expect(locator).to_be_in_viewport(ratio=0.5)

**Arguments**

*   `ratio` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-be-in-viewport-option-ratio)
    
    The minimal ratio of the element to intersect viewport. If equals to `0`, then element should intersect viewport at any positive ratio. Defaults to `0`.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-be-in-viewport-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-in-viewport-return)

* * *

### to\_be\_visible[​](#locator-assertions-to-be-visible "Direct link to to_be_visible")

Added in: v1.20 locatorAssertions.to\_be\_visible

Ensures that [Locator](/python/docs/api/class-locator "Locator") points to an attached and [visible](/python/docs/actionability#visible) DOM node.

To check that at least one element from the list is visible, use [locator.first](/python/docs/api/class-locator#locator-first).

**Usage**

*   Sync
*   Async

    # A specific element is visible.expect(page.get_by_text("Welcome")).to_be_visible()# At least one item in the list is visible.expect(page.get_by_test_id("todo-item").first).to_be_visible()# At least one of the two elements is visible, possibly both.expect(    page.get_by_role("button", name="Sign in")    .or_(page.get_by_role("button", name="Sign up"))    .first).to_be_visible()

    # A specific element is visible.await expect(page.get_by_text("Welcome")).to_be_visible()# At least one item in the list is visible.await expect(page.get_by_test_id("todo-item").first).to_be_visible()# At least one of the two elements is visible, possibly both.await expect(    page.get_by_role("button", name="Sign in")    .or_(page.get_by_role("button", name="Sign up"))    .first).to_be_visible()

**Arguments**

*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-visible-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    
*   `visible` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.26[#](#locator-assertions-to-be-visible-option-visible)
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-be-visible-return)

* * *

### to\_contain\_class[​](#locator-assertions-to-contain-class "Direct link to to_contain_class")

Added in: v1.52 locatorAssertions.to\_contain\_class

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with given CSS classes. All classes from the asserted value, separated by spaces, must be present in the [Element.classList](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList) in any order.

**Usage**

    <div class='middle selected row' id='component'></div>

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("#component")expect(locator).to_contain_class("middle selected row")expect(locator).to_contain_class("selected")expect(locator).to_contain_class("row middle")

    from playwright.async_api import expectlocator = page.locator("#component")await expect(locator).to_contain_class("middle selected row")await expect(locator).to_contain_class("selected")await expect(locator).to_contain_class("row middle")

When an array is passed, the method asserts that the list of elements located matches the corresponding list of expected class lists. Each element's class attribute is matched against the corresponding class in the array:

    <div class='list'></div>  <div class='component inactive'></div>  <div class='component active'></div>  <div class='component inactive'></div></div>

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("list > .component")await expect(locator).to_contain_class(["inactive", "active", "inactive"])

    from playwright.async_api import expectlocator = page.locator("list > .component")await expect(locator).to_contain_class(["inactive", "active", "inactive"])

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\][#](#locator-assertions-to-contain-class-option-expected)
    
    A string containing expected class names, separated by spaces, or a list of such strings to assert multiple elements.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-contain-class-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-contain-class-return)

* * *

### to\_contain\_text[​](#locator-assertions-to-contain-text "Direct link to to_contain_text")

Added in: v1.20 locatorAssertions.to\_contain\_text

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element that contains the given text. All nested elements will be considered when computing the text content of the element. You can use regular expressions for the value as well.

**Usage**

*   Sync
*   Async

    import refrom playwright.sync_api import expectlocator = page.locator('.title')expect(locator).to_contain_text("substring")expect(locator).to_contain_text(re.compile(r"\d messages"))

    import refrom playwright.async_api import expectlocator = page.locator('.title')await expect(locator).to_contain_text("substring")await expect(locator).to_contain_text(re.compile(r"\d messages"))

If you pass an array as an expected value, the expectations are:

1.  Locator resolves to a list of elements.
2.  Elements from a **subset** of this list contain text from the expected array, respectively.
3.  The matching subset of elements has the same order as the expected array.
4.  Each text value from the expected array is matched by some element from the list.

For example, consider the following list:

    <ul>  <li>Item Text 1</li>  <li>Item Text 2</li>  <li>Item Text 3</li></ul>

Let's see how we can use the assertion:

*   Sync
*   Async

    from playwright.sync_api import expect# ✓ Contains the right items in the right orderexpect(page.locator("ul > li")).to_contain_text(["Text 1", "Text 3", "Text 4"])# ✖ Wrong orderexpect(page.locator("ul > li")).to_contain_text(["Text 3", "Text 2"])# ✖ No item contains this textexpect(page.locator("ul > li")).to_contain_text(["Some 33"])# ✖ Locator points to the outer list element, not to the list itemsexpect(page.locator("ul")).to_contain_text(["Text 3"])

    from playwright.async_api import expect# ✓ Contains the right items in the right orderawait expect(page.locator("ul > li")).to_contain_text(["Text 1", "Text 3", "Text 4"])# ✖ Wrong orderawait expect(page.locator("ul > li")).to_contain_text(["Text 3", "Text 2"])# ✖ No item contains this textawait expect(page.locator("ul > li")).to_contain_text(["Some 33"])# ✖ Locator points to the outer list element, not to the list itemsawait expect(page.locator("ul")).to_contain_text(["Text 3"])

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\] Added in: v1.18[#](#locator-assertions-to-contain-text-option-expected)
    
    Expected substring or RegExp or a list of those.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.23[#](#locator-assertions-to-contain-text-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-text-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-contain-text-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    
*   `use_inner_text` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.18[#](#locator-assertions-to-contain-text-option-use-inner-text)
    
    Whether to use `element.innerText` instead of `element.textContent` when retrieving DOM node text.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-contain-text-return)

**Details**

When `expected` parameter is a string, Playwright will normalize whitespaces and line breaks both in the actual text and in the expected string before matching. When regular expression is used, the actual text is matched as is.

* * *

### to\_have\_accessible\_description[​](#locator-assertions-to-have-accessible-description "Direct link to to_have_accessible_description")

Added in: v1.44 locatorAssertions.to\_have\_accessible\_description

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with a given [accessible description](https://w3c.github.io/accname/#dfn-accessible-description).

**Usage**

*   Sync
*   Async

    locator = page.get_by_test_id("save-button")expect(locator).to_have_accessible_description("Save results to disk")

    locator = page.get_by_test_id("save-button")await expect(locator).to_have_accessible_description("Save results to disk")

**Arguments**

*   `description` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-assertions-to-have-accessible-description-option-description)
    
    Expected accessible description.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-to-have-accessible-description-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-have-accessible-description-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-accessible-description-return)

* * *

### to\_have\_accessible\_error\_message[​](#locator-assertions-to-have-accessible-error-message "Direct link to to_have_accessible_error_message")

Added in: v1.50 locatorAssertions.to\_have\_accessible\_error\_message

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with a given [aria errormessage](https://w3c.github.io/aria/#aria-errormessage).

**Usage**

*   Sync
*   Async

    locator = page.get_by_test_id("username-input")expect(locator).to_have_accessible_error_message("Username is required.")

    locator = page.get_by_test_id("username-input")await expect(locator).to_have_accessible_error_message("Username is required.")

**Arguments**

*   `error_message` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-assertions-to-have-accessible-error-message-option-error-message)
    
    Expected accessible error message.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-to-have-accessible-error-message-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-error-message-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-have-accessible-error-message-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-accessible-error-message-return)

* * *

### to\_have\_accessible\_name[​](#locator-assertions-to-have-accessible-name "Direct link to to_have_accessible_name")

Added in: v1.44 locatorAssertions.to\_have\_accessible\_name

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with a given [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

*   Sync
*   Async

    locator = page.get_by_test_id("save-button")expect(locator).to_have_accessible_name("Save to disk")

    locator = page.get_by_test_id("save-button")await expect(locator).to_have_accessible_name("Save to disk")

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")[#](#locator-assertions-to-have-accessible-name-option-name)
    
    Expected accessible name.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_[#](#locator-assertions-to-have-accessible-name-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-have-accessible-name-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-accessible-name-return)

* * *

### to\_have\_attribute[​](#locator-assertions-to-have-attribute "Direct link to to_have_attribute")

Added in: v1.20 locatorAssertions.to\_have\_attribute

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with given attribute.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("input")expect(locator).to_have_attribute("type", "text")

    from playwright.async_api import expectlocator = page.locator("input")await expect(locator).to_have_attribute("type", "text")

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.18[#](#locator-assertions-to-have-attribute-option-name)
    
    Attribute name.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-to-have-attribute-option-value)
    
    Expected attribute value.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.40[#](#locator-assertions-to-have-attribute-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-to-have-attribute-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-attribute-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-attribute-return)

* * *

### to\_have\_class[​](#locator-assertions-to-have-class "Direct link to to_have_class")

Added in: v1.20 locatorAssertions.to\_have\_class

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with given CSS classes. When a string is provided, it must fully match the element's `class` attribute. To match individual classes use [expect(locator).to\_contain\_class()](/python/docs/api/class-locatorassertions#locator-assertions-to-contain-class).

**Usage**

    <div class='middle selected row' id='component'></div>

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("#component")expect(locator).to_have_class("middle selected row")expect(locator).to_have_class(re.compile(r"(^|\\s)selected(\\s|$)"))

    from playwright.async_api import expectlocator = page.locator("#component")await expect(locator).to_have_class("middle selected row")await expect(locator).to_have_class(re.compile(r"(^|\\s)selected(\\s|$)"))

When an array is passed, the method asserts that the list of elements located matches the corresponding list of expected class values. Each element's class attribute is matched against the corresponding string or regular expression in the array:

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("list > .component")expect(locator).to_have_class(["component", "component selected", "component"])

    from playwright.async_api import expectlocator = page.locator("list > .component")await expect(locator).to_have_class(["component", "component selected", "component"])

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\] Added in: v1.18[#](#locator-assertions-to-have-class-option-expected)
    
    Expected class or RegExp or a list of those.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-class-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-class-return)

* * *

### to\_have\_count[​](#locator-assertions-to-have-count "Direct link to to_have_count")

Added in: v1.20 locatorAssertions.to\_have\_count

Ensures the [Locator](/python/docs/api/class-locator "Locator") resolves to an exact number of DOM nodes.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator("list > .component")expect(locator).to_have_count(3)

    from playwright.async_api import expectlocator = page.locator("list > .component")await expect(locator).to_have_count(3)

**Arguments**

*   `count` [int](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "int") Added in: v1.18[#](#locator-assertions-to-have-count-option-count)
    
    Expected count.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-count-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-count-return)

* * *

### to\_have\_css[​](#locator-assertions-to-have-css "Direct link to to_have_css")

Added in: v1.20 locatorAssertions.to\_have\_css

Ensures the [Locator](/python/docs/api/class-locator "Locator") resolves to an element with the given computed CSS style.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.get_by_role("button")expect(locator).to_have_css("display", "flex")

    from playwright.async_api import expectlocator = page.get_by_role("button")await expect(locator).to_have_css("display", "flex")

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.18[#](#locator-assertions-to-have-css-option-name)
    
    CSS property name.
    
*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-to-have-css-option-value)
    
    CSS property value.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-css-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-css-return)

* * *

### to\_have\_id[​](#locator-assertions-to-have-id "Direct link to to_have_id")

Added in: v1.20 locatorAssertions.to\_have\_id

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with the given DOM Node ID.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.get_by_role("textbox")expect(locator).to_have_id("lastname")

    from playwright.async_api import expectlocator = page.get_by_role("textbox")await expect(locator).to_have_id("lastname")

**Arguments**

*   `id` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-to-have-id-option-id)
    
    Element id.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-id-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-id-return)

* * *

### to\_have\_js\_property[​](#locator-assertions-to-have-js-property "Direct link to to_have_js_property")

Added in: v1.20 locatorAssertions.to\_have\_js\_property

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with given JavaScript property. Note that this property can be of a primitive type as well as a plain serializable JavaScript object.

**Usage**

*   Sync
*   Async

    from playwright.sync_api import expectlocator = page.locator(".component")expect(locator).to_have_js_property("loaded", True)

    from playwright.async_api import expectlocator = page.locator(".component")await expect(locator).to_have_js_property("loaded", True)

**Arguments**

*   `name` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") Added in: v1.18[#](#locator-assertions-to-have-js-property-option-name)
    
    Property name.
    
*   `value` [Any](https://docs.python.org/3/library/typing.html#typing.Any "Any") Added in: v1.18[#](#locator-assertions-to-have-js-property-option-value)
    
    Property value.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-js-property-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-js-property-return)

* * *

### to\_have\_role[​](#locator-assertions-to-have-role "Direct link to to_have_role")

Added in: v1.44 locatorAssertions.to\_have\_role

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with a given [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles).

Note that role is matched as a string, disregarding the ARIA role hierarchy. For example, asserting a superclass role `"checkbox"` on an element with a subclass role `"switch"` will fail.

**Usage**

*   Sync
*   Async

    locator = page.get_by_test_id("save-button")expect(locator).to_have_role("button")

    locator = page.get_by_test_id("save-button")await expect(locator).to_have_role("button")

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#locator-assertions-to-have-role-option-role)
    
    Required aria role.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-have-role-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-role-return)

* * *

### to\_have\_text[​](#locator-assertions-to-have-text "Direct link to to_have_text")

Added in: v1.20 locatorAssertions.to\_have\_text

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with the given text. All nested elements will be considered when computing the text content of the element. You can use regular expressions for the value as well.

**Usage**

*   Sync
*   Async

    import refrom playwright.sync_api import expectlocator = page.locator(".title")expect(locator).to_have_text(re.compile(r"Welcome, Test User"))expect(locator).to_have_text(re.compile(r"Welcome, .*"))

    import refrom playwright.async_api import expectlocator = page.locator(".title")await expect(locator).to_have_text(re.compile(r"Welcome, Test User"))await expect(locator).to_have_text(re.compile(r"Welcome, .*"))

If you pass an array as an expected value, the expectations are:

1.  Locator resolves to a list of elements.
2.  The number of elements equals the number of expected values in the array.
3.  Elements from the list have text matching expected array values, one by one, in order.

For example, consider the following list:

    <ul>  <li>Text 1</li>  <li>Text 2</li>  <li>Text 3</li></ul>

Let's see how we can use the assertion:

*   Sync
*   Async

    from playwright.sync_api import expect# ✓ Has the right items in the right orderexpect(page.locator("ul > li")).to_have_text(["Text 1", "Text 2", "Text 3"])# ✖ Wrong orderexpect(page.locator("ul > li")).to_have_text(["Text 3", "Text 2", "Text 1"])# ✖ Last item does not matchexpect(page.locator("ul > li")).to_have_text(["Text 1", "Text 2", "Text"])# ✖ Locator points to the outer list element, not to the list itemsexpect(page.locator("ul")).to_have_text(["Text 1", "Text 2", "Text 3"])

    from playwright.async_api import expect# ✓ Has the right items in the right orderawait expect(page.locator("ul > li")).to_have_text(["Text 1", "Text 2", "Text 3"])# ✖ Wrong orderawait expect(page.locator("ul > li")).to_have_text(["Text 3", "Text 2", "Text 1"])# ✖ Last item does not matchawait expect(page.locator("ul > li")).to_have_text(["Text 1", "Text 2", "Text"])# ✖ Locator points to the outer list element, not to the list itemsawait expect(page.locator("ul")).to_have_text(["Text 1", "Text 2", "Text 3"])

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\] Added in: v1.18[#](#locator-assertions-to-have-text-option-expected)
    
    Expected string or RegExp or a list of those.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.23[#](#locator-assertions-to-have-text-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-locatorassertions#locator-assertions-to-have-text-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-text-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    
*   `use_inner_text` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-text-option-use-inner-text)
    
    Whether to use `element.innerText` instead of `element.textContent` when retrieving DOM node text.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-text-return)

**Details**

When `expected` parameter is a string, Playwright will normalize whitespaces and line breaks both in the actual text and in the expected string before matching. When regular expression is used, the actual text is matched as is.

* * *

### to\_have\_value[​](#locator-assertions-to-have-value "Direct link to to_have_value")

Added in: v1.20 locatorAssertions.to\_have\_value

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to an element with the given input value. You can use regular expressions for the value as well.

**Usage**

*   Sync
*   Async

    import refrom playwright.sync_api import expectlocator = page.locator("input[type=number]")expect(locator).to_have_value(re.compile(r"[0-9]"))

    import refrom playwright.async_api import expectlocator = page.locator("input[type=number]")await expect(locator).to_have_value(re.compile(r"[0-9]"))

**Arguments**

*   `value` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#locator-assertions-to-have-value-option-value)
    
    Expected value.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-value-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-value-return)

* * *

### to\_have\_values[​](#locator-assertions-to-have-values "Direct link to to_have_values")

Added in: v1.23 locatorAssertions.to\_have\_values

Ensures the [Locator](/python/docs/api/class-locator "Locator") points to multi-select/combobox (i.e. a `select` with the `multiple` attribute) and the specified values are selected.

**Usage**

For example, given the following element:

    <select id="favorite-colors" multiple>  <option value="R">Red</option>  <option value="G">Green</option>  <option value="B">Blue</option></select>

*   Sync
*   Async

    import refrom playwright.sync_api import expectlocator = page.locator("id=favorite-colors")locator.select_option(["R", "G"])expect(locator).to_have_values([re.compile(r"R"), re.compile(r"G")])

    import refrom playwright.async_api import expectlocator = page.locator("id=favorite-colors")await locator.select_option(["R", "G"])await expect(locator).to_have_values([re.compile(r"R"), re.compile(r"G")])

**Arguments**

*   `values` [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[Pattern](https://docs.python.org/3/library/re.html "Pattern")\] | [List](https://docs.python.org/3/library/typing.html#typing.List "List")\[[str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern")\][#](#locator-assertions-to-have-values-option-values)
    
    Expected options currently selected.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-have-values-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-have-values-return)

* * *

### to\_match\_aria\_snapshot[​](#locator-assertions-to-match-aria-snapshot "Direct link to to_match_aria_snapshot")

Added in: v1.49 locatorAssertions.to\_match\_aria\_snapshot

Asserts that the target element matches the given [accessibility snapshot](/python/docs/aria-snapshots).

**Usage**

*   Sync
*   Async

    page.goto("https://demo.playwright.dev/todomvc/")expect(page.locator('body')).to_match_aria_snapshot('''  - heading "todos"  - textbox "What needs to be done?"''')

    await page.goto("https://demo.playwright.dev/todomvc/")await expect(page.locator('body')).to_match_aria_snapshot('''  - heading "todos"  - textbox "What needs to be done?"''')

**Arguments**

*   `expected` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str")[#](#locator-assertions-to-match-aria-snapshot-option-expected)
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_[#](#locator-assertions-to-match-aria-snapshot-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#locator-assertions-to-match-aria-snapshot-return)

# PageAssertions

PageAssertions
==============

The [PageAssertions](/python/docs/api/class-pageassertions "PageAssertions") class provides assertion methods that can be used to make assertions about the [Page](/python/docs/api/class-page "Page") state in the tests.

*   Sync
*   Async

    import refrom playwright.sync_api import Page, expectdef test_navigates_to_login_page(page: Page) -> None:    # ..    page.get_by_text("Sign in").click()    expect(page).to_have_url(re.compile(r".*/login"))

    import refrom playwright.async_api import Page, expectasync def test_navigates_to_login_page(page: Page) -> None:    # ..    await page.get_by_text("Sign in").click()    await expect(page).to_have_url(re.compile(r".*/login"))

* * *

Methods[​](#methods "Direct link to Methods")
---------------------------------------------

### not\_to\_have\_title[​](#page-assertions-not-to-have-title "Direct link to not_to_have_title")

Added in: v1.20 pageAssertions.not\_to\_have\_title

The opposite of [expect(page).to\_have\_title()](/python/docs/api/class-pageassertions#page-assertions-to-have-title).

**Usage**

    expect(page).not_to_have_title(title_or_reg_exp)expect(page).not_to_have_title(title_or_reg_exp, **kwargs)

**Arguments**

*   `title_or_reg_exp` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#page-assertions-not-to-have-title-option-title-or-reg-exp)
    
    Expected title or RegExp.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#page-assertions-not-to-have-title-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-assertions-not-to-have-title-return)

* * *

### not\_to\_have\_url[​](#page-assertions-not-to-have-url "Direct link to not_to_have_url")

Added in: v1.20 pageAssertions.not\_to\_have\_url

The opposite of [expect(page).to\_have\_url()](/python/docs/api/class-pageassertions#page-assertions-to-have-url).

**Usage**

    expect(page).not_to_have_url(url_or_reg_exp)expect(page).not_to_have_url(url_or_reg_exp, **kwargs)

**Arguments**

*   `url_or_reg_exp` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#page-assertions-not-to-have-url-option-url-or-reg-exp)
    
    Expected URL string or RegExp.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.44[#](#page-assertions-not-to-have-url-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-pageassertions#page-assertions-not-to-have-url-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#page-assertions-not-to-have-url-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-assertions-not-to-have-url-return)

* * *

### to\_have\_title[​](#page-assertions-to-have-title "Direct link to to_have_title")

Added in: v1.20 pageAssertions.to\_have\_title

Ensures the page has the given title.

**Usage**

*   Sync
*   Async

    import refrom playwright.sync_api import expect# ...expect(page).to_have_title(re.compile(r".*checkout"))

    import refrom playwright.async_api import expect# ...await expect(page).to_have_title(re.compile(r".*checkout"))

**Arguments**

*   `title_or_reg_exp` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#page-assertions-to-have-title-option-title-or-reg-exp)
    
    Expected title or RegExp.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#page-assertions-to-have-title-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-assertions-to-have-title-return)

* * *

### to\_have\_url[​](#page-assertions-to-have-url "Direct link to to_have_url")

Added in: v1.20 pageAssertions.to\_have\_url

Ensures the page is navigated to the given URL.

**Usage**

*   Sync
*   Async

    import refrom playwright.sync_api import expect# ...expect(page).to_have_url(re.compile(".*checkout"))

    import refrom playwright.async_api import expect# ...await expect(page).to_have_url(re.compile(".*checkout"))

**Arguments**

*   `url_or_reg_exp` [str](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str "str") | [Pattern](https://docs.python.org/3/library/re.html "Pattern") Added in: v1.18[#](#page-assertions-to-have-url-option-url-or-reg-exp)
    
    Expected URL string or RegExp.
    
*   `ignore_case` [bool](https://docs.python.org/3/library/stdtypes.html "bool") _(optional)_ Added in: v1.44[#](#page-assertions-to-have-url-option-ignore-case)
    
    Whether to perform case-insensitive match. [ignore\_case](/python/docs/api/class-pageassertions#page-assertions-to-have-url-option-ignore-case) option takes precedence over the corresponding regular expression parameter if specified. A provided predicate ignores this flag.
    
*   `timeout` [float](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex "float") _(optional)_ Added in: v1.18[#](#page-assertions-to-have-url-option-timeout)
    
    Time to retry the assertion for in milliseconds. Defaults to `5000`.
    

**Returns**

*   [NoneType](https://docs.python.org/3/library/constants.html#None "None")[#](#page-assertions-to-have-url-return)

