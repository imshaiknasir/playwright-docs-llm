# THIS DOCUMENT CONTAINS THE COMPLETE DOCUMENTATION FOR PLAYWRIGHT NODEJS.



# Getting started - VS Code

Getting started - VS Code
=========================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

The Playwright VS Code extension brings the power of Playwright Test directly into your editor, allowing you to run, debug, and generate tests with a seamless UI-driven experience. This guide will walk you through setting up the extension and using its core features to supercharge your end-to-end testing workflow.

Prerequisites[â€‹](#prerequisites "Direct link to Prerequisites")
---------------------------------------------------------------

Before you begin, make sure you have the following installed:

*   [Node.js](https://nodejs.org/) (LTS version recommended)
*   [Visual Studio Code](https://code.visualstudio.com/)

Getting Started[â€‹](#getting-started "Direct link to Getting Started")
---------------------------------------------------------------------

### Installation & Setup[â€‹](#installation--setup "Direct link to Installation & Setup")

1.  **Install the Extension**: Open the Extensions view in VS Code (`Ctrl+Shift+X` or `Cmd+Shift+X`) and search for "Playwright". [Install the official extension from Microsoft](https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright).

![install playwright extension](/assets/images/vscode-extension-ce873e1c0d856b8c255e9de0781eb8d9.png)

1.  **Install Playwright**: Once the extension is installed, open the Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P`) and run the **Test: Install Playwright** command.

![install playwright](/assets/images/install-playwright-f211fc1079a8b3a01bcbd28e711c4eec.png)

3.  **Select Browsers**: Choose the browsers you want for your tests (e.g., Chromium, Firefox, WebKit). You can also add a GitHub Actions workflow to run tests in CI. These settings can be changed later in your `playwright.config.ts` file.

![install browsers](/assets/images/install-browsers-f8158381ce036e1299547aed66a4ccf0.png)

### Opening the Testing Sidebar[â€‹](#opening-the-testing-sidebar "Direct link to Opening the Testing Sidebar")

Click the **Testing icon** in the VS Code Activity Bar to open the Test Explorer. Here, you'll find your tests, as well as the Playwright sidebar for managing projects, tools, and settings.

![Testing Sidebar](/assets/images/testing-sidebar-25b968f725bc3c175a12a4aa8b662c81.png)

Core Features[â€‹](#core-features "Direct link to Core Features")
---------------------------------------------------------------

### Running Your Tests[â€‹](#running-your-tests "Direct link to Running Your Tests")

*   **Run a Single Test**: Click the green "play" icon next to any test to run it. The play button will change to a green checkmark if the test passes or a red X if the test fails. You'll be able to see how long the test took to run displayed next to the test name. Additionally, the Test Results panel will automatically open at the bottom of VS Code, showing a summary of the test execution including how many tests ran, how many passed, failed, or were skipped, along with the total execution time.

![run a single test](/assets/images/run-single-test-a2c8b8cee4b02a198e11fcc0db4503a8.png)

*   **Run All Tests**: You can run all tests at different levels. Click the play icon next to a specific test file to run all tests within that file, or click the play icon at the very top of the Test Explorer to run all tests across your entire project.

![run all tests](/assets/images/run-all-tests-e16ffc6a8477c16b38b84dea676d671b.png)

*   **Run on Multiple Browsers**: In the Playwright sidebar, check the boxes for the projects (browsers) you want to test against. Projects in Playwright represent different browser configurations - each project typically corresponds to a specific browser (like Chromium, Firefox, or WebKit) with its own settings such as viewport size, device emulation, or other browser-specific options. When you run a test, it will execute across all selected projects, allowing you to verify your application works consistently across different browsers and configurations.

![Selecting projects to run tests on](/assets/images/select-projects-a66b52a5cc75100faef51e14e495d460.png)

*   **Show Browser**: To watch your tests execute in a live browser window, enable the **Show Browser** option in the sidebar. Disable it to run in headless mode (where tests run in the background without opening a visible browser window).

![show browsers while running tests](/assets/images/show-browser-b091435ade8f511a64a9f75c54b52f43.png)

### Debugging Your Tests[â€‹](#debugging-your-tests "Direct link to Debugging Your Tests")

The VS Code extension provides powerful debugging tools to help you identify and fix issues in your tests. You can set breakpoints, inspect variables, view detailed error messages, get AI-powered suggestions to resolve test failures, and use the comprehensive trace viewer to analyze test execution step-by-step.

*   **Using Breakpoints**: Set a breakpoint by clicking in the gutter next to a line number. Right-click the test and select **Debug Test**. The test will pause at your breakpoint, allowing you to inspect variables and step through the code.

![setting debug mode](/assets/images/debug-mode-e145cba936d960900fc79b646016a9ba.png)

*   **Live Debugging**: With **Show Browsers** enabled, click on a locator in your code. Playwright will highlight the corresponding element in the browser, making it easy to verify locators.

![live debugging in vs code](/assets/images/live-debugging-73579e1b53e40d1e0169fd2254e4336a.png)

*   **Viewing Error Messages**: If a test fails, the extension displays detailed error messages, including the expected vs. received values and a full call log, directly in the editor.

![error messaging in vs code](/assets/images/error-messaging-74058e7f1bc8b8f8b477b726fa623493.png)

*   **Fix with AI**: When a test fails, click the sparkle icon next to the error to get an AI-powered fix suggestion from Copilot. Copilot analyzes the error and suggests a code change to resolve the issue.

![fix with ai in vs code](/assets/images/fix-with-ai-011728a352c48c0083ac472fe739815d.png)

*   **Debugging with Trace Viewer**: For comprehensive debugging, enable the **Show Trace Viewer** option in the Playwright sidebar. When your test finishes, a detailed trace will automatically open, providing you with a complete timeline of your test execution. The trace viewer is particularly useful for:
*   **Step-by-step analysis**: Navigate through each action your test performed with precise timestamps
*   **DOM inspection**: View DOM snapshots at any point during test execution to see exactly what the page looked like
*   **Network monitoring**: Examine all network requests and responses that occurred during the test
*   **Console logs**: Access all console messages and errors from the browser
*   **Source mapping**: Jump directly to the source code that executed each action
*   **Visual debugging**: See screenshots and understand what the user would have seen at each step

The trace viewer is especially valuable when debugging flaky tests or understanding complex user interactions.

![trace viewer debugging](/assets/images/trace-viewer-debug-1386da3466791b55394091f252ec2ca9.png)

To learn more, see our [Trace Viewer guide](/docs/trace-viewer).

### Generating Tests with CodeGen[â€‹](#generating-tests-with-codegen "Direct link to Generating Tests with CodeGen")

CodeGen is Playwright's powerful test generation tool that automatically creates test code by recording your interactions with a web page. Instead of writing tests from scratch, you can simply navigate through your application while CodeGen captures your actions and converts them into reliable test code with proper locators and assertions.

*   **Record a New Test**: Click **Record new** in the sidebar. A browser window will open. As you interact with the page, Playwright will automatically generate the test code. You can also generate assertions from the recording toolbar.

![record a new test](/assets/images/record-new-test-cafcc94d48bf8ee82af0bc4e90a100ef.png)

*   **Record at Cursor**: Place your cursor inside an existing test and click **Record at cursor** to add new actions at that specific point. ![record at cursor](/assets/images/record-at-cursor-cc902be640e0c7789eee76efa37fbb53.png)
*   **Pick a Locator**: Use the **Pick locator** tool to click on any element in the opened browser. Playwright will determine the best locator and copy it to your clipboard, ready to be pasted into your code.

![pick locators](/assets/images/pick-locator-21752d14dc07a83f5fb1bd67b6c0e0c0.png)

To learn more, see our [CodeGen guide](/docs/codegen).

Advanced Features[â€‹](#advanced-features "Direct link to Advanced Features")
---------------------------------------------------------------------------

### Project Dependencies[â€‹](#project-dependencies "Direct link to Project Dependencies")

Use [project dependencies](/docs/test-projects) to define setup tests that run before other tests. For example, you can create a login test that runs first, then reuse that authenticated state across multiple tests without having to log in again for each test. In VS Code, you can see these setup tests in the Test Explorer and run them independently when needed.

![setup tests in vscode](/assets/images/setup-tests-8c128d60e165d9cbf13e0bdd3eb5c411.png)

To learn more, see our [Project Dependencies guide](/docs/test-projects).

### Global Setup[â€‹](#global-setup "Direct link to Global Setup")

For tasks that need to run only once before all tests (like seeding a database), use **Global Setup**. You can trigger the global setup and teardown manually from the Playwright sidebar.

![running global setup](/assets/images/global-setup-c169662b46ac06131aa560fdf11e4deb.png)

### Multiple Configurations[â€‹](#multiple-configurations "Direct link to Multiple Configurations")

If you have multiple `playwright.config.ts` files, you can switch between them using the gear icon in the Playwright sidebar. This allows you to easily work with different test suites or environments.

![Selecting a configuration file](/assets/images/selecting-configuration-8f3a095d5f89449532d3cc0276c29ba7.png)

Quick Reference[â€‹](#quick-reference "Direct link to Quick Reference")
---------------------------------------------------------------------

Action

How to do it in VS Code

**Install Playwright**

Command Palette â†’ `Test: Install Playwright`

**Run a Test**

Click the "play" icon next to the test

**Debug a Test**

Set a breakpoint, right-click the test â†’ `Debug Test`

**Show Live Browser**

Enable `Show Browsers` in the Playwright sidebar

**Record a New Test**

Click `Record new` in the Playwright sidebar

**Pick a Locator**

Click `Pick locator` in the Playwright sidebar

**View Test Trace**

Enable `Show Trace Viewer` in the Playwright sidebar

What's Next[â€‹](#whats-next "Direct link to What's Next")
--------------------------------------------------------

*   [Write tests using web-first assertions, page fixtures, and locators](/docs/writing-tests)
*   [Run your tests on CI](/docs/ci-intro)
*   [Learn more about the Trace Viewer](/docs/trace-viewer)

# Release notes

Release notes
=============

Version 1.57[â€‹](#version-157 "Direct link to Version 1.57")
-----------------------------------------------------------

### Speedboard[â€‹](#speedboard "Direct link to Speedboard")

In HTML reporter, there's a new tab we call "Speedboard":

![Speedboard](/assets/images/speedboard-a8fe4e48388f4075fdd70e83d2b53e7a.png)

It shows you all your executed tests sorted by slowness, and can help you understand where your test suite is taking longer than expected. Take a look at yours - maybe you'll find some tests that are spending a longer time waiting than they should!

### Chrome for Testing[â€‹](#chrome-for-testing "Direct link to Chrome for Testing")

Starting with this release, Playwright switches from Chromium, to using [Chrome for Testing](https://developer.chrome.com/blog/chrome-for-testing/) builds. Both headed and headless browsers are subject to this. Your tests should still be passing after upgrading to Playwright 1.57.

We're expecting no functional changes to come from this switch. The biggest change is the new icon and title in your toolbar.

![new and old logo](/assets/images/cft-logo-change-e6c83cd629c1cf92a7856fe6e42ab80a.png)

If you still see an unexpected behaviour change, please [file an issue](https://github.com/microsoft/playwright/issues/new).

On Arm64 Linux, Playwright continues to use Chromium.

### Waiting for webserver output[â€‹](#waiting-for-webserver-output "Direct link to Waiting for webserver output")

[testConfig.webServer](/docs/api/class-testconfig#test-config-web-server) added a `wait` field. Pass a regular expression, and Playwright will wait until the webserver logs match it.

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: {    command: 'npm run start',    wait: {      stdout: '/Listening on port (?<my_server_port>\\d+)/'    },  },});

If you include a named capture group into the expression, then Playwright will provide the capture group contents via environment variables:

    import { test, expect } from '@playwright/test';test.use({ baseUrl: `http://localhost:${process.env.MY_SERVER_PORT ?? 3000}` });test('homepage', async ({ page }) => {  await page.goto('/');});

This is not just useful for capturing varying ports of dev servers. You can also use it to wait for readiness of a service that doesn't expose an HTTP readiness check, but instead prints a readiness message to stdout or stderr.

### Breaking Change[â€‹](#breaking-change "Direct link to Breaking Change")

After 3 years of being deprecated, we removed `page.accessibility` from our API. Please use other libraries such as [Axe](https://www.deque.com/axe/) if you need to test page accessibility. See our Node.js [guide](https://playwright.dev/docs/accessibility-testing) for integration with Axe.

### New APIs[â€‹](#new-apis "Direct link to New APIs")

*   New property [testConfig.tag](/docs/api/class-testconfig#test-config-tag) adds a tag to all tests in this run. This is useful when using [merge-reports](/docs/test-sharding#merging-reports-from-multiple-shards).
*   [worker.on('console')](/docs/api/class-worker#worker-event-console) event is emitted when JavaScript within the worker calls one of console API methods, e.g. console.log or console.dir. [worker.waitForEvent()](/docs/api/class-worker#worker-wait-for-event) can be used to wait for it.
*   [locator.description()](/docs/api/class-locator#locator-description) returns locator description previously set with [locator.describe()](/docs/api/class-locator#locator-describe), and `Locator.toString()` now uses the description when available.
*   New option [steps](/docs/api/class-locator#locator-click-option-steps) in [locator.click()](/docs/api/class-locator#locator-click) and [locator.dragTo()](/docs/api/class-locator#locator-drag-to) that configures the number of `mousemove` events emitted while moving the mouse pointer to the target element.
*   Network requests issued by [Service Workers](/docs/service-workers#network-events-and-routing) are now reported and can be routed through the [BrowserContext](/docs/api/class-browsercontext), only in Chromium. You can opt out using the `PLAYWRIGHT_DISABLE_SERVICE_WORKER_NETWORK` environment variable.
*   Console messages from Service Workers are dispatched through [worker.on('console')](/docs/api/class-worker#worker-event-console). You can opt out of this using the `PLAYWRIGHT_DISABLE_SERVICE_WORKER_CONSOLE` environment variable.

### Browser Versions[â€‹](#browser-versions "Direct link to Browser Versions")

*   Chromium 143.0.7499.4
*   Mozilla Firefox 144.0.2
*   WebKit 26.0

Version 1.56[â€‹](#version-156 "Direct link to Version 1.56")
-----------------------------------------------------------

### Playwright Test Agents[â€‹](#playwright-test-agents "Direct link to Playwright Test Agents")

Introducing Playwright Test Agents, three custom agent definitions designed to guide LLMs through the core process of building a Playwright test:

*   **ðŸŽ­ planner** explores the app and produces a Markdown test plan
*   **ðŸŽ­ generator** transforms the Markdown plan into the Playwright Test files
*   **ðŸŽ­ healer** executes the test suite and automatically repairs failing tests

Run `npx playwright init-agents` with your client of choice to generate the latest agent definitions:

    # Generate agent files for each agentic loop# Visual Studio Codenpx playwright init-agents --loop=vscode# Claude Codenpx playwright init-agents --loop=claude# opencodenpx playwright init-agents --loop=opencode

[Learn more about Playwright Test Agents](/docs/test-agents)

### New APIs[â€‹](#new-apis-1 "Direct link to New APIs")

*   New methods [page.consoleMessages()](/docs/api/class-page#page-console-messages) and [page.pageErrors()](/docs/api/class-page#page-page-errors) for retrieving the most recent console messages from the page
*   New method [page.requests()](/docs/api/class-page#page-requests) for retrieving the most recent network requests from the page
*   Added [`--test-list` and `--test-list-invert`](/docs/test-cli#test-list) to allow manual specification of specific tests from a file

### UI Mode and HTML Reporter[â€‹](#ui-mode-and-html-reporter "Direct link to UI Mode and HTML Reporter")

*   Added option to `'html'` reporter to disable the "Copy prompt" button
*   Added option to `'html'` reporter and UI Mode to merge files, collapsing test and describe blocks into a single unified list
*   Added option to UI Mode mirroring the `--update-snapshots` options
*   Added option to UI Mode to run only a single worker at a time

### Breaking Changes[â€‹](#breaking-changes "Direct link to Breaking Changes")

*   Event [browserContext.on('backgroundpage')](/docs/api/class-browsercontext#browser-context-event-background-page) has been deprecated and will not be emitted. Method [browserContext.backgroundPages()](/docs/api/class-browsercontext#browser-context-background-pages) will return an empty list

### Miscellaneous[â€‹](#miscellaneous "Direct link to Miscellaneous")

*   Aria snapshots render and compare `input` `placeholder`
*   Added environment variable `PLAYWRIGHT_TEST` to Playwright worker processes to allow discriminating on testing status

### Browser Versions[â€‹](#browser-versions-1 "Direct link to Browser Versions")

*   Chromium 141.0.7390.37
*   Mozilla Firefox 142.0.1
*   WebKit 26.0

Version 1.55[â€‹](#version-155 "Direct link to Version 1.55")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-2 "Direct link to New APIs")

*   New Property [testStepInfo.titlePath](/docs/api/class-teststepinfo#test-step-info-title-path) Returns the full title path starting from the test file, including test and step titles.

### Codegen[â€‹](#codegen "Direct link to Codegen")

*   Automatic `toBeVisible()` assertions: Codegen can now generate automatic `toBeVisible()` assertions for common UI interactions. This feature can be enabled in the Codegen settings UI.

### Breaking Changes[â€‹](#breaking-changes-1 "Direct link to Breaking Changes")

*   âš ï¸ Dropped support for Chromium extension manifest v2.

### Miscellaneous[â€‹](#miscellaneous-1 "Direct link to Miscellaneous")

*   Added support for Debian 13 "Trixie".

### Browser Versions[â€‹](#browser-versions-2 "Direct link to Browser Versions")

*   Chromium 140.0.7339.16
*   Mozilla Firefox 141.0
*   WebKit 26.0

This version was also tested against the following stable channels:

*   Google Chrome 139
*   Microsoft Edge 139

Version 1.54[â€‹](#version-154 "Direct link to Version 1.54")
-----------------------------------------------------------

### Highlights[â€‹](#highlights "Direct link to Highlights")

*   New cookie property `partitionKey` in [browserContext.cookies()](/docs/api/class-browsercontext#browser-context-cookies) and [browserContext.addCookies()](/docs/api/class-browsercontext#browser-context-add-cookies). This property allows to save and restore partitioned cookies. See [CHIPS MDN article](https://developer.mozilla.org/en-US/docs/Web/Privacy/Guides/Privacy_sandbox/Partitioned_cookies) for more information. Note that browsers have different support and defaults for cookie partitioning.
    
*   New option `noSnippets` to disable code snippets in the html report.
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['html', { noSnippets: true }]]});
    
*   New property `location` in test annotations, for example in [testResult.annotations](/docs/api/class-testresult#test-result-annotations) and [testInfo.annotations](/docs/api/class-testinfo#test-info-annotations). It shows where the annotation like `test.skip` or `test.fixme` was added.
    

### Command Line[â€‹](#command-line "Direct link to Command Line")

*   New option `--user-data-dir` in multiple commands. You can specify the same user data dir to reuse browsing state, like authentication, between sessions.
    
        npx playwright codegen --user-data-dir=./user-data
    
*   Option `-gv` has been removed from the `npx playwright test` command. Use `--grep-invert` instead.
    
*   `npx playwright open` does not open the test recorder anymore. Use `npx playwright codegen` instead.
    

### Miscellaneous[â€‹](#miscellaneous-2 "Direct link to Miscellaneous")

*   Support for Node.js 16 has been removed.
*   Support for Node.js 18 has been deprecated, and will be removed in the future.

### Browser Versions[â€‹](#browser-versions-3 "Direct link to Browser Versions")

*   Chromium 139.0.7258.5
*   Mozilla Firefox 140.0.2
*   WebKit 26.0

This version was also tested against the following stable channels:

*   Google Chrome 140
*   Microsoft Edge 140

Version 1.53[â€‹](#version-153 "Direct link to Version 1.53")
-----------------------------------------------------------

### Trace Viewer and HTML Reporter Updates[â€‹](#trace-viewer-and-html-reporter-updates "Direct link to Trace Viewer and HTML Reporter Updates")

*   New Steps in Trace Viewer and HTML reporter: ![New Trace Viewer Steps](https://github.com/user-attachments/assets/1963ff7d-4070-41be-a79b-4333176921a2)
    
*   New option in `'html'` reporter to set the title of a specific test run:
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['html', { title: 'Custom test run #1028' }]]});
    

### Miscellaneous[â€‹](#miscellaneous-3 "Direct link to Miscellaneous")

*   New option [kind](/docs/api/class-testinfo#test-info-snapshot-path-option-kind) in [testInfo.snapshotPath()](/docs/api/class-testinfo#test-info-snapshot-path) controls which snapshot path template is used.
    
*   New method [locator.describe()](/docs/api/class-locator#locator-describe) to describe a locator. Used for trace viewer and reports.
    
        const button = page.getByTestId('btn-sub').describe('Subscribe button');await button.click();
    
*   `npx playwright install --list` will now list all installed browsers, versions and locations.
    

### Browser Versions[â€‹](#browser-versions-4 "Direct link to Browser Versions")

*   Chromium 138.0.7204.4
*   Mozilla Firefox 139.0
*   WebKit 18.5

This version was also tested against the following stable channels:

*   Google Chrome 137
*   Microsoft Edge 137

Version 1.52[â€‹](#version-152 "Direct link to Version 1.52")
-----------------------------------------------------------

### Highlights[â€‹](#highlights-1 "Direct link to Highlights")

*   New method [expect(locator).toContainClass()](/docs/api/class-locatorassertions#locator-assertions-to-contain-class) to ergonomically assert individual class names on the element.
    
        await expect(page.getByRole('listitem', { name: 'Ship v1.52' })).toContainClass('done');
    
*   [Aria Snapshots](/docs/aria-snapshots) got two new properties: [`/children`](/docs/aria-snapshots#strict-matching) for strict matching and `/url` for links.
    
        await expect(locator).toMatchAriaSnapshot(`  - list    - /children: equal    - listitem: Feature A    - listitem:      - link "Feature B":        - /url: "https://playwright.dev"`);
    

### Test Runner[â€‹](#test-runner "Direct link to Test Runner")

*   New property [testProject.workers](/docs/api/class-testproject#test-project-workers) allows to specify the number of concurrent worker processes to use for a test project. The global limit of property [testConfig.workers](/docs/api/class-testconfig#test-config-workers) still applies.
*   New [testConfig.failOnFlakyTests](/docs/api/class-testconfig#test-config-fail-on-flaky-tests) option to fail the test run if any flaky tests are detected, similarly to `--fail-on-flaky-tests`. This is useful for CI/CD environments where you want to ensure that all tests are stable before deploying.
*   New property [testResult.annotations](/docs/api/class-testresult#test-result-annotations) contains annotations for each test retry.

### Miscellaneous[â€‹](#miscellaneous-4 "Direct link to Miscellaneous")

*   New option [maxRedirects](/docs/api/class-apirequest#api-request-new-context-option-max-redirects) in [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context) to control the maximum number of redirects.
*   HTML reporter now supports _NOT filtering_ via `!@my-tag` or `!my-file.spec.ts` or `!p:my-project`.

### Breaking Changes[â€‹](#breaking-changes-2 "Direct link to Breaking Changes")

*   Glob URL patterns in methods like [page.route()](/docs/api/class-page#page-route) do not support `?` and `[]` anymore. We recommend using regular expressions instead.
*   Method [route.continue()](/docs/api/class-route#route-continue) does not allow to override the `Cookie` header anymore. If a `Cookie` header is provided, it will be ignored, and the cookie will be loaded from the browser's cookie store. To set custom cookies, use [browserContext.addCookies()](/docs/api/class-browsercontext#browser-context-add-cookies).
*   macOS 13 is now deprecated and will no longer receive WebKit updates. Please upgrade to a more recent macOS version to continue benefiting from the latest WebKit improvements.

### Browser Versions[â€‹](#browser-versions-5 "Direct link to Browser Versions")

*   Chromium 136.0.7103.25
*   Mozilla Firefox 137.0
*   WebKit 18.4

This version was also tested against the following stable channels:

*   Google Chrome 135
*   Microsoft Edge 135

Version 1.51[â€‹](#version-151 "Direct link to Version 1.51")
-----------------------------------------------------------

### StorageState for indexedDB[â€‹](#storagestate-for-indexeddb "Direct link to StorageState for indexedDB")

*   New option [indexedDB](/docs/api/class-browsercontext#browser-context-storage-state-option-indexed-db) for [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state) allows to save and restore IndexedDB contents. Useful when your application uses [IndexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) to store authentication tokens, like Firebase Authentication.
    
    Here is an example following the [authentication guide](/docs/auth#basic-shared-account-in-all-tests):
    
    tests/auth.setup.ts
    
        import { test as setup, expect } from '@playwright/test';import path from 'path';const authFile = path.join(__dirname, '../playwright/.auth/user.json');setup('authenticate', async ({ page }) => {  await page.goto('/');  // ... perform authentication steps ...  // make sure to save indexedDB  await page.context().storageState({ path: authFile, indexedDB: true });});
    

### Copy as prompt[â€‹](#copy-as-prompt "Direct link to Copy as prompt")

New "Copy prompt" button on errors in the HTML report, trace viewer and UI mode. Click to copy a pre-filled LLM prompt that contains the error message and useful context for fixing the error.

![Copy prompt](https://github.com/user-attachments/assets/f3654407-dd6d-4240-9845-0d96df2bf30a)

### Filter visible elements[â€‹](#filter-visible-elements "Direct link to Filter visible elements")

New option [visible](/docs/api/class-locator#locator-filter-option-visible) for [locator.filter()](/docs/api/class-locator#locator-filter) allows matching only visible elements.

example.spec.ts

    test('some test', async ({ page }) => {  // Ignore invisible todo items.  const todoItems = page.getByTestId('todo-item').filter({ visible: true });  // Check there are exactly 3 visible ones.  await expect(todoItems).toHaveCount(3);});

### Git information in HTML report[â€‹](#git-information-in-html-report "Direct link to Git information in HTML report")

Set option [testConfig.captureGitInfo](/docs/api/class-testconfig#test-config-capture-git-info) to capture git information into [testConfig.metadata](/docs/api/class-testconfig#test-config-metadata).

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  captureGitInfo: { commit: true, diff: true }});

HTML report will show this information when available:

![Git information in the report](https://github.com/user-attachments/assets/f5b3f6f4-aa08-4a24-816c-7edf33ef0c37)

### Test Step improvements[â€‹](#test-step-improvements "Direct link to Test Step improvements")

A new [TestStepInfo](/docs/api/class-teststepinfo "TestStepInfo") object is now available in test steps. You can add step attachments or skip the step under some conditions.

    test('some test', async ({ page, isMobile }) => {  // Note the new "step" argument:  await test.step('here is my step', async step => {    step.skip(isMobile, 'not relevant on mobile layouts');    // ...    await step.attach('my attachment', { body: 'some text' });    // ...  });});

### Miscellaneous[â€‹](#miscellaneous-5 "Direct link to Miscellaneous")

*   New option `contrast` for methods [page.emulateMedia()](/docs/api/class-page#page-emulate-media) and [browser.newContext()](/docs/api/class-browser#browser-new-context) allows to emulate the `prefers-contrast` media feature.
*   New option [failOnStatusCode](/docs/api/class-apirequest#api-request-new-context-option-fail-on-status-code) makes all fetch requests made through the [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") throw on response codes other than 2xx and 3xx.
*   Assertion [expect(page).toHaveURL()](/docs/api/class-pageassertions#page-assertions-to-have-url) now supports a predicate.

### Browser Versions[â€‹](#browser-versions-6 "Direct link to Browser Versions")

*   Chromium 134.0.6998.35
*   Mozilla Firefox 135.0
*   WebKit 18.4

This version was also tested against the following stable channels:

*   Google Chrome 133
*   Microsoft Edge 133

Version 1.50[â€‹](#version-150 "Direct link to Version 1.50")
-----------------------------------------------------------

### Test runner[â€‹](#test-runner-1 "Direct link to Test runner")

*   New option [timeout](/docs/api/class-test#test-step-option-timeout) allows specifying a maximum run time for an individual test step. A timed-out step will fail the execution of the test.
    
        test('some test', async ({ page }) => {  await test.step('a step', async () => {    // This step can time out separately from the test  }, { timeout: 1000 });});
    
*   New method [test.step.skip()](/docs/api/class-test#test-step-skip) to disable execution of a test step.
    
        test('some test', async ({ page }) => {  await test.step('before running step', async () => {    // Normal step  });  await test.step.skip('not yet ready', async () => {    // This step is skipped  });  await test.step('after running step', async () => {    // This step still runs even though the previous one was skipped  });});
    
*   Expanded [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot-2) to allow storing of aria snapshots in separate YAML files.
    
*   Added method [expect(locator).toHaveAccessibleErrorMessage()](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-error-message) to assert the Locator points to an element with a given [aria errormessage](https://w3c.github.io/aria/#aria-errormessage).
    
*   Option [testConfig.updateSnapshots](/docs/api/class-testconfig#test-config-update-snapshots) added the configuration enum `changed`. `changed` updates only the snapshots that have changed, whereas `all` now updates all snapshots, regardless of whether there are any differences.
    
*   New option [testConfig.updateSourceMethod](/docs/api/class-testconfig#test-config-update-source-method) defines the way source code is updated when [testConfig.updateSnapshots](/docs/api/class-testconfig#test-config-update-snapshots) is configured. Added `overwrite` and `3-way` modes that write the changes into source code, on top of existing `patch` mode that creates a patch file.
    
        npx playwright test --update-snapshots=changed --update-source-method=3way
    
*   Option [testConfig.webServer](/docs/api/class-testconfig#test-config-web-server) added a `gracefulShutdown` field for specifying a process kill signal other than the default `SIGKILL`.
    
*   Exposed [testStep.attachments](/docs/api/class-teststep#test-step-attachments) from the reporter API to allow retrieval of all attachments created by that step.
    
*   New option `pathTemplate` for `toHaveScreenshot` and `toMatchAriaSnapshot` assertions in the [testConfig.expect](/docs/api/class-testconfig#test-config-expect) configuration.
    

### UI updates[â€‹](#ui-updates "Direct link to UI updates")

*   Updated default HTML reporter to improve display of attachments.
*   New button in Codegen for picking elements to produce aria snapshots.
*   Additional details (such as keys pressed) are now displayed alongside action API calls in traces.
*   Display of `canvas` content in traces is error-prone. Display is now disabled by default, and can be enabled via the `Display canvas content` UI setting.
*   `Call` and `Network` panels now display additional time information.

### Breaking[â€‹](#breaking "Direct link to Breaking")

*   [expect(locator).toBeEditable()](/docs/api/class-locatorassertions#locator-assertions-to-be-editable) and [locator.isEditable()](/docs/api/class-locator#locator-is-editable) now throw if the target element is not `<input>`, `<select>`, or a number of other editable elements.
*   Option [testConfig.updateSnapshots](/docs/api/class-testconfig#test-config-update-snapshots) now updates all snapshots when set to `all`, rather than only the failed/changed snapshots. Use the new enum `changed` to keep the old functionality of only updating the changed snapshots.

### Browser Versions[â€‹](#browser-versions-7 "Direct link to Browser Versions")

*   Chromium 133.0.6943.16
*   Mozilla Firefox 134.0
*   WebKit 18.2

This version was also tested against the following stable channels:

*   Google Chrome 132
*   Microsoft Edge 132

Version 1.49[â€‹](#version-149 "Direct link to Version 1.49")
-----------------------------------------------------------

### Aria snapshots[â€‹](#aria-snapshots "Direct link to Aria snapshots")

New assertion [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot) verifies page structure by comparing to an expected accessibility tree, represented as YAML.

    await page.goto('https://playwright.dev');await expect(page.locator('body')).toMatchAriaSnapshot(`  - banner:    - heading /Playwright enables reliable/ [level=1]    - link "Get started"    - link "Star microsoft/playwright on GitHub"  - main:    - img "Browsers (Chromium, Firefox, WebKit)"    - heading "Any browser â€¢ Any platform â€¢ One API"`);

You can generate this assertion with [Test Generator](/docs/codegen) and update the expected snapshot with `--update-snapshots` command line flag.

Learn more in the [aria snapshots guide](/docs/aria-snapshots).

### Test runner[â€‹](#test-runner-2 "Direct link to Test runner")

*   New option [testConfig.tsconfig](/docs/api/class-testconfig#test-config-tsconfig) allows to specify a single `tsconfig` to be used for all tests.
*   New method [test.fail.only()](/docs/api/class-test#test-fail-only) to focus on a failing test.
*   Options [testConfig.globalSetup](/docs/api/class-testconfig#test-config-global-setup) and [testConfig.globalTeardown](/docs/api/class-testconfig#test-config-global-teardown) now support multiple setups/teardowns.
*   New value `'on-first-failure'` for [testOptions.screenshot](/docs/api/class-testoptions#test-options-screenshot).
*   Added "previous" and "next" buttons to the HTML report to quickly switch between test cases.
*   New properties [testInfoError.cause](/docs/api/class-testinfoerror#test-info-error-cause) and [testError.cause](/docs/api/class-testerror#test-error-cause) mirroring [`Error.cause`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause).

### Breaking: `chrome` and `msedge` channels switch to new headless mode[â€‹](#breaking-chrome-and-msedge-channels-switch-to-new-headless-mode "Direct link to breaking-chrome-and-msedge-channels-switch-to-new-headless-mode")

This change affects you if you're using one of the following channels in your `playwright.config.ts`:

*   `chrome`, `chrome-dev`, `chrome-beta`, or `chrome-canary`
*   `msedge`, `msedge-dev`, `msedge-beta`, or `msedge-canary`

#### What do I need to do?[â€‹](#what-do-i-need-to-do "Direct link to What do I need to do?")

After updating to Playwright v1.49, run your test suite. If it still passes, you're good to go. If not, you will probably need to update your snapshots, and adapt some of your test code around PDF viewers and extensions. See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for more details.

### Other breaking changes[â€‹](#other-breaking-changes "Direct link to Other breaking changes")

*   There will be no more updates for WebKit on Ubuntu 20.04 and Debian 11. We recommend updating your OS to a later version.
*   Package `@playwright/experimental-ct-vue2` will no longer be updated.
*   Package `@playwright/experimental-ct-solid` will no longer be updated.

### Try new Chromium headless[â€‹](#try-new-chromium-headless "Direct link to Try new Chromium headless")

You can opt into the new headless mode by using `'chromium'` channel. As [official Chrome documentation puts it](https://developer.chrome.com/blog/chrome-headless-shell):

> New Headless on the other hand is the real Chrome browser, and is thus more authentic, reliable, and offers more features. This makes it more suitable for high-accuracy end-to-end web app testing or browser extension testing.

See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for the list of possible breakages you could encounter and more details on Chromium headless. Please file an issue if you see any problems after opting in.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: { ...devices['Desktop Chrome'], channel: 'chromium' },    },  ],});

### Miscellaneous[â€‹](#miscellaneous-6 "Direct link to Miscellaneous")

*   `<canvas>` elements inside a snapshot now draw a preview.
*   New method [tracing.group()](/docs/api/class-tracing#tracing-group) to visually group actions in the trace.
*   Playwright docker images switched from Node.js v20 to Node.js v22 LTS.

### Browser Versions[â€‹](#browser-versions-8 "Direct link to Browser Versions")

*   Chromium 131.0.6778.33
*   Mozilla Firefox 132.0
*   WebKit 18.2

This version was also tested against the following stable channels:

*   Google Chrome 130
*   Microsoft Edge 130

Version 1.48[â€‹](#version-148 "Direct link to Version 1.48")
-----------------------------------------------------------

### WebSocket routing[â€‹](#websocket-routing "Direct link to WebSocket routing")

New methods [page.routeWebSocket()](/docs/api/class-page#page-route-web-socket) and [browserContext.routeWebSocket()](/docs/api/class-browsercontext#browser-context-route-web-socket) allow to intercept, modify and mock WebSocket connections initiated in the page. Below is a simple example that mocks WebSocket communication by responding to a `"request"` with a `"response"`.

    await page.routeWebSocket('/ws', ws => {  ws.onMessage(message => {    if (message === 'request')      ws.send('response');  });});

See [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute") for more details.

### UI updates[â€‹](#ui-updates-1 "Direct link to UI updates")

*   New "copy" buttons for annotations and test location in the HTML report.
*   Route method calls like [route.fulfill()](/docs/api/class-route#route-fulfill) are not shown in the report and trace viewer anymore. You can see which network requests were routed in the network tab instead.
*   New "Copy as cURL" and "Copy as fetch" buttons for requests in the network tab.

### Miscellaneous[â€‹](#miscellaneous-7 "Direct link to Miscellaneous")

*   Option [form](/docs/api/class-apirequestcontext#api-request-context-fetch-option-form) and similar ones now accept [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData).
*   New method [page.requestGC()](/docs/api/class-page#page-request-gc) may help detect memory leaks.
*   New option [location](/docs/api/class-test#test-step-option-location) to pass custom step location.
*   Requests made by [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") now record detailed timing and security information in the HAR.

### Browser Versions[â€‹](#browser-versions-9 "Direct link to Browser Versions")

*   Chromium 130.0.6723.19
*   Mozilla Firefox 130.0
*   WebKit 18.0

This version was also tested against the following stable channels:

*   Google Chrome 129
*   Microsoft Edge 129

Version 1.47[â€‹](#version-147 "Direct link to Version 1.47")
-----------------------------------------------------------

### Network Tab improvements[â€‹](#network-tab-improvements "Direct link to Network Tab improvements")

The Network tab in the UI mode and trace viewer has several nice improvements:

*   filtering by asset type and URL
*   better display of query string parameters
*   preview of font assets

![Network tab now has filters](https://github.com/user-attachments/assets/4bd1b67d-90bd-438b-a227-00b9e86872e2)

### `--tsconfig` CLI option[â€‹](#--tsconfig-cli-option "Direct link to --tsconfig-cli-option")

By default, Playwright will look up the closest tsconfig for each imported file using a heuristic. You can now specify a single tsconfig file in the command line, and Playwright will use it for all imported files, not only test files:

    # Pass a specific tsconfignpx playwright test --tsconfig tsconfig.test.json

### [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") now accepts [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) and `string` as query parameters[â€‹](#apirequestcontext-now-accepts-urlsearchparams-and-string-as-query-parameters "Direct link to apirequestcontext-now-accepts-urlsearchparams-and-string-as-query-parameters")

You can now pass [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) and `string` as query parameters to [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext"):

    test('query params', async ({ request }) => {  const searchParams = new URLSearchParams();  searchParams.set('userId', 1);  const response = await request.get(      'https://jsonplaceholder.typicode.com/posts',      {        params: searchParams // or as a string: 'userId=1'      }  );  // ...});

### Miscellaneous[â€‹](#miscellaneous-8 "Direct link to Miscellaneous")

*   The `mcr.microsoft.com/playwright:v1.47.0` now serves a Playwright image based on Ubuntu 24.04 Noble. To use the 22.04 jammy-based image, please use `mcr.microsoft.com/playwright:v1.47.0-jammy` instead.
*   New options [behavior](/docs/api/class-page#page-remove-all-listeners-option-behavior), [behavior](/docs/api/class-browser#browser-remove-all-listeners-option-behavior) and [behavior](/docs/api/class-browsercontext#browser-context-remove-all-listeners-option-behavior) to wait for ongoing listeners to complete.
*   TLS client certificates can now be passed from memory by passing [clientCertificates.cert](/docs/api/class-browser#browser-new-context-option-client-certificates) and [clientCertificates.key](/docs/api/class-browser#browser-new-context-option-client-certificates) as buffers instead of file paths.
*   Attachments with a `text/html` content type can now be opened in a new tab in the HTML report. This is useful for including third-party reports or other HTML content in the Playwright test report and distributing it to your team.
*   [noWaitAfter](/docs/api/class-locator#locator-select-option-option-no-wait-after) option in [locator.selectOption()](/docs/api/class-locator#locator-select-option) was deprecated.
*   We've seen reports of WebGL in Webkit misbehaving on GitHub Actions `macos-13`. We recommend upgrading GitHub Actions to `macos-14`.

### Browser Versions[â€‹](#browser-versions-10 "Direct link to Browser Versions")

*   Chromium 129.0.6668.29
*   Mozilla Firefox 130.0
*   WebKit 18.0

This version was also tested against the following stable channels:

*   Google Chrome 128
*   Microsoft Edge 128

Version 1.46[â€‹](#version-146 "Direct link to Version 1.46")
-----------------------------------------------------------

### TLS Client Certificates[â€‹](#tls-client-certificates "Direct link to TLS Client Certificates")

Playwright now allows you to supply client-side certificates, so that server can verify them, as specified by TLS Client Authentication.

The following snippet sets up a client certificate for `https://example.com`:

    import { defineConfig } from '@playwright/test';export default defineConfig({  // ...  use: {    clientCertificates: [{      origin: 'https://example.com',      certPath: './cert.pem',      keyPath: './key.pem',      passphrase: 'mysecretpassword',    }],  },  // ...});

You can also provide client certificates to a particular [test project](/docs/api/class-testproject#test-project-use) or as a parameter of [browser.newContext()](/docs/api/class-browser#browser-new-context) and [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context).

### `--only-changed` cli option[â€‹](#--only-changed-cli-option "Direct link to --only-changed-cli-option")

New CLI option `--only-changed` will only run test files that have been changed since the last git commit or from a specific git "ref". This will also run all test files that import any changed files.

    # Only run test files with uncommitted changesnpx playwright test --only-changed# Only run test files changed relative to the "main" branchnpx playwright test --only-changed=main

### Component Testing: New `router` fixture[â€‹](#component-testing-new-router-fixture "Direct link to component-testing-new-router-fixture")

This release introduces an experimental `router` fixture to intercept and handle network requests in component testing. There are two ways to use the router fixture:

*   Call `router.route(url, handler)` that behaves similarly to [page.route()](/docs/api/class-page#page-route).
*   Call `router.use(handlers)` and pass [MSW library](https://mswjs.io) request handlers to it.

Here is an example of reusing your existing MSW handlers in the test.

    import { handlers } from '@src/mocks/handlers';test.beforeEach(async ({ router }) => {  // install common handlers before each test  await router.use(...handlers);});test('example test', async ({ mount }) => {  // test as usual, your handlers are active  // ...});

This fixture is only available in [component tests](/docs/test-components#handling-network-requests).

### UI Mode / Trace Viewer Updates[â€‹](#ui-mode--trace-viewer-updates "Direct link to UI Mode / Trace Viewer Updates")

*   Test annotations are now shown in UI mode.
*   Content of text attachments is now rendered inline in the attachments pane.
*   New setting to show/hide routing actions like [route.continue()](/docs/api/class-route#route-continue).
*   Request method and status are shown in the network details tab.
*   New button to copy source file location to clipboard.
*   Metadata pane now displays the `baseURL`.

### Miscellaneous[â€‹](#miscellaneous-9 "Direct link to Miscellaneous")

*   New `maxRetries` option in [apiRequestContext.fetch()](/docs/api/class-apirequestcontext#api-request-context-fetch) which retries on the `ECONNRESET` network error.
*   New option to [box a fixture](/docs/test-fixtures#box-fixtures) to minimize the fixture exposure in test reports and error messages.
*   New option to provide a [custom fixture title](/docs/test-fixtures#custom-fixture-title) to be used in test reports and error messages.

### Browser Versions[â€‹](#browser-versions-11 "Direct link to Browser Versions")

*   Chromium 128.0.6613.18
*   Mozilla Firefox 128.0
*   WebKit 18.0

This version was also tested against the following stable channels:

*   Google Chrome 127
*   Microsoft Edge 127

Version 1.45[â€‹](#version-145 "Direct link to Version 1.45")
-----------------------------------------------------------

### Clock[â€‹](#clock "Direct link to Clock")

Utilizing the new [Clock](/docs/api/class-clock "Clock") API allows to manipulate and control time within tests to verify time-related behavior. This API covers many common scenarios, including:

*   testing with predefined time;
*   keeping consistent time and timers;
*   monitoring inactivity;
*   ticking through time manually.

    // Initialize clock and let the page load naturally.await page.clock.install({ time: new Date('2024-02-02T08:00:00') });await page.goto('http://localhost:3333');// Pretend that the user closed the laptop lid and opened it again at 10am,// Pause the time once reached that point.await page.clock.pauseAt(new Date('2024-02-02T10:00:00'));// Assert the page state.await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:00:00 AM');// Close the laptop lid again and open it at 10:30am.await page.clock.fastForward('30:00');await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:30:00 AM');

See [the clock guide](/docs/clock) for more details.

### Test runner[â€‹](#test-runner-3 "Direct link to Test runner")

*   New CLI option `--fail-on-flaky-tests` that sets exit code to `1` upon any flaky tests. Note that by default, the test runner exits with code `0` when all failed tests recovered upon a retry. With this option, the test run will fail in such case.
    
*   New environment variable `PLAYWRIGHT_FORCE_TTY` controls whether built-in `list`, `line` and `dot` reporters assume a live terminal. For example, this could be useful to disable tty behavior when your CI environment does not handle ANSI control sequences well. Alternatively, you can enable tty behavior even when to live terminal is present, if you plan to post-process the output and handle control sequences.
    
        # Avoid TTY features that output ANSI control sequencesPLAYWRIGHT_FORCE_TTY=0 npx playwright test# Enable TTY features, assuming a terminal width 80PLAYWRIGHT_FORCE_TTY=80 npx playwright test
    
*   New options [testConfig.respectGitIgnore](/docs/api/class-testconfig#test-config-respect-git-ignore) and [testProject.respectGitIgnore](/docs/api/class-testproject#test-project-respect-git-ignore) control whether files matching `.gitignore` patterns are excluded when searching for tests.
    
*   New property `timeout` is now available for custom expect matchers. This property takes into account `playwright.config.ts` and `expect.configure()`.
    
        import { expect as baseExpect } from '@playwright/test';export const expect = baseExpect.extend({  async toHaveAmount(locator: Locator, expected: number, options?: { timeout?: number }) {    // When no timeout option is specified, use the config timeout.    const timeout = options?.timeout ?? this.timeout;    // ... implement the assertion ...  },});
    

### Miscellaneous[â€‹](#miscellaneous-10 "Direct link to Miscellaneous")

*   Method [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) now supports uploading a directory for `<input type=file webkitdirectory>` elements.
    
        await page.getByLabel('Upload directory').setInputFiles(path.join(__dirname, 'mydir'));
    
*   Multiple methods like [locator.click()](/docs/api/class-locator#locator-click) or [locator.press()](/docs/api/class-locator#locator-press) now support a `ControlOrMeta` modifier key. This key maps to `Meta` on macOS and maps to `Control` on Windows and Linux.
    
        // Press the common keyboard shortcut Control+S or Meta+S to trigger a "Save" operation.await page.keyboard.press('ControlOrMeta+S');
    
*   New property `httpCredentials.send` in [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context) that allows to either always send the `Authorization` header or only send it in response to `401 Unauthorized`.
    
*   New option `reason` in [apiRequestContext.dispose()](/docs/api/class-apirequestcontext#api-request-context-dispose) that will be included in the error message of ongoing operations interrupted by the context disposal.
    
*   New option `host` in [browserType.launchServer()](/docs/api/class-browsertype#browser-type-launch-server) allows to accept websocket connections on a specific address instead of unspecified `0.0.0.0`.
    
*   Playwright now supports Chromium, Firefox and WebKit on Ubuntu 24.04.
    
*   v1.45 is the last release to receive WebKit update for macOS 12 Monterey. Please update macOS to keep using the latest WebKit.
    

### Browser Versions[â€‹](#browser-versions-12 "Direct link to Browser Versions")

*   Chromium 127.0.6533.5
*   Mozilla Firefox 127.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 126
*   Microsoft Edge 126

Version 1.44[â€‹](#version-144 "Direct link to Version 1.44")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-3 "Direct link to New APIs")

**Accessibility assertions**

*   [expect(locator).toHaveAccessibleName()](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name) checks if the element has the specified accessible name:
    
        const locator = page.getByRole('button');await expect(locator).toHaveAccessibleName('Submit');
    
*   [expect(locator).toHaveAccessibleDescription()](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description) checks if the element has the specified accessible description:
    
        const locator = page.getByRole('button');await expect(locator).toHaveAccessibleDescription('Upload a photo');
    
*   [expect(locator).toHaveRole()](/docs/api/class-locatorassertions#locator-assertions-to-have-role) checks if the element has the specified ARIA role:
    
        const locator = page.getByTestId('save-button');await expect(locator).toHaveRole('button');
    

**Locator handler**

*   After executing the handler added with [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler), Playwright will now wait until the overlay that triggered the handler is not visible anymore. You can opt-out of this behavior with the new `noWaitAfter` option.
*   You can use new `times` option in [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler) to specify maximum number of times the handler should be run.
*   The handler in [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler) now accepts the locator as argument.
*   New [page.removeLocatorHandler()](/docs/api/class-page#page-remove-locator-handler) method for removing previously added locator handlers.

    const locator = page.getByText('This interstitial covers the button');await page.addLocatorHandler(locator, async overlay => {  await overlay.locator('#close').click();}, { times: 3, noWaitAfter: true });// Run your tests that can be interrupted by the overlay.// ...await page.removeLocatorHandler(locator);

**Miscellaneous options**

*   [`multipart`](/docs/api/class-apirequestcontext#api-request-context-fetch-option-multipart) option in `apiRequestContext.fetch()` now accepts [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) and supports repeating fields with the same name.
    
        const formData = new FormData();formData.append('file', new File(['let x = 2024;'], 'f1.js', { type: 'text/javascript' }));formData.append('file', new File(['hello'], 'f2.txt', { type: 'text/plain' }));context.request.post('https://example.com/uploadFiles', {  multipart: formData});
    
*   `expect(callback).toPass({ intervals })` can now be configured by `expect.toPass.intervals` option globally in [testConfig.expect](/docs/api/class-testconfig#test-config-expect) or per project in [testProject.expect](/docs/api/class-testproject#test-project-expect).
    
*   `expect(page).toHaveURL(url)` now supports `ignoreCase` [option](/docs/api/class-pageassertions#page-assertions-to-have-url-option-ignore-case).
    
*   [testProject.ignoreSnapshots](/docs/api/class-testproject#test-project-ignore-snapshots) allows to configure per project whether to skip screenshot expectations.
    

**Reporter API**

*   New method [suite.entries()](/docs/api/class-suite#suite-entries) returns child test suites and test cases in their declaration order. [suite.type](/docs/api/class-suite#suite-type) and [testCase.type](/docs/api/class-testcase#test-case-type) can be used to tell apart test cases and suites in the list.
*   [Blob](/docs/test-reporters#blob-reporter) reporter now allows overriding report file path with a single option `outputFile`. The same option can also be specified as `PLAYWRIGHT_BLOB_OUTPUT_FILE` environment variable that might be more convenient on CI/CD.
*   [JUnit](/docs/test-reporters#junit-reporter) reporter now supports `includeProjectInTestName` option.

**Command line**

*   `--last-failed` CLI option to for running only tests that failed in the previous run.
    
    First run all tests:
    
        $ npx playwright testRunning 103 tests using 5 workers...2 failed  [chromium] â€º my-test.spec.ts:8:5 â€º two â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  [chromium] â€º my-test.spec.ts:13:5 â€º three â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€101 passed (30.0s)
    
    Now fix the failing tests and run Playwright again with `--last-failed` option:
    
        $ npx playwright test --last-failedRunning 2 tests using 2 workers  2 passed (1.2s)
    

### Browser Versions[â€‹](#browser-versions-13 "Direct link to Browser Versions")

*   Chromium 125.0.6422.14
*   Mozilla Firefox 125.0.1
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 124
*   Microsoft Edge 124

Version 1.43[â€‹](#version-143 "Direct link to Version 1.43")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-4 "Direct link to New APIs")

*   Method [browserContext.clearCookies()](/docs/api/class-browsercontext#browser-context-clear-cookies) now supports filters to remove only some cookies.
    
        // Clear all cookies.await context.clearCookies();// New: clear cookies with a particular name.await context.clearCookies({ name: 'session-id' });// New: clear cookies for a particular domain.await context.clearCookies({ domain: 'my-origin.com' });
    
*   New mode `retain-on-first-failure` for [testOptions.trace](/docs/api/class-testoptions#test-options-trace). In this mode, trace is recorded for the first run of each test, but not for retires. When test run fails, the trace file is retained, otherwise it is removed.
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    trace: 'retain-on-first-failure',  },});
    
*   New property [testInfo.tags](/docs/api/class-testinfo#test-info-tags) exposes test tags during test execution.
    
        test('example', async ({ page }) => {  console.log(test.info().tags);});
    
*   New method [locator.contentFrame()](/docs/api/class-locator#locator-content-frame) converts a [Locator](/docs/api/class-locator "Locator") object to a [FrameLocator](/docs/api/class-framelocator "FrameLocator"). This can be useful when you have a [Locator](/docs/api/class-locator "Locator") object obtained somewhere, and later on would like to interact with the content inside the frame.
    
        const locator = page.locator('iframe[name="embedded"]');// ...const frameLocator = locator.contentFrame();await frameLocator.getByRole('button').click();
    
*   New method [frameLocator.owner()](/docs/api/class-framelocator#frame-locator-owner) converts a [FrameLocator](/docs/api/class-framelocator "FrameLocator") object to a [Locator](/docs/api/class-locator "Locator"). This can be useful when you have a [FrameLocator](/docs/api/class-framelocator "FrameLocator") object obtained somewhere, and later on would like to interact with the `iframe` element.
    
        const frameLocator = page.frameLocator('iframe[name="embedded"]');// ...const locator = frameLocator.owner();await expect(locator).toBeVisible();
    

### UI Mode Updates[â€‹](#ui-mode-updates "Direct link to UI Mode Updates")

![Playwright UI Mode](https://github.com/microsoft/playwright/assets/9881434/61ca7cfc-eb7a-4305-8b62-b6c9f098f300)

*   See tags in the test list.
*   Filter by tags by typing `@fast` or clicking on the tag itself.
*   New shortcuts:
    *   "F5" to run tests.
    *   "Shift F5" to stop running tests.
    *   "Ctrl \`" to toggle test output.

### Browser Versions[â€‹](#browser-versions-14 "Direct link to Browser Versions")

*   Chromium 124.0.6367.8
*   Mozilla Firefox 124.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 123
*   Microsoft Edge 123

Version 1.42[â€‹](#version-142 "Direct link to Version 1.42")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-5 "Direct link to New APIs")

*   New method [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler) registers a callback that will be invoked when specified element becomes visible and may block Playwright actions. The callback can get rid of the overlay. Here is an example that closes a cookie dialog when it appears:

    // Setup the handler.await page.addLocatorHandler(    page.getByRole('heading', { name: 'Hej! You are in control of your cookies.' }),    async () => {      await page.getByRole('button', { name: 'Accept all' }).click();    });// Write the test as usual.await page.goto('https://www.ikea.com/');await page.getByRole('link', { name: 'Collection of blue and white' }).click();await expect(page.getByRole('heading', { name: 'Light and easy' })).toBeVisible();

*   `expect(callback).toPass()` timeout can now be configured by `expect.toPass.timeout` option [globally](/docs/api/class-testconfig#test-config-expect) or in [project config](/docs/api/class-testproject#test-project-expect)
*   [electronApplication.on('console')](/docs/api/class-electronapplication#electron-application-event-console) event is emitted when Electron main process calls console API methods.

    electronApp.on('console', async msg => {  const values = [];  for (const arg of msg.args())    values.push(await arg.jsonValue());  console.log(...values);});await electronApp.evaluate(() => console.log('hello', 5, { foo: 'bar' }));

*   [New syntax](/docs/test-annotations#tag-tests) for adding tags to the tests (@-tokens in the test title are still supported):

    test('test customer login', {  tag: ['@fast', '@login'],}, async ({ page }) => {  // ...});

Use `--grep` command line option to run only tests with certain tags.

    npx playwright test --grep @fast

*   `--project` command line [flag](/docs/test-cli#all-options) now supports '\*' wildcard:

    npx playwright test --project='*mobile*'

*   [New syntax](/docs/test-annotations#annotate-tests) for test annotations:

    test('test full report', {  annotation: [    { type: 'issue', description: 'https://github.com/microsoft/playwright/issues/23180' },    { type: 'docs', description: 'https://playwright.dev/docs/test-annotations#tag-tests' },  ],}, async ({ page }) => {  // ...});

*   [page.pdf()](/docs/api/class-page#page-pdf) accepts two new options [`tagged`](/docs/api/class-page#page-pdf-option-tagged) and [`outline`](/docs/api/class-page#page-pdf-option-outline).

### Announcements[â€‹](#announcements "Direct link to Announcements")

*   âš ï¸ Ubuntu 18 is not supported anymore.

### Browser Versions[â€‹](#browser-versions-15 "Direct link to Browser Versions")

*   Chromium 123.0.6312.4
*   Mozilla Firefox 123.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 122
*   Microsoft Edge 123

Version 1.41[â€‹](#version-141 "Direct link to Version 1.41")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-6 "Direct link to New APIs")

*   New method [page.unrouteAll()](/docs/api/class-page#page-unroute-all) removes all routes registered by [page.route()](/docs/api/class-page#page-route) and [page.routeFromHAR()](/docs/api/class-page#page-route-from-har). Optionally allows to wait for ongoing routes to finish, or ignore any errors from them.
*   New method [browserContext.unrouteAll()](/docs/api/class-browsercontext#browser-context-unroute-all) removes all routes registered by [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [browserContext.routeFromHAR()](/docs/api/class-browsercontext#browser-context-route-from-har). Optionally allows to wait for ongoing routes to finish, or ignore any errors from them.
*   New options [style](/docs/api/class-page#page-screenshot-option-style) in [page.screenshot()](/docs/api/class-page#page-screenshot) and [style](/docs/api/class-locator#locator-screenshot-option-style) in [locator.screenshot()](/docs/api/class-locator#locator-screenshot) to add custom CSS to the page before taking a screenshot.
*   New option `stylePath` for methods [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) and [expect(locator).toHaveScreenshot()](/docs/api/class-locatorassertions#locator-assertions-to-have-screenshot-1) to apply a custom stylesheet while making the screenshot.
*   New `fileName` option for [Blob reporter](/docs/test-reporters#blob-reporter), to specify the name of the report to be created.

### Browser Versions[â€‹](#browser-versions-16 "Direct link to Browser Versions")

*   Chromium 121.0.6167.57
*   Mozilla Firefox 121.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 120
*   Microsoft Edge 120

Version 1.40[â€‹](#version-140 "Direct link to Version 1.40")
-----------------------------------------------------------

### Test Generator Update[â€‹](#test-generator-update "Direct link to Test Generator Update")

![Playwright Test Generator](https://github.com/microsoft/playwright/assets/9881434/e8d67e2e-f36d-4301-8631-023948d3e190)

New tools to generate assertions:

*   "Assert visibility" tool generates [expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible).
*   "Assert value" tool generates [expect(locator).toHaveValue()](/docs/api/class-locatorassertions#locator-assertions-to-have-value).
*   "Assert text" tool generates [expect(locator).toContainText()](/docs/api/class-locatorassertions#locator-assertions-to-contain-text).

Here is an example of a generated test with assertions:

    import { test, expect } from '@playwright/test';test('test', async ({ page }) => {  await page.goto('https://playwright.dev/');  await page.getByRole('link', { name: 'Get started' }).click();  await expect(page.getByLabel('Breadcrumbs').getByRole('list')).toContainText('Installation');  await expect(page.getByLabel('Search')).toBeVisible();  await page.getByLabel('Search').click();  await page.getByPlaceholder('Search docs').fill('locator');  await expect(page.getByPlaceholder('Search docs')).toHaveValue('locator');});

### New APIs[â€‹](#new-apis-7 "Direct link to New APIs")

*   Options [reason](/docs/api/class-page#page-close-option-reason) in [page.close()](/docs/api/class-page#page-close), [reason](/docs/api/class-browsercontext#browser-context-close-option-reason) in [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) and [reason](/docs/api/class-browser#browser-close-option-reason) in [browser.close()](/docs/api/class-browser#browser-close). Close reason is reported for all operations interrupted by the closure.
*   Option [firefoxUserPrefs](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-firefox-user-prefs) in [browserType.launchPersistentContext()](/docs/api/class-browsertype#browser-type-launch-persistent-context).

### Other Changes[â€‹](#other-changes "Direct link to Other Changes")

*   Methods [download.path()](/docs/api/class-download#download-path) and [download.createReadStream()](/docs/api/class-download#download-create-read-stream) throw an error for failed and cancelled downloads.
*   Playwright [docker image](/docs/docker) now comes with Node.js v20.

### Browser Versions[â€‹](#browser-versions-17 "Direct link to Browser Versions")

*   Chromium 120.0.6099.28
*   Mozilla Firefox 119.0
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 119
*   Microsoft Edge 119

Version 1.39[â€‹](#version-139 "Direct link to Version 1.39")
-----------------------------------------------------------

### Add custom matchers to your expect[â€‹](#add-custom-matchers-to-your-expect "Direct link to Add custom matchers to your expect")

You can extend Playwright assertions by providing custom matchers. These matchers will be available on the expect object.

test.spec.ts

    import { expect as baseExpect } from '@playwright/test';export const expect = baseExpect.extend({  async toHaveAmount(locator: Locator, expected: number, options?: { timeout?: number }) {    // ... see documentation for how to write matchers.  },});test('pass', async ({ page }) => {  await expect(page.getByTestId('cart')).toHaveAmount(5);});

See the documentation [for a full example](/docs/test-assertions#add-custom-matchers-using-expectextend).

### Merge test fixtures[â€‹](#merge-test-fixtures "Direct link to Merge test fixtures")

You can now merge test fixtures from multiple files or modules:

fixtures.ts

    import { mergeTests } from '@playwright/test';import { test as dbTest } from 'database-test-utils';import { test as a11yTest } from 'a11y-test-utils';export const test = mergeTests(dbTest, a11yTest);

test.spec.ts

    import { test } from './fixtures';test('passes', async ({ database, page, a11y }) => {  // use database and a11y fixtures.});

### Merge custom expect matchers[â€‹](#merge-custom-expect-matchers "Direct link to Merge custom expect matchers")

You can now merge custom expect matchers from multiple files or modules:

fixtures.ts

    import { mergeTests, mergeExpects } from '@playwright/test';import { test as dbTest, expect as dbExpect } from 'database-test-utils';import { test as a11yTest, expect as a11yExpect } from 'a11y-test-utils';export const test = mergeTests(dbTest, a11yTest);export const expect = mergeExpects(dbExpect, a11yExpect);

test.spec.ts

    import { test, expect } from './fixtures';test('passes', async ({ page, database }) => {  await expect(database).toHaveDatabaseUser('admin');  await expect(page).toPassA11yAudit();});

### Hide implementation details: box test steps[â€‹](#hide-implementation-details-box-test-steps "Direct link to Hide implementation details: box test steps")

You can mark a [test.step()](/docs/api/class-test#test-step) as "boxed" so that errors inside it point to the step call site.

    async function login(page) {  await test.step('login', async () => {    // ...  }, { box: true });  // Note the "box" option here.}

    Error: Timed out 5000ms waiting for expect(locator).toBeVisible()  ... error details omitted ...  14 |   await page.goto('https://github.com/login');> 15 |   await login(page);     |         ^  16 | });

See [test.step()](/docs/api/class-test#test-step) documentation for a full example.

### New APIs[â€‹](#new-apis-8 "Direct link to New APIs")

*   [expect(locator).toHaveAttribute()](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute-2)

### Browser Versions[â€‹](#browser-versions-18 "Direct link to Browser Versions")

*   Chromium 119.0.6045.9
*   Mozilla Firefox 118.0.1
*   WebKit 17.4

This version was also tested against the following stable channels:

*   Google Chrome 118
*   Microsoft Edge 118

Version 1.38[â€‹](#version-138 "Direct link to Version 1.38")
-----------------------------------------------------------

### UI Mode Updates[â€‹](#ui-mode-updates-1 "Direct link to UI Mode Updates")

![Playwright UI Mode](https://github.com/microsoft/playwright/assets/746130/8ba27be0-58fd-4f62-8561-950480610369)

1.  Zoom into time range.
2.  Network panel redesign.

### New APIs[â€‹](#new-apis-9 "Direct link to New APIs")

*   [browserContext.on('weberror')](/docs/api/class-browsercontext#browser-context-event-web-error)
*   [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially)
*   The [reporter.onEnd()](/docs/api/class-reporter#reporter-on-end) now reports `startTime` and total run `duration`.

### Deprecations[â€‹](#deprecations "Direct link to Deprecations")

*   The following methods were deprecated: [page.type()](/docs/api/class-page#page-type), [frame.type()](/docs/api/class-frame#frame-type), [locator.type()](/docs/api/class-locator#locator-type) and [elementHandle.type()](/docs/api/class-elementhandle#element-handle-type). Please use [locator.fill()](/docs/api/class-locator#locator-fill) instead which is much faster. Use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially) only if there is a special keyboard handling on the page, and you need to press keys one-by-one.

### Breaking Changes: Playwright no longer downloads browsers automatically[â€‹](#breaking-changes-playwright-no-longer-downloads-browsers-automatically "Direct link to Breaking Changes: Playwright no longer downloads browsers automatically")

> **Note**: If you are using `@playwright/test` package, this change does not affect you.

Playwright recommends to use `@playwright/test` package and download browsers via `npx playwright install` command. If you are following this recommendation, nothing has changed for you.

However, up to v1.38, installing the `playwright` package instead of `@playwright/test` did automatically download browsers. This is no longer the case, and we recommend to explicitly download browsers via `npx playwright install` command.

**v1.37 and earlier**

`playwright` package was downloading browsers during `npm install`, while `@playwright/test` was not.

**v1.38 and later**

`playwright` and `@playwright/test` packages do not download browsers during `npm install`.

**Recommended migration**

Run `npx playwright install` to download browsers after `npm install`. For example, in your CI configuration:

    - run: npm ci- run: npx playwright install --with-deps

**Alternative migration option - not recommended**

Add `@playwright/browser-chromium`, `@playwright/browser-firefox` and `@playwright/browser-webkit` as a dependency. These packages download respective browsers during `npm install`. Make sure you keep the version of all playwright packages in sync:

    // package.json{  "devDependencies": {    "playwright": "1.38.0",    "@playwright/browser-chromium": "1.38.0",    "@playwright/browser-firefox": "1.38.0",    "@playwright/browser-webkit": "1.38.0"  }}

### Browser Versions[â€‹](#browser-versions-19 "Direct link to Browser Versions")

*   Chromium 117.0.5938.62
*   Mozilla Firefox 117.0
*   WebKit 17.0

This version was also tested against the following stable channels:

*   Google Chrome 116
*   Microsoft Edge 116

Version 1.37[â€‹](#version-137 "Direct link to Version 1.37")
-----------------------------------------------------------

### New `npx playwright merge-reports` tool[â€‹](#new-npx-playwright-merge-reports-tool "Direct link to new-npx-playwright-merge-reports-tool")

If you run tests on multiple shards, you can now merge all reports in a single HTML report (or any other report) using the new `merge-reports` CLI tool.

Using `merge-reports` tool requires the following steps:

1.  Adding a new "blob" reporter to the config when running on CI:
    
    playwright.config.ts
    
        export default defineConfig({  testDir: './tests',  reporter: process.env.CI ? 'blob' : 'html',});
    
    The "blob" reporter will produce ".zip" files that contain all the information about the test run.
    
2.  Copying all "blob" reports in a single shared location and running `npx playwright merge-reports`:
    

    npx playwright merge-reports --reporter html ./all-blob-reports

Read more in [our documentation](/docs/test-sharding).

### ðŸ“š Debian 12 Bookworm Support[â€‹](#-debian-12-bookworm-support "Direct link to ðŸ“š Debian 12 Bookworm Support")

Playwright now supports Debian 12 Bookworm on both x86\_64 and arm64 for Chromium, Firefox and WebKit. Let us know if you encounter any issues!

Linux support looks like this:

Ubuntu 20.04

Ubuntu 22.04

Debian 11

Debian 12

Chromium

âœ…

âœ…

âœ…

âœ…

WebKit

âœ…

âœ…

âœ…

âœ…

Firefox

âœ…

âœ…

âœ…

âœ…

### UI Mode Updates[â€‹](#ui-mode-updates-2 "Direct link to UI Mode Updates")

*   UI Mode now respects project dependencies. You can control which dependencies to respect by checking/unchecking them in a projects list.
*   Console logs from the test are now displayed in the Console tab.

### Browser Versions[â€‹](#browser-versions-20 "Direct link to Browser Versions")

*   Chromium 116.0.5845.82
*   Mozilla Firefox 115.0
*   WebKit 17.0

This version was also tested against the following stable channels:

*   Google Chrome 115
*   Microsoft Edge 115

Version 1.36[â€‹](#version-136 "Direct link to Version 1.36")
-----------------------------------------------------------

ðŸï¸ Summer maintenance release.

### Browser Versions[â€‹](#browser-versions-21 "Direct link to Browser Versions")

*   Chromium 115.0.5790.75
*   Mozilla Firefox 115.0
*   WebKit 17.0

This version was also tested against the following stable channels:

*   Google Chrome 114
*   Microsoft Edge 114

Version 1.35[â€‹](#version-135 "Direct link to Version 1.35")
-----------------------------------------------------------

### Highlights[â€‹](#highlights-2 "Direct link to Highlights")

*   UI mode is now available in VSCode Playwright extension via a new "Show trace viewer" button:
    
    ![Playwright UI Mode](https://github.com/microsoft/playwright/assets/746130/13094128-259b-477a-8bbb-c1181178e8a2)
    
*   UI mode and trace viewer mark network requests handled with [page.route()](/docs/api/class-page#page-route) and [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) handlers, as well as those issued via the [API testing](/docs/api-testing):
    
    ![Trace Viewer](https://github.com/microsoft/playwright/assets/746130/0df2d4b6-faa3-465c-aff3-c435b430bfe1)
    
*   New option `maskColor` for methods [page.screenshot()](/docs/api/class-page#page-screenshot), [locator.screenshot()](/docs/api/class-locator#locator-screenshot), [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) and [expect(locator).toHaveScreenshot()](/docs/api/class-locatorassertions#locator-assertions-to-have-screenshot-1) to change default masking color:
    
        await page.goto('https://playwright.dev');await expect(page).toHaveScreenshot({  mask: [page.locator('img')],  maskColor: '#00FF00', // green});
    
*   New `uninstall` CLI command to uninstall browser binaries:
    
        $ npx playwright uninstall # remove browsers installed by this installation$ npx playwright uninstall --all # remove all ever-install Playwright browsers
    
*   Both UI mode and trace viewer now could be opened in a browser tab:
    
        $ npx playwright test --ui-port 0 # open UI mode in a tab on a random port$ npx playwright show-trace --port 0 # open trace viewer in tab on a random port
    

### âš ï¸ Breaking changes[â€‹](#ï¸-breaking-changes "Direct link to âš ï¸ Breaking changes")

*   `playwright-core` binary got renamed from `playwright` to `playwright-core`. So if you use `playwright-core` CLI, make sure to update the name:
    
        $ npx playwright-core install # the new way to install browsers when using playwright-core
    
    This change **does not** affect `@playwright/test` and `playwright` package users.
    

### Browser Versions[â€‹](#browser-versions-22 "Direct link to Browser Versions")

*   Chromium 115.0.5790.13
*   Mozilla Firefox 113.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 114
*   Microsoft Edge 114

Version 1.34[â€‹](#version-134 "Direct link to Version 1.34")
-----------------------------------------------------------

### Highlights[â€‹](#highlights-3 "Direct link to Highlights")

*   UI Mode now shows steps, fixtures and attachments: ![UI Mode attachments](https://github.com/microsoft/playwright/assets/746130/1d280419-d79a-4a56-b2dc-54d631281d56)
    
*   New property [testProject.teardown](/docs/api/class-testproject#test-project-teardown) to specify a project that needs to run after this and all dependent projects have finished. Teardown is useful to cleanup any resources acquired by this project.
    
    A common pattern would be a `setup` dependency with a corresponding `teardown`:
    
    playwright.config.ts
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'setup',      testMatch: /global.setup\.ts/,      teardown: 'teardown',    },    {      name: 'teardown',      testMatch: /global.teardown\.ts/,    },    {      name: 'chromium',      use: devices['Desktop Chrome'],      dependencies: ['setup'],    },    {      name: 'firefox',      use: devices['Desktop Firefox'],      dependencies: ['setup'],    },    {      name: 'webkit',      use: devices['Desktop Safari'],      dependencies: ['setup'],    },  ],});
    
*   New method [`expect.configure`](/docs/test-assertions#expectconfigure) to create pre-configured expect instance with its own defaults such as `timeout` and `soft`.
    
        const slowExpect = expect.configure({ timeout: 10000 });await slowExpect(locator).toHaveText('Submit');// Always do soft assertions.const softExpect = expect.configure({ soft: true });
    
*   New options `stderr` and `stdout` in [testConfig.webServer](/docs/api/class-testconfig#test-config-web-server) to configure output handling:
    
    playwright.config.ts
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  // Run your local dev server before starting the tests  webServer: {    command: 'npm run start',    url: 'http://127.0.0.1:3000',    reuseExistingServer: !process.env.CI,    stdout: 'pipe',    stderr: 'pipe',  },});
    
*   New [locator.and()](/docs/api/class-locator#locator-and) to create a locator that matches both locators.
    
        const button = page.getByRole('button').and(page.getByTitle('Subscribe'));
    
*   New events [browserContext.on('console')](/docs/api/class-browsercontext#browser-context-event-console) and [browserContext.on('dialog')](/docs/api/class-browsercontext#browser-context-event-dialog) to subscribe to any dialogs and console messages from any page from the given browser context. Use the new methods [consoleMessage.page()](/docs/api/class-consolemessage#console-message-page) and [dialog.page()](/docs/api/class-dialog#dialog-page) to pin-point event source.
    

### âš ï¸ Breaking changes[â€‹](#ï¸-breaking-changes-1 "Direct link to âš ï¸ Breaking changes")

*   `npx playwright test` no longer works if you install both `playwright` and `@playwright/test`. There's no need to install both, since you can always import browser automation APIs from `@playwright/test` directly:
    
    automation.ts
    
        import { chromium, firefox, webkit } from '@playwright/test';/* ... */
    
*   Node.js 14 is no longer supported since it [reached its end-of-life](https://nodejs.dev/en/about/releases/) on April 30, 2023.
    

### Browser Versions[â€‹](#browser-versions-23 "Direct link to Browser Versions")

*   Chromium 114.0.5735.26
*   Mozilla Firefox 113.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 113
*   Microsoft Edge 113

Version 1.33[â€‹](#version-133 "Direct link to Version 1.33")
-----------------------------------------------------------

### Locators Update[â€‹](#locators-update "Direct link to Locators Update")

*   Use [locator.or()](/docs/api/class-locator#locator-or) to create a locator that matches either of the two locators. Consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly:
    
        const newEmail = page.getByRole('button', { name: 'New email' });const dialog = page.getByText('Confirm security settings');await expect(newEmail.or(dialog)).toBeVisible();if (await dialog.isVisible())  await page.getByRole('button', { name: 'Dismiss' }).click();await newEmail.click();
    
*   Use new options [hasNot](/docs/api/class-locator#locator-filter-option-has-not) and [hasNotText](/docs/api/class-locator#locator-filter-option-has-not-text) in [locator.filter()](/docs/api/class-locator#locator-filter) to find elements that **do not match** certain conditions.
    
        const rowLocator = page.locator('tr');await rowLocator    .filter({ hasNotText: 'text in column 1' })    .filter({ hasNot: page.getByRole('button', { name: 'column 2 button' }) })    .screenshot();
    
*   Use new web-first assertion [expect(locator).toBeAttached()](/docs/api/class-locatorassertions#locator-assertions-to-be-attached) to ensure that the element is present in the page's DOM. Do not confuse with the [expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible) that ensures that element is both attached & visible.
    

### New APIs[â€‹](#new-apis-10 "Direct link to New APIs")

*   [locator.or()](/docs/api/class-locator#locator-or)
*   New option [hasNot](/docs/api/class-locator#locator-filter-option-has-not) in [locator.filter()](/docs/api/class-locator#locator-filter)
*   New option [hasNotText](/docs/api/class-locator#locator-filter-option-has-not-text) in [locator.filter()](/docs/api/class-locator#locator-filter)
*   [expect(locator).toBeAttached()](/docs/api/class-locatorassertions#locator-assertions-to-be-attached)
*   New option [timeout](/docs/api/class-route#route-fetch-option-timeout) in [route.fetch()](/docs/api/class-route#route-fetch)
*   [reporter.onExit()](/docs/api/class-reporter#reporter-on-exit)

### âš ï¸ Breaking change[â€‹](#ï¸-breaking-change "Direct link to âš ï¸ Breaking change")

*   The `mcr.microsoft.com/playwright:v1.33.0` now serves a Playwright image based on Ubuntu Jammy. To use the focal-based image, please use `mcr.microsoft.com/playwright:v1.33.0-focal` instead.

### Browser Versions[â€‹](#browser-versions-24 "Direct link to Browser Versions")

*   Chromium 113.0.5672.53
*   Mozilla Firefox 112.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 112
*   Microsoft Edge 112

Version 1.32[â€‹](#version-132 "Direct link to Version 1.32")
-----------------------------------------------------------

### Introducing UI Mode (preview)[â€‹](#introducing-ui-mode-preview "Direct link to Introducing UI Mode (preview)")

New [UI Mode](/docs/test-ui-mode) lets you explore, run and debug tests. Comes with a built-in watch mode.

![Playwright UI Mode](https://user-images.githubusercontent.com/746130/227004851-3901a691-4f8e-43d6-8d6b-cbfeafaeb999.png)

Engage with a new flag `--ui`:

    npx playwright test --ui

### New APIs[â€‹](#new-apis-11 "Direct link to New APIs")

*   New options [updateMode](/docs/api/class-page#page-route-from-har-option-update-mode) and [updateContent](/docs/api/class-page#page-route-from-har-option-update-content) in [page.routeFromHAR()](/docs/api/class-page#page-route-from-har) and [browserContext.routeFromHAR()](/docs/api/class-browsercontext#browser-context-route-from-har).
*   Chaining existing locator objects, see [locator docs](/docs/locators#matching-inside-a-locator) for details.
*   New property [testInfo.testId](/docs/api/class-testinfo#test-info-test-id).
*   New option [name](/docs/api/class-tracing#tracing-start-chunk-option-name) in method [tracing.startChunk()](/docs/api/class-tracing#tracing-start-chunk).

### âš ï¸ Breaking change in component tests[â€‹](#ï¸-breaking-change-in-component-tests "Direct link to âš ï¸ Breaking change in component tests")

Note: **component tests only**, does not affect end-to-end tests.

*   `@playwright/experimental-ct-react` now supports **React 18 only**.
*   If you're running component tests with React 16 or 17, please replace `@playwright/experimental-ct-react` with `@playwright/experimental-ct-react17`.

### Browser Versions[â€‹](#browser-versions-25 "Direct link to Browser Versions")

*   Chromium 112.0.5615.29
*   Mozilla Firefox 111.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 111
*   Microsoft Edge 111

Version 1.31[â€‹](#version-131 "Direct link to Version 1.31")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-12 "Direct link to New APIs")

*   New property [testProject.dependencies](/docs/api/class-testproject#test-project-dependencies) to configure dependencies between projects.
    
    Using dependencies allows global setup to produce traces and other artifacts, see the setup steps in the test report and more.
    
    playwright.config.ts
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'setup',      testMatch: /global.setup\.ts/,    },    {      name: 'chromium',      use: devices['Desktop Chrome'],      dependencies: ['setup'],    },    {      name: 'firefox',      use: devices['Desktop Firefox'],      dependencies: ['setup'],    },    {      name: 'webkit',      use: devices['Desktop Safari'],      dependencies: ['setup'],    },  ],});
    
*   New assertion [expect(locator).toBeInViewport()](/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport) ensures that locator points to an element that intersects viewport, according to the [intersection observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).
    
        const button = page.getByRole('button');// Make sure at least some part of element intersects viewport.await expect(button).toBeInViewport();// Make sure element is fully outside of viewport.await expect(button).not.toBeInViewport();// Make sure that at least half of the element intersects viewport.await expect(button).toBeInViewport({ ratio: 0.5 });
    

### Miscellaneous[â€‹](#miscellaneous-11 "Direct link to Miscellaneous")

*   DOM snapshots in trace viewer can be now opened in a separate window.
*   New method `defineConfig` to be used in `playwright.config`.
*   New option [maxRedirects](/docs/api/class-route#route-fetch-option-max-redirects) for method [route.fetch()](/docs/api/class-route#route-fetch).
*   Playwright now supports Debian 11 arm64.
*   Official [docker images](/docs/docker) now include Node 18 instead of Node 16.

### âš ï¸ Breaking change in component tests[â€‹](#ï¸-breaking-change-in-component-tests-1 "Direct link to âš ï¸ Breaking change in component tests")

Note: **component tests only**, does not affect end-to-end tests.

`playwright-ct.config` configuration file for [component testing](/docs/test-components) now requires calling `defineConfig`.

    // Beforeimport { type PlaywrightTestConfig, devices } from '@playwright/experimental-ct-react';const config: PlaywrightTestConfig = {  // ... config goes here ...};export default config;

Replace `config` variable definition with `defineConfig` call:

    // Afterimport { defineConfig, devices } from '@playwright/experimental-ct-react';export default defineConfig({  // ... config goes here ...});

### Browser Versions[â€‹](#browser-versions-26 "Direct link to Browser Versions")

*   Chromium 111.0.5563.19
*   Mozilla Firefox 109.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 110
*   Microsoft Edge 110

Version 1.30[â€‹](#version-130 "Direct link to Version 1.30")
-----------------------------------------------------------

### Browser Versions[â€‹](#browser-versions-27 "Direct link to Browser Versions")

*   Chromium 110.0.5481.38
*   Mozilla Firefox 108.0.2
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 109
*   Microsoft Edge 109

Version 1.29[â€‹](#version-129 "Direct link to Version 1.29")
-----------------------------------------------------------

### New APIs[â€‹](#new-apis-13 "Direct link to New APIs")

*   New method [route.fetch()](/docs/api/class-route#route-fetch) and new option `json` for [route.fulfill()](/docs/api/class-route#route-fulfill):
    
        await page.route('**/api/settings', async route => {  // Fetch original settings.  const response = await route.fetch();  // Force settings theme to a predefined value.  const json = await response.json();  json.theme = 'Solorized';  // Fulfill with modified data.  await route.fulfill({ json });});
    
*   New method [locator.all()](/docs/api/class-locator#locator-all) to iterate over all matching elements:
    
        // Check all checkboxes!const checkboxes = page.getByRole('checkbox');for (const checkbox of await checkboxes.all())  await checkbox.check();
    
*   [locator.selectOption()](/docs/api/class-locator#locator-select-option) matches now by value or label:
    
        <select multiple>  <option value="red">Red</option>  <option value="green">Green</option>  <option value="blue">Blue</option></select>
    
        await element.selectOption('Red');
    
*   Retry blocks of code until all assertions pass:
    
        await expect(async () => {  const response = await page.request.get('https://api.example.com');  await expect(response).toBeOK();}).toPass();
    
    Read more in [our documentation](/docs/test-assertions#expecttopass).
    
*   Automatically capture **full page screenshot** on test failure:
    
    playwright.config.ts
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    screenshot: {      mode: 'only-on-failure',      fullPage: true,    }  }});
    

### Miscellaneous[â€‹](#miscellaneous-12 "Direct link to Miscellaneous")

*   Playwright Test now respects [`jsconfig.json`](https://code.visualstudio.com/docs/languages/jsconfig).
*   New options `args` and `proxy` for [androidDevice.launchBrowser()](/docs/api/class-androiddevice#android-device-launch-browser).
*   Option `postData` in method [route.continue()](/docs/api/class-route#route-continue) now supports [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") values.

### Browser Versions[â€‹](#browser-versions-28 "Direct link to Browser Versions")

*   Chromium 109.0.5414.46
*   Mozilla Firefox 107.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 108
*   Microsoft Edge 108

Version 1.28[â€‹](#version-128 "Direct link to Version 1.28")
-----------------------------------------------------------

### Playwright Tools[â€‹](#playwright-tools "Direct link to Playwright Tools")

*   **Record at Cursor in VSCode.** You can run the test, position the cursor at the end of the test and continue generating the test.

![New VSCode Extension](https://user-images.githubusercontent.com/746130/202005839-aba2eeba-217b-424d-8496-8b4f5fa72f41.png)

*   **Live Locators in VSCode.** You can hover and edit locators in VSCode to get them highlighted in the opened browser.
*   **Live Locators in CodeGen.** Generate a locator for any element on the page using "Explore" tool.

![Locator Explorer](https://user-images.githubusercontent.com/746130/201796876-01567a0b-ca61-4a9d-b12b-04786c471671.png)

*   **Codegen and Trace Viewer Dark Theme.** Automatically picked up from operating system settings.

![Dark Theme](https://user-images.githubusercontent.com/746130/201797969-603f74df-d7cf-4c56-befd-798dbd269796.png)

### Test Runner[â€‹](#test-runner-4 "Direct link to Test Runner")

*   Configure retries and test timeout for a file or a test with [test.describe.configure()](/docs/api/class-test#test-describe-configure).
    
        // Each test in the file will be retried twice and have a timeout of 20 seconds.test.describe.configure({ retries: 2, timeout: 20_000 });test('runs first', async ({ page }) => {});test('runs second', async ({ page }) => {});
    
*   Use [testProject.snapshotPathTemplate](/docs/api/class-testproject#test-project-snapshot-path-template) and [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) to configure a template controlling location of snapshots generated by [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) and [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1).
    
    playwright.config.ts
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  testDir: './tests',  snapshotPathTemplate: '{testDir}/__screenshots__/{testFilePath}/{arg}{ext}',});
    

### New APIs[â€‹](#new-apis-14 "Direct link to New APIs")

*   [locator.blur()](/docs/api/class-locator#locator-blur)
*   [locator.clear()](/docs/api/class-locator#locator-clear)
*   [android.launchServer()](/docs/api/class-android#android-launch-server) and [android.connect()](/docs/api/class-android#android-connect)
*   [androidDevice.on('close')](/docs/api/class-androiddevice#android-device-event-close)

### Browser Versions[â€‹](#browser-versions-29 "Direct link to Browser Versions")

*   Chromium 108.0.5359.29
*   Mozilla Firefox 106.0
*   WebKit 16.4

This version was also tested against the following stable channels:

*   Google Chrome 107
*   Microsoft Edge 107

Version 1.27[â€‹](#version-127 "Direct link to Version 1.27")
-----------------------------------------------------------

### Locators[â€‹](#locators "Direct link to Locators")

With these new APIs writing locators is a joy:

*   [page.getByText()](/docs/api/class-page#page-get-by-text) to locate by text content.
*   [page.getByRole()](/docs/api/class-page#page-get-by-role) to locate by [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
*   [page.getByLabel()](/docs/api/class-page#page-get-by-label) to locate a form control by associated label's text.
*   [page.getByTestId()](/docs/api/class-page#page-get-by-test-id) to locate an element based on its `data-testid` attribute (other attribute can be configured).
*   [page.getByPlaceholder()](/docs/api/class-page#page-get-by-placeholder) to locate an input by placeholder.
*   [page.getByAltText()](/docs/api/class-page#page-get-by-alt-text) to locate an element, usually image, by its text alternative.
*   [page.getByTitle()](/docs/api/class-page#page-get-by-title) to locate an element by its title.

    await page.getByLabel('User Name').fill('John');await page.getByLabel('Password').fill('secret-password');await page.getByRole('button', { name: 'Sign in' }).click();await expect(page.getByText('Welcome, John!')).toBeVisible();

All the same methods are also available on [Locator](/docs/api/class-locator "Locator"), [FrameLocator](/docs/api/class-framelocator "FrameLocator") and [Frame](/docs/api/class-frame "Frame") classes.

### Other highlights[â€‹](#other-highlights "Direct link to Other highlights")

*   `workers` option in the `playwright.config.ts` now accepts a percentage string to use some of the available CPUs. You can also pass it in the command line:
    
        npx playwright test --workers=20%
    
*   New options `host` and `port` for the html reporter.
    
        import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['html', { host: 'localhost', port: '9223' }]],});
    
*   New field `FullConfig.configFile` is available to test reporters, specifying the path to the config file if any.
    
*   As announced in v1.25, Ubuntu 18 will not be supported as of Dec 2022. In addition to that, there will be no WebKit updates on Ubuntu 18 starting from the next Playwright release.
    

### Behavior Changes[â€‹](#behavior-changes "Direct link to Behavior Changes")

*   [expect(locator).toHaveAttribute()](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute) with an empty value does not match missing attribute anymore. For example, the following snippet will succeed when `button` **does not** have a `disabled` attribute.
    
        await expect(page.getByRole('button')).toHaveAttribute('disabled', '');
    
*   Command line options `--grep` and `--grep-invert` previously incorrectly ignored `grep` and `grepInvert` options specified in the config. Now all of them are applied together.
    

### Browser Versions[â€‹](#browser-versions-30 "Direct link to Browser Versions")

*   Chromium 107.0.5304.18
*   Mozilla Firefox 105.0.1
*   WebKit 16.0

This version was also tested against the following stable channels:

*   Google Chrome 106
*   Microsoft Edge 106

Version 1.26[â€‹](#version-126 "Direct link to Version 1.26")
-----------------------------------------------------------

### Assertions[â€‹](#assertions "Direct link to Assertions")

*   New option `enabled` for [expect(locator).toBeEnabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-enabled).
*   [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) now pierces open shadow roots.
*   New option `editable` for [expect(locator).toBeEditable()](/docs/api/class-locatorassertions#locator-assertions-to-be-editable).
*   New option `visible` for [expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible).

### Other highlights[â€‹](#other-highlights-1 "Direct link to Other highlights")

*   New option `maxRedirects` for [apiRequestContext.get()](/docs/api/class-apirequestcontext#api-request-context-get) and others to limit redirect count.
*   New command-line flag `--pass-with-no-tests` that allows the test suite to pass when no files are found.
*   New command-line flag `--ignore-snapshots` to skip snapshot expectations, such as `expect(value).toMatchSnapshot()` and `expect(page).toHaveScreenshot()`.

### Behavior Change[â€‹](#behavior-change "Direct link to Behavior Change")

A bunch of Playwright APIs already support the `waitUntil: 'domcontentloaded'` option. For example:

    await page.goto('https://playwright.dev', {  waitUntil: 'domcontentloaded',});

Prior to 1.26, this would wait for all iframes to fire the `DOMContentLoaded` event.

To align with web specification, the `'domcontentloaded'` value only waits for the target frame to fire the `'DOMContentLoaded'` event. Use `waitUntil: 'load'` to wait for all iframes.

### Browser Versions[â€‹](#browser-versions-31 "Direct link to Browser Versions")

*   Chromium 106.0.5249.30
*   Mozilla Firefox 104.0
*   WebKit 16.0

This version was also tested against the following stable channels:

*   Google Chrome 105
*   Microsoft Edge 105

Version 1.25[â€‹](#version-125 "Direct link to Version 1.25")
-----------------------------------------------------------

### VSCode Extension[â€‹](#vscode-extension "Direct link to VSCode Extension")

*   Watch your tests running live & keep devtools open.
*   Pick selector.
*   Record new test from current page state.

![vscode extension screenshot](https://user-images.githubusercontent.com/746130/183781999-1b9fdbc5-cfae-47d6-b4f7-5d4ae89716a8.jpg)

### Test Runner[â€‹](#test-runner-5 "Direct link to Test Runner")

*   [test.step()](/docs/api/class-test#test-step) now returns the value of the step function:
    
        test('should work', async ({ page }) => {  const pageTitle = await test.step('get title', async () => {    await page.goto('https://playwright.dev');    return await page.title();  });  console.log(pageTitle);});
    
*   Added [test.describe.fixme()](/docs/api/class-test#test-describe-fixme).
    
*   New `'interrupted'` test status.
    
*   Enable tracing via CLI flag: `npx playwright test --trace=on`.
    

### Announcements[â€‹](#announcements-1 "Direct link to Announcements")

*   ðŸŽ We now ship Ubuntu 22.04 Jammy Jellyfish docker image: `mcr.microsoft.com/playwright:v1.34.0-jammy`.
*   ðŸª¦ This is the last release with macOS 10.15 support (deprecated as of 1.21).
*   ðŸª¦ This is the last release with Node.js 12 support, we recommend upgrading to Node.js LTS (16).
*   âš ï¸ Ubuntu 18 is now deprecated and will not be supported as of Dec 2022.

### Browser Versions[â€‹](#browser-versions-32 "Direct link to Browser Versions")

*   Chromium 105.0.5195.19
*   Mozilla Firefox 103.0
*   WebKit 16.0

This version was also tested against the following stable channels:

*   Google Chrome 104
*   Microsoft Edge 104

Version 1.24[â€‹](#version-124 "Direct link to Version 1.24")
-----------------------------------------------------------

### ðŸŒ Multiple Web Servers in `playwright.config.ts`[â€‹](#-multiple-web-servers-in-playwrightconfigts "Direct link to -multiple-web-servers-in-playwrightconfigts")

Launch multiple web servers, databases, or other processes by passing an array of configurations:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: [    {      command: 'npm run start',      url: 'http://127.0.0.1:3000',      timeout: 120 * 1000,      reuseExistingServer: !process.env.CI,    },    {      command: 'npm run backend',      url: 'http://127.0.0.1:3333',      timeout: 120 * 1000,      reuseExistingServer: !process.env.CI,    }  ],  use: {    baseURL: 'http://localhost:3000/',  },});

### ðŸ‚ Debian 11 Bullseye Support[â€‹](#-debian-11-bullseye-support "Direct link to ðŸ‚ Debian 11 Bullseye Support")

Playwright now supports Debian 11 Bullseye on x86\_64 for Chromium, Firefox and WebKit. Let us know if you encounter any issues!

Linux support looks like this:

| | Ubuntu 20.04 | Ubuntu 22.04 | Debian 11 | :--- | :---: | :---: | :---: | :---: | | Chromium | âœ… | âœ… | âœ… | | WebKit | âœ… | âœ… | âœ… | | Firefox | âœ… | âœ… | âœ… |

### ðŸ•µï¸ Anonymous Describe[â€‹](#ï¸-anonymous-describe "Direct link to ðŸ•µï¸ Anonymous Describe")

It is now possible to call [test.describe()](/docs/api/class-test#test-describe) to create suites without a title. This is useful for giving a group of tests a common option with [test.use()](/docs/api/class-test#test-use).

    test.describe(() => {  test.use({ colorScheme: 'dark' });  test('one', async ({ page }) => {    // ...  });  test('two', async ({ page }) => {    // ...  });});

### ðŸ§© Component Tests Update[â€‹](#-component-tests-update "Direct link to ðŸ§© Component Tests Update")

Playwright 1.24 Component Tests introduce `beforeMount` and `afterMount` hooks. Use these to configure your app for tests.

For example, this could be used to setup App router in Vue.js:

src/component.spec.ts

    import { test } from '@playwright/experimental-ct-vue';import { Component } from './mycomponent';test('should work', async ({ mount }) => {  const component = await mount(Component, {    hooksConfig: {      /* anything to configure your app */    }  });});

playwright/index.ts

    import { router } from '../router';import { beforeMount } from '@playwright/experimental-ct-vue/hooks';beforeMount(async ({ app, hooksConfig }) => {  app.use(router);});

A similar configuration in Next.js would look like this:

src/component.spec.jsx

    import { test } from '@playwright/experimental-ct-react';import { Component } from './mycomponent';test('should work', async ({ mount }) => {  const component = await mount(<Component></Component>, {    // Pass mock value from test into `beforeMount`.    hooksConfig: {      router: {        query: { page: 1, per_page: 10 },        asPath: '/posts'      }    }  });});

playwright/index.js

    import router from 'next/router';import { beforeMount } from '@playwright/experimental-ct-react/hooks';beforeMount(async ({ hooksConfig }) => {  // Before mount, redefine useRouter to return mock value from test.  router.useRouter = () => hooksConfig.router;});

Version 1.23[â€‹](#version-123 "Direct link to Version 1.23")
-----------------------------------------------------------

### Network Replay[â€‹](#network-replay "Direct link to Network Replay")

Now you can record network traffic into a HAR file and re-use this traffic in your tests.

To record network into HAR file:

    npx playwright open --save-har=github.har.zip https://github.com/microsoft

Alternatively, you can record HAR programmatically:

    const context = await browser.newContext({  recordHar: { path: 'github.har.zip' }});// ... do stuff ...await context.close();

Use the new methods [page.routeFromHAR()](/docs/api/class-page#page-route-from-har) or [browserContext.routeFromHAR()](/docs/api/class-browsercontext#browser-context-route-from-har) to serve matching responses from the [HAR](http://www.softwareishard.com/blog/har-12-spec/) file:

    await context.routeFromHAR('github.har.zip');

Read more in [our documentation](/docs/mock#mocking-with-har-files).

### Advanced Routing[â€‹](#advanced-routing "Direct link to Advanced Routing")

You can now use [route.fallback()](/docs/api/class-route#route-fallback) to defer routing to other handlers.

Consider the following example:

    // Remove a header from all requests.test.beforeEach(async ({ page }) => {  await page.route('**/*', async route => {    const headers = await route.request().allHeaders();    delete headers['if-none-match'];    await route.fallback({ headers });  });});test('should work', async ({ page }) => {  await page.route('**/*', async route => {    if (route.request().resourceType() === 'image')      await route.abort();    else      await route.fallback();  });});

Note that the new methods [page.routeFromHAR()](/docs/api/class-page#page-route-from-har) and [browserContext.routeFromHAR()](/docs/api/class-browsercontext#browser-context-route-from-har) also participate in routing and could be deferred to.

### Web-First Assertions Update[â€‹](#web-first-assertions-update "Direct link to Web-First Assertions Update")

*   New method [expect(locator).toHaveValues()](/docs/api/class-locatorassertions#locator-assertions-to-have-values) that asserts all selected values of `<select multiple>` element.
*   Methods [expect(locator).toContainText()](/docs/api/class-locatorassertions#locator-assertions-to-contain-text) and [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) now accept `ignoreCase` option.

### Component Tests Update[â€‹](#component-tests-update "Direct link to Component Tests Update")

*   Support for Vue2 via the [`@playwright/experimental-ct-vue2`](https://www.npmjs.com/package/@playwright/experimental-ct-vue2) package.
*   Support for component tests for [create-react-app](https://www.npmjs.com/package/create-react-app) with components in `.js` files.

Read more about [component testing with Playwright](/docs/test-components).

### Miscellaneous[â€‹](#miscellaneous-13 "Direct link to Miscellaneous")

*   If there's a service worker that's in your way, you can now easily disable it with a new context option `serviceWorkers`:
    
    playwright.config.ts
    
        export default {  use: {    serviceWorkers: 'block',  }};
    
*   Using `.zip` path for `recordHar` context option automatically zips the resulting HAR:
    
        const context = await browser.newContext({  recordHar: {    path: 'github.har.zip',  }});
    
*   If you intend to edit HAR by hand, consider using the `"minimal"` HAR recording mode that only records information that is essential for replaying:
    
        const context = await browser.newContext({  recordHar: {    path: 'github.har',    mode: 'minimal',  }});
    
*   Playwright now runs on Ubuntu 22 amd64 and Ubuntu 22 arm64. We also publish new docker image `mcr.microsoft.com/playwright:v1.34.0-jammy`.
    

### âš ï¸ Breaking Changes âš ï¸[â€‹](#ï¸-breaking-changes-ï¸ "Direct link to âš ï¸ Breaking Changes âš ï¸")

WebServer is now considered "ready" if request to the specified url has any of the following HTTP status codes:

*   `200-299`
*   `300-399` (new)
*   `400`, `401`, `402`, `403` (new)

Version 1.22[â€‹](#version-122 "Direct link to Version 1.22")
-----------------------------------------------------------

### Highlights[â€‹](#highlights-4 "Direct link to Highlights")

*   Components Testing (preview)
    
    Playwright Test can now test your [React](https://reactjs.org/), [Vue.js](https://vuejs.org/) or [Svelte](https://svelte.dev/) components. You can use all the features of Playwright Test (such as parallelization, emulation & debugging) while running components in real browsers.
    
    Here is what a typical component test looks like:
    
    App.spec.tsx
    
        import { test, expect } from '@playwright/experimental-ct-react';import App from './App';// Let's test component in a dark scheme!test.use({ colorScheme: 'dark' });test('should render', async ({ mount }) => {  const component = await mount(<App></App>);  // As with any Playwright test, assert locator text.  await expect(component).toContainText('React');  // Or do a screenshot ðŸš€  await expect(component).toHaveScreenshot();  // Or use any Playwright method  await component.click();});
    
    Read more in [our documentation](/docs/test-components).
    
*   Role selectors that allow selecting elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
        // Click a button with accessible name "log in"await page.locator('role=button[name="log in"]').click();
    
    Read more in [our documentation](/docs/locators#locate-by-role).
    
*   New [locator.filter()](/docs/api/class-locator#locator-filter) API to filter an existing locator
    
        const buttons = page.locator('role=button');// ...const submitButton = buttons.filter({ hasText: 'Submit' });await submitButton.click();
    
*   New web-first assertions [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) and [expect(locator).toHaveScreenshot()](/docs/api/class-locatorassertions#locator-assertions-to-have-screenshot-1) that wait for screenshot stabilization and enhances test reliability.
    
    The new assertions has screenshot-specific defaults, such as:
    
    *   disables animations
    *   uses CSS scale option
    
        await page.goto('https://playwright.dev');await expect(page).toHaveScreenshot();
    
    The new [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) saves screenshots at the same location as [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1).
    

Version 1.21[â€‹](#version-121 "Direct link to Version 1.21")
-----------------------------------------------------------

### Highlights[â€‹](#highlights-5 "Direct link to Highlights")

*   New role selectors that allow selecting elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
    
        // Click a button with accessible name "log in"await page.locator('role=button[name="log in"]').click();
    
    Read more in [our documentation](/docs/locators#locate-by-role).
    
*   New `scale` option in [page.screenshot()](/docs/api/class-page#page-screenshot) for smaller sized screenshots.
    
*   New `caret` option in [page.screenshot()](/docs/api/class-page#page-screenshot) to control text caret. Defaults to `"hide"`.
    
*   New method `expect.poll` to wait for an arbitrary condition:
    
        // Poll the method until it returns an expected result.await expect.poll(async () => {  const response = await page.request.get('https://api.example.com');  return response.status();}).toBe(200);
    
    `expect.poll` supports most synchronous matchers, like `.toBe()`, `.toContain()`, etc. Read more in [our documentation](/docs/test-assertions#expectpoll).
    

### Behavior Changes[â€‹](#behavior-changes-1 "Direct link to Behavior Changes")

*   ESM support when running TypeScript tests is now enabled by default. The `PLAYWRIGHT_EXPERIMENTAL_TS_ESM` env variable is no longer required.
*   The `mcr.microsoft.com/playwright` docker image no longer contains Python. Please use `mcr.microsoft.com/playwright/python` as a Playwright-ready docker image with pre-installed Python.
*   Playwright now supports large file uploads (100s of MBs) via [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) API.

### Browser Versions[â€‹](#browser-versions-33 "Direct link to Browser Versions")

*   Chromium 101.0.4951.26
*   Mozilla Firefox 98.0.2
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 100
*   Microsoft Edge 100

Version 1.20[â€‹](#version-120 "Direct link to Version 1.20")
-----------------------------------------------------------

### Highlights[â€‹](#highlights-6 "Direct link to Highlights")

*   New options for methods [page.screenshot()](/docs/api/class-page#page-screenshot), [locator.screenshot()](/docs/api/class-locator#locator-screenshot) and [elementHandle.screenshot()](/docs/api/class-elementhandle#element-handle-screenshot):
    
    *   Option `animations: "disabled"` rewinds all CSS animations and transitions to a consistent state
    *   Option `mask: Locator[]` masks given elements, overlaying them with pink `#FF00FF` boxes.
*   `expect().toMatchSnapshot()` now supports anonymous snapshots: when snapshot name is missing, Playwright Test will generate one automatically:
    
        expect('Web is Awesome <3').toMatchSnapshot();
    
*   New `maxDiffPixels` and `maxDiffPixelRatio` options for fine-grained screenshot comparison using `expect().toMatchSnapshot()`:
    
        expect(await page.screenshot()).toMatchSnapshot({  maxDiffPixels: 27, // allow no more than 27 different pixels.});
    
    It is most convenient to specify `maxDiffPixels` or `maxDiffPixelRatio` once in [testConfig.expect](/docs/api/class-testconfig#test-config-expect).
    
*   Playwright Test now adds [testConfig.fullyParallel](/docs/api/class-testconfig#test-config-fully-parallel) mode. By default, Playwright Test parallelizes between files. In fully parallel mode, tests inside a single file are also run in parallel. You can also use `--fully-parallel` command line flag.
    
    playwright.config.ts
    
        export default {  fullyParallel: true,};
    
*   [testProject.grep](/docs/api/class-testproject#test-project-grep) and [testProject.grepInvert](/docs/api/class-testproject#test-project-grep-invert) are now configurable per project. For example, you can now configure smoke tests project using `grep`:
    
    playwright.config.ts
    
        export default {  projects: [    {      name: 'smoke tests',      grep: /@smoke/,    },  ],};
    
*   [Trace Viewer](/docs/trace-viewer) now shows [API testing requests](/docs/api-testing).
    
*   [locator.highlight()](/docs/api/class-locator#locator-highlight) visually reveals element(s) for easier debugging.
    

### Announcements[â€‹](#announcements-2 "Direct link to Announcements")

*   We now ship a designated Python docker image `mcr.microsoft.com/playwright/python`. Please switch over to it if you use Python. This is the last release that includes Python inside our javascript `mcr.microsoft.com/playwright` docker image.
*   v1.20 is the last release to receive WebKit update for macOS 10.15 Catalina. Please update macOS to keep using latest & greatest WebKit!

### Browser Versions[â€‹](#browser-versions-34 "Direct link to Browser Versions")

*   Chromium 101.0.4921.0
*   Mozilla Firefox 97.0.1
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 99
*   Microsoft Edge 99

Version 1.19[â€‹](#version-119 "Direct link to Version 1.19")
-----------------------------------------------------------

### Playwright Test Update[â€‹](#playwright-test-update "Direct link to Playwright Test Update")

*   Playwright Test v1.19 now supports _soft assertions_. Failed soft assertions
    
    **do not** terminate test execution, but mark the test as failed.
    
        // Make a few checks that will not stop the test when failed...await expect.soft(page.locator('#status')).toHaveText('Success');await expect.soft(page.locator('#eta')).toHaveText('1 day');// ... and continue the test to check more things.await page.locator('#next-page').click();await expect.soft(page.locator('#title')).toHaveText('Make another order');
    
    Read more in [our documentation](/docs/test-assertions#soft-assertions)
    
*   You can now specify a **custom expect message** as a second argument to the `expect` and `expect.soft` functions, for example:
    
        await expect(page.locator('text=Name'), 'should be logged in').toBeVisible();
    
    The error would look like this:
    
            Error: should be logged in    Call log:      - expect.toBeVisible with timeout 5000ms      - waiting for "getByText('Name')"      2 |      3 | test('example test', async({ page }) => {    > 4 |   await expect(page.locator('text=Name'), 'should be logged in').toBeVisible();        |                                                                  ^      5 | });      6 |
    
    Read more in [our documentation](/docs/test-assertions#custom-expect-message)
    
*   By default, tests in a single file are run in order. If you have many independent tests in a single file, you can now run them in parallel with [test.describe.configure()](/docs/api/class-test#test-describe-configure).
    

### Other Updates[â€‹](#other-updates "Direct link to Other Updates")

*   Locator now supports a `has` option that makes sure it contains another locator inside:
    
        await page.locator('article', {  has: page.locator('.highlight'),}).click();
    
    Read more in [locator documentation](/docs/api/class-locator#locator-locator)
    
*   New [locator.page()](/docs/api/class-locator#locator-page)
    
*   [page.screenshot()](/docs/api/class-page#page-screenshot) and [locator.screenshot()](/docs/api/class-locator#locator-screenshot) now automatically hide blinking caret
    
*   Playwright Codegen now generates locators and frame locators
    
*   New option `url` in [testConfig.webServer](/docs/api/class-testconfig#test-config-web-server) to ensure your web server is ready before running the tests
    
*   New [testInfo.errors](/docs/api/class-testinfo#test-info-errors) and [testResult.errors](/docs/api/class-testresult#test-result-errors) that contain all failed assertions and soft assertions.
    

### Potentially breaking change in Playwright Test Global Setup[â€‹](#potentially-breaking-change-in-playwright-test-global-setup "Direct link to Potentially breaking change in Playwright Test Global Setup")

It is unlikely that this change will affect you, no action is required if your tests keep running as they did.

We've noticed that in rare cases, the set of tests to be executed was configured in the global setup by means of the environment variables. We also noticed some applications that were post processing the reporters' output in the global teardown. If you are doing one of the two, [learn more](https://github.com/microsoft/playwright/issues/12018)

### Browser Versions[â€‹](#browser-versions-35 "Direct link to Browser Versions")

*   Chromium 100.0.4863.0
*   Mozilla Firefox 96.0.1
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 98
*   Microsoft Edge 98

Version 1.18[â€‹](#version-118 "Direct link to Version 1.18")
-----------------------------------------------------------

### Locator Improvements[â€‹](#locator-improvements "Direct link to Locator Improvements")

*   [locator.dragTo()](/docs/api/class-locator#locator-drag-to)
    
*   [`expect(locator).toBeChecked({ checked })`](/docs/api/class-locatorassertions#locator-assertions-to-be-checked)
    
*   Each locator can now be optionally filtered by the text it contains:
    
        await page.locator('li', { hasText: 'my item' }).locator('button').click();
    
    Read more in [locator documentation](/docs/api/class-locator#locator-locator)
    

### Testing API improvements[â€‹](#testing-api-improvements "Direct link to Testing API improvements")

*   [`expect(response).toBeOK()`](/docs/test-assertions)
*   [`testInfo.attach()`](/docs/api/class-testinfo#test-info-attach)
*   [`test.info()`](/docs/api/class-test#test-info)

### Improved TypeScript Support[â€‹](#improved-typescript-support "Direct link to Improved TypeScript Support")

1.  Playwright Test now respects `tsconfig.json`'s [`baseUrl`](https://www.typescriptlang.org/tsconfig#baseUrl) and [`paths`](https://www.typescriptlang.org/tsconfig#paths), so you can use aliases
2.  There is a new environment variable `PW_EXPERIMENTAL_TS_ESM` that allows importing ESM modules in your TS code, without the need for the compile step. Don't forget the `.js` suffix when you are importing your esm modules. Run your tests as follows:

    npm i --save-dev @playwright/test@1.18.0-rc1PW_EXPERIMENTAL_TS_ESM=1 npx playwright test

### Create Playwright[â€‹](#create-playwright "Direct link to Create Playwright")

The `npm init playwright` command is now generally available for your use:

    # Run from your project's root directorynpm init playwright@latest# Or create a new projectnpm init playwright@latest new-project

This will create a Playwright Test configuration file, optionally add examples, a GitHub Action workflow and a first test `example.spec.ts`.

### New APIs & changes[â€‹](#new-apis--changes "Direct link to New APIs & changes")

*   new [`testCase.repeatEachIndex`](/docs/api/class-testcase#test-case-repeat-each-index) API
*   [`acceptDownloads`](/docs/api/class-browser#browser-new-context-option-accept-downloads) option now defaults to `true`

### Breaking change: custom config options[â€‹](#breaking-change-custom-config-options "Direct link to Breaking change: custom config options")

Custom config options are a convenient way to parametrize projects with different values. Learn more in [this guide](/docs/test-parameterize#parameterized-projects).

Previously, any fixture introduced through [test.extend()](/docs/api/class-test#test-extend) could be overridden in the [testProject.use](/docs/api/class-testproject#test-project-use) config section. For example,

    // WRONG: THIS SNIPPET DOES NOT WORK SINCE v1.18.// fixtures.jsconst test = base.extend({  myParameter: 'default',});// playwright.config.jsmodule.exports = {  use: {    myParameter: 'value',  },};

The proper way to make a fixture parametrized in the config file is to specify `option: true` when defining the fixture. For example,

    // CORRECT: THIS SNIPPET WORKS SINCE v1.18.// fixtures.jsconst test = base.extend({  // Fixtures marked as "option: true" will get a value specified in the config,  // or fallback to the default value.  myParameter: ['default', { option: true }],});// playwright.config.jsmodule.exports = {  use: {    myParameter: 'value',  },};

### Browser Versions[â€‹](#browser-versions-36 "Direct link to Browser Versions")

*   Chromium 99.0.4812.0
*   Mozilla Firefox 95.0
*   WebKit 15.4

This version was also tested against the following stable channels:

*   Google Chrome 97
*   Microsoft Edge 97

Version 1.17[â€‹](#version-117 "Direct link to Version 1.17")
-----------------------------------------------------------

### Frame Locators[â€‹](#frame-locators "Direct link to Frame Locators")

Playwright 1.17 introduces [frame locators](/docs/api/class-framelocator) - a locator to the iframe on the page. Frame locators capture the logic sufficient to retrieve the `iframe` and then locate elements in that iframe. Frame locators are strict by default, will wait for `iframe` to appear and can be used in Web-First assertions.

![Graphics](https://user-images.githubusercontent.com/746130/142082759-2170db38-370d-43ec-8d41-5f9941f57d83.png)

Frame locators can be created with either [page.frameLocator()](/docs/api/class-page#page-frame-locator) or [locator.frameLocator()](/docs/api/class-locator#locator-frame-locator) method.

    const locator = page.frameLocator('#my-iframe').locator('text=Submit');await locator.click();

Read more at [our documentation](/docs/api/class-framelocator).

### Trace Viewer Update[â€‹](#trace-viewer-update "Direct link to Trace Viewer Update")

Playwright Trace Viewer is now **available online** at [https://trace.playwright.dev](https://trace.playwright.dev)! Just drag-and-drop your `trace.zip` file to inspect its contents.

> **NOTE**: trace files are not uploaded anywhere; [trace.playwright.dev](https://trace.playwright.dev) is a [progressive web application](https://web.dev/progressive-web-apps/) that processes traces locally.

*   Playwright Test traces now include sources by default (these could be turned off with tracing option)
*   Trace Viewer now shows test name
*   New trace metadata tab with browser details
*   Snapshots now have URL bar

![image](https://user-images.githubusercontent.com/746130/141877831-29e37cd1-e574-4bd9-aab5-b13a463bb4ae.png)

### HTML Report Update[â€‹](#html-report-update "Direct link to HTML Report Update")

*   HTML report now supports dynamic filtering
*   Report is now a **single static HTML file** that could be sent by e-mail or as a slack attachment.

![image](https://user-images.githubusercontent.com/746130/141877402-e486643d-72c7-4db3-8844-ed2072c5d676.png)

### Ubuntu ARM64 support + more[â€‹](#ubuntu-arm64-support--more "Direct link to Ubuntu ARM64 support + more")

*   Playwright now supports **Ubuntu 20.04 ARM64**. You can now run Playwright tests inside Docker on Apple M1 and on Raspberry Pi.
    
*   You can now use Playwright to install stable version of Edge on Linux:
    
        npx playwright install msedge
    

### New APIs[â€‹](#new-apis-15 "Direct link to New APIs")

*   Tracing now supports a [`'title'`](/docs/api/class-tracing#tracing-start-option-title) option
*   Page navigations support a new [`'commit'`](/docs/api/class-page#page-goto) waiting option
*   HTML reporter got [new configuration options](/docs/test-reporters#html-reporter)
*   [`testConfig.snapshotDir` option](/docs/api/class-testconfig#test-config-snapshot-dir)
*   [`testInfo.parallelIndex`](/docs/api/class-testinfo#test-info-parallel-index)
*   [`testInfo.titlePath`](/docs/api/class-testinfo#test-info-title-path)
*   [`testOptions.trace`](/docs/api/class-testoptions#test-options-trace) has new options
*   [`expect.toMatchSnapshot`](/docs/api/class-genericassertions) supports subdirectories
*   [`reporter.printsToStdio()`](/docs/api/class-reporter#reporter-prints-to-stdio)

Version 1.16[â€‹](#version-116 "Direct link to Version 1.16")
-----------------------------------------------------------

### ðŸŽ­ Playwright Test[â€‹](#-playwright-test "Direct link to ðŸŽ­ Playwright Test")

#### API Testing[â€‹](#api-testing "Direct link to API Testing")

Playwright 1.16 introduces new [API Testing](/docs/api/class-apirequestcontext) that lets you send requests to the server directly from Node.js! Now you can:

*   test your server API
*   prepare server side state before visiting the web application in a test
*   validate server side post-conditions after running some actions in the browser

To do a request on behalf of Playwright's Page, use **new [page.request](/docs/api/class-page#page-request) API**:

    import { test, expect } from '@playwright/test';test('context fetch', async ({ page }) => {  // Do a GET request on behalf of page  const response = await page.request.get('http://example.com/foo.json');  // ...});

To do a stand-alone request from node.js to an API endpoint, use **new [`request` fixture](/docs/api/class-fixtures#fixtures-request)**:

    import { test, expect } from '@playwright/test';test('context fetch', async ({ request }) => {  // Do a GET request on behalf of page  const response = await request.get('http://example.com/foo.json');  // ...});

Read more about it in our [API testing guide](/docs/api-testing).

#### Response Interception[â€‹](#response-interception "Direct link to Response Interception")

It is now possible to do response interception by combining [API Testing](/docs/api-testing) with [request interception](/docs/network#modify-requests).

For example, we can blur all the images on the page:

    import { test, expect } from '@playwright/test';import jimp from 'jimp'; // image processing librarytest('response interception', async ({ page }) => {  await page.route('**/*.jpeg', async route => {    const response = await page._request.fetch(route.request());    const image = await jimp.read(await response.body());    await image.blur(5);    await route.fulfill({      response,      body: await image.getBufferAsync('image/jpeg'),    });  });  const response = await page.goto('https://playwright.dev');  expect(response.status()).toBe(200);});

Read more about [response interception](/docs/network#modify-responses).

#### New HTML reporter[â€‹](#new-html-reporter "Direct link to New HTML reporter")

Try it out new HTML reporter with either `--reporter=html` or a `reporter` entry in `playwright.config.ts` file:

    $ npx playwright test --reporter=html

The HTML reporter has all the information about tests and their failures, including surfacing trace and image artifacts.

![html reporter](https://user-images.githubusercontent.com/746130/138324311-94e68b39-b51a-4776-a446-f60037a77f32.png)

Read more about [our reporters](/docs/test-reporters#html-reporter).

### ðŸŽ­ Playwright Library[â€‹](#-playwright-library "Direct link to ðŸŽ­ Playwright Library")

#### locator.waitFor[â€‹](#locatorwaitfor "Direct link to locator.waitFor")

Wait for a locator to resolve to a single element with a given state. Defaults to the `state: 'visible'`.

Comes especially handy when working with lists:

    import { test, expect } from '@playwright/test';test('context fetch', async ({ page }) => {  const completeness = page.locator('text=Success');  await completeness.waitFor();  expect(await page.screenshot()).toMatchSnapshot('screen.png');});

Read more about [locator.waitFor()](/docs/api/class-locator#locator-wait-for).

### Docker support for Arm64[â€‹](#docker-support-for-arm64 "Direct link to Docker support for Arm64")

Playwright Docker image is now published for Arm64 so it can be used on Apple Silicon.

Read more about [Docker integration](/docs/docker).

### ðŸŽ­ Playwright Trace Viewer[â€‹](#-playwright-trace-viewer "Direct link to ðŸŽ­ Playwright Trace Viewer")

*   web-first assertions inside trace viewer
*   run trace viewer with `npx playwright show-trace` and drop trace files to the trace viewer PWA
*   API testing is integrated with trace viewer
*   better visual attribution of action targets

Read more about [Trace Viewer](/docs/trace-viewer).

### Browser Versions[â€‹](#browser-versions-37 "Direct link to Browser Versions")

*   Chromium 97.0.4666.0
*   Mozilla Firefox 93.0
*   WebKit 15.4

This version of Playwright was also tested against the following stable channels:

*   Google Chrome 94
*   Microsoft Edge 94

Version 1.15[â€‹](#version-115 "Direct link to Version 1.15")
-----------------------------------------------------------

### ðŸŽ­ Playwright Library[â€‹](#-playwright-library-1 "Direct link to ðŸŽ­ Playwright Library")

#### ðŸ–±ï¸ Mouse Wheel[â€‹](#ï¸-mouse-wheel "Direct link to ðŸ–±ï¸ Mouse Wheel")

By using [mouse.wheel()](/docs/api/class-mouse#mouse-wheel) you are now able to scroll vertically or horizontally.

#### ðŸ“œ New Headers API[â€‹](#-new-headers-api "Direct link to ðŸ“œ New Headers API")

Previously it was not possible to get multiple header values of a response. This is now possible and additional helper functions are available:

*   [request.allHeaders()](/docs/api/class-request#request-all-headers)
*   [request.headersArray()](/docs/api/class-request#request-headers-array)
*   [request.headerValue()](/docs/api/class-request#request-header-value)
*   [response.allHeaders()](/docs/api/class-response#response-all-headers)
*   [response.headersArray()](/docs/api/class-response#response-headers-array)
*   [response.headerValue()](/docs/api/class-response#response-header-value)
*   [response.headerValues()](/docs/api/class-response#response-header-values)

#### ðŸŒˆ Forced-Colors emulation[â€‹](#-forced-colors-emulation "Direct link to ðŸŒˆ Forced-Colors emulation")

Its now possible to emulate the `forced-colors` CSS media feature by passing it in the [browser.newContext()](/docs/api/class-browser#browser-new-context) or calling [page.emulateMedia()](/docs/api/class-page#page-emulate-media).

#### New APIs[â€‹](#new-apis-16 "Direct link to New APIs")

*   [page.route()](/docs/api/class-page#page-route) accepts new `times` option to specify how many times this route should be matched.
*   [page.setChecked()](/docs/api/class-page#page-set-checked) and [locator.setChecked()](/docs/api/class-locator#locator-set-checked) were introduced to set the checked state of a checkbox.
*   [request.sizes()](/docs/api/class-request#request-sizes) Returns resource size information for given http request.
*   [tracing.startChunk()](/docs/api/class-tracing#tracing-start-chunk) - Start a new trace chunk.
*   [tracing.stopChunk()](/docs/api/class-tracing#tracing-stop-chunk) - Stops a new trace chunk.

### ðŸŽ­ Playwright Test[â€‹](#-playwright-test-1 "Direct link to ðŸŽ­ Playwright Test")

#### ðŸ¤ `test.parallel()` run tests in the same file in parallel[â€‹](#-testparallel-run-tests-in-the-same-file-in-parallel "Direct link to -testparallel-run-tests-in-the-same-file-in-parallel")

    test.describe.parallel('group', () => {  test('runs in parallel 1', async ({ page }) => {  });  test('runs in parallel 2', async ({ page }) => {  });});

By default, tests in a single file are run in order. If you have many independent tests in a single file, you can now run them in parallel with [test.describe.parallel(title, callback)](/docs/api/class-test#test-describe-parallel).

#### ðŸ›  Add `--debug` CLI flag[â€‹](#-add---debug-cli-flag "Direct link to -add---debug-cli-flag")

By using `npx playwright test --debug` it will enable the [Playwright Inspector](/docs/debug#playwright-inspector) for you to debug your tests.

### Browser Versions[â€‹](#browser-versions-38 "Direct link to Browser Versions")

*   Chromium 96.0.4641.0
*   Mozilla Firefox 92.0
*   WebKit 15.0

Version 1.14[â€‹](#version-114 "Direct link to Version 1.14")
-----------------------------------------------------------

### ðŸŽ­ Playwright Library[â€‹](#-playwright-library-2 "Direct link to ðŸŽ­ Playwright Library")

#### âš¡ï¸ New "strict" mode[â€‹](#ï¸-new-strict-mode "Direct link to âš¡ï¸ New \"strict\" mode")

Selector ambiguity is a common problem in automation testing. **"strict" mode** ensures that your selector points to a single element and throws otherwise.

Pass `strict: true` into your action calls to opt in.

    // This will throw if you have more than one button!await page.click('button', { strict: true });

#### ðŸ“ New [**Locators API**](/docs/api/class-locator)[â€‹](#-new-locators-api "Direct link to -new-locators-api")

Locator represents a view to the element(s) on the page. It captures the logic sufficient to retrieve the element at any given moment.

The difference between the [Locator](/docs/api/class-locator) and [ElementHandle](/docs/api/class-elementhandle) is that the latter points to a particular element, while [Locator](/docs/api/class-locator) captures the logic of how to retrieve that element.

Also, locators are **"strict" by default**!

    const locator = page.locator('button');await locator.click();

Learn more in the [documentation](/docs/api/class-locator).

#### ðŸ§© Experimental [**React**](/docs/other-locators#react-locator) and [**Vue**](/docs/other-locators#vue-locator) selector engines[â€‹](#-experimental-react-and-vue-selector-engines "Direct link to -experimental-react-and-vue-selector-engines")

React and Vue selectors allow selecting elements by its component name and/or property values. The syntax is very similar to [attribute selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) and supports all attribute selector operators.

    await page.locator('_react=SubmitButton[enabled=true]').click();await page.locator('_vue=submit-button[enabled=true]').click();

Learn more in the [react selectors documentation](/docs/other-locators#react-locator) and the [vue selectors documentation](/docs/other-locators#vue-locator).

#### âœ¨ New [**`nth`**](/docs/other-locators#n-th-element-locator) and [**`visible`**](/docs/other-locators#css-matching-only-visible-elements) selector engines[â€‹](#-new-nth-and-visible-selector-engines "Direct link to -new-nth-and-visible-selector-engines")

*   [`nth`](/docs/other-locators#n-th-element-locator) selector engine is equivalent to the `:nth-match` pseudo class, but could be combined with other selector engines.
*   [`visible`](/docs/other-locators#css-matching-only-visible-elements) selector engine is equivalent to the `:visible` pseudo class, but could be combined with other selector engines.

    // select the first button among all buttonsawait button.click('button >> nth=0');// or if you are using locators, you can use first(), nth() and last()await page.locator('button').first().click();// click a visible buttonawait button.click('button >> visible=true');

### ðŸŽ­ Playwright Test[â€‹](#-playwright-test-2 "Direct link to ðŸŽ­ Playwright Test")

#### âœ… Web-First Assertions[â€‹](#-web-first-assertions "Direct link to âœ… Web-First Assertions")

`expect` now supports lots of new web-first assertions.

Consider the following example:

    await expect(page.locator('.status')).toHaveText('Submitted');

Playwright Test will be re-testing the node with the selector `.status` until fetched Node has the `"Submitted"` text. It will be re-fetching the node and checking it over and over, until the condition is met or until the timeout is reached. You can either pass this timeout or configure it once via the [`testProject.expect`](/docs/api/class-testproject#test-project-expect) value in test config.

By default, the timeout for assertions is not set, so it'll wait forever, until the whole test times out.

List of all new assertions:

*   [`expect(locator).toBeChecked()`](/docs/api/class-locatorassertions#locator-assertions-to-be-checked)
*   [`expect(locator).toBeDisabled()`](/docs/api/class-locatorassertions#locator-assertions-to-be-disabled)
*   [`expect(locator).toBeEditable()`](/docs/api/class-locatorassertions#locator-assertions-to-be-editable)
*   [`expect(locator).toBeEmpty()`](/docs/api/class-locatorassertions#locator-assertions-to-be-empty)
*   [`expect(locator).toBeEnabled()`](/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)
*   [`expect(locator).toBeFocused()`](/docs/api/class-locatorassertions#locator-assertions-to-be-focused)
*   [`expect(locator).toBeHidden()`](/docs/api/class-locatorassertions#locator-assertions-to-be-hidden)
*   [`expect(locator).toBeVisible()`](/docs/api/class-locatorassertions#locator-assertions-to-be-visible)
*   [`expect(locator).toContainText(text, options?)`](/docs/api/class-locatorassertions#locator-assertions-to-contain-text)
*   [`expect(locator).toHaveAttribute(name, value)`](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)
*   [`expect(locator).toHaveClass(expected)`](/docs/api/class-locatorassertions#locator-assertions-to-have-class)
*   [`expect(locator).toHaveCount(count)`](/docs/api/class-locatorassertions#locator-assertions-to-have-count)
*   [`expect(locator).toHaveCSS(name, value)`](/docs/api/class-locatorassertions#locator-assertions-to-have-css)
*   [`expect(locator).toHaveId(id)`](/docs/api/class-locatorassertions#locator-assertions-to-have-id)
*   [`expect(locator).toHaveJSProperty(name, value)`](/docs/api/class-locatorassertions#locator-assertions-to-have-js-property)
*   [`expect(locator).toHaveText(expected, options)`](/docs/api/class-locatorassertions#locator-assertions-to-have-text)
*   [`expect(page).toHaveTitle(title)`](/docs/api/class-pageassertions#page-assertions-to-have-title)
*   [`expect(page).toHaveURL(url)`](/docs/api/class-pageassertions#page-assertions-to-have-url)
*   [`expect(locator).toHaveValue(value)`](/docs/api/class-locatorassertions#locator-assertions-to-have-value)

#### â›“ Serial mode with [`describe.serial`](/docs/api/class-test#test-describe-serial)[â€‹](#-serial-mode-with-describeserial "Direct link to -serial-mode-with-describeserial")

Declares a group of tests that should always be run serially. If one of the tests fails, all subsequent tests are skipped. All tests in a group are retried together.

    test.describe.serial('group', () => {  test('runs first', async ({ page }) => { /* ... */ });  test('runs second', async ({ page }) => { /* ... */ });});

Learn more in the [documentation](/docs/api/class-test#test-describe-serial).

#### ðŸ¾ Steps API with [`test.step`](/docs/api/class-test#test-step)[â€‹](#-steps-api-with-teststep "Direct link to -steps-api-with-teststep")

Split long tests into multiple steps using `test.step()` API:

    import { test, expect } from '@playwright/test';test('test', async ({ page }) => {  await test.step('Log in', async () => {    // ...  });  await test.step('news feed', async () => {    // ...  });});

Step information is exposed in reporters API.

#### ðŸŒŽ Launch web server before running tests[â€‹](#-launch-web-server-before-running-tests "Direct link to ðŸŒŽ Launch web server before running tests")

To launch a server during the tests, use the [`webServer`](/docs/test-webserver) option in the configuration file. The server will wait for a given url to be available before running the tests, and the url will be passed over to Playwright as a [`baseURL`](/docs/api/class-testoptions#test-options-base-url) when creating a context.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: {    command: 'npm run start', // command to launch    url: 'http://127.0.0.1:3000', // url to await for    timeout: 120 * 1000,    reuseExistingServer: !process.env.CI,  },});

Learn more in the [documentation](/docs/test-webserver).

### Browser Versions[â€‹](#browser-versions-39 "Direct link to Browser Versions")

*   Chromium 94.0.4595.0
*   Mozilla Firefox 91.0
*   WebKit 15.0

Version 1.13[â€‹](#version-113 "Direct link to Version 1.13")
-----------------------------------------------------------

#### Playwright Test[â€‹](#playwright-test "Direct link to Playwright Test")

*   **âš¡ï¸ Introducing [Reporter API](https://github.com/microsoft/playwright/blob/65a9037461ffc15d70cdc2055832a0c5512b227c/packages/playwright-test/types/testReporter.d.ts)** which is already used to create an [Allure Playwright reporter](https://github.com/allure-framework/allure-js/pull/297).
*   **â›ºï¸ New [`baseURL` fixture](/docs/test-configuration#basic-configuration)** to support relative paths in tests.

#### Playwright[â€‹](#playwright "Direct link to Playwright")

*   **ðŸ–– Programmatic drag-and-drop support** via the [page.dragAndDrop()](/docs/api/class-page#page-drag-and-drop) API.
*   **ðŸ”Ž Enhanced HAR** with body sizes for requests and responses. Use via `recordHar` option in [browser.newContext()](/docs/api/class-browser#browser-new-context).

#### Tools[â€‹](#tools "Direct link to Tools")

*   Playwright Trace Viewer now shows parameters, returned values and `console.log()` calls.
*   Playwright Inspector can generate Playwright Test tests.

#### New and Overhauled Guides[â€‹](#new-and-overhauled-guides "Direct link to New and Overhauled Guides")

*   [Intro](/docs/intro)
*   [Authentication](/docs/auth)
*   [Chrome Extensions](/docs/chrome-extensions)
*   [Playwright Test Annotations](/docs/test-annotations)
*   [Playwright Test Configuration](/docs/test-configuration)
*   [Playwright Test Fixtures](/docs/test-fixtures)

#### Browser Versions[â€‹](#browser-versions-40 "Direct link to Browser Versions")

*   Chromium 93.0.4576.0
*   Mozilla Firefox 90.0
*   WebKit 14.2

#### New Playwright APIs[â€‹](#new-playwright-apis "Direct link to New Playwright APIs")

*   new `baseURL` option in [browser.newContext()](/docs/api/class-browser#browser-new-context) and [browser.newPage()](/docs/api/class-browser#browser-new-page)
*   [response.securityDetails()](/docs/api/class-response#response-security-details) and [response.serverAddr()](/docs/api/class-response#response-server-addr)
*   [page.dragAndDrop()](/docs/api/class-page#page-drag-and-drop) and [frame.dragAndDrop()](/docs/api/class-frame#frame-drag-and-drop)
*   [download.cancel()](/docs/api/class-download#download-cancel)
*   [page.inputValue()](/docs/api/class-page#page-input-value), [frame.inputValue()](/docs/api/class-frame#frame-input-value) and [elementHandle.inputValue()](/docs/api/class-elementhandle#element-handle-input-value)
*   new `force` option in [page.fill()](/docs/api/class-page#page-fill), [frame.fill()](/docs/api/class-frame#frame-fill), and [elementHandle.fill()](/docs/api/class-elementhandle#element-handle-fill)
*   new `force` option in [page.selectOption()](/docs/api/class-page#page-select-option), [frame.selectOption()](/docs/api/class-frame#frame-select-option), and [elementHandle.selectOption()](/docs/api/class-elementhandle#element-handle-select-option)

Version 1.12[â€‹](#version-112 "Direct link to Version 1.12")
-----------------------------------------------------------

#### âš¡ï¸ Introducing Playwright Test[â€‹](#ï¸-introducing-playwright-test "Direct link to âš¡ï¸ Introducing Playwright Test")

[Playwright Test](/docs/intro) is a **new test runner** built from scratch by Playwright team specifically to accommodate end-to-end testing needs:

*   Run tests across all browsers.
*   Execute tests in parallel.
*   Enjoy context isolation and sensible defaults out of the box.
*   Capture videos, screenshots and other artifacts on failure.
*   Integrate your POMs as extensible fixtures.

Installation:

    npm i -D @playwright/test

Simple test `tests/foo.spec.ts`:

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('https://playwright.dev/');  const name = await page.innerText('.navbar__title');  expect(name).toBe('Playwright');});

Running:

    npx playwright test

ðŸ‘‰ Read more in [Playwright Test documentation](/docs/intro).

#### ðŸ§Ÿâ€â™‚ï¸ Introducing Playwright Trace Viewer[â€‹](#ï¸-introducing-playwright-trace-viewer "Direct link to ðŸ§Ÿâ€â™‚ï¸ Introducing Playwright Trace Viewer")

[Playwright Trace Viewer](/docs/trace-viewer) is a new GUI tool that helps exploring recorded Playwright traces after the script ran. Playwright traces let you examine:

*   page DOM before and after each Playwright action
*   page rendering before and after each Playwright action
*   browser network during script execution

Traces are recorded using the new [browserContext.tracing](/docs/api/class-browsercontext#browser-context-tracing) API:

    const browser = await chromium.launch();const context = await browser.newContext();// Start tracing before creating / navigating a page.await context.tracing.start({ screenshots: true, snapshots: true });const page = await context.newPage();await page.goto('https://playwright.dev');// Stop tracing and export it into a zip archive.await context.tracing.stop({ path: 'trace.zip' });

Traces are examined later with the Playwright CLI:

    npx playwright show-trace trace.zip

That will open the following GUI:

![image](https://user-images.githubusercontent.com/746130/121109654-d66c4480-c7c0-11eb-8d4d-eb70d2b03811.png)

ðŸ‘‰ Read more in [trace viewer documentation](/docs/trace-viewer).

#### Browser Versions[â€‹](#browser-versions-41 "Direct link to Browser Versions")

*   Chromium 93.0.4530.0
*   Mozilla Firefox 89.0
*   WebKit 14.2

This version of Playwright was also tested against the following stable channels:

*   Google Chrome 91
*   Microsoft Edge 91

#### New APIs[â€‹](#new-apis-17 "Direct link to New APIs")

*   `reducedMotion` option in [page.emulateMedia()](/docs/api/class-page#page-emulate-media), [browserType.launchPersistentContext()](/docs/api/class-browsertype#browser-type-launch-persistent-context), [browser.newContext()](/docs/api/class-browser#browser-new-context) and [browser.newPage()](/docs/api/class-browser#browser-new-page)
*   [browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request)
*   [browserContext.on('requestfailed')](/docs/api/class-browsercontext#browser-context-event-request-failed)
*   [browserContext.on('requestfinished')](/docs/api/class-browsercontext#browser-context-event-request-finished)
*   [browserContext.on('response')](/docs/api/class-browsercontext#browser-context-event-response)
*   `tracesDir` option in [browserType.launch()](/docs/api/class-browsertype#browser-type-launch) and [browserType.launchPersistentContext()](/docs/api/class-browsertype#browser-type-launch-persistent-context)
*   new [browserContext.tracing](/docs/api/class-browsercontext#browser-context-tracing) API namespace
*   new [download.page()](/docs/api/class-download#download-page) method

Version 1.11[â€‹](#version-111 "Direct link to Version 1.11")
-----------------------------------------------------------

ðŸŽ¥ New video: [Playwright: A New Test Automation Framework for the Modern Web](https://youtu.be/_Jla6DyuEu4) ([slides](https://docs.google.com/presentation/d/1xFhZIJrdHkVe2CuMKOrni92HoG2SWslo0DhJJQMR1DI/edit?usp=sharing))

*   We talked about Playwright
*   Showed engineering work behind the scenes
*   Did live demos with new features âœ¨
*   **Special thanks** to [applitools](http://applitools.com/) for hosting the event and inviting us!

#### Browser Versions[â€‹](#browser-versions-42 "Direct link to Browser Versions")

*   Chromium 92.0.4498.0
*   Mozilla Firefox 89.0b6
*   WebKit 14.2

#### New APIs[â€‹](#new-apis-18 "Direct link to New APIs")

*   support for **async predicates** across the API in methods such as [page.waitForRequest()](/docs/api/class-page#page-wait-for-request) and others
*   new **emulation devices**: Galaxy S8, Galaxy S9+, Galaxy Tab S4, Pixel 3, Pixel 4
*   new methods:
    *   [page.waitForURL()](/docs/api/class-page#page-wait-for-url) to await navigations to URL
    *   [video.delete()](/docs/api/class-video#video-delete) and [video.saveAs()](/docs/api/class-video#video-save-as) to manage screen recording
*   new options:
    *   `screen` option in the [browser.newContext()](/docs/api/class-browser#browser-new-context) method to emulate `window.screen` dimensions
    *   `position` option in [page.check()](/docs/api/class-page#page-check) and [page.uncheck()](/docs/api/class-page#page-uncheck) methods
    *   `trial` option to dry-run actions in [page.check()](/docs/api/class-page#page-check), [page.uncheck()](/docs/api/class-page#page-uncheck), [page.click()](/docs/api/class-page#page-click), [page.dblclick()](/docs/api/class-page#page-dblclick), [page.hover()](/docs/api/class-page#page-hover) and [page.tap()](/docs/api/class-page#page-tap)

Version 1.10[â€‹](#version-110 "Direct link to Version 1.10")
-----------------------------------------------------------

*   [Playwright for Java v1.10](https://github.com/microsoft/playwright-java) is **now stable**!
*   Run Playwright against **Google Chrome** and **Microsoft Edge** stable channels with the [new channels API](/docs/browsers).
*   Chromium screenshots are **fast** on Mac & Windows.

#### Bundled Browser Versions[â€‹](#bundled-browser-versions "Direct link to Bundled Browser Versions")

*   Chromium 90.0.4430.0
*   Mozilla Firefox 87.0b10
*   WebKit 14.2

This version of Playwright was also tested against the following stable channels:

*   Google Chrome 89
*   Microsoft Edge 89

#### New APIs[â€‹](#new-apis-19 "Direct link to New APIs")

*   [browserType.launch()](/docs/api/class-browsertype#browser-type-launch) now accepts the new `'channel'` option. Read more in [our documentation](/docs/browsers).

Version 1.9[â€‹](#version-19 "Direct link to Version 1.9")
--------------------------------------------------------

*   [Playwright Inspector](/docs/debug) is a **new GUI tool** to author and debug your tests.
    *   **Line-by-line debugging** of your Playwright scripts, with play, pause and step-through.
    *   Author new scripts by **recording user actions**.
    *   **Generate element selectors** for your script by hovering over elements.
    *   Set the `PWDEBUG=1` environment variable to launch the Inspector
*   **Pause script execution** with [page.pause()](/docs/api/class-page#page-pause) in headed mode. Pausing the page launches [Playwright Inspector](/docs/debug) for debugging.
*   **New has-text pseudo-class** for CSS selectors. `:has-text("example")` matches any element containing `"example"` somewhere inside, possibly in a child or a descendant element. See [more examples](/docs/other-locators#css-matching-by-text).
*   **Page dialogs are now auto-dismissed** during execution, unless a listener for `dialog` event is configured. [Learn more](/docs/dialogs) about this.
*   [Playwright for Python](https://github.com/microsoft/playwright-python) is **now stable** with an idiomatic snake case API and pre-built [Docker image](/docs/docker) to run tests in CI/CD.

#### Browser Versions[â€‹](#browser-versions-43 "Direct link to Browser Versions")

*   Chromium 90.0.4421.0
*   Mozilla Firefox 86.0b10
*   WebKit 14.1

#### New APIs[â€‹](#new-apis-20 "Direct link to New APIs")

*   [page.pause()](/docs/api/class-page#page-pause).

Version 1.8[â€‹](#version-18 "Direct link to Version 1.8")
--------------------------------------------------------

*   [Selecting elements based on layout](/docs/other-locators#css-matching-elements-based-on-layout) with `:left-of()`, `:right-of()`, `:above()` and `:below()`.
    
*   Playwright now includes [command line interface](/docs/test-cli), former playwright-cli.
    
        npx playwright --help
    
*   [page.selectOption()](/docs/api/class-page#page-select-option) now waits for the options to be present.
    
*   New methods to [assert element state](/docs/actionability#assertions) like [page.isEditable()](/docs/api/class-page#page-is-editable).
    

#### New APIs[â€‹](#new-apis-21 "Direct link to New APIs")

*   [elementHandle.isChecked()](/docs/api/class-elementhandle#element-handle-is-checked).
*   [elementHandle.isDisabled()](/docs/api/class-elementhandle#element-handle-is-disabled).
*   [elementHandle.isEditable()](/docs/api/class-elementhandle#element-handle-is-editable).
*   [elementHandle.isEnabled()](/docs/api/class-elementhandle#element-handle-is-enabled).
*   [elementHandle.isHidden()](/docs/api/class-elementhandle#element-handle-is-hidden).
*   [elementHandle.isVisible()](/docs/api/class-elementhandle#element-handle-is-visible).
*   [page.isChecked()](/docs/api/class-page#page-is-checked).
*   [page.isDisabled()](/docs/api/class-page#page-is-disabled).
*   [page.isEditable()](/docs/api/class-page#page-is-editable).
*   [page.isEnabled()](/docs/api/class-page#page-is-enabled).
*   [page.isHidden()](/docs/api/class-page#page-is-hidden).
*   [page.isVisible()](/docs/api/class-page#page-is-visible).
*   New option `'editable'` in [elementHandle.waitForElementState()](/docs/api/class-elementhandle#element-handle-wait-for-element-state).

#### Browser Versions[â€‹](#browser-versions-44 "Direct link to Browser Versions")

*   Chromium 90.0.4392.0
*   Mozilla Firefox 85.0b5
*   WebKit 14.1

Version 1.7[â€‹](#version-17 "Direct link to Version 1.7")
--------------------------------------------------------

*   **New Java SDK**: [Playwright for Java](https://github.com/microsoft/playwright-java) is now on par with [JavaScript](https://github.com/microsoft/playwright), [Python](https://github.com/microsoft/playwright-python) and [.NET bindings](https://github.com/microsoft/playwright-dotnet).
*   **Browser storage API**: New convenience APIs to save and load browser storage state (cookies, local storage) to simplify automation scenarios with authentication.
*   **New CSS selectors**: We heard your feedback for more flexible selectors and have revamped the selectors implementation. Playwright 1.7 introduces [new CSS extensions](/docs/other-locators#css-locator) and there's more coming soon.
*   **New website**: The docs website at [playwright.dev](https://playwright.dev/) has been updated and is now built with [Docusaurus](https://v2.docusaurus.io/).
*   **Support for Apple Silicon**: Playwright browser binaries for WebKit and Chromium are now built for Apple Silicon.

#### New APIs[â€‹](#new-apis-22 "Direct link to New APIs")

*   [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state) to get current state for later reuse.
*   `storageState` option in [browser.newContext()](/docs/api/class-browser#browser-new-context) and [browser.newPage()](/docs/api/class-browser#browser-new-page) to setup browser context state.

#### Browser Versions[â€‹](#browser-versions-45 "Direct link to Browser Versions")

*   Chromium 89.0.4344.0
*   Mozilla Firefox 84.0b9
*   WebKit 14.1

# Canary releases

Canary releases
===============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright for Node.js has a canary releases system.

It permits you to **test new unreleased features** instead of waiting for a full release. They get released daily on the `next` NPM tag of Playwright.

It is a good way to **give feedback to maintainers**, ensuring the newly implemented feature works as intended.

note

Using a canary release in production might seem risky, but in practice, it's not.

A canary release passes all automated tests and is used to test e.g. the HTML report, Trace Viewer, or Playwright Inspector with end-to-end tests.

Next npm Dist Tag[â€‹](#next-npm-dist-tag "Direct link to Next npm Dist Tag")
---------------------------------------------------------------------------

For any code-related commit on `main`, the continuous integration will publish a daily canary release under the `@next` npm dist tag.

You can see on [npm](https://www.npmjs.com/package/@playwright/test?activeTab=versions) the current dist tags:

*   `latest`: stable releases
*   `next`: next releases, published daily
*   `beta`: after a release-branch was cut, usually a week before a stable release each commit gets published under this tag

Using a Canary Release[â€‹](#using-a-canary-release "Direct link to Using a Canary Release")
------------------------------------------------------------------------------------------

    npm install -D @playwright/test@next

Documentation[â€‹](#documentation "Direct link to Documentation")
---------------------------------------------------------------

The stable and the `next` documentation is published on [playwright.dev](https://playwright.dev). To see the `next` documentation, press Shift on the keyboard `5` times.

# Supported languages

Supported languages
===================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright is available in multiple languages that share the same underlying implementation. All core features for automating the browser are supported in all languages, while testing ecosystem integration is different. Pick the language based on your experience, familiarity with its testing ecosystem and your project constraints. For the best experience pick the test runner that we recommend for each language.

JavaScript and TypeScript[â€‹](#javascript-and-typescript "Direct link to JavaScript and TypeScript")
---------------------------------------------------------------------------------------------------

Playwright for Node.js comes with its own [test runner](https://playwright.dev/docs/running-tests) that provides great parallelization mechanism, screenshot assertions, html reporter, automatic tracing etc.

*   [Documentation](https://playwright.dev/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright)

Python[â€‹](#python "Direct link to Python")
------------------------------------------

Playwright [Pytest plugin](https://playwright.dev/python/docs/test-runners) is the recommended way to run end-to-end tests. It provides context isolation, running it on multiple browser configurations and more out of the box.

*   [Documentation](https://playwright.dev/python/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright-python)

Java[â€‹](#java "Direct link to Java")
------------------------------------

You can choose any testing framework such as JUnit or TestNG based on your project requirements.

*   [Documentation](https://playwright.dev/java/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright-java)

.NET[â€‹](#net "Direct link to .NET")
-----------------------------------

Playwright for .NET comes with MSTest, NUnit, xUnit, and xUnit v3 [base classes](https://playwright.dev/dotnet/docs/test-runners) for writing end-to-end tests.

*   [Documentation](https://playwright.dev/dotnet/docs/intro)
*   [GitHub repo](https://github.com/microsoft/playwright-dotnet)

# Installation

Installation
============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Test is an end-to-end test framework for modern web apps. It bundles test runner, assertions, isolation, parallelization and rich tooling. Playwright supports Chromium, WebKit and Firefox on Windows, Linux and macOS, locally or in CI, headless or headed, with native mobile emulation for Chrome (Android) and Mobile Safari.

**You will learn**

*   [How to install Playwright](/docs/intro#installing-playwright)
*   [What's installed](/docs/intro#whats-installed)
*   [How to run the example test](/docs/intro#running-the-example-test)
*   [How to open the HTML test report](/docs/intro#html-test-reports)

Installing Playwright[â€‹](#installing-playwright "Direct link to Installing Playwright")
---------------------------------------------------------------------------------------

Get started by installing Playwright using one of the following methods.

### Using npm, yarn or pnpm[â€‹](#using-npm-yarn-or-pnpm "Direct link to Using npm, yarn or pnpm")

The command below either initializes a new project or adds Playwright to an existing one.

*   npm
*   yarn
*   pnpm

    npm init playwright@latest

    yarn create playwright

    pnpm create playwright

When prompted, choose / confirm:

*   TypeScript or JavaScript (default: TypeScript)
*   Tests folder name (default: `tests`, or `e2e` if `tests` already exists)
*   Add a GitHub Actions workflow (recommended for CI)
*   Install Playwright browsers (default: yes)

You can re-run the command later; it does not overwrite existing tests.

### Using the VS Code Extension[â€‹](#using-the-vs-code-extension "Direct link to Using the VS Code Extension")

You can also create and run tests with the [VS Code Extension](/docs/getting-started-vscode).

What's Installed[â€‹](#whats-installed "Direct link to What's Installed")
-----------------------------------------------------------------------

Playwright downloads required browser binaries and creates the scaffold below.

    playwright.config.ts         # Test configurationpackage.jsonpackage-lock.json            # Or yarn.lock / pnpm-lock.yamltests/  example.spec.ts            # Minimal example test

The [playwright.config](/docs/test-configuration) centralizes configuration: target browsers, timeouts, retries, projects, reporters and more. In existing projects dependencies are added to your current `package.json`.

`tests/` contains a minimal starter test.

Running the Example Test[â€‹](#running-the-example-test "Direct link to Running the Example Test")
------------------------------------------------------------------------------------------------

By default tests run headless in parallel across Chromium, Firefox and WebKit (configurable in [playwright.config](/docs/test-configuration)). Output and aggregated results display in the terminal.

*   npm
*   yarn
*   pnpm

    npx playwright test

    yarn playwright test

    pnpm exec playwright test

![tests running in command line](/assets/images/run-tests-cli-6e7e3119a14239c9021b406d7109dc44.png)

Tips:

*   See the browser window: add `--headed`.
*   Run a single project/browser: `--project=chromium`.
*   Run one file: `npx playwright test tests/example.spec.ts`.
*   Open testing UI: `--ui`.

See [Running Tests](/docs/running-tests) for details on filtering, headed mode, sharding and retries.

HTML Test Reports[â€‹](#html-test-reports "Direct link to HTML Test Reports")
---------------------------------------------------------------------------

After a test run, the [HTML Reporter](/docs/test-reporters#html-reporter) provides a dashboard filterable by the browser, passed, failed, skipped, flaky and more. Click a test to inspect errors, attachments and steps. It auto-opens only when failures occur; open manually with the command below.

*   npm
*   yarn
*   pnpm

    npx playwright show-report

    yarn playwright show-report

    pnpm exec playwright show-report

![HTML Report](/assets/images/html-report-basic-8a88e44830660bfd1da1d17a7241f035.png)

Running the Example Test in UI Mode[â€‹](#running-the-example-test-in-ui-mode "Direct link to Running the Example Test in UI Mode")
---------------------------------------------------------------------------------------------------------------------------------

Run tests with [UI Mode](/docs/test-ui-mode) for watch mode, live step view, time travel debugging and more.

*   npm
*   yarn
*   pnpm

    npx playwright test --ui

    yarn playwright test --ui

    pnpm exec playwright test --ui

![UI Mode](/assets/images/ui-mode-1958baf0398aef5e9c9b5c68c5d56f2d.png)

See the [detailed guide on UI Mode](/docs/test-ui-mode) for watch filters, step details and trace integration.

Updating Playwright[â€‹](#updating-playwright "Direct link to Updating Playwright")
---------------------------------------------------------------------------------

Update Playwright and download new browser binaries and their dependencies:

*   npm
*   yarn
*   pnpm

    npm install -D @playwright/test@latestnpx playwright install --with-deps

    yarn add --dev @playwright/test@latestyarn playwright install --with-deps

    pnpm install --save-dev @playwright/test@latestpnpm exec playwright install --with-deps

Check your installed version:

*   npm
*   yarn
*   pnpm

    npx playwright --version

    yarn playwright --version

    pnpm exec playwright --version

System requirements[â€‹](#system-requirements "Direct link to System requirements")
---------------------------------------------------------------------------------

*   Node.js: latest 20.x, 22.x or 24.x.
*   Windows 11+, Windows Server 2019+ or Windows Subsystem for Linux (WSL).
*   macOS 14 (Ventura) or later.
*   Debian 12 / 13, Ubuntu 22.04 / 24.04 (x86-64 or arm64).

What's next[â€‹](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Write tests using web-first assertions, fixtures and locators](/docs/writing-tests)
*   [Run single or multiple tests; headed mode](/docs/running-tests)
*   [Generate tests with Codegen](/docs/codegen-intro)
*   [View a trace of your tests](/docs/trace-viewer-intro)

# Writing tests

Writing tests
=============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright tests are simple: they **perform actions** and **assert the state** against expectations.

Playwright automatically waits for [actionability](/docs/actionability) checks to pass before performing each action. You don't need to add manual waits or deal with race conditions. Playwright assertions are designed to describe expectations that will eventually be met, eliminating flaky timeouts and racy checks.

**You will learn**

*   [How to write the first test](/docs/writing-tests#first-test)
*   [How to perform actions](/docs/writing-tests#actions)
*   [How to use assertions](/docs/writing-tests#assertions)
*   [How tests run in isolation](/docs/writing-tests#test-isolation)
*   [How to use test hooks](/docs/writing-tests#using-test-hooks)

First test[â€‹](#first-test "Direct link to First test")
------------------------------------------------------

Take a look at the following example to see how to write a test.

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test('has title', async ({ page }) => {  await page.goto('https://playwright.dev/');  // Expect a title "to contain" a substring.  await expect(page).toHaveTitle(/Playwright/);});test('get started link', async ({ page }) => {  await page.goto('https://playwright.dev/');  // Click the get started link.  await page.getByRole('link', { name: 'Get started' }).click();  // Expects page to have a heading with the name of Installation.  await expect(page.getByRole('heading', { name: 'Installation' })).toBeVisible();});

note

Add `// @ts-check` at the start of each test file when using JavaScript in VS Code to get automatic type checking.

Actions[â€‹](#actions "Direct link to Actions")
---------------------------------------------

### Navigation[â€‹](#navigation "Direct link to Navigation")

Most tests start by navigating to a URL. After that, the test interacts with page elements.

    await page.goto('https://playwright.dev/');

Playwright waits for the page to reach the load state before continuing. Learn more about [page.goto()](/docs/api/class-page#page-goto) options.

### Interactions[â€‹](#interactions "Direct link to Interactions")

Performing actions starts with locating elements. Playwright uses [Locators API](/docs/locators) for that. Locators represent a way to find element(s) on the page at any moment. Learn more about the [different types](/docs/locators) of locators available.

Playwright waits for the element to be [actionable](/docs/actionability) before performing the action, so you don't need to wait for it to become available.

    // Create a locator.const getStarted = page.getByRole('link', { name: 'Get started' });// Click it.await getStarted.click();

In most cases, it'll be written in one line:

    await page.getByRole('link', { name: 'Get started' }).click();

### Basic actions[â€‹](#basic-actions "Direct link to Basic actions")

Here are the most popular Playwright actions. For the complete list, check the [Locator API](/docs/api/class-locator) section.

Action

Description

[locator.check()](/docs/api/class-locator#locator-check)

Check the input checkbox

[locator.click()](/docs/api/class-locator#locator-click)

Click the element

[locator.uncheck()](/docs/api/class-locator#locator-uncheck)

Uncheck the input checkbox

[locator.hover()](/docs/api/class-locator#locator-hover)

Hover mouse over the element

[locator.fill()](/docs/api/class-locator#locator-fill)

Fill the form field, input text

[locator.focus()](/docs/api/class-locator#locator-focus)

Focus the element

[locator.press()](/docs/api/class-locator#locator-press)

Press single key

[locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files)

Pick files to upload

[locator.selectOption()](/docs/api/class-locator#locator-select-option)

Select option in the drop down

Assertions[â€‹](#assertions "Direct link to Assertions")
------------------------------------------------------

Playwright includes [test assertions](/docs/test-assertions) in the form of `expect` function. To make an assertion, call `expect(value)` and choose a matcher that reflects the expectation.

Playwright includes async matchers that wait until the expected condition is met. Using these matchers makes tests non-flaky and resilient. For example, this code waits until the page gets the title containing "Playwright":

    await expect(page).toHaveTitle(/Playwright/);

Here are the most popular async assertions. For the complete list, see [assertions guide](/docs/test-assertions):

Assertion

Description

[expect(locator).toBeChecked()](/docs/api/class-locatorassertions#locator-assertions-to-be-checked)

Checkbox is checked

[expect(locator).toBeEnabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)

Control is enabled

[expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible)

Element is visible

[expect(locator).toContainText()](/docs/api/class-locatorassertions#locator-assertions-to-contain-text)

Element contains text

[expect(locator).toHaveAttribute()](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)

Element has attribute

[expect(locator).toHaveCount()](/docs/api/class-locatorassertions#locator-assertions-to-have-count)

List of elements has given length

[expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text)

Element matches text

[expect(locator).toHaveValue()](/docs/api/class-locatorassertions#locator-assertions-to-have-value)

Input element has value

[expect(page).toHaveTitle()](/docs/api/class-pageassertions#page-assertions-to-have-title)

Page has title

[expect(page).toHaveURL()](/docs/api/class-pageassertions#page-assertions-to-have-url)

Page has URL

Playwright also includes generic matchers like `toEqual`, `toContain`, `toBeTruthy` that can be used to assert any conditions. These assertions do not use the `await` keyword as they perform immediate synchronous checks on already available values.

    expect(success).toBeTruthy();

### Test Isolation[â€‹](#test-isolation "Direct link to Test Isolation")

Playwright Test is based on the concept of [test fixtures](/docs/test-fixtures) such as the [built in page fixture](/docs/test-fixtures#built-in-fixtures), which is passed into your test. Pages are [isolated between tests due to the Browser Context](/docs/browser-contexts), which is equivalent to a brand new browser profile. Every test gets a fresh environment, even when multiple tests run in a single browser.

tests/example.spec.ts

    import { test } from '@playwright/test';test('example test', async ({ page }) => {  // "page" belongs to an isolated BrowserContext, created for this specific test.});test('another test', async ({ page }) => {  // "page" in this second test is completely isolated from the first test.});

### Using Test Hooks[â€‹](#using-test-hooks "Direct link to Using Test Hooks")

You can use various [test hooks](/docs/api/class-test) such as `test.describe` to declare a group of tests and `test.beforeEach` and `test.afterEach` which are executed before/after each test. Other hooks include the `test.beforeAll` and `test.afterAll` which are executed once per worker before/after all tests.

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.describe('navigation', () => {  test.beforeEach(async ({ page }) => {    // Go to the starting url before each test.    await page.goto('https://playwright.dev/');  });  test('main navigation', async ({ page }) => {    // Assertions use the expect API.    await expect(page).toHaveURL('https://playwright.dev/');  });});

What's Next[â€‹](#whats-next "Direct link to What's Next")
--------------------------------------------------------

*   [Run single test, multiple tests, headed mode](/docs/running-tests)
*   [Generate tests with Codegen](/docs/codegen-intro)
*   [See a trace of your tests](/docs/trace-viewer-intro)
*   [Explore UI Mode](/docs/test-ui-mode)
*   [Run tests on CI with GitHub Actions](/docs/ci-intro)

# Generating tests

Generating tests
================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can generate tests automatically, providing a quick way to get started with testing. Codegen opens a browser window for interaction and the Playwright Inspector for recording, copying, and managing your generated tests.

**You will learn**

*   [How to record a test](/docs/codegen#recording-a-test)
*   [How to generate locators](/docs/codegen#generating-locators)

Running Codegen[â€‹](#running-codegen "Direct link to Running Codegen")
---------------------------------------------------------------------

Use the `codegen` command to run the test generator followed by the URL of the website you want to generate tests for. The URL is optional and can be added directly in the browser window if omitted.

    npx playwright codegen demo.playwright.dev/todomvc

### Recording a test[â€‹](#recording-a-test "Direct link to Recording a test")

Run `codegen` and perform actions in the browser. Playwright generates code for your interactions automatically. Codegen analyzes the rendered page and recommends the best locator, prioritizing role, text, and test id locators. When multiple elements match a locator, the generator improves it to uniquely identify the target element, reducing test failures and flakiness.

With the test generator you can record:

*   Actions like click or fill by interacting with the page
*   Assertions by clicking a toolbar icon, then clicking a page element to assert against. You can choose:
    *   `'assert visibility'` to assert that an element is visible
    *   `'assert text'` to assert that an element contains specific text
    *   `'assert value'` to assert that an element has a specific value

![Recording a test](/assets/images/record-test-js-648272d0798f11b3f4b97eb2b9ff5dd6.png)

###### [â€‹](#-1 "Direct link to -1")

When you finish interacting with the page, press the `'record'` button to stop recording and use the `'copy'` button to copy the generated code to your editor.

Use the `'clear'` button to clear the code and start recording again. Once finished, close the Playwright Inspector window or stop the terminal command.

To learn more about generating tests, check out our detailed guide on [Codegen](/docs/codegen).

### Generating locators[â€‹](#generating-locators "Direct link to Generating locators")

You can generate [locators](/docs/locators) with the test generator.

*   Press the `'Record'` button to stop recording and the `'Pick Locator'` button will appear
*   Click the `'Pick Locator'` button and hover over elements in the browser window to see the locator highlighted underneath each element
*   Click the element you want to locate and the code for that locator will appear in the locator playground next to the Pick Locator button
*   Edit the locator in the locator playground to fine-tune it and see the matching element highlighted in the browser window
*   Use the copy button to copy the locator and paste it into your code

###### [â€‹](#-2 "Direct link to -2")

![picking a locator](/assets/images/pick-locator-js-7a89c3d033ccf3f1cf20d9548ad7b475.png)

### Emulation[â€‹](#emulation "Direct link to Emulation")

You can generate tests using emulation for specific viewports, devices, color schemes, geolocation, language, or timezone. The test generator can also preserve authenticated state. Check out the [Test Generator](/docs/codegen#emulation) guide to learn more.

What's Next[â€‹](#whats-next "Direct link to What's Next")
--------------------------------------------------------

*   [See a trace of your tests](/docs/trace-viewer-intro)

# Running and debugging tests

Running and debugging tests
===========================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

With Playwright you can run a single test, a set of tests, or all tests. Tests can be run on one browser or multiple browsers using the `--project` flag. Tests run in parallel by default and in headless mode, meaning no browser window opens while running the tests and results appear in the terminal. You can run tests in headed mode using the `--headed` CLI argument, or run your tests in [UI mode](/docs/test-ui-mode) using the `--ui` flag to see a full trace of your tests.

**You will learn**

*   [How to run tests from the command line](/docs/running-tests#command-line)
*   [How to debug tests](/docs/running-tests#debugging-tests)
*   [How to open the HTML test reporter](/docs/running-tests#test-reports)

Running tests[â€‹](#running-tests "Direct link to Running tests")
---------------------------------------------------------------

### Command line[â€‹](#command-line "Direct link to Command line")

You can run your tests with the `playwright test` command. This runs your tests on all browsers as configured in the `playwright.config` file, and results appear in the terminal. Tests run in headless mode by default, meaning no browser window opens while running the tests.

    npx playwright test

![tests running in command line](/assets/images/run-tests-cli-6e7e3119a14239c9021b406d7109dc44.png)

### Run tests in UI mode[â€‹](#run-tests-in-ui-mode "Direct link to Run tests in UI mode")

We highly recommend running your tests with [UI Mode](/docs/test-ui-mode) for a better developer experience where you can easily walk through each step of the test and visually see what was happening before, during and after each step. UI mode also comes with many other features such as the locator picker, watch mode and more.

    npx playwright test --ui

![UI Mode](/assets/images/ui-mode-1958baf0398aef5e9c9b5c68c5d56f2d.png)

Check out our [detailed guide on UI Mode](/docs/test-ui-mode) to learn more about its features.

### Run tests in headed mode[â€‹](#run-tests-in-headed-mode "Direct link to Run tests in headed mode")

To run your tests in headed mode, use the `--headed` flag. This gives you the ability to visually see how Playwright interacts with the website.

    npx playwright test --headed

### Run tests on different browsers[â€‹](#run-tests-on-different-browsers "Direct link to Run tests on different browsers")

To specify which browser you would like to run your tests on, use the `--project` flag followed by the browser name.

    npx playwright test --project webkit

To specify multiple browsers to run your tests on, use the `--project` flag multiple times followed by each browser name.

    npx playwright test --project webkit --project firefox

### Run specific tests[â€‹](#run-specific-tests "Direct link to Run specific tests")

To run a single test file, pass in the test file name that you want to run.

    npx playwright test landing-page.spec.ts

To run a set of test files from different directories, pass in the directory names that you want to run the tests in.

    npx playwright test tests/todo-page/ tests/landing-page/

To run files that have `landing` or `login` in the file name, simply pass in these keywords to the CLI.

    npx playwright test landing login

To run a test with a specific title, use the `-g` flag followed by the title of the test.

    npx playwright test -g "add a todo item"

### Run last failed tests[â€‹](#run-last-failed-tests "Direct link to Run last failed tests")

To run only the tests that failed in the last test run, first run your tests and then run them again with the `--last-failed` flag.

    npx playwright test --last-failed

### Run tests in VS Code[â€‹](#run-tests-in-vs-code "Direct link to Run tests in VS Code")

Tests can be run right from VS Code using the [VS Code extension](https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright). Once installed you can simply click the green triangle next to the test you want to run or run all tests from the testing sidebar. Check out our [Getting Started with VS Code](/docs/getting-started-vscode) guide for more details.

![install playwright extension](/assets/images/vscode-extension-ce873e1c0d856b8c255e9de0781eb8d9.png)

Debugging tests[â€‹](#debugging-tests "Direct link to Debugging tests")
---------------------------------------------------------------------

Since Playwright runs in Node.js, you can debug it with your debugger of choice, e.g. using `console.log`, inside your IDE, or directly in VS Code with the [VS Code Extension](/docs/getting-started-vscode). Playwright comes with [UI Mode](/docs/test-ui-mode), where you can easily walk through each step of the test, see logs, errors, network requests, inspect the DOM snapshot, and more. You can also use the [Playwright Inspector](/docs/debug#playwright-inspector), which allows you to step through Playwright API calls, see their debug logs, and explore [locators](/docs/locators).

### Debug tests in UI mode[â€‹](#debug-tests-in-ui-mode "Direct link to Debug tests in UI mode")

We highly recommend debugging your tests with [UI Mode](/docs/test-ui-mode) for a better developer experience where you can easily walk through each step of the test and visually see what was happening before, during, and after each step. UI mode also comes with many other features such as the locator picker, watch mode, and more.

    npx playwright test --ui

![showing errors in ui mode](/assets/images/ui-mode-error-ccd897a716874f5a9879220df24f1168.png)

While debugging you can use the Pick Locator button to select an element on the page and see the locator that Playwright would use to find that element. You can also edit the locator in the locator playground and see it highlighting live in the browser window. Use the Copy Locator button to copy the locator to your clipboard and then paste it into your test.

![pick locator in ui mode](/assets/images/ui-mode-pick-locator-91b71dca4af49fdfad305a57b9d657b8.png)

Check out our [detailed guide on UI Mode](/docs/test-ui-mode) to learn more about its features.

### Debug tests with the Playwright Inspector[â€‹](#debug-tests-with-the-playwright-inspector "Direct link to Debug tests with the Playwright Inspector")

To debug all tests, run the Playwright test command followed by the `--debug` flag.

    npx playwright test --debug

![Debugging Tests with the Playwright inspector](/assets/images/run-tests-debug-04d9391d458299856c76dee6394874e0.png)

This command opens a browser window as well as the Playwright Inspector. You can use the step over button at the top of the inspector to step through your test. Or, press the play button to run your test from start to finish. Once the test finishes, the browser window closes.

To debug one test file, run the Playwright test command with the test file name that you want to debug followed by the `--debug` flag.

    npx playwright test example.spec.ts --debug

To debug a specific test from the line number where the `test(..` is defined, add a colon followed by the line number at the end of the test file name, followed by the `--debug` flag.

    npx playwright test example.spec.ts:10 --debug

While debugging you can use the Pick Locator button to select an element on the page and see the locator that Playwright would use to find that element. You can also edit the locator and see it highlighting live in the browser window. Use the Copy Locator button to copy the locator to your clipboard and then paste it into your test.

![Locator picker in the Playwright Inspector](/assets/images/run-tests-pick-locator-e13f89473c64d6c7764de5cf97f7413a.png)

Check out our [debugging guide](/docs/debug) to learn more about debugging with the [VS Code debugger](/docs/debug#vs-code-debugger), UI Mode, and the [Playwright Inspector](/docs/debug#playwright-inspector) as well as debugging with [Browser Developer tools](/docs/debug#browser-developer-tools).

Test reports[â€‹](#test-reports "Direct link to Test reports")
------------------------------------------------------------

The [HTML Reporter](/docs/test-reporters#html-reporter) shows you a full report of your tests allowing you to filter the report by browsers, passed tests, failed tests, skipped tests, and flaky tests. By default, the HTML report opens automatically if some tests failed, otherwise you can open it with the following command.

    npx playwright show-report

![HTML Report](/assets/images/html-report-951cba1d9da23ab59e46459fe2e73036.png)

You can filter and search for tests as well as click on each test to see the test errors and explore each step of the test.

![HTML Reporter detail view](/assets/images/html-report-detail-2690519290492b327d5711d2eecddbb4.png)

What's next[â€‹](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Generate tests with Codegen](/docs/codegen-intro)
*   [See a trace of your tests](/docs/trace-viewer-intro)
*   [Explore all the features of UI Mode](/docs/test-ui-mode)
*   [Run your tests on CI with GitHub Actions](/docs/ci-intro)

# Trace viewer

Trace viewer
============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Trace Viewer is a GUI tool that lets you explore recorded Playwright traces of your tests, meaning you can go back and forward through each action of your test and visually see what was happening during each action.

**You will learn**

*   [How to record a trace](/docs/trace-viewer-intro#recording-a-trace)
*   [How to open the HTML report](/docs/trace-viewer-intro#opening-the-html-report)
*   [How to open and view the trace](/docs/trace-viewer-intro#opening-the-trace)

Recording a Trace[â€‹](#recording-a-trace "Direct link to Recording a Trace")
---------------------------------------------------------------------------

By default the [playwright.config](/docs/trace-viewer#tracing-on-ci) file contains the configuration needed to create a `trace.zip` file for each test. Traces are setup to run `on-first-retry`, meaning they run on the first retry of a failed test. Also `retries` are set to 2 when running on CI and 0 locally. This means the traces are recorded on the first retry of a failed test but not on the first run and not on the second retry.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  retries: process.env.CI ? 2 : 0, // set to 2 when running on CI  // ...  use: {    trace: 'on-first-retry', // record traces on first retry of each test  },});

To learn more about available options to record a trace check out our detailed guide on [Trace Viewer](/docs/trace-viewer).

Traces are normally run in a Continuous Integration (CI) environment, because locally you can use [UI Mode](/docs/test-ui-mode) for developing and debugging tests. However, if you want to run traces locally without using [UI Mode](/docs/test-ui-mode), you can force tracing to be on with `--trace on`.

    npx playwright test --trace on

Opening the HTML report[â€‹](#opening-the-html-report "Direct link to Opening the HTML report")
---------------------------------------------------------------------------------------------

The HTML report shows you a report of all your tests that have been run and on which browsers as well as how long they took. Tests can be filtered by passed tests, failed, flaky, or skipped tests. You can also search for a particular test. Clicking on a test opens the detailed view where you can see more information on your tests such as the errors, the test steps, and the trace.

    npx playwright show-report

Opening the trace[â€‹](#opening-the-trace "Direct link to Opening the trace")
---------------------------------------------------------------------------

In the HTML report, click on the trace icon next to the test file name to directly open the trace for the required test.

![playwright html report](/assets/images/html-report-failed-tests-465ab63abc3dcd0728f6449628ffa906.png)

You can also click to open the detailed view of the test and scroll down to the `'Traces'` tab and open the trace by clicking on the trace screenshot.

![playwright html report detailed view](/assets/images/html-report-trace-8b2941b2d73aa86b10f964e227e9e541.png)

To learn more about reporters, check out our detailed guide on reporters including the [HTML Reporter](/docs/test-reporters#html-reporter).

Viewing the trace[â€‹](#viewing-the-trace "Direct link to Viewing the trace")
---------------------------------------------------------------------------

View traces of your test by clicking through each action or hovering using the timeline and see the state of the page before and after the action. Inspect the log, source and network, errors, and console during each step of the test. The trace viewer creates a DOM snapshot so you can fully interact with it and open the browser DevTools to inspect the HTML, CSS, etc.

![playwright trace viewer](/assets/images/trace-viewer-failed-test-5ec04c65e0f0c1ffca58529f6789c752.png)

To learn more about traces, check out our detailed guide on [Trace Viewer](/docs/trace-viewer).

What's next[â€‹](#whats-next "Direct link to What's next")
--------------------------------------------------------

*   [Run tests on CI with GitHub Actions](/docs/ci-intro)
*   [Learn more about Trace Viewer](/docs/trace-viewer)

# Setting up CI

Setting up CI
=============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright tests can be run on any CI provider. This guide covers one way of running tests on GitHub using GitHub Actions. If you would like to learn more, or how to configure other CI providers, check out our detailed [doc on Continuous Integration](/docs/ci).

#### You will learn[â€‹](#you-will-learn "Direct link to You will learn")

*   [How to set up GitHub Actions](/docs/ci-intro#setting-up-github-actions)
*   [How to view test logs](/docs/ci-intro#viewing-test-logs)
*   [How to view the HTML report](/docs/ci-intro#viewing-the-html-report)
*   [How to view the trace](/docs/ci-intro#viewing-the-trace)
*   [How to publish report on the web](/docs/ci-intro#publishing-report-on-the-web)

Setting up GitHub Actions[â€‹](#setting-up-github-actions "Direct link to Setting up GitHub Actions")
---------------------------------------------------------------------------------------------------

When [installing Playwright](/docs/intro) using the [VS Code extension](/docs/getting-started-vscode) or with `npm init playwright@latest`, you are given the option to add a [GitHub Actions](https://docs.github.com/en/actions) workflow. This creates a `playwright.yml` file inside a `.github/workflows` folder containing everything you need so that your tests run on each push and pull request into the main/master branch. Here's how that file looks:

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    steps:    - uses: actions/checkout@v5    - uses: actions/setup-node@v5      with:        node-version: lts/*    - name: Install dependencies      run: npm ci    - name: Install Playwright Browsers      run: npx playwright install --with-deps    - name: Run Playwright tests      run: npx playwright test    - uses: actions/upload-artifact@v4      if: ${{ !cancelled() }}      with:        name: playwright-report        path: playwright-report/        retention-days: 30

The workflow performs these steps:

1.  Clone your repository
2.  Install Node.js
3.  Install NPM Dependencies
4.  Install Playwright Browsers
5.  Run Playwright tests
6.  Upload HTML report to the GitHub UI

To learn more about this, see ["Understanding GitHub Actions"](https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions).

Create a Repo and Push to GitHub[â€‹](#create-a-repo-and-push-to-github "Direct link to Create a Repo and Push to GitHub")
------------------------------------------------------------------------------------------------------------------------

Once you have your [GitHub Actions workflow](#setting-up-github-actions) setup, then all you need to do is [Create a repo on GitHub](https://docs.github.com/en/get-started/quickstart/create-a-repo) or push your code to an existing repository. Follow the instructions on GitHub and don't forget to [initialize a git repository](https://github.com/git-guides/git-init) using the `git init` command so you can [add](https://github.com/git-guides/git-add), [commit](https://github.com/git-guides/git-commit), and [push](https://github.com/git-guides/git-push) your code.

![Create a Repo and Push to GitHub](https://user-images.githubusercontent.com/13063165/183423254-d2735278-a2ab-4d63-bb99-48d8e5e447bc.png)

Opening the Workflows[â€‹](#opening-the-workflows "Direct link to Opening the Workflows")
---------------------------------------------------------------------------------------

Click on the **Actions** tab to see the workflows. Here you see if your tests have passed or failed.

###### [â€‹](#-1 "Direct link to -1")

![opening the workflow](https://user-images.githubusercontent.com/13063165/183423783-58bf2008-514e-4f96-9c12-c9a55703960c.png)

Viewing Test Logs[â€‹](#viewing-test-logs "Direct link to Viewing Test Logs")
---------------------------------------------------------------------------

Clicking on the workflow run shows you all the actions that GitHub performed and clicking on **Run Playwright tests** shows the error messages, what was expected and what was received as well as the call log.

###### [â€‹](#-2 "Direct link to -2")

![Viewing Test Logs](https://user-images.githubusercontent.com/13063165/183423783-58bf2008-514e-4f96-9c12-c9a55703960c.png)

HTML Report[â€‹](#html-report "Direct link to HTML Report")
---------------------------------------------------------

The HTML Report shows you a full report of your tests. You can filter the report by browsers, passed tests, failed tests, skipped tests, and flaky tests.

### Downloading the HTML Report[â€‹](#downloading-the-html-report "Direct link to Downloading the HTML Report")

In the Artifacts section, click on the **playwright-report** to download your report in the format of a zip file.

![Downloading the HTML Report](https://user-images.githubusercontent.com/13063165/183437023-524f1803-84e4-4862-9ce3-1d55af0e023e.png)

### Viewing the HTML Report[â€‹](#viewing-the-html-report "Direct link to Viewing the HTML Report")

Locally opening the report does not work as expected as you need a web server for everything to work correctly. First, extract the zip, preferably in a folder that already has Playwright installed. Using the command line, change into the directory where the report is and use `npx playwright show-report` followed by the name of the extracted folder. This serves up the report and enables you to view it in your browser.

    npx playwright show-report name-of-my-extracted-playwright-report

![viewing the HTML report](https://github.com/microsoft/playwright/assets/13063165/c5f60e56-fb75-4a2d-a4b6-054b8c5d69c1)

To learn more about reports, check out our detailed guide on [HTML Reporter](/docs/test-reporters#html-reporter)

Viewing the Trace[â€‹](#viewing-the-trace "Direct link to Viewing the Trace")
---------------------------------------------------------------------------

Once you have served the report using `npx playwright show-report`, click on the trace icon next to the test's file name as seen in the image above. You can then view the trace of your tests and inspect each action to try to find out why the tests are failing.

![playwright trace viewer](https://github.com/microsoft/playwright/assets/13063165/10fe3585-8401-4051-b1c2-b2e92ac4c274)

Publishing report on the web[â€‹](#publishing-report-on-the-web "Direct link to Publishing report on the web")
------------------------------------------------------------------------------------------------------------

Downloading the HTML report as a zip file is not very convenient. However, we can utilize Azure Storage's static websites hosting capabilities to easily and efficiently serve HTML reports on the Internet, requiring minimal configuration.

1.  Create an [Azure Storage account](https://learn.microsoft.com/en-us/azure/storage/common/storage-account-create).
    
2.  Enable [Static website hosting](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website-how-to#enable-static-website-hosting) for the storage account.
    
3.  Create a Service Principal in Azure and grant it access to Azure Blob storage. Upon successful execution, the command will display the credentials which will be used in the next step.
    
        az ad sp create-for-rbac --name "github-actions" --role "Storage Blob Data Contributor" --scopes /subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP_NAME>/providers/Microsoft.Storage/storageAccounts/<STORAGE_ACCOUNT_NAME>
    
4.  Use the credentials from the previous step to set up encrypted secrets in your GitHub repository. Go to your repository's settings, under [GitHub Actions secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository), and add the following secrets:
    
    *   `AZCOPY_SPA_APPLICATION_ID`
    *   `AZCOPY_SPA_CLIENT_SECRET`
    *   `AZCOPY_TENANT_ID`
    
    For a detailed guide on how to authorize a service principal using a client secret, refer to [this Microsoft documentation](https://learn.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-authorize-azure-active-directory#authorize-a-service-principal-by-using-a-client-secret).
    
5.  Add a step that uploads the HTML report to Azure Storage.
    
    .github/workflows/playwright.yml
    
        ...    - name: Upload HTML report to Azure      shell: bash      run: |        REPORT_DIR='run-${{ github.run_id }}-${{ github.run_attempt }}'        azcopy cp --recursive "./playwright-report/*" "https://<STORAGE_ACCOUNT_NAME>.blob.core.windows.net/\$web/$REPORT_DIR"        echo "::notice title=HTML report url::https://<STORAGE_ACCOUNT_NAME>.z1.web.core.windows.net/$REPORT_DIR/index.html"      env:        AZCOPY_AUTO_LOGIN_TYPE: SPN        AZCOPY_SPA_APPLICATION_ID: '${{ secrets.AZCOPY_SPA_APPLICATION_ID }}'        AZCOPY_SPA_CLIENT_SECRET: '${{ secrets.AZCOPY_SPA_CLIENT_SECRET }}'        AZCOPY_TENANT_ID: '${{ secrets.AZCOPY_TENANT_ID }}'
    

The contents of the `$web` storage container can be accessed from a browser by using the [public URL](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website-how-to?tabs=azure-portal#portal-find-url) of the website.

note

This step will not work for pull requests created from a forked repository because such workflow [doesn't have access to the secrets](https://docs.github.com/en/actions/security-for-github-actions/security-guides/using-secrets-in-github-actions#using-secrets-in-a-workflow).

Properly handling Secrets[â€‹](#properly-handling-secrets "Direct link to Properly handling Secrets")
---------------------------------------------------------------------------------------------------

Artifacts like trace files, HTML reports or even the console logs contain information about your test execution. They can contain sensitive data like user credentials for a test user, access tokens to a staging backend, testing source code, or sometimes even your application source code. Treat these files just as carefully as you treat that sensitive data. If you upload reports and traces as part of your CI workflow, make sure that you only upload them to trusted artifact stores, or that you encrypt the files before upload. The same is true for sharing artifacts with team members: Use a trusted file share or encrypt the files before sharing.

What's Next[â€‹](#whats-next "Direct link to What's Next")
--------------------------------------------------------

*   [Learn how to use Locators](/docs/locators)
*   [Learn how to perform Actions](/docs/input)
*   [Learn how to write Assertions](/docs/test-assertions)
*   [Learn more about the Trace Viewer](/docs/trace-viewer)
*   [Learn more ways of running tests on GitHub Actions](/docs/ci#github-actions)
*   [Learn more about running tests on other CI providers](/docs/ci)

# Playwright Test Agents

Playwright Test Agents
======================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright comes with three Playwright Test Agents out of the box: **ðŸŽ­ planner**, **ðŸŽ­ generator** and **ðŸŽ­ healer**.

These agents can be used independently, sequentially, or as the chained calls in the agentic loop. Using them sequentially will produce test coverage for your product.

*   **ðŸŽ­ planner** explores the app and produces a Markdown test plan
*   **ðŸŽ­ generator** transforms the Markdown plan into the Playwright Test files
*   **ðŸŽ­ healer** executes the test suite and automatically repairs failing tests

### Getting Started[â€‹](#getting-started "Direct link to Getting Started")

Start with adding Playwright Test Agent definitions to your project using the `init-agents` command. These definitions should be regenerated whenever Playwright is updated to pick up new tools and instructions.

*   VS Code
*   Claude Code
*   OpenCode

    npx playwright init-agents --loop=vscode

    npx playwright init-agents --loop=claude

    npx playwright init-agents --loop=opencode

note

VS Code v1.105 (released October 9, 2025) is needed for the agentic experience to function properly in VS Code.

Once the agents have been generated, you can use your AI tool of choice to command these agents to build Playwright Tests.

ðŸŽ­ Planner[â€‹](#-planner "Direct link to ðŸŽ­ Planner")
----------------------------------------------------

Planner agent explores your app and produces a test plan for one or many scenarios and user flows.

**Input**

*   A clear request to the planner (e.g., â€œGenerate a plan for guest checkout.â€)
*   A `seed test` that sets up the environment necessary to interact with your app
*   _(optional)_ A Product Requirement Document (PRD) for context

**Prompt**

![planner prompt](/assets/ideal-img/planner-prompt.3e77e0f.640.png)

> *   Notice how the `seed.spec.ts` is included in the context of the planner.
> *   Planner will run this test to execute all the initialization necessary for your test including the global setup, project dependencies and all the necessary fixtures and hooks.
> *   Planner will also use this seed test as an example of all the generated tests. Alternatively, you can mention the file name in the prompt.

Example: seed.spec.ts

    import { test, expect } from './fixtures';test('seed', async ({ page }) => {  // this test uses custom fixtures from ./fixtures});

**Output**

*   A Markdown test plan saved as `specs/basic-operations.md`.
*   The plan is human-readable but precise enough for test generation.

Example: **specs/basic-operations.md**

    # TodoMVC Application - Basic Operations Test Plan## Application OverviewThe TodoMVC application is a React-based todo list manager that demonstrates standard todo application functionality. The application provides comprehensive task management capabilities with a clean, intuitive interface. Key features include:- **Task Management**: Add, edit, complete, and delete individual todos- **Bulk Operations**: Mark all todos as complete/incomplete and clear all completed todos  - **Filtering System**: View todos by All, Active, or Completed status with URL routing support- **Real-time Counter**: Display of active (incomplete) todo count- **Interactive UI**: Hover states, edit-in-place functionality, and responsive design- **State Persistence**: Maintains state during session navigation## Test Scenarios### 1. Adding New Todos**Seed:** `tests/seed.spec.ts`#### 1.1 Add Valid Todo**Steps:**1. Click in the "What needs to be done?" input field2. Type "Buy groceries"3. Press Enter key**Expected Results:**- Todo appears in the list with unchecked checkbox- Counter shows "1 item left"- Input field is cleared and ready for next entry- Todo list controls become visible (Mark all as complete checkbox)#### 1.2 Add Multiple Todos...

ðŸŽ­ Generator[â€‹](#-generator "Direct link to ðŸŽ­ Generator")
----------------------------------------------------------

Generator agent uses the Markdown plan to produce executable Playwright Tests. It verifies selectors and assertions live as it performs the scenarios. Playwright supports generation hints and provides a catalog of assertions for efficient structural and behavioral validation.

**Input**

*   Markdown plan from `specs/`

**Prompt**

![generator prompt](/assets/ideal-img/generator-prompt.d16aa4b.640.png)

> *   Notice how the `basic-operations.md` is included in the context of the generator.
> *   This is how generator knows where to get the test plan from. Alternatively, you can mention the file name in the prompt.

**Output**

*   A test suite under `tests/`
*   Generated tests may include initial errors that can be healed automatically by the healer agent

Example: **tests/add-valid-todo.spec.ts**

    // spec: specs/basic-operations.md// seed: tests/seed.spec.tsimport { test, expect } from '../fixtures';test.describe('Adding New Todos', () => {  test('Add Valid Todo', async ({ page }) => {    // 1. Click in the "What needs to be done?" input field    const todoInput = page.getByRole('textbox', { name: 'What needs to be done?' });    await todoInput.click();    // 2. Type "Buy groceries"    await todoInput.fill('Buy groceries');    // 3. Press Enter key    await todoInput.press('Enter');    // Expected Results:    // - Todo appears in the list with unchecked checkbox    await expect(page.getByText('Buy groceries')).toBeVisible();    const todoCheckbox = page.getByRole('checkbox', { name: 'Toggle Todo' });    await expect(todoCheckbox).toBeVisible();    await expect(todoCheckbox).not.toBeChecked();    // - Counter shows "1 item left"    await expect(page.getByText('1 item left')).toBeVisible();    // - Input field is cleared and ready for next entry    await expect(todoInput).toHaveValue('');    await expect(todoInput).toBeFocused();    // - Todo list controls become visible (Mark all as complete checkbox)    await expect(page.getByRole('checkbox', { name: 'â¯Mark all as complete' })).toBeVisible();  });});

ðŸŽ­ Healer[â€‹](#-healer "Direct link to ðŸŽ­ Healer")
-------------------------------------------------

When the test fails, the healer agent:

*   Replays the failing steps
*   Inspects the current UI to locate equivalent elements or flows
*   Suggests a patch (e.g., locator update, wait adjustment, data fix)
*   Re-runs the test until it passes or until guardrails stop the loop

**Input**

*   Failing test name

**Prompt**

![healer prompt](/assets/ideal-img/healer-prompt.5677507.640.png)

**Output**

*   A passing test, or a skipped test if the healer believes the that functionality is broken.

Artifacts and Conventions[â€‹](#artifacts-and-conventions "Direct link to Artifacts and Conventions")
---------------------------------------------------------------------------------------------------

The static agent definitions and generated files follow a simple, auditable structure:

    repo/  .github/                    # agent definitions  specs/                      # human-readable test plans    basic-operations.md  tests/                      # generated Playwright tests    seed.spec.ts              # seed test for environment    tests/create/add-valid-todo.spec.ts  playwright.config.ts

### Agent Definitions[â€‹](#agent-definitions "Direct link to Agent Definitions")

Under the hood, agent definitions are collections of instructions and MCP tools. They are provided by Playwright and should be regenerated whenever Playwright is updated.

Example for Claude Code subagents:

    npx playwright init-agents --loop=vscode

### Specs in `specs/`[â€‹](#specs-in-specs "Direct link to specs-in-specs")

Specs are structured plans describing scenarios in human-readable terms. They include steps, expected outcomes, and data. Specs can start from scratch or extend a seed test.

### Tests in `tests/`[â€‹](#tests-in-tests "Direct link to tests-in-tests")

Generated Playwright tests, aligned one-to-one with specs wherever feasible.

### Seed tests `seed.spec.ts`[â€‹](#seed-tests-seedspects "Direct link to seed-tests-seedspects")

Seed tests provide a ready-to-use `page` context to bootstrap execution.

# Annotations

Annotations
===========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright supports tags and annotations that are displayed in the test report.

You can add your own tags and annotations at any moment, but Playwright comes with a few built-in ones:

*   [test.skip()](/docs/api/class-test#test-skip) marks the test as irrelevant. Playwright does not run such a test. Use this annotation when the test is not applicable in some configuration.
*   [test.fail()](/docs/api/class-test#test-fail) marks the test as failing. Playwright will run this test and ensure it does indeed fail. If the test does not fail, Playwright will complain.
*   [test.fixme()](/docs/api/class-test#test-fixme) marks the test as failing. Playwright will not run this test, as opposed to the `fail` annotation. Use `fixme` when running the test is slow or crashes.
*   [test.slow()](/docs/api/class-test#test-slow) marks the test as slow and triples the test timeout.

Annotations can be added to a single test or a group of tests.

Built-in annotations can be conditional, in which case they apply when the condition is truthy, and may depend on test fixtures. There could be multiple annotations on the same test, possibly in different configurations.

Focus a test[â€‹](#focus-a-test "Direct link to Focus a test")
------------------------------------------------------------

You can focus some tests. When there are focused tests, only these tests run.

    test.only('focus this test', async ({ page }) => {  // Run only focused tests in the entire project.});

Skip a test[â€‹](#skip-a-test "Direct link to Skip a test")
---------------------------------------------------------

Mark a test as skipped.

    test.skip('skip this test', async ({ page }) => {  // This test is not run});

Conditionally skip a test[â€‹](#conditionally-skip-a-test "Direct link to Conditionally skip a test")
---------------------------------------------------------------------------------------------------

You can skip certain test based on the condition.

    test('skip this test', async ({ page, browserName }) => {  test.skip(browserName === 'firefox', 'Still working on it');});

Group tests[â€‹](#group-tests "Direct link to Group tests")
---------------------------------------------------------

You can group tests to give them a logical name or to scope before/after hooks to the group.

    import { test, expect } from '@playwright/test';test.describe('two tests', () => {  test('one', async ({ page }) => {    // ...  });  test('two', async ({ page }) => {    // ...  });});

Tag tests[â€‹](#tag-tests "Direct link to Tag tests")
---------------------------------------------------

Sometimes you want to tag your tests as `@fast` or `@slow`, and then filter by tag in the test report. Or you might want to only run tests that have a certain tag.

To tag a test, either provide an additional details object when declaring a test, or add `@`\-token to the test title. Note that tags must start with `@` symbol.

    import { test, expect } from '@playwright/test';test('test login page', {  tag: '@fast',}, async ({ page }) => {  // ...});test('test full report @slow', async ({ page }) => {  // ...});

You can also tag all tests in a group or provide multiple tags:

    import { test, expect } from '@playwright/test';test.describe('group', {  tag: '@report',}, () => {  test('test report header', async ({ page }) => {    // ...  });  test('test full report', {    tag: ['@slow', '@vrt'],  }, async ({ page }) => {    // ...  });});

You can now run tests that have a particular tag with [`--grep`](/docs/test-cli#all-options) command line option.

*   Bash
*   PowerShell
*   Batch

    npx playwright test --grep @fast

    npx playwright test --grep "@fast"

    npx playwright test --grep @fast

Or if you want the opposite, you can skip the tests with a certain tag:

*   Bash
*   PowerShell
*   Batch

    npx playwright test --grep-invert @fast

    npx playwright test --grep-invert "@fast"

    npx playwright test --grep-invert @fast

To run tests containing either tag (logical `OR` operator):

*   Bash
*   PowerShell
*   Batch

    npx playwright test --grep "@fast|@slow"

    npx playwright test --grep --% "@fast^|@slow"

    npx playwright test --grep "@fast^|@slow"

Or run tests containing both tags (logical `AND` operator) using regex lookaheads:

    npx playwright test --grep "(?=.*@fast)(?=.*@slow)"

You can also filter tests in the configuration file via [testConfig.grep](/docs/api/class-testconfig#test-config-grep) and [testProject.grep](/docs/api/class-testproject#test-project-grep).

Annotate tests[â€‹](#annotate-tests "Direct link to Annotate tests")
------------------------------------------------------------------

If you would like to annotate your tests with something more substantial than a tag, you can do that when declaring a test. Annotations have a `type` and a `description` for more context and available in reporter API. Playwright's built-in HTML reporter shows all annotations, except those where `type` starts with `_` symbol.

For example, to annotate a test with an issue url:

    import { test, expect } from '@playwright/test';test('test login page', {  annotation: {    type: 'issue',    description: 'https://github.com/microsoft/playwright/issues/23180',  },}, async ({ page }) => {  // ...});

You can also annotate all tests in a group or provide multiple annotations:

    import { test, expect } from '@playwright/test';test.describe('report tests', {  annotation: { type: 'category', description: 'report' },}, () => {  test('test report header', async ({ page }) => {    // ...  });  test('test full report', {    annotation: [      { type: 'issue', description: 'https://github.com/microsoft/playwright/issues/23180' },      { type: 'performance', description: 'very slow test!' },    ],  }, async ({ page }) => {    // ...  });});

Conditionally skip a group of tests[â€‹](#conditionally-skip-a-group-of-tests "Direct link to Conditionally skip a group of tests")
---------------------------------------------------------------------------------------------------------------------------------

For example, you can run a group of tests just in Chromium by passing a callback.

example.spec.ts

    test.describe('chromium only', () => {  test.skip(({ browserName }) => browserName !== 'chromium', 'Chromium only!');  test.beforeAll(async () => {    // This hook is only run in Chromium.  });  test('test 1', async ({ page }) => {    // This test is only run in Chromium.  });  test('test 2', async ({ page }) => {    // This test is only run in Chromium.  });});

Use fixme in `beforeEach` hook[â€‹](#use-fixme-in-beforeeach-hook "Direct link to use-fixme-in-beforeeach-hook")
--------------------------------------------------------------------------------------------------------------

To avoid running `beforeEach` hooks, you can put annotations in the hook itself.

example.spec.ts

    test.beforeEach(async ({ page, isMobile }) => {  test.fixme(isMobile, 'Settings page does not work in mobile yet');  await page.goto('http://localhost:3000/settings');});test('user profile', async ({ page }) => {  await page.getByText('My Profile').click();  // ...});

Runtime annotations[â€‹](#runtime-annotations "Direct link to Runtime annotations")
---------------------------------------------------------------------------------

While the test is already running, you can add annotations to [`test.info().annotations`](/docs/api/class-testinfo#test-info-annotations).

example.spec.ts

    test('example test', async ({ page, browser }) => {  test.info().annotations.push({    type: 'browser version',    description: browser.version(),  });  // ...});

# Command line

Command line
============

Playwright provides a powerful command line interface for running tests, generating code, debugging, and more. The most up to date list of commands and arguments available on the CLI can always be retrieved via `npx playwright --help`.

Essential Commands[â€‹](#essential-commands "Direct link to Essential Commands")
------------------------------------------------------------------------------

### Run Tests[â€‹](#run-tests "Direct link to Run Tests")

Run your Playwright tests. [Read more about running tests](/docs/running-tests).

#### Syntax[â€‹](#syntax "Direct link to Syntax")

    npx playwright test [options] [test-filter...]

#### Examples[â€‹](#examples "Direct link to Examples")

    # Run all testsnpx playwright test# Run a single test filenpx playwright test tests/todo-page.spec.ts# Run a set of test filesnpx playwright test tests/todo-page/ tests/landing-page/# Run tests at a specific linenpx playwright test my-spec.ts:42# Run tests by titlenpx playwright test -g "add a todo item"# Run tests in headed browsersnpx playwright test --headed# Run tests for a specific projectnpx playwright test --project=chromium# Get helpnpx playwright test --help

**Disable [parallelization](/docs/test-parallel)**

    npx playwright test --workers=1

**Run in debug mode with [Playwright Inspector](/docs/debug)**

    npx playwright test --debug

**Run tests in interactive [UI mode](/docs/test-ui-mode)**

    npx playwright test --ui

#### Common Options[â€‹](#common-options "Direct link to Common Options")

Option

Description

`--debug`

Run tests with Playwright Inspector. Shortcut for `PWDEBUG=1` environment variable and `--timeout=0 --max-failures=1 --headed --workers=1` options.

`--headed`

Run tests in headed browsers (default: headless).

`-g <grep>` or `--grep <grep>`

Only run tests matching this regular expression (default: ".\*").

`--project <project-name...>`

Only run tests from the specified list of projects, supports '\*' wildcard (default: run all projects).

`--ui`

Run tests in interactive UI mode.

`-j <workers>` or `--workers <workers>`

Number of concurrent workers or percentage of logical CPU cores, use 1 to run in a single worker (default: 50%).

#### All Options[â€‹](#all-options "Direct link to All Options")

Option

Description

Non-option arguments

Each argument is treated as a regular expression matched against the full test file path. Only tests from files matching the pattern will be executed. Special symbols like `$` or `*` should be escaped with `\`. In many shells/terminals you may need to quote the arguments.

`-c <file>` or `--config <file>`

Configuration file, or a test directory with optional "playwright.config.{m,c}?{js,ts}". Defaults to `playwright.config.ts` or `playwright.config.js` in the current directory.

`--debug`

Run tests with Playwright Inspector. Shortcut for `PWDEBUG=1` environment variable and `--timeout=0 --max-failures=1 --headed --workers=1` options.

`--fail-on-flaky-tests`

Fail if any test is flagged as flaky (default: false).

`--forbid-only`

Fail if `test.only` is called (default: false). Useful on CI.

`--fully-parallel`

Run all tests in parallel (default: false).

`--global-timeout <timeout>`

Maximum time this test suite can run in milliseconds (default: unlimited).

`-g <grep>` or `--grep <grep>`

Only run tests matching this regular expression (default: ".\*").

`--grep-invert <grep>`

Only run tests that do not match this regular expression.

`--headed`

Run tests in headed browsers (default: headless).

`--ignore-snapshots`

Ignore screenshot and snapshot expectations.

`-j <workers>` or `--workers <workers>`

Number of concurrent workers or percentage of logical CPU cores, use 1 to run in a single worker (default: 50%).

`--last-failed`

Only re-run the failures.

`--list`

Collect all the tests and report them, but do not run.

`--max-failures <N>` or `-x`

Stop after the first `N` failures. Passing `-x` stops after the first failure.

`--no-deps`

Do not run project dependencies.

`--output <dir>`

Folder for output artifacts (default: "test-results").

`--only-changed [ref]`

Only run test files that have been changed between 'HEAD' and 'ref'. Defaults to running all uncommitted changes. Only supports Git.

`--pass-with-no-tests`

Makes test run succeed even if no tests were found.

`--project <project-name...>`

Only run tests from the specified list of projects, supports '\*' wildcard (default: run all projects).

`--quiet`

Suppress stdio.

`--repeat-each <N>`

Run each test `N` times (default: 1).

`--reporter <reporter>`

Reporter to use, comma-separated, can be "dot", "line", "list", or others (default: "list"). You can also pass a path to a custom reporter file.

`--retries <retries>`

Maximum retry count for flaky tests, zero for no retries (default: no retries).

`--shard <shard>`

Shard tests and execute only the selected shard, specified in the form "current/all", 1-based, e.g., "3/5".

`--test-list <file>`

Path to a file containing a list of tests to run. See [test list](#test-list) for details.

`--test-list-invert <file>`

Path to a file containing a list of tests to skip. See [test list](#test-list) for details.

`--timeout <timeout>`

Specify test timeout threshold in milliseconds, zero for unlimited (default: 30 seconds).

`--trace <mode>`

Force tracing mode, can be `on`, `off`, `on-first-retry`, `on-all-retries`, `retain-on-failure`, `retain-on-first-failure`.

`--tsconfig <path>`

Path to a single tsconfig applicable to all imported files (default: look up tsconfig for each imported file separately).

`--ui`

Run tests in interactive UI mode.

`--ui-host <host>`

Host to serve UI on; specifying this option opens UI in a browser tab.

`--ui-port <port>`

Port to serve UI on, 0 for any free port; specifying this option opens UI in a browser tab.

`-u` or `--update-snapshots [mode]`

Update snapshots with actual results. Possible values are "all", "changed", "missing", and "none". Running tests without the flag defaults to "missing"; running tests with the flag but without a value defaults to "changed".

`--update-source-method [mode]`

Update snapshots with actual results. Possible values are "patch" (default), "3way" and "overwrite". "Patch" creates a unified diff file that can be used to update the source code later. "3way" generates merge conflict markers in source code. "Overwrite" overwrites the source code with the new snapshot values.

`-x`

Stop after the first failure.

#### Test list[â€‹](#test-list "Direct link to Test list")

Options `--test-list` and `--test-list-invert` accept a path to a test list file. This file should list tests in the format similar to the output produced in `--list` mode.

    # This is a test list file.# It can include comments and empty lines.# Fully qualified test with a project:[chromium] â€º path/to/example.spec.ts:3:9 â€º suite â€º nested suite â€º example test# This test is included for all projects:path/to/example.spec.ts:3:9 â€º example test# Use "â€º" or ">" as a separator:[firefox] > example.spec.ts > suite > nested suite > example test# Line/column numbers are completely ignored, you can omit them.# Three entries below refer to the same test:example.spec.ts â€º example testexample.spec.ts:15 â€º example testexample.spec.ts:42:42 â€º example test

### Show Report[â€‹](#show-report "Direct link to Show Report")

Display HTML report from previous test run. [Read more about the HTML reporter](/docs/test-reporters#html-reporter).

#### Syntax[â€‹](#syntax-1 "Direct link to Syntax")

    npx playwright show-report [report] [options]

#### Examples[â€‹](#examples-1 "Direct link to Examples")

    # Show latest test reportnpx playwright show-report# Show a specific reportnpx playwright show-report playwright-report/# Show report on custom portnpx playwright show-report --port 8080

#### Options[â€‹](#options "Direct link to Options")

Option

Description

`--host <host>`

Host to serve report on (default: localhost)

`--port <port>`

Port to serve report on (default: 9323)

### Install Browsers[â€‹](#install-browsers "Direct link to Install Browsers")

Install browsers required by Playwright. [Read more about Playwright's browser support](/docs/browsers).

#### Syntax[â€‹](#syntax-2 "Direct link to Syntax")

    npx playwright install [options] [browser...]npx playwright install-deps [options] [browser...]npx playwright uninstall

#### Examples[â€‹](#examples-2 "Direct link to Examples")

    # Install all browsersnpx playwright install# Install only Chromiumnpx playwright install chromium# Install specific browsersnpx playwright install chromium webkit# Install browsers with dependenciesnpx playwright install --with-deps

#### Install Options[â€‹](#install-options "Direct link to Install Options")

Option

Description

`--force`

Force reinstall of stable browser channels

`--with-deps`

Install browser system dependencies

`--dry-run`

Don't perform installation, just print information

`--only-shell`

Only install chromium-headless-shell instead of full Chromium

`--no-shell`

Don't install chromium-headless-shell

#### Install Deps Options[â€‹](#install-deps-options "Direct link to Install Deps Options")

Option

Description

`--dry-run`

Don't perform installation, just print information

Generation & Debugging Tools[â€‹](#generation--debugging-tools "Direct link to Generation & Debugging Tools")
-----------------------------------------------------------------------------------------------------------

### Code Generation[â€‹](#code-generation "Direct link to Code Generation")

Record actions and generate tests for multiple languages. [Read more about Codegen](/docs/codegen-intro).

#### Syntax[â€‹](#syntax-3 "Direct link to Syntax")

    npx playwright codegen [options] [url]

#### Examples[â€‹](#examples-3 "Direct link to Examples")

    # Start recording with interactive UInpx playwright codegen# Record on specific sitenpx playwright codegen https://playwright.dev# Generate Python codenpx playwright codegen --target=python

#### Options[â€‹](#options-1 "Direct link to Options")

Option

Description

`-b, --browser <name>`

Browser to use: chromium, firefox, or webkit (default: chromium)

`-o, --output <file>`

Output file for the generated script

`--target <language>`

Language to use: javascript, playwright-test, python, etc.

`--test-id-attribute <attr>`

Attribute to use for test IDs

### Trace Viewer[â€‹](#trace-viewer "Direct link to Trace Viewer")

Analyze and view test traces for debugging. [Read more about Trace Viewer](/docs/trace-viewer).

#### Syntax[â€‹](#syntax-4 "Direct link to Syntax")

    npx playwright show-trace [options] [trace]

#### Examples[â€‹](#examples-4 "Direct link to Examples")

    # Open trace viewer without a specific trace (can load traces via UI)npx playwright show-trace# View a trace filenpx playwright show-trace trace.zip# View trace from directorynpx playwright show-trace trace/

#### Options[â€‹](#options-2 "Direct link to Options")

Option

Description

`-b, --browser <name>`

Browser to use: chromium, firefox, or webkit (default: chromium)

`-h, --host <host>`

Host to serve trace on

`-p, --port <port>`

Port to serve trace on

Specialized Commands[â€‹](#specialized-commands "Direct link to Specialized Commands")
------------------------------------------------------------------------------------

### Merge Reports[â€‹](#merge-reports "Direct link to Merge Reports")

Read [blob](/docs/test-reporters#blob-reporter) reports and combine them. [Read more about merge-reports](/docs/test-sharding).

#### Syntax[â€‹](#syntax-5 "Direct link to Syntax")

    npx playwright merge-reports [options] <blob dir>

#### Examples[â€‹](#examples-5 "Direct link to Examples")

    # Combine test reportsnpx playwright merge-reports ./reports

#### Options[â€‹](#options-3 "Direct link to Options")

Option

Description

`-c, --config <file>`

Configuration file. Can be used to specify additional configuration for the output report

`--reporter <reporter>`

Reporter to use, comma-separated, can be "list", "line", "dot", "json", "junit", "null", "github", "html", "blob" (default: "list")

### Clear Cache[â€‹](#clear-cache "Direct link to Clear Cache")

Clear all Playwright caches.

#### Syntax[â€‹](#syntax-6 "Direct link to Syntax")

    npx playwright clear-cache

# Configuration

Configuration
=============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright has many options to configure how your tests are run. You can specify these options in the configuration file. Note that test runner options are **top-level**, do not put them into the `use` section.

Basic Configuration[â€‹](#basic-configuration "Direct link to Basic Configuration")
---------------------------------------------------------------------------------

Here are some of the most common configuration options.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  // Look for test files in the "tests" directory, relative to this configuration file.  testDir: 'tests',  // Run all tests in parallel.  fullyParallel: true,  // Fail the build on CI if you accidentally left test.only in the source code.  forbidOnly: !!process.env.CI,  // Retry on CI only.  retries: process.env.CI ? 2 : 0,  // Opt out of parallel tests on CI.  workers: process.env.CI ? 1 : undefined,  // Reporter to use  reporter: 'html',  use: {    // Base URL to use in actions like `await page.goto('/')`.    baseURL: 'http://localhost:3000',    // Collect trace when retrying the failed test.    trace: 'on-first-retry',  },  // Configure projects for major browsers.  projects: [    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },    },  ],  // Run your local dev server before starting the tests.  webServer: {    command: 'npm run start',    url: 'http://localhost:3000',    reuseExistingServer: !process.env.CI,  },});

Option

Description

[testConfig.forbidOnly](/docs/api/class-testconfig#test-config-forbid-only)

Whether to exit with an error if any tests are marked as `test.only`. Useful on CI.

[testConfig.fullyParallel](/docs/api/class-testconfig#test-config-fully-parallel)

have all tests in all files to run in parallel. See [Parallelism](/docs/test-parallel) and [Sharding](/docs/test-sharding) for more details.

[testConfig.projects](/docs/api/class-testconfig#test-config-projects)

Run tests in multiple configurations or on multiple browsers

[testConfig.reporter](/docs/api/class-testconfig#test-config-reporter)

Reporter to use. See [Test Reporters](/docs/test-reporters) to learn more about which reporters are available.

[testConfig.retries](/docs/api/class-testconfig#test-config-retries)

The maximum number of retry attempts per test. See [Test Retries](/docs/test-retries) to learn more about retries.

[testConfig.testDir](/docs/api/class-testconfig#test-config-test-dir)

Directory with the test files.

[testConfig.use](/docs/api/class-testconfig#test-config-use)

Options with `use{}`

[testConfig.webServer](/docs/api/class-testconfig#test-config-web-server)

To launch a server during the tests, use the `webServer` option

[testConfig.workers](/docs/api/class-testconfig#test-config-workers)

The maximum number of concurrent worker processes to use for parallelizing tests. Can also be set as percentage of logical CPU cores, e.g. `'50%'.`. See [Parallelism](/docs/test-parallel) and [Sharding](/docs/test-sharding) for more details.

Filtering Tests[â€‹](#filtering-tests "Direct link to Filtering Tests")
---------------------------------------------------------------------

Filter tests by glob patterns or regular expressions.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Glob patterns or regular expressions to ignore test files.  testIgnore: '*test-assets',  // Glob patterns or regular expressions that match test files.  testMatch: '*todo-tests/*.spec.ts',});

Option

Description

[testConfig.testIgnore](/docs/api/class-testconfig#test-config-test-ignore)

Glob patterns or regular expressions that should be ignored when looking for the test files. For example, `'*test-assets'`

[testConfig.testMatch](/docs/api/class-testconfig#test-config-test-match)

Glob patterns or regular expressions that match test files. For example, `'*todo-tests/*.spec.ts'`. By default, Playwright runs `.*(test|spec).(js|ts|mjs)` files.

Advanced Configuration[â€‹](#advanced-configuration "Direct link to Advanced Configuration")
------------------------------------------------------------------------------------------

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Folder for test artifacts such as screenshots, videos, traces, etc.  outputDir: 'test-results',  // path to the global setup files.  globalSetup: require.resolve('./global-setup'),  // path to the global teardown files.  globalTeardown: require.resolve('./global-teardown'),  // Each test is given 30 seconds.  timeout: 30000,});

Option

Description

[testConfig.globalSetup](/docs/api/class-testconfig#test-config-global-setup)

Path to the global setup file. This file will be required and run before all the tests. It must export a single function.

[testConfig.globalTeardown](/docs/api/class-testconfig#test-config-global-teardown)

Path to the global teardown file. This file will be required and run after all the tests. It must export a single function.

[testConfig.outputDir](/docs/api/class-testconfig#test-config-output-dir)

Folder for test artifacts such as screenshots, videos, traces, etc.

[testConfig.timeout](/docs/api/class-testconfig#test-config-timeout)

Playwright enforces a [timeout](/docs/test-timeouts) for each test, 30 seconds by default. Time spent by the test function, test fixtures and beforeEach hooks is included in the test timeout.

Expect Options[â€‹](#expect-options "Direct link to Expect Options")
------------------------------------------------------------------

Configuration for the expect assertion library.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  expect: {    // Maximum time expect() should wait for the condition to be met.    timeout: 5000,    toHaveScreenshot: {      // An acceptable amount of pixels that could be different, unset by default.      maxDiffPixels: 10,    },    toMatchSnapshot: {      // An acceptable ratio of pixels that are different to the      // total amount of pixels, between 0 and 1.      maxDiffPixelRatio: 0.1,    },  },});

Option

Description

[testConfig.expect](/docs/api/class-testconfig#test-config-expect)

[Web first assertions](/docs/test-assertions) like `expect(locator).toHaveText()` have a separate timeout of 5 seconds by default. This is the maximum time the `expect()` should wait for the condition to be met. Learn more about [test and expect timeouts](/docs/test-timeouts) and how to set them for a single test.

[expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1)

Configuration for the `expect(locator).toHaveScreenshot()` method.

[expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1)

Configuration for the `expect(locator).toMatchSnapshot()` method.

# Configuration (use)

Configuration (use)
===================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

In addition to configuring the test runner you can also configure [Emulation](#emulation-options), [Network](#network-options) and [Recording](#recording-options) for the [Browser](/docs/api/class-browser "Browser") or [BrowserContext](/docs/api/class-browsercontext "BrowserContext"). These options are passed to the `use: {}` object in the Playwright config.

### Basic Options[â€‹](#basic-options "Direct link to Basic Options")

Set the base URL and storage state for all tests:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Base URL to use in actions like `await page.goto('/')`.    baseURL: 'http://localhost:3000',    // Populates context with given storage state.    storageState: 'state.json',  },});

Option

Description

[testOptions.baseURL](/docs/api/class-testoptions#test-options-base-url)

Base URL used for all pages in the context. Allows navigating by using just the path, for example `page.goto('/settings')`.

[testOptions.storageState](/docs/api/class-testoptions#test-options-storage-state)

Populates context with given storage state. Useful for easy authentication, [learn more](/docs/auth).

### Emulation Options[â€‹](#emulation-options "Direct link to Emulation Options")

With Playwright you can emulate a real device such as a mobile phone or tablet. See our [guide on projects](/docs/test-projects) for more info on emulating devices. You can also emulate the `"geolocation"`, `"locale"` and `"timezone"` for all tests or for a specific test as well as set the `"permissions"` to show notifications or change the `"colorScheme"`. See our [Emulation](/docs/emulation) guide to learn more.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Emulates `'prefers-colors-scheme'` media feature.    colorScheme: 'dark',    // Context geolocation.    geolocation: { longitude: 12.492507, latitude: 41.889938 },    // Emulates the user locale.    locale: 'en-GB',    // Grants specified permissions to the browser context.    permissions: ['geolocation'],    // Emulates the user timezone.    timezoneId: 'Europe/Paris',    // Viewport used for all pages in the context.    viewport: { width: 1280, height: 720 },  },});

Option

Description

[testOptions.colorScheme](/docs/api/class-testoptions#test-options-color-scheme)

[Emulates](/docs/emulation#color-scheme-and-media) `'prefers-colors-scheme'` media feature, supported values are `'light'` and `'dark'`

[testOptions.geolocation](/docs/api/class-testoptions#test-options-geolocation)

Context [geolocation](/docs/emulation#geolocation).

[testOptions.locale](/docs/api/class-testoptions#test-options-locale)

[Emulates](/docs/emulation#locale--timezone) the user locale, for example `en-GB`, `de-DE`, etc.

[testOptions.permissions](/docs/api/class-testoptions#test-options-permissions)

A list of [permissions](/docs/emulation#permissions) to grant to all pages in the context.

[testOptions.timezoneId](/docs/api/class-testoptions#test-options-timezone-id)

Changes the [timezone](/docs/emulation#locale--timezone) of the context.

[testOptions.viewport](/docs/api/class-testoptions#test-options-viewport)

[Viewport](/docs/emulation#viewport) used for all pages in the context.

### Network Options[â€‹](#network-options "Direct link to Network Options")

Available options to configure networking:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Whether to automatically download all the attachments.    acceptDownloads: false,    // An object containing additional HTTP headers to be sent with every request.    extraHTTPHeaders: {      'X-My-Header': 'value',    },    // Credentials for HTTP authentication.    httpCredentials: {      username: 'user',      password: 'pass',    },    // Whether to ignore HTTPS errors during navigation.    ignoreHTTPSErrors: true,    // Whether to emulate network being offline.    offline: true,    // Proxy settings used for all pages in the test.    proxy: {      server: 'http://myproxy.com:3128',      bypass: 'localhost',    },  },});

Option

Description

[testOptions.acceptDownloads](/docs/api/class-testoptions#test-options-accept-downloads)

Whether to automatically download all the attachments, defaults to `true`. [Learn more](/docs/downloads) about working with downloads.

[testOptions.extraHTTPHeaders](/docs/api/class-testoptions#test-options-extra-http-headers)

An object containing additional HTTP headers to be sent with every request. All header values must be strings.

[testOptions.httpCredentials](/docs/api/class-testoptions#test-options-http-credentials)

Credentials for [HTTP authentication](/docs/network#http-authentication).

[testOptions.ignoreHTTPSErrors](/docs/api/class-testoptions#test-options-ignore-https-errors)

Whether to ignore HTTPS errors during navigation.

[testOptions.offline](/docs/api/class-testoptions#test-options-offline)

Whether to emulate network being offline.

[testOptions.proxy](/docs/api/class-testoptions#test-options-proxy)

[Proxy settings](/docs/network#http-proxy) used for all pages in the test.

note

You don't have to configure anything to mock network requests. Just define a custom [Route](/docs/api/class-route "Route") that mocks the network for a browser context. See our [network mocking guide](/docs/network) to learn more.

### Recording Options[â€‹](#recording-options "Direct link to Recording Options")

With Playwright you can capture screenshots, record videos as well as traces of your test. By default these are turned off but you can enable them by setting the `screenshot`, `video` and `trace` options in your `playwright.config.js` file.

Trace files, screenshots and videos will appear in the test output directory, typically `test-results`.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Capture screenshot after each test failure.    screenshot: 'only-on-failure',    // Record trace only when retrying a test for the first time.    trace: 'on-first-retry',    // Record video only when retrying a test for the first time.    video: 'on-first-retry'  },});

Option

Description

[testOptions.screenshot](/docs/api/class-testoptions#test-options-screenshot)

Capture [screenshots](/docs/screenshots) of your test. Options include `'off'`, `'on'` and `'only-on-failure'`

[testOptions.trace](/docs/api/class-testoptions#test-options-trace)

Playwright can produce test traces while running the tests. Later on, you can view the trace and get detailed information about Playwright execution by opening [Trace Viewer](/docs/trace-viewer). Options include: `'off'`, `'on'`, `'retain-on-failure'` and `'on-first-retry'`

[testOptions.video](/docs/api/class-testoptions#test-options-video)

Playwright can record [videos](/docs/videos) for your tests. Options include: `'off'`, `'on'`, `'retain-on-failure'` and `'on-first-retry'`

### Other Options[â€‹](#other-options "Direct link to Other Options")

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Maximum time each action such as `click()` can take. Defaults to 0 (no limit).    actionTimeout: 0,    // Name of the browser that runs tests. For example `chromium`, `firefox`, `webkit`.    browserName: 'chromium',    // Toggles bypassing Content-Security-Policy.    bypassCSP: true,    // Channel to use, for example "chrome", "chrome-beta", "msedge", "msedge-beta".    channel: 'chrome',    // Run browser in headless mode.    headless: false,    // Change the default data-testid attribute.    testIdAttribute: 'pw-test-id',  },});

Option

Description

[testOptions.actionTimeout](/docs/api/class-testoptions#test-options-action-timeout)

Timeout for each Playwright action in milliseconds. Defaults to `0` (no timeout). Learn more about [timeouts](/docs/test-timeouts) and how to set them for a single test.

[testOptions.browserName](/docs/api/class-testoptions#test-options-browser-name)

Name of the browser that runs tests. Defaults to 'chromium'. Options include `chromium`, `firefox`, or `webkit`.

[testOptions.bypassCSP](/docs/api/class-testoptions#test-options-bypass-csp)

Toggles bypassing Content-Security-Policy. Useful when CSP includes the production origin. Defaults to `false`.

[testOptions.channel](/docs/api/class-testoptions#test-options-channel)

Browser channel to use. [Learn more](/docs/browsers) about different browsers and channels.

[testOptions.headless](/docs/api/class-testoptions#test-options-headless)

Whether to run the browser in headless mode meaning no browser is shown when running tests. Defaults to `true`.

[testOptions.testIdAttribute](/docs/api/class-testoptions#test-options-test-id-attribute)

Changes the default [`data-testid` attribute](/docs/locators#locate-by-test-id) used by Playwright locators.

### More browser and context options[â€‹](#more-browser-and-context-options "Direct link to More browser and context options")

Any options accepted by [browserType.launch()](/docs/api/class-browsertype#browser-type-launch), [browser.newContext()](/docs/api/class-browser#browser-new-context) or [browserType.connect()](/docs/api/class-browsertype#browser-type-connect) can be put into `launchOptions`, `contextOptions` or `connectOptions` respectively in the `use` section.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    launchOptions: {      slowMo: 50,    },  },});

However, most common ones like `headless` or `viewport` are available directly in the `use` section - see [basic options](#basic-options), [emulation](#emulation-options) or [network](#network-options).

### Explicit Context Creation and Option Inheritance[â€‹](#explicit-context-creation-and-option-inheritance "Direct link to Explicit Context Creation and Option Inheritance")

If using the built-in `browser` fixture, calling [browser.newContext()](/docs/api/class-browser#browser-new-context) will create a context with options inherited from the config:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    userAgent: 'some custom ua',    viewport: { width: 100, height: 100 },  },});

An example test illustrating the initial context options are set:

    test('should inherit use options on context when using built-in browser fixture', async ({  browser,}) => {  const context = await browser.newContext();  const page = await context.newPage();  expect(await page.evaluate(() => navigator.userAgent)).toBe('some custom ua');  expect(await page.evaluate(() => window.innerWidth)).toBe(100);  await context.close();});

### Configuration Scopes[â€‹](#configuration-scopes "Direct link to Configuration Scopes")

You can configure Playwright globally, per project, or per test. For example, you can set the locale to be used globally by adding `locale` to the `use` option of the Playwright config, and then override it for a specific project using the `project` option in the config. You can also override it for a specific test by adding `test.use({})` in the test file and passing in the options.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    locale: 'en-GB'  },});

You can override options for a specific project using the `project` option in the Playwright config.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: {        ...devices['Desktop Chrome'],        locale: 'de-DE',      },    },  ],});

You can override options for a specific test file by using the `test.use()` method and passing in the options. For example to run tests with the French locale for a specific test:

    import { test, expect } from '@playwright/test';test.use({ locale: 'fr-FR' });test('example', async ({ page }) => {  // ...});

The same works inside a describe block. For example to run tests in a describe block with the French locale:

    import { test, expect } from '@playwright/test';test.describe('french language block', () => {  test.use({ locale: 'fr-FR' });  test('example', async ({ page }) => {    // ...  });});

### Reset an option[â€‹](#reset-an-option "Direct link to Reset an option")

You can reset an option to the value defined in the config file. Consider the following config that sets a `baseURL`:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    baseURL: 'https://playwright.dev',  },});

You can now configure `baseURL` for a file, and also opt-out for a single test.

intro.spec.ts

    import { test } from '@playwright/test';// Configure baseURL for this file.test.use({ baseURL: 'https://playwright.dev/docs/intro' });test('check intro contents', async ({ page }) => {  // This test will use "https://playwright.dev/docs/intro" base url as defined above.});test.describe(() => {  // Reset the value to a config-defined one.  test.use({ baseURL: undefined });  test('can navigate to intro from the home page', async ({ page }) => {    // This test will use "https://playwright.dev" base url as defined in the config.  });});

If you would like to completely reset the value to `undefined`, use a long-form fixture notation.

intro.spec.ts

    import { test } from '@playwright/test';// Completely unset baseURL for this file.test.use({  baseURL: [async ({}, use) => use(undefined), { scope: 'test' }],});test('no base url', async ({ page }) => {  // This test will not have a base url.});

# Emulation

Emulation
=========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

With Playwright you can test your app on any browser as well as emulate a real device such as a mobile phone or tablet. Simply configure the devices you would like to emulate and Playwright will simulate the browser behavior such as `"userAgent"`, `"screenSize"`, `"viewport"` and if it `"hasTouch"` enabled. You can also emulate the `"geolocation"`, `"locale"` and `"timezone"` for all tests or for a specific test as well as set the `"permissions"` to show notifications or change the `"colorScheme"`.

Devices[â€‹](#devices "Direct link to Devices")
---------------------------------------------

Playwright comes with a [registry of device parameters](https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json) using [playwright.devices](/docs/api/class-playwright#playwright-devices) for selected desktop, tablet and mobile devices. It can be used to simulate browser behavior for a specific device such as user agent, screen size, viewport and if it has touch enabled. All tests will run with the specified device parameters.

*   Test
*   Library

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test'; // import devicesexport default defineConfig({  projects: [    {      name: 'chromium',      use: {        ...devices['Desktop Chrome'],      },    },    {      name: 'Mobile Safari',      use: {        ...devices['iPhone 13'],      },    },  ],});

    const { chromium, devices } = require('playwright');const browser = await chromium.launch();const iphone13 = devices['iPhone 13'];const context = await browser.newContext({  ...iphone13,});

![playwright.dev website emulated for iPhone 13](https://user-images.githubusercontent.com/13063165/220411073-76fe59f9-9a2d-463d-8e30-c19a7deca133.png)

Viewport[â€‹](#viewport "Direct link to Viewport")
------------------------------------------------

The viewport is included in the device but you can override it for some tests with [page.setViewportSize()](/docs/api/class-page#page-set-viewport-size).

*   Test
*   Library

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: {        ...devices['Desktop Chrome'],        // It is important to define the `viewport` property after destructuring `devices`,        // since devices also define the `viewport` for that device.        viewport: { width: 1280, height: 720 },      },    },  ]});

    // Create context with given viewportconst context = await browser.newContext({  viewport: { width: 1280, height: 1024 }});

Test file:

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({  viewport: { width: 1600, height: 1200 },});test('my test', async ({ page }) => {  // ...});

    // Create context with given viewportconst context = await browser.newContext({  viewport: { width: 1280, height: 1024 }});// Resize viewport for individual pageawait page.setViewportSize({ width: 1600, height: 1200 });// Emulate high-DPIconst context = await browser.newContext({  viewport: { width: 2560, height: 1440 },  deviceScaleFactor: 2,});

The same works inside a test file.

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.describe('specific viewport block', () => {  test.use({ viewport: { width: 1600, height: 1200 } });  test('my test', async ({ page }) => {    // ...  });});

    // Create context with given viewportconst context = await browser.newContext({  viewport: { width: 1600, height: 1200 }});const page = await context.newPage();

isMobile[â€‹](#ismobile "Direct link to isMobile")
------------------------------------------------

Whether the meta viewport tag is taken into account and touch events are enabled.

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: {        ...devices['Desktop Chrome'],        // It is important to define the `isMobile` property after destructuring `devices`,        // since devices also define the `isMobile` for that device.        isMobile: false,      },    },  ]});

Locale & Timezone[â€‹](#locale--timezone "Direct link to Locale & Timezone")
--------------------------------------------------------------------------

Emulate the browser Locale and Timezone which can be set globally for all tests in the config and then overridden for particular tests.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Emulates the browser locale.    locale: 'en-GB',    // Emulates the browser timezone.    timezoneId: 'Europe/Paris',  },});

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({  locale: 'de-DE',  timezoneId: 'Europe/Berlin',});test('my test for de lang in Berlin timezone', async ({ page }) => {  await page.goto('https://www.bing.com');  // ...});

    const context = await browser.newContext({  locale: 'de-DE',  timezoneId: 'Europe/Berlin',});

![Bing in german lang and timezone](https://user-images.githubusercontent.com/13063165/220416571-ccc96ab1-44bb-4579-8430-64502fc24a15.png)

Note that this only affects the browser timezone and locale, not the test runner timezone. To set the test runner timezone, you can use the [`TZ` environment variable](https://nodejs.org/api/cli.html#tz).

Permissions[â€‹](#permissions "Direct link to Permissions")
---------------------------------------------------------

Allow app to show system notifications.

*   Test
*   Library

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Grants specified permissions to the browser context.    permissions: ['notifications'],  },});

    const context = await browser.newContext({  permissions: ['notifications'],});

Allow notifications for a specific domain.

*   Test
*   Library

tests/example.spec.ts

    import { test } from '@playwright/test';test.beforeEach(async ({ context }) => {  // Runs before each test and signs in each page.  await context.grantPermissions(['notifications'], { origin: 'https://skype.com' });});test('first', async ({ page }) => {  // page has notifications permission for https://skype.com.});

    await context.grantPermissions(['notifications'], { origin: 'https://skype.com' });

Revoke all permissions with [browserContext.clearPermissions()](/docs/api/class-browsercontext#browser-context-clear-permissions).

    // Libraryawait context.clearPermissions();

Geolocation[â€‹](#geolocation "Direct link to Geolocation")
---------------------------------------------------------

Grant `"geolocation"` permissions and set geolocation to a specific area.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // Context geolocation    geolocation: { longitude: 12.492507, latitude: 41.889938 },    permissions: ['geolocation'],  },});

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({  geolocation: { longitude: 41.890221, latitude: 12.492348 },  permissions: ['geolocation'],});test('my test with geolocation', async ({ page }) => {  // ...});

    const context = await browser.newContext({  geolocation: { longitude: 41.890221, latitude: 12.492348 },  permissions: ['geolocation']});

![geolocation for italy on bing maps](https://user-images.githubusercontent.com/13063165/220417670-bb22d815-f5cd-47c4-8562-0b88165eac27.png)

Change the location later:

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({  geolocation: { longitude: 41.890221, latitude: 12.492348 },  permissions: ['geolocation'],});test('my test with geolocation', async ({ page, context }) => {  // overwrite the location for this test  await context.setGeolocation({ longitude: 48.858455, latitude: 2.294474 });});

    await context.setGeolocation({ longitude: 48.858455, latitude: 2.294474 });

**Note** you can only change geolocation for all pages in the context.

Color Scheme and Media[â€‹](#color-scheme-and-media "Direct link to Color Scheme and Media")
------------------------------------------------------------------------------------------

Emulate the users `"colorScheme"`. Supported values are 'light' and 'dark'. You can also emulate the media type with [page.emulateMedia()](/docs/api/class-page#page-emulate-media).

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    colorScheme: 'dark',  },});

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({  colorScheme: 'dark' // or 'light'});test('my test with dark mode', async ({ page }) => {  // ...});

    // Create context with dark modeconst context = await browser.newContext({  colorScheme: 'dark' // or 'light'});// Create page with dark modeconst page = await browser.newPage({  colorScheme: 'dark' // or 'light'});// Change color scheme for the pageawait page.emulateMedia({ colorScheme: 'dark' });// Change media for pageawait page.emulateMedia({ media: 'print' });

![playwright web in dark mode](https://user-images.githubusercontent.com/13063165/220411638-55d2b051-4678-4da7-9f0b-ed22f5a3c47c.png)

User Agent[â€‹](#user-agent "Direct link to User Agent")
------------------------------------------------------

The User Agent is included in the device and therefore you will rarely need to change it however if you do need to test a different user agent you can override it with the `userAgent` property.

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({ userAgent: 'My user agent' });test('my user agent test', async ({ page }) => {  // ...});

    const context = await browser.newContext({  userAgent: 'My user agent'});

Offline[â€‹](#offline "Direct link to Offline")
---------------------------------------------

Emulate the network being offline.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    offline: true  },});

JavaScript Enabled[â€‹](#javascript-enabled "Direct link to JavaScript Enabled")
------------------------------------------------------------------------------

Emulate a user scenario where JavaScript is disabled.

*   Test
*   Library

tests/example.spec.ts

    import { test, expect } from '@playwright/test';test.use({ javaScriptEnabled: false });test('test with no JavaScript', async ({ page }) => {  // ...});

    const context = await browser.newContext({  javaScriptEnabled: false});

# Fixtures

Fixtures
========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Test is based on the concept of test fixtures. Test fixtures are used to establish the environment for each test, giving the test everything it needs and nothing else. Test fixtures are isolated between tests. With fixtures, you can group tests based on their meaning, instead of their common setup.

### Built-in fixtures[â€‹](#built-in-fixtures "Direct link to Built-in fixtures")

You have already used test fixtures in your first test.

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('https://playwright.dev/');  await expect(page).toHaveTitle(/Playwright/);});

The `{ page }` argument tells Playwright Test to set up the `page` fixture and provide it to your test function.

Here is a list of the pre-defined fixtures that you are likely to use most of the time:

Fixture

Type

Description

page

[Page](/docs/api/class-page "Page")

Isolated page for this test run.

context

[BrowserContext](/docs/api/class-browsercontext "BrowserContext")

Isolated context for this test run. The `page` fixture belongs to this context as well. Learn how to [configure context](/docs/test-configuration).

browser

[Browser](/docs/api/class-browser "Browser")

Browsers are shared across tests to optimize resources. Learn how to [configure browsers](/docs/test-configuration).

browserName

[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

The name of the browser currently running the test. Either `chromium`, `firefox` or `webkit`.

request

[APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext")

Isolated [APIRequestContext](/docs/api/class-apirequestcontext) instance for this test run.

### Without fixtures[â€‹](#without-fixtures "Direct link to Without fixtures")

Here is how a typical test environment setup differs between the traditional test style and the fixture-based one.

`TodoPage` is a class that helps us interact with a "todo list" page of the web app, following the [Page Object Model](/docs/pom) pattern. It uses Playwright's `page` internally.

Click to expand the code for the `TodoPage`

todo-page.ts

    import type { Page, Locator } from '@playwright/test';export class TodoPage {  private readonly inputBox: Locator;  private readonly todoItems: Locator;  constructor(public readonly page: Page) {    this.inputBox = this.page.locator('input.new-todo');    this.todoItems = this.page.getByTestId('todo-item');  }  async goto() {    await this.page.goto('https://demo.playwright.dev/todomvc/');  }  async addToDo(text: string) {    await this.inputBox.fill(text);    await this.inputBox.press('Enter');  }  async remove(text: string) {    const todo = this.todoItems.filter({ hasText: text });    await todo.hover();    await todo.getByLabel('Delete').click();  }  async removeAll() {    while ((await this.todoItems.count()) > 0) {      await this.todoItems.first().hover();      await this.todoItems.getByLabel('Delete').first().click();    }  }}

todo.spec.ts

    const { test } = require('@playwright/test');const { TodoPage } = require('./todo-page');test.describe('todo tests', () => {  let todoPage;  test.beforeEach(async ({ page }) => {    todoPage = new TodoPage(page);    await todoPage.goto();    await todoPage.addToDo('item1');    await todoPage.addToDo('item2');  });  test.afterEach(async () => {    await todoPage.removeAll();  });  test('should add an item', async () => {    await todoPage.addToDo('my item');    // ...  });  test('should remove an item', async () => {    await todoPage.remove('item1');    // ...  });});

### With fixtures[â€‹](#with-fixtures "Direct link to With fixtures")

Fixtures have a number of advantages over before/after hooks:

*   Fixtures **encapsulate** setup and teardown in the same place so it is easier to write. So if you have an after hook that tears down what was created in a before hook, consider turning them into a fixture.
*   Fixtures are **reusable** between test files - you can define them once and use them in all your tests. That's how Playwright's built-in `page` fixture works. So if you have a helper function that is used in multiple tests, consider turning it into a fixture.
*   Fixtures are **on-demand** - you can define as many fixtures as you'd like, and Playwright Test will setup only the ones needed by your test and nothing else.
*   Fixtures are **composable** - they can depend on each other to provide complex behaviors.
*   Fixtures are **flexible**. Tests can use any combination of fixtures to precisely tailor the environment to their needs, without affecting other tests.
*   Fixtures simplify **grouping**. You no longer need to wrap tests in `describe`s that set up their environment, and are free to group your tests by their meaning instead.

Click to expand the code for the `TodoPage`

todo-page.ts

    import type { Page, Locator } from '@playwright/test';export class TodoPage {  private readonly inputBox: Locator;  private readonly todoItems: Locator;  constructor(public readonly page: Page) {    this.inputBox = this.page.locator('input.new-todo');    this.todoItems = this.page.getByTestId('todo-item');  }  async goto() {    await this.page.goto('https://demo.playwright.dev/todomvc/');  }  async addToDo(text: string) {    await this.inputBox.fill(text);    await this.inputBox.press('Enter');  }  async remove(text: string) {    const todo = this.todoItems.filter({ hasText: text });    await todo.hover();    await todo.getByLabel('Delete').click();  }  async removeAll() {    while ((await this.todoItems.count()) > 0) {      await this.todoItems.first().hover();      await this.todoItems.getByLabel('Delete').first().click();    }  }}

example.spec.ts

    import { test as base } from '@playwright/test';import { TodoPage } from './todo-page';// Extend basic test by providing a "todoPage" fixture.const test = base.extend<{ todoPage: TodoPage }>({  todoPage: async ({ page }, use) => {    const todoPage = new TodoPage(page);    await todoPage.goto();    await todoPage.addToDo('item1');    await todoPage.addToDo('item2');    await use(todoPage);    await todoPage.removeAll();  },});test('should add an item', async ({ todoPage }) => {  await todoPage.addToDo('my item');  // ...});test('should remove an item', async ({ todoPage }) => {  await todoPage.remove('item1');  // ...});

Creating a fixture[â€‹](#creating-a-fixture "Direct link to Creating a fixture")
------------------------------------------------------------------------------

To create your own fixture, use [test.extend()](/docs/api/class-test#test-extend) to create a new `test` object that will include it.

Below we create two fixtures `todoPage` and `settingsPage` that follow the [Page Object Model](/docs/pom) pattern.

Click to expand the code for the `TodoPage` and `SettingsPage`

todo-page.ts

    import type { Page, Locator } from '@playwright/test';export class TodoPage {  private readonly inputBox: Locator;  private readonly todoItems: Locator;  constructor(public readonly page: Page) {    this.inputBox = this.page.locator('input.new-todo');    this.todoItems = this.page.getByTestId('todo-item');  }  async goto() {    await this.page.goto('https://demo.playwright.dev/todomvc/');  }  async addToDo(text: string) {    await this.inputBox.fill(text);    await this.inputBox.press('Enter');  }  async remove(text: string) {    const todo = this.todoItems.filter({ hasText: text });    await todo.hover();    await todo.getByLabel('Delete').click();  }  async removeAll() {    while ((await this.todoItems.count()) > 0) {      await this.todoItems.first().hover();      await this.todoItems.getByLabel('Delete').first().click();    }  }}

SettingsPage is similar:

settings-page.ts

    import type { Page } from '@playwright/test';export class SettingsPage {  constructor(public readonly page: Page) {  }  async switchToDarkMode() {    // ...  }}

my-test.ts

    import { test as base } from '@playwright/test';import { TodoPage } from './todo-page';import { SettingsPage } from './settings-page';// Declare the types of your fixtures.type MyFixtures = {  todoPage: TodoPage;  settingsPage: SettingsPage;};// Extend base test by providing "todoPage" and "settingsPage".// This new "test" can be used in multiple test files, and each of them will get the fixtures.export const test = base.extend<MyFixtures>({  todoPage: async ({ page }, use) => {    // Set up the fixture.    const todoPage = new TodoPage(page);    await todoPage.goto();    await todoPage.addToDo('item1');    await todoPage.addToDo('item2');    // Use the fixture value in the test.    await use(todoPage);    // Clean up the fixture.    await todoPage.removeAll();  },  settingsPage: async ({ page }, use) => {    await use(new SettingsPage(page));  },});export { expect } from '@playwright/test';

note

Custom fixture names should start with a letter or underscore, and can contain only letters, numbers, and underscores.

Using a fixture[â€‹](#using-a-fixture "Direct link to Using a fixture")
---------------------------------------------------------------------

Just mention a fixture in your test function argument, and the test runner will take care of it. Fixtures are also available in hooks and other fixtures. If you use TypeScript, fixtures will be type safe.

Below we use the `todoPage` and `settingsPage` fixtures that we defined above.

    import { test, expect } from './my-test';test.beforeEach(async ({ settingsPage }) => {  await settingsPage.switchToDarkMode();});test('basic test', async ({ todoPage, page }) => {  await todoPage.addToDo('something nice');  await expect(page.getByTestId('todo-title')).toContainText(['something nice']);});

Overriding fixtures[â€‹](#overriding-fixtures "Direct link to Overriding fixtures")
---------------------------------------------------------------------------------

In addition to creating your own fixtures, you can also override existing fixtures to fit your needs. Consider the following example which overrides the `page` fixture by automatically navigating to the `baseURL`:

    import { test as base } from '@playwright/test';export const test = base.extend({  page: async ({ baseURL, page }, use) => {    await page.goto(baseURL);    await use(page);  },});

Notice that in this example, the `page` fixture is able to depend on other built-in fixtures such as [testOptions.baseURL](/docs/api/class-testoptions#test-options-base-url). We can now configure `baseURL` in the configuration file, or locally in the test file with [test.use()](/docs/api/class-test#test-use).

example.spec.ts

    test.use({ baseURL: 'https://playwright.dev' });

Fixtures can also be overridden, causing the base fixture to be completely replaced with something different. For example, we could override the [testOptions.storageState](/docs/api/class-testoptions#test-options-storage-state) fixture to provide our own data.

    import { test as base } from '@playwright/test';export const test = base.extend({  storageState: async ({}, use) => {    const cookie = await getAuthCookie();    await use({ cookies: [cookie] });  },});

Worker-scoped fixtures[â€‹](#worker-scoped-fixtures "Direct link to Worker-scoped fixtures")
------------------------------------------------------------------------------------------

Playwright Test uses [worker processes](/docs/test-parallel) to run test files. Similar to how test fixtures are set up for individual test runs, worker fixtures are set up for each worker process. That's where you can set up services, run servers, etc. Playwright Test will reuse the worker process for as many test files as it can, provided their worker fixtures match and hence environments are identical.

Below we'll create an `account` fixture that will be shared by all tests in the same worker, and override the `page` fixture to log in to this account for each test. To generate unique accounts, we'll use the [workerInfo.workerIndex](/docs/api/class-workerinfo#worker-info-worker-index) that is available to any test or fixture. Note the tuple-like syntax for the worker fixture - we have to pass `{scope: 'worker'}` so that test runner sets this fixture up once per worker.

my-test.ts

    import { test as base } from '@playwright/test';type Account = {  username: string;  password: string;};// Note that we pass worker fixture types as a second template parameter.export const test = base.extend<{}, { account: Account }>({  account: [async ({ browser }, use, workerInfo) => {    // Unique username.    const username = 'user' + workerInfo.workerIndex;    const password = 'verysecure';    // Create the account with Playwright.    const page = await browser.newPage();    await page.goto('/signup');    await page.getByLabel('User Name').fill(username);    await page.getByLabel('Password').fill(password);    await page.getByText('Sign up').click();    // Make sure everything is ok.    await expect(page.getByTestId('result')).toHaveText('Success');    // Do not forget to cleanup.    await page.close();    // Use the account value.    await use({ username, password });  }, { scope: 'worker' }],  page: async ({ page, account }, use) => {    // Sign in with our account.    const { username, password } = account;    await page.goto('/signin');    await page.getByLabel('User Name').fill(username);    await page.getByLabel('Password').fill(password);    await page.getByText('Sign in').click();    await expect(page.getByTestId('userinfo')).toHaveText(username);    // Use signed-in page in the test.    await use(page);  },});export { expect } from '@playwright/test';

Automatic fixtures[â€‹](#automatic-fixtures "Direct link to Automatic fixtures")
------------------------------------------------------------------------------

Automatic fixtures are set up for each test/worker, even when the test does not list them directly. To create an automatic fixture, use the tuple syntax and pass `{ auto: true }`.

Here is an example fixture that automatically attaches debug logs when the test fails, so we can later review the logs in the reporter. Note how it uses the [TestInfo](/docs/api/class-testinfo "TestInfo") object that is available in each test/fixture to retrieve metadata about the test being run.

my-test.ts

    import debug from 'debug';import fs from 'fs';import { test as base } from '@playwright/test';export const test = base.extend<{ saveLogs: void }>({  saveLogs: [async ({}, use, testInfo) => {    // Collecting logs during the test.    const logs = [];    debug.log = (...args) => logs.push(args.map(String).join(''));    debug.enable('myserver');    await use();    // After the test we can check whether the test passed or failed.    if (testInfo.status !== testInfo.expectedStatus) {      // outputPath() API guarantees a unique file name.      const logFile = testInfo.outputPath('logs.txt');      await fs.promises.writeFile(logFile, logs.join('\n'), 'utf8');      testInfo.attachments.push({ name: 'logs', contentType: 'text/plain', path: logFile });    }  }, { auto: true }],});export { expect } from '@playwright/test';

Fixture timeout[â€‹](#fixture-timeout "Direct link to Fixture timeout")
---------------------------------------------------------------------

By default, the fixture inherits the timeout value of the test. However, for slow fixtures, especially [worker-scoped](#worker-scoped-fixtures) ones, it is convenient to have a separate timeout. This way you can keep the overall test timeout small, and give the slow fixture more time.

    import { test as base, expect } from '@playwright/test';const test = base.extend<{ slowFixture: string }>({  slowFixture: [async ({}, use) => {    // ... perform a slow operation ...    await use('hello');  }, { timeout: 60000 }]});test('example test', async ({ slowFixture }) => {  // ...});

Fixtures-options[â€‹](#fixtures-options "Direct link to Fixtures-options")
------------------------------------------------------------------------

Playwright Test supports running multiple test projects that can be configured separately. You can use "option" fixtures to make your configuration options declarative and type safe. Learn more about [parameterizing tests](/docs/test-parameterize).

Below we'll create a `defaultItem` option in addition to the `todoPage` fixture from other examples. This option will be set in the configuration file. Note the tuple syntax and `{ option: true }` argument.

Click to expand the code for the `TodoPage`

todo-page.ts

    import type { Page, Locator } from '@playwright/test';export class TodoPage {  private readonly inputBox: Locator;  private readonly todoItems: Locator;  constructor(public readonly page: Page) {    this.inputBox = this.page.locator('input.new-todo');    this.todoItems = this.page.getByTestId('todo-item');  }  async goto() {    await this.page.goto('https://demo.playwright.dev/todomvc/');  }  async addToDo(text: string) {    await this.inputBox.fill(text);    await this.inputBox.press('Enter');  }  async remove(text: string) {    const todo = this.todoItems.filter({ hasText: text });    await todo.hover();    await todo.getByLabel('Delete').click();  }  async removeAll() {    while ((await this.todoItems.count()) > 0) {      await this.todoItems.first().hover();      await this.todoItems.getByLabel('Delete').first().click();    }  }}

my-test.ts

    import { test as base } from '@playwright/test';import { TodoPage } from './todo-page';// Declare your options to type-check your configuration.export type MyOptions = {  defaultItem: string;};type MyFixtures = {  todoPage: TodoPage;};// Specify both option and fixture types.export const test = base.extend<MyOptions & MyFixtures>({  // Define an option and provide a default value.  // We can later override it in the config.  defaultItem: ['Something nice', { option: true }],  // Our "todoPage" fixture depends on the option.  todoPage: async ({ page, defaultItem }, use) => {    const todoPage = new TodoPage(page);    await todoPage.goto();    await todoPage.addToDo(defaultItem);    await use(todoPage);    await todoPage.removeAll();  },});export { expect } from '@playwright/test';

We can now use the `todoPage` fixture as usual, and set the `defaultItem` option in the configuration file.

playwright.config.ts

    import { defineConfig } from '@playwright/test';import type { MyOptions } from './my-test';export default defineConfig<MyOptions>({  projects: [    {      name: 'shopping',      use: { defaultItem: 'Buy milk' },    },    {      name: 'wellbeing',      use: { defaultItem: 'Exercise!' },    },  ]});

**Array as an option value**

If the value of your option is an array, for example `[{ name: 'Alice' }, { name: 'Bob' }]`, you'll need to wrap it into an extra array when providing the value. This is best illustrated with an example.

    type Person = { name: string };const test = base.extend<{ persons: Person[] }>({  // Declare the option, default value is an empty array.  persons: [[], { option: true }],});// Option value is an array of persons.const actualPersons = [{ name: 'Alice' }, { name: 'Bob' }];test.use({  // CORRECT: Wrap the value into an array and pass the scope.  persons: [actualPersons, { scope: 'test' }],});test.use({  // WRONG: passing an array value directly will not work.  persons: actualPersons,});

**Reset an option**

You can reset an option to the value defined in the config file by setting it to `undefined`. Consider the following config that sets a `baseURL`:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    baseURL: 'https://playwright.dev',  },});

You can now configure `baseURL` for a file, and also opt-out for a single test.

intro.spec.ts

    import { test } from '@playwright/test';// Configure baseURL for this file.test.use({ baseURL: 'https://playwright.dev/docs/intro' });test('check intro contents', async ({ page }) => {  // This test will use "https://playwright.dev/docs/intro" base url as defined above.});test.describe(() => {  // Reset the value to a config-defined one.  test.use({ baseURL: undefined });  test('can navigate to intro from the home page', async ({ page }) => {    // This test will use "https://playwright.dev" base url as defined in the config.  });});

If you would like to completely reset the value to `undefined`, use a long-form fixture notation.

intro.spec.ts

    import { test } from '@playwright/test';// Completely unset baseURL for this file.test.use({  baseURL: [async ({}, use) => use(undefined), { scope: 'test' }],});test('no base url', async ({ page }) => {  // This test will not have a base url.});

Execution order[â€‹](#execution-order "Direct link to Execution order")
---------------------------------------------------------------------

Each fixture has a setup and teardown phase before and after the `await use()` call in the fixture. Setup is executed before the test/hook requiring it is run, and teardown is executed when the fixture is no longer being used by the test/hook.

Fixtures follow these rules to determine the execution order:

*   When fixture A depends on fixture B: B is always set up before A and torn down after A.
*   Non-automatic fixtures are executed lazily, only when the test/hook needs them.
*   Test-scoped fixtures are torn down after each test, while worker-scoped fixtures are only torn down when the worker process executing tests is torn down.

Consider the following example:

    import { test as base } from '@playwright/test';const test = base.extend<{  testFixture: string,  autoTestFixture: string,  unusedFixture: string,}, {  workerFixture: string,  autoWorkerFixture: string,}>({  workerFixture: [async ({ browser }) => {    // workerFixture setup...    await use('workerFixture');    // workerFixture teardown...  }, { scope: 'worker' }],  autoWorkerFixture: [async ({ browser }) => {    // autoWorkerFixture setup...    await use('autoWorkerFixture');    // autoWorkerFixture teardown...  }, { scope: 'worker', auto: true }],  testFixture: [async ({ page, workerFixture }) => {    // testFixture setup...    await use('testFixture');    // testFixture teardown...  }, { scope: 'test' }],  autoTestFixture: [async () => {    // autoTestFixture setup...    await use('autoTestFixture');    // autoTestFixture teardown...  }, { scope: 'test', auto: true }],  unusedFixture: [async ({ page }) => {    // unusedFixture setup...    await use('unusedFixture');    // unusedFixture teardown...  }, { scope: 'test' }],});test.beforeAll(async () => { /* ... */ });test.beforeEach(async ({ page }) => { /* ... */ });test('first test', async ({ page }) => { /* ... */ });test('second test', async ({ testFixture }) => { /* ... */ });test.afterEach(async () => { /* ... */ });test.afterAll(async () => { /* ... */ });

Normally, if all tests pass and no errors are thrown, the order of execution is as following.

*   worker setup and `beforeAll` section:
    *   `browser` setup because it is required by `autoWorkerFixture`.
    *   `autoWorkerFixture` setup because automatic worker fixtures are always set up before anything else.
    *   `beforeAll` runs.
*   `first test` section:
    *   `autoTestFixture` setup because automatic test fixtures are always set up before test and `beforeEach` hooks.
    *   `page` setup because it is required in `beforeEach` hook.
    *   `beforeEach` runs.
    *   `first test` runs.
    *   `afterEach` runs.
    *   `page` teardown because it is a test-scoped fixture and should be torn down after the test finishes.
    *   `autoTestFixture` teardown because it is a test-scoped fixture and should be torn down after the test finishes.
*   `second test` section:
    *   `autoTestFixture` setup because automatic test fixtures are always set up before test and `beforeEach` hooks.
    *   `page` setup because it is required in `beforeEach` hook.
    *   `beforeEach` runs.
    *   `workerFixture` setup because it is required by `testFixture` that is required by the `second test`.
    *   `testFixture` setup because it is required by the `second test`.
    *   `second test` runs.
    *   `afterEach` runs.
    *   `testFixture` teardown because it is a test-scoped fixture and should be torn down after the test finishes.
    *   `page` teardown because it is a test-scoped fixture and should be torn down after the test finishes.
    *   `autoTestFixture` teardown because it is a test-scoped fixture and should be torn down after the test finishes.
*   `afterAll` and worker teardown section:
    *   `afterAll` runs.
    *   `workerFixture` teardown because it is a workers-scoped fixture and should be torn down once at the end.
    *   `autoWorkerFixture` teardown because it is a workers-scoped fixture and should be torn down once at the end.
    *   `browser` teardown because it is a workers-scoped fixture and should be torn down once at the end.

A few observations:

*   `page` and `autoTestFixture` are set up and torn down for each test, as test-scoped fixtures.
*   `unusedFixture` is never set up because it is not used by any tests/hooks.
*   `testFixture` depends on `workerFixture` and triggers its setup.
*   `workerFixture` is lazily set up before the second test, but torn down once during worker shutdown, as a worker-scoped fixture.
*   `autoWorkerFixture` is set up for `beforeAll` hook, but `autoTestFixture` is not.

Combine custom fixtures from multiple modules[â€‹](#combine-custom-fixtures-from-multiple-modules "Direct link to Combine custom fixtures from multiple modules")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

You can merge test fixtures from multiple files or modules:

fixtures.ts

    import { mergeTests } from '@playwright/test';import { test as dbTest } from 'database-test-utils';import { test as a11yTest } from 'a11y-test-utils';export const test = mergeTests(dbTest, a11yTest);

test.spec.ts

    import { test } from './fixtures';test('passes', async ({ database, page, a11y }) => {  // use database and a11y fixtures.});

Box fixtures[â€‹](#box-fixtures "Direct link to Box fixtures")
------------------------------------------------------------

Usually, custom fixtures are reported as separate steps in the UI mode, Trace Viewer and various test reports. They also appear in error messages from the test runner. For frequently used fixtures, this can mean lots of noise. You can stop the fixtures steps from being shown in the UI by "boxing" it.

    import { test as base } from '@playwright/test';export const test = base.extend({  helperFixture: [async ({}, use, testInfo) => {    // ...  }, { box: true }],});

This is useful for non-interesting helper fixtures. For example, an [automatic](/docs/test-fixtures#automatic-fixtures) fixture that sets up some common data can be safely hidden from a test report.

You can also mark the fixture as `box: 'self'` to only hide that particular fixture, but include all the steps inside the fixture in the test report.

Custom fixture title[â€‹](#custom-fixture-title "Direct link to Custom fixture title")
------------------------------------------------------------------------------------

Instead of the usual fixture name, you can give fixtures a custom title that will be shown in test reports and error messages.

    import { test as base } from '@playwright/test';export const test = base.extend({  innerFixture: [async ({}, use, testInfo) => {    // ...  }, { title: 'my fixture' }],});

Adding global beforeEach/afterEach hooks[â€‹](#adding-global-beforeeachaftereach-hooks "Direct link to Adding global beforeEach/afterEach hooks")
-----------------------------------------------------------------------------------------------------------------------------------------------

[test.beforeEach()](/docs/api/class-test#test-before-each) and [test.afterEach()](/docs/api/class-test#test-after-each) hooks run before/after each test declared in the same file and same [test.describe()](/docs/api/class-test#test-describe) block (if any). If you want to declare hooks that run before/after each test globally, you can declare them as auto fixtures like this:

fixtures.ts

    import { test as base } from '@playwright/test';export const test = base.extend<{ forEachTest: void }>({  forEachTest: [async ({ page }, use) => {    // This code runs before every test.    await page.goto('http://localhost:8000');    await use();    // This code runs after every test.    console.log('Last URL:', page.url());  }, { auto: true }],  // automatically starts for every test.});

And then import the fixtures in all your tests:

mytest.spec.ts

    import { test } from './fixtures';import { expect } from '@playwright/test';test('basic', async ({ page }) => {  expect(page).toHaveURL('http://localhost:8000');  await page.goto('https://playwright.dev');});

Adding global beforeAll/afterAll hooks[â€‹](#adding-global-beforeallafterall-hooks "Direct link to Adding global beforeAll/afterAll hooks")
-----------------------------------------------------------------------------------------------------------------------------------------

[test.beforeAll()](/docs/api/class-test#test-before-all) and [test.afterAll()](/docs/api/class-test#test-after-all) hooks run before/after all tests declared in the same file and same [test.describe()](/docs/api/class-test#test-describe) block (if any), once per worker process. If you want to declare hooks that run before/after all tests in every file, you can declare them as auto fixtures with `scope: 'worker'` as follows:

fixtures.ts

    import { test as base } from '@playwright/test';export const test = base.extend<{}, { forEachWorker: void }>({  forEachWorker: [async ({}, use) => {    // This code runs before all the tests in the worker process.    console.log(`Starting test worker ${test.info().workerIndex}`);    await use();    // This code runs after all the tests in the worker process.    console.log(`Stopping test worker ${test.info().workerIndex}`);  }, { scope: 'worker', auto: true }],  // automatically starts for every worker.});

And then import the fixtures in all your tests:

mytest.spec.ts

    import { test } from './fixtures';import { expect } from '@playwright/test';test('basic', async ({ }) => {  // ...});

Note that the fixtures will still run once per [worker process](/docs/test-parallel#worker-processes), but you don't need to redeclare them in every file.

# Global setup and teardown

Global setup and teardown
=========================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

There are two ways to configure global setup and teardown: using a global setup file and setting it in the config under [`globalSetup`](#option-2-configure-globalsetup-and-globalteardown) or using [project dependencies](#option-1-project-dependencies). With project dependencies, you define a project that runs before all other projects. This is the recommended approach, as it integrates better with the Playwright test runner: your HTML report will include the global setup, traces will be recorded, and fixtures can be used. For a detailed comparison of the two approaches, see the table below.

Feature

Project Dependencies (recommended)

`globalSetup` (config option)

Runs before all tests

âœ… Yes

âœ… Yes

HTML report visibility

âœ… Shown as a separate project

âŒ Not shown

Trace recording

âœ… Full trace available

âŒ Not supported

Playwright fixtures

âœ… Fully supported

âŒ Not supported

Browser management

âœ… Via `browser` fixture

âŒ Fully manual via `browserType.launch()`

Parallelism and retries

âœ… Supported via standard config

âŒ Not applicable

Config options like `headless` or `testIdAttribute`

âœ… Automatically applied

âŒ Ignored

Option 1: Project Dependencies[â€‹](#option-1-project-dependencies "Direct link to Option 1: Project Dependencies")
-----------------------------------------------------------------------------------------------------------------

[Project dependencies](/docs/api/class-testproject#test-project-dependencies) are a list of projects that need to run before the tests in another project run. They can be useful for configuring the global setup actions so that one project depends on this running first. Using dependencies allows global setup to produce traces and other artifacts.

### Setup[â€‹](#setup "Direct link to Setup")

First we add a new project with the name 'setup db'. We then give it a [testProject.testMatch](/docs/api/class-testproject#test-project-test-match) property in order to match the file called `global.setup.ts`:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testDir: './tests',  // ...  projects: [    {      name: 'setup db',      testMatch: /global\.setup\.ts/,    },    // {    //   other project    // }  ]});

Then we add the [testProject.dependencies](/docs/api/class-testproject#test-project-dependencies) property to our projects that depend on the setup project and pass into the array the name of our dependency project, which we defined in the previous step:

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  testDir: './tests',  // ...  projects: [    {      name: 'setup db',      testMatch: /global\.setup\.ts/,    },    {      name: 'chromium with db',      use: { ...devices['Desktop Chrome'] },      dependencies: ['setup db'],    },  ]});

In this example the 'chromium with db' project depends on the 'setup db' project. We then create a setup test, stored at root level of your project (note that setup and teardown code must be defined as regular tests by calling [test()](/docs/api/class-test#test-call) function):

tests/global.setup.ts

    import { test as setup } from '@playwright/test';setup('create new database', async ({ }) => {  console.log('creating new database...');  // Initialize the database});

tests/menu.spec.ts

    import { test, expect } from '@playwright/test';test('menu', async ({ page }) => {  // Your test that depends on the database});

### Teardown[â€‹](#teardown "Direct link to Teardown")

You can teardown your setup by adding a [testProject.teardown](/docs/api/class-testproject#test-project-teardown) property to your setup project. This will run after all dependent projects have run.

First we add the [testProject.teardown](/docs/api/class-testproject#test-project-teardown) property to our setup project with the name 'cleanup db' which is the name we gave to our teardown project in the previous step:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testDir: './tests',  // ...  projects: [    {      name: 'setup db',      testMatch: /global\.setup\.ts/,      teardown: 'cleanup db',    },    {      name: 'cleanup db',      testMatch: /global\.teardown\.ts/,    },    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },      dependencies: ['setup db'],    },  ]});

Then we create a `global.teardown.ts` file in the tests directory of your project. This will be used to delete the data from the database after all tests have run.

tests/global.teardown.ts

    import { test as teardown } from '@playwright/test';teardown('delete database', async ({ }) => {  console.log('deleting test database...');  // Delete the database});

### Test filtering[â€‹](#test-filtering "Direct link to Test filtering")

All test filtering options, such as `--grep`/`--grep-invert`, `--shard`, filtering directly by location in the command line, or using [`test.only()`](/docs/api/class-test#test-only), directly select the primary tests to be run. If those tests belong to a project with dependencies, all tests from those dependencies will also run.

You can pass `--no-deps` command line option to ignore all dependencies and teardowns. Only your directly selected projects will run.

### More examples[â€‹](#more-examples "Direct link to More examples")

For more detailed examples check out:

*   our [authentication](/docs/auth) guide
*   our blog post [A better global setup in Playwright reusing login with project dependencies](https://dev.to/playwright/a-better-global-setup-in-playwright-reusing-login-with-project-dependencies-14)
*   [v1.31 release video](https://youtu.be/PI50YAPTAs4) to see the demo

Option 2: Configure globalSetup and globalTeardown[â€‹](#option-2-configure-globalsetup-and-globalteardown "Direct link to Option 2: Configure globalSetup and globalTeardown")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

You can use the `globalSetup` option in the [configuration file](/docs/test-configuration#advanced-configuration) to set something up once before running all tests. The global setup file must export a single function that takes a config object. This function will be run once before all the tests.

Similarly, use `globalTeardown` to run something once after all the tests. Alternatively, let `globalSetup` return a function that will be used as a global teardown. You can pass data such as port number, authentication tokens, etc. from your global setup to your tests using environment variables.

note

Beware that `globalSetup` and `globalTeardown` lack some features â€” see the [intro](#introduction) section for a detailed comparison. Consider using [project dependencies](#option-1-project-dependencies) instead to get full feature support.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  globalSetup: require.resolve('./global-setup'),  globalTeardown: require.resolve('./global-teardown'),});

### Example[â€‹](#example "Direct link to Example")

Here is a global setup example that authenticates once and reuses authentication state in tests. It uses the `baseURL` and `storageState` options from the configuration file.

global-setup.ts

    import { chromium, type FullConfig } from '@playwright/test';async function globalSetup(config: FullConfig) {  const { baseURL, storageState } = config.projects[0].use;  const browser = await chromium.launch();  const page = await browser.newPage();  await page.goto(baseURL!);  await page.getByLabel('User Name').fill('user');  await page.getByLabel('Password').fill('password');  await page.getByText('Sign in').click();  await page.context().storageState({ path: storageState as string });  await browser.close();}export default globalSetup;

Specify `globalSetup`, `baseURL` and `storageState` in the configuration file.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  globalSetup: require.resolve('./global-setup'),  use: {    baseURL: 'http://localhost:3000/',    storageState: 'state.json',  },});

Tests start already authenticated because we specify `storageState` that was populated by global setup.

    import { test } from '@playwright/test';test('test', async ({ page }) => {  await page.goto('/');  // You are signed in!});

You can make arbitrary data available in your tests from your global setup file by setting them as environment variables via `process.env`.

global-setup.ts

    import type { FullConfig } from '@playwright/test';async function globalSetup(config: FullConfig) {  process.env.FOO = 'some data';  // Or a more complicated data structure as JSON:  process.env.BAR = JSON.stringify({ some: 'data' });}export default globalSetup;

Tests have access to the `process.env` properties set in the global setup.

    import { test } from '@playwright/test';test('test', async ({ page }) => {  // environment variables which are set in globalSetup are only available inside test().  const { FOO, BAR } = process.env;  // FOO and BAR properties are populated.  expect(FOO).toEqual('some data');  const complexData = JSON.parse(BAR);  expect(BAR).toEqual({ some: 'data' });});

### Capturing trace of failures during global setup[â€‹](#capturing-trace-of-failures-during-global-setup "Direct link to Capturing trace of failures during global setup")

In some instances, it may be useful to capture a trace of failures encountered during the global setup. In order to do this, you must [start tracing](/docs/api/class-tracing#tracing-start) in your setup, and you must ensure that you [stop tracing](/docs/api/class-tracing#tracing-stop) if an error occurs before that error is thrown. This can be achieved by wrapping your setup in a `try...catch` block. Here is an example that expands the global setup example to capture a trace.

global-setup.ts

    import { chromium, type FullConfig } from '@playwright/test';async function globalSetup(config: FullConfig) {  const { baseURL, storageState } = config.projects[0].use;  const browser = await chromium.launch();  const context = await browser.newContext();  const page = await context.newPage();  try {    await context.tracing.start({ screenshots: true, snapshots: true });    await page.goto(baseURL!);    await page.getByLabel('User Name').fill('user');    await page.getByLabel('Password').fill('password');    await page.getByText('Sign in').click();    await context.storageState({ path: storageState as string });    await context.tracing.stop({      path: './test-results/setup-trace.zip',    });    await browser.close();  } catch (error) {    await context.tracing.stop({      path: './test-results/failed-setup-trace.zip',    });    await browser.close();    throw error;  }}export default globalSetup;

# Parallelism

Parallelism
===========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Test runs tests in parallel. In order to achieve that, it runs several worker processes that run at the same time. By default, **test files** are run in parallel. Tests in a single file are run in order, in the same worker process.

*   You can configure tests using [`test.describe.configure`](#parallelize-tests-in-a-single-file) to run **tests in a single file** in parallel.
*   You can configure **entire project** to have all tests in all files to run in parallel using [testProject.fullyParallel](/docs/api/class-testproject#test-project-fully-parallel) or [testConfig.fullyParallel](/docs/api/class-testconfig#test-config-fully-parallel).
*   To **disable** parallelism limit the number of [workers to one](#disable-parallelism).

You can control the number of [parallel worker processes](#limit-workers) and [limit the number of failures](#limit-failures-and-fail-fast) in the whole test suite for efficiency.

Worker processes[â€‹](#worker-processes "Direct link to Worker processes")
------------------------------------------------------------------------

All tests run in worker processes. These processes are OS processes, running independently, orchestrated by the test runner. All workers have identical environments and each starts its own browser.

You can't communicate between the workers. Playwright Test reuses a single worker as much as it can to make testing faster, so multiple test files are usually run in a single worker one after another.

Workers are always shutdown after a [test failure](/docs/test-retries#failures) to guarantee pristine environment for following tests.

Limit workers[â€‹](#limit-workers "Direct link to Limit workers")
---------------------------------------------------------------

You can control the maximum number of parallel worker processes via [command line](/docs/test-cli) or in the [configuration file](/docs/test-configuration).

From the command line:

    npx playwright test --workers 4

In the configuration file:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Limit the number of workers on CI, use default locally  workers: process.env.CI ? 2 : undefined,});

Disable parallelism[â€‹](#disable-parallelism "Direct link to Disable parallelism")
---------------------------------------------------------------------------------

You can disable any parallelism by allowing just a single worker at any time. Either set `workers: 1` option in the configuration file or pass `--workers=1` to the command line.

    npx playwright test --workers=1

Parallelize tests in a single file[â€‹](#parallelize-tests-in-a-single-file "Direct link to Parallelize tests in a single file")
------------------------------------------------------------------------------------------------------------------------------

By default, tests in a single file are run in order. If you have many independent tests in a single file, you might want to run them in parallel with [test.describe.configure()](/docs/api/class-test#test-describe-configure).

Note that parallel tests are executed in separate worker processes and cannot share any state or global variables. Each test executes all relevant hooks just for itself, including `beforeAll` and `afterAll`.

    import { test } from '@playwright/test';test.describe.configure({ mode: 'parallel' });test('runs in parallel 1', async ({ page }) => { /* ... */ });test('runs in parallel 2', async ({ page }) => { /* ... */ });

Alternatively, you can opt-in all tests into this fully-parallel mode in the configuration file:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  fullyParallel: true,});

You can also opt in for fully-parallel mode for just a few projects:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // runs all tests in all files of a specific project in parallel  projects: [    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },      fullyParallel: true,    },  ]});

Serial mode[â€‹](#serial-mode "Direct link to Serial mode")
---------------------------------------------------------

You can annotate inter-dependent tests as serial. If one of the serial tests fails, all subsequent tests are skipped. All tests in a group are retried together.

note

Using serial is not recommended. It is usually better to make your tests isolated, so they can be run independently.

    import { test, type Page } from '@playwright/test';// Annotate entire file as serial.test.describe.configure({ mode: 'serial' });let page: Page;test.beforeAll(async ({ browser }) => {  page = await browser.newPage();});test.afterAll(async () => {  await page.close();});test('runs first', async () => {  await page.goto('https://playwright.dev/');});test('runs second', async () => {  await page.getByText('Get Started').click();});

Opt out of fully parallel mode[â€‹](#opt-out-of-fully-parallel-mode "Direct link to Opt out of fully parallel mode")
------------------------------------------------------------------------------------------------------------------

If your configuration applies parallel mode to all tests using [testConfig.fullyParallel](/docs/api/class-testconfig#test-config-fully-parallel), you might still want to run some tests with default settings. You can override the mode per describe:

    test.describe('runs in parallel with other describes', () => {  test.describe.configure({ mode: 'default' });  test('in order 1', async ({ page }) => {});  test('in order 2', async ({ page }) => {});});

Shard tests between multiple machines[â€‹](#shard-tests-between-multiple-machines "Direct link to Shard tests between multiple machines")
---------------------------------------------------------------------------------------------------------------------------------------

Playwright Test can shard a test suite, so that it can be executed on multiple machines. See [sharding guide](/docs/test-sharding) for more details.

    npx playwright test --shard=2/3

Limit failures and fail fast[â€‹](#limit-failures-and-fail-fast "Direct link to Limit failures and fail fast")
------------------------------------------------------------------------------------------------------------

You can limit the number of failed tests in the whole test suite by setting `maxFailures` config option or passing `--max-failures` command line flag.

When running with "max failures" set, Playwright Test will stop after reaching this number of failed tests and skip any tests that were not executed yet. This is useful to avoid wasting resources on broken test suites.

Passing command line option:

    npx playwright test --max-failures=10

Setting in the configuration file:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Limit the number of failures on CI to save resources  maxFailures: process.env.CI ? 10 : undefined,});

Worker index and parallel index[â€‹](#worker-index-and-parallel-index "Direct link to Worker index and parallel index")
---------------------------------------------------------------------------------------------------------------------

Each worker process is assigned two ids: a unique worker index that starts with 1, and a parallel index that is between `0` and `workers - 1`. When a worker is restarted, for example after a failure, the new worker process has the same `parallelIndex` and a new `workerIndex`.

You can read an index from environment variables `process.env.TEST_WORKER_INDEX` and `process.env.TEST_PARALLEL_INDEX`, or access them through [testInfo.workerIndex](/docs/api/class-testinfo#test-info-worker-index) and [testInfo.parallelIndex](/docs/api/class-testinfo#test-info-parallel-index).

### Isolate test data between parallel workers[â€‹](#isolate-test-data-between-parallel-workers "Direct link to Isolate test data between parallel workers")

You can leverage `process.env.TEST_WORKER_INDEX` or [testInfo.workerIndex](/docs/api/class-testinfo#test-info-worker-index) mentioned above to isolate user data in the database between tests running on different workers. All tests run by the worker reuse the same user.

Create `playwright/fixtures.ts` file that will [create `dbUserName` fixture](/docs/test-fixtures#creating-a-fixture) and initialize a new user in the test database. Use [testInfo.workerIndex](/docs/api/class-testinfo#test-info-worker-index) to differentiate between workers.

playwright/fixtures.ts

    import { test as baseTest, expect } from '@playwright/test';// Import project utils for managing users in the test database.import { createUserInTestDatabase, deleteUserFromTestDatabase } from './my-db-utils';export * from '@playwright/test';export const test = baseTest.extend<{}, { dbUserName: string }>({  // Returns db user name unique for the worker.  dbUserName: [async ({ }, use) => {    // Use workerIndex as a unique identifier for each worker.    const userName = `user-${test.info().workerIndex}`;    // Initialize user in the database.    await createUserInTestDatabase(userName);    await use(userName);    // Clean up after the tests are done.    await deleteUserFromTestDatabase(userName);  }, { scope: 'worker' }],});

Now, each test file should import `test` from our fixtures file instead of `@playwright/test`.

tests/example.spec.ts

    // Important: import our fixtures.import { test, expect } from '../playwright/fixtures';test('test', async ({ dbUserName }) => {  // Use the user name in the test.});

Control test order[â€‹](#control-test-order "Direct link to Control test order")
------------------------------------------------------------------------------

Playwright Test runs tests from a single file in the order of declaration, unless you [parallelize tests in a single file](#parallelize-tests-in-a-single-file).

There is no guarantee about the order of test execution across the files, because Playwright Test runs test files in parallel by default. However, if you [disable parallelism](#disable-parallelism), you can control test order by either naming your files in alphabetical order or using a "test list" file.

### Sort test files alphabetically[â€‹](#sort-test-files-alphabetically "Direct link to Sort test files alphabetically")

When you **disable parallel test execution**, Playwright Test runs test files in alphabetical order. You can use some naming convention to control the test order, for example `001-user-signin-flow.spec.ts`, `002-create-new-document.spec.ts` and so on.

### Use a "test list" file[â€‹](#use-a-test-list-file "Direct link to Use a \"test list\" file")

warning

Tests lists are discouraged and supported as a best-effort only. Some features such as VS Code Extension and tracing may not work properly with test lists.

You can put your tests in helper functions in multiple files. Consider the following example where tests are not defined directly in the file, but rather in a wrapper function.

feature-a.spec.ts

    import { test, expect } from '@playwright/test';export default function createTests() {  test('feature-a example test', async ({ page }) => {    // ... test goes here  });}

feature-b.spec.ts

    import { test, expect } from '@playwright/test';export default function createTests() {  test.use({ viewport: { width: 500, height: 500 } });  test('feature-b example test', async ({ page }) => {    // ... test goes here  });}

You can create a test list file that will control the order of tests - first run `feature-b` tests, then `feature-a` tests. Note how each test file is wrapped in a `test.describe()` block that calls the function where tests are defined. This way `test.use()` calls only affect tests from a single file.

test.list.ts

    import { test } from '@playwright/test';import featureBTests from './feature-b.spec.ts';import featureATests from './feature-a.spec.ts';test.describe(featureBTests);test.describe(featureATests);

Now **disable parallel execution** by setting workers to one, and specify your test list file.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  workers: 1,  testMatch: 'test.list.ts',});

note

Do not define your tests directly in a helper file. This could lead to unexpected results because your tests are now dependent on the order of `import`/`require` statements. Instead, wrap tests in a function that will be explicitly called by a test list file, as in the example above.

# Parameterize tests

Parameterize tests
==================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

You can either parameterize tests on a test level or on a project level.

Parameterized Tests[â€‹](#parameterized-tests "Direct link to Parameterized Tests")
---------------------------------------------------------------------------------

example.spec.ts

    [  { name: 'Alice', expected: 'Hello, Alice!' },  { name: 'Bob', expected: 'Hello, Bob!' },  { name: 'Charlie', expected: 'Hello, Charlie!' },].forEach(({ name, expected }) => {  // You can also do it with test.describe() or with multiple tests as long the test name is unique.  test(`testing with ${name}`, async ({ page }) => {    await page.goto(`https://example.com/greet?name=${name}`);    await expect(page.getByRole('heading')).toHaveText(expected);  });});

### Before and after hooks[â€‹](#before-and-after-hooks "Direct link to Before and after hooks")

Most of the time you should put `beforeEach`, `beforeAll`, `afterEach` and `afterAll` hooks outside of `forEach`, so that hooks are executed just once:

example.spec.ts

    test.beforeEach(async ({ page }) => {  // ...});test.afterEach(async ({ page }) => {  // ...});[  { name: 'Alice', expected: 'Hello, Alice!' },  { name: 'Bob', expected: 'Hello, Bob!' },  { name: 'Charlie', expected: 'Hello, Charlie!' },].forEach(({ name, expected }) => {  test(`testing with ${name}`, async ({ page }) => {    await page.goto(`https://example.com/greet?name=${name}`);    await expect(page.getByRole('heading')).toHaveText(expected);  });});

If you want to have hooks for each test, you can put them inside a `describe()` - so they are executed for each iteration / each individual test:

example.spec.ts

    [  { name: 'Alice', expected: 'Hello, Alice!' },  { name: 'Bob', expected: 'Hello, Bob!' },  { name: 'Charlie', expected: 'Hello, Charlie!' },].forEach(({ name, expected }) => {  test.describe(() => {    test.beforeEach(async ({ page }) => {      await page.goto(`https://example.com/greet?name=${name}`);    });    test(`testing with ${expected}`, async ({ page }) => {      await expect(page.getByRole('heading')).toHaveText(expected);    });  });});

Parameterized Projects[â€‹](#parameterized-projects "Direct link to Parameterized Projects")
------------------------------------------------------------------------------------------

Playwright Test supports running multiple test projects at the same time. In the following example, we'll run two projects with different options.

We declare the option `person` and set the value in the config. The first project runs with the value `Alice` and the second with the value `Bob`.

*   TypeScript
*   JavaScript

my-test.ts

    import { test as base } from '@playwright/test';export type TestOptions = {  person: string;};export const test = base.extend<TestOptions>({  // Define an option and provide a default value.  // We can later override it in the config.  person: ['John', { option: true }],});

my-test.js

    const base = require('@playwright/test');exports.test = base.test.extend({  // Define an option and provide a default value.  // We can later override it in the config.  person: ['John', { option: true }],});

We can use this option in the test, similarly to [fixtures](/docs/test-fixtures).

example.spec.ts

    import { test } from './my-test';test('test 1', async ({ page, person }) => {  await page.goto(`/index.html`);  await expect(page.locator('#node')).toContainText(person);  // ...});

Now, we can run tests in multiple configurations by using projects.

*   TypeScript
*   JavaScript

playwright.config.ts

    import { defineConfig } from '@playwright/test';import type { TestOptions } from './my-test';export default defineConfig<TestOptions>({  projects: [    {      name: 'alice',      use: { person: 'Alice' },    },    {      name: 'bob',      use: { person: 'Bob' },    },  ]});

playwright.config.ts

    // @ts-checkmodule.exports = defineConfig({  projects: [    {      name: 'alice',      use: { person: 'Alice' },    },    {      name: 'bob',      use: { person: 'Bob' },    },  ]});

We can also use the option in a fixture. Learn more about [fixtures](/docs/test-fixtures).

*   TypeScript
*   JavaScript

my-test.ts

    import { test as base } from '@playwright/test';export type TestOptions = {  person: string;};export const test = base.extend<TestOptions>({  // Define an option and provide a default value.  // We can later override it in the config.  person: ['John', { option: true }],  // Override default "page" fixture.  page: async ({ page, person }, use) => {    await page.goto('/chat');    // We use "person" parameter as a "name" for the chat room.    await page.getByLabel('User Name').fill(person);    await page.getByText('Enter chat room').click();    // Each test will get a "page" that already has the person name.    await use(page);  },});

my-test.js

    const base = require('@playwright/test');exports.test = base.test.extend({  // Define an option and provide a default value.  // We can later override it in the config.  person: ['John', { option: true }],  // Override default "page" fixture.  page: async ({ page, person }, use) => {    await page.goto('/chat');    // We use "person" parameter as a "name" for the chat room.    await page.getByLabel('User Name').fill(person);    await page.getByText('Enter chat room').click();    // Each test will get a "page" that already has the person name.    await use(page);  },});

note

Parameterized projects behavior has changed in version 1.18. [Learn more](/docs/release-notes#breaking-change-custom-config-options).

Passing Environment Variables[â€‹](#passing-environment-variables "Direct link to Passing Environment Variables")
---------------------------------------------------------------------------------------------------------------

You can use environment variables to configure tests from the command line.

For example, consider the following test file that needs a username and a password. It is usually a good idea not to store your secrets in the source code, so we'll need a way to pass secrets from outside.

example.spec.ts

    test(`example test`, async ({ page }) => {  // ...  await page.getByLabel('User Name').fill(process.env.USER_NAME);  await page.getByLabel('Password').fill(process.env.PASSWORD);});

You can run this test with your secret username and password set in the command line.

*   Bash
*   PowerShell
*   Batch

    USER_NAME=me PASSWORD=secret npx playwright test

    $env:USER_NAME=me$env:PASSWORD=secretnpx playwright test

    set USER_NAME=meset PASSWORD=secretnpx playwright test

Similarly, configuration file can also read environment variables passed through the command line.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    baseURL: process.env.STAGING === '1' ? 'http://staging.example.test/' : 'http://example.test/',  }});

Now, you can run tests against a staging or a production environment:

*   Bash
*   PowerShell
*   Batch

    STAGING=1 npx playwright test

    $env:STAGING=1npx playwright test

    set STAGING=1npx playwright test

### .env files[â€‹](#env-files "Direct link to .env files")

To make environment variables easier to manage, consider something like `.env` files. Here is an example that uses [`dotenv`](https://www.npmjs.com/package/dotenv) package to read environment variables directly in the configuration file.

playwright.config.ts

    import { defineConfig } from '@playwright/test';import dotenv from 'dotenv';import path from 'path';// Read from ".env" file.dotenv.config({ path: path.resolve(__dirname, '.env') });// Alternatively, read from "../my.env" file.dotenv.config({ path: path.resolve(__dirname, '..', 'my.env') });export default defineConfig({  use: {    baseURL: process.env.STAGING === '1' ? 'http://staging.example.test/' : 'http://example.test/',  }});

Now, you can just edit `.env` file to set any variables you'd like.

    # .env fileSTAGING=0USER_NAME=mePASSWORD=secret

Run tests as usual, your environment variables should be picked up.

    npx playwright test

Create tests via a CSV file[â€‹](#create-tests-via-a-csv-file "Direct link to Create tests via a CSV file")
---------------------------------------------------------------------------------------------------------

The Playwright test-runner runs in Node.js, this means you can directly read files from the file system and parse them with your preferred CSV library.

See for example this CSV file, in our example `input.csv`:

    "test_case","some_value","some_other_value""value 1","value 11","foobar1""value 2","value 22","foobar21""value 3","value 33","foobar321""value 4","value 44","foobar4321"

Based on this we'll generate some tests by using the [csv-parse](https://www.npmjs.com/package/csv-parse) library from NPM:

test.spec.ts

    import fs from 'fs';import path from 'path';import { test } from '@playwright/test';import { parse } from 'csv-parse/sync';const records = parse(fs.readFileSync(path.join(__dirname, 'input.csv')), {  columns: true,  skip_empty_lines: true});for (const record of records) {  test(`foo: ${record.test_case}`, async ({ page }) => {    console.log(record.test_case, record.some_value, record.some_other_value);  });}

# Projects

Projects
========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

A project is logical group of tests running with the same configuration. We use projects so we can run tests on different browsers and devices. Projects are configured in the `playwright.config.ts` file and once configured you can then run your tests on all projects or only on a specific project. You can also use projects to run the same tests in different configurations. For example, you can run the same tests in a logged-in and logged-out state.

By setting up projects you can also run a group of tests with different timeouts or retries or a group of tests against different environments such as staging and production, splitting tests per package/functionality and more.

Configure projects for multiple browsers[â€‹](#configure-projects-for-multiple-browsers "Direct link to Configure projects for multiple browsers")
------------------------------------------------------------------------------------------------------------------------------------------------

By using **projects** you can run your tests in multiple browsers such as chromium, webkit and firefox as well as branded browsers such as Google Chrome and Microsoft Edge. Playwright can also run on emulated tablet and mobile devices. See the [registry of device parameters](https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json) for a complete list of selected desktop, tablet and mobile devices.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },    },    {      name: 'firefox',      use: { ...devices['Desktop Firefox'] },    },    {      name: 'webkit',      use: { ...devices['Desktop Safari'] },    },    /* Test against mobile viewports. */    {      name: 'Mobile Chrome',      use: { ...devices['Pixel 5'] },    },    {      name: 'Mobile Safari',      use: { ...devices['iPhone 12'] },    },    /* Test against branded browsers. */    {      name: 'Microsoft Edge',      use: {        ...devices['Desktop Edge'],        channel: 'msedge'      },    },    {      name: 'Google Chrome',      use: {        ...devices['Desktop Chrome'],        channel: 'chrome'      },    },  ],});

Run projects[â€‹](#run-projects "Direct link to Run projects")
------------------------------------------------------------

Playwright will run all projects by default.

    npx playwright testRunning 7 tests using 5 workers  âœ“ [chromium] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [firefox] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [webkit] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Mobile Chrome] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Mobile Safari] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Microsoft Edge] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Google Chrome] â€º example.spec.ts:3:1 â€º basic test (2s)

Use the `--project` command line option to run a single project.

    npx playwright test --project=firefoxRunning 1 test using 1 worker  âœ“ [firefox] â€º example.spec.ts:3:1 â€º basic test (2s)

The VS Code test runner runs your tests on the default browser of Chrome. To run on other/multiple browsers click the play button's dropdown from the testing sidebar and choose another profile or modify the default profile by clicking **Select Default Profile** and select the browsers you wish to run your tests on.

![selecting browsers](https://user-images.githubusercontent.com/13063165/221136731-9d4bc18f-38a4-4adb-997b-5b98c98aec7f.png)

Choose a specific profile, various profiles or all profiles to run tests on.

![choosing default profiles](https://user-images.githubusercontent.com/13063165/221669537-e5df8672-f50d-4ff1-96f9-141cd67e12f8.png)

Configure projects for multiple environments[â€‹](#configure-projects-for-multiple-environments "Direct link to Configure projects for multiple environments")
------------------------------------------------------------------------------------------------------------------------------------------------------------

By setting up projects we can also run a group of tests with different timeouts or retries or run a group of tests against different environments. For example we can run our tests against a staging environment with 2 retries as well as against a production environment with 0 retries.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  timeout: 60000, // Timeout is shared between all tests.  projects: [    {      name: 'staging',      use: {        baseURL: 'staging.example.com',      },      retries: 2,    },    {      name: 'production',      use: {        baseURL: 'production.example.com',      },      retries: 0,    },  ],});

Splitting tests into projects[â€‹](#splitting-tests-into-projects "Direct link to Splitting tests into projects")
---------------------------------------------------------------------------------------------------------------

We can split tests into projects and use filters to run a subset of tests. For example, we can create a project that runs tests using a filter matching all tests with a specific file name. We can then have another group of tests that ignore specific test files.

Here is an example that defines a common timeout and two projects. The "Smoke" project runs a small subset of tests without retries, and "Default" project runs all other tests with retries.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  timeout: 60000, // Timeout is shared between all tests.  projects: [    {      name: 'Smoke',      testMatch: /.*smoke.spec.ts/,      retries: 0,    },    {      name: 'Default',      testIgnore: /.*smoke.spec.ts/,      retries: 2,    },  ],});

Dependencies[â€‹](#dependencies "Direct link to Dependencies")
------------------------------------------------------------

Dependencies are a list of projects that need to run before the tests in another project run. They can be useful for configuring the global setup actions so that one project depends on this running first. When using project dependencies, [test reporters](/docs/test-reporters) will show the setup tests and the [trace viewer](/docs/trace-viewer) will record traces of the setup. You can use the inspector to inspect the DOM snapshot of the trace of your setup tests and you can also use [fixtures](/docs/test-fixtures) inside your setup.

In this example the chromium, firefox and webkit projects depend on the setup project.

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'setup',      testMatch: '**/*.setup.ts',    },    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },      dependencies: ['setup'],    },    {      name: 'firefox',      use: { ...devices['Desktop Firefox'] },      dependencies: ['setup'],    },    {      name: 'webkit',      use: { ...devices['Desktop Safari'] },      dependencies: ['setup'],    },  ],});

### Running Sequence[â€‹](#running-sequence "Direct link to Running Sequence")

When working with tests that have a dependency, the dependency will always run first and once all tests from this project have passed, then the other projects will run in parallel.

Running order:

1.  Tests in the 'setup' project run. Once all tests from this project have passed, then the tests from the dependent projects will start running.
    
2.  Tests in the 'chromium', 'webkit' and 'firefox' projects run together. By default, these projects will [run in parallel](/docs/test-parallel), subject to the maximum workers limit.
    

![chromium, webkit and firefox projects depend on setup project](https://user-images.githubusercontent.com/13063165/225937080-327b1e63-431f-40e0-90d7-35f21d7a92cb.jpg)

If there are more than one dependency then these project dependencies will be run first and in parallel. If the tests from a dependency fails then the tests that rely on this project will not be run.

Running order:

1.  Tests in the 'Browser Login' and 'DataBase' projects run in parallel:
    *   'Browser Login' passes
    *   âŒ 'DataBase' fails!
2.  The 'e2e tests' project is not run!

![Browser login project is blue, database is red and e2e tests relies on both](https://user-images.githubusercontent.com/13063165/225938262-33c1b78f-f092-4762-a478-7f8cbc1e3b21.jpg)

### Teardown[â€‹](#teardown "Direct link to Teardown")

You can also teardown your setup by adding a [testProject.teardown](/docs/api/class-testproject#test-project-teardown) property to your setup project. Teardown will run after all dependent projects have run. See the [teardown guide](/docs/test-global-setup-teardown#teardown) for more information.

![global setup and teardown](https://github.com/microsoft/playwright/assets/13063165/dfcf10a9-f601-4d0c-bd8d-9490e6efbf7a)

### Test filtering[â€‹](#test-filtering "Direct link to Test filtering")

All test filtering options, such as `--grep`/`--grep-invert`, `--shard`, filtering directly by location in the command line, or using [`test.only()`](/docs/api/class-test#test-only), directly select the primary tests to be run. If those tests belong to a project with dependencies, all tests from those dependencies will also run.

You can pass `--no-deps` command line option to ignore all dependencies and teardowns. Only your directly selected projects will run.

Custom project parameters[â€‹](#custom-project-parameters "Direct link to Custom project parameters")
---------------------------------------------------------------------------------------------------

Projects can be also used to parametrize tests with your custom configuration - take a look at [this separate guide](/docs/test-parameterize#parameterized-projects).

# Reporters

Reporters
=========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Test comes with a few built-in reporters for different needs and ability to provide custom reporters. The easiest way to try out built-in reporters is to pass `--reporter` [command line option](/docs/test-cli).

    npx playwright test --reporter=line

For more control, you can specify reporters programmatically in the [configuration file](/docs/test-configuration).

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'line',});

### Multiple reporters[â€‹](#multiple-reporters "Direct link to Multiple reporters")

You can use multiple reporters at the same time. For example you can use `'list'` for nice terminal output and `'json'` to get a comprehensive json file with the test results.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [    ['list'],    ['json', {  outputFile: 'test-results.json' }]  ],});

### Reporters on CI[â€‹](#reporters-on-ci "Direct link to Reporters on CI")

You can use different reporters locally and on CI. For example, using concise `'dot'` reporter avoids too much output. This is the default on CI.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Concise 'dot' for CI, default 'list' when running locally  reporter: process.env.CI ? 'dot' : 'list',});

Built-in reporters[â€‹](#built-in-reporters "Direct link to Built-in reporters")
------------------------------------------------------------------------------

All built-in reporters show detailed information about failures, and mostly differ in verbosity for successful runs.

### List reporter[â€‹](#list-reporter "Direct link to List reporter")

List reporter is default (except on CI where the `dot` reporter is default). It prints a line for each test being run.

    npx playwright test --reporter=list

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'list',});

Here is an example output in the middle of a test run. Failures will be listed at the end.

    npx playwright test --reporter=listRunning 124 tests using 6 workers 1  âœ“ should access error in env (438ms) 2  âœ“ handle long test names (515ms) 3  x 1) render expected (691ms) 4  âœ“ should timeout (932ms) 5    should repeat each: 6  âœ“ should respect enclosing .gitignore (569ms) 7    should teardown env after timeout: 8    should respect excluded tests: 9  âœ“ should handle env beforeEach error (638ms)10    should respect enclosing .gitignore:

You can opt into the step rendering via passing the following config option:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['list', { printSteps: true }]],});

List report supports the following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_LIST_PRINT_STEPS`

`printSteps`

Whether to print each step on its own line.

`false`

`PLAYWRIGHT_FORCE_TTY`

Whether to produce output suitable for a live terminal. Supports `true`, `1`, `false`, `0`, `[WIDTH]`, and `[WIDTH]x[HEIGHT]`. `[WIDTH]` and `[WIDTH]x[HEIGHT]` specifies the TTY dimensions.

`true` when terminal is in TTY mode, `false` otherwise.

`FORCE_COLOR`

Whether to produce colored output.

`true` when terminal is in TTY mode, `false` otherwise.

### Line reporter[â€‹](#line-reporter "Direct link to Line reporter")

Line reporter is more concise than the list reporter. It uses a single line to report last finished test, and prints failures when they occur. Line reporter is useful for large test suites where it shows the progress but does not spam the output by listing all the tests.

    npx playwright test --reporter=line

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'line',});

Here is an example output in the middle of a test run. Failures are reported inline.

    npx playwright test --reporter=lineRunning 124 tests using 6 workers  1) dot-reporter.spec.ts:20:1 â€º render expected ===================================================    Error: expect(received).toBe(expected) // Object.is equality    Expected: 1    Received: 0[23/124] gitignore.spec.ts - should respect nested .gitignore

Line report supports the following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_FORCE_TTY`

Whether to produce output suitable for a live terminal. Supports `true`, `1`, `false`, `0`, `[WIDTH]`, and `[WIDTH]x[HEIGHT]`. `[WIDTH]` and `[WIDTH]x[HEIGHT]` specifies the TTY dimensions.

`true` when terminal is in TTY mode, `false` otherwise.

`FORCE_COLOR`

Whether to produce colored output.

`true` when terminal is in TTY mode, `false` otherwise.

### Dot reporter[â€‹](#dot-reporter "Direct link to Dot reporter")

Dot reporter is very concise - it only produces a single character per successful test run. It is the default on CI and useful where you don't want a lot of output.

    npx playwright test --reporter=dot

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'dot',});

Here is an example output in the middle of a test run. Failures will be listed at the end.

    npx playwright test --reporter=dotRunning 124 tests using 6 workersÂ·Â·Â·Â·Â·Â·FÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·

One character is displayed for each test that has run, indicating its status:

Character

Description

`Â·`

Passed

`F`

Failed

`Ã—`

Failed or timed out - and will be retried

`Â±`

Passed on retry (flaky)

`T`

Timed out

`Â°`

Skipped

Dot report supports the following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_FORCE_TTY`

Whether to produce output suitable for a live terminal. Supports `true`, `1`, `false`, `0`, `[WIDTH]`, and `[WIDTH]x[HEIGHT]`. `[WIDTH]` and `[WIDTH]x[HEIGHT]` specifies the TTY dimensions.

`true` when terminal is in TTY mode, `false` otherwise.

`FORCE_COLOR`

Whether to produce colored output.

`true` when terminal is in TTY mode, `false` otherwise.

### HTML reporter[â€‹](#html-reporter "Direct link to HTML reporter")

HTML reporter produces a self-contained folder that contains report for the test run that can be served as a web page.

    npx playwright test --reporter=html

By default, HTML report is opened automatically if some of the tests failed. You can control this behavior via the `open` property in the Playwright config or the `PLAYWRIGHT_HTML_OPEN` environmental variable. The possible values for that property are `always`, `never` and `on-failure` (default).

You can also configure `host` and `port` that are used to serve the HTML report.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['html', { open: 'never' }]],});

By default, report is written into the `playwright-report` folder in the current working directory. One can override that location using the `PLAYWRIGHT_HTML_OUTPUT_DIR` environment variable or a reporter configuration.

In configuration file, pass options directly:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['html', { outputFolder: 'my-report' }]],});

If you are uploading attachments from a data folder to another location, you can use `attachmentsBaseURL` option to let html report know where to look for them.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['html', { attachmentsBaseURL: 'https://external-storage.com/' }]],});

A quick way of opening the last test run report is:

    npx playwright show-report

Or if there is a custom folder name:

    npx playwright show-report my-report

HTML report supports the following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_HTML_TITLE`

`title`

A title to display in the generated report.

No title is displayed by default

`PLAYWRIGHT_HTML_OUTPUT_DIR`

`outputFolder`

Directory to save the report to.

`playwright-report`

`PLAYWRIGHT_HTML_OPEN`

`open`

When to open the html report in the browser, one of `'always'`, `'never'` or `'on-failure'`

`'on-failure'`

`PLAYWRIGHT_HTML_HOST`

`host`

When report opens in the browser, it will be served bound to this hostname.

`localhost`

`PLAYWRIGHT_HTML_PORT`

`port`

When report opens in the browser, it will be served on this port.

`9323` or any available port when `9323` is not available.

`PLAYWRIGHT_HTML_ATTACHMENTS_BASE_URL`

`attachmentsBaseURL`

A separate location where attachments from the `data` subdirectory are uploaded. Only needed when you upload report and `data` separately to different locations.

`data/`

`PLAYWRIGHT_HTML_NO_COPY_PROMPT`

`noCopyPrompt`

If true, disable rendering of the Copy prompt for errors. Supports `true`, `1`, `false`, and `0`.

`false`

`PLAYWRIGHT_HTML_NO_SNIPPETS`

`noSnippets`

If true, disable rendering code snippets in the action log. If there is a top level error, that report section with code snippet will still render. Supports `true`, `1`, `false`, and `0`.

`false`

### Blob reporter[â€‹](#blob-reporter "Direct link to Blob reporter")

Blob reports contain all the details about the test run and can be used later to produce any other report. Their primary function is to facilitate the merging of reports from [sharded tests](/docs/test-sharding).

    npx playwright test --reporter=blob

By default, the report is written into the `blob-report` directory in the package.json directory or current working directory (if no package.json is found).

The report file name looks like `report-<hash>.zip` or `report-<hash>-<shard_number>.zip` when [sharding](/docs/test-sharding) is used. The hash is an optional value computed from `--grep`, `--grepInverted`, `--project`, [testConfig.tag](/docs/api/class-testconfig#test-config-tag) and file filters passed as command line arguments. The hash guarantees that running Playwright with different command line options will produce different but stable between runs report names. The output file name can be overridden in the configuration file or passed as `'PLAYWRIGHT_BLOB_OUTPUT_FILE'` environment variable.

*   Shards
*   Environments

When using blob report to merge multiple shards, you don't have to pass any options.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'blob',});

When running tests in different environments, you might want to use [testConfig.tag](/docs/api/class-testconfig#test-config-tag) to add a global tag corresponding to the environment. This tag will bring clarity to the merged report, and it will be used to produce a unique blob report name.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'blob',  tag: process.env.CI_ENVIRONMENT_NAME,  // for example "@APIv2" or "@linux"});

Blob report supports following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_BLOB_OUTPUT_DIR`

`outputDir`

Directory to save the output. Existing content is deleted before writing the new report.

`blob-report`

`PLAYWRIGHT_BLOB_OUTPUT_NAME`

`fileName`

Report file name.

`report-<project>-<hash>-<shard_number>.zip`

`PLAYWRIGHT_BLOB_OUTPUT_FILE`

`outputFile`

Full path to the output file. If defined, `outputDir` and `fileName` will be ignored.

`undefined`

### JSON reporter[â€‹](#json-reporter "Direct link to JSON reporter")

JSON reporter produces an object with all information about the test run.

Most likely you want to write the JSON to a file. When running with `--reporter=json`, use `PLAYWRIGHT_JSON_OUTPUT_NAME` environment variable:

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_JSON_OUTPUT_NAME=results.json npx playwright test --reporter=json

    $env:PLAYWRIGHT_JSON_OUTPUT_NAME="results.json"npx playwright test --reporter=json

    set PLAYWRIGHT_JSON_OUTPUT_NAME=results.jsonnpx playwright test --reporter=json

In configuration file, pass options directly:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['json', { outputFile: 'results.json' }]],});

JSON report supports following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_JSON_OUTPUT_DIR`

Directory to save the output file. Ignored if output file is specified.

`cwd` or config directory.

`PLAYWRIGHT_JSON_OUTPUT_NAME`

`outputFile`

Base file name for the output, relative to the output dir.

JSON report is printed to the stdout.

`PLAYWRIGHT_JSON_OUTPUT_FILE`

`outputFile`

Full path to the output file. If defined, `PLAYWRIGHT_JSON_OUTPUT_DIR` and `PLAYWRIGHT_JSON_OUTPUT_NAME` will be ignored.

JSON report is printed to the stdout.

### JUnit reporter[â€‹](#junit-reporter "Direct link to JUnit reporter")

JUnit reporter produces a JUnit-style xml report.

Most likely you want to write the report to an xml file. When running with `--reporter=junit`, use `PLAYWRIGHT_JUNIT_OUTPUT_NAME` environment variable:

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_JUNIT_OUTPUT_NAME=results.xml npx playwright test --reporter=junit

    $env:PLAYWRIGHT_JUNIT_OUTPUT_NAME="results.xml"npx playwright test --reporter=junit

    set PLAYWRIGHT_JUNIT_OUTPUT_NAME=results.xmlnpx playwright test --reporter=junit

In configuration file, pass options directly:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['junit', { outputFile: 'results.xml' }]],});

JUnit report supports following configuration options and environment variables:

Environment Variable Name

Reporter Config Option

Description

Default

`PLAYWRIGHT_JUNIT_OUTPUT_DIR`

Directory to save the output file. Ignored if output file is not specified.

`cwd` or config directory.

`PLAYWRIGHT_JUNIT_OUTPUT_NAME`

`outputFile`

Base file name for the output, relative to the output dir.

JUnit report is printed to the stdout.

`PLAYWRIGHT_JUNIT_OUTPUT_FILE`

`outputFile`

Full path to the output file. If defined, `PLAYWRIGHT_JUNIT_OUTPUT_DIR` and `PLAYWRIGHT_JUNIT_OUTPUT_NAME` will be ignored.

JUnit report is printed to the stdout.

`PLAYWRIGHT_JUNIT_STRIP_ANSI`

`stripANSIControlSequences`

Whether to remove ANSI control sequences from the text before writing it in the report.

By default output text is added as is.

`PLAYWRIGHT_JUNIT_INCLUDE_PROJECT_IN_TEST_NAME`

`includeProjectInTestName`

Whether to include Playwright project name in every test case as a name prefix.

By default not included.

`PLAYWRIGHT_JUNIT_SUITE_ID`

Value of the `id` attribute on the root `<testsuites/>` report entry.

Empty string.

`PLAYWRIGHT_JUNIT_SUITE_NAME`

Value of the `name` attribute on the root `<testsuites/>` report entry.

Empty string.

### GitHub Actions annotations[â€‹](#github-actions-annotations "Direct link to GitHub Actions annotations")

You can use the built in `github` reporter to get automatic failure annotations when running in GitHub actions.

Note that all other reporters work on GitHub Actions as well, but do not provide annotations. Also, it is not recommended to use this annotation type if running your tests with a matrix strategy as the stack trace failures will multiply and obscure the GitHub file view.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // 'github' for GitHub Actions CI to generate annotations, plus a concise 'dot'  // default 'list' when running locally  reporter: process.env.CI ? 'github' : 'list',});

Custom reporters[â€‹](#custom-reporters "Direct link to Custom reporters")
------------------------------------------------------------------------

You can create a custom reporter by implementing a class with some of the reporter methods. Learn more about the [Reporter](/docs/api/class-reporter "Reporter") API.

my-awesome-reporter.ts

    import type {  FullConfig, FullResult, Reporter, Suite, TestCase, TestResult} from '@playwright/test/reporter';class MyReporter implements Reporter {  onBegin(config: FullConfig, suite: Suite) {    console.log(`Starting the run with ${suite.allTests().length} tests`);  }  onTestBegin(test: TestCase, result: TestResult) {    console.log(`Starting test ${test.title}`);  }  onTestEnd(test: TestCase, result: TestResult) {    console.log(`Finished test ${test.title}: ${result.status}`);  }  onEnd(result: FullResult) {    console.log(`Finished the run: ${result.status}`);  }}export default MyReporter;

Now use this reporter with [testConfig.reporter](/docs/api/class-testconfig#test-config-reporter).

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: './my-awesome-reporter.ts',});

Or just pass the reporter file path as `--reporter` command line option:

    npx playwright test --reporter="./myreporter/my-awesome-reporter.ts"

Here's a short list of open source reporter implementations that you can take a look at when writing your own reporter:

*   [Allure Reporter](https://github.com/allure-framework/allure-js/tree/main/packages/allure-playwright)
*   [Github Actions Reporter](https://github.com/estruyf/playwright-github-actions-reporter)
*   [Mail Reporter](https://github.com/estruyf/playwright-mail-reporter)
*   [ReportPortal](https://github.com/reportportal/agent-js-playwright)
*   [Monocart](https://github.com/cenfun/monocart-reporter)

# Retries

Retries
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Test retries are a way to automatically re-run a test when it fails. This is useful when a test is flaky and fails intermittently. Test retries are configured in the [configuration file](/docs/test-configuration).

Failures[â€‹](#failures "Direct link to Failures")
------------------------------------------------

Playwright Test runs tests in worker processes. These processes are OS processes, running independently, orchestrated by the test runner. All workers have identical environments and each starts its own browser.

Consider the following snippet:

    import { test } from '@playwright/test';test.describe('suite', () => {  test.beforeAll(async () => { /* ... */ });  test('first good', async ({ page }) => { /* ... */ });  test('second flaky', async ({ page }) => { /* ... */ });  test('third good', async ({ page }) => { /* ... */ });  test.afterAll(async () => { /* ... */ });});

When **all tests pass**, they will run in order in the same worker process.

*   Worker process starts
    *   `beforeAll` hook runs
    *   `first good` passes
    *   `second flaky` passes
    *   `third good` passes
    *   `afterAll` hook runs

Should **any test fail**, Playwright Test will discard the entire worker process along with the browser and will start a new one. Testing will continue in the new worker process starting with the next test.

*   Worker process #1 starts
    *   `beforeAll` hook runs
    *   `first good` passes
    *   `second flaky` fails
    *   `afterAll` hook runs
*   Worker process #2 starts
    *   `beforeAll` hook runs again
    *   `third good` passes
    *   `afterAll` hook runs

If you **enable [retries](#retries)**, second worker process will start by retrying the failed test and continue from there.

*   Worker process #1 starts
    *   `beforeAll` hook runs
    *   `first good` passes
    *   `second flaky` fails
    *   `afterAll` hook runs
*   Worker process #2 starts
    *   `beforeAll` hook runs again
    *   `second flaky` is retried and passes
    *   `third good` passes
    *   `afterAll` hook runs

This scheme works perfectly for independent tests and guarantees that failing tests can't affect healthy ones.

Retries[â€‹](#retries "Direct link to Retries")
---------------------------------------------

Playwright supports **test retries**. When enabled, failing tests will be retried multiple times until they pass, or until the maximum number of retries is reached. By default failing tests are not retried.

    # Give failing tests 3 retry attemptsnpx playwright test --retries=3

You can configure retries in the configuration file:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Give failing tests 3 retry attempts  retries: 3,});

Playwright Test will categorize tests as follows:

*   "passed" - tests that passed on the first run;
*   "flaky" - tests that failed on the first run, but passed when retried;
*   "failed" - tests that failed on the first run and failed all retries.

    Running 3 tests using 1 worker  âœ“ example.spec.ts:4:2 â€º first passes (438ms)  x example.spec.ts:5:2 â€º second flaky (691ms)  âœ“ example.spec.ts:5:2 â€º second flaky (522ms)  âœ“ example.spec.ts:6:2 â€º third passes (932ms)  1 flaky    example.spec.ts:5:2 â€º second flaky  2 passed (4s)

You can detect retries at runtime with [testInfo.retry](/docs/api/class-testinfo#test-info-retry), which is accessible to any test, hook or fixture. Here is an example that clears some server-side state before a retry.

    import { test, expect } from '@playwright/test';test('my test', async ({ page }, testInfo) => {  if (testInfo.retry)    await cleanSomeCachesOnTheServer();  // ...});

You can specify retries for a specific group of tests or a single file with [test.describe.configure()](/docs/api/class-test#test-describe-configure).

    import { test, expect } from '@playwright/test';test.describe(() => {  // All tests in this describe group will get 2 retry attempts.  test.describe.configure({ retries: 2 });  test('test 1', async ({ page }) => {    // ...  });  test('test 2', async ({ page }) => {    // ...  });});

Serial mode[â€‹](#serial-mode "Direct link to Serial mode")
---------------------------------------------------------

Use [test.describe.serial()](/docs/api/class-test#test-describe-serial) to group dependent tests to ensure they will always run together and in order. If one of the tests fails, all subsequent tests are skipped. All tests in the group are retried together.

Consider the following snippet that uses `test.describe.serial`:

    import { test } from '@playwright/test';test.describe.configure({ mode: 'serial' });test.beforeAll(async () => { /* ... */ });test('first good', async ({ page }) => { /* ... */ });test('second flaky', async ({ page }) => { /* ... */ });test('third good', async ({ page }) => { /* ... */ });

When running without [retries](#retries), all tests after the failure are skipped:

*   Worker process #1:
    *   `beforeAll` hook runs
    *   `first good` passes
    *   `second flaky` fails
    *   `third good` is skipped entirely

When running with [retries](#retries), all tests are retried together:

*   Worker process #1:
    *   `beforeAll` hook runs
    *   `first good` passes
    *   `second flaky` fails
    *   `third good` is skipped
*   Worker process #2:
    *   `beforeAll` hook runs again
    *   `first good` passes again
    *   `second flaky` passes
    *   `third good` passes

note

It is usually better to make your tests isolated, so they can be efficiently run and retried independently.

Reuse single page between tests[â€‹](#reuse-single-page-between-tests "Direct link to Reuse single page between tests")
---------------------------------------------------------------------------------------------------------------------

Playwright Test creates an isolated [Page](/docs/api/class-page "Page") object for each test. However, if you'd like to reuse a single [Page](/docs/api/class-page "Page") object between multiple tests, you can create your own in [test.beforeAll()](/docs/api/class-test#test-before-all) and close it in [test.afterAll()](/docs/api/class-test#test-after-all).

*   TypeScript
*   JavaScript

example.spec.ts

    import { test, type Page } from '@playwright/test';test.describe.configure({ mode: 'serial' });let page: Page;test.beforeAll(async ({ browser }) => {  page = await browser.newPage();});test.afterAll(async () => {  await page.close();});test('runs first', async () => {  await page.goto('https://playwright.dev/');});test('runs second', async () => {  await page.getByText('Get Started').click();});

example.spec.js

    // @ts-checkconst { test } = require('@playwright/test');test.describe.configure({ mode: 'serial' });/** @type {import('@playwright/test').Page} */let page;test.beforeAll(async ({ browser }) => {  page = await browser.newPage();});test.afterAll(async () => {  await page.close();});test('runs first', async () => {  await page.goto('https://playwright.dev/');});test('runs second', async () => {  await page.getByText('Get Started').click();});

# Sharding

Sharding
========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

By default, Playwright runs test files in [parallel](/docs/test-parallel) and strives for optimal utilization of CPU cores on your machine. In order to achieve even greater parallelisation, you can further scale Playwright test execution by running tests on multiple machines simultaneously. We call this mode of operation "sharding". Sharding in Playwright means splitting your tests into smaller parts called "shards". Each shard is like a separate job that can run independently. The whole purpose is to divide your tests to speed up test runtime.

When you shard your tests, each shard can run on its own, utilizing the available CPU cores. This helps speed up the testing process by doing tasks simultaneously.

In a CI pipeline, each shard can run as a separate job, making use of the hardware resources available in your CI pipeline, like CPU cores, to run tests faster.

Sharding tests between multiple machines[â€‹](#sharding-tests-between-multiple-machines "Direct link to Sharding tests between multiple machines")
------------------------------------------------------------------------------------------------------------------------------------------------

To shard the test suite, pass `--shard=x/y` to the command line. For example, to split the suite into four shards, each running one fourth of the tests:

    npx playwright test --shard=1/4npx playwright test --shard=2/4npx playwright test --shard=3/4npx playwright test --shard=4/4

Now, if you run these shards in parallel on different jobs, your test suite completes four times faster.

Note that Playwright can only shard tests that can be run in parallel. By default, this means Playwright will shard test files. Learn about other options in the [parallelism guide](/docs/test-parallel).

Balancing Shards[â€‹](#balancing-shards "Direct link to Balancing Shards")
------------------------------------------------------------------------

Sharding can be done at two levels of granularity depending on whether you use the [testProject.fullyParallel](/docs/api/class-testproject#test-project-fully-parallel) option or not. This affects how the tests are balanced across the shards.

**Sharding with fullyParallel**

When `fullyParallel: true` is enabled, Playwright Test runs individual tests in parallel across multiple shards, ensuring each shard receives an even distribution of tests. This allows for test-level granularity, meaning each shard will attempt to balance the number of individual tests it runs. This is the preferred mode for ensuring even load distribution when sharding, as Playwright can optimize shard execution based on the total number of tests.

**Sharding without fullyParallel**

Without the fullyParallel setting, Playwright Test defaults to file-level granularity, meaning entire test files are assigned to shards (note that the same file may be assigned to different shards across different projects). In this case, the number of tests per file can greatly influence shard distribution. If your test files are not evenly sized (i.e., some files contain many more tests than others), certain shards may end up running significantly more tests, while others may run fewer or even none.

**Key Takeaways:**

*   **With** `fullyParallel: true`: Tests are split at the individual test level, leading to more balanced shard execution.
*   **Without** `fullyParallel`: Tests are split at the file level, so to balance the shards, it's important to keep your test files small and evenly sized.
*   To ensure the most effective use of sharding, especially in CI environments, it is recommended to use `fullyParallel: true` when aiming for balanced distribution across shards. Otherwise, you may need to manually organize your test files to avoid imbalances.

Merging reports from multiple shards[â€‹](#merging-reports-from-multiple-shards "Direct link to Merging reports from multiple shards")
------------------------------------------------------------------------------------------------------------------------------------

In the previous example, each test shard has its own test report. If you want to have a combined report showing all the test results from all the shards, you can merge them.

Start with adding `blob` reporter to the config when running on CI:

playwright.config.ts

    export default defineConfig({  testDir: './tests',  reporter: process.env.CI ? 'blob' : 'html',});

Blob report contains information about all the tests that were run and their results as well as all test attachments such as traces and screenshot diffs. Blob reports can be merged and converted to any other Playwright report. By default, blob report will be generated into `blob-report` directory. You can learn about [blob report options here](/docs/test-reporters#blob-reporter).

To merge reports from multiple shards, put the blob report files into a single directory, for example `all-blob-reports`. Blob report names contain shard number, so they will not clash.

Afterwards, run `npx playwright merge-reports` command:

    npx playwright merge-reports --reporter html ./all-blob-reports

This will produce a standard HTML report into `playwright-report` directory.

GitHub Actions example[â€‹](#github-actions-example "Direct link to GitHub Actions example")
------------------------------------------------------------------------------------------

GitHub Actions supports [sharding tests between multiple jobs](https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs) using the [`jobs.<job_id>.strategy.matrix`](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix) option. The `matrix` option will run a separate job for every possible combination of the provided options.

The following example shows you how to configure a job to run your tests on four machines in parallel and then merge the reports into a single report. Don't forget to add `reporter: process.env.CI ? 'blob' : 'html',` to your `playwright.config.ts` file as in the example above.

1.  First we add a `matrix` option to our job configuration with the `shardTotal: [4]` option containing the total number of shards we want to create and `shardIndex: [1, 2, 3, 4]` with an array of the shard numbers.
2.  Then we run our Playwright tests with the `--shard=${{ matrix.shardIndex }}/${{ matrix.shardTotal }}` option. This will run our test command for each shard.
3.  Finally we upload our blob report to the GitHub Actions Artifacts. This will make the blob report available to other jobs in the workflow.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  playwright-tests:    timeout-minutes: 60    runs-on: ubuntu-latest    strategy:      fail-fast: false      matrix:        shardIndex: [1, 2, 3, 4]        shardTotal: [4]    steps:    - uses: actions/checkout@v5    - uses: actions/setup-node@v5      with:        node-version: lts/*    - name: Install dependencies      run: npm ci    - name: Install Playwright browsers      run: npx playwright install --with-deps    - name: Run Playwright tests      run: npx playwright test --shard=${{ matrix.shardIndex }}/${{ matrix.shardTotal }}    - name: Upload blob report to GitHub Actions Artifacts      if: ${{ !cancelled() }}      uses: actions/upload-artifact@v4      with:        name: blob-report-${{ matrix.shardIndex }}        path: blob-report        retention-days: 1

1.  After all shards have completed, you can run a separate job that will merge the reports and produce a combined [HTML report](/docs/test-reporters#html-reporter). To ensure the execution order, we make the `merge-reports` job [depend](https://docs.github.com/en/actions/using-jobs/using-jobs-in-a-workflow#defining-prerequisite-jobs) on our sharded `playwright-tests` job by adding `needs: [playwright-tests]`.

.github/workflows/playwright.yml

    jobs:...  merge-reports:    # Merge reports after playwright-tests, even if some shards have failed    if: ${{ !cancelled() }}    needs: [playwright-tests]    runs-on: ubuntu-latest    steps:    - uses: actions/checkout@v5    - uses: actions/setup-node@v5      with:        node-version: lts/*    - name: Install dependencies      run: npm ci    - name: Download blob reports from GitHub Actions Artifacts      uses: actions/download-artifact@v5      with:        path: all-blob-reports        pattern: blob-report-*        merge-multiple: true    - name: Merge into HTML Report      run: npx playwright merge-reports --reporter html ./all-blob-reports    - name: Upload HTML report      uses: actions/upload-artifact@v4      with:        name: html-report--attempt-${{ github.run_attempt }}        path: playwright-report        retention-days: 14

You can now see the reports have been merged and a combined HTML report is available in the GitHub Actions Artifacts tab.

![image](https://github.com/microsoft/playwright/assets/9798949/b69dac59-fc19-4b98-8f49-814b1c29ca02)

Merging reports from multiple environments[â€‹](#merging-reports-from-multiple-environments "Direct link to Merging reports from multiple environments")
------------------------------------------------------------------------------------------------------------------------------------------------------

If you want to run the same tests in multiple environments, as opposed to shard your tests onto multiple machines, you need to differentiate these enviroments.

In this case, it is useful to specify the [testConfig.tag](/docs/api/class-testconfig#test-config-tag) property, to tag all tests with the environment name. This tag will be automatically picked up by the blob report and later on by the merge tool.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: process.env.CI ? 'blob' : 'html',  tag: process.env.CI_ENVIRONMENT_NAME,  // for example "@APIv2"});

Merge-reports CLI[â€‹](#merge-reports-cli "Direct link to Merge-reports CLI")
---------------------------------------------------------------------------

`npx playwright merge-reports path/to/blob-reports-dir` reads all blob reports from the passed directory and merges them into a single report.

When merging reports from different OS'es you'll have to provide an explicit merge config to disambiguate which directory should be used as tests root.

Supported options:

*   `--reporter reporter-to-use`
    
    Which report to produce. Can be multiple reporters separated by comma.
    
    Example:
    
        npx playwright merge-reports --reporter=html,github ./blob-reports
    
*   `--config path/to/config/file`
    
    Specifies the Playwright configuration file with output reporters. Use this option to pass additional configuration to the output reporter. This configuration file can differ from the one used during the creation of blob reports.
    
    Example:
    
        npx playwright merge-reports --config=merge.config.ts ./blob-reports
    
    merge.config.ts
    
        export default {  testDir: 'e2e',  reporter: [['html', { open: 'never' }]],};

# Timeouts

Timeouts
========

Playwright Test has multiple configurable timeouts for various tasks.

Timeout

Default

Description

Test timeout

30\_000 ms

Timeout for each test  
Set in config  
`{ timeout: 60_000 }`  
Override in test  
`test.setTimeout(120_000)`

Expect timeout

5\_000 ms

Timeout for each assertion  
Set in config  
`{ expect: { timeout: 10_000 } }`  
Override in test  
`expect(locator).toBeVisible({ timeout: 10_000 })`

Test timeout[â€‹](#test-timeout "Direct link to Test timeout")
------------------------------------------------------------

Playwright Test enforces a timeout for each test, 30 seconds by default. Time spent by the test function, fixture setups, and `beforeEach` hooks is included in the test timeout.

Timed out test produces the following error:

    example.spec.ts:3:1 â€º basic test ===========================Timeout of 30000ms exceeded.

Additional separate timeout, of the same value, is shared between fixture teardowns and `afterEach` hooks, after the test function has finished.

The same timeout value also applies to `beforeAll` and `afterAll` hooks, but they do not share time with any test.

### Set test timeout in the config[â€‹](#set-test-timeout-in-the-config "Direct link to Set test timeout in the config")

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  timeout: 120_000,});

API reference: [testConfig.timeout](/docs/api/class-testconfig#test-config-timeout).

### Set timeout for a single test[â€‹](#set-timeout-for-a-single-test "Direct link to Set timeout for a single test")

example.spec.ts

    import { test, expect } from '@playwright/test';test('slow test', async ({ page }) => {  test.slow(); // Easy way to triple the default timeout  // ...});test('very slow test', async ({ page }) => {  test.setTimeout(120_000);  // ...});

API reference: [test.setTimeout()](/docs/api/class-test#test-set-timeout) and [test.slow()](/docs/api/class-test#test-slow).

### Change timeout from a `beforeEach` hook[â€‹](#change-timeout-from-a-beforeeach-hook "Direct link to change-timeout-from-a-beforeeach-hook")

example.spec.ts

    import { test, expect } from '@playwright/test';test.beforeEach(async ({ page }, testInfo) => {  // Extend timeout for all tests running this hook by 30 seconds.  testInfo.setTimeout(testInfo.timeout + 30_000);});

API reference: [testInfo.setTimeout()](/docs/api/class-testinfo#test-info-set-timeout).

### Change timeout for `beforeAll`/`afterAll` hook[â€‹](#change-timeout-for-beforeallafterall-hook "Direct link to change-timeout-for-beforeallafterall-hook")

`beforeAll` and `afterAll` hooks have a separate timeout, by default equal to test timeout. You can change it separately for each hook by calling [testInfo.setTimeout()](/docs/api/class-testinfo#test-info-set-timeout) inside the hook.

example.spec.ts

    import { test, expect } from '@playwright/test';test.beforeAll(async () => {  // Set timeout for this hook.  test.setTimeout(60000);});

API reference: [testInfo.setTimeout()](/docs/api/class-testinfo#test-info-set-timeout).

Expect timeout[â€‹](#expect-timeout "Direct link to Expect timeout")
------------------------------------------------------------------

Auto-retrying assertions like [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) have a separate timeout, 5 seconds by default. Assertion timeout is unrelated to the test timeout. It produces the following error:

    example.spec.ts:3:1 â€º basic test ===========================Error: expect(received).toHaveText(expected)Expected string: "my text"Received string: ""Call log:  - expect.toHaveText with timeout 5000ms  - waiting for "locator('button')"

### Set expect timeout in the config[â€‹](#set-expect-timeout-in-the-config "Direct link to Set expect timeout in the config")

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  expect: {    timeout: 10_000,  },});

API reference: [testConfig.expect](/docs/api/class-testconfig#test-config-expect).

### Specify expect timeout for a single assertion[â€‹](#specify-expect-timeout-for-a-single-assertion "Direct link to Specify expect timeout for a single assertion")

example.spec.ts

    import { test, expect } from '@playwright/test';test('example', async ({ page }) => {  await expect(locator).toHaveText('hello', { timeout: 10_000 });});

Global timeout[â€‹](#global-timeout "Direct link to Global timeout")
------------------------------------------------------------------

Playwright Test supports a timeout for the whole test run. This prevents excess resource usage when everything went wrong. There is no default global timeout, but you can set a reasonable one in the config, for example one hour. Global timeout produces the following error:

    Running 1000 tests using 10 workers  514 skipped  486 passed  Timed out waiting 3600s for the entire test run

You can set global timeout in the config.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  globalTimeout: 3_600_000,});

API reference: [testConfig.globalTimeout](/docs/api/class-testconfig#test-config-global-timeout).

Advanced: low level timeouts[â€‹](#advanced-low-level-timeouts "Direct link to Advanced: low level timeouts")
-----------------------------------------------------------------------------------------------------------

These are the low-level timeouts that are pre-configured by the test runner, you should not need to change these. If you happen to be in this section because your test are flaky, it is very likely that you should be looking for the solution elsewhere.

Timeout

Default

Description

Action timeout

no timeout

Timeout for each action  
Set in config  
`{ use: { actionTimeout: 10_000 } }`  
Override in test  
`locator.click({ timeout: 10_000 })`

Navigation timeout

no timeout

Timeout for each navigation action  
Set in config  
`{ use: { navigationTimeout: 30_000 } }`  
Override in test  
`page.goto('/', { timeout: 30_000 })`

Global timeout

no timeout

Global timeout for the whole test run  
Set in config  
`{ globalTimeout: 3_600_000 }`  

`beforeAll`/`afterAll` timeout

30\_000 ms

Timeout for the hook  
Set in hook  
`test.setTimeout(60_000)`  

Fixture timeout

no timeout

Timeout for an individual fixture  
Set in fixture  
`{ scope: 'test', timeout: 30_000 }`  

### Set action and navigation timeouts in the config[â€‹](#set-action-and-navigation-timeouts-in-the-config "Direct link to Set action and navigation timeouts in the config")

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    actionTimeout: 10 * 1000,    navigationTimeout: 30 * 1000,  },});

API reference: [testOptions.actionTimeout](/docs/api/class-testoptions#test-options-action-timeout) and [testOptions.navigationTimeout](/docs/api/class-testoptions#test-options-navigation-timeout).

### Set timeout for a single action[â€‹](#set-timeout-for-a-single-action "Direct link to Set timeout for a single action")

example.spec.ts

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('https://playwright.dev', { timeout: 30000 });  await page.getByText('Get Started').click({ timeout: 10000 });});

Fixture timeout[â€‹](#fixture-timeout "Direct link to Fixture timeout")
---------------------------------------------------------------------

By default, [fixture](/docs/test-fixtures) shares timeout with the test. However, for slow fixtures, especially [worker-scoped](/docs/test-fixtures#worker-scoped-fixtures) ones, it is convenient to have a separate timeout. This way you can keep the overall test timeout small, and give the slow fixture more time.

example.spec.ts

    import { test as base, expect } from '@playwright/test';const test = base.extend<{ slowFixture: string }>({  slowFixture: [async ({}, use) => {    // ... perform a slow operation ...    await use('hello');  }, { timeout: 60_000 }]});test('example test', async ({ slowFixture }) => {  // ...});

API reference: [test.extend()](/docs/api/class-test#test-extend).

# TypeScript

TypeScript
==========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright supports TypeScript out of the box. You just write tests in TypeScript, and Playwright will read them, transform to JavaScript and run.

Note that Playwright does not check the types and will run tests even if there are non-critical TypeScript compilation errors. We recommend you run TypeScript compiler alongside Playwright. For example on GitHub actions:

    jobs:  test:    runs-on: ubuntu-latest    steps:    ...    - name: Run type checks      run: npx tsc -p tsconfig.json --noEmit    - name: Run Playwright tests      run: npx playwright test

For local development, you can run `tsc` in [watch](https://www.typescriptlang.org/docs/handbook/configuring-watch.html) mode like this:

    npx tsc -p tsconfig.json --noEmit -w

tsconfig.json[â€‹](#tsconfigjson "Direct link to tsconfig.json")
--------------------------------------------------------------

Playwright will pick up `tsconfig.json` for each source file it loads. Note that Playwright **only supports** the following tsconfig options: `allowJs`, `baseUrl`, `paths` and `references`.

We recommend setting up a separate `tsconfig.json` in the tests directory so that you can change some preferences specifically for the tests. Here is an example directory structure.

    src/    source.tstests/    tsconfig.json  # test-specific tsconfig    example.spec.tstsconfig.json  # generic tsconfig for all typescript sourcesplaywright.config.ts

### tsconfig path mapping[â€‹](#tsconfig-path-mapping "Direct link to tsconfig path mapping")

Playwright supports [path mapping](https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping) declared in the `tsconfig.json`. Make sure that `baseUrl` is also set.

Here is an example `tsconfig.json` that works with Playwright:

tsconfig.json

    {  "compilerOptions": {    "baseUrl": ".",    "paths": {      "@myhelper/*": ["packages/myhelper/*"] // This mapping is relative to "baseUrl".    }  }}

You can now import using the mapped paths:

example.spec.ts

    import { test, expect } from '@playwright/test';import { username, password } from '@myhelper/credentials';test('example', async ({ page }) => {  await page.getByLabel('User Name').fill(username);  await page.getByLabel('Password').fill(password);});

### tsconfig resolution[â€‹](#tsconfig-resolution "Direct link to tsconfig resolution")

By default, Playwright will look up a closest tsconfig for each imported file by going up the directory structure and looking for `tsconfig.json` or `jsconfig.json`. This way, you can create a `tests/tsconfig.json` file that will be used only for your tests and Playwright will pick it up automatically.

    # Playwright will choose tsconfig automaticallynpx playwright test

Alternatively, you can specify a single tsconfig file to use in the command line, and Playwright will use it for all imported files, not only test files.

    # Pass a specific tsconfignpx playwright test --tsconfig=tsconfig.test.json

You can specify a single tsconfig file in the config file, that will be used for loading test files, reporters, etc. However, it will not be used while loading the playwright config itself or any files imported from it.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  tsconfig: './tsconfig.test.json',});

Manually compile tests with TypeScript[â€‹](#manually-compile-tests-with-typescript "Direct link to Manually compile tests with TypeScript")
------------------------------------------------------------------------------------------------------------------------------------------

Sometimes, Playwright Test will not be able to transform your TypeScript code correctly, for example when you are using experimental or very recent features of TypeScript, usually configured in `tsconfig.json`.

In this case, you can perform your own TypeScript compilation before sending the tests to Playwright.

First add a `tsconfig.json` file inside the tests directory:

    {    "compilerOptions": {        "target": "ESNext",        "module": "commonjs",        "moduleResolution": "Node",        "sourceMap": true,        "outDir": "../tests-out",    }}

In `package.json`, add two scripts:

    {  "scripts": {    "pretest": "tsc --incremental -p tests/tsconfig.json",    "test": "playwright test -c tests-out"  }}

The `pretest` script runs typescript on the tests. `test` will run the tests that have been generated to the `tests-out` directory. The `-c` argument configures the test runner to look for tests inside the `tests-out` directory.

Then `npm run test` will build the tests and run them.

# UI Mode

UI Mode
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

UI Mode lets you explore, run, and debug tests with a time travel experience complete with a watch mode. All test files are displayed in the testing sidebar, allowing you to expand each file and describe block to individually run, view, watch, and debug each test. Filter tests by **name**, [**projects**](/docs/test-projects) (set in your `playwright.config` file), **@tag**, or by the execution status of **passed**, **failed**, and **skipped**. See a full trace of your tests and hover back and forward over each action to see what was happening during each step. You can also pop out the DOM snapshot of a given moment into a separate window for a better debugging experience.

Opening UI Mode[â€‹](#opening-ui-mode "Direct link to Opening UI Mode")
---------------------------------------------------------------------

To open UI mode, run the following command in your terminal:

    npx playwright test --ui

Running your tests[â€‹](#running-your-tests "Direct link to Running your tests")
------------------------------------------------------------------------------

Once you launch UI Mode you will see a list of all your test files. You can run all your tests by clicking the triangle icon in the sidebar. You can also run a single test file, a block of tests or a single test by hovering over the name and clicking on the triangle next to it.

![running tests in ui mode](https://github.com/microsoft/playwright/assets/13063165/6b87712f-64a5-4d73-a91d-6562b864712c)

Filtering tests[â€‹](#filtering-tests "Direct link to Filtering tests")
---------------------------------------------------------------------

Filter tests by text or `@tag` or by passed, failed or skipped tests. You can also filter by [projects](/docs/test-projects) as set in your `playwright.config` file. If you are using project dependencies make sure to run your setup tests first before running the tests that depend on them. The UI mode will not take into consideration the setup tests and therefore you will have to manually run them first.

![filtering tests in ui mode](https://github.com/microsoft/playwright/assets/13063165/6f05e589-036d-45d5-9078-38134e1261e4)

Timeline view[â€‹](#timeline-view "Direct link to Timeline view")
---------------------------------------------------------------

At the top of the trace you can see a timeline view of your test with different colors to highlight navigation and actions. Hover back and forth to see an image snapshot for each action. Double click on an action to see the time range for that action. You can use the slider in the timeline to increase the actions selected and these will be shown in the Actions tab and all console logs and network logs will be filtered to only show the logs for the actions selected.

![timeline view in ui mode](https://github.com/microsoft/playwright/assets/13063165/811a9985-32aa-4a3e-9869-de32053cf468)

Actions[â€‹](#actions "Direct link to Actions")
---------------------------------------------

In the Actions tab you can see what locator was used for every action and how long each one took to run. Hover over each action of your test and visually see the change in the DOM snapshot. Go back and forward in time and click an action to inspect and debug. Use the Before and After tabs to visually see what happened before and after the action. ![use before and after actions in ui mode](https://github.com/microsoft/playwright/assets/13063165/7b22fab5-7346-4b98-8fdd-a78ed280647f)

Pop out and inspect the DOM[â€‹](#pop-out-and-inspect-the-dom "Direct link to Pop out and inspect the DOM")
---------------------------------------------------------------------------------------------------------

Pop out the DOM snapshot into its own window for a better debugging experience by clicking on the pop out icon above the DOM snapshot. From there you can open the browser DevTools and inspect the HTML, CSS, Console etc. Go back to UI Mode and click on another action and pop that one out to easily compare the two side by side or debug each individually.

![pop out dom snapshot in ui mode](https://github.com/microsoft/playwright/assets/13063165/f9f43a0c-78d7-4574-9a58-c69d2ec53c8f)

Pick locator[â€‹](#pick-locator "Direct link to Pick locator")
------------------------------------------------------------

Click on the pick locator button and hover over the DOM snapshot to see the locator for each element highlighted as you hover. Click on an element to add the locator playground. You can modify the locator in the playground and see if your modified locator matches any locators in the DOM snapshot. Once you are satisfied with the locator you can use the copy button to copy the locator and paste it into your test.

![pick locator in ui mode](https://github.com/microsoft/playwright/assets/13063165/9e7eeb84-bd26-4010-8614-75e24b56c716)

Source[â€‹](#source "Direct link to Source")
------------------------------------------

As you hover over each action of your test the line of code for that action is highlighted in the source panel. The button "Open in VSCode" is at the top-right of this section. Upon clicking the button, it will open your test in VS Code right at the line of code that you clicked on.

![showing source code of tests in ui mode](https://github.com/microsoft/playwright/assets/13063165/49b9fa2a-8a57-4044-acaa-0a2ea4784c5c)

Call[â€‹](#call "Direct link to Call")
------------------------------------

The call tab shows you information about the action such as the time it took, what locator was used, if in strict mode and what key was used.

![showing call tab in ui mode](https://github.com/microsoft/playwright/assets/13063165/442314c3-0b16-4400-bf25-c198f8654849)

Log[â€‹](#log "Direct link to Log")
---------------------------------

See a full log of your test to better understand what Playwright is doing behind the scenes such as scrolling into view, waiting for element to be visible, enabled and stable and performing actions such as click, fill, press etc.

![showing log of tests in ui mode](https://github.com/microsoft/playwright/assets/13063165/1d214ee5-2c07-414d-a342-f88d0864ac89)

Errors[â€‹](#errors "Direct link to Errors")
------------------------------------------

If your test fails you will see the error messages for each test in the Errors tab. The timeline will also show a red line highlighting where the error occurred. You can also click on the source tab to see on which line of the source code the error is.

![showing errors in ui mode](https://github.com/microsoft/playwright/assets/13063165/ffca2fd1-5349-41fb-ade9-ace143bb2c58)

Console[â€‹](#console "Direct link to Console")
---------------------------------------------

See console logs from the browser as well as from your test. Different icons are displayed to show you if the console log came from the browser or from the test file.

![showing console logs from tests in ui mode](https://github.com/microsoft/playwright/assets/13063165/b6a44763-da04-4152-bbac-3369ca4a60ac)

Network[â€‹](#network "Direct link to Network")
---------------------------------------------

The Network tab shows you all the network requests that were made during your test. You can sort by different types of requests, status code, method, request, content type, duration and size. Click on a request to see more information about it such as the request headers, response headers, request body and response body.

![showing network requests from tests in ui mode](https://github.com/microsoft/playwright/assets/13063165/946c2722-447a-4005-9518-b4e9b73a8240)

Attachments[â€‹](#attachments "Direct link to Attachments")
---------------------------------------------------------

The "Attachments" tab allows you to explore attachments. If you're doing [visual regression testing](/docs/test-snapshots), you'll be able to compare screenshots by examining the image diff, the actual image and the expected image. When you click on the expected image you can use the slider to slide one image over the other so you can easily see the differences in your screenshots.

![ui mode with attachments](https://github.com/microsoft/playwright/assets/13063165/bb83b406-84ed-4380-a96c-0e62d1388093)

Metadata[â€‹](#metadata "Direct link to Metadata")
------------------------------------------------

Next to the Actions tab you will find the Metadata tab which will show you more information on your test such as the Browser, viewport size, test duration and more.

![metadata tab in ui mode](https://github.com/microsoft/playwright/assets/13063165/befff46e-381a-41c2-8259-e47442add425)

Watch mode[â€‹](#watch-mode "Direct link to Watch mode")
------------------------------------------------------

Next to the name of each test in the sidebar you will find an eye icon. Clicking on the icon will activate watch mode which will re-run the test when you make changes to it. You can watch a number of tests at the same time be clicking the eye icon next to each one or all tests by clicking the eye icon at the top of the sidebar.

![watch mode in ui mode](https://github.com/microsoft/playwright/assets/13063165/20d7d44c-b52d-43ff-8871-8b828671f3da)

Docker & GitHub Codespaces[â€‹](#docker--github-codespaces "Direct link to Docker & GitHub Codespaces")
-----------------------------------------------------------------------------------------------------

For Docker and GitHub Codespaces environments, you can run UI mode in the browser. In order for an endpoint to be accessible outside of the container, it needs to be bound to the `0.0.0.0` interface:

    npx playwright test --ui-host=0.0.0.0

In the case of GitHub Codespaces, the port gets [forwarded automatically](https://docs.github.com/en/codespaces/developing-in-codespaces/forwarding-ports-in-your-codespace#about-forwarded-ports), so you can open UI mode in the browser by clicking on the link in the terminal.

To have a static port, you can pass the `--ui-port` flag:

    npx playwright test --ui-port=8080 --ui-host=0.0.0.0

note

Be aware that when specifying the `--ui-host=0.0.0.0` flag, UI Mode with your traces, the passwords and secrets is accessible from other machines inside your network. In the case of GitHub Codespaces, the ports are only accessible from your account by default.

# Web server

Web server
==========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright comes with a `webServer` option in the config file which gives you the ability to launch a local dev server before running your tests. This is ideal for when writing your tests during development and when you don't have a staging or production url to test against.

Configuring a web server[â€‹](#configuring-a-web-server "Direct link to Configuring a web server")
------------------------------------------------------------------------------------------------

Use the `webServer` property in your Playwright config to launch a development web server during the tests.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Run your local dev server before starting the tests  webServer: {    command: 'npm run start',    url: 'http://localhost:3000',    reuseExistingServer: !process.env.CI,    stdout: 'ignore',    stderr: 'pipe',  },});

Property

Description

[testConfig.webServer](/docs/api/class-testconfig#test-config-web-server)

Launch a development web server (or multiple) during the tests.

`command`

Shell command to start the local dev server of your app.

`cwd`

Current working directory of the spawned process, defaults to the directory of the configuration file.

`env`

Environment variables for the command. Defaults to inheriting `process.env` with `PLAYWRIGHT_TEST=1` added.

`gracefulShutdown`

How to shut down the process. If unspecified, the process group is forcefully `SIGKILL`ed. If set to `{ signal: 'SIGTERM', timeout: 500 }`, the process group is sent a `SIGTERM` signal, followed by `SIGKILL` if it doesn't exit within 500ms. You can also use `SIGINT` as the signal instead. A `0` timeout means no `SIGKILL` will be sent. Windows doesn't support `SIGTERM` and `SIGINT` signals, so this option is ignored on Windows. Note that shutting down a Docker container requires `SIGTERM`.

`ignoreHTTPSErrors`

Whether to ignore HTTPS errors when fetching the `url`. Defaults to `false`.

`name`

Specifies a custom name for the web server. This name will be prefixed to log messages. Defaults to `[WebServer]`.

`port`

**Deprecated**. User `url` instead. The port that your http server is expected to appear on. It does wait until it accepts connections. Either `port` or `url` should be specified.

`reuseExistingServer`

If `true`, it will re-use an existing server on the `port` or `url` when available. If no server is running on that `port` or `url`, it will run the command to start a new server. If `false`, it will throw if an existing process is listening on the `port` or `url`. This should be commonly set to `!process.env.CI` to allow the local dev server when running tests locally.

`stderr`

Whether to pipe the stderr of the command to the process stderr or ignore it. Defaults to `"pipe"`.

`stdout`

If `"pipe"`, it will pipe the stdout of the command to the process stdout. If `"ignore"`, it will ignore the stdout of the command. Default to `"ignore"`.

`timeout`

How long to wait for the process to start up and be available in milliseconds. Defaults to 60000.

`url`

URL of your http server that is expected to return a 2xx, 3xx, 400, 401, 402, or 403 status code when the server is ready to accept connections. Either `port` or `url` should be specified.

`wait`

Consider command started only when given output has been produced. Takes an object with optional `stdout` and/or `stderr` regular expressions. Named capture groups in the regex are stored in the environment, for example `/Listening on port (?<my_server_port>\\d+)/` will store the port number in `process.env['MY_SERVER_PORT']`.

Adding a server timeout[â€‹](#adding-a-server-timeout "Direct link to Adding a server timeout")
---------------------------------------------------------------------------------------------

Webservers can sometimes take longer to boot up. In this case, you can increase the timeout to wait for the server to start.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Rest of your config...  // Run your local dev server before starting the tests  webServer: {    command: 'npm run start',    url: 'http://localhost:3000',    reuseExistingServer: !process.env.CI,    timeout: 120 * 1000,  },});

Adding a baseURL[â€‹](#adding-a-baseurl "Direct link to Adding a baseURL")
------------------------------------------------------------------------

It is also recommended to specify the `baseURL` in the `use: {}` section of your config, so that tests can use relative urls and you don't have to specify the full URL over and over again.

When using [page.goto()](/docs/api/class-page#page-goto), [page.route()](/docs/api/class-page#page-route), [page.waitForURL()](/docs/api/class-page#page-wait-for-url), [page.waitForRequest()](/docs/api/class-page#page-wait-for-request), or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. For Example, by setting the baseURL to `http://localhost:3000` and navigating to `/login` in your tests, Playwright will run the test using `http://localhost:3000/login`.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  // Rest of your config...  // Run your local dev server before starting the tests  webServer: {    command: 'npm run start',    url: 'http://localhost:3000',    reuseExistingServer: !process.env.CI,  },  use: {    baseURL: 'http://localhost:3000',  },});

Now you can use a relative path when navigating the page:

test.spec.ts

    import { test } from '@playwright/test';test('test', async ({ page }) => {  // This will navigate to http://localhost:3000/login  await page.goto('./login');});

Multiple web servers[â€‹](#multiple-web-servers "Direct link to Multiple web servers")
------------------------------------------------------------------------------------

Multiple web servers (or background processes) can be launched simultaneously by providing an array of `webServer` configurations. See [testConfig.webServer](/docs/api/class-testconfig#test-config-web-server) for more info.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: [    {      command: 'npm run start',      url: 'http://localhost:3000',      name: 'Frontend',      timeout: 120 * 1000,      reuseExistingServer: !process.env.CI,    },    {      command: 'npm run backend',      url: 'http://localhost:3333',      name: 'Backend',      timeout: 120 * 1000,      reuseExistingServer: !process.env.CI,    }  ],  use: {    baseURL: 'http://localhost:3000',  },});

# Library

Library
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Library provides unified APIs for launching and interacting with browsers, while Playwright Test provides all this plus a fully managed end-to-end Test Runner and experience.

Under most circumstances, for end-to-end testing, you'll want to use `@playwright/test` (Playwright Test), and not `playwright` (Playwright Library) directly. To get started with Playwright Test, follow the [Getting Started Guide](/docs/intro).

Differences when using library[â€‹](#differences-when-using-library "Direct link to Differences when using library")
------------------------------------------------------------------------------------------------------------------

### Library Example[â€‹](#library-example "Direct link to Library Example")

The following is an example of using the Playwright Library directly to launch Chromium, go to a page, and check its title:

*   TypeScript
*   JavaScript

    import { chromium, devices } from 'playwright';import assert from 'node:assert';(async () => {  // Setup  const browser = await chromium.launch();  const context = await browser.newContext(devices['iPhone 11']);  const page = await context.newPage();  // The actual interesting bit  await context.route('**.jpg', route => route.abort());  await page.goto('https://example.com/');  assert(await page.title() === 'Example Domain'); // ðŸ‘Ž not a Web First assertion  // Teardown  await context.close();  await browser.close();})();

    const assert = require('node:assert');const { chromium, devices } = require('playwright');(async () => {  // Setup  const browser = await chromium.launch();  const context = await browser.newContext(devices['iPhone 11']);  const page = await context.newPage();  // The actual interesting bit  await context.route('**.jpg', route => route.abort());  await page.goto('https://example.com/');  assert(await page.title() === 'Example Domain'); // ðŸ‘Ž not a Web First assertion  // Teardown  await context.close();  await browser.close();})();

Run it with `node my-script.js`.

### Test Example[â€‹](#test-example "Direct link to Test Example")

A test to achieve similar behavior, would look like:

*   TypeScript
*   JavaScript

    import { expect, test, devices } from '@playwright/test';test.use(devices['iPhone 11']);test('should be titled', async ({ page, context }) => {  await context.route('**.jpg', route => route.abort());  await page.goto('https://example.com/');  await expect(page).toHaveTitle('Example');});

    const { expect, test, devices } = require('@playwright/test');test.use(devices['iPhone 11']);test('should be titled', async ({ page, context }) => {  await context.route('**.jpg', route => route.abort());  await page.goto('https://example.com/');  await expect(page).toHaveTitle('Example');});

Run it with `npx playwright test`.

### Key Differences[â€‹](#key-differences "Direct link to Key Differences")

The key differences to note are as follows:

Library

Test

Installation

`npm install playwright`

`npm init playwright@latest` - note `install` vs. `init`

Install browsers

Install `@playwright/browser-chromium`, `@playwright/browser-firefox` and/or `@playwright/browser-webkit`

`npx playwright install` or `npx playwright install chromium` for a single one

`import` from

`playwright`

`@playwright/test`

Initialization

Explicitly need to:

1.  Pick a browser to use, e.g. `chromium`
2.  Launch browser with [browserType.launch()](/docs/api/class-browsertype#browser-type-launch)
3.  Create a context with [browser.newContext()](/docs/api/class-browser#browser-new-context), _and_ pass any context options explicitly, e.g. `devices['iPhone 11']`
4.  Create a page with [browserContext.newPage()](/docs/api/class-browsercontext#browser-context-new-page)

An isolated `page` and `context` are provided to each test out-of the box, along with other [built-in fixtures](/docs/test-fixtures#built-in-fixtures). No explicit creation. If referenced by the test in its arguments, the Test Runner will create them for the test. (i.e. lazy-initialization)

Assertions

No built-in Web-First Assertions

[Web-First assertions](/docs/test-assertions) like:

*   [expect(page).toHaveTitle()](/docs/api/class-pageassertions#page-assertions-to-have-title)
*   [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1)

which auto-wait and retry for the condition to be met.

Timeouts

Defaults to 30s for most operations.

Most operations don't time out, but every test has a timeout that makes it fail (30s by default).

Cleanup

Explicitly need to:

1.  Close context with [browserContext.close()](/docs/api/class-browsercontext#browser-context-close)
2.  Close browser with [browser.close()](/docs/api/class-browser#browser-close)

No explicit close of [built-in fixtures](/docs/test-fixtures#built-in-fixtures); the Test Runner will take care of it.

Running

When using the Library, you run the code as a node script, possibly with some compilation first.

When using the Test Runner, you use the `npx playwright test` command. Along with your [config](/docs/test-configuration), the Test Runner handles any compilation and choosing what to run and how to run it.

In addition to the above, Playwright Test, as a full-featured Test Runner, includes:

*   [Configuration Matrix and Projects](/docs/test-configuration): In the above example, in the Playwright Library version, if we wanted to run with a different device or browser, we'd have to modify the script and plumb the information through. With Playwright Test, we can just specify the [matrix of configurations](/docs/test-configuration) in one place, and it will create run the one test under each of these configurations.
*   [Parallelization](/docs/test-parallel)
*   [Web-First Assertions](/docs/test-assertions)
*   [Reporting](/docs/test-reporters)
*   [Retries](/docs/test-retries)
*   [Easily Enabled Tracing](/docs/trace-viewer-intro)
*   and moreâ€¦

Usage[â€‹](#usage "Direct link to Usage")
---------------------------------------

Use npm or Yarn to install Playwright library in your Node.js project. See [system requirements](/docs/intro#system-requirements).

    npm i -D playwright

You will also need to install browsers - either manually or by adding a package that will do it for you automatically.

    # Download the Chromium, Firefox and WebKit browsernpx playwright install chromium firefox webkit# Alternatively, add packages that will download a browser upon npm installnpm i -D @playwright/browser-chromium @playwright/browser-firefox @playwright/browser-webkit

See [managing browsers](/docs/browsers#managing-browser-binaries) for more options.

Once installed, you can import Playwright in a Node.js script, and launch any of the 3 browsers (`chromium`, `firefox` and `webkit`).

    const { chromium } = require('playwright');(async () => {  const browser = await chromium.launch();  // Create pages, interact with UI elements, assert values  await browser.close();})();

Playwright APIs are asynchronous and return Promise objects. Our code examples use [the async/await pattern](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await) to ease readability. The code is wrapped in an unnamed async arrow function which is invoking itself.

    (async () => { // Start of async arrow function  // Function code  // ...})(); // End of the function and () to invoke itself

First script[â€‹](#first-script "Direct link to First script")
------------------------------------------------------------

In our first script, we will navigate to `https://playwright.dev/` and take a screenshot in WebKit.

    const { webkit } = require('playwright');(async () => {  const browser = await webkit.launch();  const page = await browser.newPage();  await page.goto('https://playwright.dev/');  await page.screenshot({ path: `example.png` });  await browser.close();})();

By default, Playwright runs the browsers in headless mode. To see the browser UI, pass the `headless: false` flag while launching the browser. You can also use `slowMo` to slow down execution. Learn more in the debugging tools [section](/docs/debug).

    firefox.launch({ headless: false, slowMo: 50 });

Record scripts[â€‹](#record-scripts "Direct link to Record scripts")
------------------------------------------------------------------

[Command line tools](/docs/test-cli) can be used to record user interactions and generate JavaScript code.

    npx playwright codegen wikipedia.org

Browser downloads[â€‹](#browser-downloads "Direct link to Browser downloads")
---------------------------------------------------------------------------

To download Playwright browsers run:

    # Explicitly download browsersnpx playwright install

Alternatively, you can add `@playwright/browser-chromium`, `@playwright/browser-firefox` and `@playwright/browser-webkit` packages to automatically download the respective browser during the package installation.

    # Use a helper package that downloads a browser on npm installnpm install @playwright/browser-chromium

**Download behind a firewall or a proxy**

Pass `HTTPS_PROXY` environment variable to download through a proxy.

*   Bash
*   PowerShell
*   Batch

    # ManualHTTPS_PROXY=https://192.0.2.1 npx playwright install# Through @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packagesHTTPS_PROXY=https://192.0.2.1 npm install

    # Manual$Env:HTTPS_PROXY=https://192.0.2.1npx playwright install# Through @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packages$Env:HTTPS_PROXY=https://192.0.2.1npm install

    # Manualset HTTPS_PROXY=https://192.0.2.1npx playwright install# Through @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packagesset HTTPS_PROXY=https://192.0.2.1npm install

**Download from artifact repository**

By default, Playwright downloads browsers from Microsoft's CDN. Pass `PLAYWRIGHT_DOWNLOAD_HOST` environment variable to download from an internal artifacts repository instead.

*   Bash
*   PowerShell
*   Batch

    # ManualPLAYWRIGHT_DOWNLOAD_HOST=192.0.2.1 npx playwright install# Through @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packagesPLAYWRIGHT_DOWNLOAD_HOST=192.0.2.1 npm install

    # Manual$Env:PLAYWRIGHT_DOWNLOAD_HOST=192.0.2.1npx playwright install# Through @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packages$Env:PLAYWRIGHT_DOWNLOAD_HOST=192.0.2.1npm install

    # Manualset PLAYWRIGHT_DOWNLOAD_HOST=192.0.2.1npx playwright install# Through @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packagesset PLAYWRIGHT_DOWNLOAD_HOST=192.0.2.1npm install

**Skip browser download**

In certain cases, it is desired to avoid browser downloads altogether because browser binaries are managed separately. This can be done by setting `PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD` variable before installing packages.

*   Bash
*   PowerShell
*   Batch

    # When using @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packagesPLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1 npm install

    # When using @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packages$Env:PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1npm install

    # When using @playwright/browser-chromium, @playwright/browser-firefox# and @playwright/browser-webkit helper packagesset PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1npm install

TypeScript support[â€‹](#typescript-support "Direct link to TypeScript support")
------------------------------------------------------------------------------

Playwright includes built-in support for TypeScript. Type definitions will be imported automatically. It is recommended to use type-checking to improve the IDE experience.

### In JavaScript[â€‹](#in-javascript "Direct link to In JavaScript")

Add the following to the top of your JavaScript file to get type-checking in VS Code or WebStorm.

    // @ts-check// ...

Alternatively, you can use JSDoc to set types for variables.

    /** @type {import('playwright').Page} */let page;

### In TypeScript[â€‹](#in-typescript "Direct link to In TypeScript")

TypeScript support will work out-of-the-box. Types can also be imported explicitly.

    let page: import('playwright').Page;

# Accessibility testing

Accessibility testing
=====================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can be used to test your application for many types of accessibility issues.

A few examples of problems this can catch include:

*   Text that would be hard to read for users with vision impairments due to poor color contrast with the background behind it
*   UI controls and form elements without labels that a screen reader could identify
*   Interactive elements with duplicate IDs which can confuse assistive technologies

The following examples rely on the [`@axe-core/playwright`](https://npmjs.org/@axe-core/playwright) package which adds support for running the [axe accessibility testing engine](https://www.deque.com/axe/) as part of your Playwright tests.

Disclaimer

Automated accessibility tests can detect some common accessibility problems such as missing or invalid properties. But many accessibility problems can only be discovered through manual testing. We recommend using a combination of automated testing, manual accessibility assessments, and inclusive user testing.

For manual assessments, we recommend [Accessibility Insights for Web](https://accessibilityinsights.io/docs/web/overview/?referrer=playwright-accessibility-testing-js), a free and open source dev tool that walks you through assessing a website for [WCAG 2.1 AA](https://www.w3.org/WAI/WCAG21/quickref/?currentsidebar=%23col_customize&levels=aaa) coverage.

Example accessibility tests[â€‹](#example-accessibility-tests "Direct link to Example accessibility tests")
---------------------------------------------------------------------------------------------------------

Accessibility tests work just like any other Playwright test. You can either create separate test cases for them, or integrate accessibility scans and assertions into your existing test cases.

The following examples demonstrate a few basic accessibility testing scenarios.

### Scanning an entire page[â€‹](#scanning-an-entire-page "Direct link to Scanning an entire page")

This example demonstrates how to test an entire page for automatically detectable accessibility violations. The test:

1.  Imports the `@axe-core/playwright` package
2.  Uses normal Playwright Test syntax to define a test case
3.  Uses normal Playwright syntax to navigate to the page under test
4.  Awaits `AxeBuilder.analyze()` to run the accessibility scan against the page
5.  Uses normal Playwright Test [assertions](/docs/test-assertions) to verify that there are no violations in the returned scan results

*   TypeScript
*   JavaScript

    import { test, expect } from '@playwright/test';import AxeBuilder from '@axe-core/playwright'; // 1test.describe('homepage', () => { // 2  test('should not have any automatically detectable accessibility issues', async ({ page }) => {    await page.goto('https://your-site.com/'); // 3    const accessibilityScanResults = await new AxeBuilder({ page }).analyze(); // 4    expect(accessibilityScanResults.violations).toEqual([]); // 5  });});

    const { test, expect } = require('@playwright/test');const AxeBuilder = require('@axe-core/playwright').default; // 1test.describe('homepage', () => { // 2  test('should not have any automatically detectable accessibility issues', async ({ page }) => {    await page.goto('https://your-site.com/'); // 3    const accessibilityScanResults = await new AxeBuilder({ page }).analyze(); // 4    expect(accessibilityScanResults.violations).toEqual([]); // 5  });});

### Configuring axe to scan a specific part of a page[â€‹](#configuring-axe-to-scan-a-specific-part-of-a-page "Direct link to Configuring axe to scan a specific part of a page")

`@axe-core/playwright` supports many configuration options for axe. You can specify these options by using a Builder pattern with the `AxeBuilder` class.

For example, you can use [`AxeBuilder.include()`](https://github.com/dequelabs/axe-core-npm/blob/develop/packages/playwright/README.md#axebuilderincludeselector-string--string) to constrain an accessibility scan to only run against one specific part of a page.

`AxeBuilder.analyze()` will scan the page _in its current state_ when you call it. To scan parts of a page that are revealed based on UI interactions, use [Locators](/docs/locators) to interact with the page before invoking `analyze()`:

    test('navigation menu should not have automatically detectable accessibility violations', async ({  page,}) => {  await page.goto('https://your-site.com/');  await page.getByRole('button', { name: 'Navigation Menu' }).click();  // It is important to waitFor() the page to be in the desired  // state *before* running analyze(). Otherwise, axe might not  // find all the elements your test expects it to scan.  await page.locator('#navigation-menu-flyout').waitFor();  const accessibilityScanResults = await new AxeBuilder({ page })      .include('#navigation-menu-flyout')      .analyze();  expect(accessibilityScanResults.violations).toEqual([]);});

### Scanning for WCAG violations[â€‹](#scanning-for-wcag-violations "Direct link to Scanning for WCAG violations")

By default, axe checks against a wide variety of accessibility rules. Some of these rules correspond to specific success criteria from the [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/TR/WCAG21/), and others are "best practice" rules that are not specifically required by any WCAG criterion.

You can constrain an accessibility scan to only run those rules which are "tagged" as corresponding to specific WCAG success criteria by using [`AxeBuilder.withTags()`](https://github.com/dequelabs/axe-core-npm/blob/develop/packages/playwright/README.md#axebuilderwithtagstags-stringarray). For example, [Accessibility Insights for Web's Automated Checks](https://accessibilityinsights.io/docs/web/getstarted/fastpass/?referrer=playwright-accessibility-testing-js) only include axe rules that test for violations of WCAG A and AA success criteria; to match that behavior, you would use the tags `wcag2a`, `wcag2aa`, `wcag21a`, and `wcag21aa`.

Note that automated testing cannot detect all types of WCAG violations.

    test('should not have any automatically detectable WCAG A or AA violations', async ({ page }) => {  await page.goto('https://your-site.com/');  const accessibilityScanResults = await new AxeBuilder({ page })      .withTags(['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'])      .analyze();  expect(accessibilityScanResults.violations).toEqual([]);});

You can find a complete listing of the rule tags axe-core supports in [the "Axe-core Tags" section of the axe API documentation](https://www.deque.com/axe/core-documentation/api-documentation/#axecore-tags).

Handling known issues[â€‹](#handling-known-issues "Direct link to Handling known issues")
---------------------------------------------------------------------------------------

A common question when adding accessibility tests to an application is "how do I suppress known violations?" The following examples demonstrate a few techniques you can use.

### Excluding individual elements from a scan[â€‹](#excluding-individual-elements-from-a-scan "Direct link to Excluding individual elements from a scan")

If your application contains a few specific elements with known issues, you can use [`AxeBuilder.exclude()`](https://github.com/dequelabs/axe-core-npm/blob/develop/packages/playwright/README.md#axebuilderexcludeselector-string--string) to exclude them from being scanned until you're able to fix the issues.

This is usually the simplest option, but it has some important downsides:

*   `exclude()` will exclude the specified elements _and all of their descendants_. Avoid using it with components that contain many children.
*   `exclude()` will prevent _all_ rules from running against the specified elements, not just the rules corresponding to known issues.

Here is an example of excluding one element from being scanned in one specific test:

    test('should not have any accessibility violations outside of elements with known issues', async ({  page,}) => {  await page.goto('https://your-site.com/page-with-known-issues');  const accessibilityScanResults = await new AxeBuilder({ page })      .exclude('#element-with-known-issue')      .analyze();  expect(accessibilityScanResults.violations).toEqual([]);});

If the element in question is used repeatedly in many pages, consider [using a test fixture](#using-a-test-fixture-for-common-axe-configuration) to reuse the same `AxeBuilder` configuration across multiple tests.

### Disabling individual scan rules[â€‹](#disabling-individual-scan-rules "Direct link to Disabling individual scan rules")

If your application contains many different preexisting violations of a specific rule, you can use [`AxeBuilder.disableRules()`](https://github.com/dequelabs/axe-core-npm/blob/develop/packages/playwright/README.md#axebuilderdisablerulesrules-stringarray) to temporarily disable individual rules until you're able to fix the issues.

You can find the rule IDs to pass to `disableRules()` in the `id` property of the violations you want to suppress. A [complete list of axe's rules](https://github.com/dequelabs/axe-core/blob/master/doc/rule-descriptions.md) can be found in `axe-core`'s documentation.

    test('should not have any accessibility violations outside of rules with known issues', async ({  page,}) => {  await page.goto('https://your-site.com/page-with-known-issues');  const accessibilityScanResults = await new AxeBuilder({ page })      .disableRules(['duplicate-id'])      .analyze();  expect(accessibilityScanResults.violations).toEqual([]);});

### Using snapshots to allow specific known issues[â€‹](#using-snapshots-to-allow-specific-known-issues "Direct link to Using snapshots to allow specific known issues")

If you would like to allow for a more granular set of known issues, you can use [Snapshots](/docs/test-snapshots) to verify that a set of preexisting violations has not changed. This approach avoids the downsides of using `AxeBuilder.exclude()` at the cost of slightly more complexity and fragility.

Do not use a snapshot of the entire `accessibilityScanResults.violations` array. It contains implementation details of the elements in question, such as a snippet of their rendered HTML; if you include these in your snapshots, it will make your tests prone to breaking every time one of the components in question changes for an unrelated reason:

    // Don't do this! This is fragile.expect(accessibilityScanResults.violations).toMatchSnapshot();

Instead, create a _fingerprint_ of the violation(s) in question that contains only enough information to uniquely identify the issue, and use a snapshot of the fingerprint:

    // This is less fragile than snapshotting the entire violations array.expect(violationFingerprints(accessibilityScanResults)).toMatchSnapshot();// my-test-utils.jsfunction violationFingerprints(accessibilityScanResults) {  const violationFingerprints = accessibilityScanResults.violations.map(violation => ({    rule: violation.id,    // These are CSS selectors which uniquely identify each element with    // a violation of the rule in question.    targets: violation.nodes.map(node => node.target),  }));  return JSON.stringify(violationFingerprints, null, 2);}

Exporting scan results as a test attachment[â€‹](#exporting-scan-results-as-a-test-attachment "Direct link to Exporting scan results as a test attachment")
---------------------------------------------------------------------------------------------------------------------------------------------------------

Most accessibility tests are primarily concerned with the `violations` property of the axe scan results. However, the scan results contain more than just `violations`. For example, the results also contain information about rules which passed and about elements which axe found to have inconclusive results for some rules. This information can be useful for debugging tests that aren't detecting all the violations you expect them to.

To include _all_ of the scan results as part of your test results for debugging purposes, you can add the scan results as a test attachment with [`testInfo.attach()`](/docs/api/class-testinfo#test-info-attach). [Reporters](/docs/test-reporters) can then embed or link the full results as part of your test output.

The following example demonstrates attaching scan results to a test:

    test('example with attachment', async ({ page }, testInfo) => {  await page.goto('https://your-site.com/');  const accessibilityScanResults = await new AxeBuilder({ page }).analyze();  await testInfo.attach('accessibility-scan-results', {    body: JSON.stringify(accessibilityScanResults, null, 2),    contentType: 'application/json'  });  expect(accessibilityScanResults.violations).toEqual([]);});

Using a test fixture for common axe configuration[â€‹](#using-a-test-fixture-for-common-axe-configuration "Direct link to Using a test fixture for common axe configuration")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[Test fixtures](/docs/test-fixtures) are a good way to share common `AxeBuilder` configuration across many tests. Some scenarios where this might be useful include:

*   Using a common set of rules among all of your tests
*   Suppressing a known violation in a common element which appears in many different pages
*   Attaching standalone accessibility reports consistently for many scans

The following example demonstrates creating and using a test fixture that covers each of those scenarios.

### Creating a fixture[â€‹](#creating-a-fixture "Direct link to Creating a fixture")

This example fixture creates an `AxeBuilder` object which is pre-configured with shared `withTags()` and `exclude()` configuration.

*   TypeScript
*   JavaScript

axe-test.ts

    import { test as base } from '@playwright/test';import AxeBuilder from '@axe-core/playwright';type AxeFixture = {  makeAxeBuilder: () => AxeBuilder;};// Extend base test by providing "makeAxeBuilder"//// This new "test" can be used in multiple test files, and each of them will get// a consistently configured AxeBuilder instance.export const test = base.extend<AxeFixture>({  makeAxeBuilder: async ({ page }, use) => {    const makeAxeBuilder = () => new AxeBuilder({ page })        .withTags(['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'])        .exclude('#commonly-reused-element-with-known-issue');    await use(makeAxeBuilder);  }});export { expect } from '@playwright/test';

axe-test.js

    const base = require('@playwright/test');const AxeBuilder = require('@axe-core/playwright').default;// Extend base test by providing "makeAxeBuilder"//// This new "test" can be used in multiple test files, and each of them will get// a consistently configured AxeBuilder instance.exports.test = base.test.extend({  makeAxeBuilder: async ({ page }, use) => {    const makeAxeBuilder = () => new AxeBuilder({ page })        .withTags(['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'])        .exclude('#commonly-reused-element-with-known-issue');    await use(makeAxeBuilder);  }});exports.expect = base.expect;

### Using a fixture[â€‹](#using-a-fixture "Direct link to Using a fixture")

To use the fixture, replace the earlier examples' `new AxeBuilder({ page })` with the newly defined `makeAxeBuilder` fixture:

    const { test, expect } = require('./axe-test');test('example using custom fixture', async ({ page, makeAxeBuilder }) => {  await page.goto('https://your-site.com/');  const accessibilityScanResults = await makeAxeBuilder()      // Automatically uses the shared AxeBuilder configuration,      // but supports additional test-specific configuration too      .include('#specific-element-under-test')      .analyze();  expect(accessibilityScanResults.violations).toEqual([]);});

# Actions

Actions
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can interact with HTML Input elements such as text inputs, checkboxes, radio buttons, select options, mouse clicks, type characters, keys and shortcuts as well as upload files and focus elements.

Text input[â€‹](#text-input "Direct link to Text input")
------------------------------------------------------

Using [locator.fill()](/docs/api/class-locator#locator-fill) is the easiest way to fill out the form fields. It focuses the element and triggers an `input` event with the entered text. It works for `<input>`, `<textarea>` and `[contenteditable]` elements.

    // Text inputawait page.getByRole('textbox').fill('Peter');// Date inputawait page.getByLabel('Birth date').fill('2020-02-02');// Time inputawait page.getByLabel('Appointment time').fill('13:15');// Local datetime inputawait page.getByLabel('Local time').fill('2020-03-02T05:15');

Checkboxes and radio buttons[â€‹](#checkboxes-and-radio-buttons "Direct link to Checkboxes and radio buttons")
------------------------------------------------------------------------------------------------------------

Using [locator.setChecked()](/docs/api/class-locator#locator-set-checked) is the easiest way to check and uncheck a checkbox or a radio button. This method can be used with `input[type=checkbox]`, `input[type=radio]` and `[role=checkbox]` elements.

    // Check the checkboxawait page.getByLabel('I agree to the terms above').check();// Assert the checked stateexpect(page.getByLabel('Subscribe to newsletter')).toBeChecked();// Select the radio buttonawait page.getByLabel('XL').check();

Select options[â€‹](#select-options "Direct link to Select options")
------------------------------------------------------------------

Selects one or multiple options in the `<select>` element with [locator.selectOption()](/docs/api/class-locator#locator-select-option). You can specify option `value`, or `label` to select. Multiple options can be selected.

    // Single selection matching the value or labelawait page.getByLabel('Choose a color').selectOption('blue');// Single selection matching the labelawait page.getByLabel('Choose a color').selectOption({ label: 'Blue' });// Multiple selected itemsawait page.getByLabel('Choose multiple colors').selectOption(['red', 'green', 'blue']);

Mouse click[â€‹](#mouse-click "Direct link to Mouse click")
---------------------------------------------------------

Performs a simple human click.

    // Generic clickawait page.getByRole('button').click();// Double clickawait page.getByText('Item').dblclick();// Right clickawait page.getByText('Item').click({ button: 'right' });// Shift + clickawait page.getByText('Item').click({ modifiers: ['Shift'] });// Ctrl + click on Windows and Linux// Meta + click on macOSawait page.getByText('Item').click({ modifiers: ['ControlOrMeta'] });// Hover over elementawait page.getByText('Item').hover();// Click the top left cornerawait page.getByText('Item').click({ position: { x: 0, y: 0 } });

Under the hood, this and other pointer-related methods:

*   wait for element with given selector to be in DOM
*   wait for it to become displayed, i.e. not empty, no `display:none`, no `visibility:hidden`
*   wait for it to stop moving, for example, until css transition finishes
*   scroll the element into view
*   wait for it to receive pointer events at the action point, for example, waits until element becomes non-obscured by other elements
*   retry if the element is detached during any of the above checks

#### Forcing the click[â€‹](#forcing-the-click "Direct link to Forcing the click")

Sometimes, apps use non-trivial logic where hovering the element overlays it with another element that intercepts the click. This behavior is indistinguishable from a bug where element gets covered and the click is dispatched elsewhere. If you know this is taking place, you can bypass the [actionability](/docs/actionability) checks and force the click:

    await page.getByRole('button').click({ force: true });

#### Programmatic click[â€‹](#programmatic-click "Direct link to Programmatic click")

If you are not interested in testing your app under the real conditions and want to simulate the click by any means possible, you can trigger the [`HTMLElement.click()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click) behavior via simply dispatching a click event on the element with [locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event):

    await page.getByRole('button').dispatchEvent('click');

Type characters[â€‹](#type-characters "Direct link to Type characters")
---------------------------------------------------------------------

caution

Most of the time, you should input text with [locator.fill()](/docs/api/class-locator#locator-fill). See the [Text input](#text-input) section above. You only need to type characters if there is special keyboard handling on the page.

Type into the field character by character, as if it was a user with a real keyboard with [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

    // Press keys one by oneawait page.locator('#area').pressSequentially('Hello World!');

This method will emit all the necessary keyboard events, with all the `keydown`, `keyup`, `keypress` events in place. You can even specify the optional `delay` between the key presses to simulate real user behavior.

Keys and shortcuts[â€‹](#keys-and-shortcuts "Direct link to Keys and shortcuts")
------------------------------------------------------------------------------

    // Hit Enterawait page.getByText('Submit').press('Enter');// Dispatch Control+Rightawait page.getByRole('textbox').press('Control+ArrowRight');// Press $ sign on keyboardawait page.getByRole('textbox').press('$');

The [locator.press()](/docs/api/class-locator#locator-press) method focuses the selected element and produces a single keystroke. It accepts the logical key names that are emitted in the [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) property of the keyboard events:

    Backquote, Minus, Equal, Backslash, Backspace, Tab, Delete, Escape,ArrowDown, End, Enter, Home, Insert, PageDown, PageUp, ArrowRight,ArrowUp, F1 - F12, Digit0 - Digit9, KeyA - KeyZ, etc.

*   You can alternatively specify a single character you'd like to produce such as `"a"` or `"#"`.
*   Following modification shortcuts are also supported: `Shift, Control, Alt, Meta`.

Simple version produces a single character. This character is case-sensitive, so `"a"` and `"A"` will produce different results.

    // <input id=name>await page.locator('#name').press('Shift+A');// <input id=name>await page.locator('#name').press('Shift+ArrowLeft');

Shortcuts such as `"Control+o"` or `"Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

Note that you still need to specify the capital `A` in `Shift-A` to produce the capital character. `Shift-a` produces a lower-case one as if you had the `CapsLock` toggled.

Upload files[â€‹](#upload-files "Direct link to Upload files")
------------------------------------------------------------

You can select input files for upload using the [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) method. It expects first argument to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input) with the type `"file"`. Multiple files can be passed in the array. If some of the file paths are relative, they are resolved relative to the current working directory. Empty array clears the selected files.

    // Select one fileawait page.getByLabel('Upload file').setInputFiles(path.join(__dirname, 'myfile.pdf'));// Select multiple filesawait page.getByLabel('Upload files').setInputFiles([  path.join(__dirname, 'file1.txt'),  path.join(__dirname, 'file2.txt'),]);// Select a directoryawait page.getByLabel('Upload directory').setInputFiles(path.join(__dirname, 'mydir'));// Remove all the selected filesawait page.getByLabel('Upload file').setInputFiles([]);// Upload buffer from memoryawait page.getByLabel('Upload file').setInputFiles({  name: 'file.txt',  mimeType: 'text/plain',  buffer: Buffer.from('this is test')});

If you don't have input element in hand (it is created dynamically), you can handle the [page.on('filechooser')](/docs/api/class-page#page-event-file-chooser) event or use a corresponding waiting method upon your action:

    // Start waiting for file chooser before clicking. Note no await.const fileChooserPromise = page.waitForEvent('filechooser');await page.getByLabel('Upload file').click();const fileChooser = await fileChooserPromise;await fileChooser.setFiles(path.join(__dirname, 'myfile.pdf'));

Focus element[â€‹](#focus-element "Direct link to Focus element")
---------------------------------------------------------------

For the dynamic pages that handle focus events, you can focus the given element with [locator.focus()](/docs/api/class-locator#locator-focus).

    await page.getByLabel('Password').focus();

Drag and Drop[â€‹](#drag-and-drop "Direct link to Drag and Drop")
---------------------------------------------------------------

You can perform drag&drop operation with [locator.dragTo()](/docs/api/class-locator#locator-drag-to). This method will:

*   Hover the element that will be dragged.
*   Press left mouse button.
*   Move mouse to the element that will receive the drop.
*   Release left mouse button.

    await page.locator('#item-to-be-dragged').dragTo(page.locator('#item-to-drop-at'));

### Dragging manually[â€‹](#dragging-manually "Direct link to Dragging manually")

If you want precise control over the drag operation, use lower-level methods like [locator.hover()](/docs/api/class-locator#locator-hover), [mouse.down()](/docs/api/class-mouse#mouse-down), [mouse.move()](/docs/api/class-mouse#mouse-move) and [mouse.up()](/docs/api/class-mouse#mouse-up).

    await page.locator('#item-to-be-dragged').hover();await page.mouse.down();await page.locator('#item-to-drop-at').hover();await page.mouse.up();

note

If your page relies on the `dragover` event being dispatched, you need at least two mouse moves to trigger it in all browsers. To reliably issue the second mouse move, repeat your [mouse.move()](/docs/api/class-mouse#mouse-move) or [locator.hover()](/docs/api/class-locator#locator-hover) twice. The sequence of operations would be: hover the drag element, mouse down, hover the drop element, hover the drop element second time, mouse up.

Scrolling[â€‹](#scrolling "Direct link to Scrolling")
---------------------------------------------------

Most of the time, Playwright will automatically scroll for you before doing any actions. Therefore, you do not need to scroll explicitly.

    // Scrolls automatically so that button is visibleawait page.getByRole('button').click();

However, in rare cases you might need to manually scroll. For example, you might want to force an "infinite list" to load more elements, or position the page for a specific screenshot. In such a case, the most reliable way is to find an element that you want to make visible at the bottom, and scroll it into view.

    // Scroll the footer into view, forcing an "infinite list" to load more contentawait page.getByText('Footer text').scrollIntoViewIfNeeded();

If you would like to control the scrolling more precisely, use [mouse.wheel()](/docs/api/class-mouse#mouse-wheel) or [locator.evaluate()](/docs/api/class-locator#locator-evaluate):

    // Position the mouse and scroll with the mouse wheelawait page.getByTestId('scrolling-container').hover();await page.mouse.wheel(0, 10);// Alternatively, programmatically scroll a specific elementawait page.getByTestId('scrolling-container').evaluate(e => e.scrollTop += 100);

# Assertions

Assertions
==========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright includes test assertions in the form of `expect` function. To make an assertion, call `expect(value)` and choose a matcher that reflects the expectation. There are many [generic matchers](/docs/api/class-genericassertions) like `toEqual`, `toContain`, `toBeTruthy` that can be used to assert any conditions.

    expect(success).toBeTruthy();

Playwright also includes web-specific [async matchers](/docs/api/class-locatorassertions) that will wait until the expected condition is met. Consider the following example:

    await expect(page.getByTestId('status')).toHaveText('Submitted');

Playwright will be re-testing the element with the test id of `status` until the fetched element has the `"Submitted"` text. It will re-fetch the element and check it over and over, until the condition is met or until the timeout is reached. You can either pass this timeout or configure it once via the [testConfig.expect](/docs/api/class-testconfig#test-config-expect) value in the test config.

By default, the timeout for assertions is set to 5 seconds. Learn more about [various timeouts](/docs/test-timeouts).

Auto-retrying assertions[â€‹](#auto-retrying-assertions "Direct link to Auto-retrying assertions")
------------------------------------------------------------------------------------------------

The following assertions will retry until the assertion passes, or the assertion timeout is reached. Note that retrying assertions are async, so you must `await` them.

Assertion

Description

[await expect(locator).toBeAttached()](/docs/api/class-locatorassertions#locator-assertions-to-be-attached)

Element is attached

[await expect(locator).toBeChecked()](/docs/api/class-locatorassertions#locator-assertions-to-be-checked)

Checkbox is checked

[await expect(locator).toBeDisabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-disabled)

Element is disabled

[await expect(locator).toBeEditable()](/docs/api/class-locatorassertions#locator-assertions-to-be-editable)

Element is editable

[await expect(locator).toBeEmpty()](/docs/api/class-locatorassertions#locator-assertions-to-be-empty)

Container is empty

[await expect(locator).toBeEnabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)

Element is enabled

[await expect(locator).toBeFocused()](/docs/api/class-locatorassertions#locator-assertions-to-be-focused)

Element is focused

[await expect(locator).toBeHidden()](/docs/api/class-locatorassertions#locator-assertions-to-be-hidden)

Element is not visible

[await expect(locator).toBeInViewport()](/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport)

Element intersects viewport

[await expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible)

Element is visible

[await expect(locator).toContainText()](/docs/api/class-locatorassertions#locator-assertions-to-contain-text)

Element contains text

[await expect(locator).toContainClass()](/docs/api/class-locatorassertions#locator-assertions-to-contain-class)

Element has specified CSS classes

[await expect(locator).toHaveAccessibleDescription()](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description)

Element has a matching [accessible description](https://w3c.github.io/accname/#dfn-accessible-description)

[await expect(locator).toHaveAccessibleName()](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name)

Element has a matching [accessible name](https://w3c.github.io/accname/#dfn-accessible-name)

[await expect(locator).toHaveAttribute()](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)

Element has a DOM attribute

[await expect(locator).toHaveClass()](/docs/api/class-locatorassertions#locator-assertions-to-have-class)

Element has specified CSS class property

[await expect(locator).toHaveCount()](/docs/api/class-locatorassertions#locator-assertions-to-have-count)

List has exact number of children

[await expect(locator).toHaveCSS()](/docs/api/class-locatorassertions#locator-assertions-to-have-css)

Element has CSS property

[await expect(locator).toHaveId()](/docs/api/class-locatorassertions#locator-assertions-to-have-id)

Element has an ID

[await expect(locator).toHaveJSProperty()](/docs/api/class-locatorassertions#locator-assertions-to-have-js-property)

Element has a JavaScript property

[await expect(locator).toHaveRole()](/docs/api/class-locatorassertions#locator-assertions-to-have-role)

Element has a specific [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles)

[await expect(locator).toHaveScreenshot()](/docs/api/class-locatorassertions#locator-assertions-to-have-screenshot-1)

Element has a screenshot

[await expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text)

Element matches text

[await expect(locator).toHaveValue()](/docs/api/class-locatorassertions#locator-assertions-to-have-value)

Input has a value

[await expect(locator).toHaveValues()](/docs/api/class-locatorassertions#locator-assertions-to-have-values)

Select has options selected

[await expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot)

Element matches the Aria snapshot

[await expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1)

Page has a screenshot

[await expect(page).toHaveTitle()](/docs/api/class-pageassertions#page-assertions-to-have-title)

Page has a title

[await expect(page).toHaveURL()](/docs/api/class-pageassertions#page-assertions-to-have-url)

Page has a URL

[await expect(response).toBeOK()](/docs/api/class-apiresponseassertions#api-response-assertions-to-be-ok)

Response has an OK status

Non-retrying assertions[â€‹](#non-retrying-assertions "Direct link to Non-retrying assertions")
---------------------------------------------------------------------------------------------

These assertions allow to test any conditions, but do not auto-retry. Most of the time, web pages show information asynchronously, and using non-retrying assertions can lead to a flaky test.

Prefer [auto-retrying](#auto-retrying-assertions) assertions whenever possible. For more complex assertions that need to be retried, use [`expect.poll`](#expectpoll) or [`expect.toPass`](#expecttopass).

Assertion

Description

[expect(value).toBe()](/docs/api/class-genericassertions#generic-assertions-to-be)

Value is the same

[expect(value).toBeCloseTo()](/docs/api/class-genericassertions#generic-assertions-to-be-close-to)

Number is approximately equal

[expect(value).toBeDefined()](/docs/api/class-genericassertions#generic-assertions-to-be-defined)

Value is not `undefined`

[expect(value).toBeFalsy()](/docs/api/class-genericassertions#generic-assertions-to-be-falsy)

Value is falsy, e.g. `false`, `0`, `null`, etc.

[expect(value).toBeGreaterThan()](/docs/api/class-genericassertions#generic-assertions-to-be-greater-than)

Number is more than

[expect(value).toBeGreaterThanOrEqual()](/docs/api/class-genericassertions#generic-assertions-to-be-greater-than-or-equal)

Number is more than or equal

[expect(value).toBeInstanceOf()](/docs/api/class-genericassertions#generic-assertions-to-be-instance-of)

Object is an instance of a class

[expect(value).toBeLessThan()](/docs/api/class-genericassertions#generic-assertions-to-be-less-than)

Number is less than

[expect(value).toBeLessThanOrEqual()](/docs/api/class-genericassertions#generic-assertions-to-be-less-than-or-equal)

Number is less than or equal

[expect(value).toBeNaN()](/docs/api/class-genericassertions#generic-assertions-to-be-na-n)

Value is `NaN`

[expect(value).toBeNull()](/docs/api/class-genericassertions#generic-assertions-to-be-null)

Value is `null`

[expect(value).toBeTruthy()](/docs/api/class-genericassertions#generic-assertions-to-be-truthy)

Value is truthy, i.e. not `false`, `0`, `null`, etc.

[expect(value).toBeUndefined()](/docs/api/class-genericassertions#generic-assertions-to-be-undefined)

Value is `undefined`

[expect(value).toContain()](/docs/api/class-genericassertions#generic-assertions-to-contain-1)

String contains a substring

[expect(value).toContain()](/docs/api/class-genericassertions#generic-assertions-to-contain-2)

Array or set contains an element

[expect(value).toContainEqual()](/docs/api/class-genericassertions#generic-assertions-to-contain-equal)

Array or set contains a similar element

[expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal)

Value is similar - deep equality and pattern matching

[expect(value).toHaveLength()](/docs/api/class-genericassertions#generic-assertions-to-have-length)

Array or string has length

[expect(value).toHaveProperty()](/docs/api/class-genericassertions#generic-assertions-to-have-property)

Object has a property

[expect(value).toMatch()](/docs/api/class-genericassertions#generic-assertions-to-match)

String matches a regular expression

[expect(value).toMatchObject()](/docs/api/class-genericassertions#generic-assertions-to-match-object)

Object contains specified properties

[expect(value).toStrictEqual()](/docs/api/class-genericassertions#generic-assertions-to-strict-equal)

Value is similar, including property types

[expect(value).toThrow()](/docs/api/class-genericassertions#generic-assertions-to-throw)

Function throws an error

Asymmetric matchers[â€‹](#asymmetric-matchers "Direct link to Asymmetric matchers")
---------------------------------------------------------------------------------

These expressions can be nested in other assertions to allow more relaxed matching against a given condition.

Matcher

Description

[expect.any()](/docs/api/class-genericassertions#generic-assertions-any)

Matches any instance of a class/primitive

[expect.anything()](/docs/api/class-genericassertions#generic-assertions-anything)

Matches anything

[expect.arrayContaining()](/docs/api/class-genericassertions#generic-assertions-array-containing)

Array contains specific elements

[expect.arrayOf()](/docs/api/class-genericassertions#generic-assertions-array-of)

Array contains elements of specific type

[expect.closeTo()](/docs/api/class-genericassertions#generic-assertions-close-to)

Number is approximately equal

[expect.objectContaining()](/docs/api/class-genericassertions#generic-assertions-object-containing)

Object contains specific properties

[expect.stringContaining()](/docs/api/class-genericassertions#generic-assertions-string-containing)

String contains a substring

[expect.stringMatching()](/docs/api/class-genericassertions#generic-assertions-string-matching)

String matches a regular expression

Negating matchers[â€‹](#negating-matchers "Direct link to Negating matchers")
---------------------------------------------------------------------------

In general, we can expect the opposite to be true by adding a `.not` to the front of the matchers:

    expect(value).not.toEqual(0);await expect(locator).not.toContainText('some text');

Soft assertions[â€‹](#soft-assertions "Direct link to Soft assertions")
---------------------------------------------------------------------

By default, failed assertion will terminate test execution. Playwright also supports _soft assertions_: failed soft assertions **do not** terminate test execution, but mark the test as failed.

    // Make a few checks that will not stop the test when failed...await expect.soft(page.getByTestId('status')).toHaveText('Success');await expect.soft(page.getByTestId('eta')).toHaveText('1 day');// ... and continue the test to check more things.await page.getByRole('link', { name: 'next page' }).click();await expect.soft(page.getByRole('heading', { name: 'Make another order' })).toBeVisible();

At any point during test execution, you can check whether there were any soft assertion failures:

    // Make a few checks that will not stop the test when failed...await expect.soft(page.getByTestId('status')).toHaveText('Success');await expect.soft(page.getByTestId('eta')).toHaveText('1 day');// Avoid running further if there were soft assertion failures.expect(test.info().errors).toHaveLength(0);

Note that soft assertions only work with Playwright test runner.

Custom expect message[â€‹](#custom-expect-message "Direct link to Custom expect message")
---------------------------------------------------------------------------------------

You can specify a custom expect message as a second argument to the `expect` function, for example:

    await expect(page.getByText('Name'), 'should be logged in').toBeVisible();

This message will be shown in reporters, both for passing and failing expects, providing more context about the assertion.

When expect passes, you might see a successful step like this:

    âœ… should be logged in    @example.spec.ts:18

When expect fails, the error would look like this:

        Error: should be logged in    Call log:      - expect.toBeVisible with timeout 5000ms      - waiting for "getByText('Name')"      2 |      3 | test('example test', async({ page }) => {    > 4 |   await expect(page.getByText('Name'), 'should be logged in').toBeVisible();        |                                                                  ^      5 | });      6 |

Soft assertions also support custom message:

    expect.soft(value, 'my soft assertion').toBe(56);

expect.configure[â€‹](#expectconfigure "Direct link to expect.configure")
-----------------------------------------------------------------------

You can create your own pre-configured `expect` instance to have its own defaults such as `timeout` and `soft`.

    const slowExpect = expect.configure({ timeout: 10000 });await slowExpect(locator).toHaveText('Submit');// Always do soft assertions.const softExpect = expect.configure({ soft: true });await softExpect(locator).toHaveText('Submit');

expect.poll[â€‹](#expectpoll "Direct link to expect.poll")
--------------------------------------------------------

You can convert any synchronous `expect` to an asynchronous polling one using `expect.poll`.

The following method will poll given function until it returns HTTP status 200:

    await expect.poll(async () => {  const response = await page.request.get('https://api.example.com');  return response.status();}, {  // Custom expect message for reporting, optional.  message: 'make sure API eventually succeeds',  // Poll for 10 seconds; defaults to 5 seconds. Pass 0 to disable timeout.  timeout: 10000,}).toBe(200);

You can also specify custom polling intervals:

    await expect.poll(async () => {  const response = await page.request.get('https://api.example.com');  return response.status();}, {  // Probe, wait 1s, probe, wait 2s, probe, wait 10s, probe, wait 10s, probe  // ... Defaults to [100, 250, 500, 1000].  intervals: [1_000, 2_000, 10_000],  timeout: 60_000}).toBe(200);

You can combine `expect.configure({ soft: true })` with expect.poll to perform soft assertions in polling logic.

    const softExpect = expect.configure({ soft: true });await softExpect.poll(async () => {  const response = await page.request.get('https://api.example.com');  return response.status();}, {}).toBe(200);

This allows the test to continue even if the assertion inside poll fails.

expect.toPass[â€‹](#expecttopass "Direct link to expect.toPass")
--------------------------------------------------------------

You can retry blocks of code until they are passing successfully.

    await expect(async () => {  const response = await page.request.get('https://api.example.com');  expect(response.status()).toBe(200);}).toPass();

You can also specify custom timeout and retry intervals:

    await expect(async () => {  const response = await page.request.get('https://api.example.com');  expect(response.status()).toBe(200);}).toPass({  // Probe, wait 1s, probe, wait 2s, probe, wait 10s, probe, wait 10s, probe  // ... Defaults to [100, 250, 500, 1000].  intervals: [1_000, 2_000, 10_000],  timeout: 60_000});

Note that by default `toPass` has timeout 0 and does not respect custom [expect timeout](/docs/test-timeouts#expect-timeout).

Add custom matchers using expect.extend[â€‹](#add-custom-matchers-using-expectextend "Direct link to Add custom matchers using expect.extend")
--------------------------------------------------------------------------------------------------------------------------------------------

You can extend Playwright assertions by providing custom matchers. These matchers will be available on the `expect` object.

In this example we add a custom `toHaveAmount` function. Custom matcher should return a `pass` flag indicating whether the assertion passed, and a `message` callback that's used when the assertion fails.

fixtures.ts

    import { expect as baseExpect } from '@playwright/test';import type { Locator } from '@playwright/test';export { test } from '@playwright/test';export const expect = baseExpect.extend({  async toHaveAmount(locator: Locator, expected: number, options?: { timeout?: number }) {    const assertionName = 'toHaveAmount';    let pass: boolean;    let matcherResult: any;    try {      const expectation = this.isNot ? baseExpect(locator).not : baseExpect(locator);      await expectation.toHaveAttribute('data-amount', String(expected), options);      pass = true;    } catch (e: any) {      matcherResult = e.matcherResult;      pass = false;    }    if (this.isNot) {      pass =!pass;    }    const message = pass      ? () => this.utils.matcherHint(assertionName, undefined, undefined, { isNot: this.isNot }) +          '\n\n' +          `Locator: ${locator}\n` +          `Expected: not ${this.utils.printExpected(expected)}\n` +          (matcherResult ? `Received: ${this.utils.printReceived(matcherResult.actual)}` : '')      : () =>  this.utils.matcherHint(assertionName, undefined, undefined, { isNot: this.isNot }) +          '\n\n' +          `Locator: ${locator}\n` +          `Expected: ${this.utils.printExpected(expected)}\n` +          (matcherResult ? `Received: ${this.utils.printReceived(matcherResult.actual)}` : '');    return {      message,      pass,      name: assertionName,      expected,      actual: matcherResult?.actual,    };  },});

Now we can use `toHaveAmount` in the test.

example.spec.ts

    import { test, expect } from './fixtures';test('amount', async () => {  await expect(page.locator('.cart')).toHaveAmount(4);});

### Compatibility with expect library[â€‹](#compatibility-with-expect-library "Direct link to Compatibility with expect library")

note

Do not confuse Playwright's `expect` with the [`expect` library](https://jestjs.io/docs/expect). The latter is not fully integrated with Playwright test runner, so make sure to use Playwright's own `expect`.

### Combine custom matchers from multiple modules[â€‹](#combine-custom-matchers-from-multiple-modules "Direct link to Combine custom matchers from multiple modules")

You can combine custom matchers from multiple files or modules.

fixtures.ts

    import { mergeTests, mergeExpects } from '@playwright/test';import { test as dbTest, expect as dbExpect } from 'database-test-utils';import { test as a11yTest, expect as a11yExpect } from 'a11y-test-utils';export const expect = mergeExpects(dbExpect, a11yExpect);export const test = mergeTests(dbTest, a11yTest);

test.spec.ts

    import { test, expect } from './fixtures';test('passes', async ({ database }) => {  await expect(database).toHaveDatabaseUser('admin');});

# API testing

API testing
===========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can be used to get access to the [REST](https://en.wikipedia.org/wiki/Representational_state_transfer) API of your application.

Sometimes you may want to send requests to the server directly from Node.js without loading a page and running js code in it. A few examples where it may come in handy:

*   Test your server API.
*   Prepare server side state before visiting the web application in a test.
*   Validate server side post-conditions after running some actions in the browser.

All of that could be achieved via [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") methods.

Writing API Test[â€‹](#writing-api-test "Direct link to Writing API Test")
------------------------------------------------------------------------

[APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") can send all kinds of HTTP(S) requests over network.

The following example demonstrates how to use Playwright to test issues creation via [GitHub API](https://docs.github.com/en/rest). The test suite will do the following:

*   Create a new repository before running tests.
*   Create a few issues and validate server state.
*   Delete the repository after running tests.

### Configuration[â€‹](#configuration "Direct link to Configuration")

GitHub API requires authorization, so we'll configure the token once for all tests. While at it, we'll also set the `baseURL` to simplify the tests. You can either put them in the configuration file, or in the test file with `test.use()`.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    // All requests we send go to this API endpoint.    baseURL: 'https://api.github.com',    extraHTTPHeaders: {      // We set this header per GitHub guidelines.      'Accept': 'application/vnd.github.v3+json',      // Add authorization token to all requests.      // Assuming personal access token available in the environment.      'Authorization': `token ${process.env.API_TOKEN}`,    },  }});

**Proxy configuration**

If your tests need to run behind a proxy, you can specify this in the config and the `request` fixture will pick it up automatically:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    proxy: {      server: 'http://my-proxy:8080',      username: 'user',      password: 'secret'    },  }});

### Writing tests[â€‹](#writing-tests "Direct link to Writing tests")

Playwright Test comes with the built-in `request` fixture that respects configuration options like `baseURL` or `extraHTTPHeaders` we specified and is ready to send some requests.

Now we can add a few tests that will create new issues in the repository.

    const REPO = 'test-repo-1';const USER = 'github-username';test('should create a bug report', async ({ request }) => {  const newIssue = await request.post(`/repos/${USER}/${REPO}/issues`, {    data: {      title: '[Bug] report 1',      body: 'Bug description',    }  });  expect(newIssue.ok()).toBeTruthy();  const issues = await request.get(`/repos/${USER}/${REPO}/issues`);  expect(issues.ok()).toBeTruthy();  expect(await issues.json()).toContainEqual(expect.objectContaining({    title: '[Bug] report 1',    body: 'Bug description'  }));});test('should create a feature request', async ({ request }) => {  const newIssue = await request.post(`/repos/${USER}/${REPO}/issues`, {    data: {      title: '[Feature] request 1',      body: 'Feature description',    }  });  expect(newIssue.ok()).toBeTruthy();  const issues = await request.get(`/repos/${USER}/${REPO}/issues`);  expect(issues.ok()).toBeTruthy();  expect(await issues.json()).toContainEqual(expect.objectContaining({    title: '[Feature] request 1',    body: 'Feature description'  }));});

### Setup and teardown[â€‹](#setup-and-teardown "Direct link to Setup and teardown")

These tests assume that repository exists. You probably want to create a new one before running tests and delete it afterwards. Use `beforeAll` and `afterAll` hooks for that.

    test.beforeAll(async ({ request }) => {  // Create a new repository  const response = await request.post('/user/repos', {    data: {      name: REPO    }  });  expect(response.ok()).toBeTruthy();});test.afterAll(async ({ request }) => {  // Delete the repository  const response = await request.delete(`/repos/${USER}/${REPO}`);  expect(response.ok()).toBeTruthy();});

Using request context[â€‹](#using-request-context "Direct link to Using request context")
---------------------------------------------------------------------------------------

Behind the scenes, [`request` fixture](/docs/api/class-fixtures#fixtures-request) will actually call [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context). You can always do that manually if you'd like more control. Below is a standalone script that does the same as `beforeAll` and `afterAll` from above.

    import { request } from '@playwright/test';const REPO = 'test-repo-1';const USER = 'github-username';(async () => {  // Create a context that will issue http requests.  const context = await request.newContext({    baseURL: 'https://api.github.com',  });  // Create a repository.  await context.post('/user/repos', {    headers: {      'Accept': 'application/vnd.github.v3+json',      // Add GitHub personal access token.      'Authorization': `token ${process.env.API_TOKEN}`,    },    data: {      name: REPO    }  });  // Delete a repository.  await context.delete(`/repos/${USER}/${REPO}`, {    headers: {      'Accept': 'application/vnd.github.v3+json',      // Add GitHub personal access token.      'Authorization': `token ${process.env.API_TOKEN}`,    }  });})();

Sending API requests from UI tests[â€‹](#sending-api-requests-from-ui-tests "Direct link to Sending API requests from UI tests")
------------------------------------------------------------------------------------------------------------------------------

While running tests inside browsers you may want to make calls to the HTTP API of your application. It may be helpful if you need to prepare server state before running a test or to check some postconditions on the server after performing some actions in the browser. All of that could be achieved via [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") methods.

### Establishing preconditions[â€‹](#establishing-preconditions "Direct link to Establishing preconditions")

The following test creates a new issue via API and then navigates to the list of all issues in the project to check that it appears at the top of the list.

    import { test, expect } from '@playwright/test';const REPO = 'test-repo-1';const USER = 'github-username';// Request context is reused by all tests in the file.let apiContext;test.beforeAll(async ({ playwright }) => {  apiContext = await playwright.request.newContext({    // All requests we send go to this API endpoint.    baseURL: 'https://api.github.com',    extraHTTPHeaders: {      // We set this header per GitHub guidelines.      'Accept': 'application/vnd.github.v3+json',      // Add authorization token to all requests.      // Assuming personal access token available in the environment.      'Authorization': `token ${process.env.API_TOKEN}`,    },  });});test.afterAll(async ({ }) => {  // Dispose all responses.  await apiContext.dispose();});test('last created issue should be first in the list', async ({ page }) => {  const newIssue = await apiContext.post(`/repos/${USER}/${REPO}/issues`, {    data: {      title: '[Feature] request 1',    }  });  expect(newIssue.ok()).toBeTruthy();  await page.goto(`https://github.com/${USER}/${REPO}/issues`);  const firstIssue = page.locator(`a[data-hovercard-type='issue']`).first();  await expect(firstIssue).toHaveText('[Feature] request 1');});

### Validating postconditions[â€‹](#validating-postconditions "Direct link to Validating postconditions")

The following test creates a new issue via user interface in the browser and then uses checks if it was created via API:

    import { test, expect } from '@playwright/test';const REPO = 'test-repo-1';const USER = 'github-username';// Request context is reused by all tests in the file.let apiContext;test.beforeAll(async ({ playwright }) => {  apiContext = await playwright.request.newContext({    // All requests we send go to this API endpoint.    baseURL: 'https://api.github.com',    extraHTTPHeaders: {      // We set this header per GitHub guidelines.      'Accept': 'application/vnd.github.v3+json',      // Add authorization token to all requests.      // Assuming personal access token available in the environment.      'Authorization': `token ${process.env.API_TOKEN}`,    },  });});test.afterAll(async ({ }) => {  // Dispose all responses.  await apiContext.dispose();});test('last created issue should be on the server', async ({ page }) => {  await page.goto(`https://github.com/${USER}/${REPO}/issues`);  await page.getByText('New Issue').click();  await page.getByRole('textbox', { name: 'Title' }).fill('Bug report 1');  await page.getByRole('textbox', { name: 'Comment body' }).fill('Bug description');  await page.getByText('Submit new issue').click();  const issueId = new URL(page.url()).pathname.split('/').pop();  const newIssue = await apiContext.get(      `https://api.github.com/repos/${USER}/${REPO}/issues/${issueId}`  );  expect(newIssue.ok()).toBeTruthy();  expect(newIssue.json()).toEqual(expect.objectContaining({    title: 'Bug report 1'  }));});

Reusing authentication state[â€‹](#reusing-authentication-state "Direct link to Reusing authentication state")
------------------------------------------------------------------------------------------------------------

Web apps use cookie-based or token-based authentication, where authenticated state is stored as [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies). Playwright provides [apiRequestContext.storageState()](/docs/api/class-apirequestcontext#api-request-context-storage-state) method that can be used to retrieve storage state from an authenticated context and then create new contexts with that state.

Storage state is interchangeable between [BrowserContext](/docs/api/class-browsercontext "BrowserContext") and [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext"). You can use it to log in via API calls and then create a new context with cookies already there. The following code snippet retrieves state from an authenticated [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and creates a new [BrowserContext](/docs/api/class-browsercontext "BrowserContext") with that state.

    const requestContext = await request.newContext({  httpCredentials: {    username: 'user',    password: 'passwd'  }});await requestContext.get(`https://api.example.com/login`);// Save storage state into the file.await requestContext.storageState({ path: 'state.json' });// Create a new context with the saved storage state.const context = await browser.newContext({ storageState: 'state.json' });

Context request vs global request[â€‹](#context-request-vs-global-request "Direct link to Context request vs global request")
---------------------------------------------------------------------------------------------------------------------------

There are two types of [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext"):

*   associated with a [BrowserContext](/docs/api/class-browsercontext "BrowserContext")
*   isolated instance, created via [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context)

The main difference is that [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") accessible via [browserContext.request](/docs/api/class-browsercontext#browser-context-request) and [page.request](/docs/api/class-page#page-request) will populate request's `Cookie` header from the browser context and will automatically update browser cookies if [APIResponse](/docs/api/class-apiresponse "APIResponse") has `Set-Cookie` header:

    test('context request will share cookie storage with its browser context', async ({  page,  context,}) => {  await context.route('https://www.github.com/', async route => {    // Send an API request that shares cookie storage with the browser context.    const response = await context.request.fetch(route.request());    const responseHeaders = response.headers();    // The response will have 'Set-Cookie' header.    const responseCookies = new Map(responseHeaders['set-cookie']        .split('\n')        .map(c => c.split(';', 2)[0].split('=')));    // The response will have 3 cookies in 'Set-Cookie' header.    expect(responseCookies.size).toBe(3);    const contextCookies = await context.cookies();    // The browser context will already contain all the cookies from the API response.    expect(new Map(contextCookies.map(({ name, value }) =>      [name, value])    )).toEqual(responseCookies);    await route.fulfill({      response,      headers: { ...responseHeaders, foo: 'bar' },    });  });  await page.goto('https://www.github.com/');});

If you don't want [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") to use and update cookies from the browser context, you can manually create a new instance of [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") which will have its own isolated cookies:

    test('global context request has isolated cookie storage', async ({  page,  context,  browser,  playwright}) => {  // Create a new instance of APIRequestContext with isolated cookie storage.  const request = await playwright.request.newContext();  await context.route('https://www.github.com/', async route => {    const response = await request.fetch(route.request());    const responseHeaders = response.headers();    const responseCookies = new Map(responseHeaders['set-cookie']        .split('\n')        .map(c => c.split(';', 2)[0].split('=')));    // The response will have 3 cookies in 'Set-Cookie' header.    expect(responseCookies.size).toBe(3);    const contextCookies = await context.cookies();    // The browser context will not have any cookies from the isolated API request.    expect(contextCookies.length).toBe(0);    // Manually export cookie storage.    const storageState = await request.storageState();    // Create a new context and initialize it with the cookies from the global request.    const browserContext2 = await browser.newContext({ storageState });    const contextCookies2 = await browserContext2.cookies();    // The new browser context will already contain all the cookies from the API response.    expect(        new Map(contextCookies2.map(({ name, value }) => [name, value]))    ).toEqual(responseCookies);    await route.fulfill({      response,      headers: { ...responseHeaders, foo: 'bar' },    });  });  await page.goto('https://www.github.com/');  await request.dispose();});

# Authentication

Authentication
==============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright executes tests in isolated environments called [browser contexts](/docs/browser-contexts). This isolation model improves reproducibility and prevents cascading test failures. Tests can load existing authenticated state. This eliminates the need to authenticate in every test and speeds up test execution.

Core concepts[â€‹](#core-concepts "Direct link to Core concepts")
---------------------------------------------------------------

Regardless of the authentication strategy you choose, you are likely to store authenticated browser state on the file system.

We recommend to create `playwright/.auth` directory and add it to your `.gitignore`. Your authentication routine will produce authenticated browser state and save it to a file in this `playwright/.auth` directory. Later on, tests will reuse this state and start already authenticated.

danger

The browser state file may contain sensitive cookies and headers that could be used to impersonate you or your test account. We strongly discourage checking them into private or public repositories.

*   Bash
*   PowerShell
*   Batch

    mkdir -p playwright/.authecho $'\nplaywright/.auth' >> .gitignore

    New-Item -ItemType Directory -Force -Path playwright\.authAdd-Content -path .gitignore "`r`nplaywright/.auth"

    md playwright\.authecho. >> .gitignoreecho "playwright/.auth" >> .gitignore

Basic: shared account in all tests[â€‹](#basic-shared-account-in-all-tests "Direct link to Basic: shared account in all tests")
-----------------------------------------------------------------------------------------------------------------------------

This is the **recommended** approach for tests **without server-side state**. Authenticate once in the **setup project**, save the authentication state, and then reuse it to bootstrap each test already authenticated.

**When to use**

*   When you can imagine all your tests running at the same time with the same account, without affecting each other.

**When not to use**

*   Your tests modify server-side state. For example, one test checks the rendering of the settings page, while the other test is changing the setting, and you run tests in parallel. In this case, tests must use different accounts.
*   Your authentication is browser-specific.

**Details**

Create `tests/auth.setup.ts` that will prepare authenticated browser state for all other tests.

tests/auth.setup.ts

    import { test as setup, expect } from '@playwright/test';import path from 'path';const authFile = path.join(__dirname, '../playwright/.auth/user.json');setup('authenticate', async ({ page }) => {  // Perform authentication steps. Replace these actions with your own.  await page.goto('https://github.com/login');  await page.getByLabel('Username or email address').fill('username');  await page.getByLabel('Password').fill('password');  await page.getByRole('button', { name: 'Sign in' }).click();  // Wait until the page receives the cookies.  //  // Sometimes login flow sets cookies in the process of several redirects.  // Wait for the final URL to ensure that the cookies are actually set.  await page.waitForURL('https://github.com/');  // Alternatively, you can wait until the page reaches a state where all cookies are set.  await expect(page.getByRole('button', { name: 'View profile and more' })).toBeVisible();  // End of authentication steps.  await page.context().storageState({ path: authFile });});

Create a new `setup` project in the config and declare it as a [dependency](/docs/test-projects#dependencies) for all your testing projects. This project will always run and authenticate before all the tests. All testing projects should use the authenticated state as `storageState`.

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    // Setup project    { name: 'setup', testMatch: /.*\.setup\.ts/ },    {      name: 'chromium',      use: {        ...devices['Desktop Chrome'],        // Use prepared auth state.        storageState: 'playwright/.auth/user.json',      },      dependencies: ['setup'],    },    {      name: 'firefox',      use: {        ...devices['Desktop Firefox'],        // Use prepared auth state.        storageState: 'playwright/.auth/user.json',      },      dependencies: ['setup'],    },  ],});

Tests start already authenticated because we specified `storageState` in the config.

tests/example.spec.ts

    import { test } from '@playwright/test';test('test', async ({ page }) => {  // page is authenticated});

Note that you need to delete the stored state when it expires. If you don't need to keep the state between test runs, write the browser state under [testProject.outputDir](/docs/api/class-testproject#test-project-output-dir), which is automatically cleaned up before every test run.

### Authenticating in UI mode[â€‹](#authenticating-in-ui-mode "Direct link to Authenticating in UI mode")

UI mode will not run the `setup` project by default to improve testing speed. We recommend to authenticate by manually running the `auth.setup.ts` from time to time, whenever existing authentication expires.

First [enable the `setup` project in the filters](/docs/test-ui-mode#filtering-tests), then click the triangle button next to `auth.setup.ts` file, and then disable the `setup` project in the filters again.

Moderate: one account per parallel worker[â€‹](#moderate-one-account-per-parallel-worker "Direct link to Moderate: one account per parallel worker")
--------------------------------------------------------------------------------------------------------------------------------------------------

This is the **recommended** approach for tests that **modify server-side state**. In Playwright, worker processes run in parallel. In this approach, each parallel worker is authenticated once. All tests ran by worker are reusing the same authentication state. We will need multiple testing accounts, one per each parallel worker.

**When to use**

*   Your tests modify shared server-side state. For example, one test checks the rendering of the settings page, while the other test is changing the setting.

**When not to use**

*   Your tests do not modify any shared server-side state. In this case, all tests can use a single shared account.

**Details**

We will authenticate once per [worker process](/docs/test-parallel#worker-processes), each with a unique account.

Create `playwright/fixtures.ts` file that will [override `storageState` fixture](/docs/test-fixtures#overriding-fixtures) to authenticate once per worker. Use [testInfo.parallelIndex](/docs/api/class-testinfo#test-info-parallel-index) to differentiate between workers.

playwright/fixtures.ts

    import { test as baseTest, expect } from '@playwright/test';import fs from 'fs';import path from 'path';export * from '@playwright/test';export const test = baseTest.extend<{}, { workerStorageState: string }>({  // Use the same storage state for all tests in this worker.  storageState: ({ workerStorageState }, use) => use(workerStorageState),  // Authenticate once per worker with a worker-scoped fixture.  workerStorageState: [async ({ browser }, use) => {    // Use parallelIndex as a unique identifier for each worker.    const id = test.info().parallelIndex;    const fileName = path.resolve(test.info().project.outputDir, `.auth/${id}.json`);    if (fs.existsSync(fileName)) {      // Reuse existing authentication state if any.      await use(fileName);      return;    }    // Important: make sure we authenticate in a clean environment by unsetting storage state.    const page = await browser.newPage({ storageState: undefined });    // Acquire a unique account, for example create a new one.    // Alternatively, you can have a list of precreated accounts for testing.    // Make sure that accounts are unique, so that multiple team members    // can run tests at the same time without interference.    const account = await acquireAccount(id);    // Perform authentication steps. Replace these actions with your own.    await page.goto('https://github.com/login');    await page.getByLabel('Username or email address').fill(account.username);    await page.getByLabel('Password').fill(account.password);    await page.getByRole('button', { name: 'Sign in' }).click();    // Wait until the page receives the cookies.    //    // Sometimes login flow sets cookies in the process of several redirects.    // Wait for the final URL to ensure that the cookies are actually set.    await page.waitForURL('https://github.com/');    // Alternatively, you can wait until the page reaches a state where all cookies are set.    await expect(page.getByRole('button', { name: 'View profile and more' })).toBeVisible();    // End of authentication steps.    await page.context().storageState({ path: fileName });    await page.close();    await use(fileName);  }, { scope: 'worker' }],});

Now, each test file should import `test` from our fixtures file instead of `@playwright/test`. No changes are needed in the config.

tests/example.spec.ts

    // Important: import our fixtures.import { test, expect } from '../playwright/fixtures';test('test', async ({ page }) => {  // page is authenticated});

Advanced scenarios[â€‹](#advanced-scenarios "Direct link to Advanced scenarios")
------------------------------------------------------------------------------

### Authenticate with API request[â€‹](#authenticate-with-api-request "Direct link to Authenticate with API request")

**When to use**

*   Your web application supports authenticating via API that is easier/faster than interacting with the app UI.

**Details**

We will send the API request with [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and then save authenticated state as usual.

In the [setup project](#basic-shared-account-in-all-tests):

tests/auth.setup.ts

    import { test as setup } from '@playwright/test';const authFile = 'playwright/.auth/user.json';setup('authenticate', async ({ request }) => {  // Send authentication request. Replace with your own.  await request.post('https://github.com/login', {    form: {      'user': 'user',      'password': 'password'    }  });  await request.storageState({ path: authFile });});

Alternatively, in a [worker fixture](#moderate-one-account-per-parallel-worker):

playwright/fixtures.ts

    import { test as baseTest, request } from '@playwright/test';import fs from 'fs';import path from 'path';export * from '@playwright/test';export const test = baseTest.extend<{}, { workerStorageState: string }>({  // Use the same storage state for all tests in this worker.  storageState: ({ workerStorageState }, use) => use(workerStorageState),  // Authenticate once per worker with a worker-scoped fixture.  workerStorageState: [async ({}, use) => {    // Use parallelIndex as a unique identifier for each worker.    const id = test.info().parallelIndex;    const fileName = path.resolve(test.info().project.outputDir, `.auth/${id}.json`);    if (fs.existsSync(fileName)) {      // Reuse existing authentication state if any.      await use(fileName);      return;    }    // Important: make sure we authenticate in a clean environment by unsetting storage state.    const context = await request.newContext({ storageState: undefined });    // Acquire a unique account, for example create a new one.    // Alternatively, you can have a list of precreated accounts for testing.    // Make sure that accounts are unique, so that multiple team members    // can run tests at the same time without interference.    const account = await acquireAccount(id);    // Send authentication request. Replace with your own.    await context.post('https://github.com/login', {      form: {        'user': 'user',        'password': 'password'      }    });    await context.storageState({ path: fileName });    await context.dispose();    await use(fileName);  }, { scope: 'worker' }],});

### Multiple signed in roles[â€‹](#multiple-signed-in-roles "Direct link to Multiple signed in roles")

**When to use**

*   You have more than one role in your end to end tests, but you can reuse accounts across all tests.

**Details**

We will authenticate multiple times in the setup project.

tests/auth.setup.ts

    import { test as setup, expect } from '@playwright/test';const adminFile = 'playwright/.auth/admin.json';setup('authenticate as admin', async ({ page }) => {  // Perform authentication steps. Replace these actions with your own.  await page.goto('https://github.com/login');  await page.getByLabel('Username or email address').fill('admin');  await page.getByLabel('Password').fill('password');  await page.getByRole('button', { name: 'Sign in' }).click();  // Wait until the page receives the cookies.  //  // Sometimes login flow sets cookies in the process of several redirects.  // Wait for the final URL to ensure that the cookies are actually set.  await page.waitForURL('https://github.com/');  // Alternatively, you can wait until the page reaches a state where all cookies are set.  await expect(page.getByRole('button', { name: 'View profile and more' })).toBeVisible();  // End of authentication steps.  await page.context().storageState({ path: adminFile });});const userFile = 'playwright/.auth/user.json';setup('authenticate as user', async ({ page }) => {  // Perform authentication steps. Replace these actions with your own.  await page.goto('https://github.com/login');  await page.getByLabel('Username or email address').fill('user');  await page.getByLabel('Password').fill('password');  await page.getByRole('button', { name: 'Sign in' }).click();  // Wait until the page receives the cookies.  //  // Sometimes login flow sets cookies in the process of several redirects.  // Wait for the final URL to ensure that the cookies are actually set.  await page.waitForURL('https://github.com/');  // Alternatively, you can wait until the page reaches a state where all cookies are set.  await expect(page.getByRole('button', { name: 'View profile and more' })).toBeVisible();  // End of authentication steps.  await page.context().storageState({ path: userFile });});

After that, specify `storageState` for each test file or test group, **instead of** setting it in the config.

tests/example.spec.ts

    import { test } from '@playwright/test';test.use({ storageState: 'playwright/.auth/admin.json' });test('admin test', async ({ page }) => {  // page is authenticated as admin});test.describe(() => {  test.use({ storageState: 'playwright/.auth/user.json' });  test('user test', async ({ page }) => {    // page is authenticated as a user  });});

See also about [authenticating in the UI mode](#authenticating-in-ui-mode).

### Testing multiple roles together[â€‹](#testing-multiple-roles-together "Direct link to Testing multiple roles together")

**When to use**

*   You need to test how multiple authenticated roles interact together, in a single test.

**Details**

Use multiple [BrowserContext](/docs/api/class-browsercontext "BrowserContext")s and [Page](/docs/api/class-page "Page")s with different storage states in the same test.

tests/example.spec.ts

    import { test } from '@playwright/test';test('admin and user', async ({ browser }) => {  // adminContext and all pages inside, including adminPage, are signed in as "admin".  const adminContext = await browser.newContext({ storageState: 'playwright/.auth/admin.json' });  const adminPage = await adminContext.newPage();  // userContext and all pages inside, including userPage, are signed in as "user".  const userContext = await browser.newContext({ storageState: 'playwright/.auth/user.json' });  const userPage = await userContext.newPage();  // ... interact with both adminPage and userPage ...  await adminContext.close();  await userContext.close();});

### Testing multiple roles with POM fixtures[â€‹](#testing-multiple-roles-with-pom-fixtures "Direct link to Testing multiple roles with POM fixtures")

**When to use**

*   You need to test how multiple authenticated roles interact together, in a single test.

**Details**

You can introduce fixtures that will provide a page authenticated as each role.

Below is an example that [creates fixtures](/docs/test-fixtures#creating-a-fixture) for two [Page Object Models](/docs/pom) - admin POM and user POM. It assumes `adminStorageState.json` and `userStorageState.json` files were created in the global setup.

playwright/fixtures.ts

    import { test as base, type Page, type Locator } from '@playwright/test';// Page Object Model for the "admin" page.// Here you can add locators and helper methods specific to the admin page.class AdminPage {  // Page signed in as "admin".  page: Page;  // Example locator pointing to "Welcome, Admin" greeting.  greeting: Locator;  constructor(page: Page) {    this.page = page;    this.greeting = page.locator('#greeting');  }}// Page Object Model for the "user" page.// Here you can add locators and helper methods specific to the user page.class UserPage {  // Page signed in as "user".  page: Page;  // Example locator pointing to "Welcome, User" greeting.  greeting: Locator;  constructor(page: Page) {    this.page = page;    this.greeting = page.locator('#greeting');  }}// Declare the types of your fixtures.type MyFixtures = {  adminPage: AdminPage;  userPage: UserPage;};export * from '@playwright/test';export const test = base.extend<MyFixtures>({  adminPage: async ({ browser }, use) => {    const context = await browser.newContext({ storageState: 'playwright/.auth/admin.json' });    const adminPage = new AdminPage(await context.newPage());    await use(adminPage);    await context.close();  },  userPage: async ({ browser }, use) => {    const context = await browser.newContext({ storageState: 'playwright/.auth/user.json' });    const userPage = new UserPage(await context.newPage());    await use(userPage);    await context.close();  },});

tests/example.spec.ts

    // Import test with our new fixtures.import { test, expect } from '../playwright/fixtures';// Use adminPage and userPage fixtures in the test.test('admin and user', async ({ adminPage, userPage }) => {  // ... interact with both adminPage and userPage ...  await expect(adminPage.greeting).toHaveText('Welcome, Admin');  await expect(userPage.greeting).toHaveText('Welcome, User');});

### Session storage[â€‹](#session-storage "Direct link to Session storage")

Reusing authenticated state covers [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), [local storage](https://developer.mozilla.org/en-US/docs/Web/API/Storage) and [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) based authentication. Rarely, [session storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage) is used for storing information associated with the signed-in state. Session storage is specific to a particular domain and is not persisted across page loads. Playwright does not provide API to persist session storage, but the following snippet can be used to save/load session storage.

    // Get session storage and store as env variableconst sessionStorage = await page.evaluate(() => JSON.stringify(sessionStorage));fs.writeFileSync('playwright/.auth/session.json', sessionStorage, 'utf-8');// Set session storage in a new contextconst sessionStorage = JSON.parse(fs.readFileSync('playwright/.auth/session.json', 'utf-8'));await context.addInitScript(storage => {  if (window.location.hostname === 'example.com') {    for (const [key, value] of Object.entries(storage))      window.sessionStorage.setItem(key, value);  }}, sessionStorage);

### Avoid authentication in some tests[â€‹](#avoid-authentication-in-some-tests "Direct link to Avoid authentication in some tests")

You can reset storage state in a test file to avoid authentication that was set up for the whole project.

not-signed-in.spec.ts

    import { test } from '@playwright/test';// Reset storage state for this file to avoid being authenticatedtest.use({ storageState: { cookies: [], origins: [] } });test('not signed in test', async ({ page }) => {  // ...});

# Auto-waiting

Auto-waiting
============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright performs a range of actionability checks on the elements before making actions to ensure these actions behave as expected. It auto-waits for all the relevant checks to pass and only then performs the requested action. If the required checks do not pass within the given `timeout`, action fails with the `TimeoutError`.

For example, for [locator.click()](/docs/api/class-locator#locator-click), Playwright will ensure that:

*   locator resolves to exactly one element
*   element is [Visible](#visible "Visible")
*   element is [Stable](#stable "Stable"), as in not animating or completed animation
*   element [Receives Events](#receives-events "Receives Events"), as in not obscured by other elements
*   element is [Enabled](#enabled "Enabled")

Here is the complete list of actionability checks performed for each action:

Action

[Visible](#visible "Visible")

[Stable](#stable "Stable")

[Receives Events](#receives-events "Receives Events")

[Enabled](#enabled "Enabled")

[Editable](#editable "Editable")

[locator.check()](/docs/api/class-locator#locator-check)

Yes

Yes

Yes

Yes

\-

[locator.click()](/docs/api/class-locator#locator-click)

Yes

Yes

Yes

Yes

\-

[locator.dblclick()](/docs/api/class-locator#locator-dblclick)

Yes

Yes

Yes

Yes

\-

[locator.setChecked()](/docs/api/class-locator#locator-set-checked)

Yes

Yes

Yes

Yes

\-

[locator.tap()](/docs/api/class-locator#locator-tap)

Yes

Yes

Yes

Yes

\-

[locator.uncheck()](/docs/api/class-locator#locator-uncheck)

Yes

Yes

Yes

Yes

\-

[locator.hover()](/docs/api/class-locator#locator-hover)

Yes

Yes

Yes

\-

\-

[locator.dragTo()](/docs/api/class-locator#locator-drag-to)

Yes

Yes

Yes

\-

\-

[locator.screenshot()](/docs/api/class-locator#locator-screenshot)

Yes

Yes

\-

\-

\-

[locator.fill()](/docs/api/class-locator#locator-fill)

Yes

\-

\-

Yes

Yes

[locator.clear()](/docs/api/class-locator#locator-clear)

Yes

\-

\-

Yes

Yes

[locator.selectOption()](/docs/api/class-locator#locator-select-option)

Yes

\-

\-

Yes

\-

[locator.selectText()](/docs/api/class-locator#locator-select-text)

Yes

\-

\-

\-

\-

[locator.scrollIntoViewIfNeeded()](/docs/api/class-locator#locator-scroll-into-view-if-needed)

\-

Yes

\-

\-

\-

[locator.blur()](/docs/api/class-locator#locator-blur)

\-

\-

\-

\-

\-

[locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event)

\-

\-

\-

\-

\-

[locator.focus()](/docs/api/class-locator#locator-focus)

\-

\-

\-

\-

\-

[locator.press()](/docs/api/class-locator#locator-press)

\-

\-

\-

\-

\-

[locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially)

\-

\-

\-

\-

\-

[locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files)

\-

\-

\-

\-

\-

Forcing actions[â€‹](#forcing-actions "Direct link to Forcing actions")
---------------------------------------------------------------------

Some actions like [locator.click()](/docs/api/class-locator#locator-click) support `force` option that disables non-essential actionability checks, for example passing truthy `force` to [locator.click()](/docs/api/class-locator#locator-click) method will not check that the target element actually receives click events.

Assertions[â€‹](#assertions "Direct link to Assertions")
------------------------------------------------------

Playwright includes auto-retrying assertions that remove flakiness by waiting until the condition is met, similarly to auto-waiting before actions.

Assertion

Description

[expect(locator).toBeAttached()](/docs/api/class-locatorassertions#locator-assertions-to-be-attached)

Element is attached

[expect(locator).toBeChecked()](/docs/api/class-locatorassertions#locator-assertions-to-be-checked)

Checkbox is checked

[expect(locator).toBeDisabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-disabled)

Element is disabled

[expect(locator).toBeEditable()](/docs/api/class-locatorassertions#locator-assertions-to-be-editable)

Element is editable

[expect(locator).toBeEmpty()](/docs/api/class-locatorassertions#locator-assertions-to-be-empty)

Container is empty

[expect(locator).toBeEnabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)

Element is enabled

[expect(locator).toBeFocused()](/docs/api/class-locatorassertions#locator-assertions-to-be-focused)

Element is focused

[expect(locator).toBeHidden()](/docs/api/class-locatorassertions#locator-assertions-to-be-hidden)

Element is not visible

[expect(locator).toBeInViewport()](/docs/api/class-locatorassertions#locator-assertions-to-be-in-viewport)

Element intersects viewport

[expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible)

Element is visible

[expect(locator).toContainText()](/docs/api/class-locatorassertions#locator-assertions-to-contain-text)

Element contains text

[expect(locator).toHaveAttribute()](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute)

Element has a DOM attribute

[expect(locator).toHaveClass()](/docs/api/class-locatorassertions#locator-assertions-to-have-class)

Element has a class property

[expect(locator).toHaveCount()](/docs/api/class-locatorassertions#locator-assertions-to-have-count)

List has exact number of children

[expect(locator).toHaveCSS()](/docs/api/class-locatorassertions#locator-assertions-to-have-css)

Element has CSS property

[expect(locator).toHaveId()](/docs/api/class-locatorassertions#locator-assertions-to-have-id)

Element has an ID

[expect(locator).toHaveJSProperty()](/docs/api/class-locatorassertions#locator-assertions-to-have-js-property)

Element has a JavaScript property

[expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text)

Element matches text

[expect(locator).toHaveValue()](/docs/api/class-locatorassertions#locator-assertions-to-have-value)

Input has a value

[expect(locator).toHaveValues()](/docs/api/class-locatorassertions#locator-assertions-to-have-values)

Select has options selected

[expect(page).toHaveTitle()](/docs/api/class-pageassertions#page-assertions-to-have-title)

Page has a title

[expect(page).toHaveURL()](/docs/api/class-pageassertions#page-assertions-to-have-url)

Page has a URL

[expect(response).toBeOK()](/docs/api/class-apiresponseassertions#api-response-assertions-to-be-ok)

Response has an OK status

Learn more in the [assertions guide](/docs/test-assertions).

Visible[â€‹](#visible "Direct link to Visible")
---------------------------------------------

Element is considered visible when it has non-empty bounding box and does not have `visibility:hidden` computed style.

Note that according to this definition:

*   Elements of zero size **are not** considered visible.
*   Elements with `display:none` **are not** considered visible.
*   Elements with `opacity:0` **are** considered visible.

Stable[â€‹](#stable "Direct link to Stable")
------------------------------------------

Element is considered stable when it has maintained the same bounding box for at least two consecutive animation frames.

Enabled[â€‹](#enabled "Direct link to Enabled")
---------------------------------------------

Element is considered enabled when it is **not disabled**.

Element is **disabled** when:

*   it is a `<button>`, `<select>`, `<input>`, `<textarea>`, `<option>` or `<optgroup>` with a `[disabled]` attribute;
*   it is a `<button>`, `<select>`, `<input>`, `<textarea>`, `<option>` or `<optgroup>` that is a part of a `<fieldset>` with a `[disabled]` attribute;
*   it is a descendant of an element with `[aria-disabled=true]` attribute.

Editable[â€‹](#editable "Direct link to Editable")
------------------------------------------------

Element is considered editable when it is [enabled](#enabled "Enabled") and is **not readonly**.

Element is **readonly** when:

*   it is a `<select>`, `<input>` or `<textarea>` with a `[readonly]` attribute;
*   it has an `[aria-readonly=true]` attribute and an aria role that [supports it](https://w3c.github.io/aria/#aria-readonly).

Receives Events[â€‹](#receives-events "Direct link to Receives Events")
---------------------------------------------------------------------

Element is considered receiving pointer events when it is the hit target of the pointer event at the action point. For example, when clicking at the point `(10;10)`, Playwright checks whether some other element (usually an overlay) will instead capture the click at `(10;10)`.

For example, consider a scenario where Playwright will click `Sign Up` button regardless of when the [locator.click()](/docs/api/class-locator#locator-click) call was made:

*   page is checking that user name is unique and `Sign Up` button is disabled;
*   after checking with the server, the disabled `Sign Up` button is replaced with another one that is now enabled.

# Best Practices

Best Practices
==============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

This guide should help you to make sure you are following our best practices and writing tests that are more resilient.

Testing philosophy[â€‹](#testing-philosophy "Direct link to Testing philosophy")
------------------------------------------------------------------------------

### Test user-visible behavior[â€‹](#test-user-visible-behavior "Direct link to Test user-visible behavior")

Automated tests should verify that the application code works for the end users, and avoid relying on implementation details such as things which users will not typically use, see, or even know about such as the name of a function, whether something is an array, or the CSS class of some element. The end user will see or interact with what is rendered on the page, so your test should typically only see/interact with the same rendered output.

### Make tests as isolated as possible[â€‹](#make-tests-as-isolated-as-possible "Direct link to Make tests as isolated as possible")

Each test should be completely isolated from another test and should run independently with its own local storage, session storage, data, cookies etc. [Test isolation](/docs/browser-contexts) improves reproducibility, makes debugging easier and prevents cascading test failures.

In order to avoid repetition for a particular part of your test you can use [before and after hooks](/docs/api/class-test). Within your test file add a before hook to run a part of your test before each test such as going to a particular URL or logging in to a part of your app. This keeps your tests isolated as no test relies on another. However it is also ok to have a little duplication when tests are simple enough especially if it keeps your tests clearer and easier to read and maintain.

    import { test } from '@playwright/test';test.beforeEach(async ({ page }) => {  // Runs before each test and signs in each page.  await page.goto('https://github.com/login');  await page.getByLabel('Username or email address').fill('username');  await page.getByLabel('Password').fill('password');  await page.getByRole('button', { name: 'Sign in' }).click();});test('first', async ({ page }) => {  // page is signed in.});test('second', async ({ page }) => {  // page is signed in.});

You can also reuse the signed-in state in the tests with [setup project](/docs/auth#basic-shared-account-in-all-tests). That way you can log in only once and then skip the log in step for all of the tests.

### Avoid testing third-party dependencies[â€‹](#avoid-testing-third-party-dependencies "Direct link to Avoid testing third-party dependencies")

Only test what you control. Don't try to test links to external sites or third party servers that you do not control. Not only is it time consuming and can slow down your tests but also you cannot control the content of the page you are linking to, or if there are cookie banners or overlay pages or anything else that might cause your test to fail.

Instead, use the [Playwright Network API](/docs/network#handle-requests) and guarantee the response needed.

    await page.route('**/api/fetch_data_third_party_dependency', route => route.fulfill({  status: 200,  body: testData,}));await page.goto('https://example.com');

### Testing with a database[â€‹](#testing-with-a-database "Direct link to Testing with a database")

If working with a database then make sure you control the data. Test against a staging environment and make sure it doesn't change. For visual regression tests make sure the operating system and browser versions are the same.

Best Practices[â€‹](#best-practices "Direct link to Best Practices")
------------------------------------------------------------------

### Use locators[â€‹](#use-locators "Direct link to Use locators")

In order to write end to end tests we need to first find elements on the webpage. We can do this by using Playwright's built in [locators](/docs/locators). Locators come with auto waiting and retry-ability. Auto waiting means that Playwright performs a range of actionability checks on the elements, such as ensuring the element is visible and enabled before it performs the click. To make tests resilient, we recommend prioritizing user-facing attributes and explicit contracts.

    // ðŸ‘page.getByRole('button', { name: 'submit' });

#### Use chaining and filtering[â€‹](#use-chaining-and-filtering "Direct link to Use chaining and filtering")

Locators can be [chained](/docs/locators#matching-inside-a-locator) to narrow down the search to a particular part of the page.

    const product = page.getByRole('listitem').filter({ hasText: 'Product 2' });

You can also [filter locators](/docs/locators#filtering-locators) by text or by another locator.

    await page    .getByRole('listitem')    .filter({ hasText: 'Product 2' })    .getByRole('button', { name: 'Add to cart' })    .click();

#### Prefer user-facing attributes to XPath or CSS selectors[â€‹](#prefer-user-facing-attributes-to-xpath-or-css-selectors "Direct link to Prefer user-facing attributes to XPath or CSS selectors")

Your DOM can easily change so having your tests depend on your DOM structure can lead to failing tests. For example consider selecting this button by its CSS classes. Should the designer change something then the class might change, thus breaking your test.

    // ðŸ‘Žpage.locator('button.buttonIcon.episode-actions-later');

Use locators that are resilient to changes in the DOM.

    // ðŸ‘page.getByRole('button', { name: 'submit' });

### Generate locators[â€‹](#generate-locators "Direct link to Generate locators")

Playwright has a [test generator](/docs/codegen) that can generate tests and pick locators for you. It will look at your page and figure out the best locator, prioritizing role, text and test id locators. If the generator finds multiple elements matching the locator, it will improve the locator to make it resilient and uniquely identify the target element, so you don't have to worry about failing tests due to locators.

#### Use `codegen` to generate locators[â€‹](#use-codegen-to-generate-locators "Direct link to use-codegen-to-generate-locators")

To pick a locator run the `codegen` command followed by the URL that you would like to pick a locator from.

*   npm
*   yarn
*   pnpm

    npx playwright codegen playwright.dev

    yarn playwright codegen playwright.dev

    pnpm exec playwright codegen playwright.dev

This will open a new browser window as well as the Playwright inspector. To pick a locator first click on the 'Record' button to stop the recording. By default when you run the `codegen` command it will start a new recording. Once you stop the recording the 'Pick Locator' button will be available to click.

You can then hover over any element on your page in the browser window and see the locator highlighted below your cursor. Clicking on an element will add the locator into the Playwright inspector. You can either copy the locator and paste into your test file or continue to explore the locator by editing it in the Playwright Inspector, for example by modifying the text, and seeing the results in the browser window.

![generating locators with codegen](https://user-images.githubusercontent.com/13063165/212103268-e7d8ee8b-d307-4cba-be13-831f3fbb1f40.png)

#### Use the VS Code extension to generate locators[â€‹](#use-the-vs-code-extension-to-generate-locators "Direct link to Use the VS Code extension to generate locators")

You can also use the [VS Code Extension](/docs/getting-started-vscode) to generate locators as well as record a test. The VS Code extension also gives you a great developer experience when writing, running, and debugging tests.

![generating locators in vs code with codegen](https://user-images.githubusercontent.com/13063165/212269873-aca04043-16ce-4627-906f-7351d09740ab.png)

### Use web first assertions[â€‹](#use-web-first-assertions "Direct link to Use web first assertions")

Assertions are a way to verify that the expected result and the actual result matched or not. By using [web first assertions](/docs/test-assertions) Playwright will wait until the expected condition is met. For example, when testing an alert message, a test would click a button that makes a message appear and check that the alert message is there. If the alert message takes half a second to appear, assertions such as `toBeVisible()` will wait and retry if needed.

    // ðŸ‘await expect(page.getByText('welcome')).toBeVisible();// ðŸ‘Žexpect(await page.getByText('welcome').isVisible()).toBe(true);

#### Don't use manual assertions[â€‹](#dont-use-manual-assertions "Direct link to Don't use manual assertions")

Don't use manual assertions that are not awaiting the expect. In the code below the await is inside the expect rather than before it. When using assertions such as `isVisible()` the test won't wait a single second, it will just check the locator is there and return immediately.

    // ðŸ‘Žexpect(await page.getByText('welcome').isVisible()).toBe(true);

Use web first assertions such as `toBeVisible()` instead.

    // ðŸ‘await expect(page.getByText('welcome')).toBeVisible();

### Configure debugging[â€‹](#configure-debugging "Direct link to Configure debugging")

#### Local debugging[â€‹](#local-debugging "Direct link to Local debugging")

For local debugging we recommend you [debug your tests live in VSCode.](/docs/getting-started-vscode#live-debugging) by installing the [VS Code extension](/docs/getting-started-vscode). You can run tests in debug mode by right clicking on the line next to the test you want to run which will open a browser window and pause at where the breakpoint is set.

![debugging tests in vscode](https://user-images.githubusercontent.com/13063165/212274675-5c6e1647-2aab-40fd-9804-8680c1ac2d16.png)

You can live debug your test by clicking or editing the locators in your test in VS Code which will highlight this locator in the browser window as well as show you any other matching locators found on the page.

![live debugging locators in vscode](https://user-images.githubusercontent.com/13063165/212273189-da271dc4-0f59-4138-92a8-10e719066cbe.png)

You can also debug your tests with the Playwright inspector by running your tests with the `--debug` flag.

*   npm
*   yarn
*   pnpm

    npx playwright test --debug

    yarn playwright test --debug

    pnpm exec playwright test --debug

You can then step through your test, view actionability logs and edit the locator live and see it highlighted in the browser window. This will show you which locators match, how many of them there are.

![debugging with the playwright inspector](https://user-images.githubusercontent.com/13063165/212276296-4f5b18e7-2bd7-4766-9aa5-783517bd4aa2.png)

To debug a specific test add the name of the test file and the line number of the test followed by the `--debug` flag.

*   npm
*   yarn
*   pnpm

    npx playwright test example.spec.ts:9 --debug

    yarn playwright test example.spec.ts:9 --debug

    pnpm exec playwright test example.spec.ts:9 --debug

#### Debugging on CI[â€‹](#debugging-on-ci "Direct link to Debugging on CI")

For CI failures, use the Playwright [trace viewer](/docs/trace-viewer) instead of videos and screenshots. The trace viewer gives you a full trace of your tests as a local Progressive Web App (PWA) that can easily be shared. With the trace viewer you can view the timeline, inspect DOM snapshots for each action using dev tools, view network requests and more.

![playwrights trace viewer](https://user-images.githubusercontent.com/13063165/212277895-c63d94c2-bd06-4881-864e-62790a072ca3.png)

Traces are configured in the Playwright config file and are set to run on CI on the first retry of a failed test. We don't recommend setting this to `on` so that traces are run on every test as it's very performance heavy. However you can run a trace locally when developing with the `--trace` flag.

*   npm
*   yarn
*   pnpm

    npx playwright test --trace on

    yarn playwright test --trace on

    pnpm exec playwright test --trace on

Once you run this command your traces will be recorded for each test and can be viewed directly from the HTML report.

*   npm
*   yarn
*   pnpm

    npx playwright show-report

    yarn playwright show-report

    pnpm exec playwright show-report

![Playwrights HTML report](https://user-images.githubusercontent.com/13063165/212279022-d929d4c0-2271-486a-a75f-166ac231d25f.png)

Traces can be opened by clicking on the icon next to the test file name or by opening each of the test reports and scrolling down to the traces section.

![Screenshot 2023-01-13 at 09 58 34](https://user-images.githubusercontent.com/13063165/212279699-c9eb134f-4f4e-4f19-805c-37596d3272a6.png)

### Use Playwright's Tooling[â€‹](#use-playwrights-tooling "Direct link to Use Playwright's Tooling")

Playwright comes with a range of tooling to help you write tests.

*   The [VS Code extension](/docs/getting-started-vscode) gives you a great developer experience when writing, running, and debugging tests.
*   The [test generator](/docs/codegen) can generate tests and pick locators for you.
*   The [trace viewer](/docs/trace-viewer) gives you a full trace of your tests as a local PWA that can easily be shared. With the trace viewer you can view the timeline, inspect DOM snapshots for each action, view network requests and more.
*   The [UI Mode](/docs/test-ui-mode) lets you explore, run and debug tests with a time travel experience complete with watch mode. All test files are loaded into the testing sidebar where you can expand each file and describe block to individually run, view, watch and debug each test.
*   [TypeScript](/docs/test-typescript) in Playwright works out of the box and gives you better IDE integrations. Your IDE will show you everything you can do and highlight when you do something wrong. No TypeScript experience is needed and it is not necessary for your code to be in TypeScript, all you need to do is create your tests with a `.ts` extension.

### Test across all browsers[â€‹](#test-across-all-browsers "Direct link to Test across all browsers")

Playwright makes it easy to test your site across all [browsers](/docs/test-projects#configure-projects-for-multiple-browsers) no matter what platform you are on. Testing across all browsers ensures your app works for all users. In your config file you can set up projects adding the name and which browser or device to use.

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },    },    {      name: 'firefox',      use: { ...devices['Desktop Firefox'] },    },    {      name: 'webkit',      use: { ...devices['Desktop Safari'] },    },  ],});

### Keep your Playwright dependency up to date[â€‹](#keep-your-playwright-dependency-up-to-date "Direct link to Keep your Playwright dependency up to date")

By keeping your Playwright version up to date you will be able to test your app on the latest browser versions and catch failures before the latest browser version is released to the public.

*   npm
*   yarn
*   pnpm

    npm install -D @playwright/test@latest

    yarn add --dev @playwright/test@latest

    pnpm install --save-dev @playwright/test@latest

Check the [release notes](/docs/release-notes) to see what the latest version is and what changes have been released.

You can see what version of Playwright you have by running the following command.

*   npm
*   yarn
*   pnpm

    npx playwright --version

    yarn playwright --version

    pnpm exec playwright --version

### Run tests on CI[â€‹](#run-tests-on-ci "Direct link to Run tests on CI")

Setup CI/CD and run your tests frequently. The more often you run your tests the better. Ideally you should run your tests on each commit and pull request. Playwright comes with a [GitHub actions workflow](/docs/ci-intro) so that tests will run on CI for you with no setup required. Playwright can also be setup on the [CI environment](/docs/ci) of your choice.

Use Linux when running your tests on CI as it is cheaper. Developers can use whatever environment when running locally but use linux on CI. Consider setting up [Sharding](/docs/test-sharding) to make CI faster.

#### Optimize browser downloads on CI[â€‹](#optimize-browser-downloads-on-ci "Direct link to Optimize browser downloads on CI")

Only install the browsers that you actually need, especially on CI. For example, if you're only testing with Chromium, install just Chromium.

.github/workflows/playwright.yml

    # Instead of installing all browsersnpx playwright install --with-deps# Install only Chromiumnpx playwright install chromium --with-deps

This saves both download time and disk space on your CI machines.

### Lint your tests[â€‹](#lint-your-tests "Direct link to Lint your tests")

We recommend TypeScript and linting with ESLint for your tests to catch errors early. Use [`@typescript-eslint/no-floating-promises`](https://typescript-eslint.io/rules/no-floating-promises/) [ESLint](https://eslint.org) rule to make sure there are no missing awaits before the asynchronous calls to the Playwright API. On your CI you can run `tsc --noEmit` to ensure that functions are called with the right signature.

### Use parallelism and sharding[â€‹](#use-parallelism-and-sharding "Direct link to Use parallelism and sharding")

Playwright runs tests in [parallel](/docs/test-parallel) by default. Tests in a single file are run in order, in the same worker process. If you have many independent tests in a single file, you might want to run them in parallel

    import { test } from '@playwright/test';test.describe.configure({ mode: 'parallel' });test('runs in parallel 1', async ({ page }) => { /* ... */ });test('runs in parallel 2', async ({ page }) => { /* ... */ });

Playwright can [shard](/docs/test-parallel#shard-tests-between-multiple-machines) a test suite, so that it can be executed on multiple machines.

*   npm
*   yarn
*   pnpm

    npx playwright test --shard=1/3

    yarn playwright test --shard=1/3

    pnpm exec playwright test --shard=1/3

Productivity tips[â€‹](#productivity-tips "Direct link to Productivity tips")
---------------------------------------------------------------------------

### Use Soft assertions[â€‹](#use-soft-assertions "Direct link to Use Soft assertions")

If your test fails, Playwright will give you an error message showing what part of the test failed which you can see either in VS Code, the terminal, the HTML report, or the trace viewer. However, you can also use [soft assertions](/docs/test-assertions#soft-assertions). These do not immediately terminate the test execution, but rather compile and display a list of failed assertions once the test ended.

    // Make a few checks that will not stop the test when failed...await expect.soft(page.getByTestId('status')).toHaveText('Success');// ... and continue the test to check more things.await page.getByRole('link', { name: 'next page' }).click();

# Browsers

Browsers
========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Each version of Playwright needs specific versions of browser binaries to operate. You will need to use the Playwright CLI to install these browsers.

With every release, Playwright updates the versions of the browsers it supports, so that the latest Playwright would support the latest browsers at any moment. It means that every time you update Playwright, you might need to re-run the `install` CLI command.

Install browsers[â€‹](#install-browsers "Direct link to Install browsers")
------------------------------------------------------------------------

Playwright can install supported browsers. Running the command without arguments will install the default browsers.

    npx playwright install

You can also install specific browsers by providing an argument:

    npx playwright install webkit

See all supported browsers:

    npx playwright install --help

Install system dependencies[â€‹](#install-system-dependencies "Direct link to Install system dependencies")
---------------------------------------------------------------------------------------------------------

System dependencies can get installed automatically. This is useful for CI environments.

    npx playwright install-deps

You can also install the dependencies for a single browser by passing it as an argument:

    npx playwright install-deps chromium

It's also possible to combine `install-deps` with `install` so that the browsers and OS dependencies are installed with a single command.

    npx playwright install --with-deps chromium

See [system requirements](/docs/intro#system-requirements) for officially supported operating systems.

Update Playwright regularly[â€‹](#update-playwright-regularly "Direct link to Update Playwright regularly")
---------------------------------------------------------------------------------------------------------

By keeping your Playwright version up to date you will be able to use new features and test your app on the latest browser versions and catch failures before the latest browser version is released to the public.

    # Update playwrightnpm install -D @playwright/test@latest# Install new browsersnpx playwright install

Check the [release notes](/docs/release-notes) to see what the latest version is and what changes have been released.

    # See what version of Playwright you have by running the following commandnpx playwright --version

Configure Browsers[â€‹](#configure-browsers "Direct link to Configure Browsers")
------------------------------------------------------------------------------

Playwright can run tests on Chromium, WebKit and Firefox browsers as well as branded browsers such as Google Chrome and Microsoft Edge. It can also run on emulated tablet and mobile devices. See the [registry of device parameters](https://github.com/microsoft/playwright/blob/main/packages/playwright-core/src/server/deviceDescriptorsSource.json) for a complete list of selected desktop, tablet and mobile devices.

### Run tests on different browsers[â€‹](#run-tests-on-different-browsers "Direct link to Run tests on different browsers")

Playwright can run your tests in multiple browsers and configurations by setting up **projects** in the config. You can also add [different options](/docs/test-configuration) for each project.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    /* Test against desktop browsers */    {      name: 'chromium',      use: { ...devices['Desktop Chrome'] },    },    {      name: 'firefox',      use: { ...devices['Desktop Firefox'] },    },    {      name: 'webkit',      use: { ...devices['Desktop Safari'] },    },    /* Test against mobile viewports. */    {      name: 'Mobile Chrome',      use: { ...devices['Pixel 5'] },    },    {      name: 'Mobile Safari',      use: { ...devices['iPhone 12'] },    },    /* Test against branded browsers. */    {      name: 'Google Chrome',      use: { ...devices['Desktop Chrome'], channel: 'chrome' }, // or 'chrome-beta'    },    {      name: 'Microsoft Edge',      use: { ...devices['Desktop Edge'], channel: 'msedge' }, // or 'msedge-dev'    },  ],});

Playwright will run all projects by default.

    npx playwright testRunning 7 tests using 5 workers  âœ“ [chromium] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [firefox] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [webkit] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Mobile Chrome] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Mobile Safari] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Google Chrome] â€º example.spec.ts:3:1 â€º basic test (2s)  âœ“ [Microsoft Edge] â€º example.spec.ts:3:1 â€º basic test (2s)

Use the `--project` command line option to run a single project.

    npx playwright test --project=firefoxRunning 1 test using 1 worker  âœ“ [firefox] â€º example.spec.ts:3:1 â€º basic test (2s)

With the VS Code extension you can run your tests on different browsers by checking the checkbox next to the browser name in the Playwright sidebar. These names are defined in your Playwright config file under the projects section. The default config when installing Playwright gives you 3 projects, Chromium, Firefox and WebKit. The first project is selected by default.

![Projects section in VS Code extension](/assets/images/vscode-projects-section-70d5aa3cdca55c2ab82a8fc0c493a87d.png)

To run tests on multiple projects(browsers), select each project by checking the checkboxes next to the project name.

![Selecting projects to run tests on](https://github.com/microsoft/playwright/assets/13063165/6dc86ef4-6097-481c-9cab-b6e053ec7ea6)

### Chromium[â€‹](#chromium "Direct link to Chromium")

For Google Chrome, Microsoft Edge and other Chromium-based browsers, by default, Playwright uses open source Chromium builds. Since the Chromium project is ahead of the branded browsers, when the world is on Google Chrome N, Playwright already supports Chromium N+1 that will be released in Google Chrome and Microsoft Edge a few weeks later.

### Chromium: headless shell[â€‹](#chromium-headless-shell "Direct link to Chromium: headless shell")

Playwright ships a regular Chromium build for headed operations and a separate [chromium headless shell](https://developer.chrome.com/blog/chrome-headless-shell) for headless mode.

If you are only running tests in headless shell (i.e. the `channel` option is **not** specified), for example on CI, you can avoid downloading the full Chromium browser by passing `--only-shell` during installation.

    # only running tests headlesslynpx playwright install --with-deps --only-shell

### Chromium: new headless mode[â€‹](#chromium-new-headless-mode "Direct link to Chromium: new headless mode")

You can opt into the new headless mode by using `'chromium'` channel. As [official Chrome documentation puts it](https://developer.chrome.com/blog/chrome-headless-shell):

> New Headless on the other hand is the real Chrome browser, and is thus more authentic, reliable, and offers more features. This makes it more suitable for high-accuracy end-to-end web app testing or browser extension testing.

See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for details.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: { ...devices['Desktop Chrome'], channel: 'chromium' },    },  ],});

With the new headless mode, you can skip downloading the headless shell during browser installation by using the `--no-shell` option:

    # only running tests headlesslynpx playwright install --with-deps --no-shell

### Google Chrome & Microsoft Edge[â€‹](#google-chrome--microsoft-edge "Direct link to Google Chrome & Microsoft Edge")

While Playwright can download and use the recent Chromium build, it can operate against the branded Google Chrome and Microsoft Edge browsers available on the machine (note that Playwright doesn't install them by default). In particular, the current Playwright version will support Stable and Beta channels of these browsers.

Available channels are `chrome`, `msedge`, `chrome-beta`, `msedge-beta`, `chrome-dev`, `msedge-dev`, `chrome-canary`, `msedge-canary`.

warning

Certain Enterprise Browser Policies may impact Playwright's ability to launch and control Google Chrome and Microsoft Edge. Running in an environment with browser policies is outside of the Playwright project's scope.

warning

Google Chrome and Microsoft Edge have switched to a [new headless mode](https://developer.chrome.com/docs/chromium/headless) implementation that is closer to a regular headed mode. This differs from [chromium headless shell](https://developer.chrome.com/blog/chrome-headless-shell) that is used in Playwright by default when running headless, so expect different behavior in some cases. See [issue #33566](https://github.com/microsoft/playwright/issues/33566) for details.

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    /* Test against branded browsers. */    {      name: 'Google Chrome',      use: { ...devices['Desktop Chrome'], channel: 'chrome' }, // or 'chrome-beta'    },    {      name: 'Microsoft Edge',      use: { ...devices['Desktop Edge'], channel: 'msedge' }, // or "msedge-beta" or 'msedge-dev'    },  ],});

#### Installing Google Chrome & Microsoft Edge[â€‹](#installing-google-chrome--microsoft-edge "Direct link to Installing Google Chrome & Microsoft Edge")

If Google Chrome or Microsoft Edge is not available on your machine, you can install them using the Playwright command line tool:

    npx playwright install msedge

warning

Google Chrome or Microsoft Edge installations will be installed at the default global location of your operating system overriding your current browser installation.

Run with the `--help` option to see a full a list of browsers that can be installed.

#### When to use Google Chrome & Microsoft Edge and when not to?[â€‹](#when-to-use-google-chrome--microsoft-edge-and-when-not-to "Direct link to When to use Google Chrome & Microsoft Edge and when not to?")

##### Defaults[â€‹](#defaults "Direct link to Defaults")

Using the default Playwright configuration with the latest Chromium is a good idea most of the time. Since Playwright is ahead of Stable channels for the browsers, it gives peace of mind that the upcoming Google Chrome or Microsoft Edge releases won't break your site. You catch breakage early and have a lot of time to fix it before the official Chrome update.

##### Regression testing[â€‹](#regression-testing "Direct link to Regression testing")

Having said that, testing policies often require regression testing to be performed against the current publicly available browsers. In this case, you can opt into one of the stable channels, `"chrome"` or `"msedge"`.

##### Media codecs[â€‹](#media-codecs "Direct link to Media codecs")

Another reason for testing using official binaries is to test functionality related to media codecs. Chromium does not have all the codecs that Google Chrome or Microsoft Edge are bundling due to various licensing considerations and agreements. If your site relies on this kind of codecs (which is rarely the case), you will also want to use the official channel.

##### Enterprise policy[â€‹](#enterprise-policy "Direct link to Enterprise policy")

Google Chrome and Microsoft Edge respect enterprise policies, which include limitations to the capabilities, network proxy, mandatory extensions that stand in the way of testing. So if you are part of the organization that uses such policies, it is easiest to use bundled Chromium for your local testing, you can still opt into stable channels on the bots that are typically free of such restrictions.

### Firefox[â€‹](#firefox "Direct link to Firefox")

Playwright's Firefox version matches the recent [Firefox Stable](https://www.mozilla.org/en-US/firefox/new/) build. Playwright doesn't work with the branded version of Firefox since it relies on patches.

Note that availability of certain features, which depend heavily on the underlying platform, may vary between operating systems. For example, available media codecs vary substantially between Linux, macOS and Windows.

### WebKit[â€‹](#webkit "Direct link to WebKit")

Playwright's WebKit is derived from the latest WebKit main branch sources, often before these updates are incorporated into Apple Safari and other WebKit-based browsers. This gives a lot of lead time to react on the potential browser update issues. Playwright doesn't work with the branded version of Safari since it relies on patches. Instead, you can test using the most recent WebKit build.

Note that availability of certain features, which depend heavily on the underlying platform, may vary between operating systems. For example, available media codecs vary substantially between Linux, macOS and Windows. While running WebKit on Linux CI is usually the most affordable option, for the closest-to-Safari experience you should run WebKit on mac, for example if you do video playback.

Install behind a firewall or a proxy[â€‹](#install-behind-a-firewall-or-a-proxy "Direct link to Install behind a firewall or a proxy")
------------------------------------------------------------------------------------------------------------------------------------

By default, Playwright downloads browsers from Microsoft's CDN.

Sometimes companies maintain an internal proxy that blocks direct access to the public resources. In this case, Playwright can be configured to download browsers via a proxy server.

*   Bash
*   PowerShell
*   Batch

    HTTPS_PROXY=https://192.0.2.1 npx playwright install

    $Env:HTTPS_PROXY="https://192.0.2.1"npx playwright install

    set HTTPS_PROXY=https://192.0.2.1npx playwright install

If the requests of the proxy get intercepted with a custom untrusted certificate authority (CA) and it yields to `Error: self signed certificate in certificate chain` while downloading the browsers, you must set your custom root certificates via the [`NODE_EXTRA_CA_CERTS`](https://nodejs.org/api/cli.html#node_extra_ca_certsfile) environment variable before installing the browsers:

*   Bash
*   PowerShell
*   Batch

    export NODE_EXTRA_CA_CERTS="/path/to/cert.pem"

    $Env:NODE_EXTRA_CA_CERTS="C:\certs\root.crt"

    set NODE_EXTRA_CA_CERTS="C:\certs\root.crt"

If your network is slow to connect to Playwright browser archive, you can increase the connection timeout in milliseconds with `PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT` environment variable:

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT=120000 npx playwright install

    $Env:PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT="120000"npx playwright install

    set PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT=120000npx playwright install

If you are [installing dependencies](#install-system-dependencies) and need to use a proxy on Linux, make sure to run the command as a root user. Otherwise, Playwright will attempt to become a root and will not pass environment variables like `HTTPS_PROXY` to the linux package manager.

    sudo HTTPS_PROXY=https://192.0.2.1 npx playwright install-deps

Download from artifact repository[â€‹](#download-from-artifact-repository "Direct link to Download from artifact repository")
---------------------------------------------------------------------------------------------------------------------------

By default, Playwright downloads browsers from Microsoft's CDN.

Sometimes companies maintain an internal artifact repository to host browser binaries. In this case, Playwright can be configured to download from a custom location using the `PLAYWRIGHT_DOWNLOAD_HOST` env variable.

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1 npx playwright install

    $Env:PLAYWRIGHT_DOWNLOAD_HOST="http://192.0.2.1"npx playwright install

    set PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1npx playwright install

It is also possible to use a per-browser download hosts using `PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST`, `PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST` and `PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST` env variables that take precedence over `PLAYWRIGHT_DOWNLOAD_HOST`.

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST=http://203.0.113.3 PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1 npx playwright install

    $Env:PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST="http://203.0.113.3"$Env:PLAYWRIGHT_DOWNLOAD_HOST="http://192.0.2.1"npx playwright install

    set PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST=http://203.0.113.3set PLAYWRIGHT_DOWNLOAD_HOST=http://192.0.2.1npx playwright install

Managing browser binaries[â€‹](#managing-browser-binaries "Direct link to Managing browser binaries")
---------------------------------------------------------------------------------------------------

Playwright downloads Chromium, WebKit and Firefox browsers into the OS-specific cache folders:

*   `%USERPROFILE%\AppData\Local\ms-playwright` on Windows
*   `~/Library/Caches/ms-playwright` on macOS
*   `~/.cache/ms-playwright` on Linux

These browsers will take a few hundred megabytes of disk space when installed:

    du -hs ~/Library/Caches/ms-playwright/*281M  chromium-XXXXXX187M  firefox-XXXX180M  webkit-XXXX

You can override default behavior using environment variables. When installing Playwright, ask it to download browsers into a specific location:

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_BROWSERS_PATH=$HOME/pw-browsers npx playwright install

    $Env:PLAYWRIGHT_BROWSERS_PATH="$Env:USERPROFILE\pw-browsers"npx playwright install

    set PLAYWRIGHT_BROWSERS_PATH=%USERPROFILE%\pw-browsersnpx playwright install

When running Playwright scripts, ask it to search for browsers in a shared location.

*   Bash
*   PowerShell
*   Batch

    PLAYWRIGHT_BROWSERS_PATH=$HOME/pw-browsers npx playwright test

    $Env:PLAYWRIGHT_BROWSERS_PATH="$Env:USERPROFILE\pw-browsers"npx playwright test

    set PLAYWRIGHT_BROWSERS_PATH=%USERPROFILE%\pw-browsersnpx playwright test

Playwright keeps track of packages that need those browsers and will garbage collect them as you update Playwright to the newer versions.

note

Developers can opt-in in this mode via exporting `PLAYWRIGHT_BROWSERS_PATH=$HOME/pw-browsers` in their `.bashrc`.

### Hermetic install[â€‹](#hermetic-install "Direct link to Hermetic install")

You can opt into the hermetic install and place binaries in the local folder:

*   Bash
*   PowerShell
*   Batch

    # Places binaries to node_modules/playwright-core/.local-browsersPLAYWRIGHT_BROWSERS_PATH=0 npx playwright install

    # Places binaries to node_modules\playwright-core\.local-browsers$Env:PLAYWRIGHT_BROWSERS_PATH=0npx playwright install

    # Places binaries to node_modules\playwright-core\.local-browsersset PLAYWRIGHT_BROWSERS_PATH=0npx playwright install

note

`PLAYWRIGHT_BROWSERS_PATH` does not change installation path for Google Chrome and Microsoft Edge.

### Stale browser removal[â€‹](#stale-browser-removal "Direct link to Stale browser removal")

Playwright keeps track of the clients that use its browsers. When there are no more clients that require a particular version of the browser, that version is deleted from the system. That way you can safely use Playwright instances of different versions and at the same time, you don't waste disk space for the browsers that are no longer in use.

To opt-out from the unused browser removal, you can set the `PLAYWRIGHT_SKIP_BROWSER_GC=1` environment variable.

### List all installed browsers:[â€‹](#list-all-installed-browsers "Direct link to List all installed browsers:")

Prints list of browsers from all playwright installations on the machine.

    npx playwright install --list

### Uninstall browsers[â€‹](#uninstall-browsers "Direct link to Uninstall browsers")

This will remove the browsers (chromium, firefox, webkit) of the current Playwright installation:

    npx playwright uninstall

To remove browsers of other Playwright installations as well, pass `--all` flag:

    npx playwright uninstall --all

# Chrome extensions

Chrome extensions
=================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

note

Extensions only work in Chromium when launched with a persistent context. Use custom browser args at your own risk, as some of them may break Playwright functionality.

Google Chrome and Microsoft Edge [removed the command-line flags needed to side-load extensions](https://groups.google.com/a/chromium.org/g/chromium-extensions/c/FxMU1TvxWWg/m/daZVTYNlBQAJ), so use Chromium that comes bundled with Playwright.

The snippet below retrieves the [service worker](https://developer.chrome.com/docs/extensions/develop/concepts/service-workers) of a [Manifest v3](https://developer.chrome.com/docs/extensions/develop/migrate) extension whose source is located in `./my-extension`.

Note the use of the `chromium` channel that allows to run extensions in headless mode. Alternatively, you can launch the browser in headed mode.

    const { chromium } = require('playwright');(async () => {  const pathToExtension = require('path').join(__dirname, 'my-extension');  const userDataDir = '/tmp/test-user-data-dir';  const browserContext = await chromium.launchPersistentContext(userDataDir, {    channel: 'chromium',    args: [      `--disable-extensions-except=${pathToExtension}`,      `--load-extension=${pathToExtension}`    ]  });  let [serviceWorker] = browserContext.serviceWorkers();  if (!serviceWorker)    serviceWorker = await browserContext.waitForEvent('serviceworker');  // Test the service worker as you would any other worker.  await browserContext.close();})();

Testing[â€‹](#testing "Direct link to Testing")
---------------------------------------------

To have the extension loaded when running tests you can use a test fixture to set the context. You can also dynamically retrieve the extension id and use it to load and test the popup page for example.

Note the use of the `chromium` channel that allows to run extensions in headless mode. Alternatively, you can launch the browser in headed mode.

First, add fixtures that will load the extension:

fixtures.ts

    import { test as base, chromium, type BrowserContext } from '@playwright/test';import path from 'path';export const test = base.extend<{  context: BrowserContext;  extensionId: string;}>({  context: async ({ }, use) => {    const pathToExtension = path.join(__dirname, 'my-extension');    const context = await chromium.launchPersistentContext('', {      channel: 'chromium',      args: [        `--disable-extensions-except=${pathToExtension}`,        `--load-extension=${pathToExtension}`,      ],    });    await use(context);    await context.close();  },  extensionId: async ({ context }, use) => {    // for manifest v3:    let [serviceWorker] = context.serviceWorkers();    if (!serviceWorker)      serviceWorker = await context.waitForEvent('serviceworker');    const extensionId = serviceWorker.url().split('/')[2];    await use(extensionId);  },});export const expect = test.expect;

Then use these fixtures in a test:

    import { test, expect } from './fixtures';test('example test', async ({ page }) => {  await page.goto('https://example.com');  await expect(page.locator('body')).toHaveText('Changed by my-extension');});test('popup page', async ({ page, extensionId }) => {  await page.goto(`chrome-extension://${extensionId}/popup.html`);  await expect(page.locator('body')).toHaveText('my-extension popup');});

# Clock

Clock
=====

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Accurately simulating time-dependent behavior is essential for verifying the correctness of applications. Utilizing [Clock](/docs/api/class-clock "Clock") functionality allows developers to manipulate and control time within tests, enabling the precise validation of features such as rendering time, timeouts, scheduled tasks without the delays and variability of real-time execution.

The [Clock](/docs/api/class-clock "Clock") API provides the following methods to control time:

*   `setFixedTime`: Sets the fixed time for `Date.now()` and `new Date()`.
*   `install`: initializes the clock and allows you to:
    *   `pauseAt`: Pauses the time at a specific time.
    *   `fastForward`: Fast forwards the time.
    *   `runFor`: Runs the time for a specific duration.
    *   `resume`: Resumes the time.
*   `setSystemTime`: Sets the current system time.

The recommended approach is to use `setFixedTime` to set the time to a specific value. If that doesn't work for your use case, you can use `install` which allows you to pause time later on, fast forward it, tick it, etc. `setSystemTime` is only recommended for advanced use cases.

note

[page.clock](/docs/api/class-page#page-clock) overrides native global classes and functions related to time allowing them to be manually controlled:

*   `Date`
*   `setTimeout`
*   `clearTimeout`
*   `setInterval`
*   `clearInterval`
*   `requestAnimationFrame`
*   `cancelAnimationFrame`
*   `requestIdleCallback`
*   `cancelIdleCallback`
*   `performance`
*   `Event.timeStamp`

warning

If you call `install` at any point in your test, the call _MUST_ occur before any other clock related calls (see note above for list). Calling these methods out of order will result in undefined behavior. For example, you cannot call `setInterval`, followed by `install`, then `clearInterval`, as `install` overrides the native definition of the clock functions.

Test with predefined time[â€‹](#test-with-predefined-time "Direct link to Test with predefined time")
---------------------------------------------------------------------------------------------------

Often you only need to fake `Date.now` while keeping the timers going. That way the time flows naturally, but `Date.now` always returns a fixed value.

    <div id="current-time" data-testid="current-time"></div><script>  const renderTime = () => {    document.getElementById('current-time').textContent =        new Date().toLocaleString();  };  setInterval(renderTime, 1000);</script>

    await page.clock.setFixedTime(new Date('2024-02-02T10:00:00'));await page.goto('http://localhost:3333');await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:00:00 AM');await page.clock.setFixedTime(new Date('2024-02-02T10:30:00'));// We know that the page has a timer that updates the time every second.await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:30:00 AM');

Consistent time and timers[â€‹](#consistent-time-and-timers "Direct link to Consistent time and timers")
------------------------------------------------------------------------------------------------------

Sometimes your timers depend on `Date.now` and are confused when the `Date.now` value does not change over time. In this case, you can install the clock and fast forward to the time of interest when testing.

    <div id="current-time" data-testid="current-time"></div><script>  const renderTime = () => {    document.getElementById('current-time').textContent =        new Date().toLocaleString();  };  setInterval(renderTime, 1000);</script>

    // Initialize clock with some time before the test time and let the page load// naturally. `Date.now` will progress as the timers fire.await page.clock.install({ time: new Date('2024-02-02T08:00:00') });await page.goto('http://localhost:3333');// Pretend that the user closed the laptop lid and opened it again at 10am,// Pause the time once reached that point.await page.clock.pauseAt(new Date('2024-02-02T10:00:00'));// Assert the page state.await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:00:00 AM');// Close the laptop lid again and open it at 10:30am.await page.clock.fastForward('30:00');await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:30:00 AM');

Test inactivity monitoring[â€‹](#test-inactivity-monitoring "Direct link to Test inactivity monitoring")
------------------------------------------------------------------------------------------------------

Inactivity monitoring is a common feature in web applications that logs out users after a period of inactivity. Testing this feature can be tricky because you need to wait for a long time to see the effect. With the help of the clock, you can speed up time and test this feature quickly.

    <div id="remaining-time" data-testid="remaining-time"></div><script>  const endTime = Date.now() + 5 * 60_000;  const renderTime = () => {    const diffInSeconds = Math.round((endTime - Date.now()) / 1000);    if (diffInSeconds <= 0) {      document.getElementById('remaining-time').textContent =        'You have been logged out due to inactivity.';    } else {      document.getElementById('remaining-time').textContent =        `You will be logged out in ${diffInSeconds} seconds.`;    }    setTimeout(renderTime, 1000);  };  renderTime();</script><button type="button">Interaction</button>

    // Initial time does not matter for the test, so we can pick current time.await page.clock.install();await page.goto('http://localhost:3333');// Interact with the pageawait page.getByRole('button').click();// Fast forward time 5 minutes as if the user did not do anything.// Fast forward is like closing the laptop lid and opening it after 5 minutes.// All the timers due will fire once immediately, as in the real browser.await page.clock.fastForward('05:00');// Check that the user was logged out automatically.await expect(page.getByText('You have been logged out due to inactivity.')).toBeVisible();

Tick through time manually, firing all the timers consistently[â€‹](#tick-through-time-manually-firing-all-the-timers-consistently "Direct link to Tick through time manually, firing all the timers consistently")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

In rare cases, you may want to tick through time manually, firing all timers and animation frames in the process to achieve a fine-grained control over the passage of time.

    <div id="current-time" data-testid="current-time"></div><script>  const renderTime = () => {    document.getElementById('current-time').textContent =        new Date().toLocaleString();  };  setInterval(renderTime, 1000);</script>

    // Initialize clock with a specific time, let the page load naturally.await page.clock.install({ time: new Date('2024-02-02T08:00:00') });await page.goto('http://localhost:3333');// Pause the time flow, stop the timers, you now have manual control// over the page time.await page.clock.pauseAt(new Date('2024-02-02T10:00:00'));await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:00:00 AM');// Tick through time manually, firing all timers in the process.// In this case, time will be updated in the screen 2 times.await page.clock.runFor(2000);await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:00:02 AM');

Related Videos[â€‹](#related-videos "Direct link to Related Videos")
------------------------------------------------------------------

# Components (experimental)

Components (experimental)
=========================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Test can now test your components.

Example[â€‹](#example "Direct link to Example")
---------------------------------------------

Here is what a typical component test looks like:

    test('event should work', async ({ mount }) => {  let clicked = false;  // Mount a component. Returns locator pointing to the component.  const component = await mount(    <Button title="Submit" onClick={() => { clicked = true }}></Button>  );  // As with any Playwright test, assert locator text.  await expect(component).toContainText('Submit');  // Perform locator click. This will trigger the event.  await component.click();  // Assert that respective events have been fired.  expect(clicked).toBeTruthy();});

How to get started[â€‹](#how-to-get-started "Direct link to How to get started")
------------------------------------------------------------------------------

Adding Playwright Test to an existing project is easy. Below are the steps to enable Playwright Test for a React, Vue or Svelte project.

### Step 1: Install Playwright Test for components for your respective framework[â€‹](#step-1-install-playwright-test-for-components-for-your-respective-framework "Direct link to Step 1: Install Playwright Test for components for your respective framework")

*   npm
*   yarn
*   pnpm

    npm init playwright@latest -- --ct

    yarn create playwright --ct

    pnpm create playwright --ct

This step creates several files in your workspace:

playwright/index.html

    <html lang="en">  <body>    <div id="root"></div>    <script type="module" src="./index.ts"></script>  </body></html>

This file defines an html file that will be used to render components during testing. It must contain element with `id="root"`, that's where components are mounted. It must also link the script called `playwright/index.{js,ts,jsx,tsx}`.

You can include stylesheets, apply theme and inject code into the page where component is mounted using this script. It can be either a `.js`, `.ts`, `.jsx` or `.tsx` file.

playwright/index.ts

    // Apply theme here, add anything your component needs at runtime here.

### Step 2. Create a test file `src/App.spec.{ts,tsx}`[â€‹](#step-2-create-a-test-file-srcappspectstsx "Direct link to step-2-create-a-test-file-srcappspectstsx")

*   React
*   Svelte
*   Vue

app.spec.tsx

    import { test, expect } from '@playwright/experimental-ct-react';import App from './App';test('should work', async ({ mount }) => {  const component = await mount(<App />);  await expect(component).toContainText('Learn React');});

app.spec.ts

    import { test, expect } from '@playwright/experimental-ct-vue';import App from './App.vue';test('should work', async ({ mount }) => {  const component = await mount(App);  await expect(component).toContainText('Learn Vue');});

app.spec.tsx

    import { test, expect } from '@playwright/experimental-ct-vue';import App from './App.vue';test('should work', async ({ mount }) => {  const component = await mount(<App />);  await expect(component).toContainText('Learn Vue');});

If using TypeScript and Vue make sure to add a `vue.d.ts` file to your project:

    declare module '*.vue';

app.spec.ts

    import { test, expect } from '@playwright/experimental-ct-svelte';import App from './App.svelte';test('should work', async ({ mount }) => {  const component = await mount(App);  await expect(component).toContainText('Learn Svelte');});

### Step 3. Run the tests[â€‹](#step-3-run-the-tests "Direct link to Step 3. Run the tests")

You can run tests using the [VS Code extension](/docs/getting-started-vscode) or the command line.

    npm run test-ct

### Further reading: configure reporting, browsers, tracing[â€‹](#further-reading-configure-reporting-browsers-tracing "Direct link to Further reading: configure reporting, browsers, tracing")

Refer to [Playwright config](/docs/test-configuration) for configuring your project.

Test stories[â€‹](#test-stories "Direct link to Test stories")
------------------------------------------------------------

When Playwright Test is used to test web components, tests run in Node.js, while components run in the real browser. This brings together the best of both worlds: components run in the real browser environment, real clicks are triggered, real layout is executed, visual regression is possible. At the same time, test can use all the powers of Node.js as well as all the Playwright Test features. As a result, the same parallel, parametrized tests with the same post-mortem Tracing story are available during component testing.

This however, is introducing a number of limitations:

*   You can't pass complex live objects to your component. Only plain JavaScript objects and built-in types like strings, numbers, dates etc. can be passed.

    test('this will work', async ({ mount }) => {  const component = await mount(<ProcessViewer process={{ name: 'playwright' }}/>);});test('this will not work', async ({ mount }) => {  // `process` is a Node object, we can't pass it to the browser and expect it to work.  const component = await mount(<ProcessViewer process={process}/>);});

*   You can't pass data to your component synchronously in a callback:

    test('this will not work', async ({ mount }) => {  // () => 'red' callback lives in Node. If `ColorPicker` component in the browser calls the parameter function  // `colorGetter` it won't get result synchronously. It'll be able to get it via await, but that is not how  // components are typically built.  const component = await mount(<ColorPicker colorGetter={() => 'red'}/>);});

Working around these and other limitations is quick and elegant: for every use case of the tested component, create a wrapper of this component designed specifically for test. Not only it will mitigate the limitations, but it will also offer powerful abstractions for testing where you would be able to define environment, theme and other aspects of your component rendering.

Let's say you'd like to test following component:

input-media.tsx

    import React from 'react';type InputMediaProps = {  // Media is a complex browser object we can't send to Node while testing.  onChange(media: Media): void;};export function InputMedia(props: InputMediaProps) {  return <></> as any;}

Create a story file for your component:

input-media.story.tsx

    import React from 'react';import InputMedia from './import-media';type InputMediaForTestProps = {  onMediaChange(mediaName: string): void;};export function InputMediaForTest(props: InputMediaForTestProps) {  // Instead of sending a complex `media` object to the test, send the media name.  return <InputMedia onChange={media => props.onMediaChange(media.name)} />;}// Export more stories here.

Then test the component via testing the story:

input-media.spec.tsx

    import { test, expect } from '@playwright/experimental-ct-react';import { InputMediaForTest } from './input-media.story.tsx';test('changes the image', async ({ mount }) => {  let mediaSelected: string | null = null;  const component = await mount(    <InputMediaForTest      onMediaChange={mediaName => {        mediaSelected = mediaName;      }}    />  );  await component    .getByTestId('imageInput')    .setInputFiles('src/assets/logo.png');  await expect(component.getByAltText(/selected image/i)).toBeVisible();  await expect.poll(() => mediaSelected).toBe('logo.png');});

As a result, for every component you'll have a story file that exports all the stories that are actually tested. These stories live in the browser and "convert" complex object into the simple objects that can be accessed in the test.

Under the hood[â€‹](#under-the-hood "Direct link to Under the hood")
------------------------------------------------------------------

Here is how component testing works:

*   Once the tests are executed, Playwright creates a list of components that the tests need.
*   It then compiles a bundle that includes these components and serves it using a local static web server.
*   Upon the `mount` call within the test, Playwright navigates to the facade page `/playwright/index.html` of this bundle and tells it to render the component.
*   Events are marshalled back to the Node.js environment to allow verification.

Playwright is using [Vite](https://vitejs.dev/) to create the components bundle and serve it.

API reference[â€‹](#api-reference "Direct link to API reference")
---------------------------------------------------------------

### props[â€‹](#props "Direct link to props")

Provide props to a component when mounted.

*   React
*   Svelte
*   Vue

component.spec.tsx

    import { test } from '@playwright/experimental-ct-react';test('props', async ({ mount }) => {  const component = await mount(<Component msg="greetings" />);});

component.spec.ts

    import { test } from '@playwright/experimental-ct-svelte';test('props', async ({ mount }) => {  const component = await mount(Component, { props: { msg: 'greetings' } });});

component.spec.ts

    import { test } from '@playwright/experimental-ct-vue';test('props', async ({ mount }) => {  const component = await mount(Component, { props: { msg: 'greetings' } });});

component.spec.tsx

    // Or alternatively, using the `jsx` styleimport { test } from '@playwright/experimental-ct-vue';test('props', async ({ mount }) => {  const component = await mount(<Component msg="greetings" />);});

### callbacks / events[â€‹](#callbacks--events "Direct link to callbacks / events")

Provide callbacks/events to a component when mounted.

*   React
*   Svelte
*   Vue

component.spec.tsx

    import { test } from '@playwright/experimental-ct-react';test('callback', async ({ mount }) => {  const component = await mount(<Component onClick={() => {}} />);});

component.spec.ts

    import { test } from '@playwright/experimental-ct-svelte';test('event', async ({ mount }) => {  const component = await mount(Component, { on: { click() {} } });});

component.spec.ts

    import { test } from '@playwright/experimental-ct-vue';test('event', async ({ mount }) => {  const component = await mount(Component, { on: { click() {} } });});

component.spec.tsx

    // Or alternatively, using the `jsx` styleimport { test } from '@playwright/experimental-ct-vue';test('event', async ({ mount }) => {  const component = await mount(<Component v-on:click={() => {}} />);});

### children / slots[â€‹](#children--slots "Direct link to children / slots")

Provide children/slots to a component when mounted.

*   React
*   Svelte
*   Vue

component.spec.tsx

    import { test } from '@playwright/experimental-ct-react';test('children', async ({ mount }) => {  const component = await mount(<Component>Child</Component>);});

component.spec.ts

    import { test } from '@playwright/experimental-ct-svelte';test('slot', async ({ mount }) => {  const component = await mount(Component, { slots: { default: 'Slot' } });});

component.spec.ts

    import { test } from '@playwright/experimental-ct-vue';test('slot', async ({ mount }) => {  const component = await mount(Component, { slots: { default: 'Slot' } });});

component.spec.tsx

    // Or alternatively, using the `jsx` styleimport { test } from '@playwright/experimental-ct-vue';test('children', async ({ mount }) => {  const component = await mount(<Component>Child</Component>);});

### hooks[â€‹](#hooks "Direct link to hooks")

You can use `beforeMount` and `afterMount` hooks to configure your app. This lets you set up things like your app router, fake server etc. giving you the flexibility you need. You can also pass custom configuration from the `mount` call from a test, which is accessible from the `hooksConfig` fixture. This includes any config that needs to be run before or after mounting the component. An example of configuring a router is provided below:

*   React
*   Vue

playwright/index.tsx

    import { beforeMount, afterMount } from '@playwright/experimental-ct-react/hooks';import { BrowserRouter } from 'react-router-dom';export type HooksConfig = {  enableRouting?: boolean;}beforeMount<HooksConfig>(async ({ App, hooksConfig }) => {  if (hooksConfig?.enableRouting)    return <BrowserRouter><App /></BrowserRouter>;});

src/pages/ProductsPage.spec.tsx

    import { test, expect } from '@playwright/experimental-ct-react';import type { HooksConfig } from '../playwright';import { ProductsPage } from './pages/ProductsPage';test('configure routing through hooks config', async ({ page, mount }) => {  const component = await mount<HooksConfig>(<ProductsPage />, {    hooksConfig: { enableRouting: true },  });  await expect(component.getByRole('link')).toHaveAttribute('href', '/products/42');});

playwright/index.ts

    import { beforeMount, afterMount } from '@playwright/experimental-ct-vue/hooks';import { router } from '../src/router';export type HooksConfig = {  enableRouting?: boolean;}beforeMount<HooksConfig>(async ({ app, hooksConfig }) => {  if (hooksConfig?.enableRouting)    app.use(router);});

src/pages/ProductsPage.spec.ts

    import { test, expect } from '@playwright/experimental-ct-vue';import type { HooksConfig } from '../playwright';import ProductsPage from './pages/ProductsPage.vue';test('configure routing through hooks config', async ({ page, mount }) => {  const component = await mount<HooksConfig>(ProductsPage, {    hooksConfig: { enableRouting: true },  });  await expect(component.getByRole('link')).toHaveAttribute('href', '/products/42');});

### unmount[â€‹](#unmount "Direct link to unmount")

Unmount the mounted component from the DOM. This is useful for testing the component's behavior upon unmounting. Use cases include testing an "Are you sure you want to leave?" modal or ensuring proper cleanup of event handlers to prevent memory leaks.

*   React
*   Svelte
*   Vue

component.spec.tsx

    import { test } from '@playwright/experimental-ct-react';test('unmount', async ({ mount }) => {  const component = await mount(<Component/>);  await component.unmount();});

component.spec.ts

    import { test } from '@playwright/experimental-ct-svelte';test('unmount', async ({ mount }) => {  const component = await mount(Component);  await component.unmount();});

component.spec.ts

    import { test } from '@playwright/experimental-ct-vue';test('unmount', async ({ mount }) => {  const component = await mount(Component);  await component.unmount();});

component.spec.tsx

    // Or alternatively, using the `jsx` styleimport { test } from '@playwright/experimental-ct-vue';test('unmount', async ({ mount }) => {  const component = await mount(<Component/>);  await component.unmount();});

### update[â€‹](#update "Direct link to update")

Update props, slots/children, and/or events/callbacks of a mounted component. These component inputs can change at any time and are typically provided by the parent component, but sometimes it is necessary to ensure that your components behave appropriately to new inputs.

*   React
*   Svelte
*   Vue

component.spec.tsx

    import { test } from '@playwright/experimental-ct-react';test('update', async ({ mount }) => {  const component = await mount(<Component/>);  await component.update(      <Component msg="greetings" onClick={() => {}}>Child</Component>  );});

component.spec.ts

    import { test } from '@playwright/experimental-ct-svelte';test('update', async ({ mount }) => {  const component = await mount(Component);  await component.update({    props: { msg: 'greetings' },    on: { click() {} },    slots: { default: 'Child' }  });});

component.spec.ts

    import { test } from '@playwright/experimental-ct-vue';test('update', async ({ mount }) => {  const component = await mount(Component);  await component.update({    props: { msg: 'greetings' },    on: { click() {} },    slots: { default: 'Child' }  });});

component.spec.tsx

    // Or alternatively, using the `jsx` styleimport { test } from '@playwright/experimental-ct-vue';test('update', async ({ mount }) => {  const component = await mount(<Component/>);  await component.update(      <Component msg="greetings" v-on:click={() => {}}>Child</Component>  );});

### Handling network requests[â€‹](#handling-network-requests "Direct link to Handling network requests")

Playwright provides an **experimental** `router` fixture to intercept and handle network requests. There are two ways to use the `router` fixture:

*   Call `router.route(url, handler)` that behaves similarly to [page.route()](/docs/api/class-page#page-route). See the [network mocking guide](/docs/mock) for more details.
*   Call `router.use(handlers)` and pass [MSW library](https://mswjs.io/) request handlers to it.

Here is an example of reusing your existing MSW handlers in the test.

    import { handlers } from '@src/mocks/handlers';test.beforeEach(async ({ router }) => {  // install common handlers before each test  await router.use(...handlers);});test('example test', async ({ mount }) => {  // test as usual, your handlers are active  // ...});

You can also introduce a one-off handler for a specific test.

    import { http, HttpResponse } from 'msw';test('example test', async ({ mount, router }) => {  await router.use(http.get('/data', async ({ request }) => {    return HttpResponse.json({ value: 'mocked' });  }));  // test as usual, your handler is active  // ...});

Frequently asked questions[â€‹](#frequently-asked-questions "Direct link to Frequently asked questions")
------------------------------------------------------------------------------------------------------

### What's the difference between `@playwright/test` and `@playwright/experimental-ct-{react,svelte,vue}`?[â€‹](#whats-the-difference-between-playwrighttest-and-playwrightexperimental-ct-reactsveltevue "Direct link to whats-the-difference-between-playwrighttest-and-playwrightexperimental-ct-reactsveltevue")

    test('â€¦', async ({ mount, page, context }) => {  // â€¦});

`@playwright/experimental-ct-{react,svelte,vue}` wrap `@playwright/test` to provide an additional built-in component-testing specific fixture called `mount`:

*   React
*   Svelte
*   Vue

    import { test, expect } from '@playwright/experimental-ct-react';import HelloWorld from './HelloWorld';test.use({ viewport: { width: 500, height: 500 } });test('should work', async ({ mount }) => {  const component = await mount(<HelloWorld msg="greetings" />);  await expect(component).toContainText('Greetings');});

    import { test, expect } from '@playwright/experimental-ct-vue';import HelloWorld from './HelloWorld.vue';test.use({ viewport: { width: 500, height: 500 } });test('should work', async ({ mount }) => {  const component = await mount(HelloWorld, {    props: {      msg: 'Greetings',    },  });  await expect(component).toContainText('Greetings');});

    import { test, expect } from '@playwright/experimental-ct-svelte';import HelloWorld from './HelloWorld.svelte';test.use({ viewport: { width: 500, height: 500 } });test('should work', async ({ mount }) => {  const component = await mount(HelloWorld, {    props: {      msg: 'Greetings',    },  });  await expect(component).toContainText('Greetings');});

Additionally, it adds some config options you can use in your `playwright-ct.config.{ts,js}`.

Finally, under the hood, each test re-uses the `context` and `page` fixture as a speed optimization for Component Testing. It resets them in between each test so it should be functionally equivalent to `@playwright/test`'s guarantee that you get a new, isolated `context` and `page` fixture per-test.

### I have a project that already uses Vite. Can I reuse the config?[â€‹](#i-have-a-project-that-already-uses-vite-can-i-reuse-the-config "Direct link to I have a project that already uses Vite. Can I reuse the config?")

At this point, Playwright is bundler-agnostic, so it is not reusing your existing Vite config. Your config might have a lot of things we won't be able to reuse. So for now, you would copy your path mappings and other high level settings into the `ctViteConfig` property of Playwright config.

    import { defineConfig } from '@playwright/experimental-ct-react';export default defineConfig({  use: {    ctViteConfig: {      // ...    },  },});

You can specify plugins via Vite config for testing settings. Note that once you start specifying plugins, you are responsible for specifying the framework plugin as well, `vue()` in this case:

    import { defineConfig, devices } from '@playwright/experimental-ct-vue';import { resolve } from 'path';import vue from '@vitejs/plugin-vue';import AutoImport from 'unplugin-auto-import/vite';import Components from 'unplugin-vue-components/vite';export default defineConfig({  testDir: './tests/component',  use: {    trace: 'on-first-retry',    ctViteConfig: {      plugins: [        vue(),        AutoImport({          imports: [            'vue',            'vue-router',            '@vueuse/head',            'pinia',            {              '@/store': ['useStore'],            },          ],          dts: 'src/auto-imports.d.ts',          eslintrc: {            enabled: true,          },        }),        Components({          dirs: ['src/components'],          extensions: ['vue'],        }),      ],      resolve: {        alias: {          '@': resolve(__dirname, './src'),        },      },    },  },});

### How do I use CSS imports?[â€‹](#how-do-i-use-css-imports "Direct link to How do I use CSS imports?")

If you have a component that imports CSS, Vite will handle it automatically. You can also use CSS pre-processors such as Sass, Less, or Stylus, and Vite will handle them as well without any additional configuration. However, corresponding CSS pre-processor needs to be installed.

Vite has a hard requirement that all CSS Modules are named `*.module.[css extension]`. If you have a custom build config for your project normally and have imports of the form `import styles from 'styles.css'` you must rename your files to properly indicate they are to be treated as modules. You could also write a Vite plugin to handle this for you.

Check [Vite documentation](https://vite.dev/guide/features#css) for more details.

### How can I test components that uses Pinia?[â€‹](#how-can-i-test-components-that-uses-pinia "Direct link to How can I test components that uses Pinia?")

Pinia needs to be initialized in `playwright/index.{js,ts,jsx,tsx}`. If you do this inside a `beforeMount` hook, the `initialState` can be overwritten on a per-test basis:

playwright/index.ts

    import { beforeMount, afterMount } from '@playwright/experimental-ct-vue/hooks';import { createTestingPinia } from '@pinia/testing';import type { StoreState } from 'pinia';import type { useStore } from '../src/store';export type HooksConfig = {  store?: StoreState<ReturnType<typeof useStore>>;}beforeMount<HooksConfig>(async ({ hooksConfig }) => {  createTestingPinia({    initialState: hooksConfig?.store,    /**     * Use http intercepting to mock api calls instead:     * https://playwright.dev/docs/mock#mock-api-requests     */    stubActions: false,    createSpy(args) {      console.log('spy', args)      return () => console.log('spy-returns')    },  });});

src/pinia.spec.ts

    import { test, expect } from '@playwright/experimental-ct-vue';import type { HooksConfig } from '../playwright';import Store from './Store.vue';test('override initialState ', async ({ mount }) => {  const component = await mount<HooksConfig>(Store, {    hooksConfig: {      store: { name: 'override initialState' }    }  });  await expect(component).toContainText('override initialState');});

### How do I access the component's methods or its instance?[â€‹](#how-do-i-access-the-components-methods-or-its-instance "Direct link to How do I access the component's methods or its instance?")

Accessing a component's internal methods or its instance within test code is neither recommended nor supported. Instead, focus on observing and interacting with the component from a user's perspective, typically by clicking or verifying if something is visible on the page. Tests become less fragile and more valuable when they avoid interacting with internal implementation details, such as the component instance or its methods. Keep in mind that if a test fails when run from a userâ€™s perspective, it likely means the automated test has uncovered a genuine bug in your code.

# Debugging Tests

Debugging Tests
===============

VS Code debugger[â€‹](#vs-code-debugger "Direct link to VS Code debugger")
------------------------------------------------------------------------

We recommend using the [VS Code Extension](/docs/getting-started-vscode) for debugging for a better developer experience. With the VS Code extension you can debug your tests right in VS Code, see error messages, set breakpoints and step through your tests.

![running test in debug mode](https://user-images.githubusercontent.com/13063165/212740233-3f278825-13e7-4a88-a118-dd4478d43a16.png)

### Error Messages[â€‹](#error-messages "Direct link to Error Messages")

If your test fails VS Code will show you error messages right in the editor showing what was expected, what was received as well as a complete call log.

![error messaging in vs code](https://user-images.githubusercontent.com/13063165/212738654-b573b7c9-05be-476f-ab4c-201bf4265bc0.png)

### Live Debugging[â€‹](#live-debugging "Direct link to Live Debugging")

You can debug your test live in VS Code. After running a test with the `Show Browser` option checked, click on any of the locators in VS Code and it will be highlighted in the Browser window. Playwright will also show you if there are multiple matches.

![live debugging in VS Code](https://user-images.githubusercontent.com/13063165/212884329-0755b007-0d69-4987-b084-38fd5bfb577d.png)

You can also edit the locators in VS Code and Playwright will show you the changes live in the browser window.

![live debugging in VS Code](https://user-images.githubusercontent.com/13063165/212884772-5022d4b1-6fab-456f-88e3-506f2354e238.png)

### Picking a Locator[â€‹](#picking-a-locator "Direct link to Picking a Locator")

Pick a [locator](/docs/locators) and copy it into your test file by clicking the **Pick locator** button form the testing sidebar. Then in the browser click the element you require and it will now show up in the **Pick locator** box in VS Code. Press 'enter' on your keyboard to copy the locator into the clipboard and then paste anywhere in your code. Or press 'escape' if you want to cancel.

![Pick locators](https://user-images.githubusercontent.com/13063165/212741666-6479a702-2517-44a3-9eca-e719e13b379c.png)

Playwright will look at your page and figure out the best locator, prioritizing [role, text and test id locators](/docs/locators). If Playwright finds multiple elements matching the locator, it will improve the locator to make it resilient and uniquely identify the target element, so you don't have to worry about failing tests due to locators.

### Run in Debug Mode[â€‹](#run-in-debug-mode "Direct link to Run in Debug Mode")

To set a breakpoint click next to the line number where you want the breakpoint to be until a red dot appears. Run the tests in debug mode by right clicking on the line next to the test you want to run.

![setting debug test mode](https://user-images.githubusercontent.com/13063165/212739847-ecb7dcfe-8929-45f3-b24e-f9c4b592f430.png)

A browser window will open and the test will run and pause at where the breakpoint is set. You can step through the tests, pause the test and rerun the tests from the menu in VS Code.

![running test in debug mode](https://user-images.githubusercontent.com/13063165/212740233-3f278825-13e7-4a88-a118-dd4478d43a16.png)

### Debug Tests Using Chrome DevTools[â€‹](#debug-tests-using-chrome-devtools "Direct link to Debug Tests Using Chrome DevTools")

Instead of using `Debug Test`, choose `Run Test` in VS Code. With `Show Browser` enabled, the browser session is reused, letting you open Chrome DevTools for continuous debugging of your tests and the web application.

### Debug in different Browsers[â€‹](#debug-in-different-browsers "Direct link to Debug in different Browsers")

By default, debugging is done using the Chromium profile. You can debug your tests on different browsers by right clicking on the debug icon in the testing sidebar and clicking on the 'Select Default Profile' option from the dropdown.

![debugging on specific profile](https://user-images.githubusercontent.com/13063165/212879469-436f8130-c62a-49e1-9d67-c1903b478d5f.png)

Then choose the test profile you would like to use for debugging your tests. Each time you run your test in debug mode it will use the profile you selected. You can run tests in debug mode by right clicking the line number where your test is and selecting 'Debug Test' from the menu.

![choosing a profile for debugging](https://user-images.githubusercontent.com/13063165/212880198-eac22c3e-68ce-47da-9163-d6b376ae7575.png)

To learn more about debugging, see [Debugging in Visual Studio Code](https://code.visualstudio.com/docs/editor/debugging).

Playwright Inspector[â€‹](#playwright-inspector "Direct link to Playwright Inspector")
------------------------------------------------------------------------------------

The Playwright Inspector is a GUI tool to help you debug your Playwright tests. It allows you to step through your tests, live edit locators, pick locators and see actionability logs.

![Playwright Inspector](https://user-images.githubusercontent.com/13063165/212924587-4b84e5f6-b147-40e9-8c75-d7b9ab6b7ca1.png)

### Run in debug mode[â€‹](#run-in-debug-mode-1 "Direct link to Run in debug mode")

Run your tests with the `--debug` flag to open the inspector. This configures Playwright for debugging and opens the inspector. Additional useful defaults are configured when `--debug` is used:

*   Browsers launch in headed mode
*   Default timeout is set to 0 (= no timeout)

#### Debug all tests on all browsers[â€‹](#debug-all-tests-on-all-browsers "Direct link to Debug all tests on all browsers")

To debug all tests run the test command with the `--debug` flag. This will run tests one by one, and open the inspector and a browser window for each test.

    npx playwright test --debug

#### Debug one test on all browsers[â€‹](#debug-one-test-on-all-browsers "Direct link to Debug one test on all browsers")

To debug one test on a specific line, run the test command followed by the name of the test file and the line number of the test you want to debug, followed by the `--debug` flag. This will run a single test in each browser configured in your [`playwright.config`](/docs/test-projects#configure-projects-for-multiple-browsers) and open the inspector.

    npx playwright test example.spec.ts:10 --debug

#### Debug on a specific browser[â€‹](#debug-on-a-specific-browser "Direct link to Debug on a specific browser")

In Playwright you can configure projects in your [`playwright.config`](/docs/test-projects#configure-projects-for-multiple-browsers). Once configured you can then debug your tests on a specific browser or mobile viewport using the `--project` flag followed by the name of the project configured in your `playwright.config`.

    npx playwright test --project=chromium --debugnpx playwright test --project="Mobile Safari" --debugnpx playwright test --project="Microsoft Edge" --debug

#### Debug one test on a specific browser[â€‹](#debug-one-test-on-a-specific-browser "Direct link to Debug one test on a specific browser")

To run one test on a specific browser add the name of the test file and the line number of the test you want to debug as well as the `--project` flag followed by the name of the project.

    npx playwright test example.spec.ts:10 --project=webkit --debug

### Stepping through your tests[â€‹](#stepping-through-your-tests "Direct link to Stepping through your tests")

You can play, pause or step through each action of your test using the toolbar at the top of the Inspector. You can see the current action highlighted in the test code, and matching elements highlighted in the browser window.

![Playwright Inspector and browser](https://user-images.githubusercontent.com/13063165/212936618-84b87acc-bc2e-46ed-994b-32b2ef742e60.png)

### Run a test from a specific breakpoint[â€‹](#run-a-test-from-a-specific-breakpoint "Direct link to Run a test from a specific breakpoint")

To speed up the debugging process you can add a [page.pause()](/docs/api/class-page#page-pause) method to your test. This way you won't have to step through each action of your test to get to the point where you want to debug.

    await page.pause();

Once you add a `page.pause()` call, run your tests in debug mode. Clicking the "Resume" button in the Inspector will run the test and only stop on the `page.pause()`.

![test with page.pause](https://user-images.githubusercontent.com/13063165/219473050-122be4c2-31d0-4cbd-aa8b-8588e8b781a6.png)

### Live editing locators[â€‹](#live-editing-locators "Direct link to Live editing locators")

While running in debug mode you can live edit the locators. Next to the 'Pick Locator' button there is a field showing the [locator](/docs/locators) that the test is paused on. You can edit this locator directly in the **Pick Locator** field, and matching elements will be highlighted in the browser window.

![live editing locators](https://user-images.githubusercontent.com/13063165/212980815-1cf6ef7b-e69a-496c-898a-ec603a3bc562.png)

### Picking locators[â€‹](#picking-locators "Direct link to Picking locators")

While debugging, you might need to choose a more resilient locator. You can do this by clicking on the **Pick Locator** button and hovering over any element in the browser window. While hovering over an element you will see the code needed to locate this element highlighted below. Clicking an element in the browser will add the locator into the field where you can then either tweak it or copy it into your code.

![Picking locators](https://user-images.githubusercontent.com/13063165/212968640-ce82a027-9277-4bdf-b0a9-6282fb2becb7.png)

Playwright will look at your page and figure out the best locator, prioritizing [role, text and test id locators](/docs/locators). If Playwright finds multiple elements matching the locator, it will improve the locator to make it resilient and uniquely identify the target element, so you don't have to worry about failing tests due to locators.

### Actionability logs[â€‹](#actionability-logs "Direct link to Actionability logs")

By the time Playwright has paused on a click action, it has already performed [actionability checks](/docs/actionability) that can be found in the log. This can help you understand what happened during your test and what Playwright did or tried to do. The log tells you if the element was visible, enabled and stable, if the locator resolved to an element, scrolled into view, and so much more. If actionability can't be reached, it will show the action as pending.

![Actionability Logs](https://user-images.githubusercontent.com/13063165/212968907-5dede739-e0e3-482a-91cd-726a0f5b0b6d.png)

Trace Viewer[â€‹](#trace-viewer "Direct link to Trace Viewer")
------------------------------------------------------------

Playwright [Trace Viewer](/docs/trace-viewer) is a GUI tool that lets you explore recorded Playwright traces of your tests. You can go back and forward through each action on the left side, and visually see what was happening during the action. In the middle of the screen, you can see a DOM snapshot for the action. On the right side you can see action details, such as time, parameters, return value and log. You can also explore console messages, network requests and the source code.

To learn more about how to record traces and use the Trace Viewer, check out the [Trace Viewer](/docs/trace-viewer) guide.

Browser Developer Tools[â€‹](#browser-developer-tools "Direct link to Browser Developer Tools")
---------------------------------------------------------------------------------------------

When running in Debug Mode with `PWDEBUG=console`, a `playwright` object is available in the Developer tools console. Developer tools can help you to:

*   Inspect the DOM tree and **find element selectors**
*   **See console logs** during execution (or learn how to [read logs via API](/docs/api/class-page#page-event-console))
*   Check **network activity** and other developer tools features

![Browser Developer Tools with Playwright object](https://user-images.githubusercontent.com/13063165/219128002-898f604d-9697-4b7f-95b5-a6a8260b7282.png)

To debug your tests using the browser developer tools, start by setting a breakpoint in your test to pause the execution using the [page.pause()](/docs/api/class-page#page-pause) method.

    await page.pause();

Once you have set a breakpoint in your test, you can then run your test with `PWDEBUG=console`.

*   Bash
*   PowerShell
*   Batch

    PWDEBUG=console npx playwright test

    $env:PWDEBUG="console"npx playwright test

    set PWDEBUG=consolenpx playwright test

Once Playwright launches the browser window, you can open the developer tools. The `playwright` object will be available in the console panel.

#### playwright.$(selector)[â€‹](#playwrightselector "Direct link to playwright.$(selector)")

Query the Playwright selector, using the actual Playwright query engine, for example:

    playwright.$('.auth-form >> text=Log in');<button>Log in</button>

#### playwright.$$(selector)[â€‹](#playwrightselector-1 "Direct link to playwright.$$(selector)")

Same as `playwright.$`, but returns all matching elements.

    playwright.$$('li >> text=John')[<li>, <li>, <li>, <li>]

#### playwright.inspect(selector)[â€‹](#playwrightinspectselector "Direct link to playwright.inspect(selector)")

Reveal element in the Elements panel.

    playwright.inspect('text=Log in')

#### playwright.locator(selector)[â€‹](#playwrightlocatorselector "Direct link to playwright.locator(selector)")

Create a locator and query matching elements, for example:

    playwright.locator('.auth-form', { hasText: 'Log in' });Locator ()  - element: button  - elements: [button]

#### playwright.selector(element)[â€‹](#playwrightselectorelement "Direct link to playwright.selector(element)")

Generates selector for the given element. For example, select an element in the Elements panel and pass `$0`:

    playwright.selector($0)"div[id="glow-ingress-block"] >> text=/.*Hello.*/"

Verbose API logs[â€‹](#verbose-api-logs "Direct link to Verbose API logs")
------------------------------------------------------------------------

Playwright supports verbose logging with the `DEBUG` environment variable.

*   Bash
*   PowerShell
*   Batch

    DEBUG=pw:api npx playwright test

    $env:DEBUG="pw:api"npx playwright test

    set DEBUG=pw:apinpx playwright test

note

**For WebKit**: launching WebKit Inspector during the execution will prevent the Playwright script from executing any further and will reset pre-configured user agent and device emulation.

Headed mode[â€‹](#headed-mode "Direct link to Headed mode")
---------------------------------------------------------

Playwright runs browsers in headless mode by default. To change this behavior, use `headless: false` as a launch option.

You can also use the [slowMo](/docs/api/class-browsertype#browser-type-launch-option-slow-mo) option to slow down execution (by N milliseconds per operation) and follow along while debugging.

    // Chromium, Firefox, or WebKitawait chromium.launch({ headless: false, slowMo: 100 });

# Dialogs

Dialogs
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can interact with the web page dialogs such as [`alert`](https://developer.mozilla.org/en-US/docs/Web/API/Window/alert), [`confirm`](https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm), [`prompt`](https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt) as well as [`beforeunload`](https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event) confirmation. For print dialogs, see [Print](#print-dialogs).

alert(), confirm(), prompt() dialogs[â€‹](#alert-confirm-prompt-dialogs "Direct link to alert(), confirm(), prompt() dialogs")
----------------------------------------------------------------------------------------------------------------------------

By default, dialogs are auto-dismissed by Playwright, so you don't have to handle them. However, you can register a dialog handler before the action that triggers the dialog to either [dialog.accept()](/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/docs/api/class-dialog#dialog-dismiss) it.

    page.on('dialog', dialog => dialog.accept());await page.getByRole('button').click();

note

[page.on('dialog')](/docs/api/class-page#page-event-dialog) listener **must handle** the dialog. Otherwise your action will stall, be it [locator.click()](/docs/api/class-locator#locator-click) or something else. That's because dialogs in Web are modals and therefore block further page execution until they are handled.

As a result, the following snippet will never resolve:

warning

WRONG!

    page.on('dialog', dialog => console.log(dialog.message()));await page.getByRole('button').click(); // Will hang here

note

If there is no listener for [page.on('dialog')](/docs/api/class-page#page-event-dialog), all dialogs are automatically dismissed.

beforeunload dialog[â€‹](#beforeunload-dialog "Direct link to beforeunload dialog")
---------------------------------------------------------------------------------

When [page.close()](/docs/api/class-page#page-close) is invoked with the truthy [runBeforeUnload](/docs/api/class-page#page-close-option-run-before-unload) value, the page runs its unload handlers. This is the only case when [page.close()](/docs/api/class-page#page-close) does not wait for the page to actually close, because it might be that the page stays open in the end of the operation.

You can register a dialog handler to handle the `beforeunload` dialog yourself:

    page.on('dialog', async dialog => {  assert(dialog.type() === 'beforeunload');  await dialog.dismiss();});await page.close({ runBeforeUnload: true });

Print dialogs[â€‹](#print-dialogs "Direct link to Print dialogs")
---------------------------------------------------------------

In order to assert that a print dialog via [`window.print`](https://developer.mozilla.org/en-US/docs/Web/API/Window/print) was triggered, you can use the following snippet:

    await page.goto('<url>');await page.evaluate('(() => {window.waitForPrintDialog = new Promise(f => window.print = f);})()');await page.getByText('Print it!').click();await page.waitForFunction('window.waitForPrintDialog');

This will wait for the print dialog to be opened after the button is clicked. Make sure to evaluate the script before clicking the button / after the page is loaded.

# Downloads

Downloads
=========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

For every attachment downloaded by the page, [page.on('download')](/docs/api/class-page#page-event-download) event is emitted. All these attachments are downloaded into a temporary folder. You can obtain the download url, file name and payload stream using the [Download](/docs/api/class-download "Download") object from the event.

You can specify where to persist downloaded files using the [downloadsPath](/docs/api/class-browsertype#browser-type-launch-option-downloads-path) option in [browserType.launch()](/docs/api/class-browsertype#browser-type-launch).

note

Downloaded files are deleted when the browser context that produced them is closed.

Here is the simplest way to handle the file download:

    // Start waiting for download before clicking. Note no await.const downloadPromise = page.waitForEvent('download');await page.getByText('Download file').click();const download = await downloadPromise;// Wait for the download process to complete and save the downloaded file somewhere.await download.saveAs('/path/to/save/at/' + download.suggestedFilename());

#### Variations[â€‹](#variations "Direct link to Variations")

If you have no idea what initiates the download, you can still handle the event:

    page.on('download', download => download.path().then(console.log));

Note that handling the event forks the control flow and makes the script harder to follow. Your scenario might end while you are downloading a file since your main control flow is not awaiting for this operation to resolve.

note

For uploading files, see the [uploading files](/docs/input#upload-files) section.

# Evaluating JavaScript

Evaluating JavaScript
=====================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright scripts run in your Playwright environment. Your page scripts run in the browser page environment. Those environments don't intersect, they are running in different virtual machines in different processes and even potentially on different computers.

The [page.evaluate()](/docs/api/class-page#page-evaluate) API can run a JavaScript function in the context of the web page and bring results back to the Playwright environment. Browser globals like `window` and `document` can be used in `evaluate`.

    const href = await page.evaluate(() => document.location.href);

If the result is a Promise or if the function is asynchronous evaluate will automatically wait until it's resolved:

    const status = await page.evaluate(async () => {  const response = await fetch(location.href);  return response.status;});

Different environments[â€‹](#different-environments "Direct link to Different environments")
------------------------------------------------------------------------------------------

Evaluated scripts run in the browser environment, while your test runs in a testing environments. This means you cannot use variables from your test in the page and vice versa. Instead, you should pass them explicitly as an argument.

The following snippet is **WRONG** because it uses the variable directly:

    const data = 'some data';const result = await page.evaluate(() => {  // WRONG: there is no "data" in the web page.  window.myApp.use(data);});

The following snippet is **CORRECT** because it passes the value explicitly as an argument:

    const data = 'some data';// Pass |data| as a parameter.const result = await page.evaluate(data => {  window.myApp.use(data);}, data);

Evaluation Argument[â€‹](#evaluation-argument "Direct link to Evaluation Argument")
---------------------------------------------------------------------------------

Playwright evaluation methods like [page.evaluate()](/docs/api/class-page#page-evaluate) take a single optional argument. This argument can be a mix of [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") values and [JSHandle](/docs/api/class-jshandle "JSHandle") instances. Handles are automatically converted to the value they represent.

    // A primitive value.await page.evaluate(num => num, 42);// An array.await page.evaluate(array => array.length, [1, 2, 3]);// An object.await page.evaluate(object => object.foo, { foo: 'bar' });// A single handle.const button = await page.evaluateHandle('window.button');await page.evaluate(button => button.textContent, button);// Alternative notation using JSHandle.evaluate.await button.evaluate((button, from) => button.textContent.substring(from), 5);// Object with multiple handles.const button1 = await page.evaluateHandle('window.button1');const button2 = await page.evaluateHandle('window.button2');await page.evaluate(    o => o.button1.textContent + o.button2.textContent,    { button1, button2 });// Object destructuring works. Note that property names must match// between the destructured object and the argument.// Also note the required parenthesis.await page.evaluate(    ({ button1, button2 }) => button1.textContent + button2.textContent,    { button1, button2 });// Array works as well. Arbitrary names can be used for destructuring.// Note the required parenthesis.await page.evaluate(    ([b1, b2]) => b1.textContent + b2.textContent,    [button1, button2]);// Any mix of serializables and handles works.await page.evaluate(    x => x.button1.textContent + x.list[0].textContent + String(x.foo),    { button1, list: [button2], foo: null });

Init scripts[â€‹](#init-scripts "Direct link to Init scripts")
------------------------------------------------------------

Sometimes it is convenient to evaluate something in the page before it starts loading. For example, you might want to setup some mocks or test data.

In this case, use [page.addInitScript()](/docs/api/class-page#page-add-init-script) or [browserContext.addInitScript()](/docs/api/class-browsercontext#browser-context-add-init-script). In the example below, we will replace `Math.random()` with a constant value.

First, create a `preload.js` file that contains the mock.

    // preload.jsMath.random = () => 42;

Next, add init script to the page.

    import { test, expect } from '@playwright/test';import path from 'path';test.beforeEach(async ({ page }) => {  // Add script for every test in the beforeEach hook.  // Make sure to correctly resolve the script path.  await page.addInitScript({ path: path.resolve(__dirname, '../mocks/preload.js') });});

Alternatively, you can pass a function instead of creating a preload script file. This is more convenient for short or one-off scripts. You can also pass an argument this way.

    import { test, expect } from '@playwright/test';// Add script for every test in the beforeEach hook.test.beforeEach(async ({ page }) => {  const value = 42;  await page.addInitScript(value => {    Math.random = () => value;  }, value);});

# Events

Events
======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright allows listening to various types of events happening on the web page, such as network requests, creation of child pages, dedicated workers etc. There are several ways to subscribe to such events, such as waiting for events or adding or removing event listeners.

Waiting for event[â€‹](#waiting-for-event "Direct link to Waiting for event")
---------------------------------------------------------------------------

Most of the time, scripts will need to wait for a particular event to happen. Below are some of the typical event awaiting patterns.

Wait for a request with the specified url using [page.waitForRequest()](/docs/api/class-page#page-wait-for-request):

    // Start waiting for request before goto. Note no await.const requestPromise = page.waitForRequest('**/*logo*.png');await page.goto('https://wikipedia.org');const request = await requestPromise;console.log(request.url());

Wait for popup window:

    // Start waiting for popup before clicking. Note no await.const popupPromise = page.waitForEvent('popup');await page.getByText('open the popup').click();const popup = await popupPromise;await popup.goto('https://wikipedia.org');

Adding/removing event listener[â€‹](#addingremoving-event-listener "Direct link to Adding/removing event listener")
-----------------------------------------------------------------------------------------------------------------

Sometimes, events happen in random time and instead of waiting for them, they need to be handled. Playwright supports traditional language mechanisms for subscribing and unsubscribing from the events:

    page.on('request', request => console.log(`Request sent: ${request.url()}`));const listener = request => console.log(`Request finished: ${request.url()}`);page.on('requestfinished', listener);await page.goto('https://wikipedia.org');page.off('requestfinished', listener);await page.goto('https://www.openstreetmap.org/');

Adding one-off listeners[â€‹](#adding-one-off-listeners "Direct link to Adding one-off listeners")
------------------------------------------------------------------------------------------------

If a certain event needs to be handled once, there is a convenience API for that:

    page.once('dialog', dialog => dialog.accept('2021'));await page.evaluate("prompt('Enter a number:')");

# Extensibility

Extensibility
=============

Custom selector engines[â€‹](#custom-selector-engines "Direct link to Custom selector engines")
---------------------------------------------------------------------------------------------

Playwright supports custom selector engines, registered with [selectors.register()](/docs/api/class-selectors#selectors-register).

Selector engine should have the following properties:

*   `query` function to query first element matching `selector` relative to the `root`.
*   `queryAll` function to query all elements matching `selector` relative to the `root`.

By default the engine is run directly in the frame's JavaScript context and, for example, can call an application-defined function. To isolate the engine from any JavaScript in the frame, but leave access to the DOM, register the engine with `{contentScript: true}` option. Content script engine is safer because it is protected from any tampering with the global objects, for example altering `Node.prototype` methods. All built-in selector engines run as content scripts. Note that running as a content script is not guaranteed when the engine is used together with other custom engines.

Selectors must be registered before creating the page.

An example of registering selector engine that queries elements based on a tag name:

baseTest.ts

    import { test as base } from '@playwright/test';export { expect } from '@playwright/test';// Must be a function that evaluates to a selector engine instance.const createTagNameEngine = () => ({  // Returns the first element matching given selector in the root's subtree.  query(root, selector) {    return root.querySelector(selector);  },  // Returns all elements matching given selector in the root's subtree.  queryAll(root, selector) {    return Array.from(root.querySelectorAll(selector));  }});export const test = base.extend<{}, { selectorRegistration: void }>({  // Register selectors once per worker.  selectorRegistration: [async ({ playwright }, use) => {    // Register the engine. Selectors will be prefixed with "tag=".    await playwright.selectors.register('tag', createTagNameEngine);    await use();  }, { scope: 'worker', auto: true }],});

example.spec.ts

    import { test, expect } from './baseTest';test('selector engine test', async ({ page }) => {  // Now we can use 'tag=' selectors.  const button = page.locator('tag=button');  await button.click();  // We can combine it with built-in locators.  await page.locator('tag=div').getByText('Click me').click();  // We can use it in any methods supporting selectors.  await expect(page.locator('tag=button')).toHaveCount(3);});

# Frames

Frames
======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

A [Page](/docs/api/class-page "Page") can have one or more [Frame](/docs/api/class-frame "Frame") objects attached to it. Each page has a main frame and page-level interactions (like `click`) are assumed to operate in the main frame.

A page can have additional frames attached with the `iframe` HTML tag. These frames can be accessed for interactions inside the frame.

    // Locate element inside frameconst username = await page.frameLocator('.frame-class').getByLabel('User Name');await username.fill('John');

Frame objects[â€‹](#frame-objects "Direct link to Frame objects")
---------------------------------------------------------------

One can access frame objects using the [page.frame()](/docs/api/class-page#page-frame) API:

    // Get frame using the frame's name attributeconst frame = page.frame('frame-login');// Get frame using frame's URLconst frame = page.frame({ url: /.*domain.*/ });// Interact with the frameawait frame.fill('#username-input', 'John');

# Handles

Handles
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can create handles to the page DOM elements or any other objects inside the page. These handles live in the Playwright process, whereas the actual objects live in the browser. There are two types of handles:

*   [JSHandle](/docs/api/class-jshandle "JSHandle") to reference any JavaScript objects in the page
*   [ElementHandle](/docs/api/class-elementhandle "ElementHandle") to reference DOM elements in the page, it has extra methods that allow performing actions on the elements and asserting their properties.

Since any DOM element in the page is also a JavaScript object, any [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is a [JSHandle](/docs/api/class-jshandle "JSHandle") as well.

Handles are used to perform operations on those actual objects in the page. You can evaluate on a handle, get handle properties, pass handle as an evaluation parameter, serialize page object into JSON etc. See the [JSHandle](/docs/api/class-jshandle "JSHandle") class API for these and methods.

### API reference[â€‹](#api-reference "Direct link to API reference")

*   [JSHandle](/docs/api/class-jshandle "JSHandle")
*   [ElementHandle](/docs/api/class-elementhandle "ElementHandle")

Here is the easiest way to obtain a [JSHandle](/docs/api/class-jshandle "JSHandle").

    const jsHandle = await page.evaluateHandle('window');//  Use jsHandle for evaluations.

Element Handles[â€‹](#element-handles "Direct link to Element Handles")
---------------------------------------------------------------------

Discouraged

The use of [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/docs/api/class-locator "Locator") objects and web-first assertions instead.

When [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is required, it is recommended to fetch it with the [page.waitForSelector()](/docs/api/class-page#page-wait-for-selector) or [frame.waitForSelector()](/docs/api/class-frame#frame-wait-for-selector) methods. These APIs wait for the element to be attached and visible.

    // Get the element handleconst elementHandle = page.waitForSelector('#box');// Assert bounding box for the elementconst boundingBox = await elementHandle.boundingBox();expect(boundingBox.width).toBe(100);// Assert attribute for the elementconst classNames = await elementHandle.getAttribute('class');expect(classNames.includes('highlighted')).toBeTruthy();

Handles as parameters[â€‹](#handles-as-parameters "Direct link to Handles as parameters")
---------------------------------------------------------------------------------------

Handles can be passed into the [page.evaluate()](/docs/api/class-page#page-evaluate) and similar methods. The following snippet creates a new array in the page, initializes it with data and returns a handle to this array into Playwright. It then uses the handle in subsequent evaluations:

    // Create new array in page.const myArrayHandle = await page.evaluateHandle(() => {  window.myArray = [1];  return myArray;});// Get the length of the array.const length = await page.evaluate(a => a.length, myArrayHandle);// Add one more element to the array using the handleawait page.evaluate(arg => arg.myArray.push(arg.newElement), {  myArray: myArrayHandle,  newElement: 2});// Release the object when it's no longer needed.await myArrayHandle.dispose();

Handle Lifecycle[â€‹](#handle-lifecycle "Direct link to Handle Lifecycle")
------------------------------------------------------------------------

Handles can be acquired using the page methods such as [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle), [page.$()](/docs/api/class-page#page-query-selector) or [page.$$()](/docs/api/class-page#page-query-selector-all) or their frame counterparts [frame.evaluateHandle()](/docs/api/class-frame#frame-evaluate-handle), [frame.$()](/docs/api/class-frame#frame-query-selector) or [frame.$$()](/docs/api/class-frame#frame-query-selector-all). Once created, handles will retain object from [garbage collection](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management) unless page navigates or the handle is manually disposed via the [jsHandle.dispose()](/docs/api/class-jshandle#js-handle-dispose) method.

### API reference[â€‹](#api-reference-1 "Direct link to API reference")

*   [JSHandle](/docs/api/class-jshandle "JSHandle")
*   [ElementHandle](/docs/api/class-elementhandle "ElementHandle")
*   [elementHandle.boundingBox()](/docs/api/class-elementhandle#element-handle-bounding-box)
*   [elementHandle.getAttribute()](/docs/api/class-elementhandle#element-handle-get-attribute)
*   [elementHandle.innerText()](/docs/api/class-elementhandle#element-handle-inner-text)
*   [elementHandle.innerHTML()](/docs/api/class-elementhandle#element-handle-inner-html)
*   [elementHandle.textContent()](/docs/api/class-elementhandle#element-handle-text-content)
*   [jsHandle.evaluate()](/docs/api/class-jshandle#js-handle-evaluate)
*   [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle)
*   [page.$()](/docs/api/class-page#page-query-selector)
*   [page.$$()](/docs/api/class-page#page-query-selector-all)

Locator vs ElementHandle[â€‹](#locator-vs-elementhandle "Direct link to Locator vs ElementHandle")
------------------------------------------------------------------------------------------------

caution

We only recommend using [ElementHandle](/docs/api/class-elementhandle "ElementHandle") in the rare cases when you need to perform extensive DOM traversal on a static page. For all user actions and assertions use locator instead.

The difference between the [Locator](/docs/api/class-locator "Locator") and [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is that the latter points to a particular element, while Locator captures the logic of how to retrieve that element.

In the example below, handle points to a particular DOM element on page. If that element changes text or is used by React to render an entirely different component, handle is still pointing to that very stale DOM element. This can lead to unexpected behaviors.

    const handle = await page.$('text=Submit');// ...await handle.hover();await handle.click();

With the locator, every time the locator is used, up-to-date DOM element is located in the page using the selector. So in the snippet below, underlying DOM element is going to be located twice.

    const locator = page.getByText('Submit');// ...await locator.hover();await locator.click();

# Isolation

Isolation
=========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Tests written with Playwright execute in isolated clean-slate environments called browser contexts. This isolation model improves reproducibility and prevents cascading test failures.

What is Test Isolation?[â€‹](#what-is-test-isolation "Direct link to What is Test Isolation?")
--------------------------------------------------------------------------------------------

Test Isolation is when each test is completely isolated from another test. Every test runs independently from any other test. This means that each test has its own local storage, session storage, cookies etc. Playwright achieves this using [BrowserContext](/docs/api/class-browsercontext "BrowserContext")s which are equivalent to incognito-like profiles. They are fast and cheap to create and are completely isolated, even when running in a single browser. Playwright creates a context for each test, and provides a default [Page](/docs/api/class-page "Page") in that context.

Why is Test Isolation Important?[â€‹](#why-is-test-isolation-important "Direct link to Why is Test Isolation Important?")
-----------------------------------------------------------------------------------------------------------------------

*   No failure carry-over. If one test fails it doesn't affect the other test.
*   Easy to debug errors or flakiness, because you can run just a single test as many times as you'd like.
*   Don't have to think about the order when running in parallel, sharding, etc.

Two Ways of Test Isolation[â€‹](#two-ways-of-test-isolation "Direct link to Two Ways of Test Isolation")
------------------------------------------------------------------------------------------------------

There are two different strategies when it comes to Test Isolation: start from scratch or cleanup in between. The problem with cleaning up in between tests is that it can be easy to forget to clean up and some things are impossible to clean up such as "visited links". State from one test can leak into the next test which could cause your test to fail and make debugging harder as the problem comes from another test. Starting from scratch means everything is new, so if the test fails you only have to look within that test to debug.

How Playwright Achieves Test Isolation[â€‹](#how-playwright-achieves-test-isolation "Direct link to How Playwright Achieves Test Isolation")
------------------------------------------------------------------------------------------------------------------------------------------

Playwright uses browser contexts to achieve Test Isolation. Each test has its own Browser Context. Running the test creates a new browser context each time. When using Playwright as a Test Runner, browser contexts are created by default. Otherwise, you can create browser contexts manually.

*   Test
*   Library

    import { test } from '@playwright/test';test('example test', async ({ page, context }) => {  // "context" is an isolated BrowserContext, created for this specific test.  // "page" belongs to this context.});test('another test', async ({ page, context }) => {  // "context" and "page" in this second test are completely  // isolated from the first test.});

    const browser = await chromium.launch();const context = await browser.newContext();const page = await context.newPage();

Browser contexts can also be used to emulate multi-page scenarios involving mobile devices, permissions, locale and color scheme. Check out our [Emulation](/docs/emulation) guide for more details.

Multiple Contexts in a Single Test[â€‹](#multiple-contexts-in-a-single-test "Direct link to Multiple Contexts in a Single Test")
------------------------------------------------------------------------------------------------------------------------------

Playwright can create multiple browser contexts within a single scenario. This is useful when you want to test for multi-user functionality, like a chat.

*   Test
*   Library

    import { test } from '@playwright/test';test('admin and user', async ({ browser }) => {  // Create two isolated browser contexts  const adminContext = await browser.newContext();  const userContext = await browser.newContext();  // Create pages and interact with contexts independently  const adminPage = await adminContext.newPage();  const userPage = await userContext.newPage();});

    const { chromium } = require('playwright');// Create a Chromium browser instanceconst browser = await chromium.launch();// Create two isolated browser contextsconst userContext = await browser.newContext();const adminContext = await browser.newContext();// Create pages and interact with contexts independentlyconst adminPage = await adminContext.newPage();const userPage = await userContext.newPage();

# Locators

Locators
========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

[Locator](/docs/api/class-locator "Locator")s are the central piece of Playwright's auto-waiting and retry-ability. In a nutshell, locators represent a way to find element(s) on the page at any moment.

### Quick Guide[â€‹](#quick-guide "Direct link to Quick Guide")

These are the recommended built-in locators.

*   [page.getByRole()](#locate-by-role) to locate by explicit and implicit accessibility attributes.
*   [page.getByText()](#locate-by-text) to locate by text content.
*   [page.getByLabel()](#locate-by-label) to locate a form control by associated label's text.
*   [page.getByPlaceholder()](#locate-by-placeholder) to locate an input by placeholder.
*   [page.getByAltText()](#locate-by-alt-text) to locate an element, usually image, by its text alternative.
*   [page.getByTitle()](#locate-by-title) to locate an element by its title attribute.
*   [page.getByTestId()](#locate-by-test-id) to locate an element based on its `data-testid` attribute (other attributes can be configured).

    await page.getByLabel('User Name').fill('John');await page.getByLabel('Password').fill('secret-password');await page.getByRole('button', { name: 'Sign in' }).click();await expect(page.getByText('Welcome, John!')).toBeVisible();

Locating elements[â€‹](#locating-elements "Direct link to Locating elements")
---------------------------------------------------------------------------

Playwright comes with multiple built-in locators. To make tests resilient, we recommend prioritizing user-facing attributes and explicit contracts such as [page.getByRole()](/docs/api/class-page#page-get-by-role).

For example, consider the following DOM structure.

http://localhost:3000

Sign in

    <button>Sign in</button>

Locate the element by its role of `button` with name "Sign in".

    await page.getByRole('button', { name: 'Sign in' }).click();

note

Use the [code generator](/docs/codegen) to generate a locator, and then edit it as you'd like.

Every time a locator is used for an action, an up-to-date DOM element is located in the page. In the snippet below, the underlying DOM element will be located twice, once prior to every action. This means that if the DOM changes in between the calls due to re-render, the new element corresponding to the locator will be used.

    const locator = page.getByRole('button', { name: 'Sign in' });await locator.hover();await locator.click();

Note that all methods that create a locator, such as [page.getByLabel()](/docs/api/class-page#page-get-by-label), are also available on the [Locator](/docs/api/class-locator "Locator") and [FrameLocator](/docs/api/class-framelocator "FrameLocator") classes, so you can chain them and iteratively narrow down your locator.

    const locator = page    .frameLocator('#my-frame')    .getByRole('button', { name: 'Sign in' });await locator.click();

### Locate by role[â€‹](#locate-by-role "Direct link to Locate by role")

The [page.getByRole()](/docs/api/class-page#page-get-by-role) locator reflects how users and assistive technology perceive the page, for example whether some element is a button or a checkbox. When locating by role, you should usually pass the accessible name as well, so that the locator pinpoints the exact element.

For example, consider the following DOM structure.

http://localhost:3000

### Sign up

 Subscribe  
Submit

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by its implicit role:

    await expect(page.getByRole('heading', { name: 'Sign up' })).toBeVisible();await page.getByRole('checkbox', { name: 'Subscribe' }).check();await page.getByRole('button', { name: /submit/i }).click();

Role locators include [buttons, checkboxes, headings, links, lists, tables, and many more](https://www.w3.org/TR/html-aria/#docconformance) and follow W3C specifications for [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). Note that many html elements like `<button>` have an [implicitly defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role locator.

Note that role locators **do not replace** accessibility audits and conformance tests, but rather give early feedback about the ARIA guidelines.

When to use role locators

We recommend prioritizing role locators to locate elements, as it is the closest way to how users and assistive technology perceive the page.

### Locate by label[â€‹](#locate-by-label "Direct link to Locate by label")

Most form controls usually have dedicated labels that could be conveniently used to interact with the form. In this case, you can locate the control by its associated label using [page.getByLabel()](/docs/api/class-page#page-get-by-label).

For example, consider the following DOM structure.

http://localhost:3000

Password 

    <label>Password <input type="password" /></label>

You can fill the input after locating it by the label text:

    await page.getByLabel('Password').fill('secret');

When to use label locators

Use this locator when locating form fields.

### Locate by placeholder[â€‹](#locate-by-placeholder "Direct link to Locate by placeholder")

Inputs may have a placeholder attribute to hint to the user what value should be entered. You can locate such an input using [page.getByPlaceholder()](/docs/api/class-page#page-get-by-placeholder).

For example, consider the following DOM structure.

http://localhost:3000

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

    await page    .getByPlaceholder('name@example.com')    .fill('playwright@microsoft.com');

When to use placeholder locators

Use this locator when locating form elements that do not have labels but do have placeholder texts.

### Locate by text[â€‹](#locate-by-text "Direct link to Locate by text")

Find an element by the text it contains. You can match by a substring, exact string, or a regular expression when using [page.getByText()](/docs/api/class-page#page-get-by-text).

For example, consider the following DOM structure.

http://localhost:3000

Welcome, John

    <span>Welcome, John</span>

You can locate the element by the text it contains:

    await expect(page.getByText('Welcome, John')).toBeVisible();

Set an exact match:

    await expect(page.getByText('Welcome, John', { exact: true })).toBeVisible();

Match with a regular expression:

    await expect(page.getByText(/welcome, [A-Za-z]+$/i)).toBeVisible();

note

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

When to use text locators

We recommend using text locators to find non interactive elements like `div`, `span`, `p`, etc. For interactive elements like `button`, `a`, `input`, etc. use [role locators](#locate-by-role).

You can also [filter by text](#filter-by-text) which can be useful when trying to find a particular item in a list.

### Locate by alt text[â€‹](#locate-by-alt-text "Direct link to Locate by alt text")

All images should have an `alt` attribute that describes the image. You can locate an image based on the text alternative using [page.getByAltText()](/docs/api/class-page#page-get-by-alt-text).

For example, consider the following DOM structure.

http://localhost:3000

![playwright logo](/img/playwright-logo.svg)

    <img alt="playwright logo" src="/img/playwright-logo.svg" width="100" />

You can click on the image after locating it by the text alternative:

    await page.getByAltText('playwright logo').click();

When to use alt locators

Use this locator when your element supports alt text such as `img` and `area` elements.

### Locate by title[â€‹](#locate-by-title "Direct link to Locate by title")

Locate an element with a matching title attribute using [page.getByTitle()](/docs/api/class-page#page-get-by-title).

For example, consider the following DOM structure.

http://localhost:3000

25 issues

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

    await expect(page.getByTitle('Issues count')).toHaveText('25 issues');

When to use title locators

Use this locator when your element has the `title` attribute.

### Locate by test id[â€‹](#locate-by-test-id "Direct link to Locate by test id")

Testing by test ids is the most resilient way of testing as even if your text or role of the attribute changes, the test will still pass. QA's and developers should define explicit test ids and query them with [page.getByTestId()](/docs/api/class-page#page-get-by-test-id). However testing by test ids is not user facing. If the role or text value is important to you then consider using user facing locators such as [role](#locate-by-role) and [text locators](#locate-by-text).

For example, consider the following DOM structure.

http://localhost:3000

ItinÃ©raire

    <button data-testid="directions">ItinÃ©raire</button>

You can locate the element by its test id:

    await page.getByTestId('directions').click();

When to use testid locators

You can also use test ids when you choose to use the test id methodology or when you can't locate by [role](#locate-by-role) or [text](#locate-by-text).

#### Set a custom test id attribute[â€‹](#set-a-custom-test-id-attribute "Direct link to Set a custom test id attribute")

By default, [page.getByTestId()](/docs/api/class-page#page-get-by-test-id) will locate elements based on the `data-testid` attribute, but you can configure it in your test config or by calling [selectors.setTestIdAttribute()](/docs/api/class-selectors#selectors-set-test-id-attribute).

Set the test id to use a custom data attribute for your tests.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    testIdAttribute: 'data-pw'  }});

In your html you can now use `data-pw` as your test id instead of the default `data-testid`.

http://localhost:3000

ItinÃ©raire

    <button data-pw="directions">ItinÃ©raire</button>

And then locate the element as you would normally do:

    await page.getByTestId('directions').click();

### Locate by CSS or XPath[â€‹](#locate-by-css-or-xpath "Direct link to Locate by CSS or XPath")

If you absolutely must use CSS or XPath locators, you can use [page.locator()](/docs/api/class-page#page-locator) to create a locator that takes a selector describing how to find an element in the page. Playwright supports CSS and XPath selectors, and auto-detects them if you omit `css=` or `xpath=` prefix.

    await page.locator('css=button').click();await page.locator('xpath=//button').click();await page.locator('button').click();await page.locator('//button').click();

XPath and CSS selectors can be tied to the DOM structure or implementation. These selectors can break when the DOM structure changes. Long CSS or XPath chains below are an example of a **bad practice** that leads to unstable tests:

    await page.locator(    '#tsf > div:nth-child(2) > div.A8SBwf > div.RNNXgb > div > div.a4bIc > input').click();await page    .locator('//*[@id="tsf"]/div[2]/div[1]/div[1]/div/div[2]/input')    .click();

When to use this

CSS and XPath are not recommended as the DOM can often change leading to non resilient tests. Instead, try to come up with a locator that is close to how the user perceives the page such as [role locators](#locate-by-role) or [define an explicit testing contract](#locate-by-test-id) using test ids.

Locate in Shadow DOM[â€‹](#locate-in-shadow-dom "Direct link to Locate in Shadow DOM")
------------------------------------------------------------------------------------

All locators in Playwright **by default** work with elements in Shadow DOM. The exceptions are:

*   Locating by XPath does not pierce shadow roots.
*   [Closed-mode shadow roots](https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#parameters) are not supported.

Consider the following example with a custom web component:

    <x-details role=button aria-expanded=true aria-controls=inner-details>  <div>Title</div>  #shadow-root    <div id=inner-details>Details</div></x-details>

You can locate in the same way as if the shadow root was not present at all.

To click `<div>Details</div>`:

    await page.getByText('Details').click();

    <x-details role=button aria-expanded=true aria-controls=inner-details>  <div>Title</div>  #shadow-root    <div id=inner-details>Details</div></x-details>

To click `<x-details>`:

    await page.locator('x-details', { hasText: 'Details' }).click();

    <x-details role=button aria-expanded=true aria-controls=inner-details>  <div>Title</div>  #shadow-root    <div id=inner-details>Details</div></x-details>

To ensure that `<x-details>` contains the text "Details":

    await expect(page.locator('x-details')).toContainText('Details');

Filtering Locators[â€‹](#filtering-locators "Direct link to Filtering Locators")
------------------------------------------------------------------------------

Consider the following DOM structure where we want to click on the buy button of the second product card. We have a few options in order to filter the locators to get the right one.

http://localhost:3000

*   ### Product 1
    
    Add to cart
*   ### Product 2
    
    Add to cart

    <ul>  <li>    <h3>Product 1</h3>    <button>Add to cart</button>  </li>  <li>    <h3>Product 2</h3>    <button>Add to cart</button>  </li></ul>

### Filter by text[â€‹](#filter-by-text "Direct link to Filter by text")

Locators can be filtered by text with the [locator.filter()](/docs/api/class-locator#locator-filter) method. It will search for a particular string somewhere inside the element, possibly in a descendant element, case-insensitively. You can also pass a regular expression.

    await page    .getByRole('listitem')    .filter({ hasText: 'Product 2' })    .getByRole('button', { name: 'Add to cart' })    .click();

Use a regular expression:

    await page    .getByRole('listitem')    .filter({ hasText: /Product 2/ })    .getByRole('button', { name: 'Add to cart' })    .click();

### Filter by not having text[â€‹](#filter-by-not-having-text "Direct link to Filter by not having text")

Alternatively, filter by **not having** text:

    // 5 in-stock itemsawait expect(page.getByRole('listitem').filter({ hasNotText: 'Out of stock' })).toHaveCount(5);

### Filter by child/descendant[â€‹](#filter-by-childdescendant "Direct link to Filter by child/descendant")

Locators support an option to only select elements that have or have not a descendant matching another locator. You can therefore filter by any other locator such as a [locator.getByRole()](/docs/api/class-locator#locator-get-by-role), [locator.getByTestId()](/docs/api/class-locator#locator-get-by-test-id), [locator.getByText()](/docs/api/class-locator#locator-get-by-text) etc.

http://localhost:3000

*   ### Product 1
    
    Add to cart
*   ### Product 2
    
    Add to cart

    <ul>  <li>    <h3>Product 1</h3>    <button>Add to cart</button>  </li>  <li>    <h3>Product 2</h3>    <button>Add to cart</button>  </li></ul>

    await page    .getByRole('listitem')    .filter({ has: page.getByRole('heading', { name: 'Product 2' }) })    .getByRole('button', { name: 'Add to cart' })    .click();

We can also assert the product card to make sure there is only one:

    await expect(page    .getByRole('listitem')    .filter({ has: page.getByRole('heading', { name: 'Product 2' }) }))    .toHaveCount(1);

The filtering locator **must be relative** to the original locator and is queried starting with the original locator match, not the document root. Therefore, the following will not work, because the filtering locator starts matching from the `<ul>` list element that is outside of the `<li>` list item matched by the original locator:

    // âœ– WRONGawait expect(page    .getByRole('listitem')    .filter({ has: page.getByRole('list').getByText('Product 2') }))    .toHaveCount(1);

### Filter by not having child/descendant[â€‹](#filter-by-not-having-childdescendant "Direct link to Filter by not having child/descendant")

We can also filter by **not having** a matching element inside.

    await expect(page    .getByRole('listitem')    .filter({ hasNot: page.getByText('Product 2') }))    .toHaveCount(1);

Note that the inner locator is matched starting from the outer one, not from the document root.

Locator operators[â€‹](#locator-operators "Direct link to Locator operators")
---------------------------------------------------------------------------

### Matching inside a locator[â€‹](#matching-inside-a-locator "Direct link to Matching inside a locator")

You can chain methods that create a locator, like [page.getByText()](/docs/api/class-page#page-get-by-text) or [locator.getByRole()](/docs/api/class-locator#locator-get-by-role), to narrow down the search to a particular part of the page.

In this example we first create a locator called product by locating its role of `listitem`. We then filter by text. We can use the product locator again to get by role of button and click it and then use an assertion to make sure there is only one product with the text "Product 2".

    const product = page.getByRole('listitem').filter({ hasText: 'Product 2' });await product.getByRole('button', { name: 'Add to cart' }).click();await expect(product).toHaveCount(1);

You can also chain two locators together, for example to find a "Save" button inside a particular dialog:

    const saveButton = page.getByRole('button', { name: 'Save' });// ...const dialog = page.getByTestId('settings-dialog');await dialog.locator(saveButton).click();

### Matching two locators simultaneously[â€‹](#matching-two-locators-simultaneously "Direct link to Matching two locators simultaneously")

Method [locator.and()](/docs/api/class-locator#locator-and) narrows down an existing locator by matching an additional locator. For example, you can combine [page.getByRole()](/docs/api/class-page#page-get-by-role) and [page.getByTitle()](/docs/api/class-page#page-get-by-title) to match by both role and title.

    const button = page.getByRole('button').and(page.getByTitle('Subscribe'));

### Matching one of the two alternative locators[â€‹](#matching-one-of-the-two-alternative-locators "Direct link to Matching one of the two alternative locators")

If you'd like to target one of the two or more elements, and you don't know which one it will be, use [locator.or()](/docs/api/class-locator#locator-or) to create a locator that matches any one or both of the alternatives.

For example, consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly.

note

If both "New email" button and security dialog appear on screen, the "or" locator will match both of them, possibly throwing the ["strict mode violation" error](#strictness). In this case, you can use [locator.first()](/docs/api/class-locator#locator-first) to only match one of them.

    const newEmail = page.getByRole('button', { name: 'New' });const dialog = page.getByText('Confirm security settings');await expect(newEmail.or(dialog).first()).toBeVisible();if (await dialog.isVisible())  await page.getByRole('button', { name: 'Dismiss' }).click();await newEmail.click();

### Matching only visible elements[â€‹](#matching-only-visible-elements "Direct link to Matching only visible elements")

note

It's usually better to find a [more reliable way](/docs/locators#quick-guide) to uniquely identify the element instead of checking the visibility.

Consider a page with two buttons, the first invisible and the second [visible](/docs/actionability#visible).

    <button style='display: none'>Invisible</button><button>Visible</button>

*   This will find both buttons and throw a [strictness](/docs/locators#strictness) violation error:
    
        await page.locator('button').click();
    
*   This will only find a second button, because it is visible, and then click it.
    
        await page.locator('button').filter({ visible: true }).click();
    

Lists[â€‹](#lists "Direct link to Lists")
---------------------------------------

### Count items in a list[â€‹](#count-items-in-a-list "Direct link to Count items in a list")

You can assert locators in order to count the items in a list.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Use the count assertion to ensure that the list has 3 items.

    await expect(page.getByRole('listitem')).toHaveCount(3);

### Assert all text in a list[â€‹](#assert-all-text-in-a-list "Direct link to Assert all text in a list")

You can assert locators in order to find all the text in a list.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Use [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) to ensure that the list has the text "apple", "banana" and "orange".

    await expect(page    .getByRole('listitem'))    .toHaveText(['apple', 'banana', 'orange']);

### Get a specific item[â€‹](#get-a-specific-item "Direct link to Get a specific item")

There are many ways to get a specific item in a list.

#### Get by text[â€‹](#get-by-text "Direct link to Get by text")

Use the [page.getByText()](/docs/api/class-page#page-get-by-text) method to locate an element in a list by its text content and then click on it.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Locate an item by its text content and click it.

    await page.getByText('orange').click();

#### Filter by text[â€‹](#filter-by-text-1 "Direct link to Filter by text")

Use the [locator.filter()](/docs/api/class-locator#locator-filter) to locate a specific item in a list.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li>apple</li>  <li>banana</li>  <li>orange</li></ul>

Locate an item by the role of "listitem" and then filter by the text of "orange" and then click it.

    await page    .getByRole('listitem')    .filter({ hasText: 'orange' })    .click();

#### Get by test id[â€‹](#get-by-test-id "Direct link to Get by test id")

Use the [page.getByTestId()](/docs/api/class-page#page-get-by-test-id) method to locate an element in a list. You may need to modify the html and add a test id if you don't already have a test id.

For example, consider the following DOM structure:

http://localhost:3000

*   apple
*   banana
*   orange

    <ul>  <li data-testid='apple'>apple</li>  <li data-testid='banana'>banana</li>  <li data-testid='orange'>orange</li></ul>

Locate an item by its test id of "orange" and then click it.

    await page.getByTestId('orange').click();

#### Get by nth item[â€‹](#get-by-nth-item "Direct link to Get by nth item")

If you have a list of identical elements, and the only way to distinguish between them is the order, you can choose a specific element from a list with [locator.first()](/docs/api/class-locator#locator-first), [locator.last()](/docs/api/class-locator#locator-last) or [locator.nth()](/docs/api/class-locator#locator-nth).

    const banana = await page.getByRole('listitem').nth(1);

However, use this method with caution. Often times, the page might change, and the locator will point to a completely different element from the one you expected. Instead, try to come up with a unique locator that will pass the [strictness criteria](#strictness).

### Chaining filters[â€‹](#chaining-filters "Direct link to Chaining filters")

When you have elements with various similarities, you can use the [locator.filter()](/docs/api/class-locator#locator-filter) method to select the right one. You can also chain multiple filters to narrow down the selection.

For example, consider the following DOM structure:

http://localhost:3000

*   John
    
    Say hello
    
*   Mary
    
    Say hello
    
*   John
    
    Say goodbye
    
*   Mary
    
    Say goodbye
    

    <ul>  <li>    <div>John</div>    <div><button>Say hello</button></div>  </li>  <li>    <div>Mary</div>    <div><button>Say hello</button></div>  </li>  <li>    <div>John</div>    <div><button>Say goodbye</button></div>  </li>  <li>    <div>Mary</div>    <div><button>Say goodbye</button></div>  </li></ul>

To take a screenshot of the row with "Mary" and "Say goodbye":

    const rowLocator = page.getByRole('listitem');await rowLocator    .filter({ hasText: 'Mary' })    .filter({ has: page.getByRole('button', { name: 'Say goodbye' }) })    .screenshot({ path: 'screenshot.png' });

You should now have a "screenshot.png" file in your project's root directory.

### Rare use cases[â€‹](#rare-use-cases "Direct link to Rare use cases")

#### Do something with each element in the list[â€‹](#do-something-with-each-element-in-the-list "Direct link to Do something with each element in the list")

Iterate elements:

    for (const row of await page.getByRole('listitem').all())  console.log(await row.textContent());

Iterate using regular for loop:

    const rows = page.getByRole('listitem');const count = await rows.count();for (let i = 0; i < count; ++i)  console.log(await rows.nth(i).textContent());

#### Evaluate in the page[â€‹](#evaluate-in-the-page "Direct link to Evaluate in the page")

The code inside [locator.evaluateAll()](/docs/api/class-locator#locator-evaluate-all) runs in the page, you can call any DOM apis there.

    const rows = page.getByRole('listitem');const texts = await rows.evaluateAll(    list => list.map(element => element.textContent));

Strictness[â€‹](#strictness "Direct link to Strictness")
------------------------------------------------------

Locators are strict. This means that all operations on locators that imply some target DOM element will throw an exception if more than one element matches. For example, the following call throws if there are several buttons in the DOM:

#### Throws an error if more than one[â€‹](#throws-an-error-if-more-than-one "Direct link to Throws an error if more than one")

    await page.getByRole('button').click();

On the other hand, Playwright understands when you perform a multiple-element operation, so the following call works perfectly fine when the locator resolves to multiple elements.

#### Works fine with multiple elements[â€‹](#works-fine-with-multiple-elements "Direct link to Works fine with multiple elements")

    await page.getByRole('button').count();

You can explicitly opt-out from strictness check by telling Playwright which element to use when multiple elements match, through [locator.first()](/docs/api/class-locator#locator-first), [locator.last()](/docs/api/class-locator#locator-last), and [locator.nth()](/docs/api/class-locator#locator-nth). These methods are **not recommended** because when your page changes, Playwright may click on an element you did not intend. Instead, follow best practices above to create a locator that uniquely identifies the target element.

More Locators[â€‹](#more-locators "Direct link to More Locators")
---------------------------------------------------------------

For less commonly used locators, look at the [other locators](/docs/other-locators) guide.

# Mock APIs

Mock APIs
=========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Web APIs are usually implemented as HTTP endpoints. Playwright provides APIs to **mock** and **modify** network traffic, both HTTP and HTTPS. Any requests that a page does, including [XHRs](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) and [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) requests, can be tracked, modified and mocked. With Playwright you can also mock using HAR files that contain multiple network requests made by the page.

Mock API requests[â€‹](#mock-api-requests "Direct link to Mock API requests")
---------------------------------------------------------------------------

The following code will intercept all the calls to `*/**/api/v1/fruits` and will return a custom response instead. No requests to the API will be made. The test goes to the URL that uses the mocked route and asserts that mock data is present on the page.

    test("mocks a fruit and doesn't call api", async ({ page }) => {  // Mock the api call before navigating  await page.route('*/**/api/v1/fruits', async route => {    const json = [{ name: 'Strawberry', id: 21 }];    await route.fulfill({ json });  });  // Go to the page  await page.goto('https://demo.playwright.dev/api-mocking');  // Assert that the Strawberry fruit is visible  await expect(page.getByText('Strawberry')).toBeVisible();});

You can see from the trace of the example test that the API was never called, it was however fulfilled with the mock data. ![api mocking trace](https://github.com/microsoft/playwright/assets/13063165/3dc14cbf-c100-4efc-ac21-d7b52d698b53)

Read more about [advanced networking](/docs/network).

Modify API responses[â€‹](#modify-api-responses "Direct link to Modify API responses")
------------------------------------------------------------------------------------

Sometimes, it is essential to make an API request, but the response needs to be patched to allow for reproducible testing. In that case, instead of mocking the request, one can perform the request and fulfill it with the modified response.

In the example below we intercept the call to the fruit API and add a new fruit called 'Loquat', to the data. We then go to the url and assert that this data is there:

    test('gets the json from api and adds a new fruit', async ({ page }) => {  // Get the response and add to it  await page.route('*/**/api/v1/fruits', async route => {    const response = await route.fetch();    const json = await response.json();    json.push({ name: 'Loquat', id: 100 });    // Fulfill using the original response, while patching the response body    // with the given JSON object.    await route.fulfill({ response, json });  });  // Go to the page  await page.goto('https://demo.playwright.dev/api-mocking');  // Assert that the new fruit is visible  await expect(page.getByText('Loquat', { exact: true })).toBeVisible();});

In the trace of our test we can see that the API was called and the response was modified. ![trace of test showing api being called and fulfilled](https://github.com/microsoft/playwright/assets/13063165/8b8dd82d-1b3e-428e-871b-840581fed439)

By inspecting the response we can see that our new fruit was added to the list. ![trace of test showing the mock response](https://github.com/microsoft/playwright/assets/13063165/03e6c87c-4ecc-47e8-9ca0-30fface25e9d)

Read more about [advanced networking](/docs/network).

Mocking with HAR files[â€‹](#mocking-with-har-files "Direct link to Mocking with HAR files")
------------------------------------------------------------------------------------------

A HAR file is an [HTTP Archive](http://www.softwareishard.com/blog/har-12-spec/) file that contains a record of all the network requests that are made when a page is loaded. It contains information about the request and response headers, cookies, content, timings, and more. You can use HAR files to mock network requests in your tests. You'll need to:

1.  Record a HAR file.
2.  Commit the HAR file alongside the tests.
3.  Route requests using the saved HAR files in the tests.

### Recording a HAR file[â€‹](#recording-a-har-file "Direct link to Recording a HAR file")

To record a HAR file we use [page.routeFromHAR()](/docs/api/class-page#page-route-from-har) or [browserContext.routeFromHAR()](/docs/api/class-browsercontext#browser-context-route-from-har) method. This method takes in the path to the HAR file and an optional object of options. The options object can contain the URL so that only requests with the URL matching the specified glob pattern will be served from the HAR File. If not specified, all requests will be served from the HAR file.

Setting `update` option to true will create or update the HAR file with the actual network information instead of serving the requests from the HAR file. Use it when creating a test to populate the HAR with real data.

Alternatively, you can also record HAR files by using the [recordHar](/docs/api/class-browser#browser-new-context-option-record-har) option in [browser.newContext()](/docs/api/class-browser#browser-new-context) when creating a browser context. This allows you to capture all network traffic for the entire context until the context is closed.

### Modifying a HAR file[â€‹](#modifying-a-har-file "Direct link to Modifying a HAR file")

Once you have recorded a HAR file you can modify it by opening the hashed .txt file inside your 'hars' folder and editing the JSON. This file should be committed to your source control. Anytime you run this test with `update: true` it will update your HAR file with the request from the API.

    [  {    "name": "Playwright",    "id": 100  },  // ... other fruits]

### Replaying from HAR[â€‹](#replaying-from-har "Direct link to Replaying from HAR")

Now that you have the HAR file recorded and modified the mock data, it can be used to serve matching responses in the test. For this, just turn off or simply remove the `update` option. This will run the test against the HAR file instead of hitting the API.

    test('gets the json from HAR and checks the new fruit has been added', async ({ page }) => {  // Replay API requests from HAR.  // Either use a matching response from the HAR,  // or abort the request if nothing matches.  await page.routeFromHAR('./hars/fruit.har', {    url: '*/**/api/v1/fruits',    update: false,  });  // Go to the page  await page.goto('https://demo.playwright.dev/api-mocking');  // Assert that the Playwright fruit is visible  await expect(page.getByText('Playwright', { exact: true })).toBeVisible();});

In the trace of our test we can see that the route was fulfilled from the HAR file and the API was not called. ![trace showing the HAR file being used](https://github.com/microsoft/playwright/assets/13063165/1bd7ab66-ea4f-43c2-a4e5-ca17d4837ff1)

If we inspect the response we can see our new fruit was added to the JSON, which was done by manually updating the hashed `.txt` file inside the `hars` folder. ![trace showing response from HAR file](https://github.com/microsoft/playwright/assets/13063165/db3117fc-7b02-4973-9a51-29e213261a6a)

HAR replay matches URL and HTTP method strictly. For POST requests, it also matches POST payloads strictly. If multiple recordings match a request, the one with the most matching headers is picked. An entry resulting in a redirect will be followed automatically.

Similar to when recording, if given HAR file name ends with `.zip`, it is considered an archive containing the HAR file along with network payloads stored as separate entries. You can also extract this archive, edit payloads or HAR log manually and point to the extracted har file. All the payloads will be resolved relative to the extracted har file on the file system.

#### Recording HAR with CLI[â€‹](#recording-har-with-cli "Direct link to Recording HAR with CLI")

We recommend the `update` option to record HAR file for your test. However, you can also record the HAR with Playwright CLI.

Open the browser with Playwright CLI and pass `--save-har` option to produce a HAR file. Optionally, use `--save-har-glob` to only save requests you are interested in, for example API endpoints. If the har file name ends with `.zip`, artifacts are written as separate files and are all compressed into a single `zip`.

    # Save API requests from example.com as "example.har" archive.npx playwright open --save-har=example.har --save-har-glob="**/api/**" https://example.com

Read more about [advanced networking](/docs/network).

Mock WebSockets[â€‹](#mock-websockets "Direct link to Mock WebSockets")
---------------------------------------------------------------------

The following code will intercept WebSocket connections and mock entire communication over the WebSocket, instead of connecting to the server. This example responds to a `"request"` with a `"response"`.

    await page.routeWebSocket('wss://example.com/ws', ws => {  ws.onMessage(message => {    if (message === 'request')      ws.send('response');  });});

Alternatively, you may want to connect to the actual server, but intercept messages in-between and modify or block them. Here is an example that modifies some of the messages sent by the page to the server, and leaves the rest unmodified.

    await page.routeWebSocket('wss://example.com/ws', ws => {  const server = ws.connectToServer();  ws.onMessage(message => {    if (message === 'request')      server.send('request2');    else      server.send(message);  });});

For more details, see [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute").

# Mock browser APIs

Mock browser APIs
=================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright provides native support for most of the browser features. However, there are some experimental APIs and APIs which are not (yet) fully supported by all browsers. Playwright usually doesn't provide dedicated automation APIs in such cases. You can use mocks to test the behavior of your application in such cases. This guide gives a few examples.

Let's consider a web app that uses [battery API](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getBattery) to show your device's battery status. We'll mock the battery API and check that the page correctly displays the battery status.

Creating mocks[â€‹](#creating-mocks "Direct link to Creating mocks")
------------------------------------------------------------------

Since the page may be calling the API very early while loading it's important to setup all the mocks before the page started loading. The easiest way to achieve that is to call [page.addInitScript()](/docs/api/class-page#page-add-init-script):

    await page.addInitScript(() => {  const mockBattery = {    level: 0.75,    charging: true,    chargingTime: 1800,    dischargingTime: Infinity,    addEventListener: () => { }  };  // Override the method to always return mock battery info.  window.navigator.getBattery = async () => mockBattery;});

Once this is done you can navigate the page and check its UI state:

    // Configure mock API before each test.test.beforeEach(async ({ page }) => {  await page.addInitScript(() => {    const mockBattery = {      level: 0.90,      charging: true,      chargingTime: 1800, // seconds      dischargingTime: Infinity,      addEventListener: () => { }    };    // Override the method to always return mock battery info.    window.navigator.getBattery = async () => mockBattery;  });});test('show battery status', async ({ page }) => {  await page.goto('/');  await expect(page.locator('.battery-percentage')).toHaveText('90%');  await expect(page.locator('.battery-status')).toHaveText('Adapter');  await expect(page.locator('.battery-fully')).toHaveText('00:30');});

Mocking read-only APIs[â€‹](#mocking-read-only-apis "Direct link to Mocking read-only APIs")
------------------------------------------------------------------------------------------

Some APIs are read-only so you won't be able to assign to a navigator property. For example,

    // Following line will have no effect.navigator.cookieEnabled = true;

However, if the property is [configurable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#configurable), you can still override it using the plain JavaScript:

    await page.addInitScript(() => {  Object.defineProperty(Object.getPrototypeOf(navigator), 'cookieEnabled', { value: false });});

Verifying API calls[â€‹](#verifying-api-calls "Direct link to Verifying API calls")
---------------------------------------------------------------------------------

Sometimes it is useful to check if the page made all expected APIs calls. You can record all API method invocations and then compare them with golden result. [page.exposeFunction()](/docs/api/class-page#page-expose-function) may come in handy for passing message from the page back to the test code:

    test('log battery calls', async ({ page }) => {  const log = [];  // Expose function for pushing messages to the Node.js script.  await page.exposeFunction('logCall', msg => log.push(msg));  await page.addInitScript(() => {    const mockBattery = {      level: 0.75,      charging: true,      chargingTime: 1800,      dischargingTime: Infinity,      // Log addEventListener calls.      addEventListener: (name, cb) => logCall(`addEventListener:${name}`)    };    // Override the method to always return mock battery info.    window.navigator.getBattery = async () => {      logCall('getBattery');      return mockBattery;    };  });  await page.goto('/');  await expect(page.locator('.battery-percentage')).toHaveText('75%');  // Compare actual calls with golden.  expect(log).toEqual([    'getBattery',    'addEventListener:chargingchange',    'addEventListener:levelchange'  ]);});

Updating mock[â€‹](#updating-mock "Direct link to Updating mock")
---------------------------------------------------------------

To test that the app correctly reflects battery status updates it's important to make sure that the mock battery object fires same events that the browser implementation would. The following test demonstrates how to achieve that:

    test('update battery status (no golden)', async ({ page }) => {  await page.addInitScript(() => {    // Mock class that will notify corresponding listeners when battery status changes.    class BatteryMock {      level = 0.10;      charging = false;      chargingTime = 1800;      dischargingTime = Infinity;      _chargingListeners = [];      _levelListeners = [];      addEventListener(eventName, listener) {        if (eventName === 'chargingchange')          this._chargingListeners.push(listener);        if (eventName === 'levelchange')          this._levelListeners.push(listener);      }      // Will be called by the test.      _setLevel(value) {        this.level = value;        this._levelListeners.forEach(cb => cb());      }      _setCharging(value) {        this.charging = value;        this._chargingListeners.forEach(cb => cb());      }    }    const mockBattery = new BatteryMock();    // Override the method to always return mock battery info.    window.navigator.getBattery = async () => mockBattery;    // Save the mock object on window for easier access.    window.mockBattery = mockBattery;  });  await page.goto('/');  await expect(page.locator('.battery-percentage')).toHaveText('10%');  // Update level to 27.5%  await page.evaluate(() => window.mockBattery._setLevel(0.275));  await expect(page.locator('.battery-percentage')).toHaveText('27.5%');  await expect(page.locator('.battery-status')).toHaveText('Battery');  // Emulate connected adapter  await page.evaluate(() => window.mockBattery._setCharging(true));  await expect(page.locator('.battery-status')).toHaveText('Adapter');  await expect(page.locator('.battery-fully')).toHaveText('00:30');});

# Navigations

Navigations
===========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can navigate to URLs and handle navigations caused by the page interactions.

Basic navigation[â€‹](#basic-navigation "Direct link to Basic navigation")
------------------------------------------------------------------------

Simplest form of a navigation is opening a URL:

    // Navigate the pageawait page.goto('https://example.com');

The code above loads the page and waits for the web page to fire the [load](https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event) event. The load event is fired when the whole page has loaded, including all dependent resources such as stylesheets, scripts, iframes, and images.

note

If the page does a client-side redirect before `load`, [page.goto()](/docs/api/class-page#page-goto) will wait for the redirected page to fire the `load` event.

When is the page loaded?[â€‹](#when-is-the-page-loaded "Direct link to When is the page loaded?")
-----------------------------------------------------------------------------------------------

Modern pages perform numerous activities after the `load` event was fired. They fetch data lazily, populate UI, load expensive resources, scripts and styles after the `load` event was fired. There is no way to tell that the page is `loaded`, it depends on the page, framework, etc. So when can you start interacting with it?

In Playwright you can interact with the page at any moment. It will automatically wait for the target elements to become [actionable](/docs/actionability).

    // Navigate and click element// Click will auto-wait for the elementawait page.goto('https://example.com');await page.getByText('Example Domain').click();

For the scenario above, Playwright will wait for the text to become visible, will wait for the rest of the actionability checks to pass for that element, and will click it.

Playwright operates as a very fast user - the moment it sees the button, it clicks it. In the general case, you don't need to worry about whether all the resources loaded, etc.

Hydration[â€‹](#hydration "Direct link to Hydration")
---------------------------------------------------

At some point in time, you'll stumble upon a use case where Playwright performs an action, but nothing seemingly happens. Or you enter some text into the input field and it will disappear. The most probable reason behind that is a poor page [hydration](https://en.wikipedia.org/wiki/Hydration_\(web_development\)).

When page is hydrated, first, a static version of the page is sent to the browser. Then the dynamic part is sent and the page becomes "live". As a very fast user, Playwright will start interacting with the page the moment it sees it. And if the button on a page is enabled, but the listeners have not yet been added, Playwright will do its job, but the click won't have any effect.

A simple way to verify if your page suffers from a poor hydration is to open Chrome DevTools, pick "Slow 3G" network emulation in the Network panel and reload the page. Once you see the element of interest, interact with it. You'll see that the button clicks will be ignored and the entered text will be reset by the subsequent page load code. The right fix for this issue is to make sure that all the interactive controls are disabled until after the hydration, when the page is fully functional.

Waiting for navigation[â€‹](#waiting-for-navigation "Direct link to Waiting for navigation")
------------------------------------------------------------------------------------------

Clicking an element could trigger multiple navigations. In these cases, it is recommended to explicitly [page.waitForURL()](/docs/api/class-page#page-wait-for-url) to a specific url.

    await page.getByText('Click me').click();await page.waitForURL('**/login');

Navigation events[â€‹](#navigation-events "Direct link to Navigation events")
---------------------------------------------------------------------------

Playwright splits the process of showing a new document in a page into **navigation** and **loading**.

**Navigation starts** by changing the page URL or by interacting with the page (e.g., clicking a link). The navigation intent may be canceled, for example, on hitting an unresolved DNS address or transformed into a file download.

**Navigation is committed** when the response headers have been parsed and session history is updated. Only after the navigation succeeds (is committed), the page starts **loading** the document.

**Loading** covers getting the remaining response body over the network, parsing, executing the scripts and firing load events:

*   [page.url()](/docs/api/class-page#page-url) is set to the new url
*   document content is loaded over network and parsed
*   [page.on('domcontentloaded')](/docs/api/class-page#page-event-dom-content-loaded) event is fired
*   page executes some scripts and loads resources like stylesheets and images
*   [page.on('load')](/docs/api/class-page#page-event-load) event is fired
*   page executes dynamically loaded scripts

# Network

Network
=======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright provides APIs to **monitor** and **modify** browser network traffic, both HTTP and HTTPS. Any requests that a page does, including [XHRs](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) and [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) requests, can be tracked, modified and handled.

Mock APIs[â€‹](#mock-apis "Direct link to Mock APIs")
---------------------------------------------------

Check out our [API mocking guide](/docs/mock) to learn more on how to

*   mock API requests and never hit the API
*   perform the API request and modify the response
*   use HAR files to mock network requests.

Network mocking[â€‹](#network-mocking "Direct link to Network mocking")
---------------------------------------------------------------------

You don't have to configure anything to mock network requests. Just define a custom [Route](/docs/api/class-route "Route") that mocks network for a browser context.

example.spec.ts

    import { test, expect } from '@playwright/test';test.beforeEach(async ({ context }) => {  // Block any css requests for each test in this file.  await context.route(/.css$/, route => route.abort());});test('loads page without css', async ({ page }) => {  await page.goto('https://playwright.dev');  // ... test goes here});

Alternatively, you can use [page.route()](/docs/api/class-page#page-route) to mock network in a single page.

example.spec.ts

    import { test, expect } from '@playwright/test';test('loads page without images', async ({ page }) => {  // Block png and jpeg images.  await page.route(/(png|jpeg)$/, route => route.abort());  await page.goto('https://playwright.dev');  // ... test goes here});

HTTP Authentication[â€‹](#http-authentication "Direct link to HTTP Authentication")
---------------------------------------------------------------------------------

Perform HTTP Authentication.

*   Test
*   Library

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    httpCredentials: {      username: 'bill',      password: 'pa55w0rd',    }  }});

    const context = await browser.newContext({  httpCredentials: {    username: 'bill',    password: 'pa55w0rd',  },});const page = await context.newPage();await page.goto('https://example.com');

HTTP Proxy[â€‹](#http-proxy "Direct link to HTTP Proxy")
------------------------------------------------------

You can configure pages to load over the HTTP(S) proxy or SOCKSv5. Proxy can be either set globally for the entire browser, or for each browser context individually.

You can optionally specify username and password for HTTP(S) proxy, you can also specify hosts to bypass the [proxy](/docs/api/class-browser#browser-new-context-option-proxy) for.

Here is an example of a global proxy:

*   Test
*   Library

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    proxy: {      server: 'http://myproxy.com:3128',      username: 'usr',      password: 'pwd'    }  }});

    const browser = await chromium.launch({  proxy: {    server: 'http://myproxy.com:3128',    username: 'usr',    password: 'pwd'  }});

Its also possible to specify it per context:

*   Test
*   Library

example.spec.ts

    import { test, expect } from '@playwright/test';test('should use custom proxy on a new context', async ({ browser }) => {  const context = await browser.newContext({    proxy: {      server: 'http://myproxy.com:3128',    }  });  const page = await context.newPage();  await context.close();});

    const browser = await chromium.launch();const context = await browser.newContext({  proxy: { server: 'http://myproxy.com:3128' }});

Network events[â€‹](#network-events "Direct link to Network events")
------------------------------------------------------------------

You can monitor all the [Request](/docs/api/class-request "Request")s and [Response](/docs/api/class-response "Response")s:

    // Subscribe to 'request' and 'response' events.page.on('request', request => console.log('>>', request.method(), request.url()));page.on('response', response => console.log('<<', response.status(), response.url()));await page.goto('https://example.com');

Or wait for a network response after the button click with [page.waitForResponse()](/docs/api/class-page#page-wait-for-response):

    // Use a glob URL pattern. Note no await.const responsePromise = page.waitForResponse('**/api/fetch_data');await page.getByText('Update').click();const response = await responsePromise;

#### Variations[â€‹](#variations "Direct link to Variations")

Wait for [Response](/docs/api/class-response "Response")s with [page.waitForResponse()](/docs/api/class-page#page-wait-for-response)

    // Use a RegExp. Note no await.const responsePromise = page.waitForResponse(/\.jpeg$/);await page.getByText('Update').click();const response = await responsePromise;// Use a predicate taking a Response object. Note no await.const responsePromise = page.waitForResponse(response => response.url().includes(token));await page.getByText('Update').click();const response = await responsePromise;

Handle requests[â€‹](#handle-requests "Direct link to Handle requests")
---------------------------------------------------------------------

    await page.route('**/api/fetch_data', route => route.fulfill({  status: 200,  body: testData,}));await page.goto('https://example.com');

You can mock API endpoints via handling the network requests in your Playwright script.

#### Variations[â€‹](#variations-1 "Direct link to Variations")

Set up route on the entire browser context with [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) or page with [page.route()](/docs/api/class-page#page-route). It will apply to popup windows and opened links.

    await browserContext.route('**/api/login', route => route.fulfill({  status: 200,  body: 'accept',}));await page.goto('https://example.com');

Modify requests[â€‹](#modify-requests "Direct link to Modify requests")
---------------------------------------------------------------------

    // Delete headerawait page.route('**/*', async route => {  const headers = route.request().headers();  delete headers['X-Secret'];  await route.continue({ headers });});// Continue requests as POST.await page.route('**/*', route => route.continue({ method: 'POST' }));

You can continue requests with modifications. Example above removes an HTTP header from the outgoing requests.

Abort requests[â€‹](#abort-requests "Direct link to Abort requests")
------------------------------------------------------------------

You can abort requests using [page.route()](/docs/api/class-page#page-route) and [route.abort()](/docs/api/class-route#route-abort).

    await page.route('**/*.{png,jpg,jpeg}', route => route.abort());// Abort based on the request typeawait page.route('**/*', route => {  return route.request().resourceType() === 'image' ? route.abort() : route.continue();});

Modify responses[â€‹](#modify-responses "Direct link to Modify responses")
------------------------------------------------------------------------

To modify a response use [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") to get the original response and then pass the response to [route.fulfill()](/docs/api/class-route#route-fulfill). You can override individual fields on the response via options:

    await page.route('**/title.html', async route => {  // Fetch original response.  const response = await route.fetch();  // Add a prefix to the title.  let body = await response.text();  body = body.replace('<title>', '<title>My prefix:');  await route.fulfill({    // Pass all fields from the response.    response,    // Override response body.    body,    // Force content type to be html.    headers: {      ...response.headers(),      'content-type': 'text/html'    }  });});

Glob URL patterns[â€‹](#glob-url-patterns "Direct link to Glob URL patterns")
---------------------------------------------------------------------------

Playwright uses simplified glob patterns for URL matching in network interception methods like [page.route()](/docs/api/class-page#page-route) or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response). These patterns support basic wildcards:

1.  Asterisks:
    *   A single `*` matches any characters except `/`
    *   A double `**` matches any characters including `/`
2.  Question mark `?` matches only question mark `?`. If you want to match any character, use `*` instead.
3.  Curly braces `{}` can be used to match a list of options separated by commas `,`
4.  Backslash `\` can be used to escape any of special characters (note to escape backslash itself as `\\`)

Examples:

*   `https://example.com/*.js` matches `https://example.com/file.js` but not `https://example.com/path/file.js`
*   `https://example.com/?page=1` matches `https://example.com/?page=1` but not `https://example.com`
*   `**/*.js` matches both `https://example.com/file.js` and `https://example.com/path/file.js`
*   `**/*.{png,jpg,jpeg}` matches all image requests

Important notes:

*   The glob pattern must match the entire URL, not just a part of it.
*   When using globs for URL matching, consider the full URL structure, including the protocol and path separators.
*   For more complex matching requirements, consider using [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") instead of glob patterns.

WebSockets[â€‹](#websockets "Direct link to WebSockets")
------------------------------------------------------

Playwright supports [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API) inspection, mocking and modifying out of the box. See our [API mocking guide](/docs/mock#mock-websockets) to learn how to mock WebSockets.

Every time a WebSocket is created, the [page.on('websocket')](/docs/api/class-page#page-event-web-socket) event is fired. This event contains the [WebSocket](/docs/api/class-websocket "WebSocket") instance for further web socket frames inspection:

    page.on('websocket', ws => {  console.log(`WebSocket opened: ${ws.url()}>`);  ws.on('framesent', event => console.log(event.payload));  ws.on('framereceived', event => console.log(event.payload));  ws.on('close', () => console.log('WebSocket closed'));});

Missing Network Events and Service Workers[â€‹](#missing-network-events-and-service-workers "Direct link to Missing Network Events and Service Workers")
------------------------------------------------------------------------------------------------------------------------------------------------------

Playwright's built-in [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [page.route()](/docs/api/class-page#page-route) allow your tests to natively route requests and perform mocking and interception.

If you're using Playwright's native [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [page.route()](/docs/api/class-page#page-route), and it appears network events are missing, disable Service Workers by setting [serviceWorkers](/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

It might be that you are using a mock tool such as Mock Service Worker (MSW). While this tool works out of the box for mocking responses, it adds its own Service Worker that takes over the network requests, hence making them invisible to [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [page.route()](/docs/api/class-page#page-route). If you are interested in both network testing and mocking, consider using built-in [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [page.route()](/docs/api/class-page#page-route) for [response mocking](#handle-requests).

If you're interested in not solely using Service Workers for testing and network mocking, but in routing and listening for requests made by Service Workers themselves, please see [this guide](/docs/service-workers).

# Other locators

Other locators
==============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

note

Check out the main [locators guide](/docs/locators) for most common and recommended locators.

In addition to recommended locators like [page.getByRole()](/docs/api/class-page#page-get-by-role) and [page.getByText()](/docs/api/class-page#page-get-by-text), Playwright supports a variety of other locators described in this guide.

CSS locator[â€‹](#css-locator "Direct link to CSS locator")
---------------------------------------------------------

note

We recommend prioritizing [user-visible locators](/docs/locators#quick-guide) like text or accessible role instead of using CSS that is tied to the implementation and could break when the page changes.

Playwright can locate an element by CSS selector.

    await page.locator('css=button').click();

Playwright augments standard CSS selectors in two ways:

*   CSS selectors pierce open shadow DOM.
*   Playwright adds custom pseudo-classes like `:visible`, `:has-text()`, `:has()`, `:is()`, `:nth-match()` and more.

### CSS: matching by text[â€‹](#css-matching-by-text "Direct link to CSS: matching by text")

Playwright include a number of CSS pseudo-classes to match elements by their text content.

*   `article:has-text("Playwright")` - the `:has-text()` matches any element containing specified text somewhere inside, possibly in a child or a descendant element. Matching is case-insensitive, trims whitespace and searches for a substring.
    
    For example, `article:has-text("Playwright")` matches `<article><div>Playwright</div></article>`.
    
    Note that `:has-text()` should be used together with other CSS specifiers, otherwise it will match all the elements containing specified text, including the `<body>`.
    
        // Wrong, will match many elements including <body>await page.locator(':has-text("Playwright")').click();// Correct, only matches the <article> elementawait page.locator('article:has-text("Playwright")').click();
    
*   `#nav-bar :text("Home")` - the `:text()` pseudo-class matches the smallest element containing specified text. Matching is case-insensitive, trims whitespace and searches for a substring.
    
    For example, this will find an element with text "Home" somewhere inside the `#nav-bar` element:
    
        await page.locator('#nav-bar :text("Home")').click();
    
*   `#nav-bar :text-is("Home")` - the `:text-is()` pseudo-class matches the smallest element with exact text. Exact matching is case-sensitive, trims whitespace and searches for the full string.
    
    For example, `:text-is("Log")` does not match `<button>Log in</button>` because `<button>` contains a single text node `"Log in"` that is not equal to `"Log"`. However, `:text-is("Log")` matches `<button> Log <span>in</span></button>`, because `<button>` contains a text node `" Log "`.
    
    Similarly, `:text-is("Download")` will not match `<button>download</button>` because it is case-sensitive.
    

*   `#nav-bar :text-matches("reg?ex", "i")` - the `:text-matches()` pseudo-class matches the smallest element with text content matching the [JavaScript-like regex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp).
    
    For example, `:text-matches("Log\s*in", "i")` matches `<button>Login</button>` and `<button>log IN</button>`.
    

note

Text matching always normalizes whitespace. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

note

Input elements of the type `button` and `submit` are matched by their `value` instead of text content. For example, `:text("Log in")` matches `<input type=button value="Log in">`.

### CSS: matching only visible elements[â€‹](#css-matching-only-visible-elements "Direct link to CSS: matching only visible elements")

Playwright supports the `:visible` pseudo class in CSS selectors. For example, `css=button` matches all the buttons on the page, while `css=button:visible` only matches visible buttons. This is useful to distinguish elements that are very similar but differ in visibility.

Consider a page with two buttons, first invisible and second visible.

    <button style='display: none'>Invisible</button><button>Visible</button>

*   This will find both buttons and throw a [strictness](/docs/locators#strictness) violation error:
    
        await page.locator('button').click();
    
*   This will only find a second button, because it is visible, and then click it.
    
        await page.locator('button:visible').click();
    

### CSS: elements that contain other elements[â€‹](#css-elements-that-contain-other-elements "Direct link to CSS: elements that contain other elements")

The `:has()` pseudo-class is an [experimental CSS pseudo-class](https://developer.mozilla.org/en-US/docs/Web/CSS/:has). It returns an element if any of the selectors passed as parameters relative to the `:scope` of the given element match at least one element.

Following snippet returns text content of an `<article>` element that has a `<div class=promo>` inside.

    await page.locator('article:has(div.promo)').textContent();

### CSS: elements matching one of the conditions[â€‹](#css-elements-matching-one-of-the-conditions "Direct link to CSS: elements matching one of the conditions")

Comma-separated list of CSS selectors will match all elements that can be selected by one of the selectors in that list.

    // Clicks a <button> that has either a "Log in" or "Sign in" text.await page.locator('button:has-text("Log in"), button:has-text("Sign in")').click();

The `:is()` pseudo-class is an [experimental CSS pseudo-class](https://developer.mozilla.org/en-US/docs/Web/CSS/:is) that may be useful for specifying a list of extra conditions on an element.

### CSS: matching elements based on layout[â€‹](#css-matching-elements-based-on-layout "Direct link to CSS: matching elements based on layout")

warning

Layout selectors are deprecated and may be removed in the future. Matching based on layout may produce unexpected results. For example, a different element could be matched when layout changes by one pixel.

We recommend prioritizing [user-visible locators](/docs/locators#quick-guide) instead.

Sometimes, it is hard to come up with a good selector to the target element when it lacks distinctive features. In this case, using Playwright layout CSS pseudo-classes could help. These can be combined with regular CSS to pinpoint one of the multiple choices.

For example, `input:right-of(:text("Password"))` matches an input field that is to the right of text "Password" - useful when the page has multiple inputs that are hard to distinguish between each other.

Note that layout pseudo-classes are useful in addition to something else, like `input`. If you use a layout pseudo-class alone, like `:right-of(:text("Password"))`, most likely you'll get not the input you are looking for, but some empty element in between the text and the target input.

Layout pseudo-classes use [bounding client rect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect) to compute distance and relative position of the elements.

*   `:right-of(div > button)` - Matches elements that are to the right of any element matching the inner selector, at any vertical position.
*   `:left-of(div > button)` - Matches elements that are to the left of any element matching the inner selector, at any vertical position.
*   `:above(div > button)` - Matches elements that are above any of the elements matching the inner selector, at any horizontal position.
*   `:below(div > button)` - Matches elements that are below any of the elements matching the inner selector, at any horizontal position.
*   `:near(div > button)` - Matches elements that are near (within 50 CSS pixels) any of the elements matching the inner selector.

Note that resulting matches are sorted by their distance to the anchor element, so you can use [locator.first()](/docs/api/class-locator#locator-first) to pick the closest one. This is only useful if you have something like a list of similar elements, where the closest is obviously the right one. However, using [locator.first()](/docs/api/class-locator#locator-first) in other cases most likely won't work as expected - it will not target the element you are searching for, but some other element that happens to be the closest like a random empty `<div>`, or an element that is scrolled out and is not currently visible.

    // Fill an input to the right of "Username".await page.locator('input:right-of(:text("Username"))').fill('value');// Click a button near the promo card.await page.locator('button:near(.promo-card)').click();// Click the radio input in the list closest to the "Label 3".await page.locator('[type=radio]:left-of(:text("Label 3"))').first().click();

All layout pseudo-classes support optional maximum pixel distance as the last argument. For example `button:near(:text("Username"), 120)` matches a button that is at most 120 CSS pixels away from the element with the text "Username".

### CSS: pick n-th match from the query result[â€‹](#css-pick-n-th-match-from-the-query-result "Direct link to CSS: pick n-th match from the query result")

note

It is usually possible to distinguish elements by some attribute or text content, which is more resilient to page changes.

Sometimes page contains a number of similar elements, and it is hard to select a particular one. For example:

    <section> <button>Buy</button> </section><article><div> <button>Buy</button> </div></article><div><div> <button>Buy</button> </div></div>

In this case, `:nth-match(:text("Buy"), 3)` will select the third button from the snippet above. Note that index is one-based.

    // Click the third "Buy" buttonawait page.locator(':nth-match(:text("Buy"), 3)').click();

`:nth-match()` is also useful to wait until a specified number of elements appear, using [locator.waitFor()](/docs/api/class-locator#locator-wait-for).

    // Wait until all three buttons are visibleawait page.locator(':nth-match(:text("Buy"), 3)').waitFor();

note

Unlike [`:nth-child()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child), elements do not have to be siblings, they could be anywhere on the page. In the snippet above, all three buttons match `:text("Buy")` selector, and `:nth-match()` selects the third button.

N-th element locator[â€‹](#n-th-element-locator "Direct link to N-th element locator")
------------------------------------------------------------------------------------

You can narrow down query to the n-th match using the `nth=` locator passing a zero-based index.

    // Click first buttonawait page.locator('button').locator('nth=0').click();// Click last buttonawait page.locator('button').locator('nth=-1').click();

Parent element locator[â€‹](#parent-element-locator "Direct link to Parent element locator")
------------------------------------------------------------------------------------------

When you need to target a parent element of some other element, most of the time you should [locator.filter()](/docs/api/class-locator#locator-filter) by the child locator. For example, consider the following DOM structure:

    <li><label>Hello</label></li><li><label>World</label></li>

If you'd like to target the parent `<li>` of a label with text `"Hello"`, using [locator.filter()](/docs/api/class-locator#locator-filter) works best:

    const child = page.getByText('Hello');const parent = page.getByRole('listitem').filter({ has: child });

Alternatively, if you cannot find a suitable locator for the parent element, use `xpath=..`. Note that this method is not as reliable, because any changes to the DOM structure will break your tests. Prefer [locator.filter()](/docs/api/class-locator#locator-filter) when possible.

    const parent = page.getByText('Hello').locator('xpath=..');

React locator[â€‹](#react-locator "Direct link to React locator")
---------------------------------------------------------------

note

React locator is experimental and prefixed with `_`. The functionality might change in future.

React locator allows finding elements by their component name and property values. The syntax is very similar to [CSS attribute selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) and supports all CSS attribute selector operators.

In React locator, component names are transcribed with **CamelCase**.

    await page.locator('_react=BookItem').click();

More examples:

*   match by **component**: `_react=BookItem`
*   match by component and **exact property value**, case-sensitive: `_react=BookItem[author = "Steven King"]`
*   match by property value only, **case-insensitive**: `_react=[author = "steven king" i]`
*   match by component and **truthy property value**: `_react=MyButton[enabled]`
*   match by component and **boolean value**: `_react=MyButton[enabled = false]`
*   match by property **value substring**: `_react=[author *= "King"]`
*   match by component and **multiple properties**: `_react=BookItem[author *= "king" i][year = 1990]`
*   match by **nested** property value: `_react=[some.nested.value = 12]`
*   match by component and property value **prefix**: `_react=BookItem[author ^= "Steven"]`
*   match by component and property value **suffix**: `_react=BookItem[author $= "Steven"]`
*   match by component and **key**: `_react=BookItem[key = '2']`
*   match by property value **regex**: `_react=[author = /Steven(\\s+King)?/i]`

To find React element names in a tree use [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi).

note

React locator supports React 15 and above.

note

React locator, as well as [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi), only work against **unminified** application builds.

Vue locator[â€‹](#vue-locator "Direct link to Vue locator")
---------------------------------------------------------

note

Vue locator is experimental and prefixed with `_`. The functionality might change in future.

Vue locator allows finding elements by their component name and property values. The syntax is very similar to [CSS attribute selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors) and supports all CSS attribute selector operators.

In Vue locator, component names are transcribed with **kebab-case**.

    await page.locator('_vue=book-item').click();

More examples:

*   match by **component**: `_vue=book-item`
*   match by component and **exact property value**, case-sensitive: `_vue=book-item[author = "Steven King"]`
*   match by property value only, **case-insensitive**: `_vue=[author = "steven king" i]`
*   match by component and **truthy property value**: `_vue=my-button[enabled]`
*   match by component and **boolean value**: `_vue=my-button[enabled = false]`
*   match by property **value substring**: `_vue=[author *= "King"]`
*   match by component and **multiple properties**: `_vue=book-item[author *= "king" i][year = 1990]`
*   match by **nested** property value: `_vue=[some.nested.value = 12]`
*   match by component and property value **prefix**: `_vue=book-item[author ^= "Steven"]`
*   match by component and property value **suffix**: `_vue=book-item[author $= "Steven"]`
*   match by property value **regex**: `_vue=[author = /Steven(\\s+King)?/i]`

To find Vue element names in a tree use [Vue DevTools](https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=en).

note

Vue locator supports Vue2 and above.

note

Vue locator, as well as [Vue DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi), only work against **unminified** application builds.

XPath locator[â€‹](#xpath-locator "Direct link to XPath locator")
---------------------------------------------------------------

warning

We recommend prioritizing [user-visible locators](/docs/locators#quick-guide) like text or accessible role instead of using XPath that is tied to the implementation and easily break when the page changes.

XPath locators are equivalent to calling [`Document.evaluate`](https://developer.mozilla.org/en/docs/Web/API/Document/evaluate).

    await page.locator('xpath=//button').click();

note

Any selector string starting with `//` or `..` are assumed to be an xpath selector. For example, Playwright converts `'//html/body'` to `'xpath=//html/body'`.

note

XPath does not pierce shadow roots.

### XPath union[â€‹](#xpath-union "Direct link to XPath union")

Pipe operator (`|`) can be used to specify multiple selectors in XPath. It will match all elements that can be selected by one of the selectors in that list.

    // Waits for either confirmation dialog or load spinner.await page.locator(    `//span[contains(@class, 'spinner__loading')]|//div[@id='confirmation']`).waitFor();

Label to form control retargeting[â€‹](#label-to-form-control-retargeting "Direct link to Label to form control retargeting")
---------------------------------------------------------------------------------------------------------------------------

warning

We recommend [locating by label text](/docs/locators#locate-by-label) instead of relying to label-to-control retargeting.

Targeted input actions in Playwright automatically distinguish between labels and controls, so you can target the label to perform an action on the associated control.

For example, consider the following DOM structure: `<label for="password">Password:</label><input id="password" type="password">`. You can target the label by its "Password" text using [page.getByText()](/docs/api/class-page#page-get-by-text). However, the following actions will be performed on the input instead of the label:

*   [locator.click()](/docs/api/class-locator#locator-click) will click the label and automatically focus the input field;
*   [locator.fill()](/docs/api/class-locator#locator-fill) will fill the input field;
*   [locator.inputValue()](/docs/api/class-locator#locator-input-value) will return the value of the input field;
*   [locator.selectText()](/docs/api/class-locator#locator-select-text) will select text in the input field;
*   [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) will set files for the input field with `type=file`;
*   [locator.selectOption()](/docs/api/class-locator#locator-select-option) will select an option from the select box.

    // Fill the input by targeting the label.await page.getByText('Password').fill('secret');

However, other methods will target the label itself, for example [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) will assert the text content of the label, not the input field.

    // Fill the input by targeting the label.await expect(page.locator('label')).toHaveText('Password');

Legacy text locator[â€‹](#legacy-text-locator "Direct link to Legacy text locator")
---------------------------------------------------------------------------------

warning

We recommend the modern [text locator](/docs/locators#get-by-text) instead.

Legacy text locator matches elements that contain passed text.

    await page.locator('text=Log in').click();

Legacy text locator has a few variations:

*   `text=Log in` - default matching is case-insensitive, trims whitespace and searches for a substring. For example, `text=Log` matches `<button>Log in</button>`.
    
        await page.locator('text=Log in').click();
    
*   `text="Log in"` - text body can be escaped with single or double quotes to search for a text node with exact content after trimming whitespace.
    
    For example, `text="Log"` does not match `<button>Log in</button>` because `<button>` contains a single text node `"Log in"` that is not equal to `"Log"`. However, `text="Log"` matches `<button> Log <span>in</span></button>`, because `<button>` contains a text node `" Log "`. This exact mode implies case-sensitive matching, so `text="Download"` will not match `<button>download</button>`.
    
    Quoted body follows the usual escaping rules, e.g. use `\"` to escape double quote in a double-quoted string: `text="foo\"bar"`.
    
        await page.locator('text="Log in"').click();
    
*   `/Log\s*in/i` - body can be a [JavaScript-like regex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp) wrapped in `/` symbols. For example, `text=/Log\s*in/i` matches `<button>Login</button>` and `<button>log IN</button>`.
    
        await page.locator('text=/Log\\s*in/i').click();
    

note

String selectors starting and ending with a quote (either `"` or `'`) are assumed to be a legacy text locators. For example, `"Log in"` is converted to `text="Log in"` internally.

note

Matching always normalizes whitespace. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

note

Input elements of the type `button` and `submit` are matched by their `value` instead of text content. For example, `text=Log in` matches `<input type=button value="Log in">`.

id, data-testid, data-test-id, data-test selectors[â€‹](#id-data-testid-data-test-id-data-test-selectors "Direct link to id, data-testid, data-test-id, data-test selectors")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

warning

We recommend [locating by test id](/docs/locators#locate-by-test-id) instead.

Playwright supports shorthand for selecting elements using certain attributes. Currently, only the following attributes are supported:

*   `id`
*   `data-testid`
*   `data-test-id`
*   `data-test`

    // Fill an input with the id "username"await page.locator('id=username').fill('value');// Click an element with data-test-id "submit"await page.locator('data-test-id=submit').click();

note

Attribute selectors are not CSS selectors, so anything CSS-specific like `:enabled` is not supported. For more features, use a proper [css](#css-locator) selector, e.g. `css=[data-test="login"]:enabled`.

Chaining selectors[â€‹](#chaining-selectors "Direct link to Chaining selectors")
------------------------------------------------------------------------------

warning

We recommend [chaining locators](/docs/locators#matching-inside-a-locator) instead.

Selectors defined as `engine=body` or in short-form can be combined with the `>>` token, e.g. `selector1 >> selector2 >> selectors3`. When selectors are chained, the next one is queried relative to the previous one's result.

For example,

    css=article >> css=.bar > .baz >> css=span[attr=value]

is equivalent to

    document    .querySelector('article')    .querySelector('.bar > .baz')    .querySelector('span[attr=value]');

If a selector needs to include `>>` in the body, it should be escaped inside a string to not be confused with chaining separator, e.g. `text="some >> text"`.

### Intermediate matches[â€‹](#intermediate-matches "Direct link to Intermediate matches")

warning

We recommend [filtering by another locator](/docs/locators#filter-by-childdescendant) to locate elements that contain other elements.

By default, chained selectors resolve to an element queried by the last selector. A selector can be prefixed with `*` to capture elements that are queried by an intermediate selector.

For example, `css=article >> text=Hello` captures the element with the text `Hello`, and `*css=article >> text=Hello` (note the `*`) captures the `article` element that contains some element with the text `Hello`.

# Pages

Pages
=====

Pages[â€‹](#pages "Direct link to Pages")
---------------------------------------

Each [BrowserContext](/docs/api/class-browsercontext "BrowserContext") can have multiple pages. A [Page](/docs/api/class-page "Page") refers to a single tab or a popup window within a browser context. It should be used to navigate to URLs and interact with the page content.

    // Create a page.const page = await context.newPage();// Navigate explicitly, similar to entering a URL in the browser.await page.goto('http://example.com');// Fill an input.await page.locator('#search').fill('query');// Navigate implicitly by clicking a link.await page.locator('#submit').click();// Expect a new url.console.log(page.url());

Multiple pages[â€‹](#multiple-pages "Direct link to Multiple pages")
------------------------------------------------------------------

Each browser context can host multiple pages (tabs).

*   Each page behaves like a focused, active page. Bringing the page to front is not required.
*   Pages inside a context respect context-level emulation, like viewport sizes, custom network routes or browser locale.

    // Create two pagesconst pageOne = await context.newPage();const pageTwo = await context.newPage();// Get pages of a browser contextconst allPages = context.pages();

Handling new pages[â€‹](#handling-new-pages "Direct link to Handling new pages")
------------------------------------------------------------------------------

The `page` event on browser contexts can be used to get new pages that are created in the context. This can be used to handle new pages opened by `target="_blank"` links.

    // Start waiting for new page before clicking. Note no await.const pagePromise = context.waitForEvent('page');await page.getByText('open new tab').click();const newPage = await pagePromise;// Interact with the new page normally.await newPage.getByRole('button').click();console.log(await newPage.title());

If the action that triggers the new page is unknown, the following pattern can be used.

    // Get all new pages (including popups) in the contextcontext.on('page', async page => {  await page.waitForLoadState();  console.log(await page.title());});

Handling popups[â€‹](#handling-popups "Direct link to Handling popups")
---------------------------------------------------------------------

If the page opens a pop-up (e.g. pages opened by `target="_blank"` links), you can get a reference to it by listening to the `popup` event on the page.

This event is emitted in addition to the `browserContext.on('page')` event, but only for popups relevant to this page.

    // Start waiting for popup before clicking. Note no await.const popupPromise = page.waitForEvent('popup');await page.getByText('open the popup').click();const popup = await popupPromise;// Interact with the new popup normally.await popup.getByRole('button').click();console.log(await popup.title());

If the action that triggers the popup is unknown, the following pattern can be used.

    // Get all popups when they openpage.on('popup', async popup => {  await popup.waitForLoadState();  console.log(await popup.title());});

# Page object models

Page object models
==================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Large test suites can be structured to optimize ease of authoring and maintenance. Page object models are one such approach to structure your test suite.

A page object represents a part of your web application. An e-commerce web application might have a home page, a listings page and a checkout page. Each of them can be represented by page object models.

Page objects **simplify authoring** by creating a higher-level API which suits your application and **simplify maintenance** by capturing element selectors in one place and create reusable code to avoid repetition.

Implementation[â€‹](#implementation "Direct link to Implementation")
------------------------------------------------------------------

We will create a `PlaywrightDevPage` helper class to encapsulate common operations on the `playwright.dev` page. Internally, it will use the `page` object.

*   Test
*   Library

playwright-dev-page.ts

    import { expect, type Locator, type Page } from '@playwright/test';export class PlaywrightDevPage {  readonly page: Page;  readonly getStartedLink: Locator;  readonly gettingStartedHeader: Locator;  readonly pomLink: Locator;  readonly tocList: Locator;  constructor(page: Page) {    this.page = page;    this.getStartedLink = page.locator('a', { hasText: 'Get started' });    this.gettingStartedHeader = page.locator('h1', { hasText: 'Installation' });    this.pomLink = page.locator('li', {      hasText: 'Guides',    }).locator('a', {      hasText: 'Page Object Model',    });    this.tocList = page.locator('article div.markdown ul > li > a');  }  async goto() {    await this.page.goto('https://playwright.dev');  }  async getStarted() {    await this.getStartedLink.first().click();    await expect(this.gettingStartedHeader).toBeVisible();  }  async pageObjectModel() {    await this.getStarted();    await this.pomLink.click();  }}

models/PlaywrightDevPage.js

    class PlaywrightDevPage {  /**   * @param {import('playwright').Page} page   */  constructor(page) {    this.page = page;    this.getStartedLink = page.locator('a', { hasText: 'Get started' });    this.gettingStartedHeader = page.locator('h1', { hasText: 'Installation' });    this.pomLink = page.locator('li', {      hasText: 'Playwright Test',    }).locator('a', {      hasText: 'Page Object Model',    });    this.tocList = page.locator('article div.markdown ul > li > a');  }  async getStarted() {    await this.getStartedLink.first().click();    await expect(this.gettingStartedHeader).toBeVisible();  }  async pageObjectModel() {    await this.getStarted();    await this.pomLink.click();  }}module.exports = { PlaywrightDevPage };

Now we can use the `PlaywrightDevPage` class in our tests.

*   Test
*   Library

example.spec.ts

    import { test, expect } from '@playwright/test';import { PlaywrightDevPage } from './playwright-dev-page';test('getting started should contain table of contents', async ({ page }) => {  const playwrightDev = new PlaywrightDevPage(page);  await playwrightDev.goto();  await playwrightDev.getStarted();  await expect(playwrightDev.tocList).toHaveText([    `How to install Playwright`,    `What's Installed`,    `How to run the example test`,    `How to open the HTML test report`,    `Write tests using web first assertions, page fixtures and locators`,    `Run single test, multiple tests, headed mode`,    `Generate tests with Codegen`,    `See a trace of your tests`  ]);});test('should show Page Object Model article', async ({ page }) => {  const playwrightDev = new PlaywrightDevPage(page);  await playwrightDev.goto();  await playwrightDev.pageObjectModel();  await expect(page.locator('article')).toContainText('Page Object Model is a common pattern');});

example.spec.js

    const { PlaywrightDevPage } = require('./playwright-dev-page');// In the testconst page = await browser.newPage();await playwrightDev.goto();await playwrightDev.getStarted();await expect(playwrightDev.tocList).toHaveText([  `How to install Playwright`,  `What's Installed`,  `How to run the example test`,  `How to open the HTML test report`,  `Write tests using web first assertions, page fixtures and locators`,  `Run single test, multiple tests, headed mode`,  `Generate tests with Codegen`,  `See a trace of your tests`]);

# Screenshots

Screenshots
===========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Here is a quick way to capture a screenshot and save it into a file:

    await page.screenshot({ path: 'screenshot.png' });

[Screenshots API](/docs/api/class-page#page-screenshot) accepts many parameters for image format, clip area, quality, etc. Make sure to check them out.

Full page screenshots[â€‹](#full-page-screenshots "Direct link to Full page screenshots")
---------------------------------------------------------------------------------------

Full page screenshot is a screenshot of a full scrollable page, as if you had a very tall screen and the page could fit it entirely.

    await page.screenshot({ path: 'screenshot.png', fullPage: true });

Capture into buffer[â€‹](#capture-into-buffer "Direct link to Capture into buffer")
---------------------------------------------------------------------------------

Rather than writing into a file, you can get a buffer with the image and post-process it or pass it to a third party pixel diff facility.

    const buffer = await page.screenshot();console.log(buffer.toString('base64'));

Element screenshot[â€‹](#element-screenshot "Direct link to Element screenshot")
------------------------------------------------------------------------------

Sometimes it is useful to take a screenshot of a single element.

    await page.locator('.header').screenshot({ path: 'screenshot.png' });

# Service Workers

Service Workers
===============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

warning

Service workers are only supported on Chromium-based browsers.

note

If you're looking to do general network mocking, routing, and interception, please see the [Network Guide](/docs/network) first. Playwright provides built-in APIs for this use case that don't require the information below. However, if you're interested in requests made by Service Workers themselves, please read below.

[Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) provide a browser-native method of handling requests made by a page with the native [Fetch API (`fetch`)](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) along with other network-requested assets (like scripts, css, and images).

They can act as a **network proxy** between the page and the external network to perform caching logic or can provide users with an offline experience if the Service Worker adds a [FetchEvent](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent#examples) listener.

Many sites that use Service Workers simply use them as a transparent optimization technique. While users might notice a faster experience, the app's implementation is unaware of their existence. Running the app with or without Service Workers enabled appears functionally equivalent.

How to Disable Service Workers[â€‹](#how-to-disable-service-workers "Direct link to How to Disable Service Workers")
------------------------------------------------------------------------------------------------------------------

Playwright allows to disable Service Workers during testing. This makes tests more predictable and performant. However, if your actual page uses a Service Worker, the behavior might be different.

To disable service workers, set [testOptions.serviceWorkers](/docs/api/class-testoptions#test-options-service-workers) to `'block'`.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    serviceWorkers: 'allow'  },});

Accessing Service Workers and Waiting for Activation[â€‹](#accessing-service-workers-and-waiting-for-activation "Direct link to Accessing Service Workers and Waiting for Activation")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

You can use [browserContext.serviceWorkers()](/docs/api/class-browsercontext#browser-context-service-workers) to list the Service [Worker](/docs/api/class-worker "Worker")s, or specifically watch for the Service [Worker](/docs/api/class-worker "Worker") if you anticipate a page will trigger its [registration](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register):

    const serviceWorkerPromise = context.waitForEvent('serviceworker');await page.goto('/example-with-a-service-worker.html');const serviceworker = await serviceWorkerPromise;

[browserContext.on('serviceworker')](/docs/api/class-browsercontext#browser-context-event-service-worker) event is fired _**before**_ the Service Worker has taken control over the page, so _**before**_ evaluating in the worker with [worker.evaluate()](/docs/api/class-worker#worker-evaluate) you should wait on its activation.

There are more idiomatic methods of waiting for a Service Worker to be activated, but the following is an implementation agnostic method:

    await page.evaluate(async () => {  const registration = await window.navigator.serviceWorker.getRegistration();  if (registration.active?.state === 'activated')    return;  await new Promise(resolve => {    window.navigator.serviceWorker.addEventListener('controllerchange', resolve);  });});

Network Events and Routing[â€‹](#network-events-and-routing "Direct link to Network Events and Routing")
------------------------------------------------------------------------------------------------------

Any network request made by the **Service Worker** is reported through the [BrowserContext](/docs/api/class-browsercontext "BrowserContext") object:

*   [browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request), [browserContext.on('requestfinished')](/docs/api/class-browsercontext#browser-context-event-request-finished), [browserContext.on('response')](/docs/api/class-browsercontext#browser-context-event-response) and [browserContext.on('requestfailed')](/docs/api/class-browsercontext#browser-context-event-request-failed) are fired
*   [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) sees the request
*   [request.serviceWorker()](/docs/api/class-request#request-service-worker) will be set to the Service [Worker](/docs/api/class-worker "Worker") instance, and [request.frame()](/docs/api/class-request#request-frame) will **throw**

Additionally, for any network request made by the **Page**, method [response.fromServiceWorker()](/docs/api/class-response#response-from-service-worker) return `true` when the request was handled a Service Worker's fetch handler.

Consider a simple service worker that fetches every request made by the page:

transparent-service-worker.js

    self.addEventListener('fetch', event => {  // actually make the request  const responsePromise = fetch(event.request);  // send it back to the page  event.respondWith(responsePromise);});self.addEventListener('activate', event => {  event.waitUntil(clients.claim());});

If `index.html` registers this service worker, and then fetches `data.json`, the following Request/Response events would be emitted (along with the corresponding network lifecycle events):

Event

Owner

URL

Routed

[response.fromServiceWorker()](/docs/api/class-response#response-from-service-worker)

[browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request)

[Frame](/docs/api/class-frame "Frame")

index.html

Yes

[page.on('request')](/docs/api/class-page#page-event-request)

[Frame](/docs/api/class-frame "Frame")

index.html

Yes

[browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request)

Service [Worker](/docs/api/class-worker "Worker")

transparent-service-worker.js

Yes

[browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request)

Service [Worker](/docs/api/class-worker "Worker")

data.json

Yes

[browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request)

[Frame](/docs/api/class-frame "Frame")

data.json

Yes

[page.on('request')](/docs/api/class-page#page-event-request)

[Frame](/docs/api/class-frame "Frame")

data.json

Yes

Since the example Service Worker just acts a basic transparent "proxy":

*   There's 2 [browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request) events for `data.json`; one [Frame](/docs/api/class-frame "Frame")\-owned, the other Service [Worker](/docs/api/class-worker "Worker")\-owned.
*   Only the Service [Worker](/docs/api/class-worker "Worker")\-owned request for the resource was routable via [browserContext.route()](/docs/api/class-browsercontext#browser-context-route); the [Frame](/docs/api/class-frame "Frame")\-owned events for `data.json` are not routeable, as they would not have even had the possibility to hit the external network since the Service Worker has a fetch handler registered.

caution

It's important to note: calling [request.frame()](/docs/api/class-request#request-frame) or [response.frame()](/docs/api/class-response#response-frame) will **throw** an exception, if called on a [Request](/docs/api/class-request "Request")/[Response](/docs/api/class-response "Response") that has a non-null [request.serviceWorker()](/docs/api/class-request#request-service-worker).

Routing Service Worker Requests Only[â€‹](#routing-service-worker-requests-only "Direct link to Routing Service Worker Requests Only")
------------------------------------------------------------------------------------------------------------------------------------

    await context.route('**', async route => {  if (route.request().serviceWorker()) {    // NB: calling route.request().frame() here would THROW    await route.fulfill({      contentType: 'text/plain',      status: 200,      body: 'from sw',    });  } else {    await route.continue();  }});

Known Limitations[â€‹](#known-limitations "Direct link to Known Limitations")
---------------------------------------------------------------------------

Requests for updated Service Worker main script code currently cannot be routed ([https://github.com/microsoft/playwright/issues/14711](https://github.com/microsoft/playwright/issues/14711)).

# Snapshot testing

Snapshot testing
================

Overview[â€‹](#overview "Direct link to Overview")
------------------------------------------------

With Playwright's Snapshot testing you can assert the accessibility tree of a page against a predefined snapshot template.

    await page.goto('https://playwright.dev/');await expect(page.getByRole('banner')).toMatchAriaSnapshot(`  - banner:    - heading /Playwright enables reliable end-to-end/ [level=1]    - link "Get started"    - link "Star microsoft/playwright on GitHub"    - link /[\\d]+k\\+ stargazers on GitHub/`);

Assertion testing vs Snapshot testing[â€‹](#assertion-testing-vs-snapshot-testing "Direct link to Assertion testing vs Snapshot testing")
---------------------------------------------------------------------------------------------------------------------------------------

Snapshot testing and assertion testing serve different purposes in test automation:

### Assertion testing[â€‹](#assertion-testing "Direct link to Assertion testing")

Assertion testing is a targeted approach where you assert specific values or conditions about elements or components. For instance, with Playwright, [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) verifies that an element contains the expected text, and [expect(locator).toHaveValue()](/docs/api/class-locatorassertions#locator-assertions-to-have-value) confirms that an input field has the expected value. Assertion tests are specific and generally check the current state of an element or property against an expected, predefined state. They work well for predictable, single-value checks but are limited in scope when testing the broader structure or variations.

**Advantages**

*   **Clarity**: The intent of the test is explicit and easy to understand.
*   **Specificity**: Tests focus on particular aspects of functionality, making them more robust against unrelated changes.
*   **Debugging**: Failures provide targeted feedback, pointing directly to the problematic aspect.

**Disadvantages**

*   **Verbose for complex outputs**: Writing assertions for complex data structures or large outputs can be cumbersome and error-prone.
*   **Maintenance overhead**: As code evolves, manually updating assertions can be time-consuming.

### Snapshot testing[â€‹](#snapshot-testing "Direct link to Snapshot testing")

Snapshot testing captures a â€œsnapshotâ€ or representation of the entire state of an element, component, or data at a given moment, which is then saved for future comparisons. When re-running tests, the current state is compared to the snapshot, and if there are differences, the test fails. This approach is especially useful for complex or dynamic structures, where manually asserting each detail would be too time-consuming. Snapshot testing is broader and more holistic than assertion testing, allowing you to track more complex changes over time.

**Advantages**

*   **Simplifies complex outputs**: For example, testing a UI component's rendered output can be tedious with traditional assertions. Snapshots capture the entire output for easy comparison.
*   **Quick Feedback loop**: Developers can easily spot unintended changes in the output.
*   **Encourages consistency**: Helps maintain consistent output as code evolves.

**Disadvantages**

*   **Over-Reliance**: It can be tempting to accept changes to snapshots without fully understanding them, potentially hiding bugs.
*   **Granularity**: Large snapshots may be hard to interpret when differences arise, especially if minor changes affect large portions of the output.
*   **Suitability**: Not ideal for highly dynamic content where outputs change frequently or unpredictably.

### When to use[â€‹](#when-to-use "Direct link to When to use")

*   **Snapshot testing** is ideal for:
    *   UI testing of whole pages and components.
    *   Broad structural checks for complex UI components.
    *   Regression testing for outputs that rarely change structure.
*   **Assertion testing** is ideal for:
    *   Core logic validation.
    *   Computed value testing.
    *   Fine-grained tests requiring precise conditions.

By combining snapshot testing for broad, structural checks and assertion testing for specific functionality, you can achieve a well-rounded testing strategy.

Aria snapshots[â€‹](#aria-snapshots "Direct link to Aria snapshots")
------------------------------------------------------------------

In Playwright, aria snapshots provide a YAML representation of the accessibility tree of a page. These snapshots can be stored and compared later to verify if the page structure remains consistent or meets defined expectations.

The YAML format describes the hierarchical structure of accessible elements on the page, detailing **roles**, **attributes**, **values**, and **text content**. The structure follows a tree-like syntax, where each node represents an accessible element, and indentation indicates nested elements.

Each accessible element in the tree is represented as a YAML node:

    - role "name" [attribute=value]

*   **role**: Specifies the ARIA or HTML role of the element (e.g., `heading`, `list`, `listitem`, `button`).
*   **"name"**: Accessible name of the element. Quoted strings indicate exact values, `/patterns/` are used for regular expression.
*   **\[attribute=value\]**: Attributes and values, in square brackets, represent specific ARIA attributes, such as `checked`, `disabled`, `expanded`, `level`, `pressed`, or `selected`.

These values are derived from ARIA attributes or calculated based on HTML semantics. To inspect the accessibility tree structure of a page, use the [Chrome DevTools Accessibility Tab](https://developer.chrome.com/docs/devtools/accessibility/reference#tab).

Snapshot matching[â€‹](#snapshot-matching "Direct link to Snapshot matching")
---------------------------------------------------------------------------

The [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot) assertion method in Playwright compares the accessible structure of the locator scope with a predefined aria snapshot template, helping validate the page's state against testing requirements.

For the following DOM:

    <h1>title</h1>

You can match it using the following snapshot template:

    await expect(page.locator('body')).toMatchAriaSnapshot(`  - heading "title"`);

When matching, the snapshot template is compared to the current accessibility tree of the page:

*   If the tree structure matches the template, the test passes; otherwise, it fails, indicating a mismatch between expected and actual accessibility states.
*   The comparison is case-sensitive and collapses whitespace, so indentation and line breaks are ignored.
*   The comparison is order-sensitive, meaning the order of elements in the snapshot template must match the order in the page's accessibility tree.

### Partial matching[â€‹](#partial-matching "Direct link to Partial matching")

You can perform partial matches on nodes by omitting attributes or accessible names, enabling verification of specific parts of the accessibility tree without requiring exact matches. This flexibility is helpful for dynamic or irrelevant attributes.

    <button>Submit</button>

_aria snapshot_

    - button

In this example, the button role is matched, but the accessible name ("Submit") is not specified, allowing the test to pass regardless of the button's label.

* * *

For elements with ARIA attributes like `checked` or `disabled`, omitting these attributes allows partial matching, focusing solely on role and hierarchy.

    <input type="checkbox" checked>

_aria snapshot for partial match_

    - checkbox

In this partial match, the `checked` attribute is ignored, so the test will pass regardless of the checkbox state.

* * *

Similarly, you can partially match children in lists or groups by omitting specific list items or nested elements.

    <ul>  <li>Feature A</li>  <li>Feature B</li>  <li>Feature C</li></ul>

_aria snapshot for partial match_

    - list  - listitem: Feature B

Partial matches let you create flexible snapshot tests that verify essential page structure without enforcing specific content or attributes.

### Strict matching[â€‹](#strict-matching "Direct link to Strict matching")

By default, a template containing the subset of children will be matched:

    <ul>  <li>Feature A</li>  <li>Feature B</li>  <li>Feature C</li></ul>

_aria snapshot for partial match_

    - list  - listitem: Feature B

The `/children` property can be used to control how child elements are matched:

*   `contain` (default): Matches if all specified children are present in order
*   `equal`: Matches if the children exactly match the specified list in order
*   `deep-equal`: Matches if the children exactly match the specified list in order, including nested children

    <ul>  <li>Feature A</li>  <li>Feature B</li>  <li>Feature C</li></ul>

_aria snapshot will fail due to Feature C not being in the template_

    - list  - /children: equal  - listitem: Feature A  - listitem: Feature B

### Matching with regular expressions[â€‹](#matching-with-regular-expressions "Direct link to Matching with regular expressions")

Regular expressions allow flexible matching for elements with dynamic or variable text. Accessible names and text can support regex patterns.

    <h1>Issues 12</h1>

_aria snapshot with regular expression_

    - heading /Issues \d+/

Generating snapshots[â€‹](#generating-snapshots "Direct link to Generating snapshots")
------------------------------------------------------------------------------------

Creating aria snapshots in Playwright helps ensure and maintain your application's structure. You can generate snapshots in various ways depending on your testing setup and workflow.

### Generating snapshots with the Playwright code generator[â€‹](#generating-snapshots-with-the-playwright-code-generator "Direct link to Generating snapshots with the Playwright code generator")

If you're using Playwright's [Code Generator](/docs/codegen), generating aria snapshots is streamlined with its interactive interface:

*   **"Assert snapshot" Action**: In the code generator, you can use the "Assert snapshot" action to automatically create a snapshot assertion for the selected elements. This is a quick way to capture the aria snapshot as part of your recorded test flow.
*   **"Aria snapshot" Tab**: The "Aria snapshot" tab within the code generator interface visually represents the aria snapshot for a selected locator, letting you explore, inspect, and verify element roles, attributes, and accessible names to aid snapshot creation and review.

### Updating snapshots with `@playwright/test` and the `--update-snapshots` flag[â€‹](#updating-snapshots-with-playwrighttest-and-the---update-snapshots-flag "Direct link to updating-snapshots-with-playwrighttest-and-the---update-snapshots-flag")

When using the Playwright test runner (`@playwright/test`), you can automatically update snapshots with the `--update-snapshots` flag, `-u` for short.

Running tests with the `--update-snapshots` flag will update snapshots that did not match. Matching snapshots will not be updated.

    npx playwright test --update-snapshots

Updating snapshots is useful when application structure changes require new snapshots as a baseline. Note that Playwright will wait for the maximum expect timeout specified in the test runner configuration to ensure the page is settled before taking the snapshot. It might be necessary to adjust the `--timeout` if the test hits the timeout while generating snapshots.

#### Empty template for snapshot generation[â€‹](#empty-template-for-snapshot-generation "Direct link to Empty template for snapshot generation")

Passing an empty string as the template in an assertion generates a snapshot on-the-fly:

    await expect(locator).toMatchAriaSnapshot('');

Note that Playwright will wait for the maximum expect timeout specified in the test runner configuration to ensure the page is settled before taking the snapshot. It might be necessary to adjust the `--timeout` if the test hits the timeout while generating snapshots.

#### Snapshot patch files[â€‹](#snapshot-patch-files "Direct link to Snapshot patch files")

When updating snapshots, Playwright creates patch files that capture differences. These patch files can be reviewed, applied, and committed to source control, allowing teams to track structural changes over time and ensure updates are consistent with application requirements.

The way source code is updated can be changed using the `--update-source-method` flag. There are several options available:

*   **"patch"** (default): Generates a unified diff file that can be applied to the source code using `git apply`.
*   **"3way"**: Generates merge conflict markers in your source code, allowing you to choose whether to accept changes.
*   **"overwrite"**: Overwrites the source code with the new snapshot values.

    npx playwright test --update-snapshots --update-source-method=3way

#### Snapshots as separate files[â€‹](#snapshots-as-separate-files "Direct link to Snapshots as separate files")

To store your snapshots in a separate file, use the `toMatchAriaSnapshot` method with the `name` option, specifying a `.aria.yml` file extension.

    await expect(page.getByRole('main')).toMatchAriaSnapshot({ name: 'main.aria.yml' });

By default, snapshots from a test file `example.spec.ts` are placed in the `example.spec.ts-snapshots` directory. As snapshots should be the same across browsers, only one snapshot is saved even if testing with multiple browsers. Should you wish, you can customize the [snapshot path template](/docs/api/class-testconfig#test-config-snapshot-path-template) using the following configuration:

    export default defineConfig({  expect: {    toMatchAriaSnapshot: {      pathTemplate: '__snapshots__/{testFilePath}/{arg}{ext}',    },  },});

### Using the `Locator.ariaSnapshot` method[â€‹](#using-the-locatorariasnapshot-method "Direct link to using-the-locatorariasnapshot-method")

The [locator.ariaSnapshot()](/docs/api/class-locator#locator-aria-snapshot) method allows you to programmatically create a YAML representation of accessible elements within a locator's scope, especially helpful for generating snapshots dynamically during test execution.

**Example**:

    const snapshot = await page.locator('body').ariaSnapshot();console.log(snapshot);

This command outputs the aria snapshot within the specified locator's scope in YAML format, which you can validate or store as needed.

Accessibility tree examples[â€‹](#accessibility-tree-examples "Direct link to Accessibility tree examples")
---------------------------------------------------------------------------------------------------------

### Headings with level attributes[â€‹](#headings-with-level-attributes "Direct link to Headings with level attributes")

Headings can include a `level` attribute indicating their heading level.

    <h1>Title</h1><h2>Subtitle</h2>

_aria snapshot_

    - heading "Title" [level=1]- heading "Subtitle" [level=2]

### Text nodes[â€‹](#text-nodes "Direct link to Text nodes")

Standalone or descriptive text elements appear as text nodes.

    <div>Sample accessible name</div>

_aria snapshot_

    - text: Sample accessible name

### Inline multiline text[â€‹](#inline-multiline-text "Direct link to Inline multiline text")

Multiline text, such as paragraphs, is normalized in the aria snapshot.

    <p>Line 1<br>Line 2</p>

_aria snapshot_

    - paragraph: Line 1 Line 2

### Links[â€‹](#links "Direct link to Links")

Links display their text or composed content from pseudo-elements.

    <a href="#more-info">Read more about Accessibility</a>

_aria snapshot_

    - link "Read more about Accessibility"

### Text boxes[â€‹](#text-boxes "Direct link to Text boxes")

Input elements of type `text` show their `value` attribute content.

    <input type="text" value="Enter your name">

_aria snapshot_

    - textbox: Enter your name

### Lists with items[â€‹](#lists-with-items "Direct link to Lists with items")

Ordered and unordered lists include their list items.

    <ul aria-label="Main Features">  <li>Feature 1</li>  <li>Feature 2</li></ul>

_aria snapshot_

    - list "Main Features":  - listitem: Feature 1  - listitem: Feature 2

### Grouped elements[â€‹](#grouped-elements "Direct link to Grouped elements")

Groups capture nested elements, such as `<details>` elements with summary content.

    <details>  <summary>Summary</summary>  <p>Detail content here</p></details>

_aria snapshot_

    - group: Summary

### Attributes and states[â€‹](#attributes-and-states "Direct link to Attributes and states")

Commonly used ARIA attributes, like `checked`, `disabled`, `expanded`, `level`, `pressed`, and `selected`, represent control states.

#### Checkbox with `checked` attribute[â€‹](#checkbox-with-checked-attribute "Direct link to checkbox-with-checked-attribute")

    <input type="checkbox" checked>

_aria snapshot_

    - checkbox [checked]

#### Button with `pressed` attribute[â€‹](#button-with-pressed-attribute "Direct link to button-with-pressed-attribute")

    <button aria-pressed="true">Toggle</button>

_aria snapshot_

    - button "Toggle" [pressed=true]

# Test generator

Test generator
==============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright comes with the ability to generate tests for you as you perform actions in the browser and is a great way to quickly get started with testing. Playwright will look at your page and figure out the best locator, prioritizing [role, text and test id locators](/docs/locators). If the generator finds multiple elements matching the locator, it will improve the locator to make it resilient that uniquely identify the target element.

Generate tests in VS Code[â€‹](#generate-tests-in-vs-code "Direct link to Generate tests in VS Code")
---------------------------------------------------------------------------------------------------

Install the VS Code extension and generate tests directly from VS Code. The extension is available on the [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright). Check out our guide on [getting started with VS Code](/docs/getting-started-vscode).

### Record a New Test[â€‹](#record-a-new-test "Direct link to Record a New Test")

To record a test click on the **Record new** button from the Testing sidebar. This will create a `test-1.spec.ts` file as well as open up a browser window.

![record new in vs code](https://user-images.githubusercontent.com/13063165/220961665-615d0ab8-3f0b-439c-ad0b-0424d9aa154b.png)

In the browser go to the URL you wish to test and start clicking around to record your user actions.

![generating user actions](https://github.com/microsoft/playwright/assets/13063165/1d4c8f37-8325-4816-a665-d0e95e63f509)

Playwright will record your actions and generate the test code directly in VS Code. You can also generate assertions by choosing one of the icons in the toolbar and then clicking on an element on the page to assert against. The following assertions can be generated:

*   `'assert visibility'` to assert that an element is visible
*   `'assert text'` to assert that an element contains specific text
*   `'assert value'` to assert that an element has a specific value

![generating assertions](https://github.com/microsoft/playwright/assets/13063165/d131eb35-b2ca-4bf4-a8ac-88b6e40dcf07)

Once you are done recording click the **cancel** button or close the browser window. You can then inspect your `test-1.spec.ts` file and manually improve it if needed.

![code from a generated test](https://github.com/microsoft/playwright/assets/13063165/2ba4c212-4713-460a-b054-6dc6b67a9a7c)

### Record at Cursor[â€‹](#record-at-cursor "Direct link to Record at Cursor")

To record from a specific point in your test move your cursor to where you want to record more actions and then click the **Record at cursor** button from the Testing sidebar. If your browser window is not already open then first run the test with 'Show browser' checked and then click the **Record at cursor** button.

![record at cursor in vs code](https://github.com/microsoft/playwright/assets/13063165/77948ab8-92a2-435f-9833-0944da5ae664)

In the browser window start performing the actions you want to record.

![add feed the dog to todo app](https://user-images.githubusercontent.com/13063165/220960770-6435cec7-1723-42a8-8c1f-8244e2d800c7.png)

In the test file in VS Code you will see your new generated actions added to your test at the cursor position.

![code from a generated test](https://github.com/microsoft/playwright/assets/13063165/4f4bb34e-9cda-41fe-bf65-8d8016d84c7f)

### Generating locators[â€‹](#generating-locators "Direct link to Generating locators")

You can generate locators with the test generator.

*   Click on the **Pick locator** button from the testing sidebar and then hover over elements in the browser window to see the [locator](/docs/locators) highlighted underneath each element.
*   Click the element you require and it will now show up in the **Pick locator** box in VS Code.
*   Press Enter on your keyboard to copy the locator into the clipboard and then paste anywhere in your code. Or press 'escape' if you want to cancel.

![Pick locators in VS code](https://user-images.githubusercontent.com/13063165/220958368-95b03620-3c9b-40a8-be74-01c96ba03cad.png)

Generate tests with the Playwright Inspector[â€‹](#generate-tests-with-the-playwright-inspector "Direct link to Generate tests with the Playwright Inspector")
------------------------------------------------------------------------------------------------------------------------------------------------------------

When running the `codegen` command two windows will be opened, a browser window where you interact with the website you wish to test and the Playwright Inspector window where you can record your tests and then copy them into your editor.

### Running Codegen[â€‹](#running-codegen "Direct link to Running Codegen")

Use the `codegen` command to run the test generator followed by the URL of the website you want to generate tests for. The URL is optional and you can always run the command without it and then add the URL directly into the browser window instead.

    npx playwright codegen demo.playwright.dev/todomvc

### Recording a test[â€‹](#recording-a-test "Direct link to Recording a test")

Run the `codegen` command and perform actions in the browser window. Playwright will generate the code for the user interactions which you can see in the Playwright Inspector window. Once you have finished recording your test stop the recording and press the **copy** button to copy your generated test into your editor.

With the test generator you can record:

*   Actions like click or fill by simply interacting with the page
*   Assertions by clicking on one of the icons in the toolbar and then clicking on an element on the page to assert against. You can choose:
    *   `'assert visibility'` to assert that an element is visible
    *   `'assert text'` to assert that an element contains specific text
    *   `'assert value'` to assert that an element has a specific value

![Recording a test](https://github.com/microsoft/playwright/assets/13063165/34a79ea1-639e-4cb3-8115-bfdc78e3d34d)

###### [â€‹](#-1 "Direct link to -1")

When you have finished interacting with the page, press the **record** button to stop the recording and use the **copy** button to copy the generated code to your editor.

Use the **clear** button to clear the code to start recording again. Once finished, close the Playwright inspector window or stop the terminal command.

### Generating locators[â€‹](#generating-locators-1 "Direct link to Generating locators")

You can generate [locators](/docs/locators) with the test generator.

*   Press the `'Record'` button to stop the recording and the `'Pick Locator'` button will appear.
*   Click on the `'Pick Locator'` button and then hover over elements in the browser window to see the locator highlighted underneath each element.
*   To choose a locator, click on the element you would like to locate and the code for that locator will appear in the field next to the Pick Locator button.
*   You can then edit the locator in this field to fine tune it or use the copy button to copy it and paste it into your code.

###### [â€‹](#-2 "Direct link to -2")

![picking a locator](https://github.com/microsoft/playwright/assets/13063165/2c8a12e2-4e98-4fdd-af92-1d73ae696d86)

Emulation[â€‹](#emulation "Direct link to Emulation")
---------------------------------------------------

You can use the test generator to generate tests using emulation so as to generate a test for a specific viewport, device, color scheme, as well as emulate the geolocation, language or timezone. The test generator can also generate a test while preserving authenticated state.

### Emulate viewport size[â€‹](#emulate-viewport-size "Direct link to Emulate viewport size")

Playwright opens a browser window with its viewport set to a specific width and height and is not responsive as tests need to be run under the same conditions. Use the `--viewport` option to generate tests with a different viewport size.

    npx playwright codegen --viewport-size="800,600" playwright.dev

###### [â€‹](#-3 "Direct link to -3")

![Codegen generating code for tests for playwright.dev website with a specific viewport js](https://user-images.githubusercontent.com/13063165/220402029-f90d1c9f-d740-4c0f-acc8-95235ee83f85.png)

### Emulate devices[â€‹](#emulate-devices "Direct link to Emulate devices")

Record scripts and tests while emulating a mobile device using the `--device` option which sets the viewport size and user agent among others.

    npx playwright codegen --device="iPhone 13" playwright.dev

###### [â€‹](#-4 "Direct link to -4")

![Codegen generating code for tests for playwright.dev website emulated for iPhone 13 js](https://user-images.githubusercontent.com/13063165/220921482-dc4f5532-9dce-40bd-8a28-e0d87d26a601.png)

### Emulate color scheme[â€‹](#emulate-color-scheme "Direct link to Emulate color scheme")

Record scripts and tests while emulating the color scheme with the `--color-scheme` option.

    npx playwright codegen --color-scheme=dark playwright.dev

###### [â€‹](#-5 "Direct link to -5")

![Codegen generating code for tests for playwright.dev website in dark mode js](https://user-images.githubusercontent.com/13063165/220930273-f3a25bae-64dd-4bbb-99ed-1e97c0cb1ebf.png)

### Emulate geolocation, language and timezone[â€‹](#emulate-geolocation-language-and-timezone "Direct link to Emulate geolocation, language and timezone")

Record scripts and tests while emulating timezone, language & location using the `--timezone`, `--geolocation` and `--lang` options. Once the page opens:

1.  Accept the cookies
2.  On the top right, click on the locate me button to see geolocation in action.

    npx playwright codegen --timezone="Europe/Rome" --geolocation="41.890221,12.492348" --lang="it-IT" bing.com/maps

###### [â€‹](#-6 "Direct link to -6")

![Codegen generating code for tests for bing maps showing timezone, geolocation as Rome, Italy and in Italian language](https://user-images.githubusercontent.com/13063165/220931996-d3144421-8d3b-4f9f-896c-769c01566c01.png)

### Preserve authenticated state[â€‹](#preserve-authenticated-state "Direct link to Preserve authenticated state")

Run `codegen` with `--save-storage` to save [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) and [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) data at the end of the session. This is useful to separately record an authentication step and reuse it later when recording more tests.

    npx playwright codegen github.com/microsoft/playwright --save-storage=auth.json

###### [â€‹](#-7 "Direct link to -7")

![github page before logging in js](https://user-images.githubusercontent.com/13063165/220929062-88dfe567-0c6d-4e49-b9f9-74ae241fb8c7.png)

#### Login[â€‹](#login "Direct link to Login")

After performing authentication and closing the browser, `auth.json` will contain the storage state which you can then reuse in your tests.

![login to GitHub screen](https://user-images.githubusercontent.com/13063165/220561688-04b2b984-4ba6-4446-8b0a-8058876e2a02.png)

Make sure you only use the `auth.json` locally as it contains sensitive information. Add it to your `.gitignore` or delete it once you have finished generating your tests.

#### Load authenticated state[â€‹](#load-authenticated-state "Direct link to Load authenticated state")

Run with `--load-storage` to consume the previously loaded storage from the `auth.json`. This way, all [cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies), [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) and [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) data will be restored, bringing most web apps to the authenticated state without the need to login again. This means you can continue generating tests from the logged in state.

    npx playwright codegen --load-storage=auth.json github.com/microsoft/playwright

###### [â€‹](#-8 "Direct link to -8")

![github signed in showing use of load storage js](https://user-images.githubusercontent.com/13063165/220927873-9e55fdda-2def-45c1-9a1b-bcc851885f96.png)

#### Use existing userDataDir[â€‹](#use-existing-userdatadir "Direct link to Use existing userDataDir")

Run `codegen` with `--user-data-dir` to set a fixed [user data directory](https://playwright.dev/docs/api/class-browsertype#browser-type-launch-persistent-context-option-user-data-dir) for the browser session. If you create a custom browser user data directory, codegen will use this existing browser profile and have access to any authentication state present in that profile.

warning

[As of Chrome 136, the default user data directory cannot be accessed via automated tooling](https://developer.chrome.com/blog/remote-debugging-port), such as Playwright. You must create a separate user data directory for use in testing.

    npx playwright codegen --user-data-dir=/path/to/your/browser/data/ github.com/microsoft/playwright

Record using custom setup[â€‹](#record-using-custom-setup "Direct link to Record using custom setup")
---------------------------------------------------------------------------------------------------

If you would like to use codegen in some non-standard setup (for example, use [browserContext.route()](/docs/api/class-browsercontext#browser-context-route)), it is possible to call [page.pause()](/docs/api/class-page#page-pause) that will open a separate window with codegen controls.

    const { chromium } = require('@playwright/test');(async () => {  // Make sure to run headed.  const browser = await chromium.launch({ headless: false });  // Setup context however you like.  const context = await browser.newContext({ /* pass any options */ });  await context.route('**/*', route => route.continue());  // Pause the page, and start recording manually.  const page = await context.newPage();  await page.pause();})();

# Touch events (legacy)

Touch events (legacy)
=====================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Web applications that handle legacy [touch events](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events) to respond to gestures like swipe, pinch, and tap can be tested by manually dispatching [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)s to the page. The examples below demonstrate how to use [locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event) and pass [Touch](https://developer.mozilla.org/en-US/docs/Web/API/Touch) points as arguments.

Note that [locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event) does not set [`Event.isTrusted`](https://developer.mozilla.org/en-US/docs/Web/API/Event/isTrusted) property. If your web page relies on it, make sure to disable `isTrusted` check during the test.

### Emulating pan gesture[â€‹](#emulating-pan-gesture "Direct link to Emulating pan gesture")

In the example below, we emulate pan gesture that is expected to move the map. The app under test only uses `clientX/clientY` coordinates of the touch point, so we initialize just that. In a more complex scenario you may need to also set `pageX/pageY/screenX/screenY`, if your app needs them.

    import { test, expect, devices, type Locator } from '@playwright/test';test.use({ ...devices['Pixel 7'] });async function pan(locator: Locator, deltaX?: number, deltaY?: number, steps?: number) {  const { centerX, centerY } = await locator.evaluate((target: HTMLElement) => {    const bounds = target.getBoundingClientRect();    const centerX = bounds.left + bounds.width / 2;    const centerY = bounds.top + bounds.height / 2;    return { centerX, centerY };  });  // Providing only clientX and clientY as the app only cares about those.  const touches = [{    identifier: 0,    clientX: centerX,    clientY: centerY,  }];  await locator.dispatchEvent('touchstart',      { touches, changedTouches: touches, targetTouches: touches });  steps = steps ?? 5;  deltaX = deltaX ?? 0;  deltaY = deltaY ?? 0;  for (let i = 1; i <= steps; i++) {    const touches = [{      identifier: 0,      clientX: centerX + deltaX * i / steps,      clientY: centerY + deltaY * i / steps,    }];    await locator.dispatchEvent('touchmove',        { touches, changedTouches: touches, targetTouches: touches });  }  await locator.dispatchEvent('touchend');}test(`pan gesture to move the map`, async ({ page }) => {  await page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z',      { waitUntil: 'commit' });  await page.getByRole('button', { name: 'Keep using web' }).click();  await expect(page.getByRole('button', { name: 'Keep using web' })).not.toBeVisible();  // Get the map element.  const met = page.locator('[data-test-id="met"]');  for (let i = 0; i < 5; i++)    await pan(met, 200, 100);  // Ensure the map has been moved.  await expect(met).toHaveScreenshot();});

### Emulating pinch gesture[â€‹](#emulating-pinch-gesture "Direct link to Emulating pinch gesture")

In the example below, we emulate pinch gesture, i.e. two touch points moving closer to each other. It is expected to zoom out the map. The app under test only uses `clientX/clientY` coordinates of touch points, so we initialize just that. In a more complex scenario you may need to also set `pageX/pageY/screenX/screenY`, if your app needs them.

    import { test, expect, devices, type Locator } from '@playwright/test';test.use({ ...devices['Pixel 7'] });async function pinch(locator: Locator,  arg: { deltaX?: number, deltaY?: number, steps?: number, direction?: 'in' | 'out' }) {  const { centerX, centerY } = await locator.evaluate((target: HTMLElement) => {    const bounds = target.getBoundingClientRect();    const centerX = bounds.left + bounds.width / 2;    const centerY = bounds.top + bounds.height / 2;    return { centerX, centerY };  });  const deltaX = arg.deltaX ?? 50;  const steps = arg.steps ?? 5;  const stepDeltaX = deltaX / (steps + 1);  // Two touch points equally distant from the center of the element.  const touches = [    {      identifier: 0,      clientX: centerX - (arg.direction === 'in' ? deltaX : stepDeltaX),      clientY: centerY,    },    {      identifier: 1,      clientX: centerX + (arg.direction === 'in' ? deltaX : stepDeltaX),      clientY: centerY,    },  ];  await locator.dispatchEvent('touchstart',      { touches, changedTouches: touches, targetTouches: touches });  // Move the touch points towards or away from each other.  for (let i = 1; i <= steps; i++) {    const offset = (arg.direction === 'in' ? (deltaX - i * stepDeltaX) : (stepDeltaX * (i + 1)));    const touches = [      {        identifier: 0,        clientX: centerX - offset,        clientY: centerY,      },      {        identifier: 0,        clientX: centerX + offset,        clientY: centerY,      },    ];    await locator.dispatchEvent('touchmove',        { touches, changedTouches: touches, targetTouches: touches });  }  await locator.dispatchEvent('touchend', { touches: [], changedTouches: [], targetTouches: [] });}test(`pinch in gesture to zoom out the map`, async ({ page }) => {  await page.goto('https://www.google.com/maps/place/@37.4117722,-122.0713234,15z',      { waitUntil: 'commit' });  await page.getByRole('button', { name: 'Keep using web' }).click();  await expect(page.getByRole('button', { name: 'Keep using web' })).not.toBeVisible();  // Get the map element.  const met = page.locator('[data-test-id="met"]');  for (let i = 0; i < 5; i++)    await pinch(met, { deltaX: 40, direction: 'in' });  // Ensure the map has been zoomed out.  await expect(met).toHaveScreenshot();});

# Trace viewer

Trace viewer
============

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Trace Viewer is a GUI tool that helps you explore recorded Playwright traces after the script has run. Traces are a great way for debugging your tests when they fail on CI. You can open traces [locally](#opening-the-trace) or in your browser on [trace.playwright.dev](https://trace.playwright.dev).

Opening Trace Viewer[â€‹](#opening-trace-viewer "Direct link to Opening Trace Viewer")
------------------------------------------------------------------------------------

You can open a saved trace using either the Playwright CLI or in the browser at [trace.playwright.dev](https://trace.playwright.dev). Make sure to add the full path to where your `trace.zip` file is located.

    npx playwright show-trace path/to/trace.zip

### Using [trace.playwright.dev](https://trace.playwright.dev)[â€‹](#using-traceplaywrightdev "Direct link to using-traceplaywrightdev")

[trace.playwright.dev](https://trace.playwright.dev) is a statically hosted variant of the Trace Viewer. You can upload a trace file using drag and drop or via the `Select file` button.

Trace Viewer loads the trace entirely in your browser and does not transmit any data externally.

![Drop Playwright Trace to load](https://user-images.githubusercontent.com/13063165/194577918-b4d45726-2692-4093-8a28-9e73552617ef.png)

### Viewing remote traces[â€‹](#viewing-remote-traces "Direct link to Viewing remote traces")

You can open remote traces directly using its URL. This makes it easy to view the remote trace without having to manually download the file from CI runs, for example.

    npx playwright show-trace https://example.com/trace.zip

When using [trace.playwright.dev](https://trace.playwright.dev), you can also pass the URL of your uploaded trace at some accessible storage (e.g. inside your CI) as a query parameter. CORS (Cross-Origin Resource Sharing) rules might apply.

    https://trace.playwright.dev/?trace=https://demo.playwright.dev/reports/todomvc/data/e6099cadf79aa753d5500aa9508f9d1dbd87b5ee.zip

Recording a trace[â€‹](#recording-a-trace "Direct link to Recording a trace")
---------------------------------------------------------------------------

### Tracing locally[â€‹](#tracing-locally "Direct link to Tracing locally")

To record a trace during development mode set the `--trace` flag to `on` when running your tests. You can also use [UI Mode](/docs/test-ui-mode) for a better developer experience, as it traces each test automatically.

    npx playwright test --trace on

You can then open the HTML report and click on the trace icon to open the trace.

    npx playwright show-report

### Tracing on CI[â€‹](#tracing-on-ci "Direct link to Tracing on CI")

Traces should be run on continuous integration on the first retry of a failed test by setting the `trace: 'on-first-retry'` option in the test configuration file. This will produce a `trace.zip` file for each test that was retried.

*   Test
*   Library

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  retries: 1,  use: {    trace: 'on-first-retry',  },});

    const browser = await chromium.launch();const context = await browser.newContext();// Start tracing before creating / navigating a page.await context.tracing.start({ screenshots: true, snapshots: true });const page = await context.newPage();await page.goto('https://playwright.dev');// Stop tracing and export it into a zip archive.await context.tracing.stop({ path: 'trace.zip' });

Available options to record a trace:

*   `'on-first-retry'` - Record a trace only when retrying a test for the first time.
*   `'on-all-retries'` - Record traces for all test retries.
*   `'off'` - Do not record a trace.
*   `'on'` - Record a trace for each test. (not recommended as it's performance heavy)
*   `'retain-on-failure'` - Record a trace for each test, but remove it from successful test runs.

You can also use `trace: 'retain-on-failure'` if you do not enable retries but still want traces for failed tests.

There are more granular options available, see [testOptions.trace](/docs/api/class-testoptions#test-options-trace).

If you are not using Playwright as a Test Runner, use the [browserContext.tracing](/docs/api/class-browsercontext#browser-context-tracing) API instead.

Trace Viewer features[â€‹](#trace-viewer-features "Direct link to Trace Viewer features")
---------------------------------------------------------------------------------------

### Actions[â€‹](#actions "Direct link to Actions")

In the Actions tab you can see what locator was used for every action and how long each one took to run. Hover over each action of your test and visually see the change in the DOM snapshot. Go back and forward in time and click an action to inspect and debug. Use the Before and After tabs to visually see what happened before and after the action.

![actions tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/948b65cd-f0fd-4c7f-8e53-2c632b5a07f1)

**Selecting each action reveals:**

*   Action snapshots
*   Action log
*   Source code location

### Screenshots[â€‹](#screenshots "Direct link to Screenshots")

When tracing with the [screenshots](/docs/api/class-tracing#tracing-start-option-screenshots) option turned on (default), each trace records a screencast and renders it as a film strip. You can hover over the film strip to see a magnified image of for each action and state which helps you easily find the action you want to inspect.

Double click on an action to see the time range for that action. You can use the slider in the timeline to increase the actions selected and these will be shown in the Actions tab and all console logs and network logs will be filtered to only show the logs for the actions selected.

![timeline view in trace viewer](https://github.com/microsoft/playwright/assets/13063165/b04a7d75-54bb-4ab2-9e30-e76f6f74a2c8)

### Snapshots[â€‹](#snapshots "Direct link to Snapshots")

When tracing with the [snapshots](/docs/api/class-tracing#tracing-start-option-snapshots) option turned on (default), Playwright captures a set of complete DOM snapshots for each action. Depending on the type of the action, it will capture:

Type

Description

Before

A snapshot at the time action is called.

Action

A snapshot at the moment of the performed input. This type of snapshot is especially useful when exploring where exactly Playwright clicked.

After

A snapshot after the action.

Here is what the typical Action snapshot looks like:

![action tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/7168d549-eb0a-4964-9c93-483f03711fa9)

Notice how it highlights both, the DOM Node as well as the exact click position.

### Source[â€‹](#source "Direct link to Source")

When you click on an action in the sidebar, the line of code for that action is highlighted in the source panel.

![showing source code tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/daa8845d-c250-4923-aa7a-5d040da9adc5)

### Call[â€‹](#call "Direct link to Call")

The call tab shows you information about the action such as the time it took, what locator was used, if in strict mode and what key was used.

![showing call tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/95498580-f9dd-4932-a123-c37fe7cfc3c2)

### Log[â€‹](#log "Direct link to Log")

See a full log of your test to better understand what Playwright is doing behind the scenes such as scrolling into view, waiting for element to be visible, enabled and stable and performing actions such as click, fill, press etc.

![showing log of tests in trace viewer](https://github.com/microsoft/playwright/assets/13063165/de621461-3bab-4140-b39d-9f02d6672dbf)

### Errors[â€‹](#errors "Direct link to Errors")

If your test fails you will see the error messages for each test in the Errors tab. The timeline will also show a red line highlighting where the error occurred. You can also click on the source tab to see on which line of the source code the error is.

![showing errors in trace viewer](https://github.com/microsoft/playwright/assets/13063165/e9ef77b3-05d1-4df2-852c-981023723d34)

### Console[â€‹](#console "Direct link to Console")

See console logs from the browser as well as from your test. Different icons are displayed to show you if the console log came from the browser or from the test file.

![showing log of tests in trace viewer](https://github.com/microsoft/playwright/assets/13063165/4107c08d-1eaf-421c-bdd4-9dd2aa641d4a)

Double click on an action from your test in the actions sidebar. This will filter the console to only show the logs that were made during that action. Click the _Show all_ button to see all console logs again.

Use the timeline to filter actions, by clicking a start point and dragging to an ending point. The console tab will also be filtered to only show the logs that were made during the actions selected.

### Network[â€‹](#network "Direct link to Network")

The Network tab shows you all the network requests that were made during your test. You can sort by different types of requests, status code, method, request, content type, duration and size. Click on a request to see more information about it such as the request headers, response headers, request body and response body.

![network requests tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/0a3d1671-8ccd-4f7a-a844-35f5eb37f236)

Double click on an action from your test in the actions sidebar. This will filter the network requests to only show the requests that were made during that action. Click the _Show all_ button to see all network requests again.

Use the timeline to filter actions, by clicking a start point and dragging to an ending point. The network tab will also be filtered to only show the network requests that were made during the actions selected.

### Metadata[â€‹](#metadata "Direct link to Metadata")

Next to the Actions tab you will find the Metadata tab which will show you more information on your test such as the Browser, viewport size, test duration and more.

![meta data in trace viewer](https://github.com/microsoft/playwright/assets/13063165/82ab3d33-1ec9-4b8a-9cf2-30a6e2d59091)

### Attachments[â€‹](#attachments "Direct link to Attachments")

The "Attachments" tab allows you to explore attachments. If you're doing [visual regression testing](/docs/test-snapshots), you'll be able to compare screenshots by examining the image diff, the actual image and the expected image. When you click on the expected image you can use the slider to slide one image over the other so you can easily see the differences in your screenshots.

![attachments tab in trace viewer](https://github.com/microsoft/playwright/assets/13063165/4386178a-5808-4fa8-9436-315350a23b04)

# Videos

Videos
======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

With Playwright you can record videos for your tests.

Record video[â€‹](#record-video "Direct link to Record video")
------------------------------------------------------------

Playwright Test can record videos for your tests, controlled by the `video` option in your Playwright config. By default videos are off.

*   `'off'` - Do not record video.
*   `'on'` - Record video for each test.
*   `'retain-on-failure'` - Record video for each test, but remove all videos from successful test runs.
*   `'on-first-retry'` - Record video only when retrying a test for the first time.

Video files will appear in the test output directory, typically `test-results`. See [testOptions.video](/docs/api/class-testoptions#test-options-video) for advanced video configuration.

Videos are saved upon [browser context](/docs/browser-contexts) closure at the end of a test. If you create a browser context manually, make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close).

*   Test
*   Library

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    video: 'on-first-retry',  },});

    const context = await browser.newContext({ recordVideo: { dir: 'videos/' } });// Make sure to await close, so that videos are saved.await context.close();

You can also specify video size. The video size defaults to the viewport size scaled down to fit 800x800. The video of the viewport is placed in the top-left corner of the output video, scaled down to fit if necessary. You may need to set the viewport size to match your desired video size.

*   Test
*   Library

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    video: {      mode: 'on-first-retry',      size: { width: 640, height: 480 }    }  },});

    const context = await browser.newContext({  recordVideo: {    dir: 'videos/',    size: { width: 640, height: 480 },  }});

For multi-page scenarios, you can access the video file associated with the page via the [page.video()](/docs/api/class-page#page-video).

    const path = await page.video().path();

note

Note that the video is only available after the page or browser context is closed.

# Visual comparisons

Visual comparisons
==================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright Test includes the ability to produce and visually compare screenshots using `await expect(page).toHaveScreenshot()`. On first execution, Playwright test will generate reference screenshots. Subsequent runs will compare against the reference.

example.spec.ts

    import { test, expect } from '@playwright/test';test('example test', async ({ page }) => {  await page.goto('https://playwright.dev');  await expect(page).toHaveScreenshot();});

warning

Browser rendering can vary based on the host OS, version, settings, hardware, power source (battery vs. power adapter), headless mode, and other factors. For consistent screenshots, run tests in the same environment where the baseline screenshots were generated.

Generating screenshots[â€‹](#generating-screenshots "Direct link to Generating screenshots")
------------------------------------------------------------------------------------------

When you run above for the first time, test runner will say:

    Error: A snapshot doesn't exist at example.spec.ts-snapshots/example-test-1-chromium-darwin.png, writing actual.

That's because there was no golden file yet. This method took a bunch of screenshots until two consecutive screenshots matched, and saved the last screenshot to file system. It is now ready to be added to the repository.

The name of the folder with the golden expectations starts with the name of your test file:

    drwxr-xr-x  5 user  group  160 Jun  4 11:46 .drwxr-xr-x  6 user  group  192 Jun  4 11:45 ..-rw-r--r--  1 user  group  231 Jun  4 11:16 example.spec.tsdrwxr-xr-x  3 user  group   96 Jun  4 11:46 example.spec.ts-snapshots

The snapshot name `example-test-1-chromium-darwin.png` consists of a few parts:

*   `example-test-1.png` - an auto-generated name of the snapshot. Alternatively you can specify snapshot name as the first argument of the `toHaveScreenshot()` method:
    
        await expect(page).toHaveScreenshot('landing.png');
    
*   `chromium-darwin` - the browser name and the platform. Screenshots differ between browsers and platforms due to different rendering, fonts and more, so you will need different snapshots for them. If you use multiple projects in your [configuration file](/docs/test-configuration), project name will be used instead of `chromium`.
    

The snapshot name and path can be configured with [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) in the playwright config.

> Note that `toHaveScreenshot()` also accepts an array of path segments to the snapshot file such as `expect().toHaveScreenshot(['relative', 'path', 'to', 'snapshot.png'])`. However, this path must stay within the snapshots directory for each test file (i.e. `a.spec.js-snapshots`), otherwise it will throw.

Updating screenshots[â€‹](#updating-screenshots "Direct link to Updating screenshots")
------------------------------------------------------------------------------------

Sometimes you need to update the reference screenshot, for example when the page has changed. Do this with the `--update-snapshots` flag.

    npx playwright test --update-snapshots

Options[â€‹](#options "Direct link to Options")
---------------------------------------------

### maxDiffPixels[â€‹](#maxdiffpixels "Direct link to maxDiffPixels")

Playwright Test uses the [pixelmatch](https://github.com/mapbox/pixelmatch) library. You can [pass various options](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) to modify its behavior:

example.spec.ts

    import { test, expect } from '@playwright/test';test('example test', async ({ page }) => {  await page.goto('https://playwright.dev');  await expect(page).toHaveScreenshot({ maxDiffPixels: 100 });});

If you'd like to share the default value among all the tests in the project, you can specify it in the playwright config, either globally or per project:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  expect: {    toHaveScreenshot: { maxDiffPixels: 100 },  },});

### stylePath[â€‹](#stylepath "Direct link to stylePath")

You can apply a custom stylesheet to your page while taking screenshot. This allows filtering out dynamic or volatile elements, hence improving the screenshot determinism.

screenshot.css

    iframe {  visibility: hidden;}

example.spec.ts

    import { test, expect } from '@playwright/test';test('example test', async ({ page }) => {  await page.goto('https://playwright.dev');  await expect(page).toHaveScreenshot({ stylePath: path.join(__dirname, 'screenshot.css') });});

If you'd like to share the default value among all the tests in the project, you can specify it in the playwright config, either globally or per project:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  expect: {    toHaveScreenshot: {      stylePath: './screenshot.css'    },  },});

Non-image snapshots[â€‹](#non-image-snapshots "Direct link to Non-image snapshots")
---------------------------------------------------------------------------------

Apart from screenshots, you can use `expect(value).toMatchSnapshot(snapshotName)` to compare text or arbitrary binary data. Playwright Test auto-detects the content type and uses the appropriate comparison algorithm.

Here we compare text content against the reference.

example.spec.ts

    import { test, expect } from '@playwright/test';test('example test', async ({ page }) => {  await page.goto('https://playwright.dev');  expect(await page.textContent('.hero__title')).toMatchSnapshot('hero.txt');});

Snapshots are stored next to the test file, in a separate directory. For example, `my.spec.ts` file will produce and store snapshots in the `my.spec.ts-snapshots` directory. You should commit this directory to your version control (e.g. `git`), and review any changes to it.

# WebView2

WebView2
========

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

The following will explain how to use Playwright with [Microsoft Edge WebView2](https://docs.microsoft.com/en-us/microsoft-edge/webview2/). WebView2 is a WinForms control, which will use Microsoft Edge under the hood to render web content. It is a part of the Microsoft Edge browser and is available on Windows 10 and Windows 11. Playwright can be used to automate WebView2 applications and can be used to test web content in WebView2. For connecting to WebView2, Playwright uses [browserType.connectOverCDP()](/docs/api/class-browsertype#browser-type-connect-over-cdp) which connects to it via the Chrome DevTools Protocol (CDP).

Overview[â€‹](#overview "Direct link to Overview")
------------------------------------------------

A WebView2 control can be instructed to listen to incoming CDP connections by setting either the `WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS` environment variable with `--remote-debugging-port=9222` or calling [EnsureCoreWebView2Async](https://docs.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.wpf.webview2.ensurecorewebview2async?view=webview2-dotnet-1.0.1343.22) with the `--remote-debugging-port=9222` argument. This will start the WebView2 process with the Chrome DevTools Protocol enabled which allows the automation by Playwright. 9222 is an example port in this case, but any other unused port can be used as well.

    await this.webView.EnsureCoreWebView2Async(await CoreWebView2Environment.CreateAsync(null, null, new CoreWebView2EnvironmentOptions(){  AdditionalBrowserArguments = "--remote-debugging-port=9222",})).ConfigureAwait(false);

Once your application with the WebView2 control is running, you can connect to it via Playwright:

    const browser = await playwright.chromium.connectOverCDP('http://localhost:9222');const context = browser.contexts()[0];const page = context.pages()[0];

To ensure that the WebView2 control is ready, you can wait for the [`CoreWebView2InitializationCompleted`](https://learn.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.wpf.webview2.corewebview2initializationcompleted?view=webview2-dotnet-1.0.1343.22) event:

    this.webView.CoreWebView2InitializationCompleted += (_, e) =>{    if (e.IsSuccess)    {        Console.WriteLine("WebView2 initialized");    }};

Writing and running tests[â€‹](#writing-and-running-tests "Direct link to Writing and running tests")
---------------------------------------------------------------------------------------------------

By default, the WebView2 control will use the same user data directory for all instances. This means that if you run multiple tests in parallel, they will interfere with each other. To avoid this, you should set the `WEBVIEW2_USER_DATA_FOLDER` environment variable (or use [WebView2.EnsureCoreWebView2Async Method](https://docs.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.wpf.webview2.ensurecorewebview2async?view=webview2-dotnet-1.0.1343.22)) to a different folder for each test. This will make sure that each test runs in its own user data directory.

Using the following, Playwright will run your WebView2 application as a sub-process, assign a unique user data directory to it and provide the [Page](/docs/api/class-page "Page") instance to your test:

webView2Test.ts

    import { test as base } from '@playwright/test';import fs from 'fs';import os from 'os';import path from 'path';import childProcess from 'child_process';const EXECUTABLE_PATH = path.join(    __dirname,    '../../webview2-app/bin/Debug/net8.0-windows/webview2.exe',);export const test = base.extend({  browser: async ({ playwright }, use, testInfo) => {    const cdpPort = 10000 + testInfo.workerIndex;    // Make sure that the executable exists and is executable    fs.accessSync(EXECUTABLE_PATH, fs.constants.X_OK);    const userDataDir = path.join(        fs.realpathSync.native(os.tmpdir()),        `playwright-webview2-tests/user-data-dir-${testInfo.workerIndex}`,    );    const webView2Process = childProcess.spawn(EXECUTABLE_PATH, [], {      shell: true,      env: {        ...process.env,        WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS: `--remote-debugging-port=${cdpPort}`,        WEBVIEW2_USER_DATA_FOLDER: userDataDir,      }    });    await new Promise<void>(resolve => webView2Process.stdout.on('data', data => {      if (data.toString().includes('WebView2 initialized'))        resolve();    }));    const browser = await playwright.chromium.connectOverCDP(`http://127.0.0.1:${cdpPort}`);    await use(browser);    await browser.close();    childProcess.execSync(`taskkill /pid ${webView2Process.pid} /T /F`);    fs.rmdirSync(userDataDir, { recursive: true });  },  context: async ({ browser }, use) => {    const context = browser.contexts()[0];    await use(context);  },  page: async ({ context }, use) => {    const page = context.pages()[0];    await use(page);  },});export { expect } from '@playwright/test';

example.spec.ts

    import { test, expect } from './webView2Test';test('test WebView2', async ({ page }) => {  await page.goto('https://playwright.dev');  const getStarted = page.getByText('Get Started');  await expect(getStarted).toBeVisible();});

Debugging[â€‹](#debugging "Direct link to Debugging")
---------------------------------------------------

Inside your webview2 control, you can just right-click to open the context menu and select "Inspect" to open the DevTools or press F12. You can also use the [WebView2.CoreWebView2.OpenDevToolsWindow](https://learn.microsoft.com/en-us/dotnet/api/microsoft.web.webview2.core.corewebview2.opendevtoolswindow?view=webview2-dotnet-1.0.1462.37) method to open the DevTools programmatically.

For debugging tests, see the Playwright [Debugging guide](/docs/debug).

# Migrating from Protractor

Migrating from Protractor
=========================

Migration Principles[â€‹](#migration-principles "Direct link to Migration Principles")
------------------------------------------------------------------------------------

*   No need for "webdriver-manager" / Selenium.
*   Protractorâ€™s [ElementFinder](https://www.protractortest.org/#/api?view=ElementFinder) â‡„ [Playwright Test Locator](/docs/api/class-locator)
*   Protractorâ€™s [`waitForAngular`](https://www.protractortest.org/#/api?view=ProtractorBrowser.prototype.waitForAngular) â‡„ Playwright Test [auto-waiting](/docs/actionability)
*   Donâ€™t forget to await in Playwright Test

Cheat Sheet[â€‹](#cheat-sheet "Direct link to Cheat Sheet")
---------------------------------------------------------

Protractor

Playwright Test

`element(by.buttonText('...'))`

`page.locator('button, input[type="button"], input[type="submit"] >> text="..."')`

`element(by.css('...'))`

`page.locator('...')`

`element(by.cssContainingText('..1..', '..2..'))`

`page.locator('..1.. >> text=..2..')`

`element(by.id('...'))`

`page.locator('#...')`

`element(by.model('...'))`

`page.locator('[ng-model="..."]')`

`element(by.repeater('...'))`

`page.locator('[ng-repeat="..."]')`

`element(by.xpath('...'))`

`page.locator('xpath=...')`

`element.all`

`page.locator`

`browser.get(url)`

`await page.goto(url)`

`browser.getCurrentUrl()`

`page.url()`

Example[â€‹](#example "Direct link to Example")
---------------------------------------------

Protractor:

    describe('angularjs homepage todo list', function() {  it('should add a todo', function() {    browser.get('https://angularjs.org');    element(by.model('todoList.todoText')).sendKeys('first test');    element(by.css('[value="add"]')).click();    const todoList = element.all(by.repeater('todo in todoList.todos'));    expect(todoList.count()).toEqual(3);    expect(todoList.get(2).getText()).toEqual('first test');    // You wrote your first test, cross it off the list    todoList.get(2).element(by.css('input')).click();    const completedAmount = element.all(by.css('.done-true'));    expect(completedAmount.count()).toEqual(2);  });});

Line-by-line migration to Playwright Test:

    const { test, expect } = require('@playwright/test'); // 1test.describe('angularjs homepage todo list', () => {  test('should add a todo', async ({ page }) => { // 2, 3    await page.goto('https://angularjs.org'); // 4    await page.locator('[ng-model="todoList.todoText"]').fill('first test');    await page.locator('[value="add"]').click();    const todoList = page.locator('[ng-repeat="todo in todoList.todos"]'); // 5    await expect(todoList).toHaveCount(3);    await expect(todoList.nth(2)).toHaveText('first test', {      useInnerText: true,    });    // You wrote your first test, cross it off the list    await todoList.nth(2).getByRole('textbox').click();    const completedAmount = page.locator('.done-true');    await expect(completedAmount).toHaveCount(2);  });});

Migration highlights (see inline comments in the Playwright Test code snippet):

1.  Each Playwright Test file has explicit import of the `test` and `expect` functions
2.  Test function is marked with `async`
3.  Playwright Test is given a `page` as one of its parameters. This is one of the many [useful fixtures](/docs/api/class-fixtures) in Playwright Test.
4.  Almost all Playwright calls are prefixed with `await`
5.  Locator creation with [page.locator()](/docs/api/class-page#page-locator) is one of the few methods that is sync.

Polyfilling `waitForAngular`[â€‹](#polyfilling-waitforangular "Direct link to polyfilling-waitforangular")
--------------------------------------------------------------------------------------------------------

Playwright Test has built-in [auto-waiting](/docs/actionability) that makes protractor's [`waitForAngular`](https://www.protractortest.org/#/api?view=ProtractorBrowser.prototype.waitForAngular) unneeded in general case.

However, it might come handy in some edge cases. Here's how to polyfill `waitForAngular` function in Playwright Test:

1.  Make sure you have protractor installed in your package.json
    
2.  Polyfill function
    
        async function waitForAngular(page) {  const clientSideScripts = require('protractor/built/clientsidescripts.js');  async function executeScriptAsync(page, script, ...scriptArgs) {    await page.evaluate(`      new Promise((resolve, reject) => {        const callback = (errMessage) => {          if (errMessage)            reject(new Error(errMessage));          else            resolve();        };        (function() {${script}}).apply(null, [...${JSON.stringify(scriptArgs)}, callback]);      })    `);  }  await executeScriptAsync(page, clientSideScripts.waitForAngular, '');}
    
    If you don't want to keep a version protractor around, you can also use this simpler approach using this function (only works for Angular 2+):
    
        async function waitForAngular(page) {  await page.evaluate(async () => {    // @ts-expect-error    if (window.getAllAngularTestabilities) {      // @ts-expect-error      await Promise.all(window.getAllAngularTestabilities().map(whenStable));      // @ts-expect-error      async function whenStable(testability) {        return new Promise(res => testability.whenStable(res));      }    }  });}
    
3.  Polyfill usage
    
        const page = await context.newPage();await page.goto('https://example.org');await waitForAngular(page);
    

Playwright Test Super Powers[â€‹](#playwright-test-super-powers "Direct link to Playwright Test Super Powers")
------------------------------------------------------------------------------------------------------------

Once you're on Playwright Test, you get a lot!

*   Full zero-configuration TypeScript support
*   Run tests across **all web engines** (Chrome, Firefox, Safari) on **any popular operating system** (Windows, macOS, Ubuntu)
*   Full support for multiple origins, [(i)frames](/docs/api/class-frame), [tabs and contexts](/docs/pages)
*   Run tests in parallel across multiple browsers
*   Built-in test [artifact collection](/docs/test-use-options#recording-options)

You also get all these âœ¨ awesome tools âœ¨ that come bundled with Playwright Test:

*   [Playwright Inspector](/docs/debug)
*   [Playwright Test Code generation](/docs/codegen-intro)
*   [Playwright Tracing](/docs/trace-viewer) for post-mortem debugging

Further Reading[â€‹](#further-reading "Direct link to Further Reading")
---------------------------------------------------------------------

Learn more about Playwright Test runner:

*   [Getting Started](/docs/intro)
*   [Fixtures](/docs/test-fixtures)
*   [Locators](/docs/locators)
*   [Assertions](/docs/test-assertions)
*   [Auto-waiting](/docs/actionability)

# Migrating from Puppeteer

Migrating from Puppeteer
========================

Migration Principles[â€‹](#migration-principles "Direct link to Migration Principles")
------------------------------------------------------------------------------------

This guide describes migration to [Playwright Library](/docs/library) and [Playwright Test](/docs/intro) from Puppeteer. The APIs have similarities, but Playwright offers much more possibilities for web testing and cross-browser automation.

*   Most Puppeteer APIs can be used as is
*   The use of [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/docs/api/class-locator "Locator") objects and web-first assertions instead.
*   Playwright is cross-browser
*   You probably don't need explicit wait

Cheat Sheet[â€‹](#cheat-sheet "Direct link to Cheat Sheet")
---------------------------------------------------------

Puppeteer

Playwright Library

`await puppeteer.launch()`

`await playwright.chromium.launch()`

`puppeteer.launch({product: 'firefox'})`

`await playwright.firefox.launch()`

WebKit is not supported by Puppeteer

`await playwright.webkit.launch()`

`await browser.createIncognitoBrowserContext(...)`

`await browser.newContext(...)`

`await page.setViewport(...)`

`await page.setViewportSize(...)`

`await page.waitForXPath(XPathSelector)`

`await page.waitForSelector(XPathSelector)`

`await page.waitForNetworkIdle(...)`

`await page.waitForLoadState('networkidle')`

`await page.$eval(...)`

[Assertions](/docs/test-assertions) can often be used instead to verify text, attribute, class...

`await page.$(...)`

Discouraged, use [Locators](/docs/api/class-locator) instead

`await page.$x(xpath_selector)`

Discouraged, use [Locators](/docs/api/class-locator) instead

No methods dedicated to checkbox or radio input

`await page.locator(selector).check()`  
`await page.locator(selector).uncheck()`

`await page.click(selector)`

`await page.locator(selector).click()`

`await page.focus(selector)`

`await page.locator(selector).focus()`

`await page.hover(selector)`

`await page.locator(selector).hover()`

`await page.select(selector, values)`

`await page.locator(selector).selectOption(values)`

`await page.tap(selector)`

`await page.locator(selector).tap()`

`await page.type(selector, ...)`

`await page.locator(selector).fill(...)`

`await page.waitForFileChooser(...)`  
`await elementHandle.uploadFile(...)`

`await page.locator(selector).setInputFiles(...)`

`await page.cookies([...urls])`

`await browserContext.cookies([urls])`

`await page.deleteCookie(...cookies)`

`await browserContext.clearCookies()`

`await page.setCookie(...cookies)`

`await browserContext.addCookies(cookies)`

`page.on(...)`

`page.on(...)`  
In order to intercept and mutate requests, see [page.route()](/docs/api/class-page#page-route)

`page.waitForNavigation` and `page.waitForSelector` remain, but in many cases will not be necessary due to [auto-waiting](/docs/actionability).

The use of [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/docs/api/class-locator "Locator") objects and web-first assertions instead.

Locators are the central piece of Playwright's auto-waiting and retry-ability. Locators are strict. This means that all operations on locators that imply some target DOM element will throw an exception if more than one element matches a given selector.

Examples[â€‹](#examples "Direct link to Examples")
------------------------------------------------

### Automation example[â€‹](#automation-example "Direct link to Automation example")

Puppeteer:

    const puppeteer = require('puppeteer');(async () => {  const browser = await puppeteer.launch();  const page = await browser.newPage();  await page.setViewport({ width: 1280, height: 800 });  await page.goto('https://playwright.dev/', {    waitUntil: 'networkidle2',  });  await page.screenshot({ path: 'example.png' });  await browser.close();})();

Line-by-line migration to Playwright:

    const { chromium } = require('playwright'); // 1(async () => {  const browser = await chromium.launch();  const page = await browser.newPage(); // 2  await page.setViewportSize({ width: 1280, height: 800 }); // 3  await page.goto('https://playwright.dev/', {    waitUntil: 'networkidle', // 4  });  await page.screenshot({ path: 'example.png' });  await browser.close();})();

Migration highlights (see inline comments in the Playwright code snippet):

1.  Each Playwright Library file has explicit import of `chromium`. Other browsers `webkit` or `firefox` can be used.
2.  For browser state isolation, consider [browser contexts](/docs/browser-contexts)
3.  `setViewport` becomes `setViewportSize`
4.  `networkidle2` becomes `networkidle`. Please note that in most cases it is not useful, thanks to auto-waiting.

### Test example[â€‹](#test-example "Direct link to Test example")

Puppeteer with Jest:

    import puppeteer from 'puppeteer';describe('Playwright homepage', () => {  let browser;  let page;  beforeAll(async () => {    browser = await puppeteer.launch();    page = await browser.newPage();  });  it('contains hero title', async () => {    await page.goto('https://playwright.dev/');    await page.waitForSelector('.hero__title');    const text = await page.$eval('.hero__title', e => e.textContent);    expect(text).toContain('Playwright enables reliable end-to-end testing'); // 5  });  afterAll(() => browser.close());});

Line-by-line migration to Playwright Test:

    import { test, expect } from '@playwright/test'; // 1test.describe('Playwright homepage', () => {  test('contains hero title', async ({ page }) => { // 2, 3    await page.goto('https://playwright.dev/');    const titleLocator = page.locator('.hero__title'); // 4    await expect(titleLocator).toContainText( // 5        'Playwright enables reliable end-to-end testing'    );  });});

1.  Each Playwright Test file has explicit import of the `test` and `expect` functions
2.  Test function is marked with `async`
3.  Playwright Test is given a `page` as one of its parameters. This is one of the many [useful fixtures](/docs/api/class-fixtures) in Playwright Test. Playwright Test creates an isolated [Page](/docs/api/class-page "Page") object for each test. However, if you'd like to reuse a single [Page](/docs/api/class-page "Page") object between multiple tests, you can create your own in [test.beforeAll()](/docs/api/class-test#test-before-all) and close it in [test.afterAll()](/docs/api/class-test#test-after-all).
4.  Locator creation with [page.locator()](/docs/api/class-page#page-locator) is one of the few methods that is sync.
5.  Use [assertions](/docs/test-assertions) to verify the state instead of `page.$eval()`.

Testing[â€‹](#testing "Direct link to Testing")
---------------------------------------------

To improve testing, it is advised to use [Locators](/docs/api/class-locator) and web-first [Assertions](/docs/test-assertions). See [Writing Tests](/docs/writing-tests)

It is common with Puppeteer to use `page.evaluate()` or `page.$eval()` to inspect an [ElementHandle](/docs/api/class-elementhandle "ElementHandle") and extract the value of text content, attribute, class... Web-first [Assertions](/docs/test-assertions) offers several matchers for this purpose, it is more reliable and readable.

[Playwright Test](/docs/intro) is our first-party recommended test runner to be used with Playwright. It provides several features like Page Object Model, parallelism, fixtures or reporters.

Playwright Test Super Powers[â€‹](#playwright-test-super-powers "Direct link to Playwright Test Super Powers")
------------------------------------------------------------------------------------------------------------

Once you're on Playwright Test, you get a lot!

*   Full zero-configuration TypeScript support
*   Run tests across **all web engines** (Chrome, Firefox, Safari) on **any popular operating system** (Windows, macOS, Ubuntu)
*   Full support for multiple origins, [(i)frames](/docs/api/class-frame), [tabs and contexts](/docs/pages)
*   Run tests in isolation in parallel across multiple browsers
*   Built-in test [artifact collection](/docs/test-use-options#recording-options)

You also get all these âœ¨ awesome tools âœ¨ that come bundled with Playwright Test:

*   [Playwright Inspector](/docs/debug)
*   [Playwright Test Code generation](/docs/codegen-intro)
*   [Playwright Tracing](/docs/trace-viewer) for post-mortem debugging

Further Reading[â€‹](#further-reading "Direct link to Further Reading")
---------------------------------------------------------------------

Learn more about Playwright Test runner:

*   [Getting Started](/docs/intro)
*   [Fixtures](/docs/test-fixtures)
*   [Locators](/docs/locators)
*   [Assertions](/docs/test-assertions)
*   [Auto-waiting](/docs/actionability)

# Migrating from Testing Library

Migrating from Testing Library
==============================

Migration principles[â€‹](#migration-principles "Direct link to Migration principles")
------------------------------------------------------------------------------------

This guide describes migration to Playwright's [Experimental Component Testing](/docs/test-components) from [DOM Testing Library](https://testing-library.com/docs/dom-testing-library/intro/), [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/), [Vue Testing Library](https://testing-library.com/docs/vue-testing-library/intro) and [Svelte Testing Library](https://testing-library.com/docs/svelte-testing-library/intro).

note

If you use DOM Testing Library in the browser (for example, you bundle end-to-end tests with webpack), you can switch directly to Playwright Test. Examples below are focused on component tests, but for end-to-end test you just need to replace `await mount` with `await page.goto('http://localhost:3000/')` to open the page under test.

Cheat Sheet[â€‹](#cheat-sheet "Direct link to Cheat Sheet")
---------------------------------------------------------

Testing Library

Playwright

[screen](https://testing-library.com/docs/queries/about#screen)

[page](/docs/api/class-page) and [component](/docs/api/class-locator)

[queries](https://testing-library.com/docs/queries/about)

[locators](/docs/locators)

[async helpers](https://testing-library.com/docs/dom-testing-library/api-async)

[assertions](/docs/test-assertions)

[user events](https://testing-library.com/docs/user-event/intro)

[actions](/docs/api/class-locator)

`await user.click(screen.getByText('Click me'))`

`await component.getByText('Click me').click()`

`await user.click(await screen.findByText('Click me'))`

`await component.getByText('Click me').click()`

`await user.type(screen.getByLabelText('Password'), 'secret')`

`await component.getByLabel('Password').fill('secret')`

`expect(screen.getByLabelText('Password')).toHaveValue('secret')`

`await expect(component.getByLabel('Password')).toHaveValue('secret')`

`screen.getByRole('button', { pressed: true })`

`component.getByRole('button', { pressed: true })`

`screen.getByLabelText('...')`

`component.getByLabel('...')`

`screen.queryByPlaceholderText('...')`

`component.getByPlaceholder('...')`

`screen.findByText('...')`

`component.getByText('...')`

`screen.getByTestId('...')`

`component.getByTestId('...')`

`render(<Component />);`

`mount(<Component />);`

`const { unmount } = render(<Component />);`

`const { unmount } = await mount(<Component />);`

`const { rerender } = render(<Component />);`

`const { update } = await mount(<Component />);`

Example[â€‹](#example "Direct link to Example")
---------------------------------------------

Testing Library:

    import React from 'react';import { render, screen } from '@testing-library/react';import userEvent from '@testing-library/user-event';test('sign in', async () => {  // Setup the page.  const user = userEvent.setup();  render(<SignInPage />);  // Perform actions.  await user.type(screen.getByLabelText('Username'), 'John');  await user.type(screen.getByLabelText('Password'), 'secret');  await user.click(screen.getByRole('button', { name: 'Sign in' }));  // Verify signed in state by waiting until "Welcome" message appears.  expect(await screen.findByText('Welcome, John')).toBeInTheDocument();});

Line-by-line migration to Playwright Test:

    const { test, expect } = require('@playwright/experimental-ct-react'); // 1test('sign in', async ({ mount }) => { // 2  // Setup the page.  const component = await mount(<SignInPage />); // 3  // Perform actions.  await component.getByLabel('Username').fill('John'); // 4  await component.getByLabel('Password').fill('secret');  await component.getByRole('button', { name: 'Sign in' }).click();  // Verify signed in state by waiting until "Welcome" message appears.  await expect(component.getByText('Welcome, John')).toBeVisible(); // 5});

Migration highlights (see inline comments in the Playwright Test code snippet):

1.  Import everything from `@playwright/experimental-ct-react` (or -vue, -svelte) for component tests, or from `@playwright/test` for end-to-end tests.
2.  Test function is given a `page` that is isolated from other tests, and `mount` that renders a component in this page. These are two of the [useful fixtures](/docs/api/class-fixtures) in Playwright Test.
3.  Replace `render` with `mount` that returns a [component locator](/docs/locators).
4.  Use locators created with [locator.locator()](/docs/api/class-locator#locator-locator) or [page.locator()](/docs/api/class-page#page-locator) to perform most of the actions.
5.  Use [assertions](/docs/test-assertions) to verify the state.

Migrating queries[â€‹](#migrating-queries "Direct link to Migrating queries")
---------------------------------------------------------------------------

All queries like `getBy...`, `findBy...`, `queryBy...` and their multi-element counterparts are replaced with `component.getBy...` locators. Locators always auto-wait and retry when needed, so you don't have to worry about choosing the right method. When you want to do a [list operation](/docs/locators#lists), e.g. assert a list of texts, Playwright automatically performs multi-element operations.

Replacing `waitFor`[â€‹](#replacing-waitfor "Direct link to replacing-waitfor")
-----------------------------------------------------------------------------

Playwright includes [assertions](/docs/test-assertions) that automatically wait for the condition, so you don't usually need an explicit `waitFor`/`waitForElementToBeRemoved` call.

    // Testing Libraryawait waitFor(() => {  expect(getByText('the lion king')).toBeInTheDocument();});await waitForElementToBeRemoved(() => queryByText('the mummy'));// Playwrightawait expect(page.getByText('the lion king')).toBeVisible();await expect(page.getByText('the mummy')).toBeHidden();

When you cannot find a suitable assertion, use [`expect.poll`](/docs/test-assertions#expectpoll) instead.

    await expect.poll(async () => {  const response = await page.request.get('https://api.example.com');  return response.status();}).toBe(200);

Replacing `within`[â€‹](#replacing-within "Direct link to replacing-within")
--------------------------------------------------------------------------

You can create a locator inside another locator with [locator.locator()](/docs/api/class-locator#locator-locator) method.

    // Testing Libraryconst messages = screen.getByTestId('messages');const helloMessage = within(messages).getByText('hello');// Playwrightconst messages = component.getByTestId('messages');const helloMessage = messages.getByText('hello');

Playwright Test Super Powers[â€‹](#playwright-test-super-powers "Direct link to Playwright Test Super Powers")
------------------------------------------------------------------------------------------------------------

Once you're on Playwright Test, you get a lot!

*   Full zero-configuration TypeScript support
*   Run tests across **all web engines** (Chrome, Firefox, Safari) on **any popular operating system** (Windows, macOS, Ubuntu)
*   Full support for multiple origins, [(i)frames](/docs/api/class-frame), [tabs and contexts](/docs/pages)
*   Run tests in isolation in parallel across multiple browsers
*   Built-in test [artifact collection](/docs/test-use-options#recording-options)

You also get all these âœ¨ awesome tools âœ¨ that come bundled with Playwright Test:

*   [Visual Studio Code integration](/docs/getting-started-vscode)
*   [UI mode](/docs/test-ui-mode) for debugging tests with a time travel experience complete with watch mode.
*   [Playwright Inspector](/docs/debug#playwright-inspector)
*   [Playwright Test Code generation](/docs/codegen-intro)
*   [Playwright Tracing](/docs/trace-viewer) for post-mortem debugging

Further Reading[â€‹](#further-reading "Direct link to Further Reading")
---------------------------------------------------------------------

Learn more about Playwright Test runner:

*   [Getting Started](/docs/intro)
*   [Experimental Component Testing](/docs/test-components)
*   [Locators](/docs/locators)
*   [Assertions](/docs/test-assertions)
*   [Auto-waiting](/docs/actionability)

# Docker

Docker
======

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

[Dockerfile.noble](https://github.com/microsoft/playwright/blob/main/utils/docker/Dockerfile.noble "Dockerfile.noble") can be used to run Playwright scripts in Docker environment. This image includes the [Playwright browsers](/docs/browsers#install-browsers) and [browser system dependencies](/docs/browsers#install-system-dependencies). The Playwright package/dependency is not included in the image and should be installed separately.

Usage[â€‹](#usage "Direct link to Usage")
---------------------------------------

This Docker image is published to [Microsoft Artifact Registry](https://mcr.microsoft.com/en-us/product/playwright/about "Microsoft Artifact Registry").

info

This Docker image is intended to be used for testing and development purposes only. It is not recommended to use this Docker image to visit untrusted websites.

### Pull the image[â€‹](#pull-the-image "Direct link to Pull the image")

    docker pull mcr.microsoft.com/playwright:v1.57.0-noble

### Run the image[â€‹](#run-the-image "Direct link to Run the image")

By default, the Docker image will use the `root` user to run the browsers. This will disable the Chromium sandbox which is not available with root. If you run trusted code (e.g. End-to-end tests) and want to avoid the hassle of managing separate user then the root user may be fine. For web scraping or crawling, we recommend to create a separate user inside the Docker container and use the seccomp profile.

#### End-to-end tests[â€‹](#end-to-end-tests "Direct link to End-to-end tests")

On trusted websites, you can avoid creating a separate user and use root for it since you trust the code which will run on the browsers.

    docker run -it --rm --ipc=host mcr.microsoft.com/playwright:v1.57.0-noble /bin/bash

#### Crawling and scraping[â€‹](#crawling-and-scraping "Direct link to Crawling and scraping")

On untrusted websites, it's recommended to use a separate user for launching the browsers in combination with the seccomp profile. Inside the container or if you are using the Docker image as a base image you have to use `adduser` for it.

    docker run -it --rm --ipc=host --user pwuser --security-opt seccomp=seccomp_profile.json mcr.microsoft.com/playwright:v1.57.0-noble /bin/bash

[`seccomp_profile.json`](https://github.com/microsoft/playwright/blob/main/utils/docker/seccomp_profile.json) is needed to run Chromium with sandbox. This is a [default Docker seccomp profile](https://github.com/docker/engine/blob/d0d99b04cf6e00ed3fc27e81fc3d94e7eda70af3/profiles/seccomp/default.json) with extra user namespace cloning permissions:

    {  "comment": "Allow create user namespaces",  "names": [    "clone",    "setns",    "unshare"  ],  "action": "SCMP_ACT_ALLOW",  "args": [],  "includes": {},  "excludes": {}}

### Recommended Docker Configuration[â€‹](#recommended-docker-configuration "Direct link to Recommended Docker Configuration")

When running Playwright in Docker, the following configuration is recommended:

1.  **Using [`--init`](https://docs.docker.com/reference/cli/docker/container/run/#init)** Docker flag is recommended to avoid special treatment for processes with PID=1. This is a common reason for zombie processes.
2.  **Using `--ipc=host`** is recommended when using Chromium. Without it, Chromium can run out of memory and crash. Learn more about this option in [Docker docs](https://docs.docker.com/reference/cli/docker/container/run/#ipc).
3.  **If seeing weird errors when launching Chromium**, try running your container with `docker run --cap-add=SYS_ADMIN` when developing locally.

### Using on CI[â€‹](#using-on-ci "Direct link to Using on CI")

See our [Continuous Integration guides](/docs/ci) for sample configs.

### Remote Connection[â€‹](#remote-connection "Direct link to Remote Connection")

You can run Playwright Server in Docker while keeping your tests running on the host system or another machine. This is useful for running tests on unsupported Linux distributions or remote execution scenarios.

#### Running the Playwright Server[â€‹](#running-the-playwright-server "Direct link to Running the Playwright Server")

Start the Playwright Server in Docker:

    docker run -p 3000:3000 --rm --init -it --workdir /home/pwuser --user pwuser mcr.microsoft.com/playwright:v1.57.0-noble /bin/sh -c "npx -y playwright@1.57.0 run-server --port 3000 --host 0.0.0.0"

#### Connecting to the Server[â€‹](#connecting-to-the-server "Direct link to Connecting to the Server")

There are two ways to connect to the remote Playwright server:

1.  Using environment variable with `@playwright/test`:

    PW_TEST_CONNECT_WS_ENDPOINT=ws://127.0.0.1:3000/ npx playwright test

2.  Using the [browserType.connect()](/docs/api/class-browsertype#browser-type-connect) API for other applications:

    const browser = await playwright['chromium'].connect('ws://127.0.0.1:3000/');

#### Network Configuration[â€‹](#network-configuration "Direct link to Network Configuration")

If you need to access local servers from within the Docker container:

    docker run --add-host=hostmachine:host-gateway -p 3000:3000 --rm --init -it --workdir /home/pwuser --user pwuser mcr.microsoft.com/playwright:v1.57.0-noble /bin/sh -c "npx -y playwright@1.57.0 run-server --port 3000 --host 0.0.0.0"

This makes `hostmachine` point to the host's localhost. Your tests should use `hostmachine` instead of `localhost` when accessing local servers.

note

When running tests remotely, ensure the Playwright version in your tests matches the version running in the Docker container.

Image tags[â€‹](#image-tags "Direct link to Image tags")
------------------------------------------------------

See [all available image tags](https://mcr.microsoft.com/en-us/product/playwright/about "all available image tags").

We currently publish images with the following tags:

*   `:v1.57.0` - Playwright v1.57.0 release docker image based on Ubuntu 24.04 LTS (Noble Numbat).
*   `:v1.57.0-noble` - Playwright v1.57.0 release docker image based on Ubuntu 24.04 LTS (Noble Numbat).
*   `:v1.57.0-jammy` - Playwright v1.57.0 release docker image based on Ubuntu 22.04 LTS (Jammy Jellyfish).

note

It is recommended to always pin your Docker image to a specific version if possible. If the Playwright version in your Docker image does not match the version in your project/tests, Playwright will be unable to locate browser executables.

### Base images[â€‹](#base-images "Direct link to Base images")

We currently publish images based on the following [Ubuntu](https://hub.docker.com/_/ubuntu) versions:

*   **Ubuntu 24.04 LTS** (Noble Numbat), image tags include `noble`
*   **Ubuntu 22.04 LTS** (Jammy Jellyfish), image tags include `jammy`

#### Alpine[â€‹](#alpine "Direct link to Alpine")

Browser builds for Firefox and WebKit are built for the [glibc](https://en.wikipedia.org/wiki/Glibc) library. Alpine Linux and other distributions that are based on the [musl](https://en.wikipedia.org/wiki/Musl) standard library are not supported.

Build your own image[â€‹](#build-your-own-image "Direct link to Build your own image")
------------------------------------------------------------------------------------

To run Playwright inside Docker, you need to have Node.js, [Playwright browsers](/docs/browsers#install-browsers) and [browser system dependencies](/docs/browsers#install-system-dependencies) installed. See the following Dockerfile:

    FROM node:20-bookwormRUN npx -y playwright@1.57.0 install --with-deps

# Continuous Integration

Continuous Integration
======================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright tests can be executed in CI environments. We have created sample configurations for common CI providers.

3 steps to get your tests running on CI:

1.  **Ensure CI agent can run browsers**: Use [our Docker image](/docs/docker) in Linux agents or install your dependencies using the [CLI](/docs/browsers#install-system-dependencies).
    
2.  **Install Playwright**:
    
        # Install NPM packagesnpm ci# Install Playwright browsers and dependenciesnpx playwright install --with-deps
    
3.  **Run your tests**:
    
        npx playwright test
    

Workers[â€‹](#workers "Direct link to Workers")
---------------------------------------------

We recommend setting [workers](/docs/api/class-testconfig#test-config-workers) to "1" in CI environments to prioritize stability and reproducibility. Running tests sequentially ensures each test gets the full system resources, avoiding potential conflicts. However, if you have a powerful self-hosted CI system, you may enable [parallel](/docs/test-parallel) tests. For wider parallelization, consider [sharding](/docs/test-parallel#shard-tests-between-multiple-machines) - distributing tests across multiple CI jobs.

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  // Opt out of parallel tests on CI.  workers: process.env.CI ? 1 : undefined,});

CI configurations[â€‹](#ci-configurations "Direct link to CI configurations")
---------------------------------------------------------------------------

The [Command line tools](/docs/browsers#install-system-dependencies) can be used to install all operating system dependencies in CI.

### GitHub Actions[â€‹](#github-actions "Direct link to GitHub Actions")

#### On push/pull\_request[â€‹](#on-pushpull_request "Direct link to On push/pull_request")

Tests will run on push or pull request on branches main/master. The [workflow](https://docs.github.com/en/actions/using-workflows/about-workflows) will install all dependencies, install Playwright and then run the tests. It will also create the HTML report.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    steps:    - uses: actions/checkout@v5    - uses: actions/setup-node@v6      with:        node-version: lts/*    - name: Install dependencies      run: npm ci    - name: Install Playwright Browsers      run: npx playwright install --with-deps    - name: Run Playwright tests      run: npx playwright test    - uses: actions/upload-artifact@v5      if: ${{ !cancelled() }}      with:        name: playwright-report        path: playwright-report/        retention-days: 30

#### On push/pull\_request (sharded)[â€‹](#on-pushpull_request-sharded "Direct link to On push/pull_request (sharded)")

GitHub Actions supports [sharding tests between multiple jobs](https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs). Check out our [sharding doc](/docs/test-sharding) to learn more about sharding and to see a [GitHub actions example](/docs/test-sharding#github-actions-example) of how to configure a job to run your tests on multiple machines as well as how to merge the HTML reports.

#### Via Containers[â€‹](#via-containers "Direct link to Via Containers")

GitHub Actions support [running jobs in a container](https://docs.github.com/en/actions/using-jobs/running-jobs-in-a-container) by using the [`jobs.<job_id>.container`](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idcontainer) option. This is useful to not pollute the host environment with dependencies and to have a consistent environment for e.g. screenshots/visual regression testing across different operating systems.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  playwright:    name: 'Playwright Tests'    runs-on: ubuntu-latest    container:      image: mcr.microsoft.com/playwright:v1.57.0-noble      options: --user 1001    steps:      - uses: actions/checkout@v5      - uses: actions/setup-node@v6        with:          node-version: lts/*      - name: Install dependencies        run: npm ci      - name: Run your tests        run: npx playwright test

#### On deployment[â€‹](#on-deployment "Direct link to On deployment")

This will start the tests after a [GitHub Deployment](https://developer.github.com/v3/repos/deployments/) went into the `success` state. Services like Vercel use this pattern so you can run your end-to-end tests on their deployed environment.

.github/workflows/playwright.yml

    name: Playwright Testson:  deployment_status:jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    if: github.event.deployment_status.state == 'success'    steps:    - uses: actions/checkout@v5    - uses: actions/setup-node@v6      with:        node-version: lts/*    - name: Install dependencies      run: npm ci    - name: Install Playwright      run: npx playwright install --with-deps    - name: Run Playwright tests      run: npx playwright test      env:        PLAYWRIGHT_TEST_BASE_URL: ${{ github.event.deployment_status.target_url }}

#### Fail-Fast[â€‹](#fail-fast "Direct link to Fail-Fast")

Large test suites can take very long to execute. By executing a preliminary test run with the `--only-changed` flag, you can run test files that are likely to fail first. This will give you a faster feedback loop and slightly lower CI consumption while working on Pull Requests. To detect test files affected by your changeset, `--only-changed` analyses your suites' dependency graph. This is a heuristic and might miss tests, so it's important that you always run the full test suite after the preliminary test run.

.github/workflows/playwright.yml

    name: Playwright Testson:  push:    branches: [ main, master ]  pull_request:    branches: [ main, master ]jobs:  test:    timeout-minutes: 60    runs-on: ubuntu-latest    steps:    - uses: actions/checkout@v5      with:        # Force a non-shallow checkout, so that we can reference $GITHUB_BASE_REF.        # See https://github.com/actions/checkout for more details.        fetch-depth: 0    - uses: actions/setup-node@v6      with:        node-version: lts/*    - name: Install dependencies      run: npm ci    - name: Install Playwright Browsers      run: npx playwright install --with-deps    - name: Run changed Playwright tests      run: npx playwright test --only-changed=$GITHUB_BASE_REF      if: github.event_name == 'pull_request'    - name: Run Playwright tests      run: npx playwright test    - uses: actions/upload-artifact@v5      if: ${{ !cancelled() }}      with:        name: playwright-report        path: playwright-report/        retention-days: 30

### Docker[â€‹](#docker "Direct link to Docker")

We have a [pre-built Docker image](/docs/docker) which can either be used directly or as a reference to update your existing Docker definitions. Make sure to follow the [Recommended Docker Configuration](/docs/docker#recommended-docker-configuration) to ensure the best performance.

### Azure Pipelines[â€‹](#azure-pipelines "Direct link to Azure Pipelines")

For Windows or macOS agents, no additional configuration is required, just install Playwright and run your tests.

For Linux agents, you can use [our Docker container](/docs/docker) with Azure Pipelines support [running containerized jobs](https://docs.microsoft.com/en-us/azure/devops/pipelines/process/container-phases?view=azure-devops). Alternatively, you can use [Command line tools](/docs/browsers#install-system-dependencies) to install all necessary dependencies.

For running the Playwright tests use this pipeline task:

    trigger:- mainpool:  vmImage: ubuntu-lateststeps:- task: UseNode@1  inputs:    version: '22'  displayName: 'Install Node.js'- script: npm ci  displayName: 'npm ci'- script: npx playwright install --with-deps  displayName: 'Install Playwright browsers'- script: npx playwright test  displayName: 'Run Playwright tests'  env:    CI: 'true'

#### Uploading playwright-report folder with Azure Pipelines[â€‹](#uploading-playwright-report-folder-with-azure-pipelines "Direct link to Uploading playwright-report folder with Azure Pipelines")

This will make the pipeline run fail if any of the playwright tests fails. If you also want to integrate the test results with Azure DevOps, use the task `PublishTestResults` task like so:

    trigger:- mainpool:  vmImage: ubuntu-lateststeps:- task: UseNode@1  inputs:    version: '22'  displayName: 'Install Node.js'- script: npm ci  displayName: 'npm ci'- script: npx playwright install --with-deps  displayName: 'Install Playwright browsers'- script: npx playwright test  displayName: 'Run Playwright tests'  env:    CI: 'true'- task: PublishTestResults@2  displayName: 'Publish test results'  inputs:    searchFolder: 'test-results'    testResultsFormat: 'JUnit'    testResultsFiles: 'e2e-junit-results.xml'    mergeTestResults: true    failTaskOnFailedTests: true    testRunTitle: 'My End-To-End Tests'  condition: succeededOrFailed()- task: PublishPipelineArtifact@1  inputs:    targetPath: playwright-report    artifact: playwright-report    publishLocation: 'pipeline'  condition: succeededOrFailed()

Note: The JUnit reporter needs to be configured accordingly via

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['junit', { outputFile: 'test-results/e2e-junit-results.xml' }]],});

in `playwright.config.ts`.

#### Azure Pipelines (sharded)[â€‹](#azure-pipelines-sharded "Direct link to Azure Pipelines (sharded)")

    trigger:- mainpool:  vmImage: ubuntu-lateststrategy:  matrix:    chromium-1:      project: chromium      shard: 1/3    chromium-2:      project: chromium      shard: 2/3    chromium-3:      project: chromium      shard: 3/3    firefox-1:      project: firefox      shard: 1/3    firefox-2:      project: firefox      shard: 2/3    firefox-3:      project: firefox      shard: 3/3    webkit-1:      project: webkit      shard: 1/3    webkit-2:      project: webkit      shard: 2/3    webkit-3:      project: webkit      shard: 3/3steps:- task: UseNode@1  inputs:    version: '22'  displayName: 'Install Node.js'- script: npm ci  displayName: 'npm ci'- script: npx playwright install --with-deps  displayName: 'Install Playwright browsers'- script: npx playwright test --project=$(project) --shard=$(shard)  displayName: 'Run Playwright tests'  env:    CI: 'true'

#### Azure Pipelines (containerized)[â€‹](#azure-pipelines-containerized "Direct link to Azure Pipelines (containerized)")

    trigger:- mainpool:  vmImage: ubuntu-latestcontainer: mcr.microsoft.com/playwright:v1.57.0-noblesteps:- task: UseNode@1  inputs:    version: '22'  displayName: 'Install Node.js'- script: npm ci  displayName: 'npm ci'- script: npx playwright test  displayName: 'Run Playwright tests'  env:    CI: 'true'

### CircleCI[â€‹](#circleci "Direct link to CircleCI")

Running Playwright on CircleCI is very similar to running on GitHub Actions. In order to specify the pre-built Playwright [Docker image](/docs/docker), simply modify the agent definition with `docker:` in your config like so:

    executors:  pw-noble-development:    docker:      - image: mcr.microsoft.com/playwright:v1.57.0-noble

Note: When using the docker agent definition, you are specifying the resource class of where playwright runs to the 'medium' tier [here](https://circleci.com/docs/configuration-reference?#docker-execution-environment). The default behavior of Playwright is to set the number of workers to the detected core count (2 in the case of the medium tier). Overriding the number of workers to greater than this number will cause unnecessary timeouts and failures.

#### Sharding in CircleCI[â€‹](#sharding-in-circleci "Direct link to Sharding in CircleCI")

Sharding in CircleCI is indexed with 0 which means that you will need to override the default parallelism ENV VARS. The following example demonstrates how to run Playwright with a CircleCI Parallelism of 4 by adding 1 to the `CIRCLE_NODE_INDEX` to pass into the `--shard` cli arg.

      playwright-job-name:    executor: pw-noble-development    parallelism: 4    steps:      - run: SHARD="$((${CIRCLE_NODE_INDEX}+1))"; npx playwright test --shard=${SHARD}/${CIRCLE_NODE_TOTAL}

### Jenkins[â€‹](#jenkins "Direct link to Jenkins")

Jenkins supports Docker agents for pipelines. Use the [Playwright Docker image](/docs/docker) to run tests on Jenkins.

    pipeline {   agent { docker { image 'mcr.microsoft.com/playwright:v1.57.0-noble' } }   stages {      stage('e2e-tests') {         steps {            sh 'npm ci'            sh 'npx playwright test'         }      }   }}

### Bitbucket Pipelines[â€‹](#bitbucket-pipelines "Direct link to Bitbucket Pipelines")

Bitbucket Pipelines can use public [Docker images as build environments](https://confluence.atlassian.com/bitbucket/use-docker-images-as-build-environments-792298897.html). To run Playwright tests on Bitbucket, use our public Docker image ([see Dockerfile](/docs/docker)).

    image: mcr.microsoft.com/playwright:v1.57.0-noble

### GitLab CI[â€‹](#gitlab-ci "Direct link to GitLab CI")

To run Playwright tests on GitLab, use our public Docker image ([see Dockerfile](/docs/docker)).

    stages:  - testtests:  stage: test  image: mcr.microsoft.com/playwright:v1.57.0-noble  script:  ...

#### Sharding[â€‹](#sharding "Direct link to Sharding")

GitLab CI supports [sharding tests between multiple jobs](https://docs.gitlab.com/ee/ci/jobs/job_control.html#parallelize-large-jobs) using the [parallel](https://docs.gitlab.com/ee/ci/yaml/index.html#parallel) keyword. The test job will be split into multiple smaller jobs that run in parallel. Parallel jobs are named sequentially from `job_name 1/N` to `job_name N/N`.

    stages:  - testtests:  stage: test  image: mcr.microsoft.com/playwright:v1.57.0-noble  parallel: 7  script:    - npm ci    - npx playwright test --shard=$CI_NODE_INDEX/$CI_NODE_TOTAL

GitLab CI also supports sharding tests between multiple jobs using the [parallel:matrix](https://docs.gitlab.com/ee/ci/yaml/index.html#parallelmatrix) option. The test job will run multiple times in parallel in a single pipeline, but with different variable values for each instance of the job. In the example below, we have 2 `PROJECT` values and 10 `SHARD` values, resulting in a total of 20 jobs to be run.

    stages:  - testtests:  stage: test  image: mcr.microsoft.com/playwright:v1.57.0-noble  parallel:    matrix:      - PROJECT: ['chromium', 'webkit']        SHARD: ['1/10', '2/10', '3/10', '4/10', '5/10', '6/10', '7/10', '8/10', '9/10', '10/10']  script:    - npm ci    - npx playwright test --project=$PROJECT --shard=$SHARD

### Google Cloud Build[â€‹](#google-cloud-build "Direct link to Google Cloud Build")

To run Playwright tests on Google Cloud Build, use our public Docker image ([see Dockerfile](/docs/docker)).

    steps:- name: mcr.microsoft.com/playwright:v1.57.0-noble  script:   ...  env:  - 'CI=true'

### Drone[â€‹](#drone "Direct link to Drone")

To run Playwright tests on Drone, use our public Docker image ([see Dockerfile](/docs/docker)).

    kind: pipelinename: defaulttype: dockersteps:  - name: test    image: mcr.microsoft.com/playwright:v1.57.0-noble    commands:      - npx playwright test

Caching browsers[â€‹](#caching-browsers "Direct link to Caching browsers")
------------------------------------------------------------------------

Caching browser binaries is not recommended, since the amount of time it takes to restore the cache is comparable to the time it takes to download the binaries. Especially under Linux, [operating system dependencies](/docs/browsers#install-system-dependencies) need to be installed, which are not cacheable.

If you still want to cache the browser binaries between CI runs, cache [these directories](/docs/browsers#managing-browser-binaries) in your CI configuration, against a hash of the Playwright version.

Debugging browser launches[â€‹](#debugging-browser-launches "Direct link to Debugging browser launches")
------------------------------------------------------------------------------------------------------

Playwright supports the `DEBUG` environment variable to output debug logs during execution. Setting it to `pw:browser` is helpful while debugging `Error: Failed to launch browser` errors.

    DEBUG=pw:browser npx playwright test

Running headed[â€‹](#running-headed "Direct link to Running headed")
------------------------------------------------------------------

By default, Playwright launches browsers in headless mode. See in our [Running tests](/docs/running-tests#run-tests-in-headed-mode) guide how to run tests in headed mode.

On Linux agents, headed execution requires [Xvfb](https://en.wikipedia.org/wiki/Xvfb) to be installed. Our [Docker image](/docs/docker) and GitHub Action have Xvfb pre-installed. To run browsers in headed mode with Xvfb, add `xvfb-run` before the actual command.

    xvfb-run npx playwright test

# Selenium Grid (experimental)

Selenium Grid (experimental)
============================

Introduction[â€‹](#introduction "Direct link to Introduction")
------------------------------------------------------------

Playwright can connect to [Selenium Grid Hub](https://www.selenium.dev/documentation/grid/) that runs Selenium 4 to launch **Google Chrome** or **Microsoft Edge** browser, instead of running browser on the local machine. Note this feature is **experimental** and is prioritized accordingly.

warning

There is a risk of Playwright integration with Selenium Grid Hub breaking in the future. Make sure you weight risks against benefits before using it.

More details

Internally, Playwright connects to the browser using [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) websocket. Selenium 4 currently exposes this capability. However, this [might not be the case in the future](https://github.com/SeleniumHQ/selenium/issues/11590#issuecomment-1436113950). If Selenium drops this capability, Playwright will stop working with it.

Before connecting Playwright to your Selenium Grid, make sure that grid works with [Selenium WebDriver](https://www.selenium.dev/documentation/webdriver/). For example, run [one of the examples](https://github.com/SeleniumHQ/selenium/tree/trunk/javascript/selenium-webdriver/example) and pass `SELENIUM_REMOTE_URL` environment variable. If webdriver example does not work, look for any errors at your Selenium hub/node/standalone output and search [Selenium issues](https://github.com/SeleniumHQ/selenium/issues) for a possible solution.

Starting Selenium Grid[â€‹](#starting-selenium-grid "Direct link to Starting Selenium Grid")
------------------------------------------------------------------------------------------

If you run distributed Selenium Grid, Playwright needs selenium nodes to be registered with an accessible address, so that it could connect to the browsers. To make sure it works as expected, set `SE_NODE_GRID_URL` environment variable pointing to the hub when running selenium nodes.

    # Start selenium nodeSE_NODE_GRID_URL="http://<selenium-hub-ip>:4444" java -jar selenium-server-<version>.jar node

Connecting Playwright to Selenium Grid[â€‹](#connecting-playwright-to-selenium-grid "Direct link to Connecting Playwright to Selenium Grid")
------------------------------------------------------------------------------------------------------------------------------------------

To connect Playwright to **Selenium Grid 4**, set `SELENIUM_REMOTE_URL` environment variable pointing to your Selenium Grid Hub. Note that this only works for Google Chrome and Microsoft Edge.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 npx playwright test

You don't have to change your code, just use your testing harness or [browserType.launch()](/docs/api/class-browsertype#browser-type-launch) as usual.

### Passing additional capabilities[â€‹](#passing-additional-capabilities "Direct link to Passing additional capabilities")

If your grid requires additional capabilities to be set (for example, you use an external service), you can set `SELENIUM_REMOTE_CAPABILITIES` environment variable to provide JSON-serialized capabilities.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 SELENIUM_REMOTE_CAPABILITIES="{'mygrid:options':{os:'windows',username:'John',password:'secure'}}" npx playwright test

### Passing additional headers[â€‹](#passing-additional-headers "Direct link to Passing additional headers")

If your grid requires additional headers to be set (for example, you should provide authorization token to use browsers in your cloud), you can set `SELENIUM_REMOTE_HEADERS` environment variable to provide JSON-serialized headers.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 SELENIUM_REMOTE_HEADERS="{'Authorization':'Basic b64enc'}" npx playwright test

### Detailed logs[â€‹](#detailed-logs "Direct link to Detailed logs")

Run with `DEBUG=pw:browser*` environment variable to see how Playwright is connecting to Selenium Grid.

    DEBUG=pw:browser* SELENIUM_REMOTE_URL=http://internal.grid:4444 npx playwright test

If you file an issue, please include this log.

Using Selenium Docker[â€‹](#using-selenium-docker "Direct link to Using Selenium Docker")
---------------------------------------------------------------------------------------

One easy way to use Selenium Grid is to run official docker containers. Read more in [selenium docker images](https://github.com/SeleniumHQ/docker-selenium) documentation. For image tagging convention, [read more](https://github.com/SeleniumHQ/docker-selenium/wiki/Tagging-Convention#selenium-grid-4x-and-above).

### Standalone mode[â€‹](#standalone-mode "Direct link to Standalone mode")

Here is an example of running selenium standalone and connecting Playwright to it. Note that hub and node are on the same `localhost`, and we pass `SE_NODE_GRID_URL` environment variable pointing to it.

First start Selenium.

    docker run -d -p 4444:4444 --shm-size="2g" -e SE_NODE_GRID_URL="http://localhost:4444" selenium/standalone-chromium:latest

Then run Playwright.

    SELENIUM_REMOTE_URL=http://localhost:4444 npx playwright test

### Hub and nodes mode[â€‹](#hub-and-nodes-mode "Direct link to Hub and nodes mode")

Here is an example of running selenium hub and a single selenium node, and connecting Playwright to the hub. Note that hub and node have different IPs, and we pass `SE_NODE_GRID_URL` environment variable pointing to the hub when starting node containers.

First start the hub container and one or more node containers.

    docker run -d -p 4442-4444:4442-4444 --name selenium-hub selenium/hub:4.25.0docker run -d -p 5555:5555 \    --shm-size="2g" \    -e SE_EVENT_BUS_HOST=<selenium-hub-ip> \    -e SE_EVENT_BUS_PUBLISH_PORT=4442 \    -e SE_EVENT_BUS_SUBSCRIBE_PORT=4443 \    -e SE_NODE_GRID_URL="http://<selenium-hub-ip>:4444"    selenium/node-chromium:4.25.0

Then run Playwright.

    SELENIUM_REMOTE_URL=http://<selenium-hub-ip>:4444 npx playwright test

Selenium 3[â€‹](#selenium-3 "Direct link to Selenium 3")
------------------------------------------------------

Internally, Playwright connects to the browser using [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) websocket. Selenium 4 exposes this capability, while Selenium 3 does not.

This means that Selenium 3 is supported in a best-effort manner, where Playwright tries to connect to the grid node directly. Grid nodes must be directly accessible from the machine that runs Playwright.

# Playwright Test

Playwright Test
===============

Playwright Test provides a `test` function to declare tests and `expect` function to write assertions.

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('https://playwright.dev/');  const name = await page.innerText('.navbar__title');  expect(name).toBe('Playwright');});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### test[â€‹](#test-call "Direct link to test")

Added in: v1.10 test.test

Declares a test.

*   `test(title, body)`
*   `test(title, details, body)`

**Usage**

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('https://playwright.dev/');  // ...});

**Tags**

You can tag tests by providing additional test details. Alternatively, you can include tags in the test title. Note that each tag must start with `@` symbol.

    import { test, expect } from '@playwright/test';test('basic test', {  tag: '@smoke',}, async ({ page }) => {  await page.goto('https://playwright.dev/');  // ...});test('another test @smoke', async ({ page }) => {  await page.goto('https://playwright.dev/');  // ...});

Test tags are displayed in the test report, and are available to a custom reporter via `TestCase.tags` property.

You can also filter tests by their tags during test execution:

*   in the [command line](/docs/test-cli#all-options);
*   in the config with [testConfig.grep](/docs/api/class-testconfig#test-config-grep) and [testProject.grep](/docs/api/class-testproject#test-project-grep);

Learn more about [tagging](/docs/test-annotations#tag-tests).

**Annotations**

You can annotate tests by providing additional test details.

    import { test, expect } from '@playwright/test';test('basic test', {  annotation: {    type: 'issue',    description: 'https://github.com/microsoft/playwright/issues/23180',  },}, async ({ page }) => {  await page.goto('https://playwright.dev/');  // ...});

Test annotations are displayed in the test report, and are available to a custom reporter via `TestCase.annotations` property.

You can also add annotations during runtime by manipulating [testInfo.annotations](/docs/api/class-testinfo#test-info-annotations).

Learn more about [test annotations](/docs/test-annotations).

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-call-option-title)
    
    Test title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-call-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Annotation type, for example `'issue'`.
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional annotation description, for example an issue url.
            
    
    Additional test details.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo"))[#](#test-call-option-body)
    
    Test body that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

* * *

### test.afterAll[â€‹](#test-after-all "Direct link to test.afterAll")

Added in: v1.10 test.test.afterAll

Declares an `afterAll` hook that is executed once per worker after all tests.

When called in the scope of a test file, runs after all tests in the file. When called inside a [test.describe()](/docs/api/class-test#test-describe) group, runs after all tests in the group.

**Usage**

    test.afterAll(async () => {  console.log('Done with tests');  // ...});

Alternatively, you can declare a hook **with a title**.

    test.afterAll('Teardown', async () => {  console.log('Done with tests');  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.38[#](#test-after-all-option-title)
    
    Hook title.
    
*   `hookFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo"))[#](#test-after-all-option-hook-function)
    
    Hook function that takes one or two arguments: an object with worker fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

**Details**

When multiple `afterAll` hooks are added, they will run in the order of their registration.

Note that worker process is restarted on test failures, and `afterAll` hook runs again in the new worker. Learn more about [workers and failures](/docs/test-retries).

Playwright will continue running all applicable hooks even if some of them have failed.

*   `test.afterAll(hookFunction)`
*   `test.afterAll(title, hookFunction)`

* * *

### test.afterEach[â€‹](#test-after-each "Direct link to test.afterEach")

Added in: v1.10 test.test.afterEach

Declares an `afterEach` hook that is executed after each test.

When called in the scope of a test file, runs after each test in the file. When called inside a [test.describe()](/docs/api/class-test#test-describe) group, runs after each test in the group.

You can access all the same [Fixtures](/docs/api/class-fixtures "Fixtures") as the test body itself, and also the [TestInfo](/docs/api/class-testinfo "TestInfo") object that gives a lot of useful information. For example, you can check whether the test succeeded or failed.

*   `test.afterEach(hookFunction)`
*   `test.afterEach(title, hookFunction)`

**Usage**

example.spec.ts

    import { test, expect } from '@playwright/test';test.afterEach(async ({ page }) => {  console.log(`Finished ${test.info().title} with status ${test.info().status}`);  if (test.info().status !== test.info().expectedStatus)    console.log(`Did not run as expected, ended up at ${page.url()}`);});test('my test', async ({ page }) => {  // ...});

Alternatively, you can declare a hook **with a title**.

example.spec.ts

    test.afterEach('Status check', async ({ page }) => {  if (test.info().status !== test.info().expectedStatus)    console.log(`Did not run as expected, ended up at ${page.url()}`);});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.38[#](#test-after-each-option-title)
    
    Hook title.
    
*   `hookFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo"))[#](#test-after-each-option-hook-function)
    
    Hook function that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

**Details**

When multiple `afterEach` hooks are added, they will run in the order of their registration.

Playwright will continue running all applicable hooks even if some of them have failed.

* * *

### test.beforeAll[â€‹](#test-before-all "Direct link to test.beforeAll")

Added in: v1.10 test.test.beforeAll

Declares a `beforeAll` hook that is executed once per worker process before all tests.

When called in the scope of a test file, runs before all tests in the file. When called inside a [test.describe()](/docs/api/class-test#test-describe) group, runs before all tests in the group.

You can use [test.afterAll()](/docs/api/class-test#test-after-all) to teardown any resources set up in `beforeAll`.

*   `test.beforeAll(hookFunction)`
*   `test.beforeAll(title, hookFunction)`

**Usage**

example.spec.ts

    import { test, expect } from '@playwright/test';test.beforeAll(async () => {  console.log('Before tests');});test.afterAll(async () => {  console.log('After tests');});test('my test', async ({ page }) => {  // ...});

Alternatively, you can declare a hook **with a title**.

example.spec.ts

    test.beforeAll('Setup', async () => {  console.log('Before tests');});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.38[#](#test-before-all-option-title)
    
    Hook title.
    
*   `hookFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo"))[#](#test-before-all-option-hook-function)
    
    Hook function that takes one or two arguments: an object with worker fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

**Details**

When multiple `beforeAll` hooks are added, they will run in the order of their registration.

Note that worker process is restarted on test failures, and `beforeAll` hook runs again in the new worker. Learn more about [workers and failures](/docs/test-retries).

Playwright will continue running all applicable hooks even if some of them have failed.

* * *

### test.beforeEach[â€‹](#test-before-each "Direct link to test.beforeEach")

Added in: v1.10 test.test.beforeEach

Declares a `beforeEach` hook that is executed before each test.

When called in the scope of a test file, runs before each test in the file. When called inside a [test.describe()](/docs/api/class-test#test-describe) group, runs before each test in the group.

You can access all the same [Fixtures](/docs/api/class-fixtures "Fixtures") as the test body itself, and also the [TestInfo](/docs/api/class-testinfo "TestInfo") object that gives a lot of useful information. For example, you can navigate the page before starting the test.

You can use [test.afterEach()](/docs/api/class-test#test-after-each) to teardown any resources set up in `beforeEach`.

*   `test.beforeEach(hookFunction)`
*   `test.beforeEach(title, hookFunction)`

**Usage**

example.spec.ts

    import { test, expect } from '@playwright/test';test.beforeEach(async ({ page }) => {  console.log(`Running ${test.info().title}`);  await page.goto('https://my.start.url/');});test('my test', async ({ page }) => {  expect(page.url()).toBe('https://my.start.url/');});

Alternatively, you can declare a hook **with a title**.

example.spec.ts

    test.beforeEach('Open start URL', async ({ page }) => {  console.log(`Running ${test.info().title}`);  await page.goto('https://my.start.url/');});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.38[#](#test-before-each-option-title)
    
    Hook title.
    
*   `hookFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo"))[#](#test-before-each-option-hook-function)
    
    Hook function that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

**Details**

When multiple `beforeEach` hooks are added, they will run in the order of their registration.

Playwright will continue running all applicable hooks even if some of them have failed.

* * *

### test.describe[â€‹](#test-describe "Direct link to test.describe")

Added in: v1.10 test.test.describe

Declares a group of tests.

*   `test.describe(title, callback)`
*   `test.describe(callback)`
*   `test.describe(title, details, callback)`

**Usage**

You can declare a group of tests with a title. The title will be visible in the test report as a part of each test's title.

    test.describe('two tests', () => {  test('one', async ({ page }) => {    // ...  });  test('two', async ({ page }) => {    // ...  });});

**Anonymous group**

You can also declare a test group without a title. This is convenient to give a group of tests a common option with [test.use()](/docs/api/class-test#test-use).

    test.describe(() => {  test.use({ colorScheme: 'dark' });  test('one', async ({ page }) => {    // ...  });  test('two', async ({ page }) => {    // ...  });});

**Tags**

You can tag all tests in a group by providing additional details. Note that each tag must start with `@` symbol.

    import { test, expect } from '@playwright/test';test.describe('two tagged tests', {  tag: '@smoke',}, () => {  test('one', async ({ page }) => {    // ...  });  test('two', async ({ page }) => {    // ...  });});

Learn more about [tagging](/docs/test-annotations#tag-tests).

**Annotations**

You can annotate all tests in a group by providing additional details.

    import { test, expect } from '@playwright/test';test.describe('two annotated tests', {  annotation: {    type: 'issue',    description: 'https://github.com/microsoft/playwright/issues/23180',  },}, () => {  test('one', async ({ page }) => {    // ...  });  test('two', async ({ page }) => {    // ...  });});

Learn more about [test annotations](/docs/test-annotations).

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-describe-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    Additional details for all tests in the group.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-option-callback)
    
    A callback that is run immediately when calling [test.describe()](/docs/api/class-test#test-describe). Any tests declared in this callback will belong to the group.
    

* * *

### test.describe.configure[â€‹](#test-describe-configure "Direct link to test.describe.configure")

Added in: v1.10 test.test.describe.configure

Configures the enclosing scope. Can be executed either on the top level or inside a describe. Configuration applies to the entire scope, regardless of whether it run before or after the test declaration.

Learn more about the execution modes [here](/docs/test-parallel).

**Usage**

*   Running tests in parallel.
    
        // Run all the tests in the file concurrently using parallel workers.test.describe.configure({ mode: 'parallel' });test('runs in parallel 1', async ({ page }) => {});test('runs in parallel 2', async ({ page }) => {});
    
*   Running tests in order, retrying each failed test independently.
    
    This is the default mode. It can be useful to set it explicitly to override project configuration that uses `fullyParallel`.
    
        // Tests in this file run in order. Retries, if any, run independently.test.describe.configure({ mode: 'default' });test('runs first', async ({ page }) => {});test('runs second', async ({ page }) => {});
    
*   Running tests serially, retrying from the start. If one of the serial tests fails, all subsequent tests are skipped.
    
    note
    
    Running serially is not recommended. It is usually better to make your tests isolated, so they can be run independently.
    
        // Annotate tests as inter-dependent.test.describe.configure({ mode: 'serial' });test('runs first', async ({ page }) => {});test('runs second', async ({ page }) => {});
    
*   Configuring retries and timeout for each test.
    
        // Each test in the file will be retried twice and have a timeout of 20 seconds.test.describe.configure({ retries: 2, timeout: 20_000 });test('runs first', async ({ page }) => {});test('runs second', async ({ page }) => {});
    
*   Run multiple describes in parallel, but tests inside each describe in order.
    
        test.describe.configure({ mode: 'parallel' });test.describe('A, runs in parallel with B', () => {  test.describe.configure({ mode: 'default' });  test('in order A1', async ({ page }) => {});  test('in order A2', async ({ page }) => {});});test.describe('B, runs in parallel with A', () => {  test.describe.configure({ mode: 'default' });  test('in order B1', async ({ page }) => {});  test('in order B2', async ({ page }) => {});});
    

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `mode` "default" | "parallel" | "serial" _(optional)_[#](#test-describe-configure-option-mode)
        
        Execution mode. Learn more about the execution modes [here](/docs/test-parallel).
        
    *   `retries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.28[#](#test-describe-configure-option-retries)
        
        The number of retries for each test.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.28[#](#test-describe-configure-option-timeout)
        
        Timeout for each test in milliseconds. Overrides [testProject.timeout](/docs/api/class-testproject#test-project-timeout) and [testConfig.timeout](/docs/api/class-testconfig#test-config-timeout).
        

* * *

### test.describe.fixme[â€‹](#test-describe-fixme "Direct link to test.describe.fixme")

Added in: v1.25 test.test.describe.fixme

Declares a test group similarly to [test.describe()](/docs/api/class-test#test-describe). Tests in this group are marked as "fixme" and will not be executed.

*   `test.describe.fixme(title, callback)`
*   `test.describe.fixme(callback)`
*   `test.describe.fixme(title, details, callback)`

**Usage**

    test.describe.fixme('broken tests that should be fixed', () => {  test('example', async ({ page }) => {    // This test will not run  });});

You can also omit the title.

    test.describe.fixme(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-describe-fixme-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-fixme-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-fixme-option-callback)
    
    A callback that is run immediately when calling [test.describe.fixme()](/docs/api/class-test#test-describe-fixme). Any tests added in this callback will belong to the group, and will not be run.
    

* * *

### test.describe.only[â€‹](#test-describe-only "Direct link to test.describe.only")

Added in: v1.10 test.test.describe.only

Declares a focused group of tests. If there are some focused tests or suites, all of them will be run but nothing else.

*   `test.describe.only(title, callback)`
*   `test.describe.only(callback)`
*   `test.describe.only(title, details, callback)`

**Usage**

    test.describe.only('focused group', () => {  test('in the focused group', async ({ page }) => {    // This test will run  });});test('not in the focused group', async ({ page }) => {  // This test will not run});

You can also omit the title.

    test.describe.only(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-describe-only-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-only-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-only-option-callback)
    
    A callback that is run immediately when calling [test.describe.only()](/docs/api/class-test#test-describe-only). Any tests added in this callback will belong to the group.
    

* * *

### test.describe.skip[â€‹](#test-describe-skip "Direct link to test.describe.skip")

Added in: v1.10 test.test.describe.skip

Declares a skipped test group, similarly to [test.describe()](/docs/api/class-test#test-describe). Tests in the skipped group are never run.

*   `test.describe.skip(title, callback)`
*   `test.describe.skip(title)`
*   `test.describe.skip(title, details, callback)`

**Usage**

    test.describe.skip('skipped group', () => {  test('example', async ({ page }) => {    // This test will not run  });});

You can also omit the title.

    test.describe.skip(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-describe-skip-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-skip-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-skip-option-callback)
    
    A callback that is run immediately when calling [test.describe.skip()](/docs/api/class-test#test-describe-skip). Any tests added in this callback will belong to the group, and will not be run.
    

* * *

### test.extend[â€‹](#test-extend "Direct link to test.extend")

Added in: v1.10 test.test.extend

Extends the `test` object by defining fixtures and/or options that can be used in the tests.

**Usage**

First define a fixture and/or an option.

*   TypeScript
*   JavaScript

    import { test as base } from '@playwright/test';import { TodoPage } from './todo-page';export type Options = { defaultItem: string };// Extend basic test by providing a "defaultItem" option and a "todoPage" fixture.export const test = base.extend<Options & { todoPage: TodoPage }>({  // Define an option and provide a default value.  // We can later override it in the config.  defaultItem: ['Do stuff', { option: true }],  // Define a fixture. Note that it can use built-in fixture "page"  // and a new option "defaultItem".  todoPage: async ({ page, defaultItem }, use) => {    const todoPage = new TodoPage(page);    await todoPage.goto();    await todoPage.addToDo(defaultItem);    await use(todoPage);    await todoPage.removeAll();  },});

my-test.js

    const base = require('@playwright/test');const { TodoPage } = require('./todo-page');// Extend basic test by providing a "defaultItem" option and a "todoPage" fixture.exports.test = base.test.extend({  // Define an option and provide a default value.  // We can later override it in the config.  defaultItem: ['Do stuff', { option: true }],  // Define a fixture. Note that it can use built-in fixture "page"  // and a new option "defaultItem".  todoPage: async ({ page, defaultItem }, use) => {    const todoPage = new TodoPage(page);    await todoPage.goto();    await todoPage.addToDo(defaultItem);    await use(todoPage);    await todoPage.removeAll();  },});

Then use the fixture in the test.

example.spec.ts

    import { test } from './my-test';test('test 1', async ({ todoPage }) => {  await todoPage.addToDo('my todo');  // ...});

Configure the option in config file.

*   TypeScript
*   JavaScript

playwright.config.ts

    import { defineConfig } from '@playwright/test';import type { Options } from './my-test';export default defineConfig<Options>({  projects: [    {      name: 'shopping',      use: { defaultItem: 'Buy milk' },    },    {      name: 'wellbeing',      use: { defaultItem: 'Exercise!' },    },  ]});

playwright.config.ts

    // @ts-checkmodule.exports = defineConfig({  projects: [    {      name: 'shopping',      use: { defaultItem: 'Buy milk' },    },    {      name: 'wellbeing',      use: { defaultItem: 'Exercise!' },    },  ]});

Learn more about [fixtures](/docs/test-fixtures) and [parametrizing tests](/docs/test-parameterize).

**Arguments**

*   `fixtures` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#test-extend-option-fixtures)
    
    An object containing fixtures and/or options. Learn more about [fixtures format](/docs/test-fixtures).
    

**Returns**

*   [Test](/docs/api/class-test "Test")[#](#test-extend-return)

* * *

### test.fail[â€‹](#test-fail "Direct link to test.fail")

Added in: v1.10 test.test.fail

Marks a test as "should fail". Playwright runs this test and ensures that it is actually failing. This is useful for documentation purposes to acknowledge that some functionality is broken until it is fixed.

To declare a "failing" test:

*   `test.fail(title, body)`
*   `test.fail(title, details, body)`

To annotate test as "failing" at runtime:

*   `test.fail(condition, description)`
*   `test.fail(callback, description)`
*   `test.fail()`

**Usage**

You can declare a test as failing, so that Playwright ensures it actually fails.

    import { test, expect } from '@playwright/test';test.fail('not yet ready', async ({ page }) => {  // ...});

If your test fails in some configurations, but not all, you can mark the test as failing inside the test body based on some condition. We recommend passing a `description` argument in this case.

    import { test, expect } from '@playwright/test';test('fail in WebKit', async ({ page, browserName }) => {  test.fail(browserName === 'webkit', 'This feature is not implemented for Mac yet');  // ...});

You can mark all tests in a file or [test.describe()](/docs/api/class-test#test-describe) group as "should fail" based on some condition with a single `test.fail(callback, description)` call.

    import { test, expect } from '@playwright/test';test.fail(({ browserName }) => browserName === 'webkit', 'not implemented yet');test('fail in WebKit 1', async ({ page }) => {  // ...});test('fail in WebKit 2', async ({ page }) => {  // ...});

You can also call `test.fail()` without arguments inside the test body to always mark the test as failed. We recommend declaring a failing test with `test.fail(title, body)` instead.

    import { test, expect } from '@playwright/test';test('less readable', async ({ page }) => {  test.fail();  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.42[#](#test-fail-option-title)
    
    Test title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-fail-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test()](/docs/api/class-test#test-call) for test details description.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo")) _(optional)_ Added in: v1.42[#](#test-fail-option-body)
    
    Test body that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    
*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-fail-option-condition)
    
    Test is marked as "should fail" when the condition is `true`.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-fail-option-callback)
    
    A function that returns whether to mark as "should fail", based on test fixtures. Test or tests are marked as "should fail" when the return value is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-fail-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### test.fail.only[â€‹](#test-fail-only "Direct link to test.fail.only")

Added in: v1.49 test.test.fail.only

You can use `test.fail.only` to focus on a specific test that is expected to fail. This is particularly useful when debugging a failing test or working on a specific issue.

To declare a focused "failing" test:

*   `test.fail.only(title, body)`
*   `test.fail.only(title, details, body)`

**Usage**

You can declare a focused failing test, so that Playwright runs only this test and ensures it actually fails.

    import { test, expect } from '@playwright/test';test.fail.only('focused failing test', async ({ page }) => {  // This test is expected to fail});test('not in the focused group', async ({ page }) => {  // This test will not run});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-fail-only-option-title)
    
    Test title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#test-fail-only-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for test details description.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo")) _(optional)_[#](#test-fail-only-option-body)
    
    Test body that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

* * *

### test.fixme[â€‹](#test-fixme "Direct link to test.fixme")

Added in: v1.10 test.test.fixme

Mark a test as "fixme", with the intention to fix it. Playwright will not run the test past the `test.fixme()` call.

To declare a "fixme" test:

*   `test.fixme(title, body)`
*   `test.fixme(title, details, body)`

To annotate test as "fixme" at runtime:

*   `test.fixme(condition, description)`
*   `test.fixme(callback, description)`
*   `test.fixme()`

**Usage**

You can declare a test as to be fixed, and Playwright will not run it.

    import { test, expect } from '@playwright/test';test.fixme('to be fixed', async ({ page }) => {  // ...});

If your test should be fixed in some configurations, but not all, you can mark the test as "fixme" inside the test body based on some condition. We recommend passing a `description` argument in this case. Playwright will run the test, but abort it immediately after the `test.fixme` call.

    import { test, expect } from '@playwright/test';test('to be fixed in Safari', async ({ page, browserName }) => {  test.fixme(browserName === 'webkit', 'This feature breaks in Safari for some reason');  // ...});

You can mark all tests in a file or [test.describe()](/docs/api/class-test#test-describe) group as "fixme" based on some condition with a single `test.fixme(callback, description)` call.

    import { test, expect } from '@playwright/test';test.fixme(({ browserName }) => browserName === 'webkit', 'Should figure out the issue');test('to be fixed in Safari 1', async ({ page }) => {  // ...});test('to be fixed in Safari 2', async ({ page }) => {  // ...});

You can also call `test.fixme()` without arguments inside the test body to always mark the test as failed. We recommend using `test.fixme(title, body)` instead.

    import { test, expect } from '@playwright/test';test('less readable', async ({ page }) => {  test.fixme();  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-fixme-option-title)
    
    Test title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-fixme-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test()](/docs/api/class-test#test-call) for test details description.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo")) _(optional)_[#](#test-fixme-option-body)
    
    Test body that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    
*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-fixme-option-condition)
    
    Test is marked as "fixme" when the condition is `true`.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-fixme-option-callback)
    
    A function that returns whether to mark as "fixme", based on test fixtures. Test or tests are marked as "fixme" when the return value is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-fixme-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### test.info[â€‹](#test-info "Direct link to test.info")

Added in: v1.10 test.test.info

Returns information about the currently running test. This method can only be called during the test execution, otherwise it throws.

**Usage**

    test('example test', async ({ page }) => {  // ...  await test.info().attach('screenshot', {    body: await page.screenshot(),    contentType: 'image/png',  });});

**Returns**

*   [TestInfo](/docs/api/class-testinfo "TestInfo")[#](#test-info-return)

* * *

### test.only[â€‹](#test-only "Direct link to test.only")

Added in: v1.10 test.test.only

Declares a focused test. If there are some focused tests or suites, all of them will be run but nothing else.

*   `test.only(title, body)`
*   `test.only(title, details, body)`

**Usage**

    test.only('focus this test', async ({ page }) => {  // Run only focused tests in the entire project.});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-only-option-title)
    
    Test title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-only-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test()](/docs/api/class-test#test-call) for test details description.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo"))[#](#test-only-option-body)
    
    Test body that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    

* * *

### test.setTimeout[â€‹](#test-set-timeout "Direct link to test.setTimeout")

Added in: v1.10 test.test.setTimeout

Changes the timeout for the test. Zero means no timeout. Learn more about [various timeouts](/docs/test-timeouts).

Timeout for the currently running test is available through [testInfo.timeout](/docs/api/class-testinfo#test-info-timeout).

**Usage**

*   Changing test timeout.
    
        test('very slow test', async ({ page }) => {  test.setTimeout(120000);  // ...});
    
*   Changing timeout from a slow `beforeEach` hook. Note that this affects the test timeout that is shared with `beforeEach` hooks.
    
        test.beforeEach(async ({ page }, testInfo) => {  // Extend timeout for all tests running this hook by 30 seconds.  test.setTimeout(testInfo.timeout + 30000);});
    
*   Changing timeout for a `beforeAll` or `afterAll` hook. Note this affects the hook's timeout, not the test timeout.
    
        test.beforeAll(async () => {  // Set timeout for this hook.  test.setTimeout(60000);});
    
*   Changing timeout for all tests in a [test.describe()](/docs/api/class-test#test-describe) group.
    
        test.describe('group', () => {  // Applies to all tests in this group.  test.describe.configure({ timeout: 60000 });  test('test one', async () => { /* ... */ });  test('test two', async () => { /* ... */ });  test('test three', async () => { /* ... */ });});
    

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#test-set-timeout-option-timeout)
    
    Timeout in milliseconds.
    

* * *

### test.skip[â€‹](#test-skip "Direct link to test.skip")

Added in: v1.10 test.test.skip

Skip a test. Playwright will not run the test past the `test.skip()` call.

Skipped tests are not supposed to be ever run. If you intend to fix the test, use [test.fixme()](/docs/api/class-test#test-fixme) instead.

To declare a skipped test:

*   `test.skip(title, body)`
*   `test.skip(title, details, body)`

To skip a test at runtime:

*   `test.skip(condition, description)`
*   `test.skip(callback, description)`
*   `test.skip()`

**Usage**

You can declare a skipped test, and Playwright will not run it.

    import { test, expect } from '@playwright/test';test.skip('never run', async ({ page }) => {  // ...});

If your test should be skipped in some configurations, but not all, you can skip the test inside the test body based on some condition. We recommend passing a `description` argument in this case. Playwright will run the test, but abort it immediately after the `test.skip` call.

    import { test, expect } from '@playwright/test';test('Safari-only test', async ({ page, browserName }) => {  test.skip(browserName !== 'webkit', 'This feature is Safari-only');  // ...});

You can skip all tests in a file or [test.describe()](/docs/api/class-test#test-describe) group based on some condition with a single `test.skip(callback, description)` call.

    import { test, expect } from '@playwright/test';test.skip(({ browserName }) => browserName !== 'webkit', 'Safari-only');test('Safari-only test 1', async ({ page }) => {  // ...});test('Safari-only test 2', async ({ page }) => {  // ...});

You can also call `test.skip()` without arguments inside the test body to always skip the test. However, we recommend using `test.skip(title, body)` instead.

    import { test, expect } from '@playwright/test';test('less readable', async ({ page }) => {  test.skip();  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-skip-option-title)
    
    Test title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-skip-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test()](/docs/api/class-test#test-call) for test details description.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures"), [TestInfo](/docs/api/class-testinfo "TestInfo")) _(optional)_[#](#test-skip-option-body)
    
    Test body that takes one or two arguments: an object with fixtures and optional [TestInfo](/docs/api/class-testinfo "TestInfo").
    
*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-skip-option-condition)
    
    Test is marked as "skipped" when the condition is `true`.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-skip-option-callback)
    
    A function that returns whether to mark as "skipped", based on test fixtures. Test or tests are marked as "skipped" when the return value is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-skip-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### test.slow[â€‹](#test-slow "Direct link to test.slow")

Added in: v1.10 test.test.slow

Marks a test as "slow". Slow test will be given triple the default timeout.

Note that [test.slow()](/docs/api/class-test#test-slow) cannot be used in a `beforeAll` or `afterAll` hook. Use [test.setTimeout()](/docs/api/class-test#test-set-timeout) instead.

*   `test.slow()`
*   `test.slow(condition, description)`
*   `test.slow(callback, description)`

**Usage**

You can mark a test as slow by calling `test.slow()` inside the test body.

    import { test, expect } from '@playwright/test';test('slow test', async ({ page }) => {  test.slow();  // ...});

If your test is slow in some configurations, but not all, you can mark it as slow based on a condition. We recommend passing a `description` argument in this case.

    import { test, expect } from '@playwright/test';test('slow in Safari', async ({ page, browserName }) => {  test.slow(browserName === 'webkit', 'This feature is slow in Safari');  // ...});

You can mark all tests in a file or [test.describe()](/docs/api/class-test#test-describe) group as "slow" based on some condition by passing a callback.

    import { test, expect } from '@playwright/test';test.slow(({ browserName }) => browserName === 'webkit', 'all tests are slow in Safari');test('slow in Safari 1', async ({ page }) => {  // ...});test('fail in Safari 2', async ({ page }) => {  // ...});

**Arguments**

*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-slow-option-condition)
    
    Test is marked as "slow" when the condition is `true`.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Fixtures](/docs/api/class-fixtures "Fixtures")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-slow-option-callback)
    
    A function that returns whether to mark as "slow", based on test fixtures. Test or tests are marked as "slow" when the return value is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-slow-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### test.step[â€‹](#test-step "Direct link to test.step")

Added in: v1.10 test.test.step

Declares a test step that is shown in the report.

**Usage**

    import { test, expect } from '@playwright/test';test('test', async ({ page }) => {  await test.step('Log in', async () => {    // ...  });  await test.step('Outer step', async () => {    // ...    // You can nest steps inside each other.    await test.step('Inner step', async () => {      // ...    });  });});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-step-option-title)
    
    Step name.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([TestStepInfo](/docs/api/class-teststepinfo "TestStepInfo")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#test-step-option-body)
    
    Step body.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `box` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.39[#](#test-step-option-box)
        
        Whether to box the step in the report. Defaults to `false`. When the step is boxed, errors thrown from the step internals point to the step call site. See below for more details.
        
    *   `location` [Location](/docs/api/class-location "Location") _(optional)_ Added in: v1.48[#](#test-step-option-location)
        
        Specifies a custom location for the step to be shown in test reports and trace viewer. By default, location of the [test.step()](/docs/api/class-test#test-step) call is shown.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.50[#](#test-step-option-timeout)
        
        The maximum time, in milliseconds, allowed for the step to complete. If the step does not complete within the specified timeout, the [test.step()](/docs/api/class-test#test-step) method will throw a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Defaults to `0` (no timeout).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#test-step-return)

**Details**

The method returns the value returned by the step callback.

    import { test, expect } from '@playwright/test';test('test', async ({ page }) => {  const user = await test.step('Log in', async () => {    // ...    return 'john';  });  expect(user).toBe('john');});

**Decorator**

You can use TypeScript method decorators to turn a method into a step. Each call to the decorated method will show up as a step in the report.

    function step(target: Function, context: ClassMethodDecoratorContext) {  return function replacementMethod(...args: any) {    const name = this.constructor.name + '.' + (context.name as string);    return test.step(name, async () => {      return await target.call(this, ...args);    }, { box: true });  };}class LoginPage {  constructor(readonly page: Page) {}  @step  async login() {    const account = { username: 'Alice', password: 's3cr3t' };    await this.page.getByLabel('Username or email address').fill(account.username);    await this.page.getByLabel('Password').fill(account.password);    await this.page.getByRole('button', { name: 'Sign in' }).click();    await expect(this.page.getByRole('button', { name: 'View profile and more' })).toBeVisible();  }}test('example', async ({ page }) => {  const loginPage = new LoginPage(page);  await loginPage.login();});

**Boxing**

When something inside a step fails, you would usually see the error pointing to the exact action that failed. For example, consider the following login step:

    async function login(page) {  await test.step('login', async () => {    const account = { username: 'Alice', password: 's3cr3t' };    await page.getByLabel('Username or email address').fill(account.username);    await page.getByLabel('Password').fill(account.password);    await page.getByRole('button', { name: 'Sign in' }).click();    await expect(page.getByRole('button', { name: 'View profile and more' })).toBeVisible();  });}test('example', async ({ page }) => {  await page.goto('https://github.com/login');  await login(page);});

    Error: Timed out 5000ms waiting for expect(locator).toBeVisible()  ... error details omitted ...   8 |     await page.getByRole('button', { name: 'Sign in' }).click();>  9 |     await expect(page.getByRole('button', { name: 'View profile and more' })).toBeVisible();     |                                                                               ^  10 |   });

As we see above, the test may fail with an error pointing inside the step. If you would like the error to highlight the "login" step instead of its internals, use the `box` option. An error inside a boxed step points to the step call site.

    async function login(page) {  await test.step('login', async () => {    // ...  }, { box: true });  // Note the "box" option here.}

    Error: Timed out 5000ms waiting for expect(locator).toBeVisible()  ... error details omitted ...  14 |   await page.goto('https://github.com/login');> 15 |   await login(page);     |         ^  16 | });

You can also create a TypeScript decorator for a boxed step, similar to a regular step decorator above:

    function boxedStep(target: Function, context: ClassMethodDecoratorContext) {  return function replacementMethod(...args: any) {    const name = this.constructor.name + '.' + (context.name as string);    return test.step(name, async () => {      return await target.call(this, ...args);    }, { box: true });  // Note the "box" option here.  };}class LoginPage {  constructor(readonly page: Page) {}  @boxedStep  async login() {    // ....  }}test('example', async ({ page }) => {  const loginPage = new LoginPage(page);  await loginPage.login();  // <-- Error will be reported on this line.});

* * *

### test.step.skip[â€‹](#test-step-skip "Direct link to test.step.skip")

Added in: v1.50 test.test.step.skip

Mark a test step as "skip" to temporarily disable its execution, useful for steps that are currently failing and planned for a near-term fix. Playwright will not run the step. See also [testStepInfo.skip()](/docs/api/class-teststepinfo#test-step-info-skip-2).

We recommend [testStepInfo.skip()](/docs/api/class-teststepinfo#test-step-info-skip-1) instead.

**Usage**

You can declare a skipped step, and Playwright will not run it.

    import { test, expect } from '@playwright/test';test('my test', async ({ page }) => {  // ...  await test.step.skip('not yet ready', async () => {    // ...  });});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-step-skip-option-title)
    
    Step name.
    
*   `body` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")():[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#test-step-skip-option-body)
    
    Step body.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `box` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#test-step-skip-option-box)
        
        Whether to box the step in the report. Defaults to `false`. When the step is boxed, errors thrown from the step internals point to the step call site. See below for more details.
        
    *   `location` [Location](/docs/api/class-location "Location") _(optional)_[#](#test-step-skip-option-location)
        
        Specifies a custom location for the step to be shown in test reports and trace viewer. By default, location of the [test.step()](/docs/api/class-test#test-step) call is shown.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#test-step-skip-option-timeout)
        
        Maximum time in milliseconds for the step to finish. Defaults to `0` (no timeout).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#test-step-skip-return)

* * *

### test.use[â€‹](#test-use "Direct link to test.use")

Added in: v1.10 test.test.use

Specifies options or fixtures to use in a single test file or a [test.describe()](/docs/api/class-test#test-describe) group. Most useful to set an option, for example set `locale` to configure `context` fixture.

**Usage**

    import { test, expect } from '@playwright/test';test.use({ locale: 'en-US' });test('test with locale', async ({ page }) => {  // Default context and page have locale as specified});

**Arguments**

*   `options` [TestOptions](/docs/api/class-testoptions "TestOptions")[#](#test-use-option-fixtures)
    
    An object with local options.
    

**Details**

`test.use` can be called either in the global scope or inside `test.describe`. It is an error to call it within `beforeEach` or `beforeAll`.

It is also possible to override a fixture by providing a function.

    import { test, expect } from '@playwright/test';test.use({  locale: async ({}, use) => {    // Read locale from some configuration file.    const locale = await fs.promises.readFile('test-locale', 'utf-8');    await use(locale);  },});test('test with locale', async ({ page }) => {  // Default context and page have locale as specified});

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### test.expect[â€‹](#test-expect "Direct link to test.expect")

Added in: v1.10 test.test.expect

`expect` function can be used to create test assertions. Read more about [test assertions](/docs/test-assertions).

**Usage**

    test('example', async ({ page }) => {  await test.expect(page).toHaveTitle('Title');});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### test.describe.parallel[â€‹](#test-describe-parallel "Direct link to test.describe.parallel")

Added in: v1.10 test.test.describe.parallel

Discouraged

See [test.describe.configure()](/docs/api/class-test#test-describe-configure) for the preferred way of configuring the execution mode.

Declares a group of tests that could be run in parallel. By default, tests in a single test file run one after another, but using [test.describe.parallel()](/docs/api/class-test#test-describe-parallel) allows them to run in parallel.

*   `test.describe.parallel(title, callback)`
*   `test.describe.parallel(callback)`
*   `test.describe.parallel(title, details, callback)`

**Usage**

    test.describe.parallel('group', () => {  test('runs in parallel 1', async ({ page }) => {});  test('runs in parallel 2', async ({ page }) => {});});

Note that parallel tests are executed in separate processes and cannot share any state or global variables. Each of the parallel tests executes all relevant hooks.

You can also omit the title.

    test.describe.parallel(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-describe-parallel-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-parallel-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-parallel-option-callback)
    
    A callback that is run immediately when calling [test.describe.parallel()](/docs/api/class-test#test-describe-parallel). Any tests added in this callback will belong to the group.
    

* * *

### test.describe.parallel.only[â€‹](#test-describe-parallel-only "Direct link to test.describe.parallel.only")

Added in: v1.10 test.test.describe.parallel.only

Discouraged

See [test.describe.configure()](/docs/api/class-test#test-describe-configure) for the preferred way of configuring the execution mode.

Declares a focused group of tests that could be run in parallel. This is similar to [test.describe.parallel()](/docs/api/class-test#test-describe-parallel), but focuses the group. If there are some focused tests or suites, all of them will be run but nothing else.

*   `test.describe.parallel.only(title, callback)`
*   `test.describe.parallel.only(callback)`
*   `test.describe.parallel.only(title, details, callback)`

**Usage**

    test.describe.parallel.only('group', () => {  test('runs in parallel 1', async ({ page }) => {});  test('runs in parallel 2', async ({ page }) => {});});

You can also omit the title.

    test.describe.parallel.only(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-describe-parallel-only-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-parallel-only-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-parallel-only-option-callback)
    
    A callback that is run immediately when calling [test.describe.parallel.only()](/docs/api/class-test#test-describe-parallel-only). Any tests added in this callback will belong to the group.
    

* * *

### test.describe.serial[â€‹](#test-describe-serial "Direct link to test.describe.serial")

Added in: v1.10 test.test.describe.serial

Discouraged

See [test.describe.configure()](/docs/api/class-test#test-describe-configure) for the preferred way of configuring the execution mode.

Declares a group of tests that should always be run serially. If one of the tests fails, all subsequent tests are skipped. All tests in a group are retried together.

note

Using serial is not recommended. It is usually better to make your tests isolated, so they can be run independently.

*   `test.describe.serial(title, callback)`
*   `test.describe.serial(title)`
*   `test.describe.serial(title, details, callback)`

**Usage**

    test.describe.serial('group', () => {  test('runs first', async ({ page }) => {});  test('runs second', async ({ page }) => {});});

You can also omit the title.

    test.describe.serial(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-describe-serial-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-serial-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-serial-option-callback)
    
    A callback that is run immediately when calling [test.describe.serial()](/docs/api/class-test#test-describe-serial). Any tests added in this callback will belong to the group.
    

* * *

### test.describe.serial.only[â€‹](#test-describe-serial-only "Direct link to test.describe.serial.only")

Added in: v1.10 test.test.describe.serial.only

Discouraged

See [test.describe.configure()](/docs/api/class-test#test-describe-configure) for the preferred way of configuring the execution mode.

Declares a focused group of tests that should always be run serially. If one of the tests fails, all subsequent tests are skipped. All tests in a group are retried together. If there are some focused tests or suites, all of them will be run but nothing else.

note

Using serial is not recommended. It is usually better to make your tests isolated, so they can be run independently.

*   `test.describe.serial.only(title, callback)`
*   `test.describe.serial.only(title)`
*   `test.describe.serial.only(title, details, callback)`

**Usage**

    test.describe.serial.only('group', () => {  test('runs first', async ({ page }) => {  });  test('runs second', async ({ page }) => {  });});

You can also omit the title.

    test.describe.serial.only(() => {  // ...});

**Arguments**

*   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-describe-serial-only-option-title)
    
    Group title.
    
*   `details` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.42[#](#test-describe-serial-only-option-details)
    
    *   `tag` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
    *   `annotation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_
        
        *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
    
    See [test.describe()](/docs/api/class-test#test-describe) for details description.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#test-describe-serial-only-option-callback)
    
    A callback that is run immediately when calling [test.describe.serial.only()](/docs/api/class-test#test-describe-serial-only). Any tests added in this callback will belong to the group.

# Playwright Library

Playwright Library
==================

Playwright module provides a method to launch a browser instance. The following is a typical example of using Playwright to drive automation:

    const { chromium, firefox, webkit } = require('playwright');(async () => {  const browser = await chromium.launch();  // Or 'firefox' or 'webkit'.  const page = await browser.newPage();  await page.goto('http://example.com');  // other actions...  await browser.close();})();

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### chromium[â€‹](#playwright-chromium "Direct link to chromium")

Added before v1.9 playwright.chromium

This object can be used to launch or connect to Chromium, returning instances of [Browser](/docs/api/class-browser "Browser").

**Usage**

    playwright.chromium

**Type**

*   [BrowserType](/docs/api/class-browsertype "BrowserType")

* * *

### devices[â€‹](#playwright-devices "Direct link to devices")

Added before v1.9 playwright.devices

Returns a dictionary of devices to be used with [browser.newContext()](/docs/api/class-browser#browser-new-context) or [browser.newPage()](/docs/api/class-browser#browser-new-page).

    const { webkit, devices } = require('playwright');const iPhone = devices['iPhone 6'];(async () => {  const browser = await webkit.launch();  const context = await browser.newContext({    ...iPhone  });  const page = await context.newPage();  await page.goto('http://example.com');  // other actions...  await browser.close();})();

**Usage**

    playwright.devices

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")

* * *

### errors[â€‹](#playwright-errors "Direct link to errors")

Added before v1.9 playwright.errors

Playwright methods might throw errors if they are unable to fulfill a request. For example, [locator.waitFor()](/docs/api/class-locator#locator-wait-for) might fail if the selector doesn't match any nodes during the given timeframe.

For certain types of errors Playwright uses specific error classes. These classes are available via [`playwright.errors`](#playwright-errors).

An example of handling a timeout error:

    try {  await page.locator('.foo').waitFor();} catch (e) {  if (e instanceof playwright.errors.TimeoutError) {    // Do something if this is a timeout.  }}

**Usage**

    playwright.errors

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `TimeoutError` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        A class of [TimeoutError](/docs/api/class-timeouterror "TimeoutError").
        

* * *

### firefox[â€‹](#playwright-firefox "Direct link to firefox")

Added before v1.9 playwright.firefox

This object can be used to launch or connect to Firefox, returning instances of [Browser](/docs/api/class-browser "Browser").

**Usage**

    playwright.firefox

**Type**

*   [BrowserType](/docs/api/class-browsertype "BrowserType")

* * *

### request[â€‹](#playwright-request "Direct link to request")

Added in: v1.16 playwright.request

Exposes API that can be used for the Web API testing.

**Usage**

    playwright.request

**Type**

*   [APIRequest](/docs/api/class-apirequest "APIRequest")

* * *

### selectors[â€‹](#playwright-selectors "Direct link to selectors")

Added before v1.9 playwright.selectors

Selectors can be used to install custom selector engines. See [extensibility](/docs/extensibility) for more information.

**Usage**

    playwright.selectors

**Type**

*   [Selectors](/docs/api/class-selectors "Selectors")

* * *

### webkit[â€‹](#playwright-webkit "Direct link to webkit")

Added before v1.9 playwright.webkit

This object can be used to launch or connect to WebKit, returning instances of [Browser](/docs/api/class-browser "Browser").

**Usage**

    playwright.webkit

**Type**

*   [BrowserType](/docs/api/class-browsertype "BrowserType")

# APIRequest

APIRequest
==========

Exposes API that can be used for the Web API testing. This class is used for creating [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") instance which in turn can be used for sending web requests. An instance of this class can be obtained via [playwright.request](/docs/api/class-playwright#playwright-request). For more information see [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext").

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### newContext[â€‹](#api-request-new-context "Direct link to newContext")

Added in: v1.16 apiRequest.newContext

Creates new instances of [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext").

**Usage**

    await apiRequest.newContext();await apiRequest.newContext(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `baseURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-new-context-option-base-url)
        
        Methods like [apiRequestContext.get()](/docs/api/class-apirequestcontext#api-request-context-get) take the base URL into consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Examples:
        
        *   baseURL: `http://localhost:3000` and sending request to `/bar.html` results in `http://localhost:3000/bar.html`
        *   baseURL: `http://localhost:3000/foo/` and sending request to `./bar.html` results in `http://localhost:3000/foo/bar.html`
        *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
    *   `clientCertificates` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: 1.46[#](#api-request-new-context-option-client-certificates)
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
            
        *   `certPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the certificate in PEM format.
            
        *   `cert` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the certificate in PEM format.
            
        *   `keyPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the private key in PEM format.
            
        *   `key` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the private key in PEM format.
            
        *   `pfxPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `pfx` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `passphrase` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Passphrase for the private key (PEM or PFX).
            
        
        TLS Client Authentication allows the server to request a client certificate and verify it.
        
        **Details**
        
        An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
        
        Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.
        
        note
        
        When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
        
    *   `extraHTTPHeaders` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-new-context-option-extra-http-headers)
        
        An object containing additional HTTP headers to be sent with every request. Defaults to none.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.51[#](#api-request-new-context-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `httpCredentials` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#api-request-new-context-option-http-credentials)
        
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Restrain sending http credentials on specific origin (scheme://host:port).
            
        *   `send` "unauthorized" | "always" _(optional)_
            
            This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
            
        
        Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-new-context-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.52[#](#api-request-new-context-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects. This can be overwritten for each request individually.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#api-request-new-context-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings.
        
    *   `storageState` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#api-request-new-context-option-storage-state)
        
        *   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Unix time in seconds.
                
            *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
                
            *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
                
            *   `sameSite` "Strict" | "Lax" | "None"
                
        *   `origins` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `localStorage` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
                
                *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                    
                *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                    
        
        Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state) or [apiRequestContext.storageState()](/docs/api/class-apirequestcontext#api-request-context-storage-state). Either a path to the file with saved storage, or the value returned by one of [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state) or [apiRequestContext.storageState()](/docs/api/class-apirequestcontext#api-request-context-storage-state) methods.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-new-context-option-timeout)
        
        Maximum time in milliseconds to wait for the response. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        
    *   `userAgent` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-new-context-option-user-agent)
        
        Specific user agent to use in this context.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext")\>[#](#api-request-new-context-return)

# APIRequestContext

APIRequestContext
=================

This API is used for the Web API testing. You can use it to trigger API endpoints, configure micro-services, prepare environment or the service to your e2e test.

Each Playwright browser context has associated with it [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") instance which shares cookie storage with the browser context and can be accessed via [browserContext.request](/docs/api/class-browsercontext#browser-context-request) or [page.request](/docs/api/class-page#page-request). It is also possible to create a new APIRequestContext instance manually by calling [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context).

**Cookie management**

[APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") returned by [browserContext.request](/docs/api/class-browsercontext#browser-context-request) and [page.request](/docs/api/class-page#page-request) shares cookie storage with the corresponding [BrowserContext](/docs/api/class-browsercontext "BrowserContext"). Each API request will have `Cookie` header populated with the values from the browser context. If the API response contains `Set-Cookie` header it will automatically update [BrowserContext](/docs/api/class-browsercontext "BrowserContext") cookies and requests made from the page will pick them up. This means that if you log in using this API, your e2e test will be logged in and vice versa.

If you want API requests to not interfere with the browser cookies you should create a new [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") by calling [apiRequest.newContext()](/docs/api/class-apirequest#api-request-new-context). Such `APIRequestContext` object will have its own isolated cookie storage.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### delete[â€‹](#api-request-context-delete "Direct link to delete")

Added in: v1.16 apiRequestContext.delete

Sends HTTP(S) [DELETE](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    await apiRequestContext.delete(url);await apiRequestContext.delete(url, options);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-request-context-delete-option-url)
    
    Target URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_ Added in: v1.17[#](#api-request-context-delete-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-delete-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_ Added in: v1.17[#](#api-request-context-delete-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-delete-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-delete-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-delete-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-delete-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: v1.17[#](#api-request-context-delete-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-delete-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-delete-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-delete-return)

* * *

### dispose[â€‹](#api-request-context-dispose "Direct link to dispose")

Added in: v1.16 apiRequestContext.dispose

All responses returned by [apiRequestContext.get()](/docs/api/class-apirequestcontext#api-request-context-get) and similar methods are stored in the memory, so that you can later call [apiResponse.body()](/docs/api/class-apiresponse#api-response-body).This method discards all its resources, calling any method on disposed [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") will throw an exception.

**Usage**

    await apiRequestContext.dispose();await apiRequestContext.dispose(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `reason` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.45[#](#api-request-context-dispose-option-reason)
        
        The reason to be reported to the operations interrupted by the context disposal.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#api-request-context-dispose-return)

* * *

### fetch[â€‹](#api-request-context-fetch "Direct link to fetch")

Added in: v1.16 apiRequestContext.fetch

Sends HTTP(S) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

JSON objects can be passed directly to the request:

    await request.fetch('https://example.com/api/createBook', {  method: 'post',  data: {    title: 'Book Title',    author: 'John Doe',  }});

The common way to send file(s) in the body of a request is to upload them as form fields with `multipart/form-data` encoding, by specifiying the `multipart` parameter:

    const form = new FormData();form.set('name', 'John');form.append('name', 'Doe');// Send two file fields with the same name.form.append('file', new File(['console.log(2024);'], 'f1.js', { type: 'text/javascript' }));form.append('file', new File(['hello'], 'f2.txt', { type: 'text/plain' }));await request.fetch('https://example.com/api/uploadForm', {  multipart: form});

**Arguments**

*   `urlOrRequest` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Request](/docs/api/class-request "Request")[#](#api-request-context-fetch-option-url-or-request)
    
    Target URL or Request to get all parameters from.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#api-request-context-fetch-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-fetch-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_[#](#api-request-context-fetch-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-fetch-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-fetch-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-fetch-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-fetch-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `method` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-fetch-option-method)
        
        If set changes the fetch method (e.g. [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) or [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST)). If not specified, GET method is used.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_[#](#api-request-context-fetch-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-fetch-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-fetch-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-fetch-return)

* * *

### get[â€‹](#api-request-context-get "Direct link to get")

Added in: v1.16 apiRequestContext.get

Sends HTTP(S) [GET](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

Request parameters can be configured with `params` option, they will be serialized into the URL search parameters:

    // Passing params as objectawait request.get('https://example.com/api/getText', {  params: {    'isbn': '1234',    'page': 23,  }});// Passing params as URLSearchParamsconst searchParams = new URLSearchParams();searchParams.set('isbn', '1234');searchParams.append('page', 23);searchParams.append('page', 24);await request.get('https://example.com/api/getText', { params: searchParams });// Passing params as stringconst queryString = 'isbn=1234&page=23&page=24';await request.get('https://example.com/api/getText', { params: queryString });

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-request-context-get-option-url)
    
    Target URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_ Added in: v1.26[#](#api-request-context-get-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-get-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_ Added in: v1.26[#](#api-request-context-get-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-get-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-get-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-get-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-get-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: v1.26[#](#api-request-context-get-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-get-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-get-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-get-return)

* * *

### head[â€‹](#api-request-context-head "Direct link to head")

Added in: v1.16 apiRequestContext.head

Sends HTTP(S) [HEAD](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/HEAD) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    await apiRequestContext.head(url);await apiRequestContext.head(url, options);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-request-context-head-option-url)
    
    Target URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_ Added in: v1.26[#](#api-request-context-head-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-head-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_ Added in: v1.26[#](#api-request-context-head-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-head-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-head-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-head-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-head-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: v1.26[#](#api-request-context-head-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-head-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-head-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-head-return)

* * *

### patch[â€‹](#api-request-context-patch "Direct link to patch")

Added in: v1.16 apiRequestContext.patch

Sends HTTP(S) [PATCH](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    await apiRequestContext.patch(url);await apiRequestContext.patch(url, options);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-request-context-patch-option-url)
    
    Target URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#api-request-context-patch-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-patch-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_[#](#api-request-context-patch-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-patch-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-patch-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-patch-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-patch-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_[#](#api-request-context-patch-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-patch-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-patch-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-patch-return)

* * *

### post[â€‹](#api-request-context-post "Direct link to post")

Added in: v1.16 apiRequestContext.post

Sends HTTP(S) [POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

JSON objects can be passed directly to the request:

    await request.post('https://example.com/api/createBook', {  data: {    title: 'Book Title',    author: 'John Doe',  }});

To send form data to the server use `form` option. Its value will be encoded into the request body with `application/x-www-form-urlencoded` encoding (see below how to use `multipart/form-data` form encoding to send files):

    await request.post('https://example.com/api/findBook', {  form: {    title: 'Book Title',    author: 'John Doe',  }});

The common way to send file(s) in the body of a request is to upload them as form fields with `multipart/form-data` encoding. Use [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") to construct request body and pass it to the request as `multipart` parameter:

    const form = new FormData();form.set('name', 'John');form.append('name', 'Doe');// Send two file fields with the same name.form.append('file', new File(['console.log(2024);'], 'f1.js', { type: 'text/javascript' }));form.append('file', new File(['hello'], 'f2.txt', { type: 'text/plain' }));await request.post('https://example.com/api/uploadForm', {  multipart: form});

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-request-context-post-option-url)
    
    Target URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#api-request-context-post-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-post-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_[#](#api-request-context-post-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-post-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-post-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-post-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-post-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_[#](#api-request-context-post-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-post-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-post-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-post-return)

* * *

### put[â€‹](#api-request-context-put "Direct link to put")

Added in: v1.16 apiRequestContext.put

Sends HTTP(S) [PUT](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT) request and returns its response. The method will populate request cookies from the context and update context cookies from the response. The method will automatically follow redirects.

**Usage**

    await apiRequestContext.put(url);await apiRequestContext.put(url, options);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-request-context-put-option-url)
    
    Target URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `data` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#api-request-context-put-option-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `failOnStatusCode` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-put-option-fail-on-status-code)
        
        Whether to throw on response codes other than 2xx and 3xx. By default response object is returned for all status codes.
        
    *   `form` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") _(optional)_[#](#api-request-context-put-option-form)
        
        Provides an object that will be serialized as html form using `application/x-www-form-urlencoded` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `application/x-www-form-urlencoded` unless explicitly provided.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#api-request-context-put-option-headers)
        
        Allows to set HTTP headers. These headers will apply to the fetched request as well as any redirects initiated by it.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#api-request-context-put-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.26[#](#api-request-context-put-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#api-request-context-put-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `multipart` [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData "FormData") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [ReadStream](https://nodejs.org/api/fs.html#class-fsreadstream "ReadStream") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_[#](#api-request-context-put-option-multipart)
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File name
            
        *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            File type
            
        *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
            
            File content
            
        
        Provides an object that will be serialized as html form using `multipart/form-data` encoding and sent as this request body. If this parameter is specified `content-type` header will be set to `multipart/form-data` unless explicitly provided. File values can be passed either as [`fs.ReadStream`](https://nodejs.org/api/fs.html#fs_class_fs_readstream) or as file-like object containing file name, mime-type and its content.
        
    *   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> | [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams "URLSearchParams") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-put-option-params)
        
        Query parameters to be sent with the URL.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#api-request-context-put-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#api-request-context-put-return)

* * *

### storageState[â€‹](#api-request-context-storage-state "Direct link to storageState")

Added in: v1.16 apiRequestContext.storageState

Returns storage state for this request context, contains current cookies and local storage snapshot if it was passed to the constructor.

**Usage**

    await apiRequestContext.storageState();await apiRequestContext.storageState(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `indexedDB` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.51[#](#api-request-context-storage-state-option-indexed-db)
        
        Set to `true` to include IndexedDB in the storage state snapshot.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#api-request-context-storage-state-option-path)
        
        The file path to save the storage state to. If [path](/docs/api/class-apirequestcontext#api-request-context-storage-state-option-path) is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won't be saved to the disk.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#api-request-context-storage-state-return)
    *   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Unix time in seconds.
            
        *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
    *   `origins` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `localStorage` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

# APIResponse

APIResponse
===========

[APIResponse](/docs/api/class-apiresponse "APIResponse") class represents responses returned by [apiRequestContext.get()](/docs/api/class-apirequestcontext#api-request-context-get) and similar methods.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### body[â€‹](#api-response-body "Direct link to body")

Added in: v1.16 apiResponse.body

Returns the buffer with response body.

**Usage**

    await apiResponse.body();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#api-response-body-return)

* * *

### dispose[â€‹](#api-response-dispose "Direct link to dispose")

Added in: v1.16 apiResponse.dispose

Disposes the body of this response. If not called then the body will stay in memory until the context closes.

**Usage**

    await apiResponse.dispose();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#api-response-dispose-return)

* * *

### headers[â€‹](#api-response-headers "Direct link to headers")

Added in: v1.16 apiResponse.headers

An object with all the response HTTP headers associated with this response.

**Usage**

    apiResponse.headers();

**Returns**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#api-response-headers-return)

* * *

### headersArray[â€‹](#api-response-headers-array "Direct link to headersArray")

Added in: v1.16 apiResponse.headersArray

An array with all the response HTTP headers associated with this response. Header names are not lower-cased. Headers with multiple entries, such as `Set-Cookie`, appear in the array multiple times.

**Usage**

    apiResponse.headersArray();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#api-response-headers-array-return)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Name of the header.
        
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Value of the header.
        

* * *

### json[â€‹](#api-response-json "Direct link to json")

Added in: v1.16 apiResponse.json

Returns the JSON representation of response body.

This method will throw if the response body is not parsable via `JSON.parse`.

**Usage**

    await apiResponse.json();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#api-response-json-return)

* * *

### ok[â€‹](#api-response-ok "Direct link to ok")

Added in: v1.16 apiResponse.ok

Contains a boolean stating whether the response was successful (status in the range 200-299) or not.

**Usage**

    apiResponse.ok();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#api-response-ok-return)

* * *

### status[â€‹](#api-response-status "Direct link to status")

Added in: v1.16 apiResponse.status

Contains the status code of the response (e.g., 200 for a success).

**Usage**

    apiResponse.status();

**Returns**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#api-response-status-return)

* * *

### statusText[â€‹](#api-response-status-text "Direct link to statusText")

Added in: v1.16 apiResponse.statusText

Contains the status text of the response (e.g. usually an "OK" for a success).

**Usage**

    apiResponse.statusText();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-response-status-text-return)

* * *

### text[â€‹](#api-response-text "Direct link to text")

Added in: v1.16 apiResponse.text

Returns the text representation of response body.

**Usage**

    await apiResponse.text();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#api-response-text-return)

* * *

### url[â€‹](#api-response-url "Direct link to url")

Added in: v1.16 apiResponse.url

Contains the URL of the response.

**Usage**

    apiResponse.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#api-response-url-return)

# Browser

Browser
=======

A Browser is created via [browserType.launch()](/docs/api/class-browsertype#browser-type-launch). An example of using a [Browser](/docs/api/class-browser "Browser") to create a [Page](/docs/api/class-page "Page"):

    const { firefox } = require('playwright');  // Or 'chromium' or 'webkit'.(async () => {  const browser = await firefox.launch();  const page = await browser.newPage();  await page.goto('https://example.com');  await browser.close();})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### browserType[â€‹](#browser-browser-type "Direct link to browserType")

Added in: v1.23 browser.browserType

Get the browser type (chromium, firefox or webkit) that the browser belongs to.

**Usage**

    browser.browserType();

**Returns**

*   [BrowserType](/docs/api/class-browsertype "BrowserType")[#](#browser-browser-type-return)

* * *

### close[â€‹](#browser-close "Direct link to close")

Added before v1.9 browser.close

In case this browser is obtained using [browserType.launch()](/docs/api/class-browsertype#browser-type-launch), closes the browser and all of its pages (if any were opened).

In case this browser is connected to, clears all created contexts belonging to this browser and disconnects from the browser server.

note

This is similar to force-quitting the browser. To close pages gracefully and ensure you receive page close events, call [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) on any [BrowserContext](/docs/api/class-browsercontext "BrowserContext") instances you explicitly created earlier using [browser.newContext()](/docs/api/class-browser#browser-new-context) **before** calling [browser.close()](/docs/api/class-browser#browser-close).

The [Browser](/docs/api/class-browser "Browser") object itself is considered to be disposed and cannot be used anymore.

**Usage**

    await browser.close();await browser.close(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `reason` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.40[#](#browser-close-option-reason)
        
        The reason to be reported to the operations interrupted by the browser closure.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-close-return)

* * *

### contexts[â€‹](#browser-contexts "Direct link to contexts")

Added before v1.9 browser.contexts

Returns an array of all open browser contexts. In a newly created browser, this will return zero browser contexts.

**Usage**

    const browser = await pw.webkit.launch();console.log(browser.contexts().length); // prints `0`const context = await browser.newContext();console.log(browser.contexts().length); // prints `1`

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[BrowserContext](/docs/api/class-browsercontext "BrowserContext")\>[#](#browser-contexts-return)

* * *

### isConnected[â€‹](#browser-is-connected "Direct link to isConnected")

Added before v1.9 browser.isConnected

Indicates that the browser is connected.

**Usage**

    browser.isConnected();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#browser-is-connected-return)

* * *

### newBrowserCDPSession[â€‹](#browser-new-browser-cdp-session "Direct link to newBrowserCDPSession")

Added in: v1.11 browser.newBrowserCDPSession

note

CDP Sessions are only supported on Chromium-based browsers.

Returns the newly created browser session.

**Usage**

    await browser.newBrowserCDPSession();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[CDPSession](/docs/api/class-cdpsession "CDPSession")\>[#](#browser-new-browser-cdp-session-return)

* * *

### newContext[â€‹](#browser-new-context "Direct link to newContext")

Added before v1.9 browser.newContext

Creates a new browser context. It won't share cookies/cache with other browser contexts.

note

If directly using this method to create [BrowserContext](/docs/api/class-browsercontext "BrowserContext")s, it is best practice to explicitly close the returned context via [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) when your code is done with the [BrowserContext](/docs/api/class-browsercontext "BrowserContext"), and before calling [browser.close()](/docs/api/class-browser#browser-close). This will ensure the `context` is closed gracefully and any artifactsâ€”like HARs and videosâ€”are fully flushed and saved.

**Usage**

    (async () => {  const browser = await playwright.firefox.launch();  // Or 'chromium' or 'webkit'.  // Create a new incognito browser context.  const context = await browser.newContext();  // Create a new page in a pristine context.  const page = await context.newPage();  await page.goto('https://example.com');  // Gracefully close up everything  await context.close();  await browser.close();})();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `acceptDownloads` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-accept-downloads)
        
        Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
        
    *   `baseURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-context-option-base-url)
        
        When using [page.goto()](/docs/api/class-page#page-goto), [page.route()](/docs/api/class-page#page-route), [page.waitForURL()](/docs/api/class-page#page-wait-for-url), [page.waitForRequest()](/docs/api/class-page#page-wait-for-request), or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
        
        *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
        *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
        *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
    *   `bypassCSP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-bypass-csp)
        
        Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
        
    *   `clientCertificates` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: 1.46[#](#browser-new-context-option-client-certificates)
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
            
        *   `certPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the certificate in PEM format.
            
        *   `cert` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the certificate in PEM format.
            
        *   `keyPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the private key in PEM format.
            
        *   `key` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the private key in PEM format.
            
        *   `pfxPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `pfx` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `passphrase` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Passphrase for the private key (PEM or PFX).
            
        
        TLS Client Authentication allows the server to request a client certificate and verify it.
        
        **Details**
        
        An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
        
        Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.
        
        note
        
        When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
        
    *   `colorScheme` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference" _(optional)_[#](#browser-new-context-option-color-scheme)
        
        Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'light'`.
        
    *   `contrast` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "no-preference" | "more" _(optional)_[#](#browser-new-context-option-contrast)
        
        Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `deviceScaleFactor` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-new-context-option-device-scale-factor)
        
        Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/docs/emulation#devices).
        
    *   `extraHTTPHeaders` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-new-context-option-extra-http-headers)
        
        An object containing additional HTTP headers to be sent with every request. Defaults to none.
        
    *   `forcedColors` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "active" | "none" _(optional)_[#](#browser-new-context-option-forced-colors)
        
        Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'none'`.
        
    *   `geolocation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-geolocation)
        
        *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Latitude between -90 and 90.
            
        *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Longitude between -180 and 180.
            
        *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Non-negative accuracy value. Defaults to `0`.
            
    *   `hasTouch` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-has-touch)
        
        Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/docs/emulation#devices).
        
    *   `httpCredentials` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-http-credentials)
        
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Restrain sending http credentials on specific origin (scheme://host:port).
            
        *   `send` "unauthorized" | "always" _(optional)_
            
            This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
            
        
        Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `isMobile` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-is-mobile)
        
        Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/docs/emulation#ismobile).
        
    *   `javaScriptEnabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-java-script-enabled)
        
        Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/docs/emulation#javascript-enabled).
        
    *   `locale` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-context-option-locale)
        
        Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/docs/emulation#locale--timezone).
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_[#](#browser-new-context-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging.
        
    *   `offline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-offline)
        
        Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/docs/emulation#offline).
        
    *   `permissions` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-new-context-option-permissions)
        
        A list of permissions to grant to all pages in this context. See [browserContext.grantPermissions()](/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings to use with this context. Defaults to none.
        
    *   `recordHar` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-record-har)
        
        *   `omitContent` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
            
            Optional setting to control whether to omit request content from the HAR. Defaults to `false`. Deprecated, use `content` policy instead.
            
        *   `content` "omit" | "embed" | "attach" _(optional)_
            
            Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file as per HAR specification. Defaults to `attach` for `.zip` output files and to `embed` for all other file extensions.
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path on the filesystem to write the HAR file to. If the file name ends with `.zip`, `content: 'attach'` is used by default.
            
        *   `mode` "full" | "minimal" _(optional)_
            
            When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
            
        *   `urlFilter` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            A glob or regex pattern to filter requests that are stored in the HAR. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor. Defaults to none.
            
        
        Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into `recordHar.path` file. If not specified, the HAR is not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
        
    *   `recordVideo` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-record-video)
        
        *   `dir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path to the directory to put videos into.
            
        *   `size` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
            
            *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame width.
                
            *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame height.
                
            
            Optional dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
            
        
        Enables video recording for all pages into `recordVideo.dir` directory. If not specified videos are not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
        
    *   `reducedMotion` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "reduce" | "no-preference" _(optional)_[#](#browser-new-context-option-reduced-motion)
        
        Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `screen` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-screen)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/docs/api/class-browser#browser-new-context-option-viewport) is set.
        
    *   `serviceWorkers` "allow" | "block" _(optional)_[#](#browser-new-context-option-service-workers)
        
        Whether to allow sites to register Service workers. Defaults to `'allow'`.
        
        *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
        *   `'block'`: Playwright will block all registration of Service Workers.
    *   `storageState` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-storage-state)
        
        *   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
                Domain and path are required. For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com"
                
            *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
                Domain and path are required
                
            *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Unix time in seconds.
                
            *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
                
            *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
                
            *   `sameSite` "Strict" | "Lax" | "None"
                
                sameSite flag
                
            
            Cookies to set for context
            
        *   `origins` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `localStorage` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
                
                *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                    
                *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                    
                
                localStorage to set for context
                
        
        Learn more about [storage state and auth](/docs/auth).
        
        Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state).
        
    *   `strictSelectors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-context-option-strict-selectors)
        
        If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/docs/api/class-locator "Locator") to learn more about the strict mode.
        
    *   `timezoneId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-context-option-timezone-id)
        
        Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
        
    *   `userAgent` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-context-option-user-agent)
        
        Specific user agent to use in this context.
        
    *   `videoSize` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-video-size)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-browser#browser-new-context-option-record-video) instead.
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame width.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame height.
            
    *   `videosPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-context-option-videos-path)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-browser#browser-new-context-option-record-video) instead.
        
    *   `viewport` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-context-option-viewport)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent viewport for each page. Defaults to an 1280x720 viewport. Use `null` to disable the consistent viewport emulation. Learn more about [viewport emulation](/docs/emulation#viewport).
        
        note
        
        The `null` value opts out from the default presets, makes viewport depend on the host window size defined by the operating system. It makes the execution of the tests non-deterministic.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[BrowserContext](/docs/api/class-browsercontext "BrowserContext")\>[#](#browser-new-context-return)

* * *

### newPage[â€‹](#browser-new-page "Direct link to newPage")

Added before v1.9 browser.newPage

Creates a new page in a new browser context. Closing this page will close the context as well.

This is a convenience API that should only be used for the single-page scenarios and short snippets. Production code and testing frameworks should explicitly create [browser.newContext()](/docs/api/class-browser#browser-new-context) followed by the [browserContext.newPage()](/docs/api/class-browsercontext#browser-context-new-page) to control their exact life times.

**Usage**

    await browser.newPage();await browser.newPage(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `acceptDownloads` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-accept-downloads)
        
        Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
        
    *   `baseURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-page-option-base-url)
        
        When using [page.goto()](/docs/api/class-page#page-goto), [page.route()](/docs/api/class-page#page-route), [page.waitForURL()](/docs/api/class-page#page-wait-for-url), [page.waitForRequest()](/docs/api/class-page#page-wait-for-request), or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
        
        *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
        *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
        *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
    *   `bypassCSP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-bypass-csp)
        
        Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
        
    *   `clientCertificates` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: 1.46[#](#browser-new-page-option-client-certificates)
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
            
        *   `certPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the certificate in PEM format.
            
        *   `cert` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the certificate in PEM format.
            
        *   `keyPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the private key in PEM format.
            
        *   `key` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the private key in PEM format.
            
        *   `pfxPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `pfx` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `passphrase` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Passphrase for the private key (PEM or PFX).
            
        
        TLS Client Authentication allows the server to request a client certificate and verify it.
        
        **Details**
        
        An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
        
        Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.
        
        note
        
        When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
        
    *   `colorScheme` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference" _(optional)_[#](#browser-new-page-option-color-scheme)
        
        Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'light'`.
        
    *   `contrast` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "no-preference" | "more" _(optional)_[#](#browser-new-page-option-contrast)
        
        Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `deviceScaleFactor` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-new-page-option-device-scale-factor)
        
        Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/docs/emulation#devices).
        
    *   `extraHTTPHeaders` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-new-page-option-extra-http-headers)
        
        An object containing additional HTTP headers to be sent with every request. Defaults to none.
        
    *   `forcedColors` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "active" | "none" _(optional)_[#](#browser-new-page-option-forced-colors)
        
        Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'none'`.
        
    *   `geolocation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-geolocation)
        
        *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Latitude between -90 and 90.
            
        *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Longitude between -180 and 180.
            
        *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Non-negative accuracy value. Defaults to `0`.
            
    *   `hasTouch` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-has-touch)
        
        Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/docs/emulation#devices).
        
    *   `httpCredentials` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-http-credentials)
        
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Restrain sending http credentials on specific origin (scheme://host:port).
            
        *   `send` "unauthorized" | "always" _(optional)_
            
            This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
            
        
        Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `isMobile` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-is-mobile)
        
        Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/docs/emulation#ismobile).
        
    *   `javaScriptEnabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-java-script-enabled)
        
        Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/docs/emulation#javascript-enabled).
        
    *   `locale` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-page-option-locale)
        
        Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/docs/emulation#locale--timezone).
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_[#](#browser-new-page-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging.
        
    *   `offline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-offline)
        
        Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/docs/emulation#offline).
        
    *   `permissions` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-new-page-option-permissions)
        
        A list of permissions to grant to all pages in this context. See [browserContext.grantPermissions()](/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings to use with this context. Defaults to none.
        
    *   `recordHar` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-record-har)
        
        *   `omitContent` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
            
            Optional setting to control whether to omit request content from the HAR. Defaults to `false`. Deprecated, use `content` policy instead.
            
        *   `content` "omit" | "embed" | "attach" _(optional)_
            
            Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file as per HAR specification. Defaults to `attach` for `.zip` output files and to `embed` for all other file extensions.
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path on the filesystem to write the HAR file to. If the file name ends with `.zip`, `content: 'attach'` is used by default.
            
        *   `mode` "full" | "minimal" _(optional)_
            
            When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
            
        *   `urlFilter` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            A glob or regex pattern to filter requests that are stored in the HAR. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor. Defaults to none.
            
        
        Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into `recordHar.path` file. If not specified, the HAR is not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
        
    *   `recordVideo` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-record-video)
        
        *   `dir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path to the directory to put videos into.
            
        *   `size` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
            
            *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame width.
                
            *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame height.
                
            
            Optional dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
            
        
        Enables video recording for all pages into `recordVideo.dir` directory. If not specified videos are not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
        
    *   `reducedMotion` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "reduce" | "no-preference" _(optional)_[#](#browser-new-page-option-reduced-motion)
        
        Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `screen` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-screen)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/docs/api/class-browser#browser-new-page-option-viewport) is set.
        
    *   `serviceWorkers` "allow" | "block" _(optional)_[#](#browser-new-page-option-service-workers)
        
        Whether to allow sites to register Service workers. Defaults to `'allow'`.
        
        *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
        *   `'block'`: Playwright will block all registration of Service Workers.
    *   `storageState` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-storage-state)
        
        *   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
                Domain and path are required. For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com"
                
            *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
                Domain and path are required
                
            *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Unix time in seconds.
                
            *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
                
            *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
                
            *   `sameSite` "Strict" | "Lax" | "None"
                
                sameSite flag
                
            
            Cookies to set for context
            
        *   `origins` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `localStorage` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
                
                *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                    
                *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                    
                
                localStorage to set for context
                
        
        Learn more about [storage state and auth](/docs/auth).
        
        Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state).
        
    *   `strictSelectors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-new-page-option-strict-selectors)
        
        If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/docs/api/class-locator "Locator") to learn more about the strict mode.
        
    *   `timezoneId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-page-option-timezone-id)
        
        Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
        
    *   `userAgent` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-page-option-user-agent)
        
        Specific user agent to use in this context.
        
    *   `videoSize` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-video-size)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-browser#browser-new-page-option-record-video) instead.
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame width.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame height.
            
    *   `videosPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-new-page-option-videos-path)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-browser#browser-new-page-option-record-video) instead.
        
    *   `viewport` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-new-page-option-viewport)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent viewport for each page. Defaults to an 1280x720 viewport. Use `null` to disable the consistent viewport emulation. Learn more about [viewport emulation](/docs/emulation#viewport).
        
        note
        
        The `null` value opts out from the default presets, makes viewport depend on the host window size defined by the operating system. It makes the execution of the tests non-deterministic.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Page](/docs/api/class-page "Page")\>[#](#browser-new-page-return)

* * *

### removeAllListeners[â€‹](#browser-remove-all-listeners "Direct link to removeAllListeners")

Added in: v1.47 browser.removeAllListeners

Removes all the listeners of the given type (or all registered listeners if no type given). Allows to wait for async listeners to complete or to ignore subsequent errors from these listeners.

**Usage**

    await browser.removeAllListeners();await browser.removeAllListeners(type, options);

**Arguments**

*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-remove-all-listeners-option-type)
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#browser-remove-all-listeners-option-behavior)
        
        Specifies whether to wait for already running listeners and what to do if they throw errors:
        
        *   `'default'` - do not wait for current listener calls (if any) to finish, if the listener throws, it may result in unhandled error
        *   `'wait'` - wait for current listener calls (if any) to finish
        *   `'ignoreErrors'` - do not wait for current listener calls (if any) to finish, all errors thrown by the listeners after removal are silently caught

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-remove-all-listeners-return)

* * *

### startTracing[â€‹](#browser-start-tracing "Direct link to startTracing")

Added in: v1.11 browser.startTracing

note

This API controls [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool) which is a low-level chromium-specific debugging tool. API to control [Playwright Tracing](/docs/trace-viewer) could be found [here](/docs/api/class-tracing).

You can use [browser.startTracing()](/docs/api/class-browser#browser-start-tracing) and [browser.stopTracing()](/docs/api/class-browser#browser-stop-tracing) to create a trace file that can be opened in Chrome DevTools performance panel.

**Usage**

    await browser.startTracing(page, { path: 'trace.json' });await page.goto('https://www.google.com');await browser.stopTracing();

**Arguments**

*   `page` [Page](/docs/api/class-page "Page") _(optional)_[#](#browser-start-tracing-option-page)
    
    Optional, if specified, tracing includes screenshots of the given page.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `categories` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-start-tracing-option-categories)
        
        specify custom categories to use instead of default.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-start-tracing-option-path)
        
        A path to write the trace file to.
        
    *   `screenshots` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-start-tracing-option-screenshots)
        
        captures screenshots in the trace.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-start-tracing-return)

* * *

### stopTracing[â€‹](#browser-stop-tracing "Direct link to stopTracing")

Added in: v1.11 browser.stopTracing

note

This API controls [Chromium Tracing](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool) which is a low-level chromium-specific debugging tool. API to control [Playwright Tracing](/docs/trace-viewer) could be found [here](/docs/api/class-tracing).

Returns the buffer with trace data.

**Usage**

    await browser.stopTracing();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#browser-stop-tracing-return)

* * *

### version[â€‹](#browser-version "Direct link to version")

Added before v1.9 browser.version

Returns the browser version.

**Usage**

    browser.version();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-version-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('disconnected')[â€‹](#browser-event-disconnected "Direct link to on('disconnected')")

Added before v1.9 browser.on('disconnected')

Emitted when Browser gets disconnected from the browser application. This might happen because of one of the following:

*   Browser application is closed or crashed.
*   The [browser.close()](/docs/api/class-browser#browser-close) method was called.

**Usage**

    browser.on('disconnected', data => {});

**Event data**

*   [Browser](/docs/api/class-browser "Browser")

# BrowserContext

BrowserContext
==============

BrowserContexts provide a way to operate multiple independent browser sessions.

If a page opens another page, e.g. with a `window.open` call, the popup will belong to the parent page's browser context.

Playwright allows creating isolated non-persistent browser contexts with [browser.newContext()](/docs/api/class-browser#browser-new-context) method. Non-persistent browser contexts don't write any browsing data to disk.

    // Create a new incognito browser contextconst context = await browser.newContext();// Create a new page inside context.const page = await context.newPage();await page.goto('https://example.com');// Dispose context once it's no longer needed.await context.close();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### addCookies[â€‹](#browser-context-add-cookies "Direct link to addCookies")

Added before v1.9 browserContext.addCookies

Adds cookies into this browser context. All pages within this context will have these cookies installed. Cookies can be obtained via [browserContext.cookies()](/docs/api/class-browsercontext#browser-context-cookies).

**Usage**

    await browserContext.addCookies([cookieObject1, cookieObject2]);

**Arguments**

*   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#browser-context-add-cookies-option-cookies)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Either `url` or both `domain` and `path` are required. Optional.
        
    *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com". Either `url` or both `domain` and `path` are required. Optional.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Either `url` or both `domain` and `path` are required. Optional.
        
    *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Unix time in seconds. Optional.
        
    *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Optional.
        
    *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Optional.
        
    *   `sameSite` "Strict" | "Lax" | "None" _(optional)_
        
        Optional.
        
    *   `partitionKey` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        For partitioned third-party cookies (aka [CHIPS](https://developer.mozilla.org/en-US/docs/Web/Privacy/Guides/Privacy_sandbox/Partitioned_cookies)), the partition key. Optional.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-add-cookies-return)

* * *

### addInitScript[â€‹](#browser-context-add-init-script "Direct link to addInitScript")

Added before v1.9 browserContext.addInitScript

Adds a script which would be evaluated in one of the following scenarios:

*   Whenever a page is created in the browser context or is navigated.
*   Whenever a child frame is attached or navigated in any page in the browser context. In this case, the script is evaluated in the context of the newly attached frame.

The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed `Math.random`.

**Usage**

An example of overriding `Math.random` before the page loads:

    // preload.jsMath.random = () => 42;

    // In your playwright script, assuming the preload.js file is in same directory.await browserContext.addInitScript({  path: 'preload.js'});

note

The order of evaluation of multiple scripts installed via [browserContext.addInitScript()](/docs/api/class-browsercontext#browser-context-add-init-script) and [page.addInitScript()](/docs/api/class-page#page-add-init-script) is not defined.

**Arguments**

*   `script` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#browser-context-add-init-script-option-script)
    
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Path to the JavaScript file. If `path` is a relative path, then it is resolved relative to the current working directory. Optional.
        
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Raw script content. Optional.
        
    
    Script to be evaluated in all pages in the browser context.
    
*   `arg` [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#browser-context-add-init-script-option-arg)
    
    Optional argument to pass to [script](/docs/api/class-browsercontext#browser-context-add-init-script-option-script) (only supported when passing a function).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-add-init-script-return)

* * *

### browser[â€‹](#browser-context-browser "Direct link to browser")

Added before v1.9 browserContext.browser

Gets the browser instance that owns the context. Returns `null` if the context is created outside of normal browser, e.g. Android or Electron.

**Usage**

    browserContext.browser();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Browser](/docs/api/class-browser "Browser")[#](#browser-context-browser-return)

* * *

### clearCookies[â€‹](#browser-context-clear-cookies "Direct link to clearCookies")

Added before v1.9 browserContext.clearCookies

Removes cookies from context. Accepts optional filter.

**Usage**

    await context.clearCookies();await context.clearCookies({ name: 'session-id' });await context.clearCookies({ domain: 'my-origin.com' });await context.clearCookies({ domain: /.*my-origin\.com/ });await context.clearCookies({ path: '/api/v1' });await context.clearCookies({ name: 'session-id', domain: 'my-origin.com' });

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.43[#](#browser-context-clear-cookies-option-domain)
        
        Only removes cookies with the given domain.
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.43[#](#browser-context-clear-cookies-option-name)
        
        Only removes cookies with the given name.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.43[#](#browser-context-clear-cookies-option-path)
        
        Only removes cookies with the given path.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-clear-cookies-return)

* * *

### clearPermissions[â€‹](#browser-context-clear-permissions "Direct link to clearPermissions")

Added before v1.9 browserContext.clearPermissions

Clears all permission overrides for the browser context.

**Usage**

    const context = await browser.newContext();await context.grantPermissions(['clipboard-read']);// do stuff ..context.clearPermissions();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-clear-permissions-return)

* * *

### close[â€‹](#browser-context-close "Direct link to close")

Added before v1.9 browserContext.close

Closes the browser context. All the pages that belong to the browser context will be closed.

note

The default browser context cannot be closed.

**Usage**

    await browserContext.close();await browserContext.close(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `reason` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.40[#](#browser-context-close-option-reason)
        
        The reason to be reported to the operations interrupted by the context closure.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-close-return)

* * *

### cookies[â€‹](#browser-context-cookies "Direct link to cookies")

Added before v1.9 browserContext.cookies

If no URLs are specified, this method returns all cookies. If URLs are specified, only cookies that affect those URLs are returned.

**Usage**

    await browserContext.cookies();await browserContext.cookies(urls);

**Arguments**

*   `urls` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-context-cookies-option-urls)
    
    Optional list of URLs.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>>[#](#browser-context-cookies-return)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Unix time in seconds.
        
    *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
        
    *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
        
    *   `sameSite` "Strict" | "Lax" | "None"
        
    *   `partitionKey` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        

* * *

### exposeBinding[â€‹](#browser-context-expose-binding "Direct link to exposeBinding")

Added before v1.9 browserContext.exposeBinding

The method adds a function called [name](/docs/api/class-browsercontext#browser-context-expose-binding-option-name) on the `window` object of every frame in every page in the context. When called, the function executes [callback](/docs/api/class-browsercontext#browser-context-expose-binding-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/docs/api/class-browsercontext#browser-context-expose-binding-option-callback). If the [callback](/docs/api/class-browsercontext#browser-context-expose-binding-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

The first argument of the [callback](/docs/api/class-browsercontext#browser-context-expose-binding-option-callback) function contains information about the caller: `{ browserContext: BrowserContext, page: Page, frame: Frame }`.

See [page.exposeBinding()](/docs/api/class-page#page-expose-binding) for page-only version.

**Usage**

An example of exposing page URL to all frames in all pages in the context:

    const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.(async () => {  const browser = await webkit.launch({ headless: false });  const context = await browser.newContext();  await context.exposeBinding('pageURL', ({ page }) => page.url());  const page = await context.newPage();  await page.setContent(`    <script>      async function onClick() {        document.querySelector('div').textContent = await window.pageURL();      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>  `);  await page.getByRole('button').click();})();

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-context-expose-binding-option-name)
    
    Name of the function on the window object.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#browser-context-expose-binding-option-callback)
    
    Callback function that will be called in the Playwright's context.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `handle` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-context-expose-binding-option-handle)
        
        Deprecated
        
        This option will be removed in the future.
        
        Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-expose-binding-return)

* * *

### exposeFunction[â€‹](#browser-context-expose-function "Direct link to exposeFunction")

Added before v1.9 browserContext.exposeFunction

The method adds a function called [name](/docs/api/class-browsercontext#browser-context-expose-function-option-name) on the `window` object of every frame in every page in the context. When called, the function executes [callback](/docs/api/class-browsercontext#browser-context-expose-function-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/docs/api/class-browsercontext#browser-context-expose-function-option-callback).

If the [callback](/docs/api/class-browsercontext#browser-context-expose-function-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

See [page.exposeFunction()](/docs/api/class-page#page-expose-function) for page-only version.

**Usage**

An example of adding a `sha256` function to all pages in the context:

    const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.const crypto = require('crypto');(async () => {  const browser = await webkit.launch({ headless: false });  const context = await browser.newContext();  await context.exposeFunction('sha256', text =>    crypto.createHash('sha256').update(text).digest('hex'),  );  const page = await context.newPage();  await page.setContent(`    <script>      async function onClick() {        document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>  `);  await page.getByRole('button').click();})();

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-context-expose-function-option-name)
    
    Name of the function on the window object.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#browser-context-expose-function-option-callback)
    
    Callback function that will be called in the Playwright's context.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-expose-function-return)

* * *

### grantPermissions[â€‹](#browser-context-grant-permissions "Direct link to grantPermissions")

Added before v1.9 browserContext.grantPermissions

Grants specified permissions to the browser context. Only grants corresponding permissions to the given origin if specified.

**Usage**

    await browserContext.grantPermissions(permissions);await browserContext.grantPermissions(permissions, options);

**Arguments**

*   `permissions` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#browser-context-grant-permissions-option-permissions)
    
    A list of permissions to grant.
    
    danger
    
    Supported permissions differ between browsers, and even between different versions of the same browser. Any permission may stop working after an update.
    
    Here are some permissions that may be supported by some browsers:
    
    *   `'accelerometer'`
    *   `'ambient-light-sensor'`
    *   `'background-sync'`
    *   `'camera'`
    *   `'clipboard-read'`
    *   `'clipboard-write'`
    *   `'geolocation'`
    *   `'gyroscope'`
    *   `'local-fonts'`
    *   `'local-network-access'`
    *   `'magnetometer'`
    *   `'microphone'`
    *   `'midi-sysex'` (system-exclusive midi)
    *   `'midi'`
    *   `'notifications'`
    *   `'payment-handler'`
    *   `'storage-access'`
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-context-grant-permissions-option-origin)
        
        The [origin](https://developer.mozilla.org/en-US/docs/Glossary/Origin "Origin") to grant permissions to, e.g. "[https://example.com](https://example.com)".
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-grant-permissions-return)

* * *

### newCDPSession[â€‹](#browser-context-new-cdp-session "Direct link to newCDPSession")

Added in: v1.11 browserContext.newCDPSession

note

CDP sessions are only supported on Chromium-based browsers.

Returns the newly created session.

**Usage**

    await browserContext.newCDPSession(page);

**Arguments**

*   `page` [Page](/docs/api/class-page "Page") | [Frame](/docs/api/class-frame "Frame")[#](#browser-context-new-cdp-session-option-page)
    
    Target to create new session for. For backwards-compatibility, this parameter is named `page`, but it can be a `Page` or `Frame` type.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[CDPSession](/docs/api/class-cdpsession "CDPSession")\>[#](#browser-context-new-cdp-session-return)

* * *

### newPage[â€‹](#browser-context-new-page "Direct link to newPage")

Added before v1.9 browserContext.newPage

Creates a new page in the browser context.

**Usage**

    await browserContext.newPage();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Page](/docs/api/class-page "Page")\>[#](#browser-context-new-page-return)

* * *

### pages[â€‹](#browser-context-pages "Direct link to pages")

Added before v1.9 browserContext.pages

Returns all open pages in the context.

**Usage**

    browserContext.pages();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Page](/docs/api/class-page "Page")\>[#](#browser-context-pages-return)

* * *

### removeAllListeners[â€‹](#browser-context-remove-all-listeners "Direct link to removeAllListeners")

Added in: v1.47 browserContext.removeAllListeners

Removes all the listeners of the given type (or all registered listeners if no type given). Allows to wait for async listeners to complete or to ignore subsequent errors from these listeners.

**Usage**

    await browserContext.removeAllListeners();await browserContext.removeAllListeners(type, options);

**Arguments**

*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-context-remove-all-listeners-option-type)
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#browser-context-remove-all-listeners-option-behavior)
        
        Specifies whether to wait for already running listeners and what to do if they throw errors:
        
        *   `'default'` - do not wait for current listener calls (if any) to finish, if the listener throws, it may result in unhandled error
        *   `'wait'` - wait for current listener calls (if any) to finish
        *   `'ignoreErrors'` - do not wait for current listener calls (if any) to finish, all errors thrown by the listeners after removal are silently caught

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-remove-all-listeners-return)

* * *

### route[â€‹](#browser-context-route "Direct link to route")

Added before v1.9 browserContext.route

Routing provides the capability to modify network requests that are made by any page in the browser context. Once route is enabled, every request matching the url pattern will stall unless it's continued, fulfilled or aborted.

note

[browserContext.route()](/docs/api/class-browsercontext#browser-context-route) will not intercept requests intercepted by Service Worker. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [serviceWorkers](/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

**Usage**

An example of a naive handler that aborts all image requests:

    const context = await browser.newContext();await context.route('**/*.{png,jpg,jpeg}', route => route.abort());const page = await context.newPage();await page.goto('https://example.com');await browser.close();

or the same snippet using a regex pattern instead:

    const context = await browser.newContext();await context.route(/(\.png$)|(\.jpg$)/, route => route.abort());const page = await context.newPage();await page.goto('https://example.com');await browser.close();

It is possible to examine the request to decide the route action. For example, mocking all requests that contain some post data, and leaving all other requests as is:

    await context.route('/api/**', async route => {  if (route.request().postData().includes('my-string'))    await route.fulfill({ body: 'mocked-data' });  else    await route.continue();});

Page routes (set up with [page.route()](/docs/api/class-page#page-route)) take precedence over browser context routes when request matches both handlers.

To remove a route with its handler you can use [browserContext.unroute()](/docs/api/class-browsercontext#browser-context-unroute).

note

Enabling routing disables http cache.

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#browser-context-route-option-url)
    
    A glob pattern, regex pattern, or predicate that receives a [URL](https://nodejs.org/api/url.html "URL") to match during routing. If [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) is set in the context options and the provided URL is a string that does not start with `*`, it is resolved using the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Route](/docs/api/class-route "Route"), [Request](/docs/api/class-request "Request")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#browser-context-route-option-handler)
    
    handler function to route the request.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `times` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.15[#](#browser-context-route-option-times)
        
        How often a route should be used. By default it will be used every time.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-route-return)

* * *

### routeFromHAR[â€‹](#browser-context-route-from-har "Direct link to routeFromHAR")

Added in: v1.23 browserContext.routeFromHAR

If specified the network requests that are made in the context will be served from the HAR file. Read more about [Replaying from HAR](/docs/mock#replaying-from-har).

Playwright will not serve requests intercepted by Service Worker from the HAR file. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [serviceWorkers](/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

**Usage**

    await browserContext.routeFromHAR(har);await browserContext.routeFromHAR(har, options);

**Arguments**

*   `har` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-context-route-from-har-option-har)
    
    Path to a [HAR](http://www.softwareishard.com/blog/har-12-spec) file with prerecorded network data. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `notFound` "abort" | "fallback" _(optional)_[#](#browser-context-route-from-har-option-not-found)
        
        *   If set to 'abort' any request not found in the HAR file will be aborted.
        *   If set to 'fallback' falls through to the next route handler in the handler chain.
        
        Defaults to abort.
        
    *   `update` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-context-route-from-har-option-update)
        
        If specified, updates the given HAR with the actual network information instead of serving from file. The file is written to disk when [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) is called.
        
    *   `updateContent` "embed" | "attach" _(optional)_ Added in: v1.32[#](#browser-context-route-from-har-option-update-content)
        
        Optional setting to control resource content management. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file.
        
    *   `updateMode` "full" | "minimal" _(optional)_ Added in: v1.32[#](#browser-context-route-from-har-option-update-mode)
        
        When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `minimal`.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#browser-context-route-from-har-option-url)
        
        A glob pattern, regular expression or predicate to match the request URL. Only requests with URL matching the pattern will be served from the HAR file. If not specified, all requests are served from the HAR file.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-route-from-har-return)

* * *

### routeWebSocket[â€‹](#browser-context-route-web-socket "Direct link to routeWebSocket")

Added in: v1.48 browserContext.routeWebSocket

This method allows to modify websocket connections that are made by any page in the browser context.

Note that only `WebSocket`s created after this method was called will be routed. It is recommended to call this method before creating any pages.

**Usage**

Below is an example of a simple handler that blocks some websocket messages. See [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute") for more details and examples.

    await context.routeWebSocket('/ws', async ws => {  ws.routeSend(message => {    if (message === 'to-be-blocked')      return;    ws.send(message);  });  await ws.connect();});

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#browser-context-route-web-socket-option-url)
    
    Only WebSockets with the url matching this pattern will be routed. A string pattern can be relative to the [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) context option.
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#browser-context-route-web-socket-option-handler)
    
    Handler function to route the WebSocket.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-route-web-socket-return)

* * *

### serviceWorkers[â€‹](#browser-context-service-workers "Direct link to serviceWorkers")

Added in: v1.11 browserContext.serviceWorkers

note

Service workers are only supported on Chromium-based browsers.

All existing service workers in the context.

**Usage**

    browserContext.serviceWorkers();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Worker](/docs/api/class-worker "Worker")\>[#](#browser-context-service-workers-return)

* * *

### setDefaultNavigationTimeout[â€‹](#browser-context-set-default-navigation-timeout "Direct link to setDefaultNavigationTimeout")

Added before v1.9 browserContext.setDefaultNavigationTimeout

This setting will change the default maximum navigation time for the following methods and related shortcuts:

*   [page.goBack()](/docs/api/class-page#page-go-back)
*   [page.goForward()](/docs/api/class-page#page-go-forward)
*   [page.goto()](/docs/api/class-page#page-goto)
*   [page.reload()](/docs/api/class-page#page-reload)
*   [page.setContent()](/docs/api/class-page#page-set-content)
*   [page.waitForNavigation()](/docs/api/class-page#page-wait-for-navigation)

note

[page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) and [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) take priority over [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout).

**Usage**

    browserContext.setDefaultNavigationTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#browser-context-set-default-navigation-timeout-option-timeout)
    
    Maximum navigation time in milliseconds
    

* * *

### setDefaultTimeout[â€‹](#browser-context-set-default-timeout "Direct link to setDefaultTimeout")

Added before v1.9 browserContext.setDefaultTimeout

This setting will change the default maximum time for all the methods accepting [timeout](/docs/api/class-browsercontext#browser-context-set-default-timeout-option-timeout) option.

note

[page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout), [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) and [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout) take priority over [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout).

**Usage**

    browserContext.setDefaultTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#browser-context-set-default-timeout-option-timeout)
    
    Maximum time in milliseconds. Pass `0` to disable timeout.
    

* * *

### setExtraHTTPHeaders[â€‹](#browser-context-set-extra-http-headers "Direct link to setExtraHTTPHeaders")

Added before v1.9 browserContext.setExtraHTTPHeaders

The extra HTTP headers will be sent with every request initiated by any page in the context. These headers are merged with page-specific extra HTTP headers set with [page.setExtraHTTPHeaders()](/docs/api/class-page#page-set-extra-http-headers). If page overrides a particular header, page-specific header value will be used instead of the browser context header value.

note

[browserContext.setExtraHTTPHeaders()](/docs/api/class-browsercontext#browser-context-set-extra-http-headers) does not guarantee the order of headers in the outgoing requests.

**Usage**

    await browserContext.setExtraHTTPHeaders(headers);

**Arguments**

*   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#browser-context-set-extra-http-headers-option-headers)
    
    An object containing additional HTTP headers to be sent with every request. All header values must be strings.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-set-extra-http-headers-return)

* * *

### setGeolocation[â€‹](#browser-context-set-geolocation "Direct link to setGeolocation")

Added before v1.9 browserContext.setGeolocation

Sets the context's geolocation. Passing `null` or `undefined` emulates position unavailable.

**Usage**

    await browserContext.setGeolocation({ latitude: 59.95, longitude: 30.31667 });

note

Consider using [browserContext.grantPermissions()](/docs/api/class-browsercontext#browser-context-grant-permissions) to grant permissions for the browser context pages to read its geolocation.

**Arguments**

*   `geolocation` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#browser-context-set-geolocation-option-geolocation)
    *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Latitude between -90 and 90.
        
    *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Longitude between -180 and 180.
        
    *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Non-negative accuracy value. Defaults to `0`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-set-geolocation-return)

* * *

### setOffline[â€‹](#browser-context-set-offline "Direct link to setOffline")

Added before v1.9 browserContext.setOffline

**Usage**

    await browserContext.setOffline(offline);

**Arguments**

*   `offline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#browser-context-set-offline-option-offline)
    
    Whether to emulate network being offline for the browser context.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-set-offline-return)

* * *

### storageState[â€‹](#browser-context-storage-state "Direct link to storageState")

Added before v1.9 browserContext.storageState

Returns storage state for this browser context, contains current cookies, local storage snapshot and IndexedDB snapshot.

**Usage**

    await browserContext.storageState();await browserContext.storageState(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `indexedDB` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.51[#](#browser-context-storage-state-option-indexed-db)
        
        Set to `true` to include [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) in the storage state snapshot. If your application uses IndexedDB to store authentication tokens, like Firebase Authentication, enable this.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-context-storage-state-option-path)
        
        The file path to save the storage state to. If [path](/docs/api/class-browsercontext#browser-context-storage-state-option-path) is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won't be saved to the disk.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#browser-context-storage-state-return)
    *   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Unix time in seconds.
            
        *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
    *   `origins` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `localStorage` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                

* * *

### unroute[â€‹](#browser-context-unroute "Direct link to unroute")

Added before v1.9 browserContext.unroute

Removes a route created with [browserContext.route()](/docs/api/class-browsercontext#browser-context-route). When [handler](/docs/api/class-browsercontext#browser-context-unroute-option-handler) is not specified, removes all routes for the [url](/docs/api/class-browsercontext#browser-context-unroute-option-url).

**Usage**

    await browserContext.unroute(url);await browserContext.unroute(url, handler);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#browser-context-unroute-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://nodejs.org/api/url.html "URL") used to register a routing with [browserContext.route()](/docs/api/class-browsercontext#browser-context-route).
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Route](/docs/api/class-route "Route"), [Request](/docs/api/class-request "Request")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-context-unroute-option-handler)
    
    Optional handler function used to register a routing with [browserContext.route()](/docs/api/class-browsercontext#browser-context-route).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-unroute-return)

* * *

### unrouteAll[â€‹](#browser-context-unroute-all "Direct link to unrouteAll")

Added in: v1.41 browserContext.unrouteAll

Removes all routes created with [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [browserContext.routeFromHAR()](/docs/api/class-browsercontext#browser-context-route-from-har).

**Usage**

    await browserContext.unrouteAll();await browserContext.unrouteAll(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#browser-context-unroute-all-option-behavior)
        
        Specifies whether to wait for already running handlers and what to do if they throw errors:
        
        *   `'default'` - do not wait for current handler calls (if any) to finish, if unrouted handler throws, it may result in unhandled error
        *   `'wait'` - wait for current handler calls (if any) to finish
        *   `'ignoreErrors'` - do not wait for current handler calls (if any) to finish, all errors thrown by the handlers after unrouting are silently caught

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-unroute-all-return)

* * *

### waitForEvent[â€‹](#browser-context-wait-for-event "Direct link to waitForEvent")

Added before v1.9 browserContext.waitForEvent

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the context closes before the event is fired. Returns the event data value.

**Usage**

    const pagePromise = context.waitForEvent('page');await page.getByRole('button').click();const page = await pagePromise;

**Arguments**

*   `event` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-context-wait-for-event-option-event)
    
    Event name, same one would pass into `browserContext.on(event)`.
    
*   `optionsOrPredicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-context-wait-for-event-option-options-or-predicate)
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Maximum time to wait for in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) method.
        
    
    Either a predicate that receives an event or an options object. Optional.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") _(optional)_[#](#browser-context-wait-for-event-option-predicate)
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#browser-context-wait-for-event-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### clock[â€‹](#browser-context-clock "Direct link to clock")

Added in: v1.45 browserContext.clock

Playwright has ability to mock clock and passage of time.

**Usage**

    browserContext.clock

**Type**

*   [Clock](/docs/api/class-clock "Clock")

* * *

### request[â€‹](#browser-context-request "Direct link to request")

Added in: v1.16 browserContext.request

API testing helper associated with this context. Requests made with this API will use context cookies.

**Usage**

    browserContext.request

**Type**

*   [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext")

* * *

### tracing[â€‹](#browser-context-tracing "Direct link to tracing")

Added in: v1.12 browserContext.tracing

**Usage**

    browserContext.tracing

**Type**

*   [Tracing](/docs/api/class-tracing "Tracing")

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#browser-context-event-close "Direct link to on('close')")

Added before v1.9 browserContext.on('close')

Emitted when Browser context gets closed. This might happen because of one of the following:

*   Browser context is closed.
*   Browser application is closed or crashed.
*   The [browser.close()](/docs/api/class-browser#browser-close) method was called.

**Usage**

    browserContext.on('close', data => {});

**Event data**

*   [BrowserContext](/docs/api/class-browsercontext "BrowserContext")

* * *

### on('console')[â€‹](#browser-context-event-console "Direct link to on('console')")

Added in: v1.34 browserContext.on('console')

Emitted when JavaScript within the page calls one of console API methods, e.g. `console.log` or `console.dir`.

The arguments passed into `console.log` and the page are available on the [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage") event handler argument.

**Usage**

    context.on('console', async msg => {  const values = [];  for (const arg of msg.args())    values.push(await arg.jsonValue());  console.log(...values);});await page.evaluate(() => console.log('hello', 5, { foo: 'bar' }));

**Event data**

*   [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage")

* * *

### on('dialog')[â€‹](#browser-context-event-dialog "Direct link to on('dialog')")

Added in: v1.34 browserContext.on('dialog')

Emitted when a JavaScript dialog appears, such as `alert`, `prompt`, `confirm` or `beforeunload`. Listener **must** either [dialog.accept()](/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/docs/api/class-dialog#dialog-dismiss) the dialog - otherwise the page will [freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking) waiting for the dialog, and actions like click will never finish.

**Usage**

    context.on('dialog', dialog => {  dialog.accept();});

note

When no [page.on('dialog')](/docs/api/class-page#page-event-dialog) or [browserContext.on('dialog')](/docs/api/class-browsercontext#browser-context-event-dialog) listeners are present, all dialogs are automatically dismissed.

**Event data**

*   [Dialog](/docs/api/class-dialog "Dialog")

* * *

### on('page')[â€‹](#browser-context-event-page "Direct link to on('page')")

Added before v1.9 browserContext.on('page')

The event is emitted when a new Page is created in the BrowserContext. The page may still be loading. The event will also fire for popup pages. See also [page.on('popup')](/docs/api/class-page#page-event-popup) to receive events about popups relevant to a specific page.

The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with `window.open('http://example.com')`, this event will fire when the network request to "[http://example.com](http://example.com)" is done and its response has started loading in the popup. If you would like to route/listen to this network request, use [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request) respectively instead of similar methods on the [Page](/docs/api/class-page "Page").

    const newPagePromise = context.waitForEvent('page');await page.getByText('open new page').click();const newPage = await newPagePromise;console.log(await newPage.evaluate('location.href'));

note

Use [page.waitForLoadState()](/docs/api/class-page#page-wait-for-load-state) to wait until the page gets to a particular state (you should not need it in most cases).

**Usage**

    browserContext.on('page', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### on('request')[â€‹](#browser-context-event-request "Direct link to on('request')")

Added in: v1.12 browserContext.on('request')

Emitted when a request is issued from any pages created through this context. The [request](/docs/api/class-request "Request") object is read-only. To only listen for requests from a particular page, use [page.on('request')](/docs/api/class-page#page-event-request).

In order to intercept and mutate requests, see [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) or [page.route()](/docs/api/class-page#page-route).

**Usage**

    browserContext.on('request', data => {});

**Event data**

*   [Request](/docs/api/class-request "Request")

* * *

### on('requestfailed')[â€‹](#browser-context-event-request-failed "Direct link to on('requestfailed')")

Added in: v1.12 browserContext.on('requestfailed')

Emitted when a request fails, for example by timing out. To only listen for failed requests from a particular page, use [page.on('requestfailed')](/docs/api/class-page#page-event-request-failed).

note

HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with [browserContext.on('requestfinished')](/docs/api/class-browsercontext#browser-context-event-request-finished) event and not with [browserContext.on('requestfailed')](/docs/api/class-browsercontext#browser-context-event-request-failed).

**Usage**

    browserContext.on('requestfailed', data => {});

**Event data**

*   [Request](/docs/api/class-request "Request")

* * *

### on('requestfinished')[â€‹](#browser-context-event-request-finished "Direct link to on('requestfinished')")

Added in: v1.12 browserContext.on('requestfinished')

Emitted when a request finishes successfully after downloading the response body. For a successful response, the sequence of events is `request`, `response` and `requestfinished`. To listen for successful requests from a particular page, use [page.on('requestfinished')](/docs/api/class-page#page-event-request-finished).

**Usage**

    browserContext.on('requestfinished', data => {});

**Event data**

*   [Request](/docs/api/class-request "Request")

* * *

### on('response')[â€‹](#browser-context-event-response "Direct link to on('response')")

Added in: v1.12 browserContext.on('response')

Emitted when [response](/docs/api/class-response "Response") status and headers are received for a request. For a successful response, the sequence of events is `request`, `response` and `requestfinished`. To listen for response events from a particular page, use [page.on('response')](/docs/api/class-page#page-event-response).

**Usage**

    browserContext.on('response', data => {});

**Event data**

*   [Response](/docs/api/class-response "Response")

* * *

### on('serviceworker')[â€‹](#browser-context-event-service-worker "Direct link to on('serviceworker')")

Added in: v1.11 browserContext.on('serviceworker')

note

Service workers are only supported on Chromium-based browsers.

Emitted when new service worker is created in the context.

**Usage**

    browserContext.on('serviceworker', data => {});

**Event data**

*   [Worker](/docs/api/class-worker "Worker")

* * *

### on('weberror')[â€‹](#browser-context-event-web-error "Direct link to on('weberror')")

Added in: v1.38 browserContext.on('weberror')

Emitted when exception is unhandled in any of the pages in this context. To listen for errors from a particular page, use [page.on('pageerror')](/docs/api/class-page#page-event-page-error) instead.

**Usage**

    browserContext.on('weberror', data => {});

**Event data**

*   [WebError](/docs/api/class-weberror "WebError")

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### on('backgroundpage')[â€‹](#browser-context-event-background-page "Direct link to on('backgroundpage')")

Added in: v1.11 browserContext.on('backgroundpage')

Deprecated

Background pages have been removed from Chromium together with Manifest V2 extensions.

This event is not emitted.

**Usage**

    browserContext.on('backgroundpage', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### backgroundPages[â€‹](#browser-context-background-pages "Direct link to backgroundPages")

Added in: v1.11 browserContext.backgroundPages

Deprecated

Background pages have been removed from Chromium together with Manifest V2 extensions.

Returns an empty list.

**Usage**

    browserContext.backgroundPages();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Page](/docs/api/class-page "Page")\>[#](#browser-context-background-pages-return)

* * *

### setHTTPCredentials[â€‹](#browser-context-set-http-credentials "Direct link to setHTTPCredentials")

Added before v1.9 browserContext.setHTTPCredentials

Deprecated

Browsers may cache credentials after successful authentication. Create a new browser context instead.

**Usage**

    await browserContext.setHTTPCredentials(httpCredentials);

**Arguments**

*   `httpCredentials` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#browser-context-set-http-credentials-option-http-credentials)
    *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-context-set-http-credentials-return)

# BrowserServer

BrowserServer
=============

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### close[â€‹](#browser-server-close "Direct link to close")

Added before v1.9 browserServer.close

Closes the browser gracefully and makes sure the process is terminated.

**Usage**

    await browserServer.close();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-server-close-return)

* * *

### kill[â€‹](#browser-server-kill "Direct link to kill")

Added before v1.9 browserServer.kill

Kills the browser process and waits for the process to exit.

**Usage**

    await browserServer.kill();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#browser-server-kill-return)

* * *

### process[â€‹](#browser-server-process "Direct link to process")

Added before v1.9 browserServer.process

Spawned browser application process.

**Usage**

    browserServer.process();

**Returns**

*   [ChildProcess](https://nodejs.org/api/child_process.html "ChildProcess")[#](#browser-server-process-return)

* * *

### wsEndpoint[â€‹](#browser-server-ws-endpoint "Direct link to wsEndpoint")

Added before v1.9 browserServer.wsEndpoint

Browser websocket url.

Browser websocket endpoint which can be used as an argument to [browserType.connect()](/docs/api/class-browsertype#browser-type-connect) to establish connection to the browser.

Note that if the listen `host` option in `launchServer` options is not specified, localhost will be output anyway, even if the actual listening address is an unspecified address.

**Usage**

    browserServer.wsEndpoint();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-server-ws-endpoint-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#browser-server-event-close "Direct link to on('close')")

Added before v1.9 browserServer.on('close')

Emitted when the browser server closes.

**Usage**

    browserServer.on('close', data => {});

# BrowserType

BrowserType
===========

BrowserType provides methods to launch a specific browser instance or connect to an existing one. The following is a typical example of using Playwright to drive automation:

    const { chromium } = require('playwright');  // Or 'firefox' or 'webkit'.(async () => {  const browser = await chromium.launch();  const page = await browser.newPage();  await page.goto('https://example.com');  // other actions...  await browser.close();})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### connect[â€‹](#browser-type-connect "Direct link to connect")

Added before v1.9 browserType.connect

This method attaches Playwright to an existing browser instance created via `BrowserType.launchServer` in Node.js.

note

The major and minor version of the Playwright instance that connects needs to match the version of Playwright that launches the browser (1.2.3 â†’ is compatible with 1.2.x).

**Usage**

    await browserType.connect(wsEndpoint);await browserType.connect(wsEndpoint, options);

**Arguments**

*   `wsEndpoint` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") Added in: v1.10[#](#browser-type-connect-option-ws-endpoint)
    
    A Playwright browser websocket endpoint to connect to. You obtain this endpoint via `BrowserServer.wsEndpoint`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exposeNetwork` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.37[#](#browser-type-connect-option-expose-network)
        
        This option exposes network available on the connecting client to the browser being connected to. Consists of a list of rules separated by comma.
        
        Available rules:
        
        1.  Hostname pattern, for example: `example.com`, `*.org:99`, `x.*.y.com`, `*foo.org`.
        2.  IP literal, for example: `127.0.0.1`, `0.0.0.0:99`, `[::1]`, `[0:0::1]:99`.
        3.  `<loopback>` that matches local loopback interfaces: `localhost`, `*.localhost`, `127.0.0.1`, `[::1]`.
        
        Some common examples:
        
        1.  `"*"` to expose all network.
        2.  `"<loopback>"` to expose localhost network.
        3.  `"*.test.internal-domain,*.staging.internal-domain,<loopback>"` to expose test/staging deployments and localhost.
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.11[#](#browser-type-connect-option-headers)
        
        Additional HTTP headers to be sent with web socket connect request. Optional.
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_ Added in: v1.14[#](#browser-type-connect-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging. Optional.
        
    *   `slowMo` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.10[#](#browser-type-connect-option-slow-mo)
        
        Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on. Defaults to 0.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.10[#](#browser-type-connect-option-timeout)
        
        Maximum time in milliseconds to wait for the connection to be established. Defaults to `0` (no timeout).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Browser](/docs/api/class-browser "Browser")\>[#](#browser-type-connect-return)

* * *

### connectOverCDP[â€‹](#browser-type-connect-over-cdp "Direct link to connectOverCDP")

Added in: v1.9 browserType.connectOverCDP

This method attaches Playwright to an existing browser instance using the Chrome DevTools Protocol.

The default browser context is accessible via [browser.contexts()](/docs/api/class-browser#browser-contexts).

note

Connecting over the Chrome DevTools Protocol is only supported for Chromium-based browsers.

note

This connection is significantly lower fidelity than the Playwright protocol connection via [browserType.connect()](/docs/api/class-browsertype#browser-type-connect). If you are experiencing issues or attempting to use advanced functionality, you probably want to use [browserType.connect()](/docs/api/class-browsertype#browser-type-connect).

**Usage**

    const browser = await playwright.chromium.connectOverCDP('http://localhost:9222');const defaultContext = browser.contexts()[0];const page = defaultContext.pages()[0];

**Arguments**

*   `endpointURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") Added in: v1.11[#](#browser-type-connect-over-cdp-option-endpoint-url)
    
    A CDP websocket endpoint or http url to connect to. For example `http://localhost:9222/` or `ws://127.0.0.1:9222/devtools/browser/387adf4c-243f-4051-a181-46798f4a46f4`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `endpointURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.14[#](#browser-type-connect-over-cdp-option-endpoint-url)
        
        Deprecated
        
        Use the first argument instead.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.11[#](#browser-type-connect-over-cdp-option-headers)
        
        Additional HTTP headers to be sent with connect request. Optional.
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_ Added in: v1.14[#](#browser-type-connect-over-cdp-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging. Optional.
        
    *   `slowMo` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.11[#](#browser-type-connect-over-cdp-option-slow-mo)
        
        Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on. Defaults to 0.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.11[#](#browser-type-connect-over-cdp-option-timeout)
        
        Maximum time in milliseconds to wait for the connection to be established. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Browser](/docs/api/class-browser "Browser")\>[#](#browser-type-connect-over-cdp-return)

* * *

### executablePath[â€‹](#browser-type-executable-path "Direct link to executablePath")

Added before v1.9 browserType.executablePath

A path where Playwright expects to find a bundled browser executable.

**Usage**

    browserType.executablePath();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-type-executable-path-return)

* * *

### launch[â€‹](#browser-type-launch "Direct link to launch")

Added before v1.9 browserType.launch

Returns the browser instance.

**Usage**

You can use [ignoreDefaultArgs](/docs/api/class-browsertype#browser-type-launch-option-ignore-default-args) to filter out `--mute-audio` from default arguments:

    const browser = await chromium.launch({  // Or 'firefox' or 'webkit'.  ignoreDefaultArgs: ['--mute-audio']});

> **Chromium-only** Playwright can also be used to control the Google Chrome or Microsoft Edge browsers, but it works best with the version of Chromium it is bundled with. There is no guarantee it will work with any other version. Use [executablePath](/docs/api/class-browsertype#browser-type-launch-option-executable-path) option with extreme caution.
> 
> If Google Chrome (rather than Chromium) is preferred, a [Chrome Canary](https://www.google.com/chrome/browser/canary.html) or [Dev Channel](https://www.chromium.org/getting-involved/dev-channel) build is suggested.
> 
> Stock browsers like Google Chrome and Microsoft Edge are suitable for tests that require proprietary media codecs for video playback. See [this article](https://www.howtogeek.com/202825/what%E2%80%99s-the-difference-between-chromium-and-chrome/) for other differences between Chromium and Chrome. [This article](https://chromium.googlesource.com/chromium/src/+/lkgr/docs/chromium_browser_vs_google_chrome.md) describes some differences for Linux users.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-option-args)
        
        warning
        
        Use custom browser args at your own risk, as some of them may break Playwright functionality.
        
        Additional arguments to pass to the browser instance. The list of Chromium flags can be found [here](https://peter.sh/experiments/chromium-command-line-switches/).
        
    *   `channel` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-option-channel)
        
        Browser distribution channel.
        
        Use "chromium" to [opt in to new headless mode](/docs/browsers#chromium-new-headless-mode).
        
        Use "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev", or "msedge-canary" to use branded [Google Chrome and Microsoft Edge](/docs/browsers#google-chrome--microsoft-edge).
        
    *   `chromiumSandbox` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-option-chromium-sandbox)
        
        Enable Chromium sandboxing. Defaults to `false`.
        
    *   `devtools` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-option-devtools)
        
        Deprecated
        
        Use [debugging tools](/docs/debug) instead.
        
        **Chromium-only** Whether to auto-open a Developer Tools panel for each tab. If this option is `true`, the [headless](/docs/api/class-browsertype#browser-type-launch-option-headless) option will be set `false`.
        
    *   `downloadsPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-option-downloads-path)
        
        If specified, accepted downloads are downloaded into this directory. Otherwise, temporary directory is created and is deleted when browser is closed. In either case, the downloads are deleted when the browser context they were created in is closed.
        
    *   `env` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | \[undefined\]> _(optional)_[#](#browser-type-launch-option-env)
        
    *   `executablePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-option-executable-path)
        
        Path to a browser executable to run instead of the bundled one. If [executablePath](/docs/api/class-browsertype#browser-type-launch-option-executable-path) is a relative path, then it is resolved relative to the current working directory. Note that Playwright only works with the bundled Chromium, Firefox or WebKit, use at your own risk.
        
    *   `firefoxUserPrefs` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> _(optional)_[#](#browser-type-launch-option-firefox-user-prefs)
        
        Firefox user preferences. Learn more about the Firefox user preferences at [`about:config`](https://support.mozilla.org/en-US/kb/about-config-editor-firefox).
        
        You can also provide a path to a custom [`policies.json` file](https://mozilla.github.io/policy-templates/) via `PLAYWRIGHT_FIREFOX_POLICIES_JSON` environment variable.
        
    *   `handleSIGHUP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-option-handle-sighup)
        
        Close the browser process on SIGHUP. Defaults to `true`.
        
    *   `handleSIGINT` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-option-handle-sigint)
        
        Close the browser process on Ctrl-C. Defaults to `true`.
        
    *   `handleSIGTERM` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-option-handle-sigterm)
        
        Close the browser process on SIGTERM. Defaults to `true`.
        
    *   `headless` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-option-headless)
        
        Whether to run browser in headless mode. More details for [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) and [Firefox](https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/). Defaults to `true` unless the [devtools](/docs/api/class-browsertype#browser-type-launch-option-devtools) option is `true`.
        
    *   `ignoreDefaultArgs` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-option-ignore-default-args)
        
        If `true`, Playwright does not pass its own configurations args and only uses the ones from [args](/docs/api/class-browsertype#browser-type-launch-option-args). If an array is given, then filters out the given default arguments. Dangerous option; use with care. Defaults to `false`.
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_[#](#browser-type-launch-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings.
        
    *   `slowMo` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-option-slow-mo)
        
        Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-option-timeout)
        
        Maximum time in milliseconds to wait for the browser instance to start. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        
    *   `tracesDir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-option-traces-dir)
        
        If specified, traces are saved into this directory.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Browser](/docs/api/class-browser "Browser")\>[#](#browser-type-launch-return)

* * *

### launchPersistentContext[â€‹](#browser-type-launch-persistent-context "Direct link to launchPersistentContext")

Added before v1.9 browserType.launchPersistentContext

Returns the persistent browser context instance.

Launches browser that uses persistent storage located at [userDataDir](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-user-data-dir) and returns the only context. Closing this context will automatically close the browser.

**Usage**

    await browserType.launchPersistentContext(userDataDir);await browserType.launchPersistentContext(userDataDir, options);

**Arguments**

*   `userDataDir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-type-launch-persistent-context-option-user-data-dir)
    
    Path to a User Data Directory, which stores browser session data like cookies and local storage. Pass an empty string to create a temporary directory.
    
    More details for [Chromium](https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md#introduction) and [Firefox](https://wiki.mozilla.org/Firefox/CommandLineOptions#User_profile). Chromium's user data directory is the **parent** directory of the "Profile Path" seen at `chrome://version`.
    
    Note that browsers do not allow launching multiple instances with the same User Data Directory.
    
    warning
    
    Chromium/Chrome: Due to recent Chrome policy changes, automating the default Chrome user profile is not supported. Pointing `userDataDir` to Chrome's main "User Data" directory (the profile used for your regular browsing) may result in pages not loading or the browser exiting. Create and use a separate directory (for example, an empty folder) as your automation profile instead. See [https://developer.chrome.com/blog/remote-debugging-port](https://developer.chrome.com/blog/remote-debugging-port) for details.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `acceptDownloads` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-accept-downloads)
        
        Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
        
    *   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-persistent-context-option-args)
        
        warning
        
        Use custom browser args at your own risk, as some of them may break Playwright functionality.
        
        Additional arguments to pass to the browser instance. The list of Chromium flags can be found [here](https://peter.sh/experiments/chromium-command-line-switches/).
        
    *   `baseURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-base-url)
        
        When using [page.goto()](/docs/api/class-page#page-goto), [page.route()](/docs/api/class-page#page-route), [page.waitForURL()](/docs/api/class-page#page-wait-for-url), [page.waitForRequest()](/docs/api/class-page#page-wait-for-request), or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
        
        *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
        *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
        *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
    *   `bypassCSP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-bypass-csp)
        
        Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
        
    *   `channel` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-channel)
        
        Browser distribution channel.
        
        Use "chromium" to [opt in to new headless mode](/docs/browsers#chromium-new-headless-mode).
        
        Use "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev", or "msedge-canary" to use branded [Google Chrome and Microsoft Edge](/docs/browsers#google-chrome--microsoft-edge).
        
    *   `chromiumSandbox` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-chromium-sandbox)
        
        Enable Chromium sandboxing. Defaults to `false`.
        
    *   `clientCertificates` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> _(optional)_ Added in: 1.46[#](#browser-type-launch-persistent-context-option-client-certificates)
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
            
        *   `certPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the certificate in PEM format.
            
        *   `cert` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the certificate in PEM format.
            
        *   `keyPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the file with the private key in PEM format.
            
        *   `key` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the private key in PEM format.
            
        *   `pfxPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Path to the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `pfx` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
            
            Direct value of the PFX or PKCS12 encoded private key and certificate chain.
            
        *   `passphrase` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Passphrase for the private key (PEM or PFX).
            
        
        TLS Client Authentication allows the server to request a client certificate and verify it.
        
        **Details**
        
        An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.
        
        Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.
        
        note
        
        When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.
        
    *   `colorScheme` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference" _(optional)_[#](#browser-type-launch-persistent-context-option-color-scheme)
        
        Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'light'`.
        
    *   `contrast` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "no-preference" | "more" _(optional)_[#](#browser-type-launch-persistent-context-option-contrast)
        
        Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `deviceScaleFactor` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-persistent-context-option-device-scale-factor)
        
        Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/docs/emulation#devices).
        
    *   `devtools` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-devtools)
        
        Deprecated
        
        Use [debugging tools](/docs/debug) instead.
        
        **Chromium-only** Whether to auto-open a Developer Tools panel for each tab. If this option is `true`, the [headless](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-headless) option will be set `false`.
        
    *   `downloadsPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-downloads-path)
        
        If specified, accepted downloads are downloaded into this directory. Otherwise, temporary directory is created and is deleted when browser is closed. In either case, the downloads are deleted when the browser context they were created in is closed.
        
    *   `env` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | \[undefined\]> _(optional)_[#](#browser-type-launch-persistent-context-option-env)
        
    *   `executablePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-executable-path)
        
        Path to a browser executable to run instead of the bundled one. If [executablePath](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-executable-path) is a relative path, then it is resolved relative to the current working directory. Note that Playwright only works with the bundled Chromium, Firefox or WebKit, use at your own risk.
        
    *   `extraHTTPHeaders` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-persistent-context-option-extra-http-headers)
        
        An object containing additional HTTP headers to be sent with every request. Defaults to none.
        
    *   `firefoxUserPrefs` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> _(optional)_ Added in: v1.40[#](#browser-type-launch-persistent-context-option-firefox-user-prefs)
        
        Firefox user preferences. Learn more about the Firefox user preferences at [`about:config`](https://support.mozilla.org/en-US/kb/about-config-editor-firefox).
        
        You can also provide a path to a custom [`policies.json` file](https://mozilla.github.io/policy-templates/) via `PLAYWRIGHT_FIREFOX_POLICIES_JSON` environment variable.
        
    *   `forcedColors` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "active" | "none" _(optional)_[#](#browser-type-launch-persistent-context-option-forced-colors)
        
        Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'none'`.
        
    *   `geolocation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-geolocation)
        
        *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Latitude between -90 and 90.
            
        *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Longitude between -180 and 180.
            
        *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Non-negative accuracy value. Defaults to `0`.
            
    *   `handleSIGHUP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-handle-sighup)
        
        Close the browser process on SIGHUP. Defaults to `true`.
        
    *   `handleSIGINT` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-handle-sigint)
        
        Close the browser process on Ctrl-C. Defaults to `true`.
        
    *   `handleSIGTERM` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-handle-sigterm)
        
        Close the browser process on SIGTERM. Defaults to `true`.
        
    *   `hasTouch` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-has-touch)
        
        Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/docs/emulation#devices).
        
    *   `headless` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-headless)
        
        Whether to run browser in headless mode. More details for [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) and [Firefox](https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/). Defaults to `true` unless the [devtools](/docs/api/class-browsertype#browser-type-launch-option-devtools) option is `true`.
        
    *   `httpCredentials` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-http-credentials)
        
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Restrain sending http credentials on specific origin (scheme://host:port).
            
        *   `send` "unauthorized" | "always" _(optional)_
            
            This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
            
        
        Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
        
    *   `ignoreDefaultArgs` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-persistent-context-option-ignore-default-args)
        
        If `true`, Playwright does not pass its own configurations args and only uses the ones from [args](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-args). If an array is given, then filters out the given default arguments. Dangerous option; use with care. Defaults to `false`.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `isMobile` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-is-mobile)
        
        Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/docs/emulation#ismobile).
        
    *   `javaScriptEnabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-java-script-enabled)
        
        Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/docs/emulation#javascript-enabled).
        
    *   `locale` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-locale)
        
        Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/docs/emulation#locale--timezone).
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_[#](#browser-type-launch-persistent-context-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging.
        
    *   `offline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-offline)
        
        Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/docs/emulation#offline).
        
    *   `permissions` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-persistent-context-option-permissions)
        
        A list of permissions to grant to all pages in this context. See [browserContext.grantPermissions()](/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings.
        
    *   `recordHar` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-record-har)
        
        *   `omitContent` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
            
            Optional setting to control whether to omit request content from the HAR. Defaults to `false`. Deprecated, use `content` policy instead.
            
        *   `content` "omit" | "embed" | "attach" _(optional)_
            
            Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file as per HAR specification. Defaults to `attach` for `.zip` output files and to `embed` for all other file extensions.
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path on the filesystem to write the HAR file to. If the file name ends with `.zip`, `content: 'attach'` is used by default.
            
        *   `mode` "full" | "minimal" _(optional)_
            
            When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
            
        *   `urlFilter` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            A glob or regex pattern to filter requests that are stored in the HAR. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor. Defaults to none.
            
        
        Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into `recordHar.path` file. If not specified, the HAR is not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
        
    *   `recordVideo` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-record-video)
        
        *   `dir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path to the directory to put videos into.
            
        *   `size` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
            
            *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame width.
                
            *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame height.
                
            
            Optional dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
            
        
        Enables video recording for all pages into `recordVideo.dir` directory. If not specified videos are not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
        
    *   `reducedMotion` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "reduce" | "no-preference" _(optional)_[#](#browser-type-launch-persistent-context-option-reduced-motion)
        
        Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `screen` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-screen)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-viewport) is set.
        
    *   `serviceWorkers` "allow" | "block" _(optional)_[#](#browser-type-launch-persistent-context-option-service-workers)
        
        Whether to allow sites to register Service workers. Defaults to `'allow'`.
        
        *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
        *   `'block'`: Playwright will block all registration of Service Workers.
    *   `slowMo` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-persistent-context-option-slow-mo)
        
        Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on.
        
    *   `strictSelectors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-persistent-context-option-strict-selectors)
        
        If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/docs/api/class-locator "Locator") to learn more about the strict mode.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-persistent-context-option-timeout)
        
        Maximum time in milliseconds to wait for the browser instance to start. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        
    *   `timezoneId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-timezone-id)
        
        Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
        
    *   `tracesDir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-traces-dir)
        
        If specified, traces are saved into this directory.
        
    *   `userAgent` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-user-agent)
        
        Specific user agent to use in this context.
        
    *   `videoSize` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-video-size)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-record-video) instead.
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame width.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame height.
            
    *   `videosPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-persistent-context-option-videos-path)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-browsertype#browser-type-launch-persistent-context-option-record-video) instead.
        
    *   `viewport` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-persistent-context-option-viewport)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent viewport for each page. Defaults to an 1280x720 viewport. Use `null` to disable the consistent viewport emulation. Learn more about [viewport emulation](/docs/emulation#viewport).
        
        note
        
        The `null` value opts out from the default presets, makes viewport depend on the host window size defined by the operating system. It makes the execution of the tests non-deterministic.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[BrowserContext](/docs/api/class-browsercontext "BrowserContext")\>[#](#browser-type-launch-persistent-context-return)

* * *

### launchServer[â€‹](#browser-type-launch-server "Direct link to launchServer")

Added before v1.9 browserType.launchServer

Returns the browser app instance. You can connect to it via [browserType.connect()](/docs/api/class-browsertype#browser-type-connect), which requires the major/minor client/server version to match (1.2.3 â†’ is compatible with 1.2.x).

**Usage**

Launches browser server that client can connect to. An example of launching a browser executable and connecting to it later:

    const { chromium } = require('playwright');  // Or 'webkit' or 'firefox'.(async () => {  const browserServer = await chromium.launchServer();  const wsEndpoint = browserServer.wsEndpoint();  // Use web socket endpoint later to establish a connection.  const browser = await chromium.connect(wsEndpoint);  // Close browser instance.  await browserServer.close();})();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-server-option-args)
        
        warning
        
        Use custom browser args at your own risk, as some of them may break Playwright functionality.
        
        Additional arguments to pass to the browser instance. The list of Chromium flags can be found [here](https://peter.sh/experiments/chromium-command-line-switches/).
        
    *   `channel` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-server-option-channel)
        
        Browser distribution channel.
        
        Use "chromium" to [opt in to new headless mode](/docs/browsers#chromium-new-headless-mode).
        
        Use "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev", or "msedge-canary" to use branded [Google Chrome and Microsoft Edge](/docs/browsers#google-chrome--microsoft-edge).
        
    *   `chromiumSandbox` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-server-option-chromium-sandbox)
        
        Enable Chromium sandboxing. Defaults to `false`.
        
    *   `devtools` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-server-option-devtools)
        
        Deprecated
        
        Use [debugging tools](/docs/debug) instead.
        
        **Chromium-only** Whether to auto-open a Developer Tools panel for each tab. If this option is `true`, the [headless](/docs/api/class-browsertype#browser-type-launch-server-option-headless) option will be set `false`.
        
    *   `downloadsPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-server-option-downloads-path)
        
        If specified, accepted downloads are downloaded into this directory. Otherwise, temporary directory is created and is deleted when browser is closed. In either case, the downloads are deleted when the browser context they were created in is closed.
        
    *   `env` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | \[undefined\]> _(optional)_[#](#browser-type-launch-server-option-env)
        
    *   `executablePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-server-option-executable-path)
        
        Path to a browser executable to run instead of the bundled one. If [executablePath](/docs/api/class-browsertype#browser-type-launch-server-option-executable-path) is a relative path, then it is resolved relative to the current working directory. Note that Playwright only works with the bundled Chromium, Firefox or WebKit, use at your own risk.
        
    *   `firefoxUserPrefs` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\> _(optional)_[#](#browser-type-launch-server-option-firefox-user-prefs)
        
        Firefox user preferences. Learn more about the Firefox user preferences at [`about:config`](https://support.mozilla.org/en-US/kb/about-config-editor-firefox).
        
        You can also provide a path to a custom [`policies.json` file](https://mozilla.github.io/policy-templates/) via `PLAYWRIGHT_FIREFOX_POLICIES_JSON` environment variable.
        
    *   `handleSIGHUP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-server-option-handle-sighup)
        
        Close the browser process on SIGHUP. Defaults to `true`.
        
    *   `handleSIGINT` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-server-option-handle-sigint)
        
        Close the browser process on Ctrl-C. Defaults to `true`.
        
    *   `handleSIGTERM` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-server-option-handle-sigterm)
        
        Close the browser process on SIGTERM. Defaults to `true`.
        
    *   `headless` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#browser-type-launch-server-option-headless)
        
        Whether to run browser in headless mode. More details for [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) and [Firefox](https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/). Defaults to `true` unless the [devtools](/docs/api/class-browsertype#browser-type-launch-option-devtools) option is `true`.
        
    *   `host` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.45[#](#browser-type-launch-server-option-host)
        
        Host to use for the web socket. It is optional and if it is omitted, the server will accept connections on the unspecified IPv6 address (::) when IPv6 is available, or the unspecified IPv4 address (0.0.0.0) otherwise. Consider hardening it with picking a specific interface.
        
    *   `ignoreDefaultArgs` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#browser-type-launch-server-option-ignore-default-args)
        
        If `true`, Playwright does not pass its own configurations args and only uses the ones from [args](/docs/api/class-browsertype#browser-type-launch-server-option-args). If an array is given, then filters out the given default arguments. Dangerous option; use with care. Defaults to `false`.
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_[#](#browser-type-launch-server-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging.
        
    *   `port` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-server-option-port)
        
        Port to use for the web socket. Defaults to 0 that picks any available port.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#browser-type-launch-server-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#browser-type-launch-server-option-timeout)
        
        Maximum time in milliseconds to wait for the browser instance to start. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        
    *   `tracesDir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#browser-type-launch-server-option-traces-dir)
        
        If specified, traces are saved into this directory.
        
    *   `wsPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.15[#](#browser-type-launch-server-option-ws-path)
        
        Path at which to serve the Browser Server. For security, this defaults to an unguessable string.
        
        warning
        
        Any process or web page (including those running in Playwright) with knowledge of the `wsPath` can take control of the OS user. For this reason, you should use an unguessable token when using this option.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[BrowserServer](/docs/api/class-browserserver "BrowserServer")\>[#](#browser-type-launch-server-return)

* * *

### name[â€‹](#browser-type-name "Direct link to name")

Added before v1.9 browserType.name

Returns browser name. For example: `'chromium'`, `'webkit'` or `'firefox'`.

**Usage**

    browserType.name();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#browser-type-name-return)

# CDPSession

CDPSession
==========

The `CDPSession` instances are used to talk raw Chrome Devtools Protocol:

*   protocol methods can be called with `session.send` method.
*   protocol events can be subscribed to with `session.on` method.

Useful links:

*   Documentation on DevTools Protocol can be found here: [DevTools Protocol Viewer](https://chromedevtools.github.io/devtools-protocol/).
*   Getting Started with DevTools Protocol: [https://github.com/aslushnikov/getting-started-with-cdp/blob/master/README.md](https://github.com/aslushnikov/getting-started-with-cdp/blob/master/README.md)

    const client = await page.context().newCDPSession(page);await client.send('Animation.enable');client.on('Animation.animationCreated', () => console.log('Animation created!'));const response = await client.send('Animation.getPlaybackRate');console.log('playback rate is ' + response.playbackRate);await client.send('Animation.setPlaybackRate', {  playbackRate: response.playbackRate / 2});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### detach[â€‹](#cdp-session-detach "Direct link to detach")

Added before v1.9 cdpSession.detach

Detaches the CDPSession from the target. Once detached, the CDPSession object won't emit any events and can't be used to send messages.

**Usage**

    await cdpSession.detach();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#cdp-session-detach-return)

* * *

### send[â€‹](#cdp-session-send "Direct link to send")

Added before v1.9 cdpSession.send

**Usage**

    await cdpSession.send(method);await cdpSession.send(method, params);

**Arguments**

*   `method` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#cdp-session-send-option-method)
    
    Protocol method name.
    
*   `params` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#cdp-session-send-option-params)
    
    Optional method parameters.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#cdp-session-send-return)

# Clock

Clock
=====

Accurately simulating time-dependent behavior is essential for verifying the correctness of applications. Learn more about [clock emulation](/docs/clock).

Note that clock is installed for the entire [BrowserContext](/docs/api/class-browsercontext "BrowserContext"), so the time in all the pages and iframes is controlled by the same clock.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### fastForward[â€‹](#clock-fast-forward "Direct link to fastForward")

Added in: v1.45 clock.fastForward

Advance the clock by jumping forward in time. Only fires due timers at most once. This is equivalent to user closing the laptop lid for a while and reopening it later, after given time.

**Usage**

    await page.clock.fastForward(1000);await page.clock.fastForward('30:00');

**Arguments**

*   `ticks` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#clock-fast-forward-option-ticks)
    
    Time may be the number of milliseconds to advance the clock by or a human-readable string. Valid string formats are "08" for eight seconds, "01:00" for one minute and "02:34:10" for two hours, 34 minutes and ten seconds.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-fast-forward-return)

* * *

### install[â€‹](#clock-install "Direct link to install")

Added in: v1.45 clock.install

Install fake implementations for the following time-related functions:

*   `Date`
*   `setTimeout`
*   `clearTimeout`
*   `setInterval`
*   `clearInterval`
*   `requestAnimationFrame`
*   `cancelAnimationFrame`
*   `requestIdleCallback`
*   `cancelIdleCallback`
*   `performance`

Fake timers are used to manually control the flow of time in tests. They allow you to advance time, fire timers, and control the behavior of time-dependent functions. See [clock.runFor()](/docs/api/class-clock#clock-run-for) and [clock.fastForward()](/docs/api/class-clock#clock-fast-forward) for more information.

**Usage**

    await clock.install();await clock.install(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `time` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date") _(optional)_[#](#clock-install-option-time)
        
        Time to initialize with, current system time by default.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-install-return)

* * *

### pauseAt[â€‹](#clock-pause-at "Direct link to pauseAt")

Added in: v1.45 clock.pauseAt

Advance the clock by jumping forward in time and pause the time. Once this method is called, no timers are fired unless [clock.runFor()](/docs/api/class-clock#clock-run-for), [clock.fastForward()](/docs/api/class-clock#clock-fast-forward), [clock.pauseAt()](/docs/api/class-clock#clock-pause-at) or [clock.resume()](/docs/api/class-clock#clock-resume) is called.

Only fires due timers at most once. This is equivalent to user closing the laptop lid for a while and reopening it at the specified time and pausing.

**Usage**

    await page.clock.pauseAt(new Date('2020-02-02'));await page.clock.pauseAt('2020-02-02');

For best results, install the clock before navigating the page and set it to a time slightly before the intended test time. This ensures that all timers run normally during page loading, preventing the page from getting stuck. Once the page has fully loaded, you can safely use [clock.pauseAt()](/docs/api/class-clock#clock-pause-at) to pause the clock.

    // Initialize clock with some time before the test time and let the page load// naturally. `Date.now` will progress as the timers fire.await page.clock.install({ time: new Date('2024-12-10T08:00:00') });await page.goto('http://localhost:3333');await page.clock.pauseAt(new Date('2024-12-10T10:00:00'));

**Arguments**

*   `time` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date")[#](#clock-pause-at-option-time)
    
    Time to pause at.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-pause-at-return)

* * *

### resume[â€‹](#clock-resume "Direct link to resume")

Added in: v1.45 clock.resume

Resumes timers. Once this method is called, time resumes flowing, timers are fired as usual.

**Usage**

    await clock.resume();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-resume-return)

* * *

### runFor[â€‹](#clock-run-for "Direct link to runFor")

Added in: v1.45 clock.runFor

Advance the clock, firing all the time-related callbacks.

**Usage**

    await page.clock.runFor(1000);await page.clock.runFor('30:00');

**Arguments**

*   `ticks` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#clock-run-for-option-ticks)
    
    Time may be the number of milliseconds to advance the clock by or a human-readable string. Valid string formats are "08" for eight seconds, "01:00" for one minute and "02:34:10" for two hours, 34 minutes and ten seconds.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-run-for-return)

* * *

### setFixedTime[â€‹](#clock-set-fixed-time "Direct link to setFixedTime")

Added in: v1.45 clock.setFixedTime

Makes `Date.now` and `new Date()` return fixed fake time at all times, keeps all the timers running.

Use this method for simple scenarios where you only need to test with a predefined time. For more advanced scenarios, use [clock.install()](/docs/api/class-clock#clock-install) instead. Read docs on [clock emulation](/docs/clock) to learn more.

**Usage**

    await page.clock.setFixedTime(Date.now());await page.clock.setFixedTime(new Date('2020-02-02'));await page.clock.setFixedTime('2020-02-02');

**Arguments**

*   `time` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date")[#](#clock-set-fixed-time-option-time)
    
    Time to be set in milliseconds.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-set-fixed-time-return)

* * *

### setSystemTime[â€‹](#clock-set-system-time "Direct link to setSystemTime")

Added in: v1.45 clock.setSystemTime

Sets system time, but does not trigger any timers. Use this to test how the web page reacts to a time shift, for example switching from summer to winter time, or changing time zones.

**Usage**

    await page.clock.setSystemTime(Date.now());await page.clock.setSystemTime(new Date('2020-02-02'));await page.clock.setSystemTime('2020-02-02');

**Arguments**

*   `time` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date")[#](#clock-set-system-time-option-time)
    
    Time to be set in milliseconds.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#clock-set-system-time-return)

# ConsoleMessage

ConsoleMessage
==============

[ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage") objects are dispatched by page via the [page.on('console')](/docs/api/class-page#page-event-console) event. For each console message logged in the page there will be corresponding event in the Playwright context.

    // Listen for all console logspage.on('console', msg => console.log(msg.text()));// Listen for all console events and handle errorspage.on('console', msg => {  if (msg.type() === 'error')    console.log(`Error text: "${msg.text()}"`);});// Get the next console logconst msgPromise = page.waitForEvent('console');await page.evaluate(() => {  console.log('hello', 42, { foo: 'bar' });  // Issue console.log inside the page});const msg = await msgPromise;// Deconstruct console log argumentsawait msg.args()[0].jsonValue(); // helloawait msg.args()[1].jsonValue(); // 42

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### args[â€‹](#console-message-args "Direct link to args")

Added before v1.9 consoleMessage.args

List of arguments passed to a `console` function call. See also [page.on('console')](/docs/api/class-page#page-event-console).

**Usage**

    consoleMessage.args();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#console-message-args-return)

* * *

### location[â€‹](#console-message-location "Direct link to location")

Added before v1.9 consoleMessage.location

**Usage**

    consoleMessage.location();

**Returns**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#console-message-location-return)
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        URL of the resource.
        
    *   `lineNumber` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        0-based line number in the resource.
        
    *   `columnNumber` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        0-based column number in the resource.
        

* * *

### page[â€‹](#console-message-page "Direct link to page")

Added in: v1.34 consoleMessage.page

The page that produced this console message, if any.

**Usage**

    consoleMessage.page();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Page](/docs/api/class-page "Page")[#](#console-message-page-return)

* * *

### text[â€‹](#console-message-text "Direct link to text")

Added before v1.9 consoleMessage.text

The text of the console message.

**Usage**

    consoleMessage.text();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#console-message-text-return)

* * *

### type[â€‹](#console-message-type "Direct link to type")

Added before v1.9 consoleMessage.type

**Usage**

    consoleMessage.type();

**Returns**

*   "log" | "debug" | "info" | "error" | "warning" | "dir" | "dirxml" | "table" | "trace" | "clear" | "startGroup" | "startGroupCollapsed" | "endGroup" | "assert" | "profile" | "profileEnd" | "count" | "timeEnd"[#](#console-message-type-return)

* * *

### worker[â€‹](#console-message-worker "Direct link to worker")

Added in: v1.57 consoleMessage.worker

The web worker or service worker that produced this console message, if any. Note that console messages from web workers also have non-null [consoleMessage.page()](/docs/api/class-consolemessage#console-message-page).

**Usage**

    consoleMessage.worker();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Worker](/docs/api/class-worker "Worker")[#](#console-message-worker-return)

# Coverage

Coverage
========

Coverage gathers information about parts of JavaScript and CSS that were used by the page.

An example of using JavaScript coverage to produce Istanbul report for page load:

note

Coverage APIs are only supported on Chromium-based browsers.

    const { chromium } = require('playwright');const v8toIstanbul = require('v8-to-istanbul');(async () => {  const browser = await chromium.launch();  const page = await browser.newPage();  await page.coverage.startJSCoverage();  await page.goto('https://chromium.org');  const coverage = await page.coverage.stopJSCoverage();  for (const entry of coverage) {    const converter = v8toIstanbul('', 0, { source: entry.source });    await converter.load();    converter.applyCoverage(entry.functions);    console.log(JSON.stringify(converter.toIstanbul()));  }  await browser.close();})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### startCSSCoverage[â€‹](#coverage-start-css-coverage "Direct link to startCSSCoverage")

Added in: v1.11 coverage.startCSSCoverage

Returns coverage is started

**Usage**

    await coverage.startCSSCoverage();await coverage.startCSSCoverage(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `resetOnNavigation` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#coverage-start-css-coverage-option-reset-on-navigation)
        
        Whether to reset coverage on every navigation. Defaults to `true`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#coverage-start-css-coverage-return)

* * *

### startJSCoverage[â€‹](#coverage-start-js-coverage "Direct link to startJSCoverage")

Added in: v1.11 coverage.startJSCoverage

Returns coverage is started

note

Anonymous scripts are ones that don't have an associated url. These are scripts that are dynamically created on the page using `eval` or `new Function`. If [reportAnonymousScripts](/docs/api/class-coverage#coverage-start-js-coverage-option-report-anonymous-scripts) is set to `true`, anonymous scripts will have `__playwright_evaluation_script__` as their URL.

**Usage**

    await coverage.startJSCoverage();await coverage.startJSCoverage(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `reportAnonymousScripts` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#coverage-start-js-coverage-option-report-anonymous-scripts)
        
        Whether anonymous scripts generated by the page should be reported. Defaults to `false`.
        
    *   `resetOnNavigation` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#coverage-start-js-coverage-option-reset-on-navigation)
        
        Whether to reset coverage on every navigation. Defaults to `true`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#coverage-start-js-coverage-return)

* * *

### stopCSSCoverage[â€‹](#coverage-stop-css-coverage "Direct link to stopCSSCoverage")

Added in: v1.11 coverage.stopCSSCoverage

Returns the array of coverage reports for all stylesheets

note

CSS Coverage doesn't include dynamically injected style tags without sourceURLs.

**Usage**

    await coverage.stopCSSCoverage();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>>[#](#coverage-stop-css-coverage-return)
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        StyleSheet URL
        
    *   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        StyleSheet content, if available.
        
    *   `ranges` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `start` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            A start offset in text, inclusive
            
        *   `end` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            An end offset in text, exclusive
            
        
        StyleSheet ranges that were used. Ranges are sorted and non-overlapping.
        

* * *

### stopJSCoverage[â€‹](#coverage-stop-js-coverage "Direct link to stopJSCoverage")

Added in: v1.11 coverage.stopJSCoverage

Returns the array of coverage reports for all scripts

note

JavaScript Coverage doesn't include anonymous scripts by default. However, scripts with sourceURLs are reported.

**Usage**

    await coverage.stopJSCoverage();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>>[#](#coverage-stop-js-coverage-return)
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Script URL
        
    *   `scriptId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Script ID
        
    *   `source` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Script content, if applicable.
        
    *   `functions` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `functionName` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `isBlockCoverage` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `ranges` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `count` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
            *   `startOffset` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
            *   `endOffset` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
        
        V8-specific coverage format.

# Dialog

Dialog
======

[Dialog](/docs/api/class-dialog "Dialog") objects are dispatched by page via the [page.on('dialog')](/docs/api/class-page#page-event-dialog) event.

An example of using `Dialog` class:

    const { chromium } = require('playwright');  // Or 'firefox' or 'webkit'.(async () => {  const browser = await chromium.launch();  const page = await browser.newPage();  page.on('dialog', async dialog => {    console.log(dialog.message());    await dialog.dismiss();  });  await page.evaluate(() => alert('1'));  await browser.close();})();

note

Dialogs are dismissed automatically, unless there is a [page.on('dialog')](/docs/api/class-page#page-event-dialog) listener. When listener is present, it **must** either [dialog.accept()](/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/docs/api/class-dialog#dialog-dismiss) the dialog - otherwise the page will [freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking) waiting for the dialog, and actions like click will never finish.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### accept[â€‹](#dialog-accept "Direct link to accept")

Added before v1.9 dialog.accept

Returns when the dialog has been accepted.

**Usage**

    await dialog.accept();await dialog.accept(promptText);

**Arguments**

*   `promptText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#dialog-accept-option-prompt-text)
    
    A text to enter in prompt. Does not cause any effects if the dialog's `type` is not prompt. Optional.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#dialog-accept-return)

* * *

### defaultValue[â€‹](#dialog-default-value "Direct link to defaultValue")

Added before v1.9 dialog.defaultValue

If dialog is prompt, returns default prompt value. Otherwise, returns empty string.

**Usage**

    dialog.defaultValue();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#dialog-default-value-return)

* * *

### dismiss[â€‹](#dialog-dismiss "Direct link to dismiss")

Added before v1.9 dialog.dismiss

Returns when the dialog has been dismissed.

**Usage**

    await dialog.dismiss();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#dialog-dismiss-return)

* * *

### message[â€‹](#dialog-message "Direct link to message")

Added before v1.9 dialog.message

A message displayed in the dialog.

**Usage**

    dialog.message();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#dialog-message-return)

* * *

### page[â€‹](#dialog-page "Direct link to page")

Added in: v1.34 dialog.page

The page that initiated this dialog, if available.

**Usage**

    dialog.page();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Page](/docs/api/class-page "Page")[#](#dialog-page-return)

* * *

### type[â€‹](#dialog-type "Direct link to type")

Added before v1.9 dialog.type

Returns dialog's type, can be one of `alert`, `beforeunload`, `confirm` or `prompt`.

**Usage**

    dialog.type();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#dialog-type-return)

# Download

Download
========

[Download](/docs/api/class-download "Download") objects are dispatched by page via the [page.on('download')](/docs/api/class-page#page-event-download) event.

All the downloaded files belonging to the browser context are deleted when the browser context is closed.

Download event is emitted once the download starts. Download path becomes available once download completes.

    // Start waiting for download before clicking. Note no await.const downloadPromise = page.waitForEvent('download');await page.getByText('Download file').click();const download = await downloadPromise;// Wait for the download process to complete and save the downloaded file somewhere.await download.saveAs('/path/to/save/at/' + download.suggestedFilename());

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### cancel[â€‹](#download-cancel "Direct link to cancel")

Added in: v1.13 download.cancel

Cancels a download. Will not fail if the download is already finished or canceled. Upon successful cancellations, `download.failure()` would resolve to `'canceled'`.

**Usage**

    await download.cancel();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#download-cancel-return)

* * *

### createReadStream[â€‹](#download-create-read-stream "Direct link to createReadStream")

Added before v1.9 download.createReadStream

Returns a readable stream for a successful download, or throws for a failed/canceled download.

note

If you don't need a readable stream, it's usually simpler to read the file from disk after the download completed. See [download.path()](/docs/api/class-download#download-path).

**Usage**

    await download.createReadStream();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Readable](https://nodejs.org/api/stream.html#stream_class_stream_readable "Readable")\>[#](#download-create-read-stream-return)

* * *

### delete[â€‹](#download-delete "Direct link to delete")

Added before v1.9 download.delete

Deletes the downloaded file. Will wait for the download to finish if necessary.

**Usage**

    await download.delete();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#download-delete-return)

* * *

### failure[â€‹](#download-failure "Direct link to failure")

Added before v1.9 download.failure

Returns download error if any. Will wait for the download to finish if necessary.

**Usage**

    await download.failure();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#download-failure-return)

* * *

### page[â€‹](#download-page "Direct link to page")

Added in: v1.12 download.page

Get the page that the download belongs to.

**Usage**

    download.page();

**Returns**

*   [Page](/docs/api/class-page "Page")[#](#download-page-return)

* * *

### path[â€‹](#download-path "Direct link to path")

Added before v1.9 download.path

Returns path to the downloaded file for a successful download, or throws for a failed/canceled download. The method will wait for the download to finish if necessary. The method throws when connected remotely.

Note that the download's file name is a random GUID, use [download.suggestedFilename()](/docs/api/class-download#download-suggested-filename) to get suggested file name.

**Usage**

    await download.path();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#download-path-return)

* * *

### saveAs[â€‹](#download-save-as "Direct link to saveAs")

Added before v1.9 download.saveAs

Copy the download to a user-specified path. It is safe to call this method while the download is still in progress. Will wait for the download to finish if necessary.

**Usage**

    await download.saveAs('/path/to/save/at/' + download.suggestedFilename());

**Arguments**

*   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#download-save-as-option-path)
    
    Path where the download should be copied.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#download-save-as-return)

* * *

### suggestedFilename[â€‹](#download-suggested-filename "Direct link to suggestedFilename")

Added before v1.9 download.suggestedFilename

Returns suggested filename for this download. It is typically computed by the browser from the [`Content-Disposition`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition) response header or the `download` attribute. See the spec on [whatwg](https://html.spec.whatwg.org/#downloading-resources). Different browsers can use different logic for computing it.

**Usage**

    download.suggestedFilename();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#download-suggested-filename-return)

* * *

### url[â€‹](#download-url "Direct link to url")

Added before v1.9 download.url

Returns downloaded url.

**Usage**

    download.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#download-url-return)

# ElementHandle

ElementHandle
=============

*   extends: [JSHandle](/docs/api/class-jshandle "JSHandle")

ElementHandle represents an in-page DOM element. ElementHandles can be created with the [page.$()](/docs/api/class-page#page-query-selector) method.

Discouraged

The use of ElementHandle is discouraged, use [Locator](/docs/api/class-locator "Locator") objects and web-first assertions instead.

    const hrefElement = await page.$('a');await hrefElement.click();

ElementHandle prevents DOM element from garbage collection unless the handle is disposed with [jsHandle.dispose()](/docs/api/class-jshandle#js-handle-dispose). ElementHandles are auto-disposed when their origin frame gets navigated.

ElementHandle instances can be used as an argument in [page.$eval()](/docs/api/class-page#page-eval-on-selector) and [page.evaluate()](/docs/api/class-page#page-evaluate) methods.

The difference between the [Locator](/docs/api/class-locator "Locator") and ElementHandle is that the ElementHandle points to a particular element, while [Locator](/docs/api/class-locator "Locator") captures the logic of how to retrieve an element.

In the example below, handle points to a particular DOM element on page. If that element changes text or is used by React to render an entirely different component, handle is still pointing to that very DOM element. This can lead to unexpected behaviors.

    const handle = await page.$('text=Submit');// ...await handle.hover();await handle.click();

With the locator, every time the `element` is used, up-to-date DOM element is located in the page using the selector. So in the snippet below, underlying DOM element is going to be located twice.

    const locator = page.getByText('Submit');// ...await locator.hover();await locator.click();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### boundingBox[â€‹](#element-handle-bounding-box "Direct link to boundingBox")

Added before v1.9 elementHandle.boundingBox

This method returns the bounding box of the element, or `null` if the element is not visible. The bounding box is calculated relative to the main frame viewport - which is usually the same as the browser window.

Scrolling affects the returned bounding box, similarly to [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect). That means `x` and/or `y` may be negative.

Elements from child frames return the bounding box relative to the main frame, unlike the [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).

Assuming the page is static, it is safe to use bounding box coordinates to perform input. For example, the following snippet should click the center of the element.

**Usage**

    const box = await elementHandle.boundingBox();await page.mouse.click(box.x + box.width / 2, box.y + box.height / 2);

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#element-handle-bounding-box-return)
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the x coordinate of the element in pixels.
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the y coordinate of the element in pixels.
        
    *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the width of the element in pixels.
        
    *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the height of the element in pixels.
        

* * *

### contentFrame[â€‹](#element-handle-content-frame "Direct link to contentFrame")

Added before v1.9 elementHandle.contentFrame

Returns the content frame for element handles referencing iframe nodes, or `null` otherwise

**Usage**

    await elementHandle.contentFrame();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Frame](/docs/api/class-frame "Frame")\>[#](#element-handle-content-frame-return)

* * *

### ownerFrame[â€‹](#element-handle-owner-frame "Direct link to ownerFrame")

Added before v1.9 elementHandle.ownerFrame

Returns the frame containing the given element.

**Usage**

    await elementHandle.ownerFrame();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Frame](/docs/api/class-frame "Frame")\>[#](#element-handle-owner-frame-return)

* * *

### waitForElementState[â€‹](#element-handle-wait-for-element-state "Direct link to waitForElementState")

Added before v1.9 elementHandle.waitForElementState

Returns when the element satisfies the [state](/docs/api/class-elementhandle#element-handle-wait-for-element-state-option-state).

Depending on the [state](/docs/api/class-elementhandle#element-handle-wait-for-element-state-option-state) parameter, this method waits for one of the [actionability](/docs/actionability) checks to pass. This method throws when the element is detached while waiting, unless waiting for the `"hidden"` state.

*   `"visible"` Wait until the element is [visible](/docs/actionability#visible).
*   `"hidden"` Wait until the element is [not visible](/docs/actionability#visible) or not attached. Note that waiting for hidden does not throw when the element detaches.
*   `"stable"` Wait until the element is both [visible](/docs/actionability#visible) and [stable](/docs/actionability#stable).
*   `"enabled"` Wait until the element is [enabled](/docs/actionability#enabled).
*   `"disabled"` Wait until the element is [not enabled](/docs/actionability#enabled).
*   `"editable"` Wait until the element is [editable](/docs/actionability#editable).

If the element does not satisfy the condition for the [timeout](/docs/api/class-elementhandle#element-handle-wait-for-element-state-option-timeout) milliseconds, this method will throw.

**Usage**

    await elementHandle.waitForElementState(state);await elementHandle.waitForElementState(state, options);

**Arguments**

*   `state` "visible" | "hidden" | "stable" | "enabled" | "disabled" | "editable"[#](#element-handle-wait-for-element-state-option-state)
    
    A state to wait for, see below for more details.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-wait-for-element-state-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-wait-for-element-state-return)

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### $[â€‹](#element-handle-query-selector "Direct link to $")

Added in: v1.9 elementHandle.$

Discouraged

Use locator-based [page.locator()](/docs/api/class-page#page-locator) instead. Read more about [locators](/docs/locators).

The method finds an element matching the specified selector in the `ElementHandle`'s subtree. If no elements match the selector, returns `null`.

**Usage**

    await elementHandle.$(selector);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-query-selector-option-selector)
    
    A selector to query for.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#element-handle-query-selector-return)

* * *

### $$[â€‹](#element-handle-query-selector-all "Direct link to $$")

Added in: v1.9 elementHandle.$$

Discouraged

Use locator-based [page.locator()](/docs/api/class-page#page-locator) instead. Read more about [locators](/docs/locators).

The method finds all elements matching the specified selector in the `ElementHandle`s subtree. If no elements match the selector, returns empty array.

**Usage**

    await elementHandle.$$(selector);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-query-selector-all-option-selector)
    
    A selector to query for.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>>[#](#element-handle-query-selector-all-return)

* * *

### $eval[â€‹](#element-handle-eval-on-selector "Direct link to $eval")

Added in: v1.9 elementHandle.$eval

Discouraged

This method does not wait for the element to pass actionability checks and therefore can lead to the flaky tests. Use [locator.evaluate()](/docs/api/class-locator#locator-evaluate), other [Locator](/docs/api/class-locator "Locator") helper methods or web-first assertions instead.

Returns the return value of [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression).

The method finds an element matching the specified selector in the `ElementHandle`s subtree and passes it as a first argument to [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression). If no elements match the selector, the method throws an error.

If [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [elementHandle.$eval()](/docs/api/class-elementhandle#element-handle-eval-on-selector) would wait for the promise to resolve and return its value.

**Usage**

    const tweetHandle = await page.$('.tweet');expect(await tweetHandle.$eval('.like', node => node.innerText)).toBe('100');expect(await tweetHandle.$eval('.retweets', node => node.innerText)).toBe('10');

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-eval-on-selector-option-selector)
    
    A selector to query for.
    
*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Element](https://developer.mozilla.org/en-US/docs/Web/API/element "Element")) | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-eval-on-selector-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#element-handle-eval-on-selector-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#element-handle-eval-on-selector-return)

* * *

### $$eval[â€‹](#element-handle-eval-on-selector-all "Direct link to $$eval")

Added in: v1.9 elementHandle.$$eval

Discouraged

In most cases, [locator.evaluateAll()](/docs/api/class-locator#locator-evaluate-all), other [Locator](/docs/api/class-locator "Locator") helper methods and web-first assertions do a better job.

Returns the return value of [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression).

The method finds all elements matching the specified selector in the `ElementHandle`'s subtree and passes an array of matched elements as a first argument to [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression).

If [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [elementHandle.$$eval()](/docs/api/class-elementhandle#element-handle-eval-on-selector-all) would wait for the promise to resolve and return its value.

**Usage**

    <div class="feed">  <div class="tweet">Hello!</div>  <div class="tweet">Hi!</div></div>

    const feedHandle = await page.$('.feed');expect(await feedHandle.$$eval('.tweet', nodes =>  nodes.map(n => n.innerText))).toEqual(['Hello!', 'Hi!'],);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-eval-on-selector-all-option-selector)
    
    A selector to query for.
    
*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Element](https://developer.mozilla.org/en-US/docs/Web/API/element "Element")\>) | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-eval-on-selector-all-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#element-handle-eval-on-selector-all-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-elementhandle#element-handle-eval-on-selector-all-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#element-handle-eval-on-selector-all-return)

* * *

### check[â€‹](#element-handle-check "Direct link to check")

Added before v1.9 elementHandle.check

Discouraged

Use locator-based [locator.check()](/docs/api/class-locator#locator-check) instead. Read more about [locators](/docs/locators).

This method checks the element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
2.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-elementhandle#element-handle-check-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now checked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-check-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await elementHandle.check();await elementHandle.check(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-check-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-check-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.11[#](#element-handle-check-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-check-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#element-handle-check-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-check-return)

* * *

### click[â€‹](#element-handle-click "Direct link to click")

Added before v1.9 elementHandle.click

Discouraged

Use locator-based [locator.click()](/docs/api/class-locator#locator-click) instead. Read more about [locators](/docs/locators).

This method clicks the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-elementhandle#element-handle-click-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/docs/api/class-elementhandle#element-handle-click-option-position).
4.  Wait for initiated navigations to either succeed or fail, unless [noWaitAfter](/docs/api/class-elementhandle#element-handle-click-option-no-wait-after) option is set.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-click-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await elementHandle.click();await elementHandle.click(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `button` "left" | "right" | "middle" _(optional)_[#](#element-handle-click-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-click-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-click-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-click-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#element-handle-click-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-click-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#element-handle-click-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#element-handle-click-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between Playwright's current cursor position and the provided destination. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-click-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#element-handle-click-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-click-return)

* * *

### dblclick[â€‹](#element-handle-dblclick "Direct link to dblclick")

Added before v1.9 elementHandle.dblclick

Discouraged

Use locator-based [locator.dblclick()](/docs/api/class-locator#locator-dblclick) instead. Read more about [locators](/docs/locators).

This method double clicks the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-elementhandle#element-handle-dblclick-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/docs/api/class-elementhandle#element-handle-dblclick-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-dblclick-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`elementHandle.dblclick()` dispatches two `click` events and a single `dblclick` event.

**Usage**

    await elementHandle.dblclick();await elementHandle.dblclick(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `button` "left" | "right" | "middle" _(optional)_[#](#element-handle-dblclick-option-button)
        
        Defaults to `left`.
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-dblclick-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-dblclick-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#element-handle-dblclick-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-dblclick-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#element-handle-dblclick-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#element-handle-dblclick-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between Playwright's current cursor position and the provided destination. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-dblclick-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#element-handle-dblclick-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-dblclick-return)

* * *

### dispatchEvent[â€‹](#element-handle-dispatch-event "Direct link to dispatchEvent")

Added before v1.9 elementHandle.dispatchEvent

Discouraged

Use locator-based [locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event) instead. Read more about [locators](/docs/locators).

The snippet below dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

**Usage**

    await elementHandle.dispatchEvent('click');

Under the hood, it creates an instance of an event based on the given [type](/docs/api/class-elementhandle#element-handle-dispatch-event-option-type), initializes it with [eventInit](/docs/api/class-elementhandle#element-handle-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [eventInit](/docs/api/class-elementhandle#element-handle-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify `JSHandle` as the property value if you want live objects to be passed into the event:

    // Note you can only create DataTransfer in Chromium and Firefoxconst dataTransfer = await page.evaluateHandle(() => new DataTransfer());await elementHandle.dispatchEvent('dragstart', { dataTransfer });

**Arguments**

*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `eventInit` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#element-handle-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-dispatch-event-return)

* * *

### fill[â€‹](#element-handle-fill "Direct link to fill")

Added before v1.9 elementHandle.fill

Discouraged

Use locator-based [locator.fill()](/docs/api/class-locator#locator-fill) instead. Read more about [locators](/docs/locators).

This method waits for [actionability](/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

**Usage**

    await elementHandle.fill(value);await elementHandle.fill(value, options);

**Arguments**

*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-fill-option-value)
    
    Value to set for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#element-handle-fill-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-fill-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-fill-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-fill-return)

* * *

### focus[â€‹](#element-handle-focus "Direct link to focus")

Added before v1.9 elementHandle.focus

Discouraged

Use locator-based [locator.focus()](/docs/api/class-locator#locator-focus) instead. Read more about [locators](/docs/locators).

Calls [focus](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus) on the element.

**Usage**

    await elementHandle.focus();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-focus-return)

* * *

### getAttribute[â€‹](#element-handle-get-attribute "Direct link to getAttribute")

Added before v1.9 elementHandle.getAttribute

Discouraged

Use locator-based [locator.getAttribute()](/docs/api/class-locator#locator-get-attribute) instead. Read more about [locators](/docs/locators).

Returns element attribute value.

**Usage**

    await elementHandle.getAttribute(name);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-get-attribute-option-name)
    
    Attribute name to get the value for.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#element-handle-get-attribute-return)

* * *

### hover[â€‹](#element-handle-hover "Direct link to hover")

Added before v1.9 elementHandle.hover

Discouraged

Use locator-based [locator.hover()](/docs/api/class-locator#locator-hover) instead. Read more about [locators](/docs/locators).

This method hovers over the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-elementhandle#element-handle-hover-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/docs/api/class-elementhandle#element-handle-hover-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-hover-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await elementHandle.hover();await elementHandle.hover(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-hover-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#element-handle-hover-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#element-handle-hover-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#element-handle-hover-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-hover-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#element-handle-hover-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-hover-return)

* * *

### innerHTML[â€‹](#element-handle-inner-html "Direct link to innerHTML")

Added before v1.9 elementHandle.innerHTML

Discouraged

Use locator-based [locator.innerHTML()](/docs/api/class-locator#locator-inner-html) instead. Read more about [locators](/docs/locators).

Returns the `element.innerHTML`.

**Usage**

    await elementHandle.innerHTML();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#element-handle-inner-html-return)

* * *

### innerText[â€‹](#element-handle-inner-text "Direct link to innerText")

Added before v1.9 elementHandle.innerText

Discouraged

Use locator-based [locator.innerText()](/docs/api/class-locator#locator-inner-text) instead. Read more about [locators](/docs/locators).

Returns the `element.innerText`.

**Usage**

    await elementHandle.innerText();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#element-handle-inner-text-return)

* * *

### inputValue[â€‹](#element-handle-input-value "Direct link to inputValue")

Added in: v1.13 elementHandle.inputValue

Discouraged

Use locator-based [locator.inputValue()](/docs/api/class-locator#locator-input-value) instead. Read more about [locators](/docs/locators).

Returns `input.value` for the selected `<input>` or `<textarea>` or `<select>` element.

Throws for non-input elements. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

**Usage**

    await elementHandle.inputValue();await elementHandle.inputValue(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-input-value-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#element-handle-input-value-return)

* * *

### isChecked[â€‹](#element-handle-is-checked "Direct link to isChecked")

Added before v1.9 elementHandle.isChecked

Discouraged

Use locator-based [locator.isChecked()](/docs/api/class-locator#locator-is-checked) instead. Read more about [locators](/docs/locators).

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

**Usage**

    await elementHandle.isChecked();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#element-handle-is-checked-return)

* * *

### isDisabled[â€‹](#element-handle-is-disabled "Direct link to isDisabled")

Added before v1.9 elementHandle.isDisabled

Discouraged

Use locator-based [locator.isDisabled()](/docs/api/class-locator#locator-is-disabled) instead. Read more about [locators](/docs/locators).

Returns whether the element is disabled, the opposite of [enabled](/docs/actionability#enabled).

**Usage**

    await elementHandle.isDisabled();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#element-handle-is-disabled-return)

* * *

### isEditable[â€‹](#element-handle-is-editable "Direct link to isEditable")

Added before v1.9 elementHandle.isEditable

Discouraged

Use locator-based [locator.isEditable()](/docs/api/class-locator#locator-is-editable) instead. Read more about [locators](/docs/locators).

Returns whether the element is [editable](/docs/actionability#editable).

**Usage**

    await elementHandle.isEditable();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#element-handle-is-editable-return)

* * *

### isEnabled[â€‹](#element-handle-is-enabled "Direct link to isEnabled")

Added before v1.9 elementHandle.isEnabled

Discouraged

Use locator-based [locator.isEnabled()](/docs/api/class-locator#locator-is-enabled) instead. Read more about [locators](/docs/locators).

Returns whether the element is [enabled](/docs/actionability#enabled).

**Usage**

    await elementHandle.isEnabled();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#element-handle-is-enabled-return)

* * *

### isHidden[â€‹](#element-handle-is-hidden "Direct link to isHidden")

Added before v1.9 elementHandle.isHidden

Discouraged

Use locator-based [locator.isHidden()](/docs/api/class-locator#locator-is-hidden) instead. Read more about [locators](/docs/locators).

Returns whether the element is hidden, the opposite of [visible](/docs/actionability#visible).

**Usage**

    await elementHandle.isHidden();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#element-handle-is-hidden-return)

* * *

### isVisible[â€‹](#element-handle-is-visible "Direct link to isVisible")

Added before v1.9 elementHandle.isVisible

Discouraged

Use locator-based [locator.isVisible()](/docs/api/class-locator#locator-is-visible) instead. Read more about [locators](/docs/locators).

Returns whether the element is [visible](/docs/actionability#visible).

**Usage**

    await elementHandle.isVisible();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#element-handle-is-visible-return)

* * *

### press[â€‹](#element-handle-press "Direct link to press")

Added before v1.9 elementHandle.press

Discouraged

Use locator-based [locator.press()](/docs/api/class-locator#locator-press) instead. Read more about [locators](/docs/locators).

Focuses the element, and then uses [keyboard.down()](/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/docs/api/class-keyboard#keyboard-up).

[key](/docs/api/class-elementhandle#element-handle-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/docs/api/class-elementhandle#element-handle-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`.

Holding down `Shift` will type the text that corresponds to the [key](/docs/api/class-elementhandle#element-handle-press-option-key) in the upper case.

If [key](/docs/api/class-elementhandle#element-handle-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

    await elementHandle.press(key);await elementHandle.press(key, options);

**Arguments**

*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-press-option-delay)
        
        Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-press-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-press-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-press-return)

* * *

### screenshot[â€‹](#element-handle-screenshot "Direct link to screenshot")

Added before v1.9 elementHandle.screenshot

Discouraged

Use locator-based [locator.screenshot()](/docs/api/class-locator#locator-screenshot) instead. Read more about [locators](/docs/locators).

This method captures a screenshot of the page, clipped to the size and position of this particular element. If the element is covered by other elements, it will not be actually visible on the screenshot. If the element is a scrollable container, only the currently scrolled content will be visible on the screenshot.

This method waits for the [actionability](/docs/actionability) checks, then scrolls element into view before taking a screenshot. If the element is detached from DOM, the method throws an error.

Returns the buffer with the captured screenshot.

**Usage**

    await elementHandle.screenshot();await elementHandle.screenshot(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `animations` "disabled" | "allow" _(optional)_[#](#element-handle-screenshot-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"allow"` that leaves animations untouched.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#element-handle-screenshot-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#element-handle-screenshot-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-elementhandle#element-handle-screenshot-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#element-handle-screenshot-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-screenshot-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#element-handle-screenshot-option-path)
        
        The file path to save the image to. The screenshot type will be inferred from file extension. If [path](/docs/api/class-elementhandle#element-handle-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
        
    *   `quality` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-screenshot-option-quality)
        
        The quality of the image, between 0-100. Not applicable to `png` images.
        
    *   `scale` "css" | "device" _(optional)_[#](#element-handle-screenshot-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"device"`.
        
    *   `style` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.41[#](#element-handle-screenshot-option-style)
        
        Text of the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-screenshot-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `type` "png" | "jpeg" _(optional)_[#](#element-handle-screenshot-option-type)
        
        Specify screenshot type, defaults to `png`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#element-handle-screenshot-return)

* * *

### scrollIntoViewIfNeeded[â€‹](#element-handle-scroll-into-view-if-needed "Direct link to scrollIntoViewIfNeeded")

Added before v1.9 elementHandle.scrollIntoViewIfNeeded

Discouraged

Use locator-based [locator.scrollIntoViewIfNeeded()](/docs/api/class-locator#locator-scroll-into-view-if-needed) instead. Read more about [locators](/docs/locators).

This method waits for [actionability](/docs/actionability) checks, then tries to scroll element into view, unless it is completely visible as defined by [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)'s `ratio`.

Throws when `elementHandle` does not point to an element [connected](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected) to a Document or a ShadowRoot.

See [scrolling](/docs/input#scrolling) for alternative ways to scroll.

**Usage**

    await elementHandle.scrollIntoViewIfNeeded();await elementHandle.scrollIntoViewIfNeeded(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-scroll-into-view-if-needed-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-scroll-into-view-if-needed-return)

* * *

### selectOption[â€‹](#element-handle-select-option "Direct link to selectOption")

Added before v1.9 elementHandle.selectOption

Discouraged

Use locator-based [locator.selectOption()](/docs/api/class-locator#locator-select-option) instead. Read more about [locators](/docs/locators).

This method waits for [actionability](/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

**Usage**

    // Single selection matching the value or labelhandle.selectOption('blue');// single selection matching the labelhandle.selectOption({ label: 'Blue' });// multiple selectionhandle.selectOption(['red', 'green', 'blue']);

**Arguments**

*   `values` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\> | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#element-handle-select-option-option-values)
    
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.value`. Optional.
        
    *   `label` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.label`. Optional.
        
    *   `index` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Matches by the index. Optional.
        
    
    Options to select. If the `<select>` has the `multiple` attribute, all matching options are selected, otherwise only the first option matching one of the passed options is selected. String values are matching both values and labels. Option is considered matching if all specified properties match.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#element-handle-select-option-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-select-option-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-select-option-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#element-handle-select-option-return)

* * *

### selectText[â€‹](#element-handle-select-text "Direct link to selectText")

Added before v1.9 elementHandle.selectText

Discouraged

Use locator-based [locator.selectText()](/docs/api/class-locator#locator-select-text) instead. Read more about [locators](/docs/locators).

This method waits for [actionability](/docs/actionability) checks, then focuses the element and selects all its text content.

If the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), focuses and selects text in the control instead.

**Usage**

    await elementHandle.selectText();await elementHandle.selectText(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#element-handle-select-text-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-select-text-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-select-text-return)

* * *

### setChecked[â€‹](#element-handle-set-checked "Direct link to setChecked")

Added in: v1.15 elementHandle.setChecked

Discouraged

Use locator-based [locator.setChecked()](/docs/api/class-locator#locator-set-checked) instead. Read more about [locators](/docs/locators).

This method checks or unchecks an element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws.
2.  If the element already has the right checked state, this method returns immediately.
3.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-elementhandle#element-handle-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-set-checked-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await elementHandle.setChecked(checked);await elementHandle.setChecked(checked, options);

**Arguments**

*   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#element-handle-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-set-checked-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-set-checked-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#element-handle-set-checked-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-set-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-set-checked-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-set-checked-return)

* * *

### setInputFiles[â€‹](#element-handle-set-input-files "Direct link to setInputFiles")

Added before v1.9 elementHandle.setInputFiles

Discouraged

Use locator-based [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) instead. Read more about [locators](/docs/locators).

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files. For inputs with a `[webkitdirectory]` attribute, only a single directory path is supported.

This method expects [ElementHandle](/docs/api/class-elementhandle "ElementHandle") to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

**Usage**

    await elementHandle.setInputFiles(files);await elementHandle.setInputFiles(files, options);

**Arguments**

*   `files` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#element-handle-set-input-files-option-files)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File name
        
    *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File type
        
    *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        File content
        
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-set-input-files-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-set-input-files-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-set-input-files-return)

* * *

### tap[â€‹](#element-handle-tap "Direct link to tap")

Added before v1.9 elementHandle.tap

Discouraged

Use locator-based [locator.tap()](/docs/api/class-locator#locator-tap) instead. Read more about [locators](/docs/locators).

This method taps the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-elementhandle#element-handle-tap-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.touchscreen](/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/docs/api/class-elementhandle#element-handle-tap-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-tap-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`elementHandle.tap()` requires that the `hasTouch` option of the browser context be set to true.

**Usage**

    await elementHandle.tap();await elementHandle.tap(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-tap-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#element-handle-tap-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-tap-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#element-handle-tap-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-tap-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#element-handle-tap-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-tap-return)

* * *

### textContent[â€‹](#element-handle-text-content "Direct link to textContent")

Added before v1.9 elementHandle.textContent

Discouraged

Use locator-based [locator.textContent()](/docs/api/class-locator#locator-text-content) instead. Read more about [locators](/docs/locators).

Returns the `node.textContent`.

**Usage**

    await elementHandle.textContent();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#element-handle-text-content-return)

* * *

### type[â€‹](#element-handle-type "Direct link to type")

Added before v1.9 elementHandle.type

Deprecated

In most cases, you should use [locator.fill()](/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

Focuses the element, and then sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [elementHandle.press()](/docs/api/class-elementhandle#element-handle-press).

**Usage**

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-type-option-text)
    
    A text to type into a focused element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-type-option-delay)
        
        Time to wait between key presses in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-type-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-type-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-type-return)

* * *

### uncheck[â€‹](#element-handle-uncheck "Direct link to uncheck")

Added before v1.9 elementHandle.uncheck

Discouraged

Use locator-based [locator.uncheck()](/docs/api/class-locator#locator-uncheck) instead. Read more about [locators](/docs/locators).

This method checks the element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
2.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-elementhandle#element-handle-uncheck-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now unchecked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-elementhandle#element-handle-uncheck-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await elementHandle.uncheck();await elementHandle.uncheck(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-uncheck-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#element-handle-uncheck-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.11[#](#element-handle-uncheck-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-uncheck-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#element-handle-uncheck-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#element-handle-uncheck-return)

* * *

### waitForSelector[â€‹](#element-handle-wait-for-selector "Direct link to waitForSelector")

Added before v1.9 elementHandle.waitForSelector

Discouraged

Use web assertions that assert visibility or a locator-based [locator.waitFor()](/docs/api/class-locator#locator-wait-for) instead.

Returns element specified by selector when it satisfies [state](/docs/api/class-elementhandle#element-handle-wait-for-selector-option-state) option. Returns `null` if waiting for `hidden` or `detached`.

Wait for the [selector](/docs/api/class-elementhandle#element-handle-wait-for-selector-option-selector) relative to the element handle to satisfy [state](/docs/api/class-elementhandle#element-handle-wait-for-selector-option-state) option (either appear/disappear from dom, or become visible/hidden). If at the moment of calling the method [selector](/docs/api/class-elementhandle#element-handle-wait-for-selector-option-selector) already satisfies the condition, the method will return immediately. If the selector doesn't satisfy the condition for the [timeout](/docs/api/class-elementhandle#element-handle-wait-for-selector-option-timeout) milliseconds, the function will throw.

**Usage**

    await page.setContent(`<div><span></span></div>`);const div = await page.$('div');// Waiting for the 'span' selector relative to the div.const span = await div.waitForSelector('span', { state: 'attached' });

note

This method does not work across navigations, use [page.waitForSelector()](/docs/api/class-page#page-wait-for-selector) instead.

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#element-handle-wait-for-selector-option-selector)
    
    A selector to query for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#element-handle-wait-for-selector-option-state)
        
        Defaults to `'visible'`. Can be either:
        
        *   `'attached'` - wait for element to be present in DOM.
        *   `'detached'` - wait for element to not be present in DOM.
        *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
        *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.15[#](#element-handle-wait-for-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#element-handle-wait-for-selector-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#element-handle-wait-for-selector-return)

# FileChooser

FileChooser
===========

[FileChooser](/docs/api/class-filechooser "FileChooser") objects are dispatched by the page in the [page.on('filechooser')](/docs/api/class-page#page-event-file-chooser) event.

    // Start waiting for file chooser before clicking. Note no await.const fileChooserPromise = page.waitForEvent('filechooser');await page.getByText('Upload file').click();const fileChooser = await fileChooserPromise;await fileChooser.setFiles(path.join(__dirname, 'myfile.pdf'));

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### element[â€‹](#file-chooser-element "Direct link to element")

Added before v1.9 fileChooser.element

Returns input element associated with this file chooser.

**Usage**

    fileChooser.element();

**Returns**

*   [ElementHandle](/docs/api/class-elementhandle "ElementHandle")[#](#file-chooser-element-return)

* * *

### isMultiple[â€‹](#file-chooser-is-multiple "Direct link to isMultiple")

Added before v1.9 fileChooser.isMultiple

Returns whether this file chooser accepts multiple files.

**Usage**

    fileChooser.isMultiple();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#file-chooser-is-multiple-return)

* * *

### page[â€‹](#file-chooser-page "Direct link to page")

Added before v1.9 fileChooser.page

Returns page this file chooser belongs to.

**Usage**

    fileChooser.page();

**Returns**

*   [Page](/docs/api/class-page "Page")[#](#file-chooser-page-return)

* * *

### setFiles[â€‹](#file-chooser-set-files "Direct link to setFiles")

Added before v1.9 fileChooser.setFiles

Sets the value of the file input this chooser is associated with. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files.

**Usage**

    await fileChooser.setFiles(files);await fileChooser.setFiles(files, options);

**Arguments**

*   `files` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#file-chooser-set-files-option-files)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File name
        
    *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File type
        
    *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        File content
        
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#file-chooser-set-files-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#file-chooser-set-files-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#file-chooser-set-files-return)

# Frame

Frame
=====

At every point of time, page exposes its current frame tree via the [page.mainFrame()](/docs/api/class-page#page-main-frame) and [frame.childFrames()](/docs/api/class-frame#frame-child-frames) methods.

[Frame](/docs/api/class-frame "Frame") object's lifecycle is controlled by three events, dispatched on the page object:

*   [page.on('frameattached')](/docs/api/class-page#page-event-frame-attached) - fired when the frame gets attached to the page. A Frame can be attached to the page only once.
*   [page.on('framenavigated')](/docs/api/class-page#page-event-frame-navigated) - fired when the frame commits navigation to a different URL.
*   [page.on('framedetached')](/docs/api/class-page#page-event-frame-detached) - fired when the frame gets detached from the page. A Frame can be detached from the page only once.

An example of dumping frame tree:

    const { firefox } = require('playwright');  // Or 'chromium' or 'webkit'.(async () => {  const browser = await firefox.launch();  const page = await browser.newPage();  await page.goto('https://www.google.com/chrome/browser/canary.html');  dumpFrameTree(page.mainFrame(), '');  await browser.close();  function dumpFrameTree(frame, indent) {    console.log(indent + frame.url());    for (const child of frame.childFrames())      dumpFrameTree(child, indent + '  ');  }})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### addScriptTag[â€‹](#frame-add-script-tag "Direct link to addScriptTag")

Added before v1.9 frame.addScriptTag

Returns the added tag when the script's onload fires or when the script content was injected into frame.

Adds a `<script>` tag into the page with the desired url or content.

**Usage**

    await frame.addScriptTag();await frame.addScriptTag(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-script-tag-option-content)
        
        Raw JavaScript content to be injected into frame.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-script-tag-option-path)
        
        Path to the JavaScript file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
        
    *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-script-tag-option-type)
        
        Script type. Use 'module' in order to load a JavaScript ES6 module. See [script](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) for more details.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-script-tag-option-url)
        
        URL of a script to be added.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#frame-add-script-tag-return)

* * *

### addStyleTag[â€‹](#frame-add-style-tag "Direct link to addStyleTag")

Added before v1.9 frame.addStyleTag

Returns the added tag when the stylesheet's onload fires or when the CSS content was injected into frame.

Adds a `<link rel="stylesheet">` tag into the page with the desired url or a `<style type="text/css">` tag with the content.

**Usage**

    await frame.addStyleTag();await frame.addStyleTag(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-style-tag-option-content)
        
        Raw CSS content to be injected into frame.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-style-tag-option-path)
        
        Path to the CSS file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-add-style-tag-option-url)
        
        URL of the `<link>` tag.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#frame-add-style-tag-return)

* * *

### childFrames[â€‹](#frame-child-frames "Direct link to childFrames")

Added before v1.9 frame.childFrames

**Usage**

    frame.childFrames();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Frame](/docs/api/class-frame "Frame")\>[#](#frame-child-frames-return)

* * *

### content[â€‹](#frame-content "Direct link to content")

Added before v1.9 frame.content

Gets the full HTML contents of the frame, including the doctype.

**Usage**

    await frame.content();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-content-return)

* * *

### dragAndDrop[â€‹](#frame-drag-and-drop "Direct link to dragAndDrop")

Added in: v1.13 frame.dragAndDrop

**Usage**

    await frame.dragAndDrop(source, target);await frame.dragAndDrop(source, target, options);

**Arguments**

*   `source` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-drag-and-drop-option-source)
    
    A selector to search for an element to drag. If there are multiple elements satisfying the selector, the first will be used.
    
*   `target` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-drag-and-drop-option-target)
    
    A selector to search for an element to drop onto. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-drag-and-drop-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-drag-and-drop-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `sourcePosition` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.14[#](#frame-drag-and-drop-option-source-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#frame-drag-and-drop-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between the `mousedown` and `mouseup` of the drag. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-drag-and-drop-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `targetPosition` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.14[#](#frame-drag-and-drop-option-target-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-drag-and-drop-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-drag-and-drop-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-drag-and-drop-return)

* * *

### evaluate[â€‹](#frame-evaluate "Direct link to evaluate")

Added before v1.9 frame.evaluate

Returns the return value of [pageFunction](/docs/api/class-frame#frame-evaluate-option-expression).

If the function passed to the [frame.evaluate()](/docs/api/class-frame#frame-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.evaluate()](/docs/api/class-frame#frame-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [frame.evaluate()](/docs/api/class-frame#frame-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [frame.evaluate()](/docs/api/class-frame#frame-evaluate) returns `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

    const result = await frame.evaluate(([x, y]) => {  return Promise.resolve(x * y);}, [7, 8]);console.log(result); // prints "56"

A string can also be passed in instead of a function.

    console.log(await frame.evaluate('1 + 2')); // prints "3"

[ElementHandle](/docs/api/class-elementhandle "ElementHandle") instances can be passed as an argument to the [frame.evaluate()](/docs/api/class-frame#frame-evaluate):

    const bodyHandle = await frame.evaluate('document.body');const html = await frame.evaluate(([body, suffix]) =>  body.innerHTML + suffix, [bodyHandle, 'hello'],);await bodyHandle.dispose();

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-evaluate-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-evaluate-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-frame#frame-evaluate-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#frame-evaluate-return)

* * *

### evaluateHandle[â€‹](#frame-evaluate-handle "Direct link to evaluateHandle")

Added before v1.9 frame.evaluateHandle

Returns the return value of [pageFunction](/docs/api/class-frame#frame-evaluate-handle-option-expression) as a [JSHandle](/docs/api/class-jshandle "JSHandle").

The only difference between [frame.evaluate()](/docs/api/class-frame#frame-evaluate) and [frame.evaluateHandle()](/docs/api/class-frame#frame-evaluate-handle) is that [frame.evaluateHandle()](/docs/api/class-frame#frame-evaluate-handle) returns [JSHandle](/docs/api/class-jshandle "JSHandle").

If the function, passed to the [frame.evaluateHandle()](/docs/api/class-frame#frame-evaluate-handle), returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.evaluateHandle()](/docs/api/class-frame#frame-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

    // Handle for the window objectconst aWindowHandle = await frame.evaluateHandle(() => Promise.resolve(window));

A string can also be passed in instead of a function.

    const aHandle = await frame.evaluateHandle('document'); // Handle for the 'document'.

[JSHandle](/docs/api/class-jshandle "JSHandle") instances can be passed as an argument to the [frame.evaluateHandle()](/docs/api/class-frame#frame-evaluate-handle):

    const aHandle = await frame.evaluateHandle(() => document.body);const resultHandle = await frame.evaluateHandle(([body, suffix]) =>  body.innerHTML + suffix, [aHandle, 'hello'],);console.log(await resultHandle.jsonValue());await resultHandle.dispose();

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-evaluate-handle-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-evaluate-handle-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-frame#frame-evaluate-handle-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#frame-evaluate-handle-return)

* * *

### frameElement[â€‹](#frame-frame-element "Direct link to frameElement")

Added before v1.9 frame.frameElement

Returns the `frame` or `iframe` element handle which corresponds to this frame.

This is an inverse of [elementHandle.contentFrame()](/docs/api/class-elementhandle#element-handle-content-frame). Note that returned handle actually belongs to the parent frame.

This method throws an error if the frame has been detached before `frameElement()` returns.

**Usage**

    const frameElement = await frame.frameElement();const contentFrame = await frameElement.contentFrame();console.log(frame === contentFrame);  // -> true

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#frame-frame-element-return)

* * *

### frameLocator[â€‹](#frame-frame-locator "Direct link to frameLocator")

Added in: v1.17 frame.frameLocator

When working with iframes, you can create a frame locator that will enter the iframe and allow selecting elements in that iframe.

**Usage**

Following snippet locates element with text "Submit" in the iframe with id `my-frame`, like `<iframe id="my-frame">`:

    const locator = frame.frameLocator('#my-iframe').getByText('Submit');await locator.click();

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#frame-frame-locator-return)

* * *

### getByAltText[â€‹](#frame-get-by-alt-text "Direct link to getByAltText")

Added in: v1.27 frame.getByAltText

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

    await page.getByAltText('Playwright logo').click();

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-alt-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-alt-text-return)

* * *

### getByLabel[â€‹](#frame-get-by-label "Direct link to getByLabel")

Added in: v1.27 frame.getByLabel

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

    await page.getByLabel('Username').fill('john');await page.getByLabel('Password').fill('secret');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-label-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-label-return)

* * *

### getByPlaceholder[â€‹](#frame-get-by-placeholder "Direct link to getByPlaceholder")

Added in: v1.27 frame.getByPlaceholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

    await page    .getByPlaceholder('name@example.com')    .fill('playwright@microsoft.com');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-placeholder-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-placeholder-return)

* * *

### getByRole[â€‹](#frame-get-by-role "Direct link to getByRole")

Added in: v1.27 frame.getByRole

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

    await expect(page.getByRole('heading', { name: 'Sign up' })).toBeVisible();await page.getByRole('checkbox', { name: 'Subscribe' }).check();await page.getByRole('button', { name: /submit/i }).click();

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#frame-get-by-role-option-role)
    
    Required aria role.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-role-option-checked)
        
        An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
        
        Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
        
    *   `disabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-role-option-disabled)
        
        An attribute that is usually set by `aria-disabled` or `disabled`.
        
        note
        
        Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
        
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#frame-get-by-role-option-exact)
        
        Whether [name](/docs/api/class-frame#frame-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/docs/api/class-frame#frame-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
        
    *   `expanded` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-role-option-expanded)
        
        An attribute that is usually set by `aria-expanded`.
        
        Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
        
    *   `includeHidden` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-role-option-include-hidden)
        
        Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
        
        Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
        
    *   `level` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-get-by-role-option-level)
        
        A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
        
        Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#frame-get-by-role-option-name)
        
        Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/docs/api/class-frame#frame-get-by-role-option-exact) to control this behavior.
        
        Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
        
    *   `pressed` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-role-option-pressed)
        
        An attribute that is usually set by `aria-pressed`.
        
        Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
        
    *   `selected` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-role-option-selected)
        
        An attribute that is usually set by `aria-selected`.
        
        Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### getByTestId[â€‹](#frame-get-by-test-id "Direct link to getByTestId")

Added in: v1.27 frame.getByTestId

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">ItinÃ©raire</button>

You can locate the element by it's test id:

    await page.getByTestId('directions').click();

**Arguments**

*   `testId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.setTestIdAttribute()](/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

    // Set custom test id attribute from @playwright/test config:import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    testIdAttribute: 'data-pw'  },});

* * *

### getByText[â€‹](#frame-get-by-text "Direct link to getByText")

Added in: v1.27 frame.getByText

Allows locating elements that contain given text.

See also [locator.filter()](/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

    // Matches <span>page.getByText('world');// Matches first <div>page.getByText('Hello world');// Matches second <div>page.getByText('Hello', { exact: true });// Matches both <div>spage.getByText(/Hello/);// Matches second <div>page.getByText(/^hello$/i);

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### getByTitle[â€‹](#frame-get-by-title "Direct link to getByTitle")

Added in: v1.27 frame.getByTitle

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

    await expect(page.getByTitle('Issues count')).toHaveText('25 issues');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-get-by-title-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-get-by-title-return)

* * *

### goto[â€‹](#frame-goto "Direct link to goto")

Added before v1.9 frame.goto

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect.

The method will throw an error if:

*   there's an SSL error (e.g. in case of self-signed certificates).
*   target URL is invalid.
*   the [timeout](/docs/api/class-frame#frame-goto-option-timeout) is exceeded during navigation.
*   the remote server does not respond or is unreachable.
*   the main resource failed to load.

The method will not throw an error when any valid HTTP status code is returned by the remote server, including 404 "Not Found" and 500 "Internal Server Error". The status code for such responses can be retrieved by calling [response.status()](/docs/api/class-response#response-status).

note

The method either throws an error or returns a main resource response. The only exceptions are navigation to `about:blank` or navigation to the same URL with a different hash, which would succeed and return `null`.

note

Headless mode doesn't support navigation to a PDF document. See the [upstream issue](https://bugs.chromium.org/p/chromium/issues/detail?id=761295).

**Usage**

    await frame.goto(url);await frame.goto(url, options);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-goto-option-url)
    
    URL to navigate frame to. The url should include scheme, e.g. `https://`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `referer` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#frame-goto-option-referer)
        
        Referer header value. If provided it will take preference over the referer header value set by [page.setExtraHTTPHeaders()](/docs/api/class-page#page-set-extra-http-headers).
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-goto-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-goto-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#frame-goto-return)

* * *

### isDetached[â€‹](#frame-is-detached "Direct link to isDetached")

Added before v1.9 frame.isDetached

Returns `true` if the frame has been detached, or `false` otherwise.

**Usage**

    frame.isDetached();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#frame-is-detached-return)

* * *

### isEnabled[â€‹](#frame-is-enabled "Direct link to isEnabled")

Added before v1.9 frame.isEnabled

Returns whether the element is [enabled](/docs/actionability#enabled).

**Usage**

    await frame.isEnabled(selector);await frame.isEnabled(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-is-enabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-is-enabled-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-is-enabled-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#frame-is-enabled-return)

* * *

### locator[â€‹](#frame-locator "Direct link to locator")

Added in: v1.14 frame.locator

The method returns an element locator that can be used to perform actions on this page / frame. Locator is resolved to the element immediately before performing an action, so a series of actions on the same locator can in fact be performed on different DOM elements. That would happen if the DOM structure between those actions has changed.

[Learn more about locators](/docs/locators).

[Learn more about locators](/docs/locators).

**Usage**

    frame.locator(selector);frame.locator(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `has` [Locator](/docs/api/class-locator "Locator") _(optional)_[#](#frame-locator-option-has)
        
        Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
        
        Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNot` [Locator](/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#frame-locator-option-has-not)
        
        Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNotText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.33[#](#frame-locator-option-has-not-text)
        
        Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring.
        
    *   `hasText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#frame-locator-option-has-text)
        
        Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-return)

* * *

### name[â€‹](#frame-name "Direct link to name")

Added before v1.9 frame.name

Returns frame's name attribute as specified in the tag.

If the name is empty, returns the id attribute instead.

note

This value is calculated once when the frame is created, and will not update if the attribute is changed later.

**Usage**

    frame.name();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-name-return)

* * *

### page[â€‹](#frame-page "Direct link to page")

Added before v1.9 frame.page

Returns the page containing this frame.

**Usage**

    frame.page();

**Returns**

*   [Page](/docs/api/class-page "Page")[#](#frame-page-return)

* * *

### parentFrame[â€‹](#frame-parent-frame "Direct link to parentFrame")

Added before v1.9 frame.parentFrame

Parent frame, if any. Detached frames and main frames return `null`.

**Usage**

    frame.parentFrame();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Frame](/docs/api/class-frame "Frame")[#](#frame-parent-frame-return)

* * *

### setContent[â€‹](#frame-set-content "Direct link to setContent")

Added before v1.9 frame.setContent

This method internally calls [document.write()](https://developer.mozilla.org/en-US/docs/Web/API/Document/write), inheriting all its specific characteristics and behaviors.

**Usage**

    await frame.setContent(html);await frame.setContent(html, options);

**Arguments**

*   `html` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-set-content-option-html)
    
    HTML markup to assign to the page.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-set-content-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-set-content-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-set-content-return)

* * *

### title[â€‹](#frame-title "Direct link to title")

Added before v1.9 frame.title

Returns the page title.

**Usage**

    await frame.title();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-title-return)

* * *

### url[â€‹](#frame-url "Direct link to url")

Added before v1.9 frame.url

Returns frame's url.

**Usage**

    frame.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-url-return)

* * *

### waitForFunction[â€‹](#frame-wait-for-function "Direct link to waitForFunction")

Added before v1.9 frame.waitForFunction

Returns when the [pageFunction](/docs/api/class-frame#frame-wait-for-function-option-expression) returns a truthy value, returns that value.

**Usage**

The [frame.waitForFunction()](/docs/api/class-frame#frame-wait-for-function) can be used to observe viewport size change:

    const { firefox } = require('playwright');  // Or 'chromium' or 'webkit'.(async () => {  const browser = await firefox.launch();  const page = await browser.newPage();  const watchDog = page.mainFrame().waitForFunction('window.innerWidth < 100');  await page.setViewportSize({ width: 50, height: 50 });  await watchDog;  await browser.close();})();

To pass an argument to the predicate of `frame.waitForFunction` function:

    const selector = '.foo';await frame.waitForFunction(selector => !!document.querySelector(selector), selector);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-wait-for-function-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-wait-for-function-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-frame#frame-wait-for-function-option-expression).
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `polling` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | "raf" _(optional)_[#](#frame-wait-for-function-option-polling)
        
        If [polling](/docs/api/class-frame#frame-wait-for-function-option-polling) is `'raf'`, then [pageFunction](/docs/api/class-frame#frame-wait-for-function-option-expression) is constantly executed in `requestAnimationFrame` callback. If [polling](/docs/api/class-frame#frame-wait-for-function-option-polling) is a number, then it is treated as an interval in milliseconds at which the function would be executed. Defaults to `raf`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-wait-for-function-option-timeout)
        
        Maximum time to wait for in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#frame-wait-for-function-return)

* * *

### waitForLoadState[â€‹](#frame-wait-for-load-state "Direct link to waitForLoadState")

Added before v1.9 frame.waitForLoadState

Waits for the required load state to be reached.

This returns when the frame reaches a required load state, `load` by default. The navigation must have been committed when this method is called. If current document has already reached the required state, resolves immediately.

note

Most of the time, this method is not needed because Playwright [auto-waits before every action](/docs/actionability).

**Usage**

    await frame.click('button'); // Click triggers navigation.await frame.waitForLoadState(); // Waits for 'load' state by default.

**Arguments**

*   `state` "load" | "domcontentloaded" | "networkidle" _(optional)_[#](#frame-wait-for-load-state-option-state)
    
    Optional load state to wait for, defaults to `load`. If the state has been already reached while loading current document, the method resolves immediately. Can be one of:
    
    *   `'load'` - wait for the `load` event to be fired.
    *   `'domcontentloaded'` - wait for the `DOMContentLoaded` event to be fired.
    *   `'networkidle'` - **DISCOURAGED** wait until there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-wait-for-load-state-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-wait-for-load-state-return)

* * *

### waitForURL[â€‹](#frame-wait-for-url "Direct link to waitForURL")

Added in: v1.11 frame.waitForURL

Waits for the frame to navigate to the given URL.

**Usage**

    await frame.click('a.delayed-navigation'); // Clicking the link will indirectly cause a navigationawait frame.waitForURL('**/target.html');

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#frame-wait-for-url-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://nodejs.org/api/url.html "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-wait-for-url-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-wait-for-url-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-wait-for-url-return)

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### $[â€‹](#frame-query-selector "Direct link to $")

Added in: v1.9 frame.$

Discouraged

Use locator-based [frame.locator()](/docs/api/class-frame#frame-locator) instead. Read more about [locators](/docs/locators).

Returns the ElementHandle pointing to the frame element.

caution

The use of [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/docs/api/class-locator "Locator") objects and web-first assertions instead.

The method finds an element matching the specified selector within the frame. If no elements match the selector, returns `null`.

**Usage**

    await frame.$(selector);await frame.$(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-query-selector-option-selector)
    
    A selector to query for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-query-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#frame-query-selector-return)

* * *

### $$[â€‹](#frame-query-selector-all "Direct link to $$")

Added in: v1.9 frame.$$

Discouraged

Use locator-based [frame.locator()](/docs/api/class-frame#frame-locator) instead. Read more about [locators](/docs/locators).

Returns the ElementHandles pointing to the frame elements.

caution

The use of [ElementHandle](/docs/api/class-elementhandle "ElementHandle") is discouraged, use [Locator](/docs/api/class-locator "Locator") objects instead.

The method finds all elements matching the specified selector within the frame. If no elements match the selector, returns empty array.

**Usage**

    await frame.$$(selector);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-query-selector-all-option-selector)
    
    A selector to query for.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>>[#](#frame-query-selector-all-return)

* * *

### $eval[â€‹](#frame-eval-on-selector "Direct link to $eval")

Added in: v1.9 frame.$eval

Discouraged

This method does not wait for the element to pass the actionability checks and therefore can lead to the flaky tests. Use [locator.evaluate()](/docs/api/class-locator#locator-evaluate), other [Locator](/docs/api/class-locator "Locator") helper methods or web-first assertions instead.

Returns the return value of [pageFunction](/docs/api/class-frame#frame-eval-on-selector-option-expression).

The method finds an element matching the specified selector within the frame and passes it as a first argument to [pageFunction](/docs/api/class-frame#frame-eval-on-selector-option-expression). If no elements match the selector, the method throws an error.

If [pageFunction](/docs/api/class-frame#frame-eval-on-selector-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.$eval()](/docs/api/class-frame#frame-eval-on-selector) would wait for the promise to resolve and return its value.

**Usage**

    const searchValue = await frame.$eval('#search', el => el.value);const preloadHref = await frame.$eval('link[rel=preload]', el => el.href);const html = await frame.$eval('.main-container', (e, suffix) => e.outerHTML + suffix, 'hello');

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-eval-on-selector-option-selector)
    
    A selector to query for.
    
*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Element](https://developer.mozilla.org/en-US/docs/Web/API/element "Element")) | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-eval-on-selector-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-eval-on-selector-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-frame#frame-eval-on-selector-option-expression).
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-eval-on-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#frame-eval-on-selector-return)

* * *

### $$eval[â€‹](#frame-eval-on-selector-all "Direct link to $$eval")

Added in: v1.9 frame.$$eval

Discouraged

In most cases, [locator.evaluateAll()](/docs/api/class-locator#locator-evaluate-all), other [Locator](/docs/api/class-locator "Locator") helper methods and web-first assertions do a better job.

Returns the return value of [pageFunction](/docs/api/class-frame#frame-eval-on-selector-all-option-expression).

The method finds all elements matching the specified selector within the frame and passes an array of matched elements as a first argument to [pageFunction](/docs/api/class-frame#frame-eval-on-selector-all-option-expression).

If [pageFunction](/docs/api/class-frame#frame-eval-on-selector-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [frame.$$eval()](/docs/api/class-frame#frame-eval-on-selector-all) would wait for the promise to resolve and return its value.

**Usage**

    const divsCounts = await frame.$$eval('div', (divs, min) => divs.length >= min, 10);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-eval-on-selector-all-option-selector)
    
    A selector to query for.
    
*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Element](https://developer.mozilla.org/en-US/docs/Web/API/element "Element")\>) | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-eval-on-selector-all-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-eval-on-selector-all-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-frame#frame-eval-on-selector-all-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#frame-eval-on-selector-all-return)

* * *

### check[â€‹](#frame-check "Direct link to check")

Added before v1.9 frame.check

Discouraged

Use locator-based [locator.check()](/docs/api/class-locator#locator-check) instead. Read more about [locators](/docs/locators).

This method checks an element matching [selector](/docs/api/class-frame#frame-check-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-check-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
3.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-check-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-check-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await frame.check(selector);await frame.check(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-check-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-check-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-check-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.11[#](#frame-check-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-check-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-check-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#frame-check-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-check-return)

* * *

### click[â€‹](#frame-click "Direct link to click")

Added before v1.9 frame.click

Discouraged

Use locator-based [locator.click()](/docs/api/class-locator#locator-click) instead. Read more about [locators](/docs/locators).

This method clicks an element matching [selector](/docs/api/class-frame#frame-click-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-click-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-click-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/docs/api/class-frame#frame-click-option-position).
5.  Wait for initiated navigations to either succeed or fail, unless [noWaitAfter](/docs/api/class-frame#frame-click-option-no-wait-after) option is set.

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-click-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await frame.click(selector);await frame.click(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-click-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `button` "left" | "right" | "middle" _(optional)_[#](#frame-click-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-click-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-click-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-click-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#frame-click-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-click-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#frame-click-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-click-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-click-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#frame-click-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-click-return)

* * *

### dblclick[â€‹](#frame-dblclick "Direct link to dblclick")

Added before v1.9 frame.dblclick

Discouraged

Use locator-based [locator.dblclick()](/docs/api/class-locator#locator-dblclick) instead. Read more about [locators](/docs/locators).

This method double clicks an element matching [selector](/docs/api/class-frame#frame-dblclick-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-dblclick-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-dblclick-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/docs/api/class-frame#frame-dblclick-option-position). if the first click of the `dblclick()` triggers a navigation event, this method will throw.

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-dblclick-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`frame.dblclick()` dispatches two `click` events and a single `dblclick` event.

**Usage**

    await frame.dblclick(selector);await frame.dblclick(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-dblclick-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `button` "left" | "right" | "middle" _(optional)_[#](#frame-dblclick-option-button)
        
        Defaults to `left`.
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-dblclick-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-dblclick-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#frame-dblclick-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-dblclick-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#frame-dblclick-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-dblclick-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-dblclick-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#frame-dblclick-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-dblclick-return)

* * *

### dispatchEvent[â€‹](#frame-dispatch-event "Direct link to dispatchEvent")

Added before v1.9 frame.dispatchEvent

Discouraged

Use locator-based [locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event) instead. Read more about [locators](/docs/locators).

The snippet below dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

**Usage**

    await frame.dispatchEvent('button#submit', 'click');

Under the hood, it creates an instance of an event based on the given [type](/docs/api/class-frame#frame-dispatch-event-option-type), initializes it with [eventInit](/docs/api/class-frame#frame-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [eventInit](/docs/api/class-frame#frame-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify `JSHandle` as the property value if you want live objects to be passed into the event:

    // Note you can only create DataTransfer in Chromium and Firefoxconst dataTransfer = await frame.evaluateHandle(() => new DataTransfer());await frame.dispatchEvent('#source', 'dragstart', { dataTransfer });

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-dispatch-event-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `eventInit` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#frame-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-dispatch-event-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-dispatch-event-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-dispatch-event-return)

* * *

### fill[â€‹](#frame-fill "Direct link to fill")

Added before v1.9 frame.fill

Discouraged

Use locator-based [locator.fill()](/docs/api/class-locator#locator-fill) instead. Read more about [locators](/docs/locators).

This method waits for an element matching [selector](/docs/api/class-frame#frame-fill-option-selector), waits for [actionability](/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

**Usage**

    await frame.fill(selector, value);await frame.fill(selector, value, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-fill-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-fill-option-value)
    
    Value to fill for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#frame-fill-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-fill-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-fill-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-fill-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-fill-return)

* * *

### focus[â€‹](#frame-focus "Direct link to focus")

Added before v1.9 frame.focus

Discouraged

Use locator-based [locator.focus()](/docs/api/class-locator#locator-focus) instead. Read more about [locators](/docs/locators).

This method fetches an element with [selector](/docs/api/class-frame#frame-focus-option-selector) and focuses it. If there's no element matching [selector](/docs/api/class-frame#frame-focus-option-selector), the method waits until a matching element appears in the DOM.

**Usage**

    await frame.focus(selector);await frame.focus(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-focus-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-focus-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-focus-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-focus-return)

* * *

### getAttribute[â€‹](#frame-get-attribute "Direct link to getAttribute")

Added before v1.9 frame.getAttribute

Discouraged

Use locator-based [locator.getAttribute()](/docs/api/class-locator#locator-get-attribute) instead. Read more about [locators](/docs/locators).

Returns element attribute value.

**Usage**

    await frame.getAttribute(selector, name);await frame.getAttribute(selector, name, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-get-attribute-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-get-attribute-option-name)
    
    Attribute name to get the value for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-get-attribute-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-get-attribute-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-get-attribute-return)

* * *

### hover[â€‹](#frame-hover "Direct link to hover")

Added before v1.9 frame.hover

Discouraged

Use locator-based [locator.hover()](/docs/api/class-locator#locator-hover) instead. Read more about [locators](/docs/locators).

This method hovers over an element matching [selector](/docs/api/class-frame#frame-hover-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-hover-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-hover-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/docs/api/class-frame#frame-hover-option-position).

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-hover-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await frame.hover(selector);await frame.hover(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-hover-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-hover-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#frame-hover-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#frame-hover-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#frame-hover-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-hover-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-hover-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#frame-hover-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-hover-return)

* * *

### innerHTML[â€‹](#frame-inner-html "Direct link to innerHTML")

Added before v1.9 frame.innerHTML

Discouraged

Use locator-based [locator.innerHTML()](/docs/api/class-locator#locator-inner-html) instead. Read more about [locators](/docs/locators).

Returns `element.innerHTML`.

**Usage**

    await frame.innerHTML(selector);await frame.innerHTML(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-inner-html-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-inner-html-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-inner-html-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-inner-html-return)

* * *

### innerText[â€‹](#frame-inner-text "Direct link to innerText")

Added before v1.9 frame.innerText

Discouraged

Use locator-based [locator.innerText()](/docs/api/class-locator#locator-inner-text) instead. Read more about [locators](/docs/locators).

Returns `element.innerText`.

**Usage**

    await frame.innerText(selector);await frame.innerText(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-inner-text-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-inner-text-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-inner-text-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-inner-text-return)

* * *

### inputValue[â€‹](#frame-input-value "Direct link to inputValue")

Added in: v1.13 frame.inputValue

Discouraged

Use locator-based [locator.inputValue()](/docs/api/class-locator#locator-input-value) instead. Read more about [locators](/docs/locators).

Returns `input.value` for the selected `<input>` or `<textarea>` or `<select>` element.

Throws for non-input elements. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

**Usage**

    await frame.inputValue(selector);await frame.inputValue(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-input-value-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-input-value-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-input-value-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-input-value-return)

* * *

### isChecked[â€‹](#frame-is-checked "Direct link to isChecked")

Added before v1.9 frame.isChecked

Discouraged

Use locator-based [locator.isChecked()](/docs/api/class-locator#locator-is-checked) instead. Read more about [locators](/docs/locators).

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

**Usage**

    await frame.isChecked(selector);await frame.isChecked(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-is-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-is-checked-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-is-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#frame-is-checked-return)

* * *

### isDisabled[â€‹](#frame-is-disabled "Direct link to isDisabled")

Added before v1.9 frame.isDisabled

Discouraged

Use locator-based [locator.isDisabled()](/docs/api/class-locator#locator-is-disabled) instead. Read more about [locators](/docs/locators).

Returns whether the element is disabled, the opposite of [enabled](/docs/actionability#enabled).

**Usage**

    await frame.isDisabled(selector);await frame.isDisabled(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-is-disabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-is-disabled-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-is-disabled-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#frame-is-disabled-return)

* * *

### isEditable[â€‹](#frame-is-editable "Direct link to isEditable")

Added before v1.9 frame.isEditable

Discouraged

Use locator-based [locator.isEditable()](/docs/api/class-locator#locator-is-editable) instead. Read more about [locators](/docs/locators).

Returns whether the element is [editable](/docs/actionability#editable).

**Usage**

    await frame.isEditable(selector);await frame.isEditable(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-is-editable-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-is-editable-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-is-editable-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#frame-is-editable-return)

* * *

### isHidden[â€‹](#frame-is-hidden "Direct link to isHidden")

Added before v1.9 frame.isHidden

Discouraged

Use locator-based [locator.isHidden()](/docs/api/class-locator#locator-is-hidden) instead. Read more about [locators](/docs/locators).

Returns whether the element is hidden, the opposite of [visible](/docs/actionability#visible). [selector](/docs/api/class-frame#frame-is-hidden-option-selector) that does not match any elements is considered hidden.

**Usage**

    await frame.isHidden(selector);await frame.isHidden(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-is-hidden-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-is-hidden-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-is-hidden-option-timeout)
        
        Deprecated
        
        This option is ignored. [frame.isHidden()](/docs/api/class-frame#frame-is-hidden) does not wait for the element to become hidden and returns immediately.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#frame-is-hidden-return)

* * *

### isVisible[â€‹](#frame-is-visible "Direct link to isVisible")

Added before v1.9 frame.isVisible

Discouraged

Use locator-based [locator.isVisible()](/docs/api/class-locator#locator-is-visible) instead. Read more about [locators](/docs/locators).

Returns whether the element is [visible](/docs/actionability#visible). [selector](/docs/api/class-frame#frame-is-visible-option-selector) that does not match any elements is considered not visible.

**Usage**

    await frame.isVisible(selector);await frame.isVisible(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-is-visible-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-is-visible-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-is-visible-option-timeout)
        
        Deprecated
        
        This option is ignored. [frame.isVisible()](/docs/api/class-frame#frame-is-visible) does not wait for the element to become visible and returns immediately.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#frame-is-visible-return)

* * *

### press[â€‹](#frame-press "Direct link to press")

Added before v1.9 frame.press

Discouraged

Use locator-based [locator.press()](/docs/api/class-locator#locator-press) instead. Read more about [locators](/docs/locators).

[key](/docs/api/class-frame#frame-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/docs/api/class-frame#frame-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/docs/api/class-frame#frame-press-option-key) in the upper case.

If [key](/docs/api/class-frame#frame-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

    await frame.press(selector, key);await frame.press(selector, key, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-press-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-press-option-delay)
        
        Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-press-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-press-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-press-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-press-return)

* * *

### selectOption[â€‹](#frame-select-option "Direct link to selectOption")

Added before v1.9 frame.selectOption

Discouraged

Use locator-based [locator.selectOption()](/docs/api/class-locator#locator-select-option) instead. Read more about [locators](/docs/locators).

This method waits for an element matching [selector](/docs/api/class-frame#frame-select-option-option-selector), waits for [actionability](/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

**Usage**

    // Single selection matching the value or labelframe.selectOption('select#colors', 'blue');// single selection matching both the value and the labelframe.selectOption('select#colors', { label: 'Blue' });// multiple selectionframe.selectOption('select#colors', 'red', 'green', 'blue');

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-select-option-option-selector)
    
    A selector to query for.
    
*   `values` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\> | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#frame-select-option-option-values)
    
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.value`. Optional.
        
    *   `label` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.label`. Optional.
        
    *   `index` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Matches by the index. Optional.
        
    
    Options to select. If the `<select>` has the `multiple` attribute, all matching options are selected, otherwise only the first option matching one of the passed options is selected. String values are matching both values and labels. Option is considered matching if all specified properties match.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#frame-select-option-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-select-option-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-select-option-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-select-option-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#frame-select-option-return)

* * *

### setChecked[â€‹](#frame-set-checked "Direct link to setChecked")

Added in: v1.15 frame.setChecked

Discouraged

Use locator-based [locator.setChecked()](/docs/api/class-locator#locator-set-checked) instead. Read more about [locators](/docs/locators).

This method checks or unchecks an element matching [selector](/docs/api/class-frame#frame-set-checked-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-set-checked-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws.
3.  If the element already has the right checked state, this method returns immediately.
4.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
5.  Scroll the element into view if needed.
6.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
7.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-set-checked-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await frame.setChecked(selector, checked);await frame.setChecked(selector, checked, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-set-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#frame-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-set-checked-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-set-checked-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#frame-set-checked-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-set-checked-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-set-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-set-checked-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-set-checked-return)

* * *

### setInputFiles[â€‹](#frame-set-input-files "Direct link to setInputFiles")

Added before v1.9 frame.setInputFiles

Discouraged

Use locator-based [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) instead. Read more about [locators](/docs/locators).

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files.

This method expects [selector](/docs/api/class-frame#frame-set-input-files-option-selector) to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

**Usage**

    await frame.setInputFiles(selector, files);await frame.setInputFiles(selector, files, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-set-input-files-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `files` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#frame-set-input-files-option-files)
    
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File name
        
    *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File type
        
    *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        File content
        
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-set-input-files-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-set-input-files-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-set-input-files-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-set-input-files-return)

* * *

### tap[â€‹](#frame-tap "Direct link to tap")

Added before v1.9 frame.tap

Discouraged

Use locator-based [locator.tap()](/docs/api/class-locator#locator-tap) instead. Read more about [locators](/docs/locators).

This method taps an element matching [selector](/docs/api/class-frame#frame-tap-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-tap-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-tap-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.touchscreen](/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/docs/api/class-frame#frame-tap-option-position).

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-tap-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`frame.tap()` requires that the `hasTouch` option of the browser context be set to true.

**Usage**

    await frame.tap(selector);await frame.tap(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-tap-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-tap-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#frame-tap-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-tap-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#frame-tap-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-tap-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-tap-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#frame-tap-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-tap-return)

* * *

### textContent[â€‹](#frame-text-content "Direct link to textContent")

Added before v1.9 frame.textContent

Discouraged

Use locator-based [locator.textContent()](/docs/api/class-locator#locator-text-content) instead. Read more about [locators](/docs/locators).

Returns `element.textContent`.

**Usage**

    await frame.textContent(selector);await frame.textContent(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-text-content-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-text-content-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-text-content-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#frame-text-content-return)

* * *

### type[â€‹](#frame-type "Direct link to type")

Added before v1.9 frame.type

Deprecated

In most cases, you should use [locator.fill()](/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text. `frame.type` can be used to send fine-grained keyboard events. To fill values in form fields, use [frame.fill()](/docs/api/class-frame#frame-fill).

To press a special key, like `Control` or `ArrowDown`, use [keyboard.press()](/docs/api/class-keyboard#keyboard-press).

**Usage**

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-type-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-type-option-text)
    
    A text to type into a focused element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-type-option-delay)
        
        Time to wait between key presses in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-type-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-type-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-type-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-type-return)

* * *

### uncheck[â€‹](#frame-uncheck "Direct link to uncheck")

Added before v1.9 frame.uncheck

Discouraged

Use locator-based [locator.uncheck()](/docs/api/class-locator#locator-uncheck) instead. Read more about [locators](/docs/locators).

This method checks an element matching [selector](/docs/api/class-frame#frame-uncheck-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-frame#frame-uncheck-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
3.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-frame#frame-uncheck-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-frame#frame-uncheck-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await frame.uncheck(selector);await frame.uncheck(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-uncheck-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-uncheck-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-uncheck-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.11[#](#frame-uncheck-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-uncheck-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-uncheck-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#frame-uncheck-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-uncheck-return)

* * *

### waitForNavigation[â€‹](#frame-wait-for-navigation "Direct link to waitForNavigation")

Added before v1.9 frame.waitForNavigation

Deprecated

This method is inherently racy, please use [frame.waitForURL()](/docs/api/class-frame#frame-wait-for-url) instead.

Waits for the frame navigation and returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. In case of navigation to a different anchor or navigation due to History API usage, the navigation will resolve with `null`.

**Usage**

This method waits for the frame to navigate to a new URL. It is useful for when you run code which will indirectly cause the frame to navigate. Consider this example:

    // Start waiting for navigation before clicking. Note no await.const navigationPromise = page.waitForNavigation();await page.getByText('Navigate after timeout').click();await navigationPromise;

note

Usage of the [History API](https://developer.mozilla.org/en-US/docs/Web/API/History_API) to change the URL is considered a navigation.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-wait-for-navigation-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-wait-for-navigation-option-url)
        
        A glob pattern, regex pattern or predicate receiving [URL](https://nodejs.org/api/url.html "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#frame-wait-for-navigation-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#frame-wait-for-navigation-return)

* * *

### waitForSelector[â€‹](#frame-wait-for-selector "Direct link to waitForSelector")

Added before v1.9 frame.waitForSelector

Discouraged

Use web assertions that assert visibility or a locator-based [locator.waitFor()](/docs/api/class-locator#locator-wait-for) instead. Read more about [locators](/docs/locators).

Returns when element specified by selector satisfies [state](/docs/api/class-frame#frame-wait-for-selector-option-state) option. Returns `null` if waiting for `hidden` or `detached`.

note

Playwright automatically waits for element to be ready before performing an action. Using [Locator](/docs/api/class-locator "Locator") objects and web-first assertions make the code wait-for-selector-free.

Wait for the [selector](/docs/api/class-frame#frame-wait-for-selector-option-selector) to satisfy [state](/docs/api/class-frame#frame-wait-for-selector-option-state) option (either appear/disappear from dom, or become visible/hidden). If at the moment of calling the method [selector](/docs/api/class-frame#frame-wait-for-selector-option-selector) already satisfies the condition, the method will return immediately. If the selector doesn't satisfy the condition for the [timeout](/docs/api/class-frame#frame-wait-for-selector-option-timeout) milliseconds, the function will throw.

**Usage**

This method works across navigations:

    const { chromium } = require('playwright');  // Or 'firefox' or 'webkit'.(async () => {  const browser = await chromium.launch();  const page = await browser.newPage();  for (const currentURL of ['https://google.com', 'https://bbc.com']) {    await page.goto(currentURL);    const element = await page.mainFrame().waitForSelector('img');    console.log('Loaded image: ' + await element.getAttribute('src'));  }  await browser.close();})();

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-wait-for-selector-option-selector)
    
    A selector to query for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#frame-wait-for-selector-option-state)
        
        Defaults to `'visible'`. Can be either:
        
        *   `'attached'` - wait for element to be present in DOM.
        *   `'detached'` - wait for element to not be present in DOM.
        *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
        *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#frame-wait-for-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-wait-for-selector-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#frame-wait-for-selector-return)

* * *

### waitForTimeout[â€‹](#frame-wait-for-timeout "Direct link to waitForTimeout")

Added before v1.9 frame.waitForTimeout

Discouraged

Never wait for timeout in production. Tests that wait for time are inherently flaky. Use [Locator](/docs/api/class-locator "Locator") actions and web assertions that wait automatically.

Waits for the given [timeout](/docs/api/class-frame#frame-wait-for-timeout-option-timeout) in milliseconds.

Note that `frame.waitForTimeout()` should only be used for debugging. Tests using the timer in production are going to be flaky. Use signals such as network events, selectors becoming visible and others instead.

**Usage**

    await frame.waitForTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#frame-wait-for-timeout-option-timeout)
    
    A timeout to wait for
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#frame-wait-for-timeout-return)

# FrameLocator

FrameLocator
============

FrameLocator represents a view to the `iframe` on the page. It captures the logic sufficient to retrieve the `iframe` and locate elements in that iframe. FrameLocator can be created with either [locator.contentFrame()](/docs/api/class-locator#locator-content-frame), [page.frameLocator()](/docs/api/class-page#page-frame-locator) or [locator.frameLocator()](/docs/api/class-locator#locator-frame-locator) method.

    const locator = page.locator('#my-frame').contentFrame().getByText('Submit');await locator.click();

**Strictness**

Frame locators are strict. This means that all operations on frame locators will throw if more than one element matches a given selector.

    // Throws if there are several frames in DOM:await page.locator('.result-frame').contentFrame().getByRole('button').click();// Works because we explicitly tell locator to pick the first frame:await page.locator('.result-frame').contentFrame().first().getByRole('button').click();

**Converting Locator to FrameLocator**

If you have a [Locator](/docs/api/class-locator "Locator") object pointing to an `iframe` it can be converted to [FrameLocator](/docs/api/class-framelocator "FrameLocator") using [locator.contentFrame()](/docs/api/class-locator#locator-content-frame).

**Converting FrameLocator to Locator**

If you have a [FrameLocator](/docs/api/class-framelocator "FrameLocator") object it can be converted to [Locator](/docs/api/class-locator "Locator") pointing to the same `iframe` using [frameLocator.owner()](/docs/api/class-framelocator#frame-locator-owner).

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### frameLocator[â€‹](#frame-locator-frame-locator "Direct link to frameLocator")

Added in: v1.17 frameLocator.frameLocator

When working with iframes, you can create a frame locator that will enter the iframe and allow selecting elements in that iframe.

**Usage**

    frameLocator.frameLocator(selector);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#frame-locator-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-frame-locator-return)

* * *

### getByAltText[â€‹](#frame-locator-get-by-alt-text "Direct link to getByAltText")

Added in: v1.27 frameLocator.getByAltText

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

    await page.getByAltText('Playwright logo').click();

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-locator-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-alt-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-alt-text-return)

* * *

### getByLabel[â€‹](#frame-locator-get-by-label "Direct link to getByLabel")

Added in: v1.27 frameLocator.getByLabel

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

    await page.getByLabel('Username').fill('john');await page.getByLabel('Password').fill('secret');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-locator-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-label-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-label-return)

* * *

### getByPlaceholder[â€‹](#frame-locator-get-by-placeholder "Direct link to getByPlaceholder")

Added in: v1.27 frameLocator.getByPlaceholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

    await page    .getByPlaceholder('name@example.com')    .fill('playwright@microsoft.com');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-locator-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-placeholder-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-placeholder-return)

* * *

### getByRole[â€‹](#frame-locator-get-by-role "Direct link to getByRole")

Added in: v1.27 frameLocator.getByRole

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

    await expect(page.getByRole('heading', { name: 'Sign up' })).toBeVisible();await page.getByRole('checkbox', { name: 'Subscribe' }).check();await page.getByRole('button', { name: /submit/i }).click();

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#frame-locator-get-by-role-option-role)
    
    Required aria role.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-role-option-checked)
        
        An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
        
        Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
        
    *   `disabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-role-option-disabled)
        
        An attribute that is usually set by `aria-disabled` or `disabled`.
        
        note
        
        Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
        
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#frame-locator-get-by-role-option-exact)
        
        Whether [name](/docs/api/class-framelocator#frame-locator-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/docs/api/class-framelocator#frame-locator-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
        
    *   `expanded` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-role-option-expanded)
        
        An attribute that is usually set by `aria-expanded`.
        
        Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
        
    *   `includeHidden` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-role-option-include-hidden)
        
        Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
        
        Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
        
    *   `level` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#frame-locator-get-by-role-option-level)
        
        A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
        
        Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#frame-locator-get-by-role-option-name)
        
        Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/docs/api/class-framelocator#frame-locator-get-by-role-option-exact) to control this behavior.
        
        Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
        
    *   `pressed` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-role-option-pressed)
        
        An attribute that is usually set by `aria-pressed`.
        
        Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
        
    *   `selected` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-role-option-selected)
        
        An attribute that is usually set by `aria-selected`.
        
        Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### getByTestId[â€‹](#frame-locator-get-by-test-id "Direct link to getByTestId")

Added in: v1.27 frameLocator.getByTestId

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">ItinÃ©raire</button>

You can locate the element by it's test id:

    await page.getByTestId('directions').click();

**Arguments**

*   `testId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-locator-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.setTestIdAttribute()](/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

    // Set custom test id attribute from @playwright/test config:import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    testIdAttribute: 'data-pw'  },});

* * *

### getByText[â€‹](#frame-locator-get-by-text "Direct link to getByText")

Added in: v1.27 frameLocator.getByText

Allows locating elements that contain given text.

See also [locator.filter()](/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

    // Matches <span>page.getByText('world');// Matches first <div>page.getByText('Hello world');// Matches second <div>page.getByText('Hello', { exact: true });// Matches both <div>spage.getByText(/Hello/);// Matches second <div>page.getByText(/^hello$/i);

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-locator-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### getByTitle[â€‹](#frame-locator-get-by-title "Direct link to getByTitle")

Added in: v1.27 frameLocator.getByTitle

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

    await expect(page.getByTitle('Issues count')).toHaveText('25 issues');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#frame-locator-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#frame-locator-get-by-title-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-get-by-title-return)

* * *

### locator[â€‹](#frame-locator-locator "Direct link to locator")

Added in: v1.17 frameLocator.locator

The method finds an element matching the specified selector in the locator's subtree. It also accepts filter options, similar to [locator.filter()](/docs/api/class-locator#locator-filter) method.

[Learn more about locators](/docs/locators).

**Usage**

    frameLocator.locator(selectorOrLocator);frameLocator.locator(selectorOrLocator, options);

**Arguments**

*   `selectorOrLocator` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-locator-option-selector-or-locator)
    
    A selector or locator to use when resolving DOM element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `has` [Locator](/docs/api/class-locator "Locator") _(optional)_[#](#frame-locator-locator-option-has)
        
        Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
        
        Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNot` [Locator](/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#frame-locator-locator-option-has-not)
        
        Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNotText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.33[#](#frame-locator-locator-option-has-not-text)
        
        Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring.
        
    *   `hasText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#frame-locator-locator-option-has-text)
        
        Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-locator-return)

* * *

### owner[â€‹](#frame-locator-owner "Direct link to owner")

Added in: v1.43 frameLocator.owner

Returns a [Locator](/docs/api/class-locator "Locator") object pointing to the same `iframe` as this frame locator.

Useful when you have a [FrameLocator](/docs/api/class-framelocator "FrameLocator") object obtained somewhere, and later on would like to interact with the `iframe` element.

For a reverse operation, use [locator.contentFrame()](/docs/api/class-locator#locator-content-frame).

**Usage**

    const frameLocator = page.locator('iframe[name="embedded"]').contentFrame();// ...const locator = frameLocator.owner();await expect(locator).toBeVisible();

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#frame-locator-owner-return)

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### first[â€‹](#frame-locator-first "Direct link to first")

Added in: v1.17 frameLocator.first

Deprecated

Use [locator.first()](/docs/api/class-locator#locator-first) followed by [locator.contentFrame()](/docs/api/class-locator#locator-content-frame) instead.

Returns locator to the first matching frame.

**Usage**

    frameLocator.first();

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-first-return)

* * *

### last[â€‹](#frame-locator-last "Direct link to last")

Added in: v1.17 frameLocator.last

Deprecated

Use [locator.last()](/docs/api/class-locator#locator-last) followed by [locator.contentFrame()](/docs/api/class-locator#locator-content-frame) instead.

Returns locator to the last matching frame.

**Usage**

    frameLocator.last();

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-last-return)

* * *

### nth[â€‹](#frame-locator-nth "Direct link to nth")

Added in: v1.17 frameLocator.nth

Deprecated

Use [locator.nth()](/docs/api/class-locator#locator-nth) followed by [locator.contentFrame()](/docs/api/class-locator#locator-content-frame) instead.

Returns locator to the n-th matching frame. It's zero based, `nth(0)` selects the first frame.

**Usage**

    frameLocator.nth(index);

**Arguments**

*   `index` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#frame-locator-nth-option-index)

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#frame-locator-nth-return)

# JSHandle

JSHandle
========

JSHandle represents an in-page JavaScript object. JSHandles can be created with the [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) method.

    const windowHandle = await page.evaluateHandle(() => window);// ...

JSHandle prevents the referenced JavaScript object being garbage collected unless the handle is exposed with [jsHandle.dispose()](/docs/api/class-jshandle#js-handle-dispose). JSHandles are auto-disposed when their origin frame gets navigated or the parent context gets destroyed.

JSHandle instances can be used as an argument in [page.$eval()](/docs/api/class-page#page-eval-on-selector), [page.evaluate()](/docs/api/class-page#page-evaluate) and [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) methods.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### asElement[â€‹](#js-handle-as-element "Direct link to asElement")

Added before v1.9 jsHandle.asElement

Returns either `null` or the object handle itself, if the object handle is an instance of [ElementHandle](/docs/api/class-elementhandle "ElementHandle").

**Usage**

    jsHandle.asElement();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")[#](#js-handle-as-element-return)

* * *

### dispose[â€‹](#js-handle-dispose "Direct link to dispose")

Added before v1.9 jsHandle.dispose

The `jsHandle.dispose` method stops referencing the element handle.

**Usage**

    await jsHandle.dispose();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#js-handle-dispose-return)

* * *

### evaluate[â€‹](#js-handle-evaluate "Direct link to evaluate")

Added before v1.9 jsHandle.evaluate

Returns the return value of [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-option-expression).

This method passes this handle as the first argument to [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-option-expression).

If [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then `handle.evaluate` would wait for the promise to resolve and return its value.

**Usage**

    const tweetHandle = await page.$('.tweet .retweets');expect(await tweetHandle.evaluate(node => node.innerText)).toBe('10 retweets');

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#js-handle-evaluate-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#js-handle-evaluate-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#js-handle-evaluate-return)

* * *

### evaluateHandle[â€‹](#js-handle-evaluate-handle "Direct link to evaluateHandle")

Added before v1.9 jsHandle.evaluateHandle

Returns the return value of [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-handle-option-expression) as a [JSHandle](/docs/api/class-jshandle "JSHandle").

This method passes this handle as the first argument to [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-handle-option-expression).

The only difference between `jsHandle.evaluate` and `jsHandle.evaluateHandle` is that `jsHandle.evaluateHandle` returns [JSHandle](/docs/api/class-jshandle "JSHandle").

If the function passed to the `jsHandle.evaluateHandle` returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then `jsHandle.evaluateHandle` would wait for the promise to resolve and return its value.

See [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) for more details.

**Usage**

    await jsHandle.evaluateHandle(pageFunction);await jsHandle.evaluateHandle(pageFunction, arg);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#js-handle-evaluate-handle-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#js-handle-evaluate-handle-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-jshandle#js-handle-evaluate-handle-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#js-handle-evaluate-handle-return)

* * *

### getProperties[â€‹](#js-handle-get-properties "Direct link to getProperties")

Added before v1.9 jsHandle.getProperties

The method returns a map with **own property names** as keys and JSHandle instances for the property values.

**Usage**

    const handle = await page.evaluateHandle(() => ({ window, document }));const properties = await handle.getProperties();const windowHandle = properties.get('window');const documentHandle = properties.get('document');await handle.dispose();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map "Map")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [JSHandle](/docs/api/class-jshandle "JSHandle")\>>[#](#js-handle-get-properties-return)

* * *

### getProperty[â€‹](#js-handle-get-property "Direct link to getProperty")

Added before v1.9 jsHandle.getProperty

Fetches a single property from the referenced object.

**Usage**

    await jsHandle.getProperty(propertyName);

**Arguments**

*   `propertyName` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#js-handle-get-property-option-property-name)
    
    property to get
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#js-handle-get-property-return)

* * *

### jsonValue[â€‹](#js-handle-json-value "Direct link to jsonValue")

Added before v1.9 jsHandle.jsonValue

Returns a JSON representation of the object. If the object has a `toJSON` function, it **will not be called**.

note

The method will return an empty JSON object if the referenced object is not stringifiable. It will throw an error if the object has circular references.

**Usage**

    await jsHandle.jsonValue();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#js-handle-json-value-return)

# Keyboard

Keyboard
========

Keyboard provides an api for managing a virtual keyboard. The high level api is [keyboard.type()](/docs/api/class-keyboard#keyboard-type), which takes raw characters and generates proper `keydown`, `keypress`/`input`, and `keyup` events on your page.

For finer control, you can use [keyboard.down()](/docs/api/class-keyboard#keyboard-down), [keyboard.up()](/docs/api/class-keyboard#keyboard-up), and [keyboard.insertText()](/docs/api/class-keyboard#keyboard-insert-text) to manually fire events as if they were generated from a real keyboard.

An example of holding down `Shift` in order to select and delete some text:

    await page.keyboard.type('Hello World!');await page.keyboard.press('ArrowLeft');await page.keyboard.down('Shift');for (let i = 0; i < ' World'.length; i++)  await page.keyboard.press('ArrowLeft');await page.keyboard.up('Shift');await page.keyboard.press('Backspace');// Result text will end up saying 'Hello!'

An example of pressing uppercase `A`

    await page.keyboard.press('Shift+KeyA');// orawait page.keyboard.press('Shift+A');

An example to trigger select-all with the keyboard

    await page.keyboard.press('ControlOrMeta+A');

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### down[â€‹](#keyboard-down "Direct link to down")

Added before v1.9 keyboard.down

Dispatches a `keydown` event.

[key](/docs/api/class-keyboard#keyboard-down-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/docs/api/class-keyboard#keyboard-down-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/docs/api/class-keyboard#keyboard-down-option-key) in the upper case.

If [key](/docs/api/class-keyboard#keyboard-down-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

If [key](/docs/api/class-keyboard#keyboard-down-option-key) is a modifier key, `Shift`, `Meta`, `Control`, or `Alt`, subsequent key presses will be sent with that modifier active. To release the modifier key, use [keyboard.up()](/docs/api/class-keyboard#keyboard-up).

After the key is pressed once, subsequent calls to [keyboard.down()](/docs/api/class-keyboard#keyboard-down) will have [repeat](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/repeat) set to true. To release the key, use [keyboard.up()](/docs/api/class-keyboard#keyboard-up).

note

Modifier keys DO influence `keyboard.down`. Holding down `Shift` will type the text in upper case.

**Usage**

    await keyboard.down(key);

**Arguments**

*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#keyboard-down-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#keyboard-down-return)

* * *

### insertText[â€‹](#keyboard-insert-text "Direct link to insertText")

Added before v1.9 keyboard.insertText

Dispatches only `input` event, does not emit the `keydown`, `keyup` or `keypress` events.

**Usage**

    page.keyboard.insertText('å—¨');

note

Modifier keys DO NOT effect `keyboard.insertText`. Holding down `Shift` will not type the text in upper case.

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#keyboard-insert-text-option-text)
    
    Sets input to the specified text value.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#keyboard-insert-text-return)

* * *

### press[â€‹](#keyboard-press "Direct link to press")

Added before v1.9 keyboard.press

tip

In most cases, you should use [locator.press()](/docs/api/class-locator#locator-press) instead.

[key](/docs/api/class-keyboard#keyboard-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/docs/api/class-keyboard#keyboard-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/docs/api/class-keyboard#keyboard-press-option-key) in the upper case.

If [key](/docs/api/class-keyboard#keyboard-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

    const page = await browser.newPage();await page.goto('https://keycode.info');await page.keyboard.press('A');await page.screenshot({ path: 'A.png' });await page.keyboard.press('ArrowLeft');await page.screenshot({ path: 'ArrowLeft.png' });await page.keyboard.press('Shift+O');await page.screenshot({ path: 'O.png' });await browser.close();

Shortcut for [keyboard.down()](/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/docs/api/class-keyboard#keyboard-up).

**Arguments**

*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#keyboard-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#keyboard-press-option-delay)
        
        Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#keyboard-press-return)

* * *

### type[â€‹](#keyboard-type "Direct link to type")

Added before v1.9 keyboard.type

caution

In most cases, you should use [locator.fill()](/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [keyboard.press()](/docs/api/class-keyboard#keyboard-press).

**Usage**

    await page.keyboard.type('Hello'); // Types instantlyawait page.keyboard.type('World', { delay: 100 }); // Types slower, like a user

note

Modifier keys DO NOT effect `keyboard.type`. Holding down `Shift` will not type the text in upper case.

note

For characters that are not on a US keyboard, only an `input` event will be sent.

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#keyboard-type-option-text)
    
    A text to type into a focused element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#keyboard-type-option-delay)
        
        Time to wait between key presses in milliseconds. Defaults to 0.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#keyboard-type-return)

* * *

### up[â€‹](#keyboard-up "Direct link to up")

Added before v1.9 keyboard.up

Dispatches a `keyup` event.

**Usage**

    await keyboard.up(key);

**Arguments**

*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#keyboard-up-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#keyboard-up-return)

# Locator

Locator
=======

Locators are the central piece of Playwright's auto-waiting and retry-ability. In a nutshell, locators represent a way to find element(s) on the page at any moment. A locator can be created with the [page.locator()](/docs/api/class-page#page-locator) method.

[Learn more about locators](/docs/locators).

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### all[â€‹](#locator-all "Direct link to all")

Added in: v1.29 locator.all

When the locator points to a list of elements, this returns an array of locators, pointing to their respective elements.

note

[locator.all()](/docs/api/class-locator#locator-all) does not wait for elements to match the locator, and instead immediately returns whatever is present in the page.

When the list of elements changes dynamically, [locator.all()](/docs/api/class-locator#locator-all) will produce unpredictable and flaky results.

When the list of elements is stable, but loaded dynamically, wait for the full list to finish loading before calling [locator.all()](/docs/api/class-locator#locator-all).

**Usage**

    for (const li of await page.getByRole('listitem').all())  await li.click();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\>>[#](#locator-all-return)

* * *

### allInnerTexts[â€‹](#locator-all-inner-texts "Direct link to allInnerTexts")

Added in: v1.14 locator.allInnerTexts

Returns an array of `node.innerText` values for all matching nodes.

Asserting text

If you need to assert text on the page, prefer [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) with [useInnerText](/docs/api/class-locatorassertions#locator-assertions-to-have-text-option-use-inner-text) option to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const texts = await page.getByRole('link').allInnerTexts();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#locator-all-inner-texts-return)

* * *

### allTextContents[â€‹](#locator-all-text-contents "Direct link to allTextContents")

Added in: v1.14 locator.allTextContents

Returns an array of `node.textContent` values for all matching nodes.

Asserting text

If you need to assert text on the page, prefer [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const texts = await page.getByRole('link').allTextContents();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#locator-all-text-contents-return)

* * *

### and[â€‹](#locator-and "Direct link to and")

Added in: v1.34 locator.and

Creates a locator that matches both this locator and the argument locator.

**Usage**

The following example finds a button with a specific title.

    const button = page.getByRole('button').and(page.getByTitle('Subscribe'));

**Arguments**

*   `locator` [Locator](/docs/api/class-locator "Locator")[#](#locator-and-option-locator)
    
    Additional locator to match.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-and-return)

* * *

### ariaSnapshot[â€‹](#locator-aria-snapshot "Direct link to ariaSnapshot")

Added in: v1.49 locator.ariaSnapshot

Captures the aria snapshot of the given element. Read more about [aria snapshots](/docs/aria-snapshots) and [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot) for the corresponding assertion.

**Usage**

    await page.getByRole('link').ariaSnapshot();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-aria-snapshot-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-aria-snapshot-return)

**Details**

This method captures the aria snapshot of the given element. The snapshot is a string that represents the state of the element and its children. The snapshot can be used to assert the state of the element in the test, or to compare it to state in the future.

The ARIA snapshot is represented using [YAML](https://yaml.org/spec/1.2.2/) markup language:

*   The keys of the objects are the roles and optional accessible names of the elements.
*   The values are either text content or an array of child elements.
*   Generic static text can be represented with the `text` key.

Below is the HTML markup and the respective ARIA snapshot:

    <ul aria-label="Links">  <li><a href="/">Home</a></li>  <li><a href="/about">About</a></li><ul>

    - list "Links":  - listitem:    - link "Home"  - listitem:    - link "About"

* * *

### blur[â€‹](#locator-blur "Direct link to blur")

Added in: v1.28 locator.blur

Calls [blur](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/blur) on the element.

**Usage**

    await locator.blur();await locator.blur(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-blur-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-blur-return)

* * *

### boundingBox[â€‹](#locator-bounding-box "Direct link to boundingBox")

Added in: v1.14 locator.boundingBox

This method returns the bounding box of the element matching the locator, or `null` if the element is not visible. The bounding box is calculated relative to the main frame viewport - which is usually the same as the browser window.

**Usage**

    const box = await page.getByRole('button').boundingBox();await page.mouse.click(box.x + box.width / 2, box.y + box.height / 2);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-bounding-box-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#locator-bounding-box-return)
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the x coordinate of the element in pixels.
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the y coordinate of the element in pixels.
        
    *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the width of the element in pixels.
        
    *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        the height of the element in pixels.
        

**Details**

Scrolling affects the returned bounding box, similarly to [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect). That means `x` and/or `y` may be negative.

Elements from child frames return the bounding box relative to the main frame, unlike the [Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).

Assuming the page is static, it is safe to use bounding box coordinates to perform input. For example, the following snippet should click the center of the element.

* * *

### check[â€‹](#locator-check "Direct link to check")

Added in: v1.14 locator.check

Ensure that checkbox or radio element is checked.

**Usage**

    await page.getByRole('checkbox').check();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-check-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-check-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-check-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-check-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-check-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-check-return)

**Details**

Performs the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
2.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-locator#locator-check-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now checked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-check-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### clear[â€‹](#locator-clear "Direct link to clear")

Added in: v1.28 locator.clear

Clear the input field.

**Usage**

    await page.getByRole('textbox').clear();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-clear-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-clear-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-clear-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-clear-return)

**Details**

This method waits for [actionability](/docs/actionability) checks, focuses the element, clears it and triggers an `input` event after clearing.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be cleared instead.

* * *

### click[â€‹](#locator-click "Direct link to click")

Added in: v1.14 locator.click

Click an element.

**Usage**

Click a button:

    await page.getByRole('button').click();

Shift-right-click at a specific position on a canvas:

    await page.locator('canvas').click({  button: 'right',  modifiers: ['Shift'],  position: { x: 23, y: 32 },});

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `button` "left" | "right" | "middle" _(optional)_[#](#locator-click-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-click-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-click-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-click-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#locator-click-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-click-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-click-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#locator-click-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between Playwright's current cursor position and the provided destination. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-click-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-click-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-click-return)

**Details**

This method clicks the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-locator#locator-click-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/docs/api/class-locator#locator-click-option-position).
4.  Wait for initiated navigations to either succeed or fail, unless [noWaitAfter](/docs/api/class-locator#locator-click-option-no-wait-after) option is set.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-click-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### contentFrame[â€‹](#locator-content-frame "Direct link to contentFrame")

Added in: v1.43 locator.contentFrame

Returns a [FrameLocator](/docs/api/class-framelocator "FrameLocator") object pointing to the same `iframe` as this locator.

Useful when you have a [Locator](/docs/api/class-locator "Locator") object obtained somewhere, and later on would like to interact with the content inside the frame.

For a reverse operation, use [frameLocator.owner()](/docs/api/class-framelocator#frame-locator-owner).

**Usage**

    const locator = page.locator('iframe[name="embedded"]');// ...const frameLocator = locator.contentFrame();await frameLocator.getByRole('button').click();

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#locator-content-frame-return)

* * *

### count[â€‹](#locator-count "Direct link to count")

Added in: v1.14 locator.count

Returns the number of elements matching the locator.

Asserting count

If you need to assert the number of elements on the page, prefer [expect(locator).toHaveCount()](/docs/api/class-locatorassertions#locator-assertions-to-have-count) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const count = await page.getByRole('listitem').count();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")\>[#](#locator-count-return)

* * *

### dblclick[â€‹](#locator-dblclick "Direct link to dblclick")

Added in: v1.14 locator.dblclick

Double-click an element.

**Usage**

    await locator.dblclick();await locator.dblclick(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `button` "left" | "right" | "middle" _(optional)_[#](#locator-dblclick-option-button)
        
        Defaults to `left`.
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-dblclick-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-dblclick-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#locator-dblclick-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-dblclick-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-dblclick-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#locator-dblclick-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between Playwright's current cursor position and the provided destination. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-dblclick-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-dblclick-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-dblclick-return)

**Details**

This method double clicks the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-locator#locator-dblclick-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/docs/api/class-locator#locator-dblclick-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-dblclick-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`element.dblclick()` dispatches two `click` events and a single `dblclick` event.

* * *

### describe[â€‹](#locator-describe "Direct link to describe")

Added in: v1.53 locator.describe

Describes the locator, description is used in the trace viewer and reports. Returns the locator pointing to the same element.

**Usage**

    const button = page.getByTestId('btn-sub').describe('Subscribe button');await button.click();

**Arguments**

*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-describe-option-description)
    
    Locator description.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-describe-return)

* * *

### description[â€‹](#locator-description "Direct link to description")

Added in: v1.57 locator.description

Returns locator description previously set with [locator.describe()](/docs/api/class-locator#locator-describe). Returns `null` if no custom description has been set. Prefer `Locator.toString()` for a human-readable representation, as it uses the description when available.

**Usage**

    const button = page.getByRole('button').describe('Subscribe button');console.log(button.description()); // "Subscribe button"const input = page.getByRole('textbox');console.log(input.description()); // null

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-description-return)

* * *

### dispatchEvent[â€‹](#locator-dispatch-event "Direct link to dispatchEvent")

Added in: v1.14 locator.dispatchEvent

Programmatically dispatch an event on the matching element.

**Usage**

    await locator.dispatchEvent('click');

**Arguments**

*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `eventInit` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-dispatch-event-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-dispatch-event-return)

**Details**

The snippet above dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

Under the hood, it creates an instance of an event based on the given [type](/docs/api/class-locator#locator-dispatch-event-option-type), initializes it with [eventInit](/docs/api/class-locator#locator-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [eventInit](/docs/api/class-locator#locator-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify [JSHandle](/docs/api/class-jshandle "JSHandle") as the property value if you want live objects to be passed into the event:

    const dataTransfer = await page.evaluateHandle(() => new DataTransfer());await locator.dispatchEvent('dragstart', { dataTransfer });

* * *

### dragTo[â€‹](#locator-drag-to "Direct link to dragTo")

Added in: v1.18 locator.dragTo

Drag the source element towards the target element and drop it.

**Usage**

    const source = page.locator('#source');const target = page.locator('#target');await source.dragTo(target);// or specify exact positions relative to the top-left corners of the elements:await source.dragTo(target, {  sourcePosition: { x: 34, y: 7 },  targetPosition: { x: 10, y: 20 },});

**Arguments**

*   `target` [Locator](/docs/api/class-locator "Locator")[#](#locator-drag-to-option-target)
    
    Locator of the element to drag to.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-drag-to-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-drag-to-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `sourcePosition` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-drag-to-option-source-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#locator-drag-to-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between the `mousedown` and `mouseup` of the drag. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `targetPosition` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-drag-to-option-target-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-drag-to-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-drag-to-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-drag-to-return)

**Details**

This method drags the locator to another target locator or target position. It will first move to the source element, perform a `mousedown`, then move to the target element or position and perform a `mouseup`.

* * *

### evaluate[â€‹](#locator-evaluate "Direct link to evaluate")

Added in: v1.14 locator.evaluate

Execute JavaScript code in the page, taking the matching element as an argument.

**Usage**

Passing argument to [pageFunction](/docs/api/class-locator#locator-evaluate-option-expression):

    const result = await page.getByTestId('myId').evaluate((element, [x, y]) => {  return element.textContent + ' ' + x * y;}, [7, 8]);console.log(result); // prints "myId text 56"

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-evaluate-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-evaluate-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-locator#locator-evaluate-option-expression).
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-evaluate-option-timeout)
        
        Maximum time in milliseconds to wait for the locator before evaluating. Note that after locator is resolved, evaluation itself is not limited by the timeout. Defaults to `0` - no timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#locator-evaluate-return)

**Details**

Returns the return value of [pageFunction](/docs/api/class-locator#locator-evaluate-option-expression), called with the matching element as a first argument, and [arg](/docs/api/class-locator#locator-evaluate-option-arg) as a second argument.

If [pageFunction](/docs/api/class-locator#locator-evaluate-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), this method will wait for the promise to resolve and return its value.

If [pageFunction](/docs/api/class-locator#locator-evaluate-option-expression) throws or rejects, this method throws.

* * *

### evaluateAll[â€‹](#locator-evaluate-all "Direct link to evaluateAll")

Added in: v1.14 locator.evaluateAll

Execute JavaScript code in the page, taking all matching elements as an argument.

**Usage**

    const locator = page.locator('div');const moreThanTen = await locator.evaluateAll((divs, min) => divs.length > min, 10);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-evaluate-all-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-evaluate-all-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-locator#locator-evaluate-all-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#locator-evaluate-all-return)

**Details**

Returns the return value of [pageFunction](/docs/api/class-locator#locator-evaluate-all-option-expression), called with an array of all matching elements as a first argument, and [arg](/docs/api/class-locator#locator-evaluate-all-option-arg) as a second argument.

If [pageFunction](/docs/api/class-locator#locator-evaluate-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), this method will wait for the promise to resolve and return its value.

If [pageFunction](/docs/api/class-locator#locator-evaluate-all-option-expression) throws or rejects, this method throws.

* * *

### evaluateHandle[â€‹](#locator-evaluate-handle "Direct link to evaluateHandle")

Added in: v1.14 locator.evaluateHandle

Execute JavaScript code in the page, taking the matching element as an argument, and return a [JSHandle](/docs/api/class-jshandle "JSHandle") with the result.

**Usage**

    await locator.evaluateHandle(pageFunction);await locator.evaluateHandle(pageFunction, arg, options);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-evaluate-handle-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#locator-evaluate-handle-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-locator#locator-evaluate-handle-option-expression).
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-evaluate-handle-option-timeout)
        
        Maximum time in milliseconds to wait for the locator before evaluating. Note that after locator is resolved, evaluation itself is not limited by the timeout. Defaults to `0` - no timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#locator-evaluate-handle-return)

**Details**

Returns the return value of [pageFunction](/docs/api/class-locator#locator-evaluate-handle-option-expression) as a[JSHandle](/docs/api/class-jshandle "JSHandle"), called with the matching element as a first argument, and [arg](/docs/api/class-locator#locator-evaluate-handle-option-arg) as a second argument.

The only difference between [locator.evaluate()](/docs/api/class-locator#locator-evaluate) and [locator.evaluateHandle()](/docs/api/class-locator#locator-evaluate-handle) is that [locator.evaluateHandle()](/docs/api/class-locator#locator-evaluate-handle) returns [JSHandle](/docs/api/class-jshandle "JSHandle").

If [pageFunction](/docs/api/class-locator#locator-evaluate-handle-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), this method will wait for the promise to resolve and return its value.

If [pageFunction](/docs/api/class-locator#locator-evaluate-handle-option-expression) throws or rejects, this method throws.

See [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) for more details.

* * *

### fill[â€‹](#locator-fill "Direct link to fill")

Added in: v1.14 locator.fill

Set a value to the input field.

**Usage**

    await page.getByRole('textbox').fill('example value');

**Arguments**

*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-fill-option-value)
    
    Value to set for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-fill-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-fill-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-fill-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-fill-return)

**Details**

This method waits for [actionability](/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

* * *

### filter[â€‹](#locator-filter "Direct link to filter")

Added in: v1.22 locator.filter

This method narrows existing locator according to the options, for example filters by text. It can be chained to filter multiple times.

**Usage**

    const rowLocator = page.locator('tr');// ...await rowLocator    .filter({ hasText: 'text in column 1' })    .filter({ has: page.getByRole('button', { name: 'column 2 button' }) })    .screenshot();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `has` [Locator](/docs/api/class-locator "Locator") _(optional)_[#](#locator-filter-option-has)
        
        Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
        
        Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNot` [Locator](/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#locator-filter-option-has-not)
        
        Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNotText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.33[#](#locator-filter-option-has-not-text)
        
        Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring.
        
    *   `hasText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#locator-filter-option-has-text)
        
        Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
        
    *   `visible` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.51[#](#locator-filter-option-visible)
        
        Only matches visible or invisible elements.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-filter-return)

* * *

### first[â€‹](#locator-first "Direct link to first")

Added in: v1.14 locator.first

Returns locator to the first matching element.

**Usage**

    locator.first();

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-first-return)

* * *

### focus[â€‹](#locator-focus "Direct link to focus")

Added in: v1.14 locator.focus

Calls [focus](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus) on the matching element.

**Usage**

    await locator.focus();await locator.focus(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-focus-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-focus-return)

* * *

### frameLocator[â€‹](#locator-frame-locator "Direct link to frameLocator")

Added in: v1.17 locator.frameLocator

When working with iframes, you can create a frame locator that will enter the iframe and allow locating elements in that iframe:

**Usage**

    const locator = page.frameLocator('iframe').getByText('Submit');await locator.click();

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#locator-frame-locator-return)

* * *

### getAttribute[â€‹](#locator-get-attribute "Direct link to getAttribute")

Added in: v1.14 locator.getAttribute

Returns the matching element's attribute value.

Asserting attributes

If you need to assert an element's attribute, prefer [expect(locator).toHaveAttribute()](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    await locator.getAttribute(name);await locator.getAttribute(name, options);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-get-attribute-option-name)
    
    Attribute name to get the value for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-get-attribute-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-get-attribute-return)

* * *

### getByAltText[â€‹](#locator-get-by-alt-text "Direct link to getByAltText")

Added in: v1.27 locator.getByAltText

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

    await page.getByAltText('Playwright logo').click();

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-alt-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-alt-text-return)

* * *

### getByLabel[â€‹](#locator-get-by-label "Direct link to getByLabel")

Added in: v1.27 locator.getByLabel

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

    await page.getByLabel('Username').fill('john');await page.getByLabel('Password').fill('secret');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-label-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-label-return)

* * *

### getByPlaceholder[â€‹](#locator-get-by-placeholder "Direct link to getByPlaceholder")

Added in: v1.27 locator.getByPlaceholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

    await page    .getByPlaceholder('name@example.com')    .fill('playwright@microsoft.com');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-placeholder-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-placeholder-return)

* * *

### getByRole[â€‹](#locator-get-by-role "Direct link to getByRole")

Added in: v1.27 locator.getByRole

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

    await expect(page.getByRole('heading', { name: 'Sign up' })).toBeVisible();await page.getByRole('checkbox', { name: 'Subscribe' }).check();await page.getByRole('button', { name: /submit/i }).click();

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#locator-get-by-role-option-role)
    
    Required aria role.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-role-option-checked)
        
        An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
        
        Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
        
    *   `disabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-role-option-disabled)
        
        An attribute that is usually set by `aria-disabled` or `disabled`.
        
        note
        
        Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
        
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#locator-get-by-role-option-exact)
        
        Whether [name](/docs/api/class-locator#locator-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/docs/api/class-locator#locator-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
        
    *   `expanded` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-role-option-expanded)
        
        An attribute that is usually set by `aria-expanded`.
        
        Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
        
    *   `includeHidden` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-role-option-include-hidden)
        
        Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
        
        Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
        
    *   `level` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-get-by-role-option-level)
        
        A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
        
        Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#locator-get-by-role-option-name)
        
        Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/docs/api/class-locator#locator-get-by-role-option-exact) to control this behavior.
        
        Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
        
    *   `pressed` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-role-option-pressed)
        
        An attribute that is usually set by `aria-pressed`.
        
        Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
        
    *   `selected` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-role-option-selected)
        
        An attribute that is usually set by `aria-selected`.
        
        Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### getByTestId[â€‹](#locator-get-by-test-id "Direct link to getByTestId")

Added in: v1.27 locator.getByTestId

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">ItinÃ©raire</button>

You can locate the element by it's test id:

    await page.getByTestId('directions').click();

**Arguments**

*   `testId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.setTestIdAttribute()](/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

    // Set custom test id attribute from @playwright/test config:import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    testIdAttribute: 'data-pw'  },});

* * *

### getByText[â€‹](#locator-get-by-text "Direct link to getByText")

Added in: v1.27 locator.getByText

Allows locating elements that contain given text.

See also [locator.filter()](/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

    // Matches <span>page.getByText('world');// Matches first <div>page.getByText('Hello world');// Matches second <div>page.getByText('Hello', { exact: true });// Matches both <div>spage.getByText(/Hello/);// Matches second <div>page.getByText(/^hello$/i);

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### getByTitle[â€‹](#locator-get-by-title "Direct link to getByTitle")

Added in: v1.27 locator.getByTitle

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

    await expect(page.getByTitle('Issues count')).toHaveText('25 issues');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-get-by-title-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-get-by-title-return)

* * *

### highlight[â€‹](#locator-highlight "Direct link to highlight")

Added in: v1.20 locator.highlight

Highlight the corresponding element(s) on the screen. Useful for debugging, don't commit the code that uses [locator.highlight()](/docs/api/class-locator#locator-highlight).

**Usage**

    await locator.highlight();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-highlight-return)

* * *

### hover[â€‹](#locator-hover "Direct link to hover")

Added in: v1.14 locator.hover

Hover over the matching element.

**Usage**

    await page.getByRole('link').hover();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-hover-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#locator-hover-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#locator-hover-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-hover-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-hover-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-hover-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-hover-return)

**Details**

This method hovers over the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-locator#locator-hover-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.mouse](/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/docs/api/class-locator#locator-hover-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-hover-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### innerHTML[â€‹](#locator-inner-html "Direct link to innerHTML")

Added in: v1.14 locator.innerHTML

Returns the [`element.innerHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML).

**Usage**

    await locator.innerHTML();await locator.innerHTML(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-inner-html-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-inner-html-return)

* * *

### innerText[â€‹](#locator-inner-text "Direct link to innerText")

Added in: v1.14 locator.innerText

Returns the [`element.innerText`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText).

Asserting text

If you need to assert text on the page, prefer [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) with [useInnerText](/docs/api/class-locatorassertions#locator-assertions-to-have-text-option-use-inner-text) option to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    await locator.innerText();await locator.innerText(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-inner-text-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-inner-text-return)

* * *

### inputValue[â€‹](#locator-input-value "Direct link to inputValue")

Added in: v1.14 locator.inputValue

Returns the value for the matching `<input>` or `<textarea>` or `<select>` element.

Asserting value

If you need to assert input value, prefer [expect(locator).toHaveValue()](/docs/api/class-locatorassertions#locator-assertions-to-have-value) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const value = await page.getByRole('textbox').inputValue();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-input-value-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-input-value-return)

**Details**

Throws elements that are not an input, textarea or a select. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

* * *

### isChecked[â€‹](#locator-is-checked "Direct link to isChecked")

Added in: v1.14 locator.isChecked

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

Asserting checked state

If you need to assert that checkbox is checked, prefer [expect(locator).toBeChecked()](/docs/api/class-locatorassertions#locator-assertions-to-be-checked) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const checked = await page.getByRole('checkbox').isChecked();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-is-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#locator-is-checked-return)

* * *

### isDisabled[â€‹](#locator-is-disabled "Direct link to isDisabled")

Added in: v1.14 locator.isDisabled

Returns whether the element is disabled, the opposite of [enabled](/docs/actionability#enabled).

Asserting disabled state

If you need to assert that an element is disabled, prefer [expect(locator).toBeDisabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-disabled) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const disabled = await page.getByRole('button').isDisabled();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-is-disabled-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#locator-is-disabled-return)

* * *

### isEditable[â€‹](#locator-is-editable "Direct link to isEditable")

Added in: v1.14 locator.isEditable

Returns whether the element is [editable](/docs/actionability#editable). If the target element is not an `<input>`, `<textarea>`, `<select>`, `[contenteditable]` and does not have a role allowing `[aria-readonly]`, this method throws an error.

Asserting editable state

If you need to assert that an element is editable, prefer [expect(locator).toBeEditable()](/docs/api/class-locatorassertions#locator-assertions-to-be-editable) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const editable = await page.getByRole('textbox').isEditable();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-is-editable-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#locator-is-editable-return)

* * *

### isEnabled[â€‹](#locator-is-enabled "Direct link to isEnabled")

Added in: v1.14 locator.isEnabled

Returns whether the element is [enabled](/docs/actionability#enabled).

Asserting enabled state

If you need to assert that an element is enabled, prefer [expect(locator).toBeEnabled()](/docs/api/class-locatorassertions#locator-assertions-to-be-enabled) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const enabled = await page.getByRole('button').isEnabled();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-is-enabled-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#locator-is-enabled-return)

* * *

### isHidden[â€‹](#locator-is-hidden "Direct link to isHidden")

Added in: v1.14 locator.isHidden

Returns whether the element is hidden, the opposite of [visible](/docs/actionability#visible).

Asserting visibility

If you need to assert that element is hidden, prefer [expect(locator).toBeHidden()](/docs/api/class-locatorassertions#locator-assertions-to-be-hidden) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const hidden = await page.getByRole('button').isHidden();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-is-hidden-option-timeout)
        
        Deprecated
        
        This option is ignored. [locator.isHidden()](/docs/api/class-locator#locator-is-hidden) does not wait for the element to become hidden and returns immediately.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#locator-is-hidden-return)

* * *

### isVisible[â€‹](#locator-is-visible "Direct link to isVisible")

Added in: v1.14 locator.isVisible

Returns whether the element is [visible](/docs/actionability#visible).

Asserting visibility

If you need to assert that element is visible, prefer [expect(locator).toBeVisible()](/docs/api/class-locatorassertions#locator-assertions-to-be-visible) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    const visible = await page.getByRole('button').isVisible();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-is-visible-option-timeout)
        
        Deprecated
        
        This option is ignored. [locator.isVisible()](/docs/api/class-locator#locator-is-visible) does not wait for the element to become visible and returns immediately.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#locator-is-visible-return)

* * *

### last[â€‹](#locator-last "Direct link to last")

Added in: v1.14 locator.last

Returns locator to the last matching element.

**Usage**

    const banana = await page.getByRole('listitem').last();

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-last-return)

* * *

### locator[â€‹](#locator-locator "Direct link to locator")

Added in: v1.14 locator.locator

The method finds an element matching the specified selector in the locator's subtree. It also accepts filter options, similar to [locator.filter()](/docs/api/class-locator#locator-filter) method.

[Learn more about locators](/docs/locators).

**Usage**

    locator.locator(selectorOrLocator);locator.locator(selectorOrLocator, options);

**Arguments**

*   `selectorOrLocator` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Locator](/docs/api/class-locator "Locator")[#](#locator-locator-option-selector-or-locator)
    
    A selector or locator to use when resolving DOM element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `has` [Locator](/docs/api/class-locator "Locator") _(optional)_[#](#locator-locator-option-has)
        
        Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
        
        Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNot` [Locator](/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#locator-locator-option-has-not)
        
        Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNotText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.33[#](#locator-locator-option-has-not-text)
        
        Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring.
        
    *   `hasText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#locator-locator-option-has-text)
        
        Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-locator-return)

* * *

### nth[â€‹](#locator-nth "Direct link to nth")

Added in: v1.14 locator.nth

Returns locator to the n-th matching element. It's zero based, `nth(0)` selects the first element.

**Usage**

    const banana = await page.getByRole('listitem').nth(2);

**Arguments**

*   `index` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#locator-nth-option-index)

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-nth-return)

* * *

### or[â€‹](#locator-or "Direct link to or")

Added in: v1.33 locator.or

Creates a locator matching all elements that match one or both of the two locators.

Note that when both locators match something, the resulting locator will have multiple matches, potentially causing a [locator strictness](/docs/locators#strictness) violation.

**Usage**

Consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly.

note

If both "New email" button and security dialog appear on screen, the "or" locator will match both of them, possibly throwing the ["strict mode violation" error](/docs/locators#strictness). In this case, you can use [locator.first()](/docs/api/class-locator#locator-first) to only match one of them.

    const newEmail = page.getByRole('button', { name: 'New' });const dialog = page.getByText('Confirm security settings');await expect(newEmail.or(dialog).first()).toBeVisible();if (await dialog.isVisible())  await page.getByRole('button', { name: 'Dismiss' }).click();await newEmail.click();

**Arguments**

*   `locator` [Locator](/docs/api/class-locator "Locator")[#](#locator-or-option-locator)
    
    Alternative locator to match.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#locator-or-return)

* * *

### page[â€‹](#locator-page "Direct link to page")

Added in: v1.19 locator.page

A page this locator belongs to.

**Usage**

    locator.page();

**Returns**

*   [Page](/docs/api/class-page "Page")[#](#locator-page-return)

* * *

### press[â€‹](#locator-press "Direct link to press")

Added in: v1.14 locator.press

Focuses the matching element and presses a combination of the keys.

**Usage**

    await page.getByRole('textbox').press('Backspace');

**Arguments**

*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-press-option-delay)
        
        Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-press-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-press-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-press-return)

**Details**

Focuses the element, and then uses [keyboard.down()](/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/docs/api/class-keyboard#keyboard-up).

[key](/docs/api/class-locator#locator-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/docs/api/class-locator#locator-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/docs/api/class-locator#locator-press-option-key) in the upper case.

If [key](/docs/api/class-locator#locator-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

* * *

### pressSequentially[â€‹](#locator-press-sequentially "Direct link to pressSequentially")

Added in: v1.38 locator.pressSequentially

tip

In most cases, you should use [locator.fill()](/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page.

Focuses the element, and then sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [locator.press()](/docs/api/class-locator#locator-press).

**Usage**

    await locator.pressSequentially('Hello'); // Types instantlyawait locator.pressSequentially('World', { delay: 100 }); // Types slower, like a user

An example of typing into a text field and then submitting the form:

    const locator = page.getByLabel('Password');await locator.pressSequentially('my password');await locator.press('Enter');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-press-sequentially-option-text)
    
    String of characters to sequentially press into a focused element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-press-sequentially-option-delay)
        
        Time to wait between key presses in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-press-sequentially-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-press-sequentially-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-press-sequentially-return)

* * *

### screenshot[â€‹](#locator-screenshot "Direct link to screenshot")

Added in: v1.14 locator.screenshot

Take a screenshot of the element matching the locator.

**Usage**

    await page.getByRole('link').screenshot();

Disable animations and save screenshot to a file:

    await page.getByRole('link').screenshot({ animations: 'disabled', path: 'link.png' });

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `animations` "disabled" | "allow" _(optional)_[#](#locator-screenshot-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"allow"` that leaves animations untouched.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#locator-screenshot-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#locator-screenshot-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-locator#locator-screenshot-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#locator-screenshot-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-screenshot-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#locator-screenshot-option-path)
        
        The file path to save the image to. The screenshot type will be inferred from file extension. If [path](/docs/api/class-locator#locator-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
        
    *   `quality` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-screenshot-option-quality)
        
        The quality of the image, between 0-100. Not applicable to `png` images.
        
    *   `scale` "css" | "device" _(optional)_[#](#locator-screenshot-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"device"`.
        
    *   `style` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.41[#](#locator-screenshot-option-style)
        
        Text of the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-screenshot-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `type` "png" | "jpeg" _(optional)_[#](#locator-screenshot-option-type)
        
        Specify screenshot type, defaults to `png`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#locator-screenshot-return)

**Details**

This method captures a screenshot of the page, clipped to the size and position of a particular element matching the locator. If the element is covered by other elements, it will not be actually visible on the screenshot. If the element is a scrollable container, only the currently scrolled content will be visible on the screenshot.

This method waits for the [actionability](/docs/actionability) checks, then scrolls element into view before taking a screenshot. If the element is detached from DOM, the method throws an error.

Returns the buffer with the captured screenshot.

* * *

### scrollIntoViewIfNeeded[â€‹](#locator-scroll-into-view-if-needed "Direct link to scrollIntoViewIfNeeded")

Added in: v1.14 locator.scrollIntoViewIfNeeded

This method waits for [actionability](/docs/actionability) checks, then tries to scroll element into view, unless it is completely visible as defined by [IntersectionObserver](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)'s `ratio`.

See [scrolling](/docs/input#scrolling) for alternative ways to scroll.

**Usage**

    await locator.scrollIntoViewIfNeeded();await locator.scrollIntoViewIfNeeded(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-scroll-into-view-if-needed-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-scroll-into-view-if-needed-return)

* * *

### selectOption[â€‹](#locator-select-option "Direct link to selectOption")

Added in: v1.14 locator.selectOption

Selects option or options in `<select>`.

**Usage**

    <select multiple>  <option value="red">Red</option>  <option value="green">Green</option>  <option value="blue">Blue</option></select>

    // single selection matching the value or labelelement.selectOption('blue');// single selection matching the labelelement.selectOption({ label: 'Blue' });// multiple selection for red, green and blue optionselement.selectOption(['red', 'green', 'blue']);

**Arguments**

*   `values` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\> | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#locator-select-option-option-values)
    
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.value`. Optional.
        
    *   `label` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.label`. Optional.
        
    *   `index` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Matches by the index. Optional.
        
    
    Options to select. If the `<select>` has the `multiple` attribute, all matching options are selected, otherwise only the first option matching one of the passed options is selected. String values are matching both values and labels. Option is considered matching if all specified properties match.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-select-option-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-select-option-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-select-option-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#locator-select-option-return)

**Details**

This method waits for [actionability](/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

* * *

### selectText[â€‹](#locator-select-text "Direct link to selectText")

Added in: v1.14 locator.selectText

This method waits for [actionability](/docs/actionability) checks, then focuses the element and selects all its text content.

If the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), focuses and selects text in the control instead.

**Usage**

    await locator.selectText();await locator.selectText(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-select-text-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-select-text-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-select-text-return)

* * *

### setChecked[â€‹](#locator-set-checked "Direct link to setChecked")

Added in: v1.15 locator.setChecked

Set the state of a checkbox or a radio element.

**Usage**

    await page.getByRole('checkbox').setChecked(true);

**Arguments**

*   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#locator-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-set-checked-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-set-checked-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-set-checked-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-set-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-set-checked-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-set-checked-return)

**Details**

This method checks or unchecks an element by performing the following steps:

1.  Ensure that matched element is a checkbox or a radio input. If not, this method throws.
2.  If the element already has the right checked state, this method returns immediately.
3.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-locator#locator-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-set-checked-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### setInputFiles[â€‹](#locator-set-input-files "Direct link to setInputFiles")

Added in: v1.14 locator.setInputFiles

Upload file or multiple files into `<input type=file>`. For inputs with a `[webkitdirectory]` attribute, only a single directory path is supported.

**Usage**

    // Select one fileawait page.getByLabel('Upload file').setInputFiles(path.join(__dirname, 'myfile.pdf'));// Select multiple filesawait page.getByLabel('Upload files').setInputFiles([  path.join(__dirname, 'file1.txt'),  path.join(__dirname, 'file2.txt'),]);// Select a directoryawait page.getByLabel('Upload directory').setInputFiles(path.join(__dirname, 'mydir'));// Remove all the selected filesawait page.getByLabel('Upload file').setInputFiles([]);// Upload buffer from memoryawait page.getByLabel('Upload file').setInputFiles({  name: 'file.txt',  mimeType: 'text/plain',  buffer: Buffer.from('this is test')});

**Arguments**

*   `files` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#locator-set-input-files-option-files)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File name
        
    *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File type
        
    *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        File content
        
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-set-input-files-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-set-input-files-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-set-input-files-return)

**Details**

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files.

This method expects [Locator](/docs/api/class-locator "Locator") to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

* * *

### tap[â€‹](#locator-tap "Direct link to tap")

Added in: v1.14 locator.tap

Perform a tap gesture on the element matching the locator. For examples of emulating other gestures by manually dispatching touch events, see the [emulating legacy touch events](/docs/touch-events) page.

**Usage**

    await locator.tap();await locator.tap(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-tap-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#locator-tap-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-tap-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-tap-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-tap-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-tap-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-tap-return)

**Details**

This method taps the element by performing the following steps:

1.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-locator#locator-tap-option-force) option is set.
2.  Scroll the element into view if needed.
3.  Use [page.touchscreen](/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/docs/api/class-locator#locator-tap-option-position).

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-tap-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`element.tap()` requires that the `hasTouch` option of the browser context be set to true.

* * *

### textContent[â€‹](#locator-text-content "Direct link to textContent")

Added in: v1.14 locator.textContent

Returns the [`node.textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent).

Asserting text

If you need to assert text on the page, prefer [expect(locator).toHaveText()](/docs/api/class-locatorassertions#locator-assertions-to-have-text) to avoid flakiness. See [assertions guide](/docs/test-assertions) for more details.

**Usage**

    await locator.textContent();await locator.textContent(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-text-content-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-text-content-return)

* * *

### uncheck[â€‹](#locator-uncheck "Direct link to uncheck")

Added in: v1.14 locator.uncheck

Ensure that checkbox or radio element is unchecked.

**Usage**

    await page.getByRole('checkbox').uncheck();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-uncheck-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-uncheck-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#locator-uncheck-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-uncheck-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-uncheck-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-uncheck-return)

**Details**

This method unchecks the element by performing the following steps:

1.  Ensure that element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
2.  Wait for [actionability](/docs/actionability) checks on the element, unless [force](/docs/api/class-locator#locator-uncheck-option-force) option is set.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
5.  Ensure that the element is now unchecked. If not, this method throws.

If the element is detached from the DOM at any moment during the action, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-locator#locator-uncheck-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

* * *

### waitFor[â€‹](#locator-wait-for "Direct link to waitFor")

Added in: v1.16 locator.waitFor

Returns when element specified by locator satisfies the [state](/docs/api/class-locator#locator-wait-for-option-state) option.

If target element already satisfies the condition, the method returns immediately. Otherwise, waits for up to [timeout](/docs/api/class-locator#locator-wait-for-option-timeout) milliseconds until the condition is met.

**Usage**

    const orderSent = page.locator('#order-sent');await orderSent.waitFor();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#locator-wait-for-option-state)
        
        Defaults to `'visible'`. Can be either:
        
        *   `'attached'` - wait for element to be present in DOM.
        *   `'detached'` - wait for element to not be present in DOM.
        *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
        *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-wait-for-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-wait-for-return)

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### elementHandle[â€‹](#locator-element-handle "Direct link to elementHandle")

Added in: v1.14 locator.elementHandle

Discouraged

Always prefer using [Locator](/docs/api/class-locator "Locator")s and web assertions over [ElementHandle](/docs/api/class-elementhandle "ElementHandle")s because latter are inherently racy.

Resolves given locator to the first matching DOM element. If there are no matching elements, waits for one. If multiple elements match the locator, throws.

**Usage**

    await locator.elementHandle();await locator.elementHandle(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-element-handle-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#locator-element-handle-return)

* * *

### elementHandles[â€‹](#locator-element-handles "Direct link to elementHandles")

Added in: v1.14 locator.elementHandles

Discouraged

Always prefer using [Locator](/docs/api/class-locator "Locator")s and web assertions over [ElementHandle](/docs/api/class-elementhandle "ElementHandle")s because latter are inherently racy.

Resolves given locator to all matching DOM elements. If there are no matching elements, returns an empty list.

**Usage**

    await locator.elementHandles();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>>[#](#locator-element-handles-return)

* * *

### type[â€‹](#locator-type "Direct link to type")

Added in: v1.14 locator.type

Deprecated

In most cases, you should use [locator.fill()](/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

Focuses the element, and then sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text.

To press a special key, like `Control` or `ArrowDown`, use [locator.press()](/docs/api/class-locator#locator-press).

**Usage**

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-type-option-text)
    
    A text to type into a focused element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-type-option-delay)
        
        Time to wait between key presses in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-type-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-type-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-type-return)

# Logger

Logger
======

Deprecated

This class is deprecated. The logs pumped through this class are incomplete. Please use tracing instead.

Playwright generates a lot of logs and they are accessible via the pluggable logger sink.

    const { chromium } = require('playwright');  // Or 'firefox' or 'webkit'.(async () => {  const browser = await chromium.launch({    logger: {      isEnabled: (name, severity) => name === 'api',      log: (name, severity, message, args) => console.log(`${name} ${message}`)    }  });  // ...})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### isEnabled[â€‹](#logger-is-enabled "Direct link to isEnabled")

Added before v1.9 logger.isEnabled

Determines whether sink is interested in the logger with the given name and severity.

**Usage**

    logger.isEnabled(name, severity);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#logger-is-enabled-option-name)
    
    logger name
    
*   `severity` "verbose" | "info" | "warning" | "error"[#](#logger-is-enabled-option-severity)
    

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#logger-is-enabled-return)

* * *

### log[â€‹](#logger-log "Direct link to log")

Added before v1.9 logger.log

**Usage**

    logger.log(name, severity, message, args, hints);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#logger-log-option-name)
    
    logger name
    
*   `severity` "verbose" | "info" | "warning" | "error"[#](#logger-log-option-severity)
    
*   `message` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Error](https://nodejs.org/api/errors.html#errors_class_error "Error")[#](#logger-log-option-message)
    
    log message format
    
*   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#logger-log-option-args)
    
    message arguments
    
*   `hints` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#logger-log-option-hints)
    
    *   `color` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional preferred logger color.
        
    
    optional formatting hints

# Mouse

Mouse
=====

The Mouse class operates in main-frame CSS pixels relative to the top-left corner of the viewport.

tip

If you want to debug where the mouse moved, you can use the [Trace viewer](/docs/trace-viewer-intro) or [Playwright Inspector](/docs/running-tests). A red dot showing the location of the mouse will be shown for every mouse action.

Every `page` object has its own Mouse, accessible with [page.mouse](/docs/api/class-page#page-mouse).

    // Using â€˜page.mouseâ€™ to trace a 100x100 square.await page.mouse.move(0, 0);await page.mouse.down();await page.mouse.move(0, 100);await page.mouse.move(100, 100);await page.mouse.move(100, 0);await page.mouse.move(0, 0);await page.mouse.up();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### click[â€‹](#mouse-click "Direct link to click")

Added before v1.9 mouse.click

Shortcut for [mouse.move()](/docs/api/class-mouse#mouse-move), [mouse.down()](/docs/api/class-mouse#mouse-down), [mouse.up()](/docs/api/class-mouse#mouse-up).

**Usage**

    await mouse.click(x, y);await mouse.click(x, y, options);

**Arguments**

*   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-click-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-click-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-click-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#mouse-click-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#mouse-click-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#mouse-click-return)

* * *

### dblclick[â€‹](#mouse-dblclick "Direct link to dblclick")

Added before v1.9 mouse.dblclick

Shortcut for [mouse.move()](/docs/api/class-mouse#mouse-move), [mouse.down()](/docs/api/class-mouse#mouse-down), [mouse.up()](/docs/api/class-mouse#mouse-up), [mouse.down()](/docs/api/class-mouse#mouse-down) and [mouse.up()](/docs/api/class-mouse#mouse-up).

**Usage**

    await mouse.dblclick(x, y);await mouse.dblclick(x, y, options);

**Arguments**

*   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-dblclick-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-dblclick-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-dblclick-option-button)
        
        Defaults to `left`.
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#mouse-dblclick-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#mouse-dblclick-return)

* * *

### down[â€‹](#mouse-down "Direct link to down")

Added before v1.9 mouse.down

Dispatches a `mousedown` event.

**Usage**

    await mouse.down();await mouse.down(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-down-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#mouse-down-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#mouse-down-return)

* * *

### move[â€‹](#mouse-move "Direct link to move")

Added before v1.9 mouse.move

Dispatches a `mousemove` event.

**Usage**

    await mouse.move(x, y);await mouse.move(x, y, options);

**Arguments**

*   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-move-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-move-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#mouse-move-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between Playwright's current cursor position and the provided destination. When set to 1, emits a single `mousemove` event at the destination location.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#mouse-move-return)

* * *

### up[â€‹](#mouse-up "Direct link to up")

Added before v1.9 mouse.up

Dispatches a `mouseup` event.

**Usage**

    await mouse.up();await mouse.up(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `button` "left" | "right" | "middle" _(optional)_[#](#mouse-up-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#mouse-up-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#mouse-up-return)

* * *

### wheel[â€‹](#mouse-wheel "Direct link to wheel")

Added in: v1.15 mouse.wheel

Dispatches a `wheel` event. This method is usually used to manually scroll the page. See [scrolling](/docs/input#scrolling) for alternative ways to scroll.

note

Wheel events may cause scrolling if they are not handled, and this method does not wait for the scrolling to finish before returning.

**Usage**

    await mouse.wheel(deltaX, deltaY);

**Arguments**

*   `deltaX` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-wheel-option-delta-x)
    
    Pixels to scroll horizontally.
    
*   `deltaY` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#mouse-wheel-option-delta-y)
    
    Pixels to scroll vertically.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#mouse-wheel-return)

# Page

Page
====

Page provides methods to interact with a single tab in a [Browser](/docs/api/class-browser "Browser"), or an [extension background page](https://developer.chrome.com/extensions/background_pages) in Chromium. One [Browser](/docs/api/class-browser "Browser") instance might have multiple [Page](/docs/api/class-page "Page") instances.

This example creates a page, navigates it to a URL, and then saves a screenshot:

    const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.(async () => {  const browser = await webkit.launch();  const context = await browser.newContext();  const page = await context.newPage();  await page.goto('https://example.com');  await page.screenshot({ path: 'screenshot.png' });  await browser.close();})();

The Page class emits various events (described below) which can be handled using any of Node's native [`EventEmitter`](https://nodejs.org/api/events.html#events_class_eventemitter) methods, such as `on`, `once` or `removeListener`.

This example logs a message for a single page `load` event:

    page.once('load', () => console.log('Page loaded!'));

To unsubscribe from events use the `removeListener` method:

    function logRequest(interceptedRequest) {  console.log('A request was made:', interceptedRequest.url());}page.on('request', logRequest);// Sometime later...page.removeListener('request', logRequest);

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### addInitScript[â€‹](#page-add-init-script "Direct link to addInitScript")

Added before v1.9 page.addInitScript

Adds a script which would be evaluated in one of the following scenarios:

*   Whenever the page is navigated.
*   Whenever the child frame is attached or navigated. In this case, the script is evaluated in the context of the newly attached frame.

The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed `Math.random`.

**Usage**

An example of overriding `Math.random` before the page loads:

    // preload.jsMath.random = () => 42;

    // In your playwright script, assuming the preload.js file is in same directoryawait page.addInitScript({ path: './preload.js' });

    await page.addInitScript(mock => {  window.mock = mock;}, mock);

note

The order of evaluation of multiple scripts installed via [browserContext.addInitScript()](/docs/api/class-browsercontext#browser-context-add-init-script) and [page.addInitScript()](/docs/api/class-page#page-add-init-script) is not defined.

**Arguments**

*   `script` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#page-add-init-script-option-script)
    
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Path to the JavaScript file. If `path` is a relative path, then it is resolved relative to the current working directory. Optional.
        
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Raw script content. Optional.
        
    
    Script to be evaluated in the page.
    
*   `arg` [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#page-add-init-script-option-arg)
    
    Optional argument to pass to [script](/docs/api/class-page#page-add-init-script-option-script) (only supported when passing a function).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-add-init-script-return)

* * *

### addLocatorHandler[â€‹](#page-add-locator-handler "Direct link to addLocatorHandler")

Added in: v1.42 page.addLocatorHandler

When testing a web page, sometimes unexpected overlays like a "Sign up" dialog appear and block actions you want to automate, e.g. clicking a button. These overlays don't always show up in the same way or at the same time, making them tricky to handle in automated tests.

This method lets you set up a special function, called a handler, that activates when it detects that overlay is visible. The handler's job is to remove the overlay, allowing your test to continue as if the overlay wasn't there.

Things to keep in mind:

*   When an overlay is shown predictably, we recommend explicitly waiting for it in your test and dismissing it as a part of your normal test flow, instead of using [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler).
*   Playwright checks for the overlay every time before executing or retrying an action that requires an [actionability check](/docs/actionability), or before performing an auto-waiting assertion check. When overlay is visible, Playwright calls the handler first, and then proceeds with the action/assertion. Note that the handler is only called when you perform an action/assertion - if the overlay becomes visible but you don't perform any actions, the handler will not be triggered.
*   After executing the handler, Playwright will ensure that overlay that triggered the handler is not visible anymore. You can opt-out of this behavior with [noWaitAfter](/docs/api/class-page#page-add-locator-handler-option-no-wait-after).
*   The execution time of the handler counts towards the timeout of the action/assertion that executed the handler. If your handler takes too long, it might cause timeouts.
*   You can register multiple handlers. However, only a single handler will be running at a time. Make sure the actions within a handler don't depend on another handler.

warning

Running the handler will alter your page state mid-test. For example it will change the currently focused element and move the mouse. Make sure that actions that run after the handler are self-contained and do not rely on the focus and mouse state being unchanged.

For example, consider a test that calls [locator.focus()](/docs/api/class-locator#locator-focus) followed by [keyboard.press()](/docs/api/class-keyboard#keyboard-press). If your handler clicks a button between these two actions, the focused element most likely will be wrong, and key press will happen on the unexpected element. Use [locator.press()](/docs/api/class-locator#locator-press) instead to avoid this problem.

Another example is a series of mouse actions, where [mouse.move()](/docs/api/class-mouse#mouse-move) is followed by [mouse.down()](/docs/api/class-mouse#mouse-down). Again, when the handler runs between these two actions, the mouse position will be wrong during the mouse down. Prefer self-contained actions like [locator.click()](/docs/api/class-locator#locator-click) that do not rely on the state being unchanged by a handler.

**Usage**

An example that closes a "Sign up to the newsletter" dialog when it appears:

    // Setup the handler.await page.addLocatorHandler(page.getByText('Sign up to the newsletter'), async () => {  await page.getByRole('button', { name: 'No thanks' }).click();});// Write the test as usual.await page.goto('https://example.com');await page.getByRole('button', { name: 'Start here' }).click();

An example that skips the "Confirm your security details" page when it is shown:

    // Setup the handler.await page.addLocatorHandler(page.getByText('Confirm your security details'), async () => {  await page.getByRole('button', { name: 'Remind me later' }).click();});// Write the test as usual.await page.goto('https://example.com');await page.getByRole('button', { name: 'Start here' }).click();

An example with a custom callback on every actionability check. It uses a `<body>` locator that is always visible, so the handler is called before every actionability check. It is important to specify [noWaitAfter](/docs/api/class-page#page-add-locator-handler-option-no-wait-after), because the handler does not hide the `<body>` element.

    // Setup the handler.await page.addLocatorHandler(page.locator('body'), async () => {  await page.evaluate(() => window.removeObstructionsForTestIfNeeded());}, { noWaitAfter: true });// Write the test as usual.await page.goto('https://example.com');await page.getByRole('button', { name: 'Start here' }).click();

Handler takes the original locator as an argument. You can also automatically remove the handler after a number of invocations by setting [times](/docs/api/class-page#page-add-locator-handler-option-times):

    await page.addLocatorHandler(page.getByLabel('Close'), async locator => {  await locator.click();}, { times: 1 });

**Arguments**

*   `locator` [Locator](/docs/api/class-locator "Locator")[#](#page-add-locator-handler-option-locator)
    
    Locator that triggers the handler.
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Locator](/docs/api/class-locator "Locator")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#page-add-locator-handler-option-handler)
    
    Function that should be run once [locator](/docs/api/class-page#page-add-locator-handler-option-locator) appears. This function should get rid of the element that blocks actions like click.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.44[#](#page-add-locator-handler-option-no-wait-after)
        
        By default, after calling the handler Playwright will wait until the overlay becomes hidden, and only then Playwright will continue with the action/assertion that triggered the handler. This option allows to opt-out of this behavior, so that overlay can stay visible after the handler has run.
        
    *   `times` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.44[#](#page-add-locator-handler-option-times)
        
        Specifies the maximum number of times this handler should be called. Unlimited by default.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-add-locator-handler-return)

* * *

### addScriptTag[â€‹](#page-add-script-tag "Direct link to addScriptTag")

Added before v1.9 page.addScriptTag

Adds a `<script>` tag into the page with the desired url or content. Returns the added tag when the script's onload fires or when the script content was injected into frame.

**Usage**

    await page.addScriptTag();await page.addScriptTag(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-script-tag-option-content)
        
        Raw JavaScript content to be injected into frame.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-script-tag-option-path)
        
        Path to the JavaScript file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
        
    *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-script-tag-option-type)
        
        Script type. Use 'module' in order to load a JavaScript ES6 module. See [script](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) for more details.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-script-tag-option-url)
        
        URL of a script to be added.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#page-add-script-tag-return)

* * *

### addStyleTag[â€‹](#page-add-style-tag "Direct link to addStyleTag")

Added before v1.9 page.addStyleTag

Adds a `<link rel="stylesheet">` tag into the page with the desired url or a `<style type="text/css">` tag with the content. Returns the added tag when the stylesheet's onload fires or when the CSS content was injected into frame.

**Usage**

    await page.addStyleTag();await page.addStyleTag(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-style-tag-option-content)
        
        Raw CSS content to be injected into frame.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-style-tag-option-path)
        
        Path to the CSS file to be injected into frame. If `path` is a relative path, then it is resolved relative to the current working directory.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-add-style-tag-option-url)
        
        URL of the `<link>` tag.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#page-add-style-tag-return)

* * *

### bringToFront[â€‹](#page-bring-to-front "Direct link to bringToFront")

Added before v1.9 page.bringToFront

Brings page to front (activates tab).

**Usage**

    await page.bringToFront();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-bring-to-front-return)

* * *

### close[â€‹](#page-close "Direct link to close")

Added before v1.9 page.close

If [runBeforeUnload](/docs/api/class-page#page-close-option-run-before-unload) is `false`, does not run any unload handlers and waits for the page to be closed. If [runBeforeUnload](/docs/api/class-page#page-close-option-run-before-unload) is `true` the method will run unload handlers, but will **not** wait for the page to close.

By default, `page.close()` **does not** run `beforeunload` handlers.

note

if [runBeforeUnload](/docs/api/class-page#page-close-option-run-before-unload) is passed as true, a `beforeunload` dialog might be summoned and should be handled manually via [page.on('dialog')](/docs/api/class-page#page-event-dialog) event.

**Usage**

    await page.close();await page.close(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `reason` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.40[#](#page-close-option-reason)
        
        The reason to be reported to the operations interrupted by the page closure.
        
    *   `runBeforeUnload` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-close-option-run-before-unload)
        
        Defaults to `false`. Whether to run the [before unload](https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload) page handlers.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-close-return)

* * *

### consoleMessages[â€‹](#page-console-messages "Direct link to consoleMessages")

Added in: v1.56 page.consoleMessages

Returns up to (currently) 200 last console messages from this page. See [page.on('console')](/docs/api/class-page#page-event-console) for more details.

**Usage**

    await page.consoleMessages();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage")\>>[#](#page-console-messages-return)

* * *

### content[â€‹](#page-content "Direct link to content")

Added before v1.9 page.content

Gets the full HTML contents of the page, including the doctype.

**Usage**

    await page.content();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-content-return)

* * *

### context[â€‹](#page-context "Direct link to context")

Added before v1.9 page.context

Get the browser context that the page belongs to.

**Usage**

    page.context();

**Returns**

*   [BrowserContext](/docs/api/class-browsercontext "BrowserContext")[#](#page-context-return)

* * *

### dragAndDrop[â€‹](#page-drag-and-drop "Direct link to dragAndDrop")

Added in: v1.13 page.dragAndDrop

This method drags the source element to the target element. It will first move to the source element, perform a `mousedown`, then move to the target element and perform a `mouseup`.

**Usage**

    await page.dragAndDrop('#source', '#target');// or specify exact positions relative to the top-left corners of the elements:await page.dragAndDrop('#source', '#target', {  sourcePosition: { x: 34, y: 7 },  targetPosition: { x: 10, y: 20 },});

**Arguments**

*   `source` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-drag-and-drop-option-source)
    
    A selector to search for an element to drag. If there are multiple elements satisfying the selector, the first will be used.
    
*   `target` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-drag-and-drop-option-target)
    
    A selector to search for an element to drop onto. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-drag-and-drop-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-drag-and-drop-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `sourcePosition` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.14[#](#page-drag-and-drop-option-source-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
        
    *   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.57[#](#page-drag-and-drop-option-steps)
        
        Defaults to 1. Sends `n` interpolated `mousemove` events to represent travel between the `mousedown` and `mouseup` of the drag. When set to 1, emits a single `mousemove` event at the destination location.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-drag-and-drop-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `targetPosition` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.14[#](#page-drag-and-drop-option-target-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-drag-and-drop-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-drag-and-drop-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-drag-and-drop-return)

* * *

### emulateMedia[â€‹](#page-emulate-media "Direct link to emulateMedia")

Added before v1.9 page.emulateMedia

This method changes the `CSS media type` through the `media` argument, and/or the `'prefers-colors-scheme'` media feature, using the `colorScheme` argument.

**Usage**

    await page.evaluate(() => matchMedia('screen').matches);// â†’ trueawait page.evaluate(() => matchMedia('print').matches);// â†’ falseawait page.emulateMedia({ media: 'print' });await page.evaluate(() => matchMedia('screen').matches);// â†’ falseawait page.evaluate(() => matchMedia('print').matches);// â†’ trueawait page.emulateMedia({});await page.evaluate(() => matchMedia('screen').matches);// â†’ trueawait page.evaluate(() => matchMedia('print').matches);// â†’ false

    await page.emulateMedia({ colorScheme: 'dark' });await page.evaluate(() => matchMedia('(prefers-color-scheme: dark)').matches);// â†’ trueawait page.evaluate(() => matchMedia('(prefers-color-scheme: light)').matches);// â†’ false

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `colorScheme` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference" _(optional)_ Added in: v1.9[#](#page-emulate-media-option-color-scheme)
        
        Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. Passing `null` disables color scheme emulation. `'no-preference'` is deprecated.
        
    *   `contrast` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "no-preference" | "more" _(optional)_ Added in: v1.51[#](#page-emulate-media-option-contrast)
        
        Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. Passing `null` disables contrast emulation.
        
    *   `forcedColors` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "active" | "none" _(optional)_ Added in: v1.15[#](#page-emulate-media-option-forced-colors)
        
        Emulates `'forced-colors'` media feature, supported values are `'active'` and `'none'`. Passing `null` disables forced colors emulation.
        
    *   `media` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "screen" | "print" _(optional)_ Added in: v1.9[#](#page-emulate-media-option-media)
        
        Changes the CSS media type of the page. The only allowed values are `'screen'`, `'print'` and `null`. Passing `null` disables CSS media emulation.
        
    *   `reducedMotion` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "reduce" | "no-preference" _(optional)_ Added in: v1.12[#](#page-emulate-media-option-reduced-motion)
        
        Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. Passing `null` disables reduced motion emulation.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-emulate-media-return)

* * *

### evaluate[â€‹](#page-evaluate "Direct link to evaluate")

Added before v1.9 page.evaluate

Returns the value of the [pageFunction](/docs/api/class-page#page-evaluate-option-expression) invocation.

If the function passed to the [page.evaluate()](/docs/api/class-page#page-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.evaluate()](/docs/api/class-page#page-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [page.evaluate()](/docs/api/class-page#page-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [page.evaluate()](/docs/api/class-page#page-evaluate) resolves to `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

Passing argument to [pageFunction](/docs/api/class-page#page-evaluate-option-expression):

    const result = await page.evaluate(([x, y]) => {  return Promise.resolve(x * y);}, [7, 8]);console.log(result); // prints "56"

A string can also be passed in instead of a function:

    console.log(await page.evaluate('1 + 2')); // prints "3"const x = 10;console.log(await page.evaluate(`1 + ${x}`)); // prints "11"

[ElementHandle](/docs/api/class-elementhandle "ElementHandle") instances can be passed as an argument to the [page.evaluate()](/docs/api/class-page#page-evaluate):

    const bodyHandle = await page.evaluate('document.body');const html = await page.evaluate<string, HTMLElement>(([body, suffix]) =>  body.innerHTML + suffix, [bodyHandle, 'hello']);await bodyHandle.dispose();

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-evaluate-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-evaluate-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-page#page-evaluate-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#page-evaluate-return)

* * *

### evaluateHandle[â€‹](#page-evaluate-handle "Direct link to evaluateHandle")

Added before v1.9 page.evaluateHandle

Returns the value of the [pageFunction](/docs/api/class-page#page-evaluate-handle-option-expression) invocation as a [JSHandle](/docs/api/class-jshandle "JSHandle").

The only difference between [page.evaluate()](/docs/api/class-page#page-evaluate) and [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) is that [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) returns [JSHandle](/docs/api/class-jshandle "JSHandle").

If the function passed to the [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

    // Handle for the window object.const aWindowHandle = await page.evaluateHandle(() => Promise.resolve(window));

A string can also be passed in instead of a function:

    const aHandle = await page.evaluateHandle('document'); // Handle for the 'document'

[JSHandle](/docs/api/class-jshandle "JSHandle") instances can be passed as an argument to the [page.evaluateHandle()](/docs/api/class-page#page-evaluate-handle):

    const aHandle = await page.evaluateHandle(() => document.body);const resultHandle = await page.evaluateHandle(body => body.innerHTML, aHandle);console.log(await resultHandle.jsonValue());await resultHandle.dispose();

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-evaluate-handle-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-evaluate-handle-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-page#page-evaluate-handle-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#page-evaluate-handle-return)

* * *

### exposeBinding[â€‹](#page-expose-binding "Direct link to exposeBinding")

Added before v1.9 page.exposeBinding

The method adds a function called [name](/docs/api/class-page#page-expose-binding-option-name) on the `window` object of every frame in this page. When called, the function executes [callback](/docs/api/class-page#page-expose-binding-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/docs/api/class-page#page-expose-binding-option-callback). If the [callback](/docs/api/class-page#page-expose-binding-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

The first argument of the [callback](/docs/api/class-page#page-expose-binding-option-callback) function contains information about the caller: `{ browserContext: BrowserContext, page: Page, frame: Frame }`.

See [browserContext.exposeBinding()](/docs/api/class-browsercontext#browser-context-expose-binding) for the context-wide version.

note

Functions installed via [page.exposeBinding()](/docs/api/class-page#page-expose-binding) survive navigations.

**Usage**

An example of exposing page URL to all frames in a page:

    const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.(async () => {  const browser = await webkit.launch({ headless: false });  const context = await browser.newContext();  const page = await context.newPage();  await page.exposeBinding('pageURL', ({ page }) => page.url());  await page.setContent(`    <script>      async function onClick() {        document.querySelector('div').textContent = await window.pageURL();      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>  `);  await page.click('button');})();

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-expose-binding-option-name)
    
    Name of the function on the window object.
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#page-expose-binding-option-callback)
    
    Callback function that will be called in the Playwright's context.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `handle` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-expose-binding-option-handle)
        
        Deprecated
        
        This option will be removed in the future.
        
        Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-expose-binding-return)

* * *

### exposeFunction[â€‹](#page-expose-function "Direct link to exposeFunction")

Added before v1.9 page.exposeFunction

The method adds a function called [name](/docs/api/class-page#page-expose-function-option-name) on the `window` object of every frame in the page. When called, the function executes [callback](/docs/api/class-page#page-expose-function-option-callback) and returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") which resolves to the return value of [callback](/docs/api/class-page#page-expose-function-option-callback).

If the [callback](/docs/api/class-page#page-expose-function-option-callback) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), it will be awaited.

See [browserContext.exposeFunction()](/docs/api/class-browsercontext#browser-context-expose-function) for context-wide exposed function.

note

Functions installed via [page.exposeFunction()](/docs/api/class-page#page-expose-function) survive navigations.

**Usage**

An example of adding a `sha256` function to the page:

    const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.const crypto = require('crypto');(async () => {  const browser = await webkit.launch({ headless: false });  const page = await browser.newPage();  await page.exposeFunction('sha256', text =>    crypto.createHash('sha256').update(text).digest('hex'),  );  await page.setContent(`    <script>      async function onClick() {        document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');      }    </script>    <button onclick="onClick()">Click me</button>    <div></div>  `);  await page.click('button');})();

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-expose-function-option-name)
    
    Name of the function on the window object
    
*   `callback` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#page-expose-function-option-callback)
    
    Callback function which will be called in Playwright's context.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-expose-function-return)

* * *

### frame[â€‹](#page-frame "Direct link to frame")

Added before v1.9 page.frame

Returns frame matching the specified criteria. Either `name` or `url` must be specified.

**Usage**

    const frame = page.frame('frame-name');

    const frame = page.frame({ url: /.*domain.*/ });

**Arguments**

*   `frameSelector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#page-frame-option-frame-selector)
    
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Frame name specified in the `iframe`'s `name` attribute. Optional.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        A glob pattern, regex pattern or predicate receiving frame's `url` as a [URL](https://nodejs.org/api/url.html "URL") object. Optional.
        
    
    Frame name or other frame lookup options.
    

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Frame](/docs/api/class-frame "Frame")[#](#page-frame-return)

* * *

### frameLocator[â€‹](#page-frame-locator "Direct link to frameLocator")

Added in: v1.17 page.frameLocator

When working with iframes, you can create a frame locator that will enter the iframe and allow selecting elements in that iframe.

**Usage**

Following snippet locates element with text "Submit" in the iframe with id `my-frame`, like `<iframe id="my-frame">`:

    const locator = page.frameLocator('#my-iframe').getByText('Submit');await locator.click();

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-frame-locator-option-selector)
    
    A selector to use when resolving DOM element.
    

**Returns**

*   [FrameLocator](/docs/api/class-framelocator "FrameLocator")[#](#page-frame-locator-return)

* * *

### frames[â€‹](#page-frames "Direct link to frames")

Added before v1.9 page.frames

An array of all frames attached to the page.

**Usage**

    page.frames();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Frame](/docs/api/class-frame "Frame")\>[#](#page-frames-return)

* * *

### getByAltText[â€‹](#page-get-by-alt-text "Direct link to getByAltText")

Added in: v1.27 page.getByAltText

Allows locating elements by their alt text.

**Usage**

For example, this method will find the image by alt text "Playwright logo":

    <img alt='Playwright logo'>

    await page.getByAltText('Playwright logo').click();

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#page-get-by-alt-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-alt-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-alt-text-return)

* * *

### getByLabel[â€‹](#page-get-by-label "Direct link to getByLabel")

Added in: v1.27 page.getByLabel

Allows locating input elements by the text of the associated `<label>` or `aria-labelledby` element, or by the `aria-label` attribute.

**Usage**

For example, this method will find inputs by label "Username" and "Password" in the following DOM:

    <input aria-label="Username"><label for="password-input">Password:</label><input id="password-input">

    await page.getByLabel('Username').fill('john');await page.getByLabel('Password').fill('secret');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#page-get-by-label-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-label-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-label-return)

* * *

### getByPlaceholder[â€‹](#page-get-by-placeholder "Direct link to getByPlaceholder")

Added in: v1.27 page.getByPlaceholder

Allows locating input elements by the placeholder text.

**Usage**

For example, consider the following DOM structure.

    <input type="email" placeholder="name@example.com" />

You can fill the input after locating it by the placeholder text:

    await page    .getByPlaceholder('name@example.com')    .fill('playwright@microsoft.com');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#page-get-by-placeholder-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-placeholder-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-placeholder-return)

* * *

### getByRole[â€‹](#page-get-by-role "Direct link to getByRole")

Added in: v1.27 page.getByRole

Allows locating elements by their [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles), [ARIA attributes](https://www.w3.org/TR/wai-aria-1.2/#aria-attributes) and [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

Consider the following DOM structure.

    <h3>Sign up</h3><label>  <input type="checkbox" /> Subscribe</label><br/><button>Submit</button>

You can locate each element by it's implicit role:

    await expect(page.getByRole('heading', { name: 'Sign up' })).toBeVisible();await page.getByRole('checkbox', { name: 'Subscribe' }).check();await page.getByRole('button', { name: /submit/i }).click();

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#page-get-by-role-option-role)
    
    Required aria role.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-role-option-checked)
        
        An attribute that is usually set by `aria-checked` or native `<input type=checkbox>` controls.
        
        Learn more about [`aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked).
        
    *   `disabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-role-option-disabled)
        
        An attribute that is usually set by `aria-disabled` or `disabled`.
        
        note
        
        Unlike most other attributes, `disabled` is inherited through the DOM hierarchy. Learn more about [`aria-disabled`](https://www.w3.org/TR/wai-aria-1.2/#aria-disabled).
        
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#page-get-by-role-option-exact)
        
        Whether [name](/docs/api/class-page#page-get-by-role-option-name) is matched exactly: case-sensitive and whole-string. Defaults to false. Ignored when [name](/docs/api/class-page#page-get-by-role-option-name) is a regular expression. Note that exact match still trims whitespace.
        
    *   `expanded` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-role-option-expanded)
        
        An attribute that is usually set by `aria-expanded`.
        
        Learn more about [`aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded).
        
    *   `includeHidden` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-role-option-include-hidden)
        
        Option that controls whether hidden elements are matched. By default, only non-hidden elements, as [defined by ARIA](https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion), are matched by role selector.
        
        Learn more about [`aria-hidden`](https://www.w3.org/TR/wai-aria-1.2/#aria-hidden).
        
    *   `level` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-get-by-role-option-level)
        
        A number attribute that is usually present for roles `heading`, `listitem`, `row`, `treeitem`, with default values for `<h1>-<h6>` elements.
        
        Learn more about [`aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level).
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#page-get-by-role-option-name)
        
        Option to match the [accessible name](https://w3c.github.io/accname/#dfn-accessible-name). By default, matching is case-insensitive and searches for a substring, use [exact](/docs/api/class-page#page-get-by-role-option-exact) to control this behavior.
        
        Learn more about [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).
        
    *   `pressed` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-role-option-pressed)
        
        An attribute that is usually set by `aria-pressed`.
        
        Learn more about [`aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed).
        
    *   `selected` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-role-option-selected)
        
        An attribute that is usually set by `aria-selected`.
        
        Learn more about [`aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected).
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-role-return)

**Details**

Role selector **does not replace** accessibility audits and conformance tests, but rather gives early feedback about the ARIA guidelines.

Many html elements have an implicitly [defined role](https://w3c.github.io/html-aam/#html-element-role-mappings) that is recognized by the role selector. You can find all the [supported roles here](https://www.w3.org/TR/wai-aria-1.2/#role_definitions). ARIA guidelines **do not recommend** duplicating implicit roles and attributes by setting `role` and/or `aria-*` attributes to default values.

* * *

### getByTestId[â€‹](#page-get-by-test-id "Direct link to getByTestId")

Added in: v1.27 page.getByTestId

Locate element by the test id.

**Usage**

Consider the following DOM structure.

    <button data-testid="directions">ItinÃ©raire</button>

You can locate the element by it's test id:

    await page.getByTestId('directions').click();

**Arguments**

*   `testId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#page-get-by-test-id-option-test-id)
    
    Id to locate the element by.
    

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-test-id-return)

**Details**

By default, the `data-testid` attribute is used as a test id. Use [selectors.setTestIdAttribute()](/docs/api/class-selectors#selectors-set-test-id-attribute) to configure a different test id attribute if necessary.

    // Set custom test id attribute from @playwright/test config:import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    testIdAttribute: 'data-pw'  },});

* * *

### getByText[â€‹](#page-get-by-text "Direct link to getByText")

Added in: v1.27 page.getByText

Allows locating elements that contain given text.

See also [locator.filter()](/docs/api/class-locator#locator-filter) that allows to match by another criteria, like an accessible role, and then filter by the text content.

**Usage**

Consider the following DOM structure:

    <div>Hello <span>world</span></div><div>Hello</div>

You can locate by text substring, exact string, or a regular expression:

    // Matches <span>page.getByText('world');// Matches first <div>page.getByText('Hello world');// Matches second <div>page.getByText('Hello', { exact: true });// Matches both <div>spage.getByText(/Hello/);// Matches second <div>page.getByText(/^hello$/i);

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#page-get-by-text-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-text-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-text-return)

**Details**

Matching by text always normalizes whitespace, even with exact match. For example, it turns multiple spaces into one, turns line breaks into spaces and ignores leading and trailing whitespace.

Input elements of the type `button` and `submit` are matched by their `value` instead of the text content. For example, locating by text `"Log in"` matches `<input type=button value="Log in">`.

* * *

### getByTitle[â€‹](#page-get-by-title "Direct link to getByTitle")

Added in: v1.27 page.getByTitle

Allows locating elements by their title attribute.

**Usage**

Consider the following DOM structure.

    <span title='Issues count'>25 issues</span>

You can check the issues count after locating it by the title text:

    await expect(page.getByTitle('Issues count')).toHaveText('25 issues');

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#page-get-by-title-option-text)
    
    Text to locate the element for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `exact` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-get-by-title-option-exact)
        
        Whether to find an exact match: case-sensitive and whole-string. Default to false. Ignored when locating by a regular expression. Note that exact match still trims whitespace.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-get-by-title-return)

* * *

### goBack[â€‹](#page-go-back "Direct link to goBack")

Added before v1.9 page.goBack

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. If cannot go back, returns `null`.

Navigate to the previous page in history.

**Usage**

    await page.goBack();await page.goBack(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-go-back-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-go-back-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#page-go-back-return)

* * *

### goForward[â€‹](#page-go-forward "Direct link to goForward")

Added before v1.9 page.goForward

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. If cannot go forward, returns `null`.

Navigate to the next page in history.

**Usage**

    await page.goForward();await page.goForward(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-go-forward-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-go-forward-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#page-go-forward-return)

* * *

### goto[â€‹](#page-goto "Direct link to goto")

Added before v1.9 page.goto

Returns the main resource response. In case of multiple redirects, the navigation will resolve with the first non-redirect response.

The method will throw an error if:

*   there's an SSL error (e.g. in case of self-signed certificates).
*   target URL is invalid.
*   the [timeout](/docs/api/class-page#page-goto-option-timeout) is exceeded during navigation.
*   the remote server does not respond or is unreachable.
*   the main resource failed to load.

The method will not throw an error when any valid HTTP status code is returned by the remote server, including 404 "Not Found" and 500 "Internal Server Error". The status code for such responses can be retrieved by calling [response.status()](/docs/api/class-response#response-status).

note

The method either throws an error or returns a main resource response. The only exceptions are navigation to `about:blank` or navigation to the same URL with a different hash, which would succeed and return `null`.

note

Headless mode doesn't support navigation to a PDF document. See the [upstream issue](https://bugs.chromium.org/p/chromium/issues/detail?id=761295).

**Usage**

    await page.goto(url);await page.goto(url, options);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-goto-option-url)
    
    URL to navigate page to. The url should include scheme, e.g. `https://`. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `referer` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-goto-option-referer)
        
        Referer header value. If provided it will take preference over the referer header value set by [page.setExtraHTTPHeaders()](/docs/api/class-page#page-set-extra-http-headers).
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-goto-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-goto-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#page-goto-return)

* * *

### isClosed[â€‹](#page-is-closed "Direct link to isClosed")

Added before v1.9 page.isClosed

Indicates that the page has been closed.

**Usage**

    page.isClosed();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#page-is-closed-return)

* * *

### locator[â€‹](#page-locator "Direct link to locator")

Added in: v1.14 page.locator

The method returns an element locator that can be used to perform actions on this page / frame. Locator is resolved to the element immediately before performing an action, so a series of actions on the same locator can in fact be performed on different DOM elements. That would happen if the DOM structure between those actions has changed.

[Learn more about locators](/docs/locators).

**Usage**

    page.locator(selector);page.locator(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-locator-option-selector)
    
    A selector to use when resolving DOM element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `has` [Locator](/docs/api/class-locator "Locator") _(optional)_[#](#page-locator-option-has)
        
        Narrows down the results of the method to those which contain elements matching this relative locator. For example, `article` that has `text=Playwright` matches `<article><div>Playwright</div></article>`.
        
        Inner locator **must be relative** to the outer locator and is queried starting with the outer locator match, not the document root. For example, you can find `content` that has `div` in `<article><content><div>Playwright</div></content></article>`. However, looking for `content` that has `article div` will fail, because the inner locator must be relative and should not use any elements outside the `content`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNot` [Locator](/docs/api/class-locator "Locator") _(optional)_ Added in: v1.33[#](#page-locator-option-has-not)
        
        Matches elements that do not contain an element that matches an inner locator. Inner locator is queried against the outer one. For example, `article` that does not have `div` matches `<article><span>Playwright</span></article>`.
        
        Note that outer and inner locators must belong to the same frame. Inner locator must not contain [FrameLocator](/docs/api/class-framelocator "FrameLocator")s.
        
    *   `hasNotText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_ Added in: v1.33[#](#page-locator-option-has-not-text)
        
        Matches elements that do not contain specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring.
        
    *   `hasText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#page-locator-option-has-text)
        
        Matches elements containing specified text somewhere inside, possibly in a child or a descendant element. When passed a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), matching is case-insensitive and searches for a substring. For example, `"Playwright"` matches `<article><div>Playwright</div></article>`.
        

**Returns**

*   [Locator](/docs/api/class-locator "Locator")[#](#page-locator-return)

* * *

### mainFrame[â€‹](#page-main-frame "Direct link to mainFrame")

Added before v1.9 page.mainFrame

The page's main frame. Page is guaranteed to have a main frame which persists during navigations.

**Usage**

    page.mainFrame();

**Returns**

*   [Frame](/docs/api/class-frame "Frame")[#](#page-main-frame-return)

* * *

### opener[â€‹](#page-opener "Direct link to opener")

Added before v1.9 page.opener

Returns the opener for popup pages and `null` for others. If the opener has been closed already the returns `null`.

**Usage**

    await page.opener();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Page](/docs/api/class-page "Page")\>[#](#page-opener-return)

* * *

### pageErrors[â€‹](#page-page-errors "Direct link to pageErrors")

Added in: v1.56 page.pageErrors

Returns up to (currently) 200 last page errors from this page. See [page.on('pageerror')](/docs/api/class-page#page-event-page-error) for more details.

**Usage**

    await page.pageErrors();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Error](https://nodejs.org/api/errors.html#errors_class_error "Error")\>>[#](#page-page-errors-return)

* * *

### pause[â€‹](#page-pause "Direct link to pause")

Added in: v1.9 page.pause

Pauses script execution. Playwright will stop executing the script and wait for the user to either press the 'Resume' button in the page overlay or to call `playwright.resume()` in the DevTools console.

User can inspect selectors or perform manual steps while paused. Resume will continue running the original script from the place it was paused.

note

This method requires Playwright to be started in a headed mode, with a falsy [headless](/docs/api/class-browsertype#browser-type-launch-option-headless) option.

**Usage**

    await page.pause();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-pause-return)

* * *

### pdf[â€‹](#page-pdf "Direct link to pdf")

Added before v1.9 page.pdf

Returns the PDF buffer.

`page.pdf()` generates a pdf of the page with `print` css media. To generate a pdf with `screen` media, call [page.emulateMedia()](/docs/api/class-page#page-emulate-media) before calling `page.pdf()`:

note

By default, `page.pdf()` generates a pdf with modified colors for printing. Use the [`-webkit-print-color-adjust`](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-print-color-adjust) property to force rendering of exact colors.

**Usage**

    // Generates a PDF with 'screen' media type.await page.emulateMedia({ media: 'screen' });await page.pdf({ path: 'page.pdf' });

The [width](/docs/api/class-page#page-pdf-option-width), [height](/docs/api/class-page#page-pdf-option-height), and [margin](/docs/api/class-page#page-pdf-option-margin) options accept values labeled with units. Unlabeled values are treated as pixels.

A few examples:

*   `page.pdf({width: 100})` - prints with width set to 100 pixels
*   `page.pdf({width: '100px'})` - prints with width set to 100 pixels
*   `page.pdf({width: '10cm'})` - prints with width set to 10 centimeters.

All possible units are:

*   `px` - pixel
*   `in` - inch
*   `cm` - centimeter
*   `mm` - millimeter

The [format](/docs/api/class-page#page-pdf-option-format) options are:

*   `Letter`: 8.5in x 11in
*   `Legal`: 8.5in x 14in
*   `Tabloid`: 11in x 17in
*   `Ledger`: 17in x 11in
*   `A0`: 33.1in x 46.8in
*   `A1`: 23.4in x 33.1in
*   `A2`: 16.54in x 23.4in
*   `A3`: 11.7in x 16.54in
*   `A4`: 8.27in x 11.7in
*   `A5`: 5.83in x 8.27in
*   `A6`: 4.13in x 5.83in

note

[headerTemplate](/docs/api/class-page#page-pdf-option-header-template) and [footerTemplate](/docs/api/class-page#page-pdf-option-footer-template) markup have the following limitations: > 1. Script tags inside templates are not evaluated. > 2. Page styles are not visible inside templates.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `displayHeaderFooter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-pdf-option-display-header-footer)
        
        Display header and footer. Defaults to `false`.
        
    *   `footerTemplate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-pdf-option-footer-template)
        
        HTML template for the print footer. Should use the same format as the [headerTemplate](/docs/api/class-page#page-pdf-option-header-template).
        
    *   `format` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-pdf-option-format)
        
        Paper format. If set, takes priority over [width](/docs/api/class-page#page-pdf-option-width) or [height](/docs/api/class-page#page-pdf-option-height) options. Defaults to 'Letter'.
        
    *   `headerTemplate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-pdf-option-header-template)
        
        HTML template for the print header. Should be valid HTML markup with following classes used to inject printing values into them:
        
        *   `'date'` formatted print date
        *   `'title'` document title
        *   `'url'` document location
        *   `'pageNumber'` current page number
        *   `'totalPages'` total pages in the document
    *   `height` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-pdf-option-height)
        
        Paper height, accepts values labeled with units.
        
    *   `landscape` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-pdf-option-landscape)
        
        Paper orientation. Defaults to `false`.
        
    *   `margin` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-pdf-option-margin)
        
        *   `top` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Top margin, accepts values labeled with units. Defaults to `0`.
            
        *   `right` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Right margin, accepts values labeled with units. Defaults to `0`.
            
        *   `bottom` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Bottom margin, accepts values labeled with units. Defaults to `0`.
            
        *   `left` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Left margin, accepts values labeled with units. Defaults to `0`.
            
        
        Paper margins, defaults to none.
        
    *   `outline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.42[#](#page-pdf-option-outline)
        
        Whether or not to embed the document outline into the PDF. Defaults to `false`.
        
    *   `pageRanges` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-pdf-option-page-ranges)
        
        Paper ranges to print, e.g., '1-5, 8, 11-13'. Defaults to the empty string, which means print all pages.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-pdf-option-path)
        
        The file path to save the PDF to. If [path](/docs/api/class-page#page-pdf-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the PDF won't be saved to the disk.
        
    *   `preferCSSPageSize` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-pdf-option-prefer-css-page-size)
        
        Give any CSS `@page` size declared in the page priority over what is declared in [width](/docs/api/class-page#page-pdf-option-width) and [height](/docs/api/class-page#page-pdf-option-height) or [format](/docs/api/class-page#page-pdf-option-format) options. Defaults to `false`, which will scale the content to fit the paper size.
        
    *   `printBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-pdf-option-print-background)
        
        Print background graphics. Defaults to `false`.
        
    *   `scale` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-pdf-option-scale)
        
        Scale of the webpage rendering. Defaults to `1`. Scale amount must be between 0.1 and 2.
        
    *   `tagged` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.42[#](#page-pdf-option-tagged)
        
        Whether or not to generate tagged (accessible) PDF. Defaults to `false`.
        
    *   `width` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-pdf-option-width)
        
        Paper width, accepts values labeled with units.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#page-pdf-return)

* * *

### reload[â€‹](#page-reload "Direct link to reload")

Added before v1.9 page.reload

This method reloads the current page, in the same way as if the user had triggered a browser refresh. Returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect.

**Usage**

    await page.reload();await page.reload(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-reload-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-reload-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#page-reload-return)

* * *

### removeAllListeners[â€‹](#page-remove-all-listeners "Direct link to removeAllListeners")

Added in: v1.47 page.removeAllListeners

Removes all the listeners of the given type (or all registered listeners if no type given). Allows to wait for async listeners to complete or to ignore subsequent errors from these listeners.

**Usage**

    page.on('request', async request => {  const response = await request.response();  const body = await response.body();  console.log(body.byteLength);});await page.goto('https://playwright.dev', { waitUntil: 'domcontentloaded' });// Waits for all the reported 'request' events to resolve.await page.removeAllListeners('request', { behavior: 'wait' });

**Arguments**

*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-remove-all-listeners-option-type)
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#page-remove-all-listeners-option-behavior)
        
        Specifies whether to wait for already running listeners and what to do if they throw errors:
        
        *   `'default'` - do not wait for current listener calls (if any) to finish, if the listener throws, it may result in unhandled error
        *   `'wait'` - wait for current listener calls (if any) to finish
        *   `'ignoreErrors'` - do not wait for current listener calls (if any) to finish, all errors thrown by the listeners after removal are silently caught

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-remove-all-listeners-return)

* * *

### removeLocatorHandler[â€‹](#page-remove-locator-handler "Direct link to removeLocatorHandler")

Added in: v1.44 page.removeLocatorHandler

Removes all locator handlers added by [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler) for a specific locator.

**Usage**

    await page.removeLocatorHandler(locator);

**Arguments**

*   `locator` [Locator](/docs/api/class-locator "Locator")[#](#page-remove-locator-handler-option-locator)
    
    Locator passed to [page.addLocatorHandler()](/docs/api/class-page#page-add-locator-handler).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-remove-locator-handler-return)

* * *

### requestGC[â€‹](#page-request-gc "Direct link to requestGC")

Added in: v1.48 page.requestGC

Request the page to perform garbage collection. Note that there is no guarantee that all unreachable objects will be collected.

This is useful to help detect memory leaks. For example, if your page has a large object `'suspect'` that might be leaked, you can check that it does not leak by using a [`WeakRef`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakRef).

    // 1. In your page, save a WeakRef for the "suspect".await page.evaluate(() => globalThis.suspectWeakRef = new WeakRef(suspect));// 2. Request garbage collection.await page.requestGC();// 3. Check that weak ref does not deref to the original object.expect(await page.evaluate(() => !globalThis.suspectWeakRef.deref())).toBe(true);

**Usage**

    await page.requestGC();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-request-gc-return)

* * *

### requests[â€‹](#page-requests "Direct link to requests")

Added in: v1.56 page.requests

Returns up to (currently) 100 last network request from this page. See [page.on('request')](/docs/api/class-page#page-event-request) for more details.

Returned requests should be accessed immediately, otherwise they might be collected to prevent unbounded memory growth as new requests come in. Once collected, retrieving most information about the request is impossible.

Note that requests reported through the [page.on('request')](/docs/api/class-page#page-event-request) request are not collected, so there is a trade off between efficient memory usage with [page.requests()](/docs/api/class-page#page-requests) and the amount of available information reported through [page.on('request')](/docs/api/class-page#page-event-request).

**Usage**

    await page.requests();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Request](/docs/api/class-request "Request")\>>[#](#page-requests-return)

* * *

### route[â€‹](#page-route "Direct link to route")

Added before v1.9 page.route

Routing provides the capability to modify network requests that are made by a page.

Once routing is enabled, every request matching the url pattern will stall unless it's continued, fulfilled or aborted.

note

The handler will only be called for the first url if the response is a redirect.

note

[page.route()](/docs/api/class-page#page-route) will not intercept requests intercepted by Service Worker. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [serviceWorkers](/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

note

[page.route()](/docs/api/class-page#page-route) will not intercept the first request of a popup page. Use [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) instead.

**Usage**

An example of a naive handler that aborts all image requests:

    const page = await browser.newPage();await page.route('**/*.{png,jpg,jpeg}', route => route.abort());await page.goto('https://example.com');await browser.close();

or the same snippet using a regex pattern instead:

    const page = await browser.newPage();await page.route(/(\.png$)|(\.jpg$)/, route => route.abort());await page.goto('https://example.com');await browser.close();

It is possible to examine the request to decide the route action. For example, mocking all requests that contain some post data, and leaving all other requests as is:

    await page.route('/api/**', async route => {  if (route.request().postData().includes('my-string'))    await route.fulfill({ body: 'mocked-data' });  else    await route.continue();});

Page routes take precedence over browser context routes (set up with [browserContext.route()](/docs/api/class-browsercontext#browser-context-route)) when request matches both handlers.

To remove a route with its handler you can use [page.unroute()](/docs/api/class-page#page-unroute).

note

Enabling routing disables http cache.

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#page-route-option-url)
    
    A glob pattern, regex pattern, or predicate that receives a [URL](https://nodejs.org/api/url.html "URL") to match during routing. If [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) is set in the context options and the provided URL is a string that does not start with `*`, it is resolved using the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Route](/docs/api/class-route "Route"), [Request](/docs/api/class-request "Request")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#page-route-option-handler)
    
    handler function to route the request.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `times` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.15[#](#page-route-option-times)
        
        How often a route should be used. By default it will be used every time.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-route-return)

* * *

### routeFromHAR[â€‹](#page-route-from-har "Direct link to routeFromHAR")

Added in: v1.23 page.routeFromHAR

If specified the network requests that are made in the page will be served from the HAR file. Read more about [Replaying from HAR](/docs/mock#replaying-from-har).

Playwright will not serve requests intercepted by Service Worker from the HAR file. See [this](https://github.com/microsoft/playwright/issues/1090) issue. We recommend disabling Service Workers when using request interception by setting [serviceWorkers](/docs/api/class-browser#browser-new-context-option-service-workers) to `'block'`.

**Usage**

    await page.routeFromHAR(har);await page.routeFromHAR(har, options);

**Arguments**

*   `har` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-route-from-har-option-har)
    
    Path to a [HAR](http://www.softwareishard.com/blog/har-12-spec) file with prerecorded network data. If `path` is a relative path, then it is resolved relative to the current working directory.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `notFound` "abort" | "fallback" _(optional)_[#](#page-route-from-har-option-not-found)
        
        *   If set to 'abort' any request not found in the HAR file will be aborted.
        *   If set to 'fallback' missing requests will be sent to the network.
        
        Defaults to abort.
        
    *   `update` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-route-from-har-option-update)
        
        If specified, updates the given HAR with the actual network information instead of serving from file. The file is written to disk when [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) is called.
        
    *   `updateContent` "embed" | "attach" _(optional)_ Added in: v1.32[#](#page-route-from-har-option-update-content)
        
        Optional setting to control resource content management. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file.
        
    *   `updateMode` "full" | "minimal" _(optional)_ Added in: v1.32[#](#page-route-from-har-option-update-mode)
        
        When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `minimal`.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_[#](#page-route-from-har-option-url)
        
        A glob pattern, regular expression or predicate to match the request URL. Only requests with URL matching the pattern will be served from the HAR file. If not specified, all requests are served from the HAR file.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-route-from-har-return)

* * *

### routeWebSocket[â€‹](#page-route-web-socket "Direct link to routeWebSocket")

Added in: v1.48 page.routeWebSocket

This method allows to modify websocket connections that are made by the page.

Note that only `WebSocket`s created after this method was called will be routed. It is recommended to call this method before navigating the page.

**Usage**

Below is an example of a simple mock that responds to a single message. See [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute") for more details and examples.

    await page.routeWebSocket('/ws', ws => {  ws.onMessage(message => {    if (message === 'request')      ws.send('response');  });});

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#page-route-web-socket-option-url)
    
    Only WebSockets with the url matching this pattern will be routed. A string pattern can be relative to the [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) context option.
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#page-route-web-socket-option-handler)
    
    Handler function to route the WebSocket.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-route-web-socket-return)

* * *

### screenshot[â€‹](#page-screenshot "Direct link to screenshot")

Added before v1.9 page.screenshot

Returns the buffer with the captured screenshot.

**Usage**

    await page.screenshot();await page.screenshot(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `animations` "disabled" | "allow" _(optional)_[#](#page-screenshot-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"allow"` that leaves animations untouched.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#page-screenshot-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `clip` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-screenshot-option-clip)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            x-coordinate of top-left corner of clip area
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            y-coordinate of top-left corner of clip area
            
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            width of clipping area
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            height of clipping area
            
        
        An object which specifies clipping of the resulting image.
        
    *   `fullPage` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-screenshot-option-full-page)
        
        When true, takes a screenshot of the full scrollable page, instead of the currently visible viewport. Defaults to `false`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#page-screenshot-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-page#page-screenshot-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#page-screenshot-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-screenshot-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#page-screenshot-option-path)
        
        The file path to save the image to. The screenshot type will be inferred from file extension. If [path](/docs/api/class-page#page-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
        
    *   `quality` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-screenshot-option-quality)
        
        The quality of the image, between 0-100. Not applicable to `png` images.
        
    *   `scale` "css" | "device" _(optional)_[#](#page-screenshot-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"device"`.
        
    *   `style` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.41[#](#page-screenshot-option-style)
        
        Text of the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-screenshot-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `type` "png" | "jpeg" _(optional)_[#](#page-screenshot-option-type)
        
        Specify screenshot type, defaults to `png`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#page-screenshot-return)

* * *

### setContent[â€‹](#page-set-content "Direct link to setContent")

Added before v1.9 page.setContent

This method internally calls [document.write()](https://developer.mozilla.org/en-US/docs/Web/API/Document/write), inheriting all its specific characteristics and behaviors.

**Usage**

    await page.setContent(html);await page.setContent(html, options);

**Arguments**

*   `html` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-set-content-option-html)
    
    HTML markup to assign to the page.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-set-content-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-set-content-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-set-content-return)

* * *

### setDefaultNavigationTimeout[â€‹](#page-set-default-navigation-timeout "Direct link to setDefaultNavigationTimeout")

Added before v1.9 page.setDefaultNavigationTimeout

This setting will change the default maximum navigation time for the following methods and related shortcuts:

*   [page.goBack()](/docs/api/class-page#page-go-back)
*   [page.goForward()](/docs/api/class-page#page-go-forward)
*   [page.goto()](/docs/api/class-page#page-goto)
*   [page.reload()](/docs/api/class-page#page-reload)
*   [page.setContent()](/docs/api/class-page#page-set-content)
*   [page.waitForNavigation()](/docs/api/class-page#page-wait-for-navigation)
*   [page.waitForURL()](/docs/api/class-page#page-wait-for-url)

note

[page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) takes priority over [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) and [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout).

**Usage**

    page.setDefaultNavigationTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#page-set-default-navigation-timeout-option-timeout)
    
    Maximum navigation time in milliseconds
    

* * *

### setDefaultTimeout[â€‹](#page-set-default-timeout "Direct link to setDefaultTimeout")

Added before v1.9 page.setDefaultTimeout

This setting will change the default maximum time for all the methods accepting [timeout](/docs/api/class-page#page-set-default-timeout-option-timeout) option.

note

[page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) takes priority over [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout).

**Usage**

    page.setDefaultTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#page-set-default-timeout-option-timeout)
    
    Maximum time in milliseconds. Pass `0` to disable timeout.
    

* * *

### setExtraHTTPHeaders[â€‹](#page-set-extra-http-headers "Direct link to setExtraHTTPHeaders")

Added before v1.9 page.setExtraHTTPHeaders

The extra HTTP headers will be sent with every request the page initiates.

note

[page.setExtraHTTPHeaders()](/docs/api/class-page#page-set-extra-http-headers) does not guarantee the order of headers in the outgoing requests.

**Usage**

    await page.setExtraHTTPHeaders(headers);

**Arguments**

*   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-set-extra-http-headers-option-headers)
    
    An object containing additional HTTP headers to be sent with every request. All header values must be strings.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-set-extra-http-headers-return)

* * *

### setViewportSize[â€‹](#page-set-viewport-size "Direct link to setViewportSize")

Added before v1.9 page.setViewportSize

In the case of multiple pages in a single browser, each page can have its own viewport size. However, [browser.newContext()](/docs/api/class-browser#browser-new-context) allows to set viewport size (and more) for all pages in the context at once.

[page.setViewportSize()](/docs/api/class-page#page-set-viewport-size) will resize the page. A lot of websites don't expect phones to change size, so you should set the viewport size before navigating to the page. [page.setViewportSize()](/docs/api/class-page#page-set-viewport-size) will also reset `screen` size, use [browser.newContext()](/docs/api/class-browser#browser-new-context) with `screen` and `viewport` parameters if you need better control of these properties.

**Usage**

    const page = await browser.newPage();await page.setViewportSize({  width: 640,  height: 480,});await page.goto('https://example.com');

**Arguments**

*   `viewportSize` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#page-set-viewport-size-option-viewport-size)
    *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        page width in pixels.
        
    *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        page height in pixels.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-set-viewport-size-return)

* * *

### title[â€‹](#page-title "Direct link to title")

Added before v1.9 page.title

Returns the page's title.

**Usage**

    await page.title();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-title-return)

* * *

### unroute[â€‹](#page-unroute "Direct link to unroute")

Added before v1.9 page.unroute

Removes a route created with [page.route()](/docs/api/class-page#page-route). When [handler](/docs/api/class-page#page-unroute-option-handler) is not specified, removes all routes for the [url](/docs/api/class-page#page-unroute-option-url).

**Usage**

    await page.unroute(url);await page.unroute(url, handler);

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#page-unroute-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://nodejs.org/api/url.html "URL") to match while routing.
    
*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Route](/docs/api/class-route "Route"), [Request](/docs/api/class-request "Request")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-unroute-option-handler)
    
    Optional handler function to route the request.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-unroute-return)

* * *

### unrouteAll[â€‹](#page-unroute-all "Direct link to unrouteAll")

Added in: v1.41 page.unrouteAll

Removes all routes created with [page.route()](/docs/api/class-page#page-route) and [page.routeFromHAR()](/docs/api/class-page#page-route-from-har).

**Usage**

    await page.unrouteAll();await page.unrouteAll(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `behavior` "wait" | "ignoreErrors" | "default" _(optional)_[#](#page-unroute-all-option-behavior)
        
        Specifies whether to wait for already running handlers and what to do if they throw errors:
        
        *   `'default'` - do not wait for current handler calls (if any) to finish, if unrouted handler throws, it may result in unhandled error
        *   `'wait'` - wait for current handler calls (if any) to finish
        *   `'ignoreErrors'` - do not wait for current handler calls (if any) to finish, all errors thrown by the handlers after unrouting are silently caught

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-unroute-all-return)

* * *

### url[â€‹](#page-url "Direct link to url")

Added before v1.9 page.url

**Usage**

    page.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-url-return)

* * *

### video[â€‹](#page-video "Direct link to video")

Added before v1.9 page.video

Video object associated with this page.

**Usage**

    page.video();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Video](/docs/api/class-video "Video")[#](#page-video-return)

* * *

### viewportSize[â€‹](#page-viewport-size "Direct link to viewportSize")

Added before v1.9 page.viewportSize

**Usage**

    page.viewportSize();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#page-viewport-size-return)
    *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        page width in pixels.
        
    *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        page height in pixels.
        

* * *

### waitForEvent[â€‹](#page-wait-for-event "Direct link to waitForEvent")

Added before v1.9 page.waitForEvent

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the page is closed before the event is fired. Returns the event data value.

**Usage**

    // Start waiting for download before clicking. Note no await.const downloadPromise = page.waitForEvent('download');await page.getByText('Download file').click();const download = await downloadPromise;

**Arguments**

*   `event` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-wait-for-event-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `optionsOrPredicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-wait-for-event-option-options-or-predicate)
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Maximum time to wait for in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    
    Either a predicate that receives an event or an options object. Optional.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") _(optional)_[#](#page-wait-for-event-option-predicate)
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#page-wait-for-event-return)

* * *

### waitForFunction[â€‹](#page-wait-for-function "Direct link to waitForFunction")

Added before v1.9 page.waitForFunction

Returns when the [pageFunction](/docs/api/class-page#page-wait-for-function-option-expression) returns a truthy value. It resolves to a JSHandle of the truthy value.

**Usage**

The [page.waitForFunction()](/docs/api/class-page#page-wait-for-function) can be used to observe viewport size change:

    const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.(async () => {  const browser = await webkit.launch();  const page = await browser.newPage();  const watchDog = page.waitForFunction(() => window.innerWidth < 100);  await page.setViewportSize({ width: 50, height: 50 });  await watchDog;  await browser.close();})();

To pass an argument to the predicate of [page.waitForFunction()](/docs/api/class-page#page-wait-for-function) function:

    const selector = '.foo';await page.waitForFunction(selector => !!document.querySelector(selector), selector);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-wait-for-function-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-wait-for-function-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-page#page-wait-for-function-option-expression).
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `polling` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | "raf" _(optional)_[#](#page-wait-for-function-option-polling)
        
        If [polling](/docs/api/class-page#page-wait-for-function-option-polling) is `'raf'`, then [pageFunction](/docs/api/class-page#page-wait-for-function-option-expression) is constantly executed in `requestAnimationFrame` callback. If [polling](/docs/api/class-page#page-wait-for-function-option-polling) is a number, then it is treated as an interval in milliseconds at which the function would be executed. Defaults to `raf`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-function-option-timeout)
        
        Maximum time to wait for in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#page-wait-for-function-return)

* * *

### waitForLoadState[â€‹](#page-wait-for-load-state "Direct link to waitForLoadState")

Added before v1.9 page.waitForLoadState

Returns when the required load state has been reached.

This resolves when the page reaches a required load state, `load` by default. The navigation must have been committed when this method is called. If current document has already reached the required state, resolves immediately.

note

Most of the time, this method is not needed because Playwright [auto-waits before every action](/docs/actionability).

**Usage**

    await page.getByRole('button').click(); // Click triggers navigation.await page.waitForLoadState(); // The promise resolves after 'load' event.

    const popupPromise = page.waitForEvent('popup');await page.getByRole('button').click(); // Click triggers a popup.const popup = await popupPromise;await popup.waitForLoadState('domcontentloaded'); // Wait for the 'DOMContentLoaded' event.console.log(await popup.title()); // Popup is ready to use.

**Arguments**

*   `state` "load" | "domcontentloaded" | "networkidle" _(optional)_[#](#page-wait-for-load-state-option-state)
    
    Optional load state to wait for, defaults to `load`. If the state has been already reached while loading current document, the method resolves immediately. Can be one of:
    
    *   `'load'` - wait for the `load` event to be fired.
    *   `'domcontentloaded'` - wait for the `DOMContentLoaded` event to be fired.
    *   `'networkidle'` - **DISCOURAGED** wait until there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-load-state-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-wait-for-load-state-return)

* * *

### waitForRequest[â€‹](#page-wait-for-request "Direct link to waitForRequest")

Added before v1.9 page.waitForRequest

Waits for the matching request and returns it. See [waiting for event](/docs/events#waiting-for-event) for more details about events.

**Usage**

    // Start waiting for request before clicking. Note no await.const requestPromise = page.waitForRequest('https://example.com/resource');await page.getByText('trigger request').click();const request = await requestPromise;// Alternative way with a predicate. Note no await.const requestPromise = page.waitForRequest(request =>  request.url() === 'https://example.com' && request.method() === 'GET',);await page.getByText('trigger request').click();const request = await requestPromise;

**Arguments**

*   `urlOrPredicate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Request](/docs/api/class-request "Request")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-wait-for-request-option-url-or-predicate)
    
    Request URL string, regex or predicate receiving [Request](/docs/api/class-request "Request") object.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-request-option-timeout)
        
        Maximum wait time in milliseconds, defaults to 30 seconds, pass `0` to disable the timeout. The default value can be changed by using the [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Request](/docs/api/class-request "Request")\>[#](#page-wait-for-request-return)

* * *

### waitForResponse[â€‹](#page-wait-for-response "Direct link to waitForResponse")

Added before v1.9 page.waitForResponse

Returns the matched response. See [waiting for event](/docs/events#waiting-for-event) for more details about events.

**Usage**

    // Start waiting for response before clicking. Note no await.const responsePromise = page.waitForResponse('https://example.com/resource');await page.getByText('trigger response').click();const response = await responsePromise;// Alternative way with a predicate. Note no await.const responsePromise = page.waitForResponse(response =>  response.url() === 'https://example.com' && response.status() === 200      && response.request().method() === 'GET');await page.getByText('trigger response').click();const response = await responsePromise;

**Arguments**

*   `urlOrPredicate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Response](/docs/api/class-response "Response")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") | [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-wait-for-response-option-url-or-predicate)
    
    Request URL string, regex or predicate receiving [Response](/docs/api/class-response "Response") object. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-response-option-timeout)
        
        Maximum wait time in milliseconds, defaults to 30 seconds, pass `0` to disable the timeout. The default value can be changed by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Response](/docs/api/class-response "Response")\>[#](#page-wait-for-response-return)

* * *

### waitForURL[â€‹](#page-wait-for-url "Direct link to waitForURL")

Added in: v1.11 page.waitForURL

Waits for the main frame to navigate to the given URL.

**Usage**

    await page.click('a.delayed-navigation'); // Clicking the link will indirectly cause a navigationawait page.waitForURL('**/target.html');

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#page-wait-for-url-option-url)
    
    A glob pattern, regex pattern or predicate receiving [URL](https://nodejs.org/api/url.html "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-url-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-wait-for-url-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-wait-for-url-return)

* * *

### workers[â€‹](#page-workers "Direct link to workers")

Added before v1.9 page.workers

This method returns all of the dedicated [WebWorkers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) associated with the page.

note

This does not contain ServiceWorkers

**Usage**

    page.workers();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Worker](/docs/api/class-worker "Worker")\>[#](#page-workers-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### clock[â€‹](#page-clock "Direct link to clock")

Added in: v1.45 page.clock

Playwright has ability to mock clock and passage of time.

**Usage**

    page.clock

**Type**

*   [Clock](/docs/api/class-clock "Clock")

* * *

### coverage[â€‹](#page-coverage "Direct link to coverage")

Added before v1.9 page.coverage

note

Only available for Chromium atm.

Browser-specific Coverage implementation. See [Coverage](/docs/api/class-coverage) for more details.

**Usage**

    page.coverage

**Type**

*   [Coverage](/docs/api/class-coverage "Coverage")

* * *

### keyboard[â€‹](#page-keyboard "Direct link to keyboard")

Added before v1.9 page.keyboard

**Usage**

    page.keyboard

**Type**

*   [Keyboard](/docs/api/class-keyboard "Keyboard")

* * *

### mouse[â€‹](#page-mouse "Direct link to mouse")

Added before v1.9 page.mouse

**Usage**

    page.mouse

**Type**

*   [Mouse](/docs/api/class-mouse "Mouse")

* * *

### request[â€‹](#page-request "Direct link to request")

Added in: v1.16 page.request

API testing helper associated with this page. This method returns the same instance as [browserContext.request](/docs/api/class-browsercontext#browser-context-request) on the page's context. See [browserContext.request](/docs/api/class-browsercontext#browser-context-request) for more details.

**Usage**

    page.request

**Type**

*   [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext")

* * *

### touchscreen[â€‹](#page-touchscreen "Direct link to touchscreen")

Added before v1.9 page.touchscreen

**Usage**

    page.touchscreen

**Type**

*   [Touchscreen](/docs/api/class-touchscreen "Touchscreen")

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#page-event-close "Direct link to on('close')")

Added before v1.9 page.on('close')

Emitted when the page closes.

**Usage**

    page.on('close', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### on('console')[â€‹](#page-event-console "Direct link to on('console')")

Added before v1.9 page.on('console')

Emitted when JavaScript within the page calls one of console API methods, e.g. `console.log` or `console.dir`.

The arguments passed into `console.log` are available on the [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage") event handler argument.

**Usage**

    page.on('console', async msg => {  const values = [];  for (const arg of msg.args())    values.push(await arg.jsonValue());  console.log(...values);});await page.evaluate(() => console.log('hello', 5, { foo: 'bar' }));

**Event data**

*   [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage")

* * *

### on('crash')[â€‹](#page-event-crash "Direct link to on('crash')")

Added before v1.9 page.on('crash')

Emitted when the page crashes. Browser pages might crash if they try to allocate too much memory. When the page crashes, ongoing and subsequent operations will throw.

The most common way to deal with crashes is to catch an exception:

    try {  // Crash might happen during a click.  await page.click('button');  // Or while waiting for an event.  await page.waitForEvent('popup');} catch (e) {  // When the page crashes, exception message contains 'crash'.}

**Usage**

    page.on('crash', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### on('dialog')[â€‹](#page-event-dialog "Direct link to on('dialog')")

Added before v1.9 page.on('dialog')

Emitted when a JavaScript dialog appears, such as `alert`, `prompt`, `confirm` or `beforeunload`. Listener **must** either [dialog.accept()](/docs/api/class-dialog#dialog-accept) or [dialog.dismiss()](/docs/api/class-dialog#dialog-dismiss) the dialog - otherwise the page will [freeze](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking) waiting for the dialog, and actions like click will never finish.

**Usage**

    page.on('dialog', dialog => dialog.accept());

note

When no [page.on('dialog')](/docs/api/class-page#page-event-dialog) or [browserContext.on('dialog')](/docs/api/class-browsercontext#browser-context-event-dialog) listeners are present, all dialogs are automatically dismissed.

**Event data**

*   [Dialog](/docs/api/class-dialog "Dialog")

* * *

### on('domcontentloaded')[â€‹](#page-event-dom-content-loaded "Direct link to on('domcontentloaded')")

Added in: v1.9 page.on('domcontentloaded')

Emitted when the JavaScript [`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded) event is dispatched.

**Usage**

    page.on('domcontentloaded', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### on('download')[â€‹](#page-event-download "Direct link to on('download')")

Added before v1.9 page.on('download')

Emitted when attachment download started. User can access basic file operations on downloaded content via the passed [Download](/docs/api/class-download "Download") instance.

**Usage**

    page.on('download', data => {});

**Event data**

*   [Download](/docs/api/class-download "Download")

* * *

### on('filechooser')[â€‹](#page-event-file-chooser "Direct link to on('filechooser')")

Added in: v1.9 page.on('filechooser')

Emitted when a file chooser is supposed to appear, such as after clicking the `<input type=file>`. Playwright can respond to it via setting the input files using [fileChooser.setFiles()](/docs/api/class-filechooser#file-chooser-set-files) that can be uploaded after that.

    page.on('filechooser', async fileChooser => {  await fileChooser.setFiles(path.join(__dirname, '/tmp/myfile.pdf'));});

**Usage**

    page.on('filechooser', data => {});

**Event data**

*   [FileChooser](/docs/api/class-filechooser "FileChooser")

* * *

### on('frameattached')[â€‹](#page-event-frame-attached "Direct link to on('frameattached')")

Added in: v1.9 page.on('frameattached')

Emitted when a frame is attached.

**Usage**

    page.on('frameattached', data => {});

**Event data**

*   [Frame](/docs/api/class-frame "Frame")

* * *

### on('framedetached')[â€‹](#page-event-frame-detached "Direct link to on('framedetached')")

Added in: v1.9 page.on('framedetached')

Emitted when a frame is detached.

**Usage**

    page.on('framedetached', data => {});

**Event data**

*   [Frame](/docs/api/class-frame "Frame")

* * *

### on('framenavigated')[â€‹](#page-event-frame-navigated "Direct link to on('framenavigated')")

Added in: v1.9 page.on('framenavigated')

Emitted when a frame is navigated to a new url.

**Usage**

    page.on('framenavigated', data => {});

**Event data**

*   [Frame](/docs/api/class-frame "Frame")

* * *

### on('load')[â€‹](#page-event-load "Direct link to on('load')")

Added before v1.9 page.on('load')

Emitted when the JavaScript [`load`](https://developer.mozilla.org/en-US/docs/Web/Events/load) event is dispatched.

**Usage**

    page.on('load', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### on('pageerror')[â€‹](#page-event-page-error "Direct link to on('pageerror')")

Added in: v1.9 page.on('pageerror')

Emitted when an uncaught exception happens within the page.

    // Log all uncaught errors to the terminalpage.on('pageerror', exception => {  console.log(`Uncaught exception: "${exception}"`);});// Navigate to a page with an exception.await page.goto('data:text/html,<script>throw new Error("Test")</script>');

**Usage**

    page.on('pageerror', data => {});

**Event data**

*   [Error](https://nodejs.org/api/errors.html#errors_class_error "Error")

* * *

### on('popup')[â€‹](#page-event-popup "Direct link to on('popup')")

Added before v1.9 page.on('popup')

Emitted when the page opens a new tab or window. This event is emitted in addition to the [browserContext.on('page')](/docs/api/class-browsercontext#browser-context-event-page), but only for popups relevant to this page.

The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with `window.open('http://example.com')`, this event will fire when the network request to "[http://example.com](http://example.com)" is done and its response has started loading in the popup. If you would like to route/listen to this network request, use [browserContext.route()](/docs/api/class-browsercontext#browser-context-route) and [browserContext.on('request')](/docs/api/class-browsercontext#browser-context-event-request) respectively instead of similar methods on the [Page](/docs/api/class-page "Page").

    // Start waiting for popup before clicking. Note no await.const popupPromise = page.waitForEvent('popup');await page.getByText('open the popup').click();const popup = await popupPromise;console.log(await popup.evaluate('location.href'));

note

Use [page.waitForLoadState()](/docs/api/class-page#page-wait-for-load-state) to wait until the page gets to a particular state (you should not need it in most cases).

**Usage**

    page.on('popup', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

* * *

### on('request')[â€‹](#page-event-request "Direct link to on('request')")

Added before v1.9 page.on('request')

Emitted when a page issues a request. The [request](/docs/api/class-request "Request") object is read-only. In order to intercept and mutate requests, see [page.route()](/docs/api/class-page#page-route) or [browserContext.route()](/docs/api/class-browsercontext#browser-context-route).

**Usage**

    page.on('request', data => {});

**Event data**

*   [Request](/docs/api/class-request "Request")

* * *

### on('requestfailed')[â€‹](#page-event-request-failed "Direct link to on('requestfailed')")

Added in: v1.9 page.on('requestfailed')

Emitted when a request fails, for example by timing out.

    page.on('requestfailed', request => {  console.log(request.url() + ' ' + request.failure().errorText);});

note

HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with [page.on('requestfinished')](/docs/api/class-page#page-event-request-finished) event and not with [page.on('requestfailed')](/docs/api/class-page#page-event-request-failed). A request will only be considered failed when the client cannot get an HTTP response from the server, e.g. due to network error net::ERR\_FAILED.

**Usage**

    page.on('requestfailed', data => {});

**Event data**

*   [Request](/docs/api/class-request "Request")

* * *

### on('requestfinished')[â€‹](#page-event-request-finished "Direct link to on('requestfinished')")

Added in: v1.9 page.on('requestfinished')

Emitted when a request finishes successfully after downloading the response body. For a successful response, the sequence of events is `request`, `response` and `requestfinished`.

**Usage**

    page.on('requestfinished', data => {});

**Event data**

*   [Request](/docs/api/class-request "Request")

* * *

### on('response')[â€‹](#page-event-response "Direct link to on('response')")

Added before v1.9 page.on('response')

Emitted when [response](/docs/api/class-response "Response") status and headers are received for a request. For a successful response, the sequence of events is `request`, `response` and `requestfinished`.

**Usage**

    page.on('response', data => {});

**Event data**

*   [Response](/docs/api/class-response "Response")

* * *

### on('websocket')[â€‹](#page-event-web-socket "Direct link to on('websocket')")

Added in: v1.9 page.on('websocket')

Emitted when [WebSocket](/docs/api/class-websocket "WebSocket") request is sent.

**Usage**

    page.on('websocket', data => {});

**Event data**

*   [WebSocket](/docs/api/class-websocket "WebSocket")

* * *

### on('worker')[â€‹](#page-event-worker "Direct link to on('worker')")

Added before v1.9 page.on('worker')

Emitted when a dedicated [WebWorker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) is spawned by the page.

**Usage**

    page.on('worker', data => {});

**Event data**

*   [Worker](/docs/api/class-worker "Worker")

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### $[â€‹](#page-query-selector "Direct link to $")

Added in: v1.9 page.$

Discouraged

Use locator-based [page.locator()](/docs/api/class-page#page-locator) instead. Read more about [locators](/docs/locators).

The method finds an element matching the specified selector within the page. If no elements match the selector, the return value resolves to `null`. To wait for an element on the page, use [locator.waitFor()](/docs/api/class-locator#locator-wait-for).

**Usage**

    await page.$(selector);await page.$(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-query-selector-option-selector)
    
    A selector to query for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-query-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#page-query-selector-return)

* * *

### $$[â€‹](#page-query-selector-all "Direct link to $$")

Added in: v1.9 page.$$

Discouraged

Use locator-based [page.locator()](/docs/api/class-page#page-locator) instead. Read more about [locators](/docs/locators).

The method finds all elements matching the specified selector within the page. If no elements match the selector, the return value resolves to `[]`.

**Usage**

    await page.$$(selector);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-query-selector-all-option-selector)
    
    A selector to query for.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>>[#](#page-query-selector-all-return)

* * *

### $eval[â€‹](#page-eval-on-selector "Direct link to $eval")

Added in: v1.9 page.$eval

Discouraged

This method does not wait for the element to pass actionability checks and therefore can lead to the flaky tests. Use [locator.evaluate()](/docs/api/class-locator#locator-evaluate), other [Locator](/docs/api/class-locator "Locator") helper methods or web-first assertions instead.

The method finds an element matching the specified selector within the page and passes it as a first argument to [pageFunction](/docs/api/class-page#page-eval-on-selector-option-expression). If no elements match the selector, the method throws an error. Returns the value of [pageFunction](/docs/api/class-page#page-eval-on-selector-option-expression).

If [pageFunction](/docs/api/class-page#page-eval-on-selector-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.$eval()](/docs/api/class-page#page-eval-on-selector) would wait for the promise to resolve and return its value.

**Usage**

    const searchValue = await page.$eval('#search', el => el.value);const preloadHref = await page.$eval('link[rel=preload]', el => el.href);const html = await page.$eval('.main-container', (e, suffix) => e.outerHTML + suffix, 'hello');// In TypeScript, this example requires an explicit type annotation (HTMLLinkElement) on el:const preloadHrefTS = await page.$eval('link[rel=preload]', (el: HTMLLinkElement) => el.href);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-eval-on-selector-option-selector)
    
    A selector to query for.
    
*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Element](https://developer.mozilla.org/en-US/docs/Web/API/element "Element")) | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-eval-on-selector-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-eval-on-selector-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-page#page-eval-on-selector-option-expression).
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-eval-on-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#page-eval-on-selector-return)

* * *

### $$eval[â€‹](#page-eval-on-selector-all "Direct link to $$eval")

Added in: v1.9 page.$$eval

Discouraged

In most cases, [locator.evaluateAll()](/docs/api/class-locator#locator-evaluate-all), other [Locator](/docs/api/class-locator "Locator") helper methods and web-first assertions do a better job.

The method finds all elements matching the specified selector within the page and passes an array of matched elements as a first argument to [pageFunction](/docs/api/class-page#page-eval-on-selector-all-option-expression). Returns the result of [pageFunction](/docs/api/class-page#page-eval-on-selector-all-option-expression) invocation.

If [pageFunction](/docs/api/class-page#page-eval-on-selector-all-option-expression) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [page.$$eval()](/docs/api/class-page#page-eval-on-selector-all) would wait for the promise to resolve and return its value.

**Usage**

    const divCounts = await page.$$eval('div', (divs, min) => divs.length >= min, 10);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-eval-on-selector-all-option-selector)
    
    A selector to query for.
    
*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Element](https://developer.mozilla.org/en-US/docs/Web/API/element "Element")\>) | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-eval-on-selector-all-option-expression)
    
    Function to be evaluated in the page context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-eval-on-selector-all-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-page#page-eval-on-selector-all-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#page-eval-on-selector-all-return)

* * *

### check[â€‹](#page-check "Direct link to check")

Added before v1.9 page.check

Discouraged

Use locator-based [locator.check()](/docs/api/class-locator#locator-check) instead. Read more about [locators](/docs/locators).

This method checks an element matching [selector](/docs/api/class-page#page-check-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-check-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already checked, this method returns immediately.
3.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-check-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now checked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-check-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await page.check(selector);await page.check(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-check-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-check-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-check-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.11[#](#page-check-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-check-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-check-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#page-check-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-check-return)

* * *

### click[â€‹](#page-click "Direct link to click")

Added before v1.9 page.click

Discouraged

Use locator-based [locator.click()](/docs/api/class-locator#locator-click) instead. Read more about [locators](/docs/locators).

This method clicks an element matching [selector](/docs/api/class-page#page-click-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-click-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-click-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element, or the specified [position](/docs/api/class-page#page-click-option-position).
5.  Wait for initiated navigations to either succeed or fail, unless [noWaitAfter](/docs/api/class-page#page-click-option-no-wait-after) option is set.

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-click-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await page.click(selector);await page.click(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-click-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `button` "left" | "right" | "middle" _(optional)_[#](#page-click-option-button)
        
        Defaults to `left`.
        
    *   `clickCount` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-click-option-click-count)
        
        defaults to 1. See [UIEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/detail "UIEvent.detail").
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-click-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-click-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#page-click-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-click-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-click-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-click-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-click-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#page-click-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-click-return)

* * *

### dblclick[â€‹](#page-dblclick "Direct link to dblclick")

Added before v1.9 page.dblclick

Discouraged

Use locator-based [locator.dblclick()](/docs/api/class-locator#locator-dblclick) instead. Read more about [locators](/docs/locators).

This method double clicks an element matching [selector](/docs/api/class-page#page-dblclick-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-dblclick-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-dblclick-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to double click in the center of the element, or the specified [position](/docs/api/class-page#page-dblclick-option-position).

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-dblclick-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

`page.dblclick()` dispatches two `click` events and a single `dblclick` event.

**Usage**

    await page.dblclick(selector);await page.dblclick(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-dblclick-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `button` "left" | "right" | "middle" _(optional)_[#](#page-dblclick-option-button)
        
        Defaults to `left`.
        
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-dblclick-option-delay)
        
        Time to wait between `mousedown` and `mouseup` in milliseconds. Defaults to 0.
        
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-dblclick-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#page-dblclick-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-dblclick-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-dblclick-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-dblclick-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-dblclick-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#page-dblclick-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-dblclick-return)

* * *

### dispatchEvent[â€‹](#page-dispatch-event "Direct link to dispatchEvent")

Added before v1.9 page.dispatchEvent

Discouraged

Use locator-based [locator.dispatchEvent()](/docs/api/class-locator#locator-dispatch-event) instead. Read more about [locators](/docs/locators).

The snippet below dispatches the `click` event on the element. Regardless of the visibility state of the element, `click` is dispatched. This is equivalent to calling [element.click()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click).

**Usage**

    await page.dispatchEvent('button#submit', 'click');

Under the hood, it creates an instance of an event based on the given [type](/docs/api/class-page#page-dispatch-event-option-type), initializes it with [eventInit](/docs/api/class-page#page-dispatch-event-option-event-init) properties and dispatches it on the element. Events are `composed`, `cancelable` and bubble by default.

Since [eventInit](/docs/api/class-page#page-dispatch-event-option-event-init) is event-specific, please refer to the events documentation for the lists of initial properties:

*   [DeviceMotionEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent/DeviceMotionEvent)
*   [DeviceOrientationEvent](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent/DeviceOrientationEvent)
*   [DragEvent](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/DragEvent)
*   [Event](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)
*   [FocusEvent](https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/FocusEvent)
*   [KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent)
*   [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)
*   [PointerEvent](https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/PointerEvent)
*   [TouchEvent](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent/TouchEvent)
*   [WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

You can also specify `JSHandle` as the property value if you want live objects to be passed into the event:

    // Note you can only create DataTransfer in Chromium and Firefoxconst dataTransfer = await page.evaluateHandle(() => new DataTransfer());await page.dispatchEvent('#source', 'dragstart', { dataTransfer });

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-dispatch-event-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-dispatch-event-option-type)
    
    DOM event type: `"click"`, `"dragstart"`, etc.
    
*   `eventInit` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#page-dispatch-event-option-event-init)
    
    Optional event-specific initialization properties.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-dispatch-event-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-dispatch-event-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-dispatch-event-return)

* * *

### fill[â€‹](#page-fill "Direct link to fill")

Added before v1.9 page.fill

Discouraged

Use locator-based [locator.fill()](/docs/api/class-locator#locator-fill) instead. Read more about [locators](/docs/locators).

This method waits for an element matching [selector](/docs/api/class-page#page-fill-option-selector), waits for [actionability](/docs/actionability) checks, focuses the element, fills it and triggers an `input` event after filling. Note that you can pass an empty string to clear the input field.

If the target element is not an `<input>`, `<textarea>` or `[contenteditable]` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be filled instead.

To send fine-grained keyboard events, use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

**Usage**

    await page.fill(selector, value);await page.fill(selector, value, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-fill-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-fill-option-value)
    
    Value to fill for the `<input>`, `<textarea>` or `[contenteditable]` element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#page-fill-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-fill-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-fill-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-fill-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-fill-return)

* * *

### focus[â€‹](#page-focus "Direct link to focus")

Added before v1.9 page.focus

Discouraged

Use locator-based [locator.focus()](/docs/api/class-locator#locator-focus) instead. Read more about [locators](/docs/locators).

This method fetches an element with [selector](/docs/api/class-page#page-focus-option-selector) and focuses it. If there's no element matching [selector](/docs/api/class-page#page-focus-option-selector), the method waits until a matching element appears in the DOM.

**Usage**

    await page.focus(selector);await page.focus(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-focus-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-focus-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-focus-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-focus-return)

* * *

### getAttribute[â€‹](#page-get-attribute "Direct link to getAttribute")

Added before v1.9 page.getAttribute

Discouraged

Use locator-based [locator.getAttribute()](/docs/api/class-locator#locator-get-attribute) instead. Read more about [locators](/docs/locators).

Returns element attribute value.

**Usage**

    await page.getAttribute(selector, name);await page.getAttribute(selector, name, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-get-attribute-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-get-attribute-option-name)
    
    Attribute name to get the value for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-get-attribute-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-get-attribute-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-get-attribute-return)

* * *

### hover[â€‹](#page-hover "Direct link to hover")

Added before v1.9 page.hover

Discouraged

Use locator-based [locator.hover()](/docs/api/class-locator#locator-hover) instead. Read more about [locators](/docs/locators).

This method hovers over an element matching [selector](/docs/api/class-page#page-hover-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-hover-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-hover-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.mouse](/docs/api/class-page#page-mouse) to hover over the center of the element, or the specified [position](/docs/api/class-page#page-hover-option-position).

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-hover-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await page.hover(selector);await page.hover(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-hover-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-hover-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#page-hover-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.28[#](#page-hover-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-hover-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-hover-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-hover-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#page-hover-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-hover-return)

* * *

### innerHTML[â€‹](#page-inner-html "Direct link to innerHTML")

Added before v1.9 page.innerHTML

Discouraged

Use locator-based [locator.innerHTML()](/docs/api/class-locator#locator-inner-html) instead. Read more about [locators](/docs/locators).

Returns `element.innerHTML`.

**Usage**

    await page.innerHTML(selector);await page.innerHTML(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-inner-html-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-inner-html-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-inner-html-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-inner-html-return)

* * *

### innerText[â€‹](#page-inner-text "Direct link to innerText")

Added before v1.9 page.innerText

Discouraged

Use locator-based [locator.innerText()](/docs/api/class-locator#locator-inner-text) instead. Read more about [locators](/docs/locators).

Returns `element.innerText`.

**Usage**

    await page.innerText(selector);await page.innerText(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-inner-text-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-inner-text-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-inner-text-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-inner-text-return)

* * *

### inputValue[â€‹](#page-input-value "Direct link to inputValue")

Added in: v1.13 page.inputValue

Discouraged

Use locator-based [locator.inputValue()](/docs/api/class-locator#locator-input-value) instead. Read more about [locators](/docs/locators).

Returns `input.value` for the selected `<input>` or `<textarea>` or `<select>` element.

Throws for non-input elements. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), returns the value of the control.

**Usage**

    await page.inputValue(selector);await page.inputValue(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-input-value-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-input-value-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-input-value-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-input-value-return)

* * *

### isChecked[â€‹](#page-is-checked "Direct link to isChecked")

Added before v1.9 page.isChecked

Discouraged

Use locator-based [locator.isChecked()](/docs/api/class-locator#locator-is-checked) instead. Read more about [locators](/docs/locators).

Returns whether the element is checked. Throws if the element is not a checkbox or radio input.

**Usage**

    await page.isChecked(selector);await page.isChecked(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-is-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-is-checked-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-is-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-is-checked-return)

* * *

### isDisabled[â€‹](#page-is-disabled "Direct link to isDisabled")

Added before v1.9 page.isDisabled

Discouraged

Use locator-based [locator.isDisabled()](/docs/api/class-locator#locator-is-disabled) instead. Read more about [locators](/docs/locators).

Returns whether the element is disabled, the opposite of [enabled](/docs/actionability#enabled).

**Usage**

    await page.isDisabled(selector);await page.isDisabled(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-is-disabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-is-disabled-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-is-disabled-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-is-disabled-return)

* * *

### isEditable[â€‹](#page-is-editable "Direct link to isEditable")

Added before v1.9 page.isEditable

Discouraged

Use locator-based [locator.isEditable()](/docs/api/class-locator#locator-is-editable) instead. Read more about [locators](/docs/locators).

Returns whether the element is [editable](/docs/actionability#editable).

**Usage**

    await page.isEditable(selector);await page.isEditable(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-is-editable-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-is-editable-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-is-editable-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-is-editable-return)

* * *

### isEnabled[â€‹](#page-is-enabled "Direct link to isEnabled")

Added before v1.9 page.isEnabled

Discouraged

Use locator-based [locator.isEnabled()](/docs/api/class-locator#locator-is-enabled) instead. Read more about [locators](/docs/locators).

Returns whether the element is [enabled](/docs/actionability#enabled).

**Usage**

    await page.isEnabled(selector);await page.isEnabled(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-is-enabled-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-is-enabled-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-is-enabled-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-is-enabled-return)

* * *

### isHidden[â€‹](#page-is-hidden "Direct link to isHidden")

Added before v1.9 page.isHidden

Discouraged

Use locator-based [locator.isHidden()](/docs/api/class-locator#locator-is-hidden) instead. Read more about [locators](/docs/locators).

Returns whether the element is hidden, the opposite of [visible](/docs/actionability#visible). [selector](/docs/api/class-page#page-is-hidden-option-selector) that does not match any elements is considered hidden.

**Usage**

    await page.isHidden(selector);await page.isHidden(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-is-hidden-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-is-hidden-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-is-hidden-option-timeout)
        
        Deprecated
        
        This option is ignored. [page.isHidden()](/docs/api/class-page#page-is-hidden) does not wait for the element to become hidden and returns immediately.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-is-hidden-return)

* * *

### isVisible[â€‹](#page-is-visible "Direct link to isVisible")

Added before v1.9 page.isVisible

Discouraged

Use locator-based [locator.isVisible()](/docs/api/class-locator#locator-is-visible) instead. Read more about [locators](/docs/locators).

Returns whether the element is [visible](/docs/actionability#visible). [selector](/docs/api/class-page#page-is-visible-option-selector) that does not match any elements is considered not visible.

**Usage**

    await page.isVisible(selector);await page.isVisible(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-is-visible-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-is-visible-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-is-visible-option-timeout)
        
        Deprecated
        
        This option is ignored. [page.isVisible()](/docs/api/class-page#page-is-visible) does not wait for the element to become visible and returns immediately.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")\>[#](#page-is-visible-return)

* * *

### press[â€‹](#page-press "Direct link to press")

Added before v1.9 page.press

Discouraged

Use locator-based [locator.press()](/docs/api/class-locator#locator-press) instead. Read more about [locators](/docs/locators).

Focuses the element, and then uses [keyboard.down()](/docs/api/class-keyboard#keyboard-down) and [keyboard.up()](/docs/api/class-keyboard#keyboard-up).

[key](/docs/api/class-page#page-press-option-key) can specify the intended [keyboardEvent.key](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) value or a single character to generate the text for. A superset of the [key](/docs/api/class-page#page-press-option-key) values can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values). Examples of the keys are:

`F1` - `F12`, `Digit0`\- `Digit9`, `KeyA`\- `KeyZ`, `Backquote`, `Minus`, `Equal`, `Backslash`, `Backspace`, `Tab`, `Delete`, `Escape`, `ArrowDown`, `End`, `Enter`, `Home`, `Insert`, `PageDown`, `PageUp`, `ArrowRight`, `ArrowUp`, etc.

Following modification shortcuts are also supported: `Shift`, `Control`, `Alt`, `Meta`, `ShiftLeft`, `ControlOrMeta`. `ControlOrMeta` resolves to `Control` on Windows and Linux and to `Meta` on macOS.

Holding down `Shift` will type the text that corresponds to the [key](/docs/api/class-page#page-press-option-key) in the upper case.

If [key](/docs/api/class-page#page-press-option-key) is a single character, it is case-sensitive, so the values `a` and `A` will generate different respective texts.

Shortcuts such as `key: "Control+o"`, `key: "Control++` or `key: "Control+Shift+T"` are supported as well. When specified with the modifier, modifier is pressed and being held while the subsequent key is being pressed.

**Usage**

    const page = await browser.newPage();await page.goto('https://keycode.info');await page.press('body', 'A');await page.screenshot({ path: 'A.png' });await page.press('body', 'ArrowLeft');await page.screenshot({ path: 'ArrowLeft.png' });await page.press('body', 'Shift+O');await page.screenshot({ path: 'O.png' });await browser.close();

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-press-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `key` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-press-option-key)
    
    Name of the key to press or a character to generate, such as `ArrowLeft` or `a`.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-press-option-delay)
        
        Time to wait between `keydown` and `keyup` in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-press-option-no-wait-after)
        
        Deprecated
        
        This option will default to `true` in the future.
        
        Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to `false`.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-press-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-press-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-press-return)

* * *

### selectOption[â€‹](#page-select-option "Direct link to selectOption")

Added before v1.9 page.selectOption

Discouraged

Use locator-based [locator.selectOption()](/docs/api/class-locator#locator-select-option) instead. Read more about [locators](/docs/locators).

This method waits for an element matching [selector](/docs/api/class-page#page-select-option-option-selector), waits for [actionability](/docs/actionability) checks, waits until all specified options are present in the `<select>` element and selects these options.

If the target element is not a `<select>` element, this method throws an error. However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), the control will be used instead.

Returns the array of option values that have been successfully selected.

Triggers a `change` and `input` event once all the provided options have been selected.

**Usage**

    // Single selection matching the value or labelpage.selectOption('select#colors', 'blue');// single selection matching the labelpage.selectOption('select#colors', { label: 'Blue' });// multiple selectionpage.selectOption('select#colors', ['red', 'green', 'blue']);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-select-option-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `values` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[ElementHandle](/docs/api/class-elementhandle "ElementHandle")\> | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#page-select-option-option-values)
    
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.value`. Optional.
        
    *   `label` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Matches by `option.label`. Optional.
        
    *   `index` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Matches by the index. Optional.
        
    
    Options to select. If the `<select>` has the `multiple` attribute, all matching options are selected, otherwise only the first option matching one of the passed options is selected. String values are matching both values and labels. Option is considered matching if all specified properties match.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.13[#](#page-select-option-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-select-option-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-select-option-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-select-option-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#page-select-option-return)

* * *

### setChecked[â€‹](#page-set-checked "Direct link to setChecked")

Added in: v1.15 page.setChecked

Discouraged

Use locator-based [locator.setChecked()](/docs/api/class-locator#locator-set-checked) instead. Read more about [locators](/docs/locators).

This method checks or unchecks an element matching [selector](/docs/api/class-page#page-set-checked-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-set-checked-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws.
3.  If the element already has the right checked state, this method returns immediately.
4.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-set-checked-option-force) option is set. If the element is detached during the checks, the whole action is retried.
5.  Scroll the element into view if needed.
6.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
7.  Ensure that the element is now checked or unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-set-checked-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await page.setChecked(selector, checked);await page.setChecked(selector, checked, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-set-checked-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#page-set-checked-option-checked)
    
    Whether to check or uncheck the checkbox.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-set-checked-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-set-checked-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-set-checked-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-set-checked-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-set-checked-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-set-checked-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-set-checked-return)

* * *

### setInputFiles[â€‹](#page-set-input-files "Direct link to setInputFiles")

Added before v1.9 page.setInputFiles

Discouraged

Use locator-based [locator.setInputFiles()](/docs/api/class-locator#locator-set-input-files) instead. Read more about [locators](/docs/locators).

Sets the value of the file input to these file paths or files. If some of the `filePaths` are relative paths, then they are resolved relative to the current working directory. For empty array, clears the selected files. For inputs with a `[webkitdirectory]` attribute, only a single directory path is supported.

This method expects [selector](/docs/api/class-page#page-set-input-files-option-selector) to point to an [input element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input). However, if the element is inside the `<label>` element that has an associated [control](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control), targets the control instead.

**Usage**

    await page.setInputFiles(selector, files);await page.setInputFiles(selector, files, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-set-input-files-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `files` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#page-set-input-files-option-files)
    
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File name
        
    *   `mimeType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        File type
        
    *   `buffer` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        File content
        
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-set-input-files-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-set-input-files-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-set-input-files-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-set-input-files-return)

* * *

### tap[â€‹](#page-tap "Direct link to tap")

Added before v1.9 page.tap

Discouraged

Use locator-based [locator.tap()](/docs/api/class-locator#locator-tap) instead. Read more about [locators](/docs/locators).

This method taps an element matching [selector](/docs/api/class-page#page-tap-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-tap-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-tap-option-force) option is set. If the element is detached during the checks, the whole action is retried.
3.  Scroll the element into view if needed.
4.  Use [page.touchscreen](/docs/api/class-page#page-touchscreen) to tap the center of the element, or the specified [position](/docs/api/class-page#page-tap-option-position).

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-tap-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

note

[page.tap()](/docs/api/class-page#page-tap) the method will throw if [hasTouch](/docs/api/class-browser#browser-new-context-option-has-touch) option of the browser context is false.

**Usage**

    await page.tap(selector);await page.tap(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-tap-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-tap-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `modifiers` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<"Alt" | "Control" | "ControlOrMeta" | "Meta" | "Shift"> _(optional)_[#](#page-tap-option-modifiers)
        
        Modifier keys to press. Ensures that only these modifiers are pressed during the operation, and then restores current modifiers back. If not specified, currently pressed modifiers are used. "ControlOrMeta" resolves to "Control" on Windows and Linux and to "Meta" on macOS.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-tap-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-tap-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-tap-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-tap-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#page-tap-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it. Note that keyboard `modifiers` will be pressed regardless of `trial` to allow testing elements which are only visible when those keys are pressed.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-tap-return)

* * *

### textContent[â€‹](#page-text-content "Direct link to textContent")

Added before v1.9 page.textContent

Discouraged

Use locator-based [locator.textContent()](/docs/api/class-locator#locator-text-content) instead. Read more about [locators](/docs/locators).

Returns `element.textContent`.

**Usage**

    await page.textContent(selector);await page.textContent(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-text-content-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-text-content-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-text-content-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-text-content-return)

* * *

### type[â€‹](#page-type "Direct link to type")

Added before v1.9 page.type

Deprecated

In most cases, you should use [locator.fill()](/docs/api/class-locator#locator-fill) instead. You only need to press keys one by one if there is special keyboard handling on the page - in this case use [locator.pressSequentially()](/docs/api/class-locator#locator-press-sequentially).

Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character in the text. `page.type` can be used to send fine-grained keyboard events. To fill values in form fields, use [page.fill()](/docs/api/class-page#page-fill).

To press a special key, like `Control` or `ArrowDown`, use [keyboard.press()](/docs/api/class-keyboard#keyboard-press).

**Usage**

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-type-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-type-option-text)
    
    A text to type into a focused element.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `delay` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-type-option-delay)
        
        Time to wait between key presses in milliseconds. Defaults to 0.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-type-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-type-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-type-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-type-return)

* * *

### uncheck[â€‹](#page-uncheck "Direct link to uncheck")

Added before v1.9 page.uncheck

Discouraged

Use locator-based [locator.uncheck()](/docs/api/class-locator#locator-uncheck) instead. Read more about [locators](/docs/locators).

This method unchecks an element matching [selector](/docs/api/class-page#page-uncheck-option-selector) by performing the following steps:

1.  Find an element matching [selector](/docs/api/class-page#page-uncheck-option-selector). If there is none, wait until a matching element is attached to the DOM.
2.  Ensure that matched element is a checkbox or a radio input. If not, this method throws. If the element is already unchecked, this method returns immediately.
3.  Wait for [actionability](/docs/actionability) checks on the matched element, unless [force](/docs/api/class-page#page-uncheck-option-force) option is set. If the element is detached during the checks, the whole action is retried.
4.  Scroll the element into view if needed.
5.  Use [page.mouse](/docs/api/class-page#page-mouse) to click in the center of the element.
6.  Ensure that the element is now unchecked. If not, this method throws.

When all steps combined have not finished during the specified [timeout](/docs/api/class-page#page-uncheck-option-timeout), this method throws a [TimeoutError](/docs/api/class-timeouterror "TimeoutError"). Passing zero timeout disables this.

**Usage**

    await page.uncheck(selector);await page.uncheck(selector, options);

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-uncheck-option-selector)
    
    A selector to search for an element. If there are multiple elements satisfying the selector, the first will be used.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `force` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-uncheck-option-force)
        
        Whether to bypass the [actionability](/docs/actionability) checks. Defaults to `false`.
        
    *   `noWaitAfter` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-uncheck-option-no-wait-after)
        
        Deprecated
        
        This option has no effect.
        
        This option has no effect.
        
    *   `position` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.11[#](#page-uncheck-option-position)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        A point to use relative to the top-left corner of element padding box. If not specified, uses some visible point of the element.
        
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-uncheck-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-uncheck-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `trial` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.11[#](#page-uncheck-option-trial)
        
        When set, this method only performs the [actionability](/docs/actionability) checks and skips the action. Defaults to `false`. Useful to wait until the element is ready for the action without performing it.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-uncheck-return)

* * *

### waitForNavigation[â€‹](#page-wait-for-navigation "Direct link to waitForNavigation")

Added before v1.9 page.waitForNavigation

Deprecated

This method is inherently racy, please use [page.waitForURL()](/docs/api/class-page#page-wait-for-url) instead.

Waits for the main frame navigation and returns the main resource response. In case of multiple redirects, the navigation will resolve with the response of the last redirect. In case of navigation to a different anchor or navigation due to History API usage, the navigation will resolve with `null`.

**Usage**

This resolves when the page navigates to a new URL or reloads. It is useful for when you run code which will indirectly cause the page to navigate. e.g. The click target has an `onclick` handler that triggers navigation from a `setTimeout`. Consider this example:

    // Start waiting for navigation before clicking. Note no await.const navigationPromise = page.waitForNavigation();await page.getByText('Navigate after timeout').click();await navigationPromise;

note

Usage of the [History API](https://developer.mozilla.org/en-US/docs/Web/API/History_API) to change the URL is considered a navigation.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-navigation-option-timeout)
        
        Maximum operation time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `navigationTimeout` option in the config, or by using the [browserContext.setDefaultNavigationTimeout()](/docs/api/class-browsercontext#browser-context-set-default-navigation-timeout), [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout), [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-wait-for-navigation-option-url)
        
        A glob pattern, regex pattern or predicate receiving [URL](https://nodejs.org/api/url.html "URL") to match while waiting for the navigation. Note that if the parameter is a string without wildcard characters, the method will wait for navigation to URL that is exactly equal to the string.
        
    *   `waitUntil` "load" | "domcontentloaded" | "networkidle" | "commit" _(optional)_[#](#page-wait-for-navigation-option-wait-until)
        
        When to consider operation succeeded, defaults to `load`. Events can be either:
        
        *   `'domcontentloaded'` - consider operation to be finished when the `DOMContentLoaded` event is fired.
        *   `'load'` - consider operation to be finished when the `load` event is fired.
        *   `'networkidle'` - **DISCOURAGED** consider operation to be finished when there are no network connections for at least `500` ms. Don't use this method for testing, rely on web assertions to assess readiness instead.
        *   `'commit'` - consider operation to be finished when network response is received and the document started loading.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#page-wait-for-navigation-return)

* * *

### waitForSelector[â€‹](#page-wait-for-selector "Direct link to waitForSelector")

Added before v1.9 page.waitForSelector

Discouraged

Use web assertions that assert visibility or a locator-based [locator.waitFor()](/docs/api/class-locator#locator-wait-for) instead. Read more about [locators](/docs/locators).

Returns when element specified by selector satisfies [state](/docs/api/class-page#page-wait-for-selector-option-state) option. Returns `null` if waiting for `hidden` or `detached`.

note

Playwright automatically waits for element to be ready before performing an action. Using [Locator](/docs/api/class-locator "Locator") objects and web-first assertions makes the code wait-for-selector-free.

Wait for the [selector](/docs/api/class-page#page-wait-for-selector-option-selector) to satisfy [state](/docs/api/class-page#page-wait-for-selector-option-state) option (either appear/disappear from dom, or become visible/hidden). If at the moment of calling the method [selector](/docs/api/class-page#page-wait-for-selector-option-selector) already satisfies the condition, the method will return immediately. If the selector doesn't satisfy the condition for the [timeout](/docs/api/class-page#page-wait-for-selector-option-timeout) milliseconds, the function will throw.

**Usage**

This method works across navigations:

    const { chromium } = require('playwright');  // Or 'firefox' or 'webkit'.(async () => {  const browser = await chromium.launch();  const page = await browser.newPage();  for (const currentURL of ['https://google.com', 'https://bbc.com']) {    await page.goto(currentURL);    const element = await page.waitForSelector('img');    console.log('Loaded image: ' + await element.getAttribute('src'));  }  await browser.close();})();

**Arguments**

*   `selector` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#page-wait-for-selector-option-selector)
    
    A selector to query for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `state` "attached" | "detached" | "visible" | "hidden" _(optional)_[#](#page-wait-for-selector-option-state)
        
        Defaults to `'visible'`. Can be either:
        
        *   `'attached'` - wait for element to be present in DOM.
        *   `'detached'` - wait for element to not be present in DOM.
        *   `'visible'` - wait for element to have non-empty bounding box and no `visibility:hidden`. Note that element without any content or with `display:none` has an empty bounding box and is not considered visible.
        *   `'hidden'` - wait for element to be either detached from DOM, or have an empty bounding box or `visibility:hidden`. This is opposite to the `'visible'` option.
    *   `strict` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.14[#](#page-wait-for-selector-option-strict)
        
        When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-wait-for-selector-option-timeout)
        
        Maximum time in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [ElementHandle](/docs/api/class-elementhandle "ElementHandle")\>[#](#page-wait-for-selector-return)

* * *

### waitForTimeout[â€‹](#page-wait-for-timeout "Direct link to waitForTimeout")

Added before v1.9 page.waitForTimeout

Discouraged

Never wait for timeout in production. Tests that wait for time are inherently flaky. Use [Locator](/docs/api/class-locator "Locator") actions and web assertions that wait automatically.

Waits for the given [timeout](/docs/api/class-page#page-wait-for-timeout-option-timeout) in milliseconds.

Note that `page.waitForTimeout()` should only be used for debugging. Tests using the timer in production are going to be flaky. Use signals such as network events, selectors becoming visible and others instead.

**Usage**

    // wait for 1 secondawait page.waitForTimeout(1000);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#page-wait-for-timeout-option-timeout)
    
    A timeout to wait for
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-wait-for-timeout-return)

# Request

Request
=======

Whenever the page sends a request for a network resource the following sequence of events are emitted by [Page](/docs/api/class-page "Page"):

*   [page.on('request')](/docs/api/class-page#page-event-request) emitted when the request is issued by the page.
*   [page.on('response')](/docs/api/class-page#page-event-response) emitted when/if the response status and headers are received for the request.
*   [page.on('requestfinished')](/docs/api/class-page#page-event-request-finished) emitted when the response body is downloaded and the request is complete.

If request fails at some point, then instead of `'requestfinished'` event (and possibly instead of 'response' event), the [page.on('requestfailed')](/docs/api/class-page#page-event-request-failed) event is emitted.

note

HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with `'requestfinished'` event.

If request gets a 'redirect' response, the request is successfully finished with the `requestfinished` event, and a new request is issued to a redirected url.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### allHeaders[â€‹](#request-all-headers "Direct link to allHeaders")

Added in: v1.15 request.allHeaders

An object with all the request HTTP headers associated with this request. The header names are lower-cased.

**Usage**

    await request.allHeaders();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#request-all-headers-return)

* * *

### failure[â€‹](#request-failure "Direct link to failure")

Added before v1.9 request.failure

The method returns `null` unless this request has failed, as reported by `requestfailed` event.

**Usage**

Example of logging of all the failed requests:

    page.on('requestfailed', request => {  console.log(request.url() + ' ' + request.failure().errorText);});

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#request-failure-return)
    *   `errorText` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Human-readable error message, e.g. `'net::ERR_FAILED'`.
        

* * *

### frame[â€‹](#request-frame "Direct link to frame")

Added before v1.9 request.frame

Returns the [Frame](/docs/api/class-frame "Frame") that initiated this request.

**Usage**

    const frameUrl = request.frame().url();

**Returns**

*   [Frame](/docs/api/class-frame "Frame")[#](#request-frame-return)

**Details**

Note that in some cases the frame is not available, and this method will throw.

*   When request originates in the Service Worker. You can use `request.serviceWorker()` to check that.
*   When navigation request is issued before the corresponding frame is created. You can use [request.isNavigationRequest()](/docs/api/class-request#request-is-navigation-request) to check that.

Here is an example that handles all the cases:

    if (request.serviceWorker())  console.log(`request ${request.url()} from a service worker`);else if (request.isNavigationRequest())  console.log(`request ${request.url()} is a navigation request`);else  console.log(`request ${request.url()} from a frame ${request.frame().url()}`);

* * *

### headerValue[â€‹](#request-header-value "Direct link to headerValue")

Added in: v1.15 request.headerValue

Returns the value of the header matching the name. The name is case-insensitive.

**Usage**

    await request.headerValue(name);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#request-header-value-option-name)
    
    Name of the header.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#request-header-value-return)

* * *

### headers[â€‹](#request-headers "Direct link to headers")

Added before v1.9 request.headers

An object with the request HTTP headers. The header names are lower-cased. Note that this method does not return security-related headers, including cookie-related ones. You can use [request.allHeaders()](/docs/api/class-request#request-all-headers) for complete list of headers that include `cookie` information.

**Usage**

    request.headers();

**Returns**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#request-headers-return)

* * *

### headersArray[â€‹](#request-headers-array "Direct link to headersArray")

Added in: v1.15 request.headersArray

An array with all the request HTTP headers associated with this request. Unlike [request.allHeaders()](/docs/api/class-request#request-all-headers), header names are NOT lower-cased. Headers with multiple entries, such as `Set-Cookie`, appear in the array multiple times.

**Usage**

    await request.headersArray();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>>[#](#request-headers-array-return)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Name of the header.
        
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Value of the header.
        

* * *

### isNavigationRequest[â€‹](#request-is-navigation-request "Direct link to isNavigationRequest")

Added before v1.9 request.isNavigationRequest

Whether this request is driving frame's navigation.

Some navigation requests are issued before the corresponding frame is created, and therefore do not have [request.frame()](/docs/api/class-request#request-frame) available.

**Usage**

    request.isNavigationRequest();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#request-is-navigation-request-return)

* * *

### method[â€‹](#request-method "Direct link to method")

Added before v1.9 request.method

Request's method (GET, POST, etc.)

**Usage**

    request.method();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#request-method-return)

* * *

### postData[â€‹](#request-post-data "Direct link to postData")

Added before v1.9 request.postData

Request's post body, if any.

**Usage**

    request.postData();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#request-post-data-return)

* * *

### postDataBuffer[â€‹](#request-post-data-buffer "Direct link to postDataBuffer")

Added before v1.9 request.postDataBuffer

Request's post body in a binary form, if any.

**Usage**

    request.postDataBuffer();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#request-post-data-buffer-return)

* * *

### postDataJSON[â€‹](#request-post-data-json "Direct link to postDataJSON")

Added before v1.9 request.postDataJSON

Returns parsed request's body for `form-urlencoded` and JSON as a fallback if any.

When the response is `application/x-www-form-urlencoded` then a key/value object of the values will be returned. Otherwise it will be parsed as JSON.

**Usage**

    request.postDataJSON();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")[#](#request-post-data-json-return)

* * *

### redirectedFrom[â€‹](#request-redirected-from "Direct link to redirectedFrom")

Added before v1.9 request.redirectedFrom

Request that was redirected by the server to this one, if any.

When the server responds with a redirect, Playwright creates a new [Request](/docs/api/class-request "Request") object. The two requests are connected by `redirectedFrom()` and `redirectedTo()` methods. When multiple server redirects has happened, it is possible to construct the whole redirect chain by repeatedly calling `redirectedFrom()`.

**Usage**

For example, if the website `http://example.com` redirects to `https://example.com`:

    const response = await page.goto('http://example.com');console.log(response.request().redirectedFrom().url()); // 'http://example.com'

If the website `https://google.com` has no redirects:

    const response = await page.goto('https://google.com');console.log(response.request().redirectedFrom()); // null

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Request](/docs/api/class-request "Request")[#](#request-redirected-from-return)

* * *

### redirectedTo[â€‹](#request-redirected-to "Direct link to redirectedTo")

Added before v1.9 request.redirectedTo

New request issued by the browser if the server responded with redirect.

**Usage**

This method is the opposite of [request.redirectedFrom()](/docs/api/class-request#request-redirected-from):

    console.log(request.redirectedFrom().redirectedTo() === request); // true

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Request](/docs/api/class-request "Request")[#](#request-redirected-to-return)

* * *

### resourceType[â€‹](#request-resource-type "Direct link to resourceType")

Added before v1.9 request.resourceType

Contains the request's resource type as it was perceived by the rendering engine. ResourceType will be one of the following: `document`, `stylesheet`, `image`, `media`, `font`, `script`, `texttrack`, `xhr`, `fetch`, `eventsource`, `websocket`, `manifest`, `other`.

**Usage**

    request.resourceType();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#request-resource-type-return)

* * *

### response[â€‹](#request-response "Direct link to response")

Added before v1.9 request.response

Returns the matching [Response](/docs/api/class-response "Response") object, or `null` if the response was not received due to error.

**Usage**

    await request.response();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Response](/docs/api/class-response "Response")\>[#](#request-response-return)

* * *

### serviceWorker[â€‹](#request-service-worker "Direct link to serviceWorker")

Added in: v1.24 request.serviceWorker

The Service [Worker](/docs/api/class-worker "Worker") that is performing the request.

**Usage**

    request.serviceWorker();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Worker](/docs/api/class-worker "Worker")[#](#request-service-worker-return)

**Details**

This method is Chromium only. It's safe to call when using other browsers, but it will always be `null`.

Requests originated in a Service Worker do not have a [request.frame()](/docs/api/class-request#request-frame) available.

* * *

### sizes[â€‹](#request-sizes "Direct link to sizes")

Added in: v1.15 request.sizes

Returns resource size information for given request.

**Usage**

    await request.sizes();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#request-sizes-return)
    *   `requestBodySize` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Size of the request body (POST data payload) in bytes. Set to 0 if there was no body.
        
    *   `requestHeadersSize` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Total number of bytes from the start of the HTTP request message until (and including) the double CRLF before the body.
        
    *   `responseBodySize` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Size of the received response body (encoded) in bytes.
        
    *   `responseHeadersSize` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Total number of bytes from the start of the HTTP response message until (and including) the double CRLF before the body.
        

* * *

### timing[â€‹](#request-timing "Direct link to timing")

Added before v1.9 request.timing

Returns resource timing information for given request. Most of the timing values become available upon the response, `responseEnd` becomes available when request finishes. Find more information at [Resource Timing API](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming).

**Usage**

    const requestFinishedPromise = page.waitForEvent('requestfinished');await page.goto('http://example.com');const request = await requestFinishedPromise;console.log(request.timing());

**Returns**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#request-timing-return)
    *   `startTime` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Request start time in milliseconds elapsed since January 1, 1970 00:00:00 UTC
        
    *   `domainLookupStart` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately before the browser starts the domain name lookup for the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `domainLookupEnd` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately after the browser starts the domain name lookup for the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `connectStart` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately before the user agent starts establishing the connection to the server to retrieve the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `secureConnectionStart` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately before the browser starts the handshake process to secure the current connection. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `connectEnd` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately before the user agent starts establishing the connection to the server to retrieve the resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `requestStart` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately before the browser starts requesting the resource from the server, cache, or local resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `responseStart` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately after the browser receives the first byte of the response from the server, cache, or local resource. The value is given in milliseconds relative to `startTime`, -1 if not available.
        
    *   `responseEnd` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Time immediately after the browser receives the last byte of the resource or immediately before the transport connection is closed, whichever comes first. The value is given in milliseconds relative to `startTime`, -1 if not available.
        

* * *

### url[â€‹](#request-url "Direct link to url")

Added before v1.9 request.url

URL of the request.

**Usage**

    request.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#request-url-return)

# Response

Response
========

[Response](/docs/api/class-response "Response") class represents responses which are received by page.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### allHeaders[â€‹](#response-all-headers "Direct link to allHeaders")

Added in: v1.15 response.allHeaders

An object with all the response HTTP headers associated with this response.

**Usage**

    await response.allHeaders();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#response-all-headers-return)

* * *

### body[â€‹](#response-body "Direct link to body")

Added before v1.9 response.body

Returns the buffer with response body.

**Usage**

    await response.body();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#response-body-return)

* * *

### finished[â€‹](#response-finished "Direct link to finished")

Added before v1.9 response.finished

Waits for this response to finish, returns always `null`.

**Usage**

    await response.finished();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Error](https://nodejs.org/api/errors.html#errors_class_error "Error")\>[#](#response-finished-return)

* * *

### frame[â€‹](#response-frame "Direct link to frame")

Added before v1.9 response.frame

Returns the [Frame](/docs/api/class-frame "Frame") that initiated this response.

**Usage**

    response.frame();

**Returns**

*   [Frame](/docs/api/class-frame "Frame")[#](#response-frame-return)

* * *

### fromServiceWorker[â€‹](#response-from-service-worker "Direct link to fromServiceWorker")

Added in: v1.23 response.fromServiceWorker

Indicates whether this Response was fulfilled by a Service Worker's Fetch Handler (i.e. via [FetchEvent.respondWith](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent/respondWith)).

**Usage**

    response.fromServiceWorker();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#response-from-service-worker-return)

* * *

### headerValue[â€‹](#response-header-value "Direct link to headerValue")

Added in: v1.15 response.headerValue

Returns the value of the header matching the name. The name is case-insensitive. If multiple headers have the same name (except `set-cookie`), they are returned as a list separated by `,` . For `set-cookie`, the `\n` separator is used. If no headers are found, `null` is returned.

**Usage**

    await response.headerValue(name);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#response-header-value-option-name)
    
    Name of the header.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#response-header-value-return)

* * *

### headerValues[â€‹](#response-header-values "Direct link to headerValues")

Added in: v1.15 response.headerValues

Returns all values of the headers matching the name, for example `set-cookie`. The name is case-insensitive.

**Usage**

    await response.headerValues(name);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#response-header-values-option-name)
    
    Name of the header.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>>[#](#response-header-values-return)

* * *

### headers[â€‹](#response-headers "Direct link to headers")

Added before v1.9 response.headers

An object with the response HTTP headers. The header names are lower-cased. Note that this method does not return security-related headers, including cookie-related ones. You can use [response.allHeaders()](/docs/api/class-response#response-all-headers) for complete list of headers that include `cookie` information.

**Usage**

    response.headers();

**Returns**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#response-headers-return)

* * *

### headersArray[â€‹](#response-headers-array "Direct link to headersArray")

Added in: v1.15 response.headersArray

An array with all the request HTTP headers associated with this response. Unlike [response.allHeaders()](/docs/api/class-response#response-all-headers), header names are NOT lower-cased. Headers with multiple entries, such as `Set-Cookie`, appear in the array multiple times.

**Usage**

    await response.headersArray();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>>[#](#response-headers-array-return)
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Name of the header.
        
    *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Value of the header.
        

* * *

### json[â€‹](#response-json "Direct link to json")

Added before v1.9 response.json

Returns the JSON representation of response body.

This method will throw if the response body is not parsable via `JSON.parse`.

**Usage**

    await response.json();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#response-json-return)

* * *

### ok[â€‹](#response-ok "Direct link to ok")

Added before v1.9 response.ok

Contains a boolean stating whether the response was successful (status in the range 200-299) or not.

**Usage**

    response.ok();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#response-ok-return)

* * *

### request[â€‹](#response-request "Direct link to request")

Added before v1.9 response.request

Returns the matching [Request](/docs/api/class-request "Request") object.

**Usage**

    response.request();

**Returns**

*   [Request](/docs/api/class-request "Request")[#](#response-request-return)

* * *

### securityDetails[â€‹](#response-security-details "Direct link to securityDetails")

Added in: v1.13 response.securityDetails

Returns SSL and other security information.

**Usage**

    await response.securityDetails();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#response-security-details-return)
    *   `issuer` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Common Name component of the Issuer field. from the certificate. This should only be used for informational purposes. Optional.
        
    *   `protocol` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        The specific TLS protocol used. (e.g. `TLS 1.3`). Optional.
        
    *   `subjectName` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Common Name component of the Subject field from the certificate. This should only be used for informational purposes. Optional.
        
    *   `validFrom` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Unix timestamp (in seconds) specifying when this cert becomes valid. Optional.
        
    *   `validTo` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Unix timestamp (in seconds) specifying when this cert becomes invalid. Optional.
        

* * *

### serverAddr[â€‹](#response-server-addr "Direct link to serverAddr")

Added in: v1.13 response.serverAddr

Returns the IP address and port of the server.

**Usage**

    await response.serverAddr();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#response-server-addr-return)
    *   `ipAddress` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        IPv4 or IPV6 address of the server.
        
    *   `port` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        

* * *

### status[â€‹](#response-status "Direct link to status")

Added before v1.9 response.status

Contains the status code of the response (e.g., 200 for a success).

**Usage**

    response.status();

**Returns**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#response-status-return)

* * *

### statusText[â€‹](#response-status-text "Direct link to statusText")

Added before v1.9 response.statusText

Contains the status text of the response (e.g. usually an "OK" for a success).

**Usage**

    response.statusText();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#response-status-text-return)

* * *

### text[â€‹](#response-text "Direct link to text")

Added before v1.9 response.text

Returns the text representation of response body.

**Usage**

    await response.text();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#response-text-return)

* * *

### url[â€‹](#response-url "Direct link to url")

Added before v1.9 response.url

Contains the URL of the response.

**Usage**

    response.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#response-url-return)

# Route

Route
=====

Whenever a network route is set up with [page.route()](/docs/api/class-page#page-route) or [browserContext.route()](/docs/api/class-browsercontext#browser-context-route), the `Route` object allows to handle the route.

Learn more about [networking](/docs/network).

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### abort[â€‹](#route-abort "Direct link to abort")

Added before v1.9 route.abort

Aborts the route's request.

**Usage**

    await route.abort();await route.abort(errorCode);

**Arguments**

*   `errorCode` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-abort-option-error-code)
    
    Optional error code. Defaults to `failed`, could be one of the following:
    
    *   `'aborted'` - An operation was aborted (due to user action)
    *   `'accessdenied'` - Permission to access a resource, other than the network, was denied
    *   `'addressunreachable'` - The IP address is unreachable. This usually means that there is no route to the specified host or network.
    *   `'blockedbyclient'` - The client chose to block the request.
    *   `'blockedbyresponse'` - The request failed because the response was delivered along with requirements which are not met ('X-Frame-Options' and 'Content-Security-Policy' ancestor checks, for instance).
    *   `'connectionaborted'` - A connection timed out as a result of not receiving an ACK for data sent.
    *   `'connectionclosed'` - A connection was closed (corresponding to a TCP FIN).
    *   `'connectionfailed'` - A connection attempt failed.
    *   `'connectionrefused'` - A connection attempt was refused.
    *   `'connectionreset'` - A connection was reset (corresponding to a TCP RST).
    *   `'internetdisconnected'` - The Internet connection has been lost.
    *   `'namenotresolved'` - The host name could not be resolved.
    *   `'timedout'` - An operation timed out.
    *   `'failed'` - A generic failure occurred.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#route-abort-return)

* * *

### continue[â€‹](#route-continue "Direct link to continue")

Added before v1.9 route.continue

Sends route's request to the network with optional overrides.

**Usage**

    await page.route('**/*', async (route, request) => {  // Override headers  const headers = {    ...request.headers(),    foo: 'foo-value', // set "foo" header    bar: undefined, // remove "bar" header  };  await route.continue({ headers });});

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#route-continue-option-headers)
        
        If set changes the request HTTP headers. Header values will be converted to a string.
        
    *   `method` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-continue-option-method)
        
        If set changes the request method (e.g. GET or POST).
        
    *   `postData` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#route-continue-option-post-data)
        
        If set changes the post data of request.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-continue-option-url)
        
        If set changes the request URL. New URL must have same protocol as original one.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#route-continue-return)

**Details**

The [headers](/docs/api/class-route#route-continue-option-headers) option applies to both the routed request and any redirects it initiates. However, [url](/docs/api/class-route#route-continue-option-url), [method](/docs/api/class-route#route-continue-option-method), and [postData](/docs/api/class-route#route-continue-option-post-data) only apply to the original request and are not carried over to redirected requests.

[route.continue()](/docs/api/class-route#route-continue) will immediately send the request to the network, other matching handlers won't be invoked. Use [route.fallback()](/docs/api/class-route#route-fallback) If you want next matching handler in the chain to be invoked.

warning

The `Cookie` header cannot be overridden using this method. If a value is provided, it will be ignored, and the cookie will be loaded from the browser's cookie store. To set custom cookies, use [browserContext.addCookies()](/docs/api/class-browsercontext#browser-context-add-cookies).

* * *

### fallback[â€‹](#route-fallback "Direct link to fallback")

Added in: v1.23 route.fallback

Continues route's request with optional overrides. The method is similar to [route.continue()](/docs/api/class-route#route-continue) with the difference that other matching handlers will be invoked before sending the request.

**Usage**

When several routes match the given pattern, they run in the order opposite to their registration. That way the last registered route can always override all the previous ones. In the example below, request will be handled by the bottom-most handler first, then it'll fall back to the previous one and in the end will be aborted by the first registered route.

    await page.route('**/*', async route => {  // Runs last.  await route.abort();});await page.route('**/*', async route => {  // Runs second.  await route.fallback();});await page.route('**/*', async route => {  // Runs first.  await route.fallback();});

Registering multiple routes is useful when you want separate handlers to handle different kinds of requests, for example API calls vs page resources or GET requests vs POST requests as in the example below.

    // Handle GET requests.await page.route('**/*', async route => {  if (route.request().method() !== 'GET') {    await route.fallback();    return;  }  // Handling GET only.  // ...});// Handle POST requests.await page.route('**/*', async route => {  if (route.request().method() !== 'POST') {    await route.fallback();    return;  }  // Handling POST only.  // ...});

One can also modify request while falling back to the subsequent handler, that way intermediate route handler can modify url, method, headers and postData of the request.

    await page.route('**/*', async (route, request) => {  // Override headers  const headers = {    ...request.headers(),    foo: 'foo-value', // set "foo" header    bar: undefined, // remove "bar" header  };  await route.fallback({ headers });});

Use [route.continue()](/docs/api/class-route#route-continue) to immediately send the request to the network, other matching handlers won't be invoked in that case.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#route-fallback-option-headers)
        
        If set changes the request HTTP headers. Header values will be converted to a string.
        
    *   `method` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-fallback-option-method)
        
        If set changes the request method (e.g. GET or POST).
        
    *   `postData` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#route-fallback-option-post-data)
        
        If set changes the post data of request.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-fallback-option-url)
        
        If set changes the request URL. New URL must have same protocol as original one. Changing the URL won't affect the route matching, all the routes are matched using the original request URL.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#route-fallback-return)

* * *

### fetch[â€‹](#route-fetch "Direct link to fetch")

Added in: v1.29 route.fetch

Performs the request and fetches result without fulfilling it, so that the response could be modified and then fulfilled.

**Usage**

    await page.route('https://dog.ceo/api/breeds/list/all', async route => {  const response = await route.fetch();  const json = await response.json();  json.message['big_red_dog'] = [];  await route.fulfill({ response, json });});

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#route-fetch-option-headers)
        
        If set changes the request HTTP headers. Header values will be converted to a string.
        
    *   `maxRedirects` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.31[#](#route-fetch-option-max-redirects)
        
        Maximum number of request redirects that will be followed automatically. An error will be thrown if the number is exceeded. Defaults to `20`. Pass `0` to not follow redirects.
        
    *   `maxRetries` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.46[#](#route-fetch-option-max-retries)
        
        Maximum number of times network errors should be retried. Currently only `ECONNRESET` error is retried. Does not retry based on HTTP response codes. An error will be thrown if the limit is exceeded. Defaults to `0` - no retries.
        
    *   `method` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-fetch-option-method)
        
        If set changes the request method (e.g. GET or POST).
        
    *   `postData` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") | [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_[#](#route-fetch-option-post-data)
        
        Allows to set post data of the request. If the data parameter is an object, it will be serialized to json string and `content-type` header will be set to `application/json` if not explicitly set. Otherwise the `content-type` header will be set to `application/octet-stream` if not explicitly set.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.33[#](#route-fetch-option-timeout)
        
        Request timeout in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-fetch-option-url)
        
        If set changes the request URL. New URL must have same protocol as original one.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[APIResponse](/docs/api/class-apiresponse "APIResponse")\>[#](#route-fetch-return)

**Details**

Note that [headers](/docs/api/class-route#route-fetch-option-headers) option will apply to the fetched request as well as any redirects initiated by it. If you want to only apply [headers](/docs/api/class-route#route-fetch-option-headers) to the original request, but not to redirects, look into [route.continue()](/docs/api/class-route#route-continue) instead.

* * *

### fulfill[â€‹](#route-fulfill "Direct link to fulfill")

Added before v1.9 route.fulfill

Fulfills route's request with given response.

**Usage**

An example of fulfilling all requests with 404 responses:

    await page.route('**/*', async route => {  await route.fulfill({    status: 404,    contentType: 'text/plain',    body: 'Not Found!'  });});

An example of serving static file:

    await page.route('**/xhr_endpoint', route => route.fulfill({ path: 'mock_data.json' }));

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `body` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_[#](#route-fulfill-option-body)
        
        Response body.
        
    *   `contentType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-fulfill-option-content-type)
        
        If set, equals to setting `Content-Type` response header.
        
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#route-fulfill-option-headers)
        
        Response headers. Header values will be converted to a string.
        
    *   `json` [Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") _(optional)_ Added in: v1.29[#](#route-fulfill-option-json)
        
        JSON response. This method will set the content type to `application/json` if not set.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#route-fulfill-option-path)
        
        File path to respond with. The content type will be inferred from file extension. If `path` is a relative path, then it is resolved relative to the current working directory.
        
    *   `response` [APIResponse](/docs/api/class-apiresponse "APIResponse") _(optional)_ Added in: v1.15[#](#route-fulfill-option-response)
        
        [APIResponse](/docs/api/class-apiresponse "APIResponse") to fulfill route's request with. Individual fields of the response (such as headers) can be overridden using fulfill options.
        
    *   `status` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#route-fulfill-option-status)
        
        Response status code, defaults to `200`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#route-fulfill-return)

* * *

### request[â€‹](#route-request "Direct link to request")

Added before v1.9 route.request

A request to be routed.

**Usage**

    route.request();

**Returns**

*   [Request](/docs/api/class-request "Request")[#](#route-request-return)

# Selectors

Selectors
=========

Selectors can be used to install custom selector engines. See [extensibility](/docs/extensibility) for more information.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### register[â€‹](#selectors-register "Direct link to register")

Added before v1.9 selectors.register

Selectors must be registered before creating the page.

**Usage**

An example of registering selector engine that queries elements based on a tag name:

    const { selectors, firefox } = require('@playwright/test');  // Or 'chromium' or 'webkit'.(async () => {  // Must be a function that evaluates to a selector engine instance.  const createTagNameEngine = () => ({    // Returns the first element matching given selector in the root's subtree.    query(root, selector) {      return root.querySelector(selector);    },    // Returns all elements matching given selector in the root's subtree.    queryAll(root, selector) {      return Array.from(root.querySelectorAll(selector));    }  });  // Register the engine. Selectors will be prefixed with "tag=".  await selectors.register('tag', createTagNameEngine);  const browser = await firefox.launch();  const page = await browser.newPage();  await page.setContent(`<div><button>Click me</button></div>`);  // Use the selector prefixed with its name.  const button = page.locator('tag=button');  // We can combine it with built-in locators.  await page.locator('tag=div').getByText('Click me').click();  // Can use it in any methods supporting selectors.  const buttonCount = await page.locator('tag=button').count();  await browser.close();})();

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#selectors-register-option-name)
    
    Name that is used in selectors as a prefix, e.g. `{name: 'foo'}` enables `foo=myselectorbody` selectors. May only contain `[a-zA-Z0-9_]` characters.
    
*   `script` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#selectors-register-option-script)
    
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Path to the JavaScript file. If `path` is a relative path, then it is resolved relative to the current working directory. Optional.
        
    *   `content` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Raw script content. Optional.
        
    
    Script that evaluates to a selector engine instance. The script is evaluated in the page context.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `contentScript` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#selectors-register-option-content-script)
        
        Whether to run this selector engine in isolated JavaScript environment. This environment has access to the same DOM, but not any JavaScript objects from the frame's scripts. Defaults to `false`. Note that running as a content script is not guaranteed when this engine is used together with other registered engines.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#selectors-register-return)

* * *

### setTestIdAttribute[â€‹](#selectors-set-test-id-attribute "Direct link to setTestIdAttribute")

Added in: v1.27 selectors.setTestIdAttribute

Defines custom attribute name to be used in [page.getByTestId()](/docs/api/class-page#page-get-by-test-id). `data-testid` is used by default.

**Usage**

    selectors.setTestIdAttribute(attributeName);

**Arguments**

*   `attributeName` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#selectors-set-test-id-attribute-option-attribute-name)
    
    Test id attribute name.

# TimeoutError

TimeoutError
============

*   extends: [Error](https://nodejs.org/api/errors.html#errors_class_error "Error")

TimeoutError is emitted whenever certain operations are terminated due to timeout, e.g. [locator.waitFor()](/docs/api/class-locator#locator-wait-for) or [browserType.launch()](/docs/api/class-browsertype#browser-type-launch).

    const playwright = require('playwright');(async () => {  const browser = await playwright.chromium.launch();  const context = await browser.newContext();  const page = await context.newPage();  try {    await page.locator('text=Foo').click({      timeout: 100,    });  } catch (error) {    if (error instanceof playwright.errors.TimeoutError)      console.log('Timeout!');  }  await browser.close();})();

# Touchscreen

Touchscreen
===========

The Touchscreen class operates in main-frame CSS pixels relative to the top-left corner of the viewport. Methods on the touchscreen can only be used in browser contexts that have been initialized with `hasTouch` set to true.

This class is limited to emulating tap gestures. For examples of other gestures simulated by manually dispatching touch events, see the [emulating legacy touch events](/docs/touch-events) page.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### tap[â€‹](#touchscreen-tap "Direct link to tap")

Added before v1.9 touchscreen.tap

Dispatches a `touchstart` and `touchend` event with a single touch at the position ([x](/docs/api/class-touchscreen#touchscreen-tap-option-x),[y](/docs/api/class-touchscreen#touchscreen-tap-option-y)).

note

[page.tap()](/docs/api/class-page#page-tap) the method will throw if [hasTouch](/docs/api/class-browser#browser-new-context-option-has-touch) option of the browser context is false.

**Usage**

    await touchscreen.tap(x, y);

**Arguments**

*   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#touchscreen-tap-option-x)
    
    X coordinate relative to the main frame's viewport in CSS pixels.
    
*   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#touchscreen-tap-option-y)
    
    Y coordinate relative to the main frame's viewport in CSS pixels.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#touchscreen-tap-return)

# Tracing

Tracing
=======

API for collecting and saving Playwright traces. Playwright traces can be opened in [Trace Viewer](/docs/trace-viewer) after Playwright script runs.

note

You probably want to [enable tracing in your config file](https://playwright.dev/docs/api/class-testoptions#test-options-trace) instead of using `context.tracing`.

The `context.tracing` API captures browser operations and network activity, but it doesn't record test assertions (like `expect` calls). We recommend [enabling tracing through Playwright Test configuration](https://playwright.dev/docs/api/class-testoptions#test-options-trace), which includes those assertions and provides a more complete trace for debugging test failures.

Start recording a trace before performing actions. At the end, stop tracing and save it to a file.

    const browser = await chromium.launch();const context = await browser.newContext();await context.tracing.start({ screenshots: true, snapshots: true });const page = await context.newPage();await page.goto('https://playwright.dev');expect(page.url()).toBe('https://playwright.dev');await context.tracing.stop({ path: 'trace.zip' });

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### group[â€‹](#tracing-group "Direct link to group")

Added in: v1.49 tracing.group

caution

Use `test.step` instead when available.

Creates a new group within the trace, assigning any subsequent API calls to this group, until [tracing.groupEnd()](/docs/api/class-tracing#tracing-group-end) is called. Groups can be nested and will be visible in the trace viewer.

**Usage**

    // use test.step insteadawait test.step('Log in', async () => {  // ...});

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#tracing-group-option-name)
    
    Group name shown in the trace viewer.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `location` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#tracing-group-option-location)
        
        *   `file` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `line` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
        *   `column` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
        
        Specifies a custom location for the group to be shown in the trace viewer. Defaults to the location of the [tracing.group()](/docs/api/class-tracing#tracing-group) call.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#tracing-group-return)

* * *

### groupEnd[â€‹](#tracing-group-end "Direct link to groupEnd")

Added in: v1.49 tracing.groupEnd

Closes the last group created by [tracing.group()](/docs/api/class-tracing#tracing-group).

**Usage**

    await tracing.groupEnd();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#tracing-group-end-return)

* * *

### start[â€‹](#tracing-start "Direct link to start")

Added in: v1.12 tracing.start

Start tracing.

note

You probably want to [enable tracing in your config file](https://playwright.dev/docs/api/class-testoptions#test-options-trace) instead of using `Tracing.start`.

The `context.tracing` API captures browser operations and network activity, but it doesn't record test assertions (like `expect` calls). We recommend [enabling tracing through Playwright Test configuration](https://playwright.dev/docs/api/class-testoptions#test-options-trace), which includes those assertions and provides a more complete trace for debugging test failures.

**Usage**

    await context.tracing.start({ screenshots: true, snapshots: true });const page = await context.newPage();await page.goto('https://playwright.dev');expect(page.url()).toBe('https://playwright.dev');await context.tracing.stop({ path: 'trace.zip' });

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#tracing-start-option-name)
        
        If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the [tracesDir](/docs/api/class-browsertype#browser-type-launch-option-traces-dir) directory specified in [browserType.launch()](/docs/api/class-browsertype#browser-type-launch). To specify the final trace zip file name, you need to pass `path` option to [tracing.stop()](/docs/api/class-tracing#tracing-stop) instead.
        
    *   `screenshots` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#tracing-start-option-screenshots)
        
        Whether to capture screenshots during tracing. Screenshots are used to build a timeline preview.
        
    *   `snapshots` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#tracing-start-option-snapshots)
        
        If this option is true tracing will
        
        *   capture DOM snapshot on every action
        *   record network activity
    *   `sources` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.17[#](#tracing-start-option-sources)
        
        Whether to include source files for trace actions.
        
    *   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.17[#](#tracing-start-option-title)
        
        Trace name to be shown in the Trace Viewer.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#tracing-start-return)

* * *

### startChunk[â€‹](#tracing-start-chunk "Direct link to startChunk")

Added in: v1.15 tracing.startChunk

Start a new trace chunk. If you'd like to record multiple traces on the same [BrowserContext](/docs/api/class-browsercontext "BrowserContext"), use [tracing.start()](/docs/api/class-tracing#tracing-start) once, and then create multiple trace chunks with [tracing.startChunk()](/docs/api/class-tracing#tracing-start-chunk) and [tracing.stopChunk()](/docs/api/class-tracing#tracing-stop-chunk).

**Usage**

    await context.tracing.start({ screenshots: true, snapshots: true });const page = await context.newPage();await page.goto('https://playwright.dev');await context.tracing.startChunk();await page.getByText('Get Started').click();// Everything between startChunk and stopChunk will be recorded in the trace.await context.tracing.stopChunk({ path: 'trace1.zip' });await context.tracing.startChunk();await page.goto('http://example.com');// Save a second trace file with different actions.await context.tracing.stopChunk({ path: 'trace2.zip' });

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.32[#](#tracing-start-chunk-option-name)
        
        If specified, intermediate trace files are going to be saved into the files with the given name prefix inside the [tracesDir](/docs/api/class-browsertype#browser-type-launch-option-traces-dir) directory specified in [browserType.launch()](/docs/api/class-browsertype#browser-type-launch). To specify the final trace zip file name, you need to pass `path` option to [tracing.stopChunk()](/docs/api/class-tracing#tracing-stop-chunk) instead.
        
    *   `title` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.17[#](#tracing-start-chunk-option-title)
        
        Trace name to be shown in the Trace Viewer.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#tracing-start-chunk-return)

* * *

### stop[â€‹](#tracing-stop "Direct link to stop")

Added in: v1.12 tracing.stop

Stop tracing.

**Usage**

    await tracing.stop();await tracing.stop(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#tracing-stop-option-path)
        
        Export trace into the file with the given path.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#tracing-stop-return)

* * *

### stopChunk[â€‹](#tracing-stop-chunk "Direct link to stopChunk")

Added in: v1.15 tracing.stopChunk

Stop the trace chunk. See [tracing.startChunk()](/docs/api/class-tracing#tracing-start-chunk) for more details about multiple trace chunks.

**Usage**

    await tracing.stopChunk();await tracing.stopChunk(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#tracing-stop-chunk-option-path)
        
        Export trace collected since the last [tracing.startChunk()](/docs/api/class-tracing#tracing-start-chunk) call into the file with the given path.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#tracing-stop-chunk-return)

# Video

Video
=====

When browser context is created with the `recordVideo` option, each page has a video object associated with it.

    console.log(await page.video().path());

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### delete[â€‹](#video-delete "Direct link to delete")

Added in: v1.11 video.delete

Deletes the video file. Will wait for the video to finish if necessary.

**Usage**

    await video.delete();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#video-delete-return)

* * *

### path[â€‹](#video-path "Direct link to path")

Added before v1.9 video.path

Returns the file system path this video will be recorded to. The video is guaranteed to be written to the filesystem upon closing the browser context. This method throws when connected remotely.

**Usage**

    await video.path();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#video-path-return)

* * *

### saveAs[â€‹](#video-save-as "Direct link to saveAs")

Added in: v1.11 video.saveAs

Saves the video to a user-specified path. It is safe to call this method while the video is still in progress, or after the page has closed. This method waits until the page is closed and the video is fully saved.

**Usage**

    await video.saveAs(path);

**Arguments**

*   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#video-save-as-option-path)
    
    Path where the video should be saved.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#video-save-as-return)

# WebError

WebError
========

[WebError](/docs/api/class-weberror "WebError") class represents an unhandled exception thrown in the page. It is dispatched via the [browserContext.on('weberror')](/docs/api/class-browsercontext#browser-context-event-web-error) event.

    // Log all uncaught errors to the terminalcontext.on('weberror', webError => {  console.log(`Uncaught exception: "${webError.error()}"`);});// Navigate to a page with an exception.await page.goto('data:text/html,<script>throw new Error("Test")</script>');

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### error[â€‹](#web-error-error "Direct link to error")

Added in: v1.38 webError.error

Unhandled error that was thrown.

**Usage**

    webError.error();

**Returns**

*   [Error](https://nodejs.org/api/errors.html#errors_class_error "Error")[#](#web-error-error-return)

* * *

### page[â€‹](#web-error-page "Direct link to page")

Added in: v1.38 webError.page

The page that produced this unhandled exception, if any.

**Usage**

    webError.page();

**Returns**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Page](/docs/api/class-page "Page")[#](#web-error-page-return)

# WebSocket

WebSocket
=========

The [WebSocket](/docs/api/class-websocket "WebSocket") class represents WebSocket connections within a page. It provides the ability to inspect and manipulate the data being transmitted and received.

If you want to intercept or modify WebSocket frames, consider using [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute").

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### isClosed[â€‹](#web-socket-is-closed "Direct link to isClosed")

Added before v1.9 webSocket.isClosed

Indicates that the web socket has been closed.

**Usage**

    webSocket.isClosed();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#web-socket-is-closed-return)

* * *

### url[â€‹](#web-socket-url "Direct link to url")

Added before v1.9 webSocket.url

Contains the URL of the WebSocket.

**Usage**

    webSocket.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#web-socket-url-return)

* * *

### waitForEvent[â€‹](#web-socket-wait-for-event "Direct link to waitForEvent")

Added before v1.9 webSocket.waitForEvent

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the webSocket is closed before the event is fired. Returns the event data value.

**Usage**

    await webSocket.waitForEvent(event);await webSocket.waitForEvent(event, optionsOrPredicate, options);

**Arguments**

*   `event` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#web-socket-wait-for-event-option-event)
    
    Event name, same one would pass into `webSocket.on(event)`.
    
*   `optionsOrPredicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#web-socket-wait-for-event-option-options-or-predicate)
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Maximum time to wait for in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    
    Either a predicate that receives an event or an options object. Optional.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") _(optional)_[#](#web-socket-wait-for-event-option-predicate)
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#web-socket-wait-for-event-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#web-socket-event-close "Direct link to on('close')")

Added before v1.9 webSocket.on('close')

Fired when the websocket closes.

**Usage**

    webSocket.on('close', data => {});

**Event data**

*   [WebSocket](/docs/api/class-websocket "WebSocket")

* * *

### on('framereceived')[â€‹](#web-socket-event-frame-received "Direct link to on('framereceived')")

Added in: v1.9 webSocket.on('framereceived')

Fired when the websocket receives a frame.

**Usage**

    webSocket.on('framereceived', data => {});

**Event data**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `payload` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        frame payload
        

* * *

### on('framesent')[â€‹](#web-socket-event-frame-sent "Direct link to on('framesent')")

Added in: v1.9 webSocket.on('framesent')

Fired when the websocket sends a frame.

**Usage**

    webSocket.on('framesent', data => {});

**Event data**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `payload` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")
        
        frame payload
        

* * *

### on('socketerror')[â€‹](#web-socket-event-socket-error "Direct link to on('socketerror')")

Added in: v1.9 webSocket.on('socketerror')

Fired when the websocket has an error.

**Usage**

    webSocket.on('socketerror', data => {});

**Event data**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

# WebSocketRoute

WebSocketRoute
==============

Whenever a [`WebSocket`](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket) route is set up with [page.routeWebSocket()](/docs/api/class-page#page-route-web-socket) or [browserContext.routeWebSocket()](/docs/api/class-browsercontext#browser-context-route-web-socket), the `WebSocketRoute` object allows to handle the WebSocket, like an actual server would do.

**Mocking**

By default, the routed WebSocket will not connect to the server. This way, you can mock entire communication over the WebSocket. Here is an example that responds to a `"request"` with a `"response"`.

    await page.routeWebSocket('wss://example.com/ws', ws => {  ws.onMessage(message => {    if (message === 'request')      ws.send('response');  });});

Since we do not call [webSocketRoute.connectToServer()](/docs/api/class-websocketroute#web-socket-route-connect-to-server) inside the WebSocket route handler, Playwright assumes that WebSocket will be mocked, and opens the WebSocket inside the page automatically.

Here is another example that handles JSON messages:

    await page.routeWebSocket('wss://example.com/ws', ws => {  ws.onMessage(message => {    const json = JSON.parse(message);    if (json.request === 'question')      ws.send(JSON.stringify({ response: 'answer' }));  });});

**Intercepting**

Alternatively, you may want to connect to the actual server, but intercept messages in-between and modify or block them. Calling [webSocketRoute.connectToServer()](/docs/api/class-websocketroute#web-socket-route-connect-to-server) returns a server-side `WebSocketRoute` instance that you can send messages to, or handle incoming messages.

Below is an example that modifies some messages sent by the page to the server. Messages sent from the server to the page are left intact, relying on the default forwarding.

    await page.routeWebSocket('/ws', ws => {  const server = ws.connectToServer();  ws.onMessage(message => {    if (message === 'request')      server.send('request2');    else      server.send(message);  });});

After connecting to the server, all **messages are forwarded** between the page and the server by default.

However, if you call [webSocketRoute.onMessage()](/docs/api/class-websocketroute#web-socket-route-on-message) on the original route, messages from the page to the server **will not be forwarded** anymore, but should instead be handled by the [handler](/docs/api/class-websocketroute#web-socket-route-on-message-option-handler).

Similarly, calling [webSocketRoute.onMessage()](/docs/api/class-websocketroute#web-socket-route-on-message) on the server-side WebSocket will **stop forwarding messages** from the server to the page, and [handler](/docs/api/class-websocketroute#web-socket-route-on-message-option-handler) should take care of them.

The following example blocks some messages in both directions. Since it calls [webSocketRoute.onMessage()](/docs/api/class-websocketroute#web-socket-route-on-message) in both directions, there is no automatic forwarding at all.

    await page.routeWebSocket('/ws', ws => {  const server = ws.connectToServer();  ws.onMessage(message => {    if (message !== 'blocked-from-the-page')      server.send(message);  });  server.onMessage(message => {    if (message !== 'blocked-from-the-server')      ws.send(message);  });});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### close[â€‹](#web-socket-route-close "Direct link to close")

Added in: v1.48 webSocketRoute.close

Closes one side of the WebSocket connection.

**Usage**

    await webSocketRoute.close();await webSocketRoute.close(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `code` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#web-socket-route-close-option-code)
        
        Optional [close code](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#code).
        
    *   `reason` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#web-socket-route-close-option-reason)
        
        Optional [close reason](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#reason).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#web-socket-route-close-return)

* * *

### connectToServer[â€‹](#web-socket-route-connect-to-server "Direct link to connectToServer")

Added in: v1.48 webSocketRoute.connectToServer

By default, routed WebSocket does not connect to the server, so you can mock entire WebSocket communication. This method connects to the actual WebSocket server, and returns the server-side [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute") instance, giving the ability to send and receive messages from the server.

Once connected to the server:

*   Messages received from the server will be **automatically forwarded** to the WebSocket in the page, unless [webSocketRoute.onMessage()](/docs/api/class-websocketroute#web-socket-route-on-message) is called on the server-side `WebSocketRoute`.
*   Messages sent by the [`WebSocket.send()`](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send) call in the page will be **automatically forwarded** to the server, unless [webSocketRoute.onMessage()](/docs/api/class-websocketroute#web-socket-route-on-message) is called on the original `WebSocketRoute`.

See examples at the top for more details.

**Usage**

    webSocketRoute.connectToServer();

**Returns**

*   [WebSocketRoute](/docs/api/class-websocketroute "WebSocketRoute")[#](#web-socket-route-connect-to-server-return)

* * *

### onClose[â€‹](#web-socket-route-on-close "Direct link to onClose")

Added in: v1.48 webSocketRoute.onClose

Allows to handle [`WebSocket.close`](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close).

By default, closing one side of the connection, either in the page or on the server, will close the other side. However, when [webSocketRoute.onClose()](/docs/api/class-websocketroute#web-socket-route-on-close) handler is set up, the default forwarding of closure is disabled, and handler should take care of it.

**Usage**

    webSocketRoute.onClose(handler);

**Arguments**

*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | \[undefined\]):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#web-socket-route-on-close-option-handler)
    
    Function that will handle WebSocket closure. Received an optional [close code](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#code) and an optional [close reason](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close#reason).
    

* * *

### onMessage[â€‹](#web-socket-route-on-message "Direct link to onMessage")

Added in: v1.48 webSocketRoute.onMessage

This method allows to handle messages that are sent by the WebSocket, either from the page or from the server.

When called on the original WebSocket route, this method handles messages sent from the page. You can handle this messages by responding to them with [webSocketRoute.send()](/docs/api/class-websocketroute#web-socket-route-send), forwarding them to the server-side connection returned by [webSocketRoute.connectToServer()](/docs/api/class-websocketroute#web-socket-route-connect-to-server) or do something else.

Once this method is called, messages are not automatically forwarded to the server or to the page - you should do that manually by calling [webSocketRoute.send()](/docs/api/class-websocketroute#web-socket-route-send). See examples at the top for more details.

Calling this method again will override the handler with a new one.

**Usage**

    webSocketRoute.onMessage(handler);

**Arguments**

*   `handler` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")):[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#web-socket-route-on-message-option-handler)
    
    Function that will handle messages.
    

* * *

### send[â€‹](#web-socket-route-send "Direct link to send")

Added in: v1.48 webSocketRoute.send

Sends a message to the WebSocket. When called on the original WebSocket, sends the message to the page. When called on the result of [webSocketRoute.connectToServer()](/docs/api/class-websocketroute#web-socket-route-connect-to-server), sends the message to the server. See examples at the top for more details.

**Usage**

    webSocketRoute.send(message);

**Arguments**

*   `message` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#web-socket-route-send-option-message)
    
    Message to send.
    

* * *

### url[â€‹](#web-socket-route-url "Direct link to url")

Added in: v1.48 webSocketRoute.url

URL of the WebSocket created in the page.

**Usage**

    webSocketRoute.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#web-socket-route-url-return)

# Worker

Worker
======

The Worker class represents a [WebWorker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API). `worker` event is emitted on the page object to signal a worker creation. `close` event is emitted on the worker object when the worker is gone.

    page.on('worker', worker => {  console.log('Worker created: ' + worker.url());  worker.on('close', worker => console.log('Worker destroyed: ' + worker.url()));});console.log('Current workers:');for (const worker of page.workers())  console.log('  ' + worker.url());

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### evaluate[â€‹](#worker-evaluate "Direct link to evaluate")

Added before v1.9 worker.evaluate

Returns the return value of [pageFunction](/docs/api/class-worker#worker-evaluate-option-expression).

If the function passed to the [worker.evaluate()](/docs/api/class-worker#worker-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [worker.evaluate()](/docs/api/class-worker#worker-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [worker.evaluate()](/docs/api/class-worker#worker-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [worker.evaluate()](/docs/api/class-worker#worker-evaluate) returns `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

    await worker.evaluate(pageFunction);await worker.evaluate(pageFunction, arg);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#worker-evaluate-option-expression)
    
    Function to be evaluated in the worker context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#worker-evaluate-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-worker#worker-evaluate-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#worker-evaluate-return)

* * *

### evaluateHandle[â€‹](#worker-evaluate-handle "Direct link to evaluateHandle")

Added before v1.9 worker.evaluateHandle

Returns the return value of [pageFunction](/docs/api/class-worker#worker-evaluate-handle-option-expression) as a [JSHandle](/docs/api/class-jshandle "JSHandle").

The only difference between [worker.evaluate()](/docs/api/class-worker#worker-evaluate) and [worker.evaluateHandle()](/docs/api/class-worker#worker-evaluate-handle) is that [worker.evaluateHandle()](/docs/api/class-worker#worker-evaluate-handle) returns [JSHandle](/docs/api/class-jshandle "JSHandle").

If the function passed to the [worker.evaluateHandle()](/docs/api/class-worker#worker-evaluate-handle) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [worker.evaluateHandle()](/docs/api/class-worker#worker-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

    await worker.evaluateHandle(pageFunction);await worker.evaluateHandle(pageFunction, arg);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#worker-evaluate-handle-option-expression)
    
    Function to be evaluated in the worker context.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#worker-evaluate-handle-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-worker#worker-evaluate-handle-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#worker-evaluate-handle-return)

* * *

### url[â€‹](#worker-url "Direct link to url")

Added before v1.9 worker.url

**Usage**

    worker.url();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#worker-url-return)

* * *

### waitForEvent[â€‹](#worker-wait-for-event "Direct link to waitForEvent")

Added in: v1.57 worker.waitForEvent

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the page is closed before the event is fired. Returns the event data value.

**Usage**

    // Start waiting for download before clicking. Note no await.const consolePromise = worker.waitForEvent('console');await worker.evaluate('console.log(42)');const consoleMessage = await consolePromise;

**Arguments**

*   `event` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#worker-wait-for-event-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `optionsOrPredicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#worker-wait-for-event-option-options-or-predicate)
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Maximum time to wait for in milliseconds. Defaults to `0` - no timeout. The default value can be changed via `actionTimeout` option in the config, or by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout) or [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout) methods.
        
    
    Either a predicate that receives an event or an options object. Optional.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") _(optional)_[#](#worker-wait-for-event-option-predicate)
        
        Receives the event data and resolves to truthy value when the waiting should resolve.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#worker-wait-for-event-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#worker-event-close "Direct link to on('close')")

Added before v1.9 worker.on('close')

Emitted when this dedicated [WebWorker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) is terminated.

**Usage**

    worker.on('close', data => {});

**Event data**

*   [Worker](/docs/api/class-worker "Worker")

* * *

### on('console')[â€‹](#worker-event-console "Direct link to on('console')")

Added in: v1.57 worker.on('console')

Emitted when JavaScript within the worker calls one of console API methods, e.g. `console.log` or `console.dir`.

**Usage**

    worker.on('console', data => {});

**Event data**

*   [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage")

# APIResponseAssertions

APIResponseAssertions
=====================

The [APIResponseAssertions](/docs/api/class-apiresponseassertions "APIResponseAssertions") class provides assertion methods that can be used to make assertions about the [APIResponse](/docs/api/class-apiresponse "APIResponse") in the tests.

    import { test, expect } from '@playwright/test';test('navigates to login', async ({ page }) => {  // ...  const response = await page.request.get('https://playwright.dev');  await expect(response).toBeOK();});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### toBeOK[â€‹](#api-response-assertions-to-be-ok "Direct link to toBeOK")

Added in: v1.18 apiResponseAssertions.toBeOK

Ensures the response status code is within `200..299` range.

**Usage**

    await expect(response).toBeOK();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#api-response-assertions-to-be-ok-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### not[â€‹](#api-response-assertions-not "Direct link to not")

Added in: v1.20 apiResponseAssertions.not

Makes the assertion check for the opposite condition. For example, this code tests that the response status is not successful:

    await expect(response).not.toBeOK();

**Usage**

    expect(response).not

**Type**

*   [APIResponseAssertions](/docs/api/class-apiresponseassertions "APIResponseAssertions")

# GenericAssertions

GenericAssertions
=================

The [GenericAssertions](/docs/api/class-genericassertions "GenericAssertions") class provides assertion methods that can be used to make assertions about any values in the tests. A new instance of [GenericAssertions](/docs/api/class-genericassertions "GenericAssertions") is created by calling [expect()](/docs/api/class-playwrightassertions#playwright-assertions-expect-generic):

    import { test, expect } from '@playwright/test';test('assert a value', async ({ page }) => {  const value = 1;  expect(value).toBe(2);});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### any[â€‹](#generic-assertions-any "Direct link to any")

Added in: v1.9 genericAssertions.any

`expect.any()` matches any object instance created from the [constructor](/docs/api/class-genericassertions#generic-assertions-any-option-constructor) or a corresponding primitive type. Use it inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching.

**Usage**

    // Match instance of a class.class Example {}expect(new Example()).toEqual(expect.any(Example));// Match any number.expect({ prop: 1 }).toEqual({ prop: expect.any(Number) });// Match any string.expect('abc').toEqual(expect.any(String));

**Arguments**

*   `constructor` [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#generic-assertions-any-option-constructor)
    
    Constructor of the expected object like `ExampleClass`, or a primitive boxed type like `Number`.
    

* * *

### anything[â€‹](#generic-assertions-anything "Direct link to anything")

Added in: v1.9 genericAssertions.anything

`expect.anything()` matches everything except `null` and `undefined`. Use it inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching.

**Usage**

    const value = { prop: 1 };expect(value).toEqual({ prop: expect.anything() });expect(value).not.toEqual({ otherProp: expect.anything() });

* * *

### arrayContaining[â€‹](#generic-assertions-array-containing "Direct link to arrayContaining")

Added in: v1.9 genericAssertions.arrayContaining

`expect.arrayContaining()` matches an array that contains all of the elements in the expected array, in any order. Note that received array may be a superset of the expected array and contain some extra elements.

Use this method inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching.

**Usage**

    expect([1, 2, 3]).toEqual(expect.arrayContaining([3, 1]));expect([1, 2, 3]).not.toEqual(expect.arrayContaining([1, 4]));

**Arguments**

*   `expected` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#generic-assertions-array-containing-option-expected)
    
    Expected array that is a subset of the received value.
    

* * *

### arrayOf[â€‹](#generic-assertions-array-of "Direct link to arrayOf")

Added in: v1.57 genericAssertions.arrayOf

`expect.arrayOf()` matches array of objects created from the [constructor](/docs/api/class-genericassertions#generic-assertions-array-of-option-constructor) or a corresponding primitive type. Use it inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching.

**Usage**

    // Match instance of a class.class Example {}expect([new Example(), new Example()]).toEqual(expect.arrayOf(Example));// Match any string.expect(['a', 'b', 'c']).toEqual(expect.arrayOf(String));

**Arguments**

*   `constructor` [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#generic-assertions-array-of-option-constructor)
    
    Constructor of the expected object like `ExampleClass`, or a primitive boxed type like `Number`.
    

* * *

### closeTo[â€‹](#generic-assertions-close-to "Direct link to closeTo")

Added in: v1.9 genericAssertions.closeTo

Compares floating point numbers for approximate equality. Use this method inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching. When just comparing two numbers, prefer [expect(value).toBeCloseTo()](/docs/api/class-genericassertions#generic-assertions-to-be-close-to).

**Usage**

    expect({ prop: 0.1 + 0.2 }).not.toEqual({ prop: 0.3 });expect({ prop: 0.1 + 0.2 }).toEqual({ prop: expect.closeTo(0.3, 5) });

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#generic-assertions-close-to-option-expected)
    
    Expected value.
    
*   `numDigits` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#generic-assertions-close-to-option-num-digits)
    
    The number of decimal digits after the decimal point that must be equal.
    

* * *

### objectContaining[â€‹](#generic-assertions-object-containing "Direct link to objectContaining")

Added in: v1.9 genericAssertions.objectContaining

`expect.objectContaining()` matches an object that contains and matches all of the properties in the expected object. Note that received object may be a superset of the expected object and contain some extra properties.

Use this method inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching. Object properties can be matchers to further relax the expectation. See examples.

**Usage**

    // Assert some of the properties.expect({ foo: 1, bar: 2 }).toEqual(expect.objectContaining({ foo: 1 }));// Matchers can be used on the properties as well.expect({ foo: 1, bar: 2 }).toEqual(expect.objectContaining({ bar: expect.any(Number) }));// Complex matching of sub-properties.expect({  list: [1, 2, 3],  obj: { prop: 'Hello world!', another: 'some other value' },  extra: 'extra',}).toEqual(expect.objectContaining({  list: expect.arrayContaining([2, 3]),  obj: expect.objectContaining({ prop: expect.stringContaining('Hello') }),}));

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#generic-assertions-object-containing-option-expected)
    
    Expected object pattern that contains a subset of the properties.
    

* * *

### stringContaining[â€‹](#generic-assertions-string-containing "Direct link to stringContaining")

Added in: v1.9 genericAssertions.stringContaining

`expect.stringContaining()` matches a string that contains the expected substring. Use this method inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching.

**Usage**

    expect('Hello world!').toEqual(expect.stringContaining('Hello'));

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#generic-assertions-string-containing-option-expected)
    
    Expected substring.
    

* * *

### stringMatching[â€‹](#generic-assertions-string-matching "Direct link to stringMatching")

Added in: v1.9 genericAssertions.stringMatching

`expect.stringMatching()` matches a received string that in turn matches the expected pattern. Use this method inside [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) to perform pattern matching.

**Usage**

    expect('123ms').toEqual(expect.stringMatching(/\d+m?s/));// Inside another matcher.expect({  status: 'passed',  time: '123ms',}).toEqual({  status: expect.stringMatching(/passed|failed/),  time: expect.stringMatching(/\d+m?s/),});

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#generic-assertions-string-matching-option-expected)
    
    Pattern that expected string should match.
    

* * *

### toBe[â€‹](#generic-assertions-to-be "Direct link to toBe")

Added in: v1.9 genericAssertions.toBe

Compares value with [expected](/docs/api/class-genericassertions#generic-assertions-to-be-option-expected) by calling `Object.is`. This method compares objects by reference instead of their contents, similarly to the strict equality operator `===`.

**Usage**

    const value = { prop: 1 };expect(value).toBe(value);expect(value).not.toBe({});expect(value.prop).toBe(1);

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#generic-assertions-to-be-option-expected)
    
    Expected value.
    

* * *

### toBeCloseTo[â€‹](#generic-assertions-to-be-close-to "Direct link to toBeCloseTo")

Added in: v1.9 genericAssertions.toBeCloseTo

Compares floating point numbers for approximate equality. Use this method instead of [expect(value).toBe()](/docs/api/class-genericassertions#generic-assertions-to-be) when comparing floating point numbers.

**Usage**

    expect(0.1 + 0.2).not.toBe(0.3);expect(0.1 + 0.2).toBeCloseTo(0.3, 5);

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#generic-assertions-to-be-close-to-option-expected)
    
    Expected value.
    
*   `numDigits` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#generic-assertions-to-be-close-to-option-num-digits)
    
    The number of decimal digits after the decimal point that must be equal.
    

* * *

### toBeDefined[â€‹](#generic-assertions-to-be-defined "Direct link to toBeDefined")

Added in: v1.9 genericAssertions.toBeDefined

Ensures that value is not `undefined`.

**Usage**

    const value = null;expect(value).toBeDefined();

* * *

### toBeFalsy[â€‹](#generic-assertions-to-be-falsy "Direct link to toBeFalsy")

Added in: v1.9 genericAssertions.toBeFalsy

Ensures that value is false in a boolean context, one of `false`, `0`, `''`, `null`, `undefined` or `NaN`. Use this method when you don't care about the specific value.

**Usage**

    const value = null;expect(value).toBeFalsy();

* * *

### toBeGreaterThan[â€‹](#generic-assertions-to-be-greater-than "Direct link to toBeGreaterThan")

Added in: v1.9 genericAssertions.toBeGreaterThan

Ensures that `value > expected` for number or big integer values.

**Usage**

    const value = 42;expect(value).toBeGreaterThan(1);

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | \[bigint\][#](#generic-assertions-to-be-greater-than-option-expected)
    
    The value to compare to.
    

* * *

### toBeGreaterThanOrEqual[â€‹](#generic-assertions-to-be-greater-than-or-equal "Direct link to toBeGreaterThanOrEqual")

Added in: v1.9 genericAssertions.toBeGreaterThanOrEqual

Ensures that `value >= expected` for number or big integer values.

**Usage**

    const value = 42;expect(value).toBeGreaterThanOrEqual(42);

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | \[bigint\][#](#generic-assertions-to-be-greater-than-or-equal-option-expected)
    
    The value to compare to.
    

* * *

### toBeInstanceOf[â€‹](#generic-assertions-to-be-instance-of "Direct link to toBeInstanceOf")

Added in: v1.9 genericAssertions.toBeInstanceOf

Ensures that value is an instance of a class. Uses `instanceof` operator.

**Usage**

    expect(page).toBeInstanceOf(Page);class Example {}expect(new Example()).toBeInstanceOf(Example);

**Arguments**

*   `expected` [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")[#](#generic-assertions-to-be-instance-of-option-expected)
    
    The class or constructor function.
    

* * *

### toBeLessThan[â€‹](#generic-assertions-to-be-less-than "Direct link to toBeLessThan")

Added in: v1.9 genericAssertions.toBeLessThan

Ensures that `value < expected` for number or big integer values.

**Usage**

    const value = 42;expect(value).toBeLessThan(100);

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | \[bigint\][#](#generic-assertions-to-be-less-than-option-expected)
    
    The value to compare to.
    

* * *

### toBeLessThanOrEqual[â€‹](#generic-assertions-to-be-less-than-or-equal "Direct link to toBeLessThanOrEqual")

Added in: v1.9 genericAssertions.toBeLessThanOrEqual

Ensures that `value <= expected` for number or big integer values.

**Usage**

    const value = 42;expect(value).toBeLessThanOrEqual(42);

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | \[bigint\][#](#generic-assertions-to-be-less-than-or-equal-option-expected)
    
    The value to compare to.
    

* * *

### toBeNaN[â€‹](#generic-assertions-to-be-na-n "Direct link to toBeNaN")

Added in: v1.9 genericAssertions.toBeNaN

Ensures that value is `NaN`.

**Usage**

    const value = NaN;expect(value).toBeNaN();

* * *

### toBeNull[â€‹](#generic-assertions-to-be-null "Direct link to toBeNull")

Added in: v1.9 genericAssertions.toBeNull

Ensures that value is `null`.

**Usage**

    const value = null;expect(value).toBeNull();

* * *

### toBeTruthy[â€‹](#generic-assertions-to-be-truthy "Direct link to toBeTruthy")

Added in: v1.9 genericAssertions.toBeTruthy

Ensures that value is true in a boolean context, **anything but** `false`, `0`, `''`, `null`, `undefined` or `NaN`. Use this method when you don't care about the specific value.

**Usage**

    const value = { example: 'value' };expect(value).toBeTruthy();

* * *

### toBeUndefined[â€‹](#generic-assertions-to-be-undefined "Direct link to toBeUndefined")

Added in: v1.9 genericAssertions.toBeUndefined

Ensures that value is `undefined`.

**Usage**

    const value = undefined;expect(value).toBeUndefined();

* * *

### toContain(expected)[â€‹](#generic-assertions-to-contain-1 "Direct link to toContain(expected)")

Added in: v1.9 genericAssertions.toContain(expected)

Ensures that string value contains an expected substring. Comparison is case-sensitive.

**Usage**

    const value = 'Hello, World';expect(value).toContain('World');expect(value).toContain(',');

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#generic-assertions-to-contain-1-option-expected)
    
    Expected substring.
    

* * *

### toContain(expected)[â€‹](#generic-assertions-to-contain-2 "Direct link to toContain(expected)")

Added in: v1.9 genericAssertions.toContain(expected)

Ensures that value is an `Array` or `Set` and contains an expected item.

**Usage**

    const value = [1, 2, 3];expect(value).toContain(2);expect(new Set(value)).toContain(2);

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#generic-assertions-to-contain-2-option-expected)
    
    Expected value in the collection.
    

* * *

### toContainEqual[â€‹](#generic-assertions-to-contain-equal "Direct link to toContainEqual")

Added in: v1.9 genericAssertions.toContainEqual

Ensures that value is an `Array` or `Set` and contains an item equal to the expected.

For objects, this method recursively checks equality of all fields, rather than comparing objects by reference as performed by [expect(value).toContain()](/docs/api/class-genericassertions#generic-assertions-to-contain-2).

For primitive values, this method is equivalent to [expect(value).toContain()](/docs/api/class-genericassertions#generic-assertions-to-contain-2).

**Usage**

    const value = [  { example: 1 },  { another: 2 },  { more: 3 },];expect(value).toContainEqual({ another: 2 });expect(new Set(value)).toContainEqual({ another: 2 });

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#generic-assertions-to-contain-equal-option-expected)
    
    Expected value in the collection.
    

* * *

### toEqual[â€‹](#generic-assertions-to-equal "Direct link to toEqual")

Added in: v1.9 genericAssertions.toEqual

Compares contents of the value with contents of [expected](/docs/api/class-genericassertions#generic-assertions-to-equal-option-expected), performing "deep equality" check.

For objects, this method recursively checks equality of all fields, rather than comparing objects by reference as performed by [expect(value).toBe()](/docs/api/class-genericassertions#generic-assertions-to-be).

For primitive values, this method is equivalent to [expect(value).toBe()](/docs/api/class-genericassertions#generic-assertions-to-be).

**Usage**

    const value = { prop: 1 };expect(value).toEqual({ prop: 1 });

**Non-strict equality**

[expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) performs deep equality check that compares contents of the received and expected values. To ensure two objects reference the same instance, use [expect(value).toBe()](/docs/api/class-genericassertions#generic-assertions-to-be) instead.

[expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) ignores `undefined` properties and array items, and does not insist on object types being equal. For stricter matching, use [expect(value).toStrictEqual()](/docs/api/class-genericassertions#generic-assertions-to-strict-equal).

**Pattern matching**

[expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal) can be also used to perform pattern matching on objects, arrays and primitive types, with the help of the following matchers:

*   [expect(value).any()](/docs/api/class-genericassertions#generic-assertions-any)
*   [expect(value).anything()](/docs/api/class-genericassertions#generic-assertions-anything)
*   [expect(value).arrayContaining()](/docs/api/class-genericassertions#generic-assertions-array-containing)
*   [expect(value).arrayOf()](/docs/api/class-genericassertions#generic-assertions-array-of)
*   [expect(value).closeTo()](/docs/api/class-genericassertions#generic-assertions-close-to)
*   [expect(value).objectContaining()](/docs/api/class-genericassertions#generic-assertions-object-containing)
*   [expect(value).stringContaining()](/docs/api/class-genericassertions#generic-assertions-string-containing)
*   [expect(value).stringMatching()](/docs/api/class-genericassertions#generic-assertions-string-matching)

Here is an example that asserts some of the values inside a complex object:

    expect({  list: [1, 2, 3],  obj: { prop: 'Hello world!', another: 'some other value' },  extra: 'extra',}).toEqual(expect.objectContaining({  list: expect.arrayContaining([2, 3]),  obj: expect.objectContaining({ prop: expect.stringContaining('Hello') }),}));

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#generic-assertions-to-equal-option-expected)
    
    Expected value.
    

* * *

### toHaveLength[â€‹](#generic-assertions-to-have-length "Direct link to toHaveLength")

Added in: v1.9 genericAssertions.toHaveLength

Ensures that value has a `.length` property equal to [expected](/docs/api/class-genericassertions#generic-assertions-to-have-length-option-expected). Useful for arrays and strings.

**Usage**

    expect('Hello, World').toHaveLength(12);expect([1, 2, 3]).toHaveLength(3);

**Arguments**

*   `expected` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#generic-assertions-to-have-length-option-expected)
    
    Expected length.
    

* * *

### toHaveProperty[â€‹](#generic-assertions-to-have-property "Direct link to toHaveProperty")

Added in: v1.9 genericAssertions.toHaveProperty

Ensures that property at provided `keyPath` exists on the object and optionally checks that property is equal to the [expected](/docs/api/class-genericassertions#generic-assertions-to-have-property-option-expected). Equality is checked recursively, similarly to [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal).

**Usage**

    const value = {  a: {    b: [42],  },  c: true,};expect(value).toHaveProperty('a.b');expect(value).toHaveProperty('a.b', [42]);expect(value).toHaveProperty('a.b[0]', 42);expect(value).toHaveProperty('c');expect(value).toHaveProperty('c', true);

**Arguments**

*   `keyPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#generic-assertions-to-have-property-option-key-path)
    
    Path to the property. Use dot notation `a.b` to check nested properties and indexed `a[2]` notation to check nested array items.
    
*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#generic-assertions-to-have-property-option-expected)
    
    Optional expected value to compare the property to.
    

* * *

### toMatch[â€‹](#generic-assertions-to-match "Direct link to toMatch")

Added in: v1.9 genericAssertions.toMatch

Ensures that string value matches a regular expression.

**Usage**

    const value = 'Is 42 enough?';expect(value).toMatch(/Is \d+ enough/);

**Arguments**

*   `expected` [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#generic-assertions-to-match-option-expected)
    
    Regular expression to match against.
    

* * *

### toMatchObject[â€‹](#generic-assertions-to-match-object "Direct link to toMatchObject")

Added in: v1.9 genericAssertions.toMatchObject

Compares contents of the value with contents of [expected](/docs/api/class-genericassertions#generic-assertions-to-match-object-option-expected), performing "deep equality" check. Allows extra properties to be present in the value, unlike [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal), so you can check just a subset of object properties.

When comparing arrays, the number of items must match, and each item is checked recursively.

**Usage**

    const value = {  a: 1,  b: 2,  c: true,};expect(value).toMatchObject({ a: 1, c: true });expect(value).toMatchObject({ b: 2, c: true });expect([{ a: 1, b: 2 }]).toMatchObject([{ a: 1 }]);

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")[#](#generic-assertions-to-match-object-option-expected)
    
    The expected object value to match against.
    

* * *

### toStrictEqual[â€‹](#generic-assertions-to-strict-equal "Direct link to toStrictEqual")

Added in: v1.9 genericAssertions.toStrictEqual

Compares contents of the value with contents of [expected](/docs/api/class-genericassertions#generic-assertions-to-strict-equal-option-expected) **and** their types.

Differences from [expect(value).toEqual()](/docs/api/class-genericassertions#generic-assertions-to-equal):

*   Keys with undefined properties are checked. For example, `{ a: undefined, b: 2 }` does not match `{ b: 2 }`.
*   Array sparseness is checked. For example, `[, 1]` does not match `[undefined, 1]`.
*   Object types are checked to be equal. For example, a class instance with fields `a` and `b` will not equal a literal object with fields `a` and `b`.

**Usage**

    const value = { prop: 1 };expect(value).toStrictEqual({ prop: 1 });

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#generic-assertions-to-strict-equal-option-expected)
    
    Expected value.
    

* * *

### toThrow[â€‹](#generic-assertions-to-throw "Direct link to toThrow")

Added in: v1.9 genericAssertions.toThrow

Calls the function and ensures it throws an error.

Optionally compares the error with [expected](/docs/api/class-genericassertions#generic-assertions-to-throw-option-expected). Allowed expected values:

*   Regular expression - error message should **match** the pattern.
*   String - error message should **include** the substring.
*   Error object - error message should be **equal to** the message property of the object.
*   Error class - error object should be an **instance of** the class.

**Usage**

    expect(() => {  throw new Error('Something bad');}).toThrow();expect(() => {  throw new Error('Something bad');}).toThrow(/something/);expect(() => {  throw new Error('Something bad');}).toThrow(Error);

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#generic-assertions-to-throw-option-expected)
    
    Expected error message or error object.
    

* * *

### toThrowError[â€‹](#generic-assertions-to-throw-error "Direct link to toThrowError")

Added in: v1.9 genericAssertions.toThrowError

An alias for [expect(value).toThrow()](/docs/api/class-genericassertions#generic-assertions-to-throw).

**Usage**

    expect(() => {  throw new Error('Something bad');}).toThrowError();

**Arguments**

*   `expected` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#generic-assertions-to-throw-error-option-expected)
    
    Expected error message or error object.
    

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### not[â€‹](#generic-assertions-not "Direct link to not")

Added in: v1.9 genericAssertions.not

Makes the assertion check for the opposite condition. For example, the following code passes:

    const value = 1;expect(value).not.toBe(2);

**Usage**

    expect(value).not

**Type**

*   [GenericAssertions](/docs/api/class-genericassertions "GenericAssertions")

# LocatorAssertions

LocatorAssertions
=================

The [LocatorAssertions](/docs/api/class-locatorassertions "LocatorAssertions") class provides assertion methods that can be used to make assertions about the [Locator](/docs/api/class-locator "Locator") state in the tests.

    import { test, expect } from '@playwright/test';test('status becomes submitted', async ({ page }) => {  // ...  await page.getByRole('button').click();  await expect(page.locator('.status')).toHaveText('Submitted');});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### toBeAttached[â€‹](#locator-assertions-to-be-attached "Direct link to toBeAttached")

Added in: v1.33 locatorAssertions.toBeAttached

Ensures that [Locator](/docs/api/class-locator "Locator") points to an element that is [connected](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected) to a Document or a ShadowRoot.

**Usage**

    await expect(page.getByText('Hidden text')).toBeAttached();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `attached` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-assertions-to-be-attached-option-attached)
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-be-attached-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-attached-return)

* * *

### toBeChecked[â€‹](#locator-assertions-to-be-checked "Direct link to toBeChecked")

Added in: v1.20 locatorAssertions.toBeChecked

Ensures the [Locator](/docs/api/class-locator "Locator") points to a checked input.

**Usage**

    const locator = page.getByLabel('Subscribe to newsletter');await expect(locator).toBeChecked();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `checked` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-checked-option-checked)
        
        Provides state to assert for. Asserts for input to be checked by default. This option can't be used when [indeterminate](/docs/api/class-locatorassertions#locator-assertions-to-be-checked-option-indeterminate) is set to true.
        
    *   `indeterminate` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.50[#](#locator-assertions-to-be-checked-option-indeterminate)
        
        Asserts that the element is in the indeterminate (mixed) state. Only supported for checkboxes and radio buttons. This option can't be true when [checked](/docs/api/class-locatorassertions#locator-assertions-to-be-checked-option-checked) is provided.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-checked-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-checked-return)

* * *

### toBeDisabled[â€‹](#locator-assertions-to-be-disabled "Direct link to toBeDisabled")

Added in: v1.20 locatorAssertions.toBeDisabled

Ensures the [Locator](/docs/api/class-locator "Locator") points to a disabled element. Element is disabled if it has "disabled" attribute or is disabled via ['aria-disabled'](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-disabled). Note that only native control elements such as HTML `button`, `input`, `select`, `textarea`, `option`, `optgroup` can be disabled by setting "disabled" attribute. "disabled" attribute on other elements is ignored by the browser.

**Usage**

    const locator = page.locator('button.submit');await expect(locator).toBeDisabled();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-disabled-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-disabled-return)

* * *

### toBeEditable[â€‹](#locator-assertions-to-be-editable "Direct link to toBeEditable")

Added in: v1.20 locatorAssertions.toBeEditable

Ensures the [Locator](/docs/api/class-locator "Locator") points to an editable element.

**Usage**

    const locator = page.getByRole('textbox');await expect(locator).toBeEditable();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `editable` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.26[#](#locator-assertions-to-be-editable-option-editable)
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-editable-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-editable-return)

* * *

### toBeEmpty[â€‹](#locator-assertions-to-be-empty "Direct link to toBeEmpty")

Added in: v1.20 locatorAssertions.toBeEmpty

Ensures the [Locator](/docs/api/class-locator "Locator") points to an empty editable element or to a DOM node that has no text.

**Usage**

    const locator = page.locator('div.warning');await expect(locator).toBeEmpty();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-empty-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-empty-return)

* * *

### toBeEnabled[â€‹](#locator-assertions-to-be-enabled "Direct link to toBeEnabled")

Added in: v1.20 locatorAssertions.toBeEnabled

Ensures the [Locator](/docs/api/class-locator "Locator") points to an enabled element.

**Usage**

    const locator = page.locator('button.submit');await expect(locator).toBeEnabled();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `enabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.26[#](#locator-assertions-to-be-enabled-option-enabled)
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-enabled-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-enabled-return)

* * *

### toBeFocused[â€‹](#locator-assertions-to-be-focused "Direct link to toBeFocused")

Added in: v1.20 locatorAssertions.toBeFocused

Ensures the [Locator](/docs/api/class-locator "Locator") points to a focused DOM node.

**Usage**

    const locator = page.getByRole('textbox');await expect(locator).toBeFocused();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-focused-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-focused-return)

* * *

### toBeHidden[â€‹](#locator-assertions-to-be-hidden "Direct link to toBeHidden")

Added in: v1.20 locatorAssertions.toBeHidden

Ensures that [Locator](/docs/api/class-locator "Locator") either does not resolve to any DOM node, or resolves to a [non-visible](/docs/actionability#visible) one.

**Usage**

    const locator = page.locator('.my-element');await expect(locator).toBeHidden();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-hidden-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-hidden-return)

* * *

### toBeInViewport[â€‹](#locator-assertions-to-be-in-viewport "Direct link to toBeInViewport")

Added in: v1.31 locatorAssertions.toBeInViewport

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element that intersects viewport, according to the [intersection observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).

**Usage**

    const locator = page.getByRole('button');// Make sure at least some part of element intersects viewport.await expect(locator).toBeInViewport();// Make sure element is fully outside of viewport.await expect(locator).not.toBeInViewport();// Make sure that at least half of the element intersects viewport.await expect(locator).toBeInViewport({ ratio: 0.5 });

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `ratio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-be-in-viewport-option-ratio)
        
        The minimal ratio of the element to intersect viewport. If equals to `0`, then element should intersect viewport at any positive ratio. Defaults to `0`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-be-in-viewport-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-in-viewport-return)

* * *

### toBeVisible[â€‹](#locator-assertions-to-be-visible "Direct link to toBeVisible")

Added in: v1.20 locatorAssertions.toBeVisible

Ensures that [Locator](/docs/api/class-locator "Locator") points to an attached and [visible](/docs/actionability#visible) DOM node.

To check that at least one element from the list is visible, use [locator.first()](/docs/api/class-locator#locator-first).

**Usage**

    // A specific element is visible.await expect(page.getByText('Welcome')).toBeVisible();// At least one item in the list is visible.await expect(page.getByTestId('todo-item').first()).toBeVisible();// At least one of the two elements is visible, possibly both.await expect(    page.getByRole('button', { name: 'Sign in' })        .or(page.getByRole('button', { name: 'Sign up' }))        .first()).toBeVisible();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-be-visible-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        
    *   `visible` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.26[#](#locator-assertions-to-be-visible-option-visible)
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-be-visible-return)

* * *

### toContainClass[â€‹](#locator-assertions-to-contain-class "Direct link to toContainClass")

Added in: v1.52 locatorAssertions.toContainClass

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with given CSS classes. All classes from the asserted value, separated by spaces, must be present in the [Element.classList](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList) in any order.

**Usage**

    <div class='middle selected row' id='component'></div>

    const locator = page.locator('#component');await expect(locator).toContainClass('middle selected row');await expect(locator).toContainClass('selected');await expect(locator).toContainClass('row middle');

When an array is passed, the method asserts that the list of elements located matches the corresponding list of expected class lists. Each element's class attribute is matched against the corresponding class in the array:

    <div class='list'>  <div class='component inactive'></div>  <div class='component active'></div>  <div class='component inactive'></div></div>

    const locator = page.locator('.list > .component');await expect(locator).toContainClass(['inactive', 'active', 'inactive']);

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-assertions-to-contain-class-option-expected)
    
    A string containing expected class names, separated by spaces, or a list of such strings to assert multiple elements.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-contain-class-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-contain-class-return)

* * *

### toContainText[â€‹](#locator-assertions-to-contain-text "Direct link to toContainText")

Added in: v1.20 locatorAssertions.toContainText

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element that contains the given text. All nested elements will be considered when computing the text content of the element. You can use regular expressions for the value as well.

**Usage**

    const locator = page.locator('.title');await expect(locator).toContainText('substring');await expect(locator).toContainText(/\d messages/);

If you pass an array as an expected value, the expectations are:

1.  Locator resolves to a list of elements.
2.  Elements from a **subset** of this list contain text from the expected array, respectively.
3.  The matching subset of elements has the same order as the expected array.
4.  Each text value from the expected array is matched by some element from the list.

For example, consider the following list:

    <ul>  <li>Item Text 1</li>  <li>Item Text 2</li>  <li>Item Text 3</li></ul>

Let's see how we can use the assertion:

    // âœ“ Contains the right items in the right orderawait expect(page.locator('ul > li')).toContainText(['Text 1', 'Text 3']);// âœ– Wrong orderawait expect(page.locator('ul > li')).toContainText(['Text 3', 'Text 2']);// âœ– No item contains this textawait expect(page.locator('ul > li')).toContainText(['Some 33']);// âœ– Locator points to the outer list element, not to the list itemsawait expect(page.locator('ul')).toContainText(['Text 3']);

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\> Added in: v1.18[#](#locator-assertions-to-contain-text-option-expected)
    
    Expected substring or RegExp or a list of those.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.23[#](#locator-assertions-to-contain-text-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-locatorassertions#locator-assertions-to-contain-text-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-contain-text-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        
    *   `useInnerText` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.18[#](#locator-assertions-to-contain-text-option-use-inner-text)
        
        Whether to use `element.innerText` instead of `element.textContent` when retrieving DOM node text.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-contain-text-return)

**Details**

When `expected` parameter is a string, Playwright will normalize whitespaces and line breaks both in the actual text and in the expected string before matching. When regular expression is used, the actual text is matched as is.

* * *

### toHaveAccessibleDescription[â€‹](#locator-assertions-to-have-accessible-description "Direct link to toHaveAccessibleDescription")

Added in: v1.44 locatorAssertions.toHaveAccessibleDescription

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with a given [accessible description](https://w3c.github.io/accname/#dfn-accessible-description).

**Usage**

    const locator = page.getByTestId('save-button');await expect(locator).toHaveAccessibleDescription('Save results to disk');

**Arguments**

*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-assertions-to-have-accessible-description-option-description)
    
    Expected accessible description.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-assertions-to-have-accessible-description-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-description-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-accessible-description-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-accessible-description-return)

* * *

### toHaveAccessibleErrorMessage[â€‹](#locator-assertions-to-have-accessible-error-message "Direct link to toHaveAccessibleErrorMessage")

Added in: v1.50 locatorAssertions.toHaveAccessibleErrorMessage

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with a given [aria errormessage](https://w3c.github.io/aria/#aria-errormessage).

**Usage**

    const locator = page.getByTestId('username-input');await expect(locator).toHaveAccessibleErrorMessage('Username is required.');

**Arguments**

*   `errorMessage` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-assertions-to-have-accessible-error-message-option-error-message)
    
    Expected accessible error message.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-assertions-to-have-accessible-error-message-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-error-message-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-accessible-error-message-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-accessible-error-message-return)

* * *

### toHaveAccessibleName[â€‹](#locator-assertions-to-have-accessible-name "Direct link to toHaveAccessibleName")

Added in: v1.44 locatorAssertions.toHaveAccessibleName

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with a given [accessible name](https://w3c.github.io/accname/#dfn-accessible-name).

**Usage**

    const locator = page.getByTestId('save-button');await expect(locator).toHaveAccessibleName('Save to disk');

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")[#](#locator-assertions-to-have-accessible-name-option-name)
    
    Expected accessible name.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-assertions-to-have-accessible-name-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-locatorassertions#locator-assertions-to-have-accessible-name-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-accessible-name-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-accessible-name-return)

* * *

### toHaveAttribute(name, value)[â€‹](#locator-assertions-to-have-attribute "Direct link to toHaveAttribute(name, value)")

Added in: v1.20 locatorAssertions.toHaveAttribute(name, value)

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with given attribute.

**Usage**

    const locator = page.locator('input');await expect(locator).toHaveAttribute('type', 'text');

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") Added in: v1.18[#](#locator-assertions-to-have-attribute-option-name)
    
    Attribute name.
    
*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") Added in: v1.18[#](#locator-assertions-to-have-attribute-option-value)
    
    Expected attribute value.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.40[#](#locator-assertions-to-have-attribute-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-locatorassertions#locator-assertions-to-have-attribute-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-attribute-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-attribute-return)

* * *

### toHaveAttribute(name)[â€‹](#locator-assertions-to-have-attribute-2 "Direct link to toHaveAttribute(name)")

Added in: v1.39 locatorAssertions.toHaveAttribute(name)

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with given attribute. The method will assert attribute presence.

    const locator = page.locator('input');// Assert attribute existence.await expect(locator).toHaveAttribute('disabled');await expect(locator).not.toHaveAttribute('open');

**Usage**

    await expect(locator).toHaveAttribute(name);await expect(locator).toHaveAttribute(name, options);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-assertions-to-have-attribute-2-option-name)
    
    Attribute name.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-attribute-2-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-attribute-2-return)

* * *

### toHaveClass[â€‹](#locator-assertions-to-have-class "Direct link to toHaveClass")

Added in: v1.20 locatorAssertions.toHaveClass

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with given CSS classes. When a string is provided, it must fully match the element's `class` attribute. To match individual classes use [expect(locator).toContainClass()](/docs/api/class-locatorassertions#locator-assertions-to-contain-class).

**Usage**

    <div class='middle selected row' id='component'></div>

    const locator = page.locator('#component');await expect(locator).toHaveClass('middle selected row');await expect(locator).toHaveClass(/(^|\s)selected(\s|$)/);

When an array is passed, the method asserts that the list of elements located matches the corresponding list of expected class values. Each element's class attribute is matched against the corresponding string or regular expression in the array:

    const locator = page.locator('.list > .component');await expect(locator).toHaveClass(['component', 'component selected', 'component']);

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\> Added in: v1.18[#](#locator-assertions-to-have-class-option-expected)
    
    Expected class or RegExp or a list of those.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-class-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-class-return)

* * *

### toHaveCount[â€‹](#locator-assertions-to-have-count "Direct link to toHaveCount")

Added in: v1.20 locatorAssertions.toHaveCount

Ensures the [Locator](/docs/api/class-locator "Locator") resolves to an exact number of DOM nodes.

**Usage**

    const list = page.locator('list > .component');await expect(list).toHaveCount(3);

**Arguments**

*   `count` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") Added in: v1.18[#](#locator-assertions-to-have-count-option-count)
    
    Expected count.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-count-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-count-return)

* * *

### toHaveCSS[â€‹](#locator-assertions-to-have-css "Direct link to toHaveCSS")

Added in: v1.20 locatorAssertions.toHaveCSS

Ensures the [Locator](/docs/api/class-locator "Locator") resolves to an element with the given computed CSS style.

**Usage**

    const locator = page.getByRole('button');await expect(locator).toHaveCSS('display', 'flex');

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") Added in: v1.18[#](#locator-assertions-to-have-css-option-name)
    
    CSS property name.
    
*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") Added in: v1.18[#](#locator-assertions-to-have-css-option-value)
    
    CSS property value.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-css-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-css-return)

* * *

### toHaveId[â€‹](#locator-assertions-to-have-id "Direct link to toHaveId")

Added in: v1.20 locatorAssertions.toHaveId

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with the given DOM Node ID.

**Usage**

    const locator = page.getByRole('textbox');await expect(locator).toHaveId('lastname');

**Arguments**

*   `id` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") Added in: v1.18[#](#locator-assertions-to-have-id-option-id)
    
    Element id.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-id-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-id-return)

* * *

### toHaveJSProperty[â€‹](#locator-assertions-to-have-js-property "Direct link to toHaveJSProperty")

Added in: v1.20 locatorAssertions.toHaveJSProperty

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with given JavaScript property. Note that this property can be of a primitive type as well as a plain serializable JavaScript object.

**Usage**

    const locator = page.locator('.component');await expect(locator).toHaveJSProperty('loaded', true);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") Added in: v1.18[#](#locator-assertions-to-have-js-property-option-name)
    
    Property name.
    
*   `value` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") Added in: v1.18[#](#locator-assertions-to-have-js-property-option-value)
    
    Property value.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-js-property-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-js-property-return)

* * *

### toHaveRole[â€‹](#locator-assertions-to-have-role "Direct link to toHaveRole")

Added in: v1.44 locatorAssertions.toHaveRole

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with a given [ARIA role](https://www.w3.org/TR/wai-aria-1.2/#roles).

Note that role is matched as a string, disregarding the ARIA role hierarchy. For example, asserting a superclass role `"checkbox"` on an element with a subclass role `"switch"` will fail.

**Usage**

    const locator = page.getByTestId('save-button');await expect(locator).toHaveRole('button');

**Arguments**

*   `role` "alert" | "alertdialog" | "application" | "article" | "banner" | "blockquote" | "button" | "caption" | "cell" | "checkbox" | "code" | "columnheader" | "combobox" | "complementary" | "contentinfo" | "definition" | "deletion" | "dialog" | "directory" | "document" | "emphasis" | "feed" | "figure" | "form" | "generic" | "grid" | "gridcell" | "group" | "heading" | "img" | "insertion" | "link" | "list" | "listbox" | "listitem" | "log" | "main" | "marquee" | "math" | "meter" | "menu" | "menubar" | "menuitem" | "menuitemcheckbox" | "menuitemradio" | "navigation" | "none" | "note" | "option" | "paragraph" | "presentation" | "progressbar" | "radio" | "radiogroup" | "region" | "row" | "rowgroup" | "rowheader" | "scrollbar" | "search" | "searchbox" | "separator" | "slider" | "spinbutton" | "status" | "strong" | "subscript" | "superscript" | "switch" | "tab" | "table" | "tablist" | "tabpanel" | "term" | "textbox" | "time" | "timer" | "toolbar" | "tooltip" | "tree" | "treegrid" | "treeitem"[#](#locator-assertions-to-have-role-option-role)
    
    Required aria role.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-role-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-role-return)

* * *

### toHaveScreenshot(name)[â€‹](#locator-assertions-to-have-screenshot-1 "Direct link to toHaveScreenshot(name)")

Added in: v1.23 locatorAssertions.toHaveScreenshot(name)

This function will wait until two consecutive locator screenshots yield the same result, and then compare the last screenshot with the expectation.

**Usage**

    const locator = page.getByRole('button');await expect(locator).toHaveScreenshot('image.png');

Note that screenshot assertions only work with Playwright test runner.

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#locator-assertions-to-have-screenshot-1-option-name)
    
    Snapshot name.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `animations` "disabled" | "allow" _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"disabled"` that disables animations.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-locatorassertions#locator-assertions-to-have-screenshot-1-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#locator-assertions-to-have-screenshot-1-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-max-diff-pixel-ratio)
        
        An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1`. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-max-diff-pixels)
        
        An acceptable amount of pixels that could be different. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `scale` "css" | "device" _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"css"`.
        
    *   `stylePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.41[#](#locator-assertions-to-have-screenshot-1-option-style-path)
        
        File name containing the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-threshold)
        
        An acceptable perceived color difference in the [YIQ color space](https://en.wikipedia.org/wiki/YIQ) between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with `TestConfig.expect`. Defaults to `0.2`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-1-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-screenshot-1-return)

* * *

### toHaveScreenshot(options)[â€‹](#locator-assertions-to-have-screenshot-2 "Direct link to toHaveScreenshot(options)")

Added in: v1.23 locatorAssertions.toHaveScreenshot(options)

This function will wait until two consecutive locator screenshots yield the same result, and then compare the last screenshot with the expectation.

**Usage**

    const locator = page.getByRole('button');await expect(locator).toHaveScreenshot();

Note that screenshot assertions only work with Playwright test runner.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `animations` "disabled" | "allow" _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"disabled"` that disables animations.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-locatorassertions#locator-assertions-to-have-screenshot-2-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#locator-assertions-to-have-screenshot-2-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-max-diff-pixel-ratio)
        
        An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1`. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-max-diff-pixels)
        
        An acceptable amount of pixels that could be different. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `scale` "css" | "device" _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"css"`.
        
    *   `stylePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.41[#](#locator-assertions-to-have-screenshot-2-option-style-path)
        
        File name containing the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-threshold)
        
        An acceptable perceived color difference in the [YIQ color space](https://en.wikipedia.org/wiki/YIQ) between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with `TestConfig.expect`. Defaults to `0.2`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-screenshot-2-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-screenshot-2-return)

* * *

### toHaveText[â€‹](#locator-assertions-to-have-text "Direct link to toHaveText")

Added in: v1.20 locatorAssertions.toHaveText

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with the given text. All nested elements will be considered when computing the text content of the element. You can use regular expressions for the value as well.

**Usage**

    const locator = page.locator('.title');await expect(locator).toHaveText(/Welcome, Test User/);await expect(locator).toHaveText(/Welcome, .*/);

If you pass an array as an expected value, the expectations are:

1.  Locator resolves to a list of elements.
2.  The number of elements equals the number of expected values in the array.
3.  Elements from the list have text matching expected array values, one by one, in order.

For example, consider the following list:

    <ul>  <li>Text 1</li>  <li>Text 2</li>  <li>Text 3</li></ul>

Let's see how we can use the assertion:

    // âœ“ Has the right items in the right orderawait expect(page.locator('ul > li')).toHaveText(['Text 1', 'Text 2', 'Text 3']);// âœ– Wrong orderawait expect(page.locator('ul > li')).toHaveText(['Text 3', 'Text 2', 'Text 1']);// âœ– Last item does not matchawait expect(page.locator('ul > li')).toHaveText(['Text 1', 'Text 2', 'Text']);// âœ– Locator points to the outer list element, not to the list itemsawait expect(page.locator('ul')).toHaveText(['Text 1', 'Text 2', 'Text 3']);

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\> Added in: v1.18[#](#locator-assertions-to-have-text-option-expected)
    
    Expected string or RegExp or a list of those.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.23[#](#locator-assertions-to-have-text-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-locatorassertions#locator-assertions-to-have-text-option-ignore-case) option takes precedence over the corresponding regular expression flag if specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-text-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        
    *   `useInnerText` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-text-option-use-inner-text)
        
        Whether to use `element.innerText` instead of `element.textContent` when retrieving DOM node text.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-text-return)

**Details**

When `expected` parameter is a string, Playwright will normalize whitespaces and line breaks both in the actual text and in the expected string before matching. When regular expression is used, the actual text is matched as is.

* * *

### toHaveValue[â€‹](#locator-assertions-to-have-value "Direct link to toHaveValue")

Added in: v1.20 locatorAssertions.toHaveValue

Ensures the [Locator](/docs/api/class-locator "Locator") points to an element with the given input value. You can use regular expressions for the value as well.

**Usage**

    const locator = page.locator('input[type=number]');await expect(locator).toHaveValue(/[0-9]/);

**Arguments**

*   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") Added in: v1.18[#](#locator-assertions-to-have-value-option-value)
    
    Expected value.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#locator-assertions-to-have-value-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-value-return)

* * *

### toHaveValues[â€‹](#locator-assertions-to-have-values "Direct link to toHaveValues")

Added in: v1.23 locatorAssertions.toHaveValues

Ensures the [Locator](/docs/api/class-locator "Locator") points to multi-select/combobox (i.e. a `select` with the `multiple` attribute) and the specified values are selected.

**Usage**

For example, given the following element:

    <select id="favorite-colors" multiple>  <option value="R">Red</option>  <option value="G">Green</option>  <option value="B">Blue</option></select>

    const locator = page.locator('id=favorite-colors');await locator.selectOption(['R', 'G']);await expect(locator).toHaveValues([/R/, /G/]);

**Arguments**

*   `values` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>[#](#locator-assertions-to-have-values-option-values)
    
    Expected options currently selected.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-have-values-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-have-values-return)

* * *

### toMatchAriaSnapshot(expected)[â€‹](#locator-assertions-to-match-aria-snapshot "Direct link to toMatchAriaSnapshot(expected)")

Added in: v1.49 locatorAssertions.toMatchAriaSnapshot(expected)

Asserts that the target element matches the given [accessibility snapshot](/docs/aria-snapshots).

**Usage**

    await page.goto('https://demo.playwright.dev/todomvc/');await expect(page.locator('body')).toMatchAriaSnapshot(`  - heading "todos"  - textbox "What needs to be done?"`);

**Arguments**

*   `expected` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#locator-assertions-to-match-aria-snapshot-option-expected)
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-match-aria-snapshot-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-match-aria-snapshot-return)

* * *

### toMatchAriaSnapshot(options)[â€‹](#locator-assertions-to-match-aria-snapshot-2 "Direct link to toMatchAriaSnapshot(options)")

Added in: v1.50 locatorAssertions.toMatchAriaSnapshot(options)

Asserts that the target element matches the given [accessibility snapshot](/docs/aria-snapshots).

Snapshot is stored in a separate `.aria.yml` file in a location configured by `expect.toMatchAriaSnapshot.pathTemplate` and/or `snapshotPathTemplate` properties in the configuration file.

**Usage**

    await expect(page.locator('body')).toMatchAriaSnapshot();await expect(page.locator('body')).toMatchAriaSnapshot({ name: 'body.aria.yml' });

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#locator-assertions-to-match-aria-snapshot-2-option-name)
        
        Name of the snapshot to store in the snapshot folder corresponding to this test. Generates sequential names if not specified.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#locator-assertions-to-match-aria-snapshot-2-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#locator-assertions-to-match-aria-snapshot-2-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### not[â€‹](#locator-assertions-not "Direct link to not")

Added in: v1.20 locatorAssertions.not

Makes the assertion check for the opposite condition. For example, this code tests that the Locator doesn't contain text `"error"`:

    await expect(locator).not.toContainText('error');

**Usage**

    expect(locator).not

**Type**

*   [LocatorAssertions](/docs/api/class-locatorassertions "LocatorAssertions")

# PageAssertions

PageAssertions
==============

The [PageAssertions](/docs/api/class-pageassertions "PageAssertions") class provides assertion methods that can be used to make assertions about the [Page](/docs/api/class-page "Page") state in the tests.

    import { test, expect } from '@playwright/test';test('navigates to login', async ({ page }) => {  // ...  await page.getByText('Sign in').click();  await expect(page).toHaveURL(/.*\/login/);});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### toHaveScreenshot(name)[â€‹](#page-assertions-to-have-screenshot-1 "Direct link to toHaveScreenshot(name)")

Added in: v1.23 pageAssertions.toHaveScreenshot(name)

This function will wait until two consecutive page screenshots yield the same result, and then compare the last screenshot with the expectation.

**Usage**

    await expect(page).toHaveScreenshot('image.png');

Note that screenshot assertions only work with Playwright test runner.

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#page-assertions-to-have-screenshot-1-option-name)
    
    Snapshot name.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `animations` "disabled" | "allow" _(optional)_[#](#page-assertions-to-have-screenshot-1-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"disabled"` that disables animations.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#page-assertions-to-have-screenshot-1-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `clip` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-clip)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            x-coordinate of top-left corner of clip area
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            y-coordinate of top-left corner of clip area
            
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            width of clipping area
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            height of clipping area
            
        
        An object which specifies clipping of the resulting image.
        
    *   `fullPage` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-full-page)
        
        When true, takes a screenshot of the full scrollable page, instead of the currently visible viewport. Defaults to `false`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#page-assertions-to-have-screenshot-1-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#page-assertions-to-have-screenshot-1-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-max-diff-pixel-ratio)
        
        An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1`. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-max-diff-pixels)
        
        An acceptable amount of pixels that could be different. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `scale` "css" | "device" _(optional)_[#](#page-assertions-to-have-screenshot-1-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"css"`.
        
    *   `stylePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.41[#](#page-assertions-to-have-screenshot-1-option-style-path)
        
        File name containing the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-threshold)
        
        An acceptable perceived color difference in the [YIQ color space](https://en.wikipedia.org/wiki/YIQ) between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with `TestConfig.expect`. Defaults to `0.2`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-1-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-assertions-to-have-screenshot-1-return)

* * *

### toHaveScreenshot(options)[â€‹](#page-assertions-to-have-screenshot-2 "Direct link to toHaveScreenshot(options)")

Added in: v1.23 pageAssertions.toHaveScreenshot(options)

This function will wait until two consecutive page screenshots yield the same result, and then compare the last screenshot with the expectation.

**Usage**

    await expect(page).toHaveScreenshot();

Note that screenshot assertions only work with Playwright test runner.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `animations` "disabled" | "allow" _(optional)_[#](#page-assertions-to-have-screenshot-2-option-animations)
        
        When set to `"disabled"`, stops CSS animations, CSS transitions and Web Animations. Animations get different treatment depending on their duration:
        
        *   finite animations are fast-forwarded to completion, so they'll fire `transitionend` event.
        *   infinite animations are canceled to initial state, and then played over after the screenshot.
        
        Defaults to `"disabled"` that disables animations.
        
    *   `caret` "hide" | "initial" _(optional)_[#](#page-assertions-to-have-screenshot-2-option-caret)
        
        When set to `"hide"`, screenshot will hide text caret. When set to `"initial"`, text caret behavior will not be changed. Defaults to `"hide"`.
        
    *   `clip` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-clip)
        
        *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            x-coordinate of top-left corner of clip area
            
        *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            y-coordinate of top-left corner of clip area
            
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            width of clipping area
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            height of clipping area
            
        
        An object which specifies clipping of the resulting image.
        
    *   `fullPage` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-full-page)
        
        When true, takes a screenshot of the full scrollable page, instead of the currently visible viewport. Defaults to `false`.
        
    *   `mask` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Locator](/docs/api/class-locator "Locator")\> _(optional)_[#](#page-assertions-to-have-screenshot-2-option-mask)
        
        Specify locators that should be masked when the screenshot is taken. Masked elements will be overlaid with a pink box `#FF00FF` (customized by [maskColor](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-2-option-mask-color)) that completely covers its bounding box. The mask is also applied to invisible elements, see [Matching only visible elements](/docs/locators#matching-only-visible-elements) to disable that.
        
    *   `maskColor` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.35[#](#page-assertions-to-have-screenshot-2-option-mask-color)
        
        Specify the color of the overlay box for masked elements, in [CSS color format](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). Default color is pink `#FF00FF`.
        
    *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-max-diff-pixel-ratio)
        
        An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1`. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-max-diff-pixels)
        
        An acceptable amount of pixels that could be different. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-omit-background)
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        
    *   `scale` "css" | "device" _(optional)_[#](#page-assertions-to-have-screenshot-2-option-scale)
        
        When set to `"css"`, screenshot will have a single pixel per each css pixel on the page. For high-dpi devices, this will keep screenshots small. Using `"device"` option will produce a single pixel per each device pixel, so screenshots of high-dpi devices will be twice as large or even larger.
        
        Defaults to `"css"`.
        
    *   `stylePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.41[#](#page-assertions-to-have-screenshot-2-option-style-path)
        
        File name containing the stylesheet to apply while making the screenshot. This is where you can hide dynamic elements, make elements invisible or change their properties to help you creating repeatable screenshots. This stylesheet pierces the Shadow DOM and applies to the inner frames.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-threshold)
        
        An acceptable perceived color difference in the [YIQ color space](https://en.wikipedia.org/wiki/YIQ) between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with `TestConfig.expect`. Defaults to `0.2`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#page-assertions-to-have-screenshot-2-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-assertions-to-have-screenshot-2-return)

* * *

### toHaveTitle[â€‹](#page-assertions-to-have-title "Direct link to toHaveTitle")

Added in: v1.20 pageAssertions.toHaveTitle

Ensures the page has the given title.

**Usage**

    await expect(page).toHaveTitle(/.*checkout/);

**Arguments**

*   `titleOrRegExp` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") Added in: v1.18[#](#page-assertions-to-have-title-option-title-or-reg-exp)
    
    Expected title or RegExp.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#page-assertions-to-have-title-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-assertions-to-have-title-return)

* * *

### toHaveURL[â€‹](#page-assertions-to-have-url "Direct link to toHaveURL")

Added in: v1.20 pageAssertions.toHaveURL

Ensures the page is navigated to the given URL.

**Usage**

    // Check for the page URL to be 'https://playwright.dev/docs/intro' (including query string)await expect(page).toHaveURL('https://playwright.dev/docs/intro');// Check for the page URL to contain 'doc', followed by an optional 's', followed by '/'await expect(page).toHaveURL(/docs?\//);// Check for the predicate to be satisfied// For example: verify query stringsawait expect(page).toHaveURL(url => {  const params = url.searchParams;  return params.has('search') && params.has('options') && params.get('id') === '5';});

**Arguments**

*   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")([URL](https://nodejs.org/api/url.html "URL")):[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") Added in: v1.18[#](#page-assertions-to-have-url-option-url)
    
    Expected URL string, RegExp, or predicate receiving [URL](https://nodejs.org/api/url.html "URL") to match. When [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) is provided via the context options and the `url` argument is a string, the two values are merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor and used for the comparison against the current browser URL.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `ignoreCase` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.44[#](#page-assertions-to-have-url-option-ignore-case)
        
        Whether to perform case-insensitive match. [ignoreCase](/docs/api/class-pageassertions#page-assertions-to-have-url-option-ignore-case) option takes precedence over the corresponding regular expression parameter if specified. A provided predicate ignores this flag.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.18[#](#page-assertions-to-have-url-option-timeout)
        
        Time to retry the assertion for in milliseconds. Defaults to `timeout` in `TestConfig.expect`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#page-assertions-to-have-url-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### not[â€‹](#page-assertions-not "Direct link to not")

Added in: v1.20 pageAssertions.not

Makes the assertion check for the opposite condition. For example, this code tests that the page URL doesn't contain `"error"`:

    await expect(page).not.toHaveURL('error');

**Usage**

    expect(page).not

**Type**

*   [PageAssertions](/docs/api/class-pageassertions "PageAssertions")

# SnapshotAssertions

SnapshotAssertions
==================

Playwright provides methods for comparing page and element screenshots with expected values stored in files.

    expect(screenshot).toMatchSnapshot('landing-page.png');

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### toMatchSnapshot(name)[â€‹](#snapshot-assertions-to-match-snapshot-1 "Direct link to toMatchSnapshot(name)")

Added in: v1.22 snapshotAssertions.toMatchSnapshot(name)

caution

To compare screenshots, use [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) instead.

Ensures that passed value, either a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") or a [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer"), matches the expected snapshot stored in the test snapshots directory.

**Usage**

    // Basic usage.expect(await page.screenshot()).toMatchSnapshot('landing-page.png');// Pass options to customize the snapshot comparison and have a generated name.expect(await page.screenshot()).toMatchSnapshot('landing-page.png', {  maxDiffPixels: 27, // allow no more than 27 different pixels.});// Configure image matching threshold.expect(await page.screenshot()).toMatchSnapshot('landing-page.png', { threshold: 0.3 });// Bring some structure to your snapshot files by passing file path segments.expect(await page.screenshot()).toMatchSnapshot(['landing', 'step2.png']);expect(await page.screenshot()).toMatchSnapshot(['landing', 'step3.png']);

Learn more about [visual comparisons](/docs/test-snapshots).

Note that matching snapshots only work with Playwright test runner.

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#snapshot-assertions-to-match-snapshot-1-option-name)
    
    Snapshot name.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#snapshot-assertions-to-match-snapshot-1-option-max-diff-pixel-ratio)
        
        An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1`. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#snapshot-assertions-to-match-snapshot-1-option-max-diff-pixels)
        
        An acceptable amount of pixels that could be different. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#snapshot-assertions-to-match-snapshot-1-option-threshold)
        
        An acceptable perceived color difference in the [YIQ color space](https://en.wikipedia.org/wiki/YIQ) between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with `TestConfig.expect`. Defaults to `0.2`.
        

* * *

### toMatchSnapshot(options)[â€‹](#snapshot-assertions-to-match-snapshot-2 "Direct link to toMatchSnapshot(options)")

Added in: v1.22 snapshotAssertions.toMatchSnapshot(options)

caution

To compare screenshots, use [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-2) instead.

Ensures that passed value, either a [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") or a [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer"), matches the expected snapshot stored in the test snapshots directory.

**Usage**

    // Basic usage and the file name is derived from the test name.expect(await page.screenshot()).toMatchSnapshot();// Pass options to customize the snapshot comparison and have a generated name.expect(await page.screenshot()).toMatchSnapshot({  maxDiffPixels: 27, // allow no more than 27 different pixels.});// Configure image matching threshold and snapshot name.expect(await page.screenshot()).toMatchSnapshot({  name: 'landing-page.png',  threshold: 0.3,});

Learn more about [visual comparisons](/docs/test-snapshots).

Note that matching snapshots only work with Playwright test runner.

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#snapshot-assertions-to-match-snapshot-2-option-max-diff-pixel-ratio)
        
        An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1`. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#snapshot-assertions-to-match-snapshot-2-option-max-diff-pixels)
        
        An acceptable amount of pixels that could be different. Default is configurable with `TestConfig.expect`. Unset by default.
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#snapshot-assertions-to-match-snapshot-2-option-name)
        
        Snapshot name. If not passed, the test name and ordinals are used when called multiple times.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#snapshot-assertions-to-match-snapshot-2-option-threshold)
        
        An acceptable perceived color difference in the [YIQ color space](https://en.wikipedia.org/wiki/YIQ) between the same pixel in compared images, between zero (strict) and one (lax), default is configurable with `TestConfig.expect`. Defaults to `0.2`.

# Fixtures

Fixtures
========

Playwright Test is based on the concept of the [test fixtures](/docs/test-fixtures). Test fixtures are used to establish environment for each test, giving the test everything it needs and nothing else.

Playwright Test looks at each test declaration, analyses the set of fixtures the test needs and prepares those fixtures specifically for the test. Values prepared by the fixtures are merged into a single object that is available to the `test`, hooks, annotations and other fixtures as a first parameter.

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  // ...});

Given the test above, Playwright Test will set up the `page` fixture before running the test, and tear it down after the test has finished. `page` fixture provides a [Page](/docs/api/class-page "Page") object that is available to the test.

Playwright Test comes with builtin fixtures listed below, and you can add your own fixtures as well. Playwright Test also [provides options](/docs/api/class-testoptions "TestOptions") to configure [fixtures.browser](/docs/api/class-fixtures#fixtures-browser), [fixtures.context](/docs/api/class-fixtures#fixtures-context) and [fixtures.page](/docs/api/class-fixtures#fixtures-page).

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### browser[â€‹](#fixtures-browser "Direct link to browser")

Added in: v1.10 fixtures.browser

[Browser](/docs/api/class-browser "Browser") instance is shared between all tests in the [same worker](/docs/test-parallel) - this makes testing efficient. However, each test runs in an isolated [BrowserContext](/docs/api/class-browsercontext "BrowserContext") and gets a fresh environment.

Learn how to [configure browser](/docs/test-configuration) and see [available options](/docs/api/class-testoptions "TestOptions").

**Usage**

    test.beforeAll(async ({ browser }) => {  const page = await browser.newPage();  // ...});

**Type**

*   [Browser](/docs/api/class-browser "Browser")

* * *

### browserName[â€‹](#fixtures-browser-name "Direct link to browserName")

Added in: v1.10 fixtures.browserName

Name of the browser that runs tests. Defaults to `'chromium'`. Useful to [annotate tests](/docs/test-annotations) based on the browser.

**Usage**

    test('skip this test in Firefox', async ({ page, browserName }) => {  test.skip(browserName === 'firefox', 'Still working on it');  // ...});

**Type**

*   "chromium" | "firefox" | "webkit"

* * *

### context[â€‹](#fixtures-context "Direct link to context")

Added in: v1.10 fixtures.context

Isolated [BrowserContext](/docs/api/class-browsercontext "BrowserContext") instance, created for each test. Since contexts are isolated between each other, every test gets a fresh environment, even when multiple tests run in a single [Browser](/docs/api/class-browser "Browser") for maximum efficiency.

Learn how to [configure context](/docs/test-configuration) and see [available options](/docs/api/class-testoptions "TestOptions").

Default [fixtures.page](/docs/api/class-fixtures#fixtures-page) belongs to this context.

**Usage**

    test('example test', async ({ page, context }) => {  await context.route('*external.com/*', route => route.abort());  // ...});

**Type**

*   [BrowserContext](/docs/api/class-browsercontext "BrowserContext")

* * *

### page[â€‹](#fixtures-page "Direct link to page")

Added in: v1.10 fixtures.page

Isolated [Page](/docs/api/class-page "Page") instance, created for each test. Pages are isolated between tests due to [fixtures.context](/docs/api/class-fixtures#fixtures-context) isolation.

This is the most common fixture used in a test.

**Usage**

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('/signin');  await page.getByLabel('User Name').fill('user');  await page.getByLabel('Password').fill('password');  await page.getByText('Sign in').click();  // ...});

**Type**

*   [Page](/docs/api/class-page "Page")

* * *

### request[â€‹](#fixtures-request "Direct link to request")

Added in: v1.10 fixtures.request

Isolated [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") instance for each test.

**Usage**

    import { test, expect } from '@playwright/test';test('basic test', async ({ request }) => {  await request.post('/signin', {    data: {      username: 'user',      password: 'password'    }  });  // ...});

**Type**

*   [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext")

# FullConfig

FullConfig
==========

Resolved configuration which is accessible via [testInfo.config](/docs/api/class-testinfo#test-info-config) and is passed to the test reporters. To see the format of Playwright configuration file, please see [TestConfig](/docs/api/class-testconfig "TestConfig") instead.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### configFile[â€‹](#full-config-config-file "Direct link to configFile")

Added in: v1.20 fullConfig.configFile

Path to the configuration file used to run the tests. The value is an empty string if no config file was used.

**Usage**

    fullConfig.configFile

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### forbidOnly[â€‹](#full-config-forbid-only "Direct link to forbidOnly")

Added in: v1.10 fullConfig.forbidOnly

See [testConfig.forbidOnly](/docs/api/class-testconfig#test-config-forbid-only).

**Usage**

    fullConfig.forbidOnly

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### fullyParallel[â€‹](#full-config-fully-parallel "Direct link to fullyParallel")

Added in: v1.20 fullConfig.fullyParallel

See [testConfig.fullyParallel](/docs/api/class-testconfig#test-config-fully-parallel).

**Usage**

    fullConfig.fullyParallel

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### globalSetup[â€‹](#full-config-global-setup "Direct link to globalSetup")

Added in: v1.10 fullConfig.globalSetup

See [testConfig.globalSetup](/docs/api/class-testconfig#test-config-global-setup).

**Usage**

    fullConfig.globalSetup

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### globalTeardown[â€‹](#full-config-global-teardown "Direct link to globalTeardown")

Added in: v1.10 fullConfig.globalTeardown

See [testConfig.globalTeardown](/docs/api/class-testconfig#test-config-global-teardown).

**Usage**

    fullConfig.globalTeardown

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### globalTimeout[â€‹](#full-config-global-timeout "Direct link to globalTimeout")

Added in: v1.10 fullConfig.globalTimeout

See [testConfig.globalTimeout](/docs/api/class-testconfig#test-config-global-timeout).

**Usage**

    fullConfig.globalTimeout

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### grep[â€‹](#full-config-grep "Direct link to grep")

Added in: v1.10 fullConfig.grep

See [testConfig.grep](/docs/api/class-testconfig#test-config-grep).

**Usage**

    fullConfig.grep

**Type**

*   [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### grepInvert[â€‹](#full-config-grep-invert "Direct link to grepInvert")

Added in: v1.10 fullConfig.grepInvert

See [testConfig.grepInvert](/docs/api/class-testconfig#test-config-grep-invert).

**Usage**

    fullConfig.grepInvert

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### maxFailures[â€‹](#full-config-max-failures "Direct link to maxFailures")

Added in: v1.10 fullConfig.maxFailures

See [testConfig.maxFailures](/docs/api/class-testconfig#test-config-max-failures).

**Usage**

    fullConfig.maxFailures

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### metadata[â€‹](#full-config-metadata "Direct link to metadata")

Added in: v1.10 fullConfig.metadata

See [testConfig.metadata](/docs/api/class-testconfig#test-config-metadata).

**Usage**

    fullConfig.metadata

**Type**

*   [Metadata](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object<string, any>")

* * *

### preserveOutput[â€‹](#full-config-preserve-output "Direct link to preserveOutput")

Added in: v1.10 fullConfig.preserveOutput

See [testConfig.preserveOutput](/docs/api/class-testconfig#test-config-preserve-output).

**Usage**

    fullConfig.preserveOutput

**Type**

*   "always" | "never" | "failures-only"

* * *

### projects[â€‹](#full-config-projects "Direct link to projects")

Added in: v1.10 fullConfig.projects

List of resolved projects.

**Usage**

    fullConfig.projects

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[FullProject](/docs/api/class-fullproject "FullProject")\>

* * *

### quiet[â€‹](#full-config-quiet "Direct link to quiet")

Added in: v1.10 fullConfig.quiet

See [testConfig.quiet](/docs/api/class-testconfig#test-config-quiet).

**Usage**

    fullConfig.quiet

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### reportSlowTests[â€‹](#full-config-report-slow-tests "Direct link to reportSlowTests")

Added in: v1.10 fullConfig.reportSlowTests

See [testConfig.reportSlowTests](/docs/api/class-testconfig#test-config-report-slow-tests).

**Usage**

    fullConfig.reportSlowTests

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `max` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        The maximum number of slow test files to report.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Test file duration in milliseconds that is considered slow.
        

* * *

### reporter[â€‹](#full-config-reporter "Direct link to reporter")

Added in: v1.10 fullConfig.reporter

See [testConfig.reporter](/docs/api/class-testconfig#test-config-reporter).

**Usage**

    fullConfig.reporter

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | "list" | "dot" | "line" | "github" | "json" | "junit" | "null" | "html"
    *   `0` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Reporter name or module or file path
        
    *   `1` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
        
        An object with reporter options if any
        

* * *

### rootDir[â€‹](#full-config-root-dir "Direct link to rootDir")

Added in: v1.20 fullConfig.rootDir

Base directory for all relative paths used in the reporters.

**Usage**

    fullConfig.rootDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### shard[â€‹](#full-config-shard "Direct link to shard")

Added in: v1.10 fullConfig.shard

See [testConfig.shard](/docs/api/class-testconfig#test-config-shard).

**Usage**

    fullConfig.shard

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `total` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        The total number of shards.
        
    *   `current` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        The index of the shard to execute, one-based.
        

* * *

### tags[â€‹](#full-config-tags "Direct link to tags")

Added in: v1.57 fullConfig.tags

Resolved global tags. See [testConfig.tag](/docs/api/class-testconfig#test-config-tag).

**Usage**

    fullConfig.tags

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### updateSnapshots[â€‹](#full-config-update-snapshots "Direct link to updateSnapshots")

Added in: v1.10 fullConfig.updateSnapshots

See [testConfig.updateSnapshots](/docs/api/class-testconfig#test-config-update-snapshots).

**Usage**

    fullConfig.updateSnapshots

**Type**

*   "all" | "changed" | "missing" | "none"

* * *

### updateSourceMethod[â€‹](#full-config-update-source-method "Direct link to updateSourceMethod")

Added in: v1.50 fullConfig.updateSourceMethod

See [testConfig.updateSourceMethod](/docs/api/class-testconfig#test-config-update-source-method).

**Usage**

    fullConfig.updateSourceMethod

**Type**

*   "overwrite" | "3way" | "patch"

* * *

### version[â€‹](#full-config-version "Direct link to version")

Added in: v1.20 fullConfig.version

Playwright version.

**Usage**

    fullConfig.version

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### webServer[â€‹](#full-config-web-server "Direct link to webServer")

Added in: v1.10 fullConfig.webServer

See [testConfig.webServer](/docs/api/class-testconfig#test-config-web-server).

**Usage**

    fullConfig.webServer

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")

* * *

### workers[â€‹](#full-config-workers "Direct link to workers")

Added in: v1.10 fullConfig.workers

See [testConfig.workers](/docs/api/class-testconfig#test-config-workers).

**Usage**

    fullConfig.workers

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

# FullProject

FullProject
===========

Runtime representation of the test project configuration. It is accessible in the tests via [testInfo.project](/docs/api/class-testinfo#test-info-project) and [workerInfo.project](/docs/api/class-workerinfo#worker-info-project) and is passed to the test reporters. To see the format of the project in the Playwright configuration file please see [TestProject](/docs/api/class-testproject "TestProject") instead.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### dependencies[â€‹](#full-project-dependencies "Direct link to dependencies")

Added in: v1.31 fullProject.dependencies

See [testProject.dependencies](/docs/api/class-testproject#test-project-dependencies).

**Usage**

    fullProject.dependencies

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### grep[â€‹](#full-project-grep "Direct link to grep")

Added in: v1.10 fullProject.grep

See [testProject.grep](/docs/api/class-testproject#test-project-grep).

**Usage**

    fullProject.grep

**Type**

*   [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### grepInvert[â€‹](#full-project-grep-invert "Direct link to grepInvert")

Added in: v1.10 fullProject.grepInvert

See [testProject.grepInvert](/docs/api/class-testproject#test-project-grep-invert).

**Usage**

    fullProject.grepInvert

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### metadata[â€‹](#full-project-metadata "Direct link to metadata")

Added in: v1.10 fullProject.metadata

See [testProject.metadata](/docs/api/class-testproject#test-project-metadata).

**Usage**

    fullProject.metadata

**Type**

*   [Metadata](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object<string, any>")

* * *

### name[â€‹](#full-project-name "Direct link to name")

Added in: v1.10 fullProject.name

See [testProject.name](/docs/api/class-testproject#test-project-name).

**Usage**

    fullProject.name

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### outputDir[â€‹](#full-project-output-dir "Direct link to outputDir")

Added in: v1.10 fullProject.outputDir

See [testProject.outputDir](/docs/api/class-testproject#test-project-output-dir).

**Usage**

    fullProject.outputDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### repeatEach[â€‹](#full-project-repeat-each "Direct link to repeatEach")

Added in: v1.10 fullProject.repeatEach

See [testProject.repeatEach](/docs/api/class-testproject#test-project-repeat-each).

**Usage**

    fullProject.repeatEach

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### retries[â€‹](#full-project-retries "Direct link to retries")

Added in: v1.10 fullProject.retries

See [testProject.retries](/docs/api/class-testproject#test-project-retries).

**Usage**

    fullProject.retries

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### snapshotDir[â€‹](#full-project-snapshot-dir "Direct link to snapshotDir")

Added in: v1.10 fullProject.snapshotDir

See [testProject.snapshotDir](/docs/api/class-testproject#test-project-snapshot-dir).

**Usage**

    fullProject.snapshotDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### teardown[â€‹](#full-project-teardown "Direct link to teardown")

Added in: v1.34 fullProject.teardown

See [testProject.teardown](/docs/api/class-testproject#test-project-teardown).

**Usage**

    fullProject.teardown

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### testDir[â€‹](#full-project-test-dir "Direct link to testDir")

Added in: v1.10 fullProject.testDir

See [testProject.testDir](/docs/api/class-testproject#test-project-test-dir).

**Usage**

    fullProject.testDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### testIgnore[â€‹](#full-project-test-ignore "Direct link to testIgnore")

Added in: v1.10 fullProject.testIgnore

See [testProject.testIgnore](/docs/api/class-testproject#test-project-test-ignore).

**Usage**

    fullProject.testIgnore

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### testMatch[â€‹](#full-project-test-match "Direct link to testMatch")

Added in: v1.10 fullProject.testMatch

See [testProject.testMatch](/docs/api/class-testproject#test-project-test-match).

**Usage**

    fullProject.testMatch

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### timeout[â€‹](#full-project-timeout "Direct link to timeout")

Added in: v1.10 fullProject.timeout

See [testProject.timeout](/docs/api/class-testproject#test-project-timeout).

**Usage**

    fullProject.timeout

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### use[â€‹](#full-project-use "Direct link to use")

Added in: v1.10 fullProject.use

See [testProject.use](/docs/api/class-testproject#test-project-use).

**Usage**

    fullProject.use

**Type**

*   [Fixtures](/docs/api/class-fixtures "Fixtures")

# Location

Location
========

Represents a location in the source code where [TestCase](/docs/api/class-testcase "TestCase") or [Suite](/docs/api/class-suite "Suite") is defined.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### column[â€‹](#location-column "Direct link to column")

Added in: v1.10 location.column

Column number in the source file.

**Usage**

    location.column

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### file[â€‹](#location-file "Direct link to file")

Added in: v1.10 location.file

Path to the source file.

**Usage**

    location.file

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### line[â€‹](#location-line "Direct link to line")

Added in: v1.10 location.line

Line number in the source file.

**Usage**

    location.line

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

# TestConfig

TestConfig
==========

Playwright Test provides many options to configure how your tests are collected and executed, for example `timeout` or `testDir`. These options are described in the [TestConfig](/docs/api/class-testconfig "TestConfig") object in the [configuration file](/docs/test-configuration). This type describes format of the configuration file, to access resolved configuration parameters at run time use [FullConfig](/docs/api/class-fullconfig "FullConfig").

Playwright Test supports running multiple test projects at the same time. Project-specific options should be put to [testConfig.projects](/docs/api/class-testconfig#test-config-projects), but top-level [TestConfig](/docs/api/class-testconfig "TestConfig") can also define base options shared between all projects.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  timeout: 30000,  globalTimeout: 600000,  reporter: 'list',  testDir: './tests',});

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### build[â€‹](#test-config-build "Direct link to build")

Added in: v1.35 testConfig.build

Playwright transpiler configuration.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  build: {    external: ['**/*bundle.js'],  },});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `external` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
        Paths to exclude from the transpilation expressed as a list of glob patterns. Typically heavy JS bundles that your test uses are listed here.
        

* * *

### captureGitInfo[â€‹](#test-config-capture-git-info "Direct link to captureGitInfo")

Added in: v1.51 testConfig.captureGitInfo

These settings control whether git information is captured and stored in the config [testConfig.metadata](/docs/api/class-testconfig#test-config-metadata).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  captureGitInfo: { commit: true, diff: true }});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `commit` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to capture commit and pull request information such as hash, author, timestamp.
        
    *   `diff` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to capture commit diff.
        

**Details**

*   Capturing `commit` information is useful when you'd like to see it in your HTML (or a third party) report.
*   Capturing `diff` information is useful to enrich the report with the actual source diff. This information can be used to provide intelligent advice on how to fix the test.

note

Default values for these settings depend on the environment. When tests run as a part of CI where it is safe to obtain git information, the default value is `true`, `false` otherwise.

note

The structure of the git commit metadata is subject to change.

* * *

### expect[â€‹](#test-config-expect "Direct link to expect")

Added in: v1.10 testConfig.expect

Configuration for the `expect` assertion library. Learn more about [various timeouts](/docs/test-timeouts).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  expect: {    timeout: 10000,    toMatchSnapshot: {      maxDiffPixels: 10,    },  },});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Default timeout for async expect matchers in milliseconds, defaults to 5000ms.
        
    *   `toHaveScreenshot` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `animations` "allow" | "disabled" _(optional)_
            
            See [animations](/docs/api/class-page#page-screenshot-option-animations) in [page.screenshot()](/docs/api/class-page#page-screenshot). Defaults to `"disabled"`.
            
        *   `caret` "hide" | "initial" _(optional)_
            
            See [caret](/docs/api/class-page#page-screenshot-option-caret) in [page.screenshot()](/docs/api/class-page#page-screenshot). Defaults to `"hide"`.
            
        *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            An acceptable amount of pixels that could be different, unset by default.
            
        *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1` , unset by default.
            
        *   `scale` "css" | "device" _(optional)_
            
            See [scale](/docs/api/class-page#page-screenshot-option-scale) in [page.screenshot()](/docs/api/class-page#page-screenshot). Defaults to `"css"`.
            
        *   `stylePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
            
            See [style](/docs/api/class-page#page-screenshot-option-style) in [page.screenshot()](/docs/api/class-page#page-screenshot).
            
        *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            An acceptable perceived color difference between the same pixel in compared images, ranging from `0` (strict) and `1` (lax). `"pixelmatch"` comparator computes color difference in [YIQ color space](https://en.wikipedia.org/wiki/YIQ) and defaults `threshold` value to `0.2`.
            
        *   `pathTemplate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            A template controlling location of the screenshots. See [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) for details.
            
        
        Configuration for the [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) method.
        
    *   `toMatchAriaSnapshot` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `pathTemplate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            A template controlling location of the aria snapshots. See [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) for details.
            
        
        Configuration for the [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot-2) method.
        
    *   `toMatchSnapshot` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            An acceptable amount of pixels that could be different, unset by default.
            
        *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            An acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1` , unset by default.
            
        *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            An acceptable perceived color difference between the same pixel in compared images, ranging from `0` (strict) and `1` (lax). `"pixelmatch"` comparator computes color difference in [YIQ color space](https://en.wikipedia.org/wiki/YIQ) and defaults `threshold` value to `0.2`.
            
        
        Configuration for the [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1) method.
        
    *   `toPass` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `intervals` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")\> _(optional)_
            
            Probe intervals for toPass method in milliseconds.
            
        *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Timeout for toPass method in milliseconds.
            
        
        Configuration for the [expect(value).toPass()](/docs/test-assertions#expecttopass) method.
        

* * *

### failOnFlakyTests[â€‹](#test-config-fail-on-flaky-tests "Direct link to failOnFlakyTests")

Added in: v1.52 testConfig.failOnFlakyTests

Whether to exit with an error if any tests are marked as flaky. Useful on CI.

Also available in the [command line](/docs/test-cli) with the `--fail-on-flaky-tests` option.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  failOnFlakyTests: !!process.env.CI,});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### forbidOnly[â€‹](#test-config-forbid-only "Direct link to forbidOnly")

Added in: v1.10 testConfig.forbidOnly

Whether to exit with an error if any tests or groups are marked as [test.only()](/docs/api/class-test#test-only) or [test.describe.only()](/docs/api/class-test#test-describe-only). Useful on CI.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  forbidOnly: !!process.env.CI,});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### fullyParallel[â€‹](#test-config-fully-parallel "Direct link to fullyParallel")

Added in: v1.20 testConfig.fullyParallel

Playwright Test runs tests in parallel. In order to achieve that, it runs several worker processes that run at the same time. By default, **test files** are run in parallel. Tests in a single file are run in order, in the same worker process.

You can configure entire test run to concurrently execute all tests in all files using this option.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  fullyParallel: true,});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### globalSetup[â€‹](#test-config-global-setup "Direct link to globalSetup")

Added in: v1.10 testConfig.globalSetup

Path to the global setup file. This file will be required and run before all the tests. It must export a single function that takes a [FullConfig](/docs/api/class-fullconfig "FullConfig") argument. Pass an array of paths to specify multiple global setup files.

Learn more about [global setup and teardown](/docs/test-global-setup-teardown).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  globalSetup: './global-setup',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### globalTeardown[â€‹](#test-config-global-teardown "Direct link to globalTeardown")

Added in: v1.10 testConfig.globalTeardown

Path to the global teardown file. This file will be required and run after all the tests. It must export a single function. See also [testConfig.globalSetup](/docs/api/class-testconfig#test-config-global-setup). Pass an array of paths to specify multiple global teardown files.

Learn more about [global setup and teardown](/docs/test-global-setup-teardown).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  globalTeardown: './global-teardown',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### globalTimeout[â€‹](#test-config-global-timeout "Direct link to globalTimeout")

Added in: v1.10 testConfig.globalTimeout

Maximum time in milliseconds the whole test suite can run. Zero timeout (default) disables this behavior. Useful on CI to prevent broken setup from running too long and wasting resources. Learn more about [various timeouts](/docs/test-timeouts).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  globalTimeout: process.env.CI ? 60 * 60 * 1000 : undefined,});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### grep[â€‹](#test-config-grep "Direct link to grep")

Added in: v1.10 testConfig.grep

Filter to only run tests with a title matching one of the patterns. For example, passing `grep: /cart/` should only run tests with "cart" in the title. Also available in the [command line](/docs/test-cli) with the `-g` option. The regular expression will be tested against the string that consists of the project name, the test file name, the `test.describe` name (if any), the test name and the test tags divided by spaces, e.g. `chromium my-test.spec.ts my-suite my-test`.

`grep` option is also useful for [tagging tests](/docs/test-annotations#tag-tests).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  grep: /smoke/,});

**Type**

*   [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### grepInvert[â€‹](#test-config-grep-invert "Direct link to grepInvert")

Added in: v1.10 testConfig.grepInvert

Filter to only run tests with a title **not** matching one of the patterns. This is the opposite of [testConfig.grep](/docs/api/class-testconfig#test-config-grep). Also available in the [command line](/docs/test-cli) with the `--grep-invert` option.

`grepInvert` option is also useful for [tagging tests](/docs/test-annotations#tag-tests).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  grepInvert: /manual/,});

**Type**

*   [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### ignoreSnapshots[â€‹](#test-config-ignore-snapshots "Direct link to ignoreSnapshots")

Added in: v1.26 testConfig.ignoreSnapshots

Whether to skip snapshot expectations, such as `expect(value).toMatchSnapshot()` and `await expect(page).toHaveScreenshot()`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  ignoreSnapshots: !process.env.CI,});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### maxFailures[â€‹](#test-config-max-failures "Direct link to maxFailures")

Added in: v1.10 testConfig.maxFailures

The maximum number of test failures for the whole test suite run. After reaching this number, testing will stop and exit with an error. Setting to zero (default) disables this behavior.

Also available in the [command line](/docs/test-cli) with the `--max-failures` and `-x` options.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  maxFailures: process.env.CI ? 1 : 0,});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### metadata[â€‹](#test-config-metadata "Direct link to metadata")

Added in: v1.10 testConfig.metadata

Metadata contains key-value pairs to be included in the report. For example, the JSON report will include metadata serialized as JSON.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  metadata: { title: 'acceptance tests' },});

**Type**

*   [Metadata](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object<string, any>")

* * *

### name[â€‹](#test-config-name "Direct link to name")

Added in: v1.10 testConfig.name

Config name is visible in the report and during test execution, unless overridden by [testProject.name](/docs/api/class-testproject#test-project-name).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  name: 'acceptance tests',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### outputDir[â€‹](#test-config-output-dir "Direct link to outputDir")

Added in: v1.10 testConfig.outputDir

The output directory for files created during test execution. Defaults to `<package.json-directory>/test-results`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  outputDir: './test-results',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

**Details**

This directory is cleaned at the start. When running a test, a unique subdirectory inside the [testConfig.outputDir](/docs/api/class-testconfig#test-config-output-dir) is created, guaranteeing that test running in parallel do not conflict. This directory can be accessed by [testInfo.outputDir](/docs/api/class-testinfo#test-info-output-dir) and [testInfo.outputPath()](/docs/api/class-testinfo#test-info-output-path).

Here is an example that uses [testInfo.outputPath()](/docs/api/class-testinfo#test-info-output-path) to create a temporary file.

    import { test, expect } from '@playwright/test';import fs from 'fs';test('example test', async ({}, testInfo) => {  const file = testInfo.outputPath('temporary-file.txt');  await fs.promises.writeFile(file, 'Put some data to the file', 'utf8');});

* * *

### preserveOutput[â€‹](#test-config-preserve-output "Direct link to preserveOutput")

Added in: v1.10 testConfig.preserveOutput

Whether to preserve test output in the [testConfig.outputDir](/docs/api/class-testconfig#test-config-output-dir). Defaults to `'always'`.

*   `'always'` - preserve output for all tests;
*   `'never'` - do not preserve output for any tests;
*   `'failures-only'` - only preserve output for failed tests.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  preserveOutput: 'always',});

**Type**

*   "always" | "never" | "failures-only"

* * *

### projects[â€‹](#test-config-projects "Direct link to projects")

Added in: v1.10 testConfig.projects

Playwright Test supports running multiple test projects at the same time. See [TestProject](/docs/api/class-testproject "TestProject") for more information.

**Usage**

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  projects: [    { name: 'chromium', use: devices['Desktop Chrome'] }  ]});

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestProject](/docs/api/class-testproject "TestProject")\>

* * *

### quiet[â€‹](#test-config-quiet "Direct link to quiet")

Added in: v1.10 testConfig.quiet

Whether to suppress stdio and stderr output from the tests.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  quiet: !!process.env.CI,});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### repeatEach[â€‹](#test-config-repeat-each "Direct link to repeatEach")

Added in: v1.10 testConfig.repeatEach

The number of times to repeat each test, useful for debugging flaky tests.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  repeatEach: 3,});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### reportSlowTests[â€‹](#test-config-report-slow-tests "Direct link to reportSlowTests")

Added in: v1.10 testConfig.reportSlowTests

Whether to report slow test files. Pass `null` to disable this feature.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reportSlowTests: null,});

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `max` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        The maximum number of slow test files to report. Defaults to `5`.
        
    *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Test file duration in milliseconds that is considered slow. Defaults to 5 minutes.
        

**Details**

Test files that took more than `threshold` milliseconds are considered slow, and the slowest ones are reported, no more than `max` number of them. Passing zero as `max` reports all test files that exceed the threshold.

* * *

### reporter[â€‹](#test-config-reporter "Direct link to reporter")

Added in: v1.10 testConfig.reporter

The list of reporters to use. Each reporter can be:

*   A builtin reporter name like `'list'` or `'json'`.
*   A module name like `'my-awesome-reporter'`.
*   A relative path to the reporter like `'./reporters/my-awesome-reporter.js'`.

You can pass options to the reporter in a tuple like `['json', { outputFile: './report.json' }]`. If the property is not specified, Playwright uses the `'dot'` reporter when the CI environment variable is set, and the `'list'` reporter otherwise.

Learn more in the [reporters guide](/docs/test-reporters).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: 'line',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\> | "list" | "dot" | "line" | "github" | "json" | "junit" | "null" | "html"
    *   `0` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Reporter name or module or file path
        
    *   `1` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
        
        An object with reporter options if any
        

* * *

### respectGitIgnore[â€‹](#test-config-respect-git-ignore "Direct link to respectGitIgnore")

Added in: v1.45 testConfig.respectGitIgnore

Whether to skip entries from `.gitignore` when searching for test files. By default, if neither [testConfig.testDir](/docs/api/class-testconfig#test-config-test-dir) nor [testProject.testDir](/docs/api/class-testproject#test-project-test-dir) are explicitly specified, Playwright will ignore any test files matching `.gitignore` entries.

**Usage**

    testConfig.respectGitIgnore

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### retries[â€‹](#test-config-retries "Direct link to retries")

Added in: v1.10 testConfig.retries

The maximum number of retry attempts given to failed tests. By default failing tests are not retried. Learn more about [test retries](/docs/test-retries#retries).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  retries: 2,});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### shard[â€‹](#test-config-shard "Direct link to shard")

Added in: v1.10 testConfig.shard

Shard tests and execute only the selected shard. Specify in the one-based form like `{ total: 5, current: 2 }`.

Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  shard: { total: 10, current: 3 },});

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `current` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        The index of the shard to execute, one-based.
        
    *   `total` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        The total number of shards.
        

* * *

### snapshotPathTemplate[â€‹](#test-config-snapshot-path-template "Direct link to snapshotPathTemplate")

Added in: v1.28 testConfig.snapshotPathTemplate

This option configures a template controlling location of snapshots generated by [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1), [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot-2) and [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1).

You can configure templates for each assertion separately in [testConfig.expect](/docs/api/class-testconfig#test-config-expect).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testDir: './tests',  // Single template for all assertions  snapshotPathTemplate: '{testDir}/__screenshots__/{testFilePath}/{arg}{ext}',  // Assertion-specific templates  expect: {    toHaveScreenshot: {      pathTemplate: '{testDir}/__screenshots__{/projectName}/{testFilePath}/{arg}{ext}',    },    toMatchAriaSnapshot: {      pathTemplate: '{testDir}/__snapshots__/{testFilePath}/{arg}{ext}',    },  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

**Details**

The value might include some "tokens" that will be replaced with actual values during test execution.

Consider the following file structure:

    playwright.config.tstests/â””â”€â”€ page/    â””â”€â”€ page-click.spec.ts

And the following `page-click.spec.ts` that uses `toHaveScreenshot()` call:

page-click.spec.ts

    import { test, expect } from '@playwright/test';test.describe('suite', () => {  test('test should work', async ({ page }) => {    await expect(page).toHaveScreenshot(['foo', 'bar', 'baz.png']);  });});

The list of supported tokens:

*   `{arg}` - Relative snapshot path **without extension**. This comes from the arguments passed to `toHaveScreenshot()`, `toMatchAriaSnapshot()` or `toMatchSnapshot()`; if called without arguments, this will be an auto-generated snapshot name.
    *   Value: `foo/bar/baz`
*   `{ext}` - Snapshot extension (with the leading dot).
    *   Value: `.png`
*   `{platform}` - The value of `process.platform`.
*   `{projectName}` - Project's file-system-sanitized name, if any.
    *   Value: `''` (empty string).
*   `{snapshotDir}` - Project's [testProject.snapshotDir](/docs/api/class-testproject#test-project-snapshot-dir).
    *   Value: `/home/playwright/tests` (since `snapshotDir` is not provided in config, it defaults to `testDir`)
*   `{testDir}` - Project's [testProject.testDir](/docs/api/class-testproject#test-project-test-dir).
    *   Value: `/home/playwright/tests` (absolute path since `testDir` is resolved relative to directory with config)
*   `{testFileDir}` - Directories in relative path from `testDir` to **test file**.
    *   Value: `page`
*   `{testFileName}` - Test file name with extension.
    *   Value: `page-click.spec.ts`
*   `{testFilePath}` - Relative path from `testDir` to **test file**.
    *   Value: `page/page-click.spec.ts`
*   `{testName}` - File-system-sanitized test title, including parent describes but excluding file name.
    *   Value: `suite-test-should-work`

Each token can be preceded with a single character that will be used **only if** this token has non-empty value.

Consider the following config:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  snapshotPathTemplate: '__screenshots__{/projectName}/{testFilePath}/{arg}{ext}',  testMatch: 'example.spec.ts',  projects: [    { use: { browserName: 'firefox' } },    { name: 'chromium', use: { browserName: 'chromium' } },  ],});

In this config:

1.  First project **does not** have a name, so its snapshots will be stored in `<configDir>/__screenshots__/example.spec.ts/...`.
2.  Second project **does** have a name, so its snapshots will be stored in `<configDir>/__screenshots__/chromium/example.spec.ts/..`.
3.  Since `snapshotPathTemplate` resolves to relative path, it will be resolved relative to `configDir`.
4.  Forward slashes `"/"` can be used as path separators on any platform.

* * *

### tag[â€‹](#test-config-tag "Direct link to tag")

Added in: v1.57 testConfig.tag

Tag or tags prepended to each test in the report. Useful for tagging your test run to differentiate between [CI environments](/docs/test-sharding#merging-reports-from-multiple-environments).

Note that each tag must start with `@` symbol. Learn more about [tagging](/docs/test-annotations#tag-tests).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  tag: process.env.CI_ENVIRONMENT_NAME,  // for example "@APIv2"});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### testDir[â€‹](#test-config-test-dir "Direct link to testDir")

Added in: v1.10 testConfig.testDir

Directory that will be recursively scanned for test files. Defaults to the directory of the configuration file.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testDir: './tests/playwright',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### testIgnore[â€‹](#test-config-test-ignore "Direct link to testIgnore")

Added in: v1.10 testConfig.testIgnore

Files matching one of these patterns are not executed as test files. Matching is performed against the absolute file path. Strings are treated as glob patterns.

For example, `'**/test-assets/**'` will ignore any files in the `test-assets` directory.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testIgnore: '**/test-assets/**',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### testMatch[â€‹](#test-config-test-match "Direct link to testMatch")

Added in: v1.10 testConfig.testMatch

Only the files matching one of these patterns are executed as test files. Matching is performed against the absolute file path. Strings are treated as glob patterns.

By default, Playwright looks for files matching the following glob pattern: `**/*.@(spec|test).?(c|m)[jt]s?(x)`. This means JavaScript or TypeScript files with `".test"` or `".spec"` suffix, for example `login-screen.wrong-credentials.spec.ts`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testMatch: /.*\.e2e\.js/,});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### timeout[â€‹](#test-config-timeout "Direct link to timeout")

Added in: v1.10 testConfig.timeout

Timeout for each test in milliseconds. Defaults to 30 seconds.

This is a base timeout for all tests. In addition, each test can configure its own timeout with [test.setTimeout()](/docs/api/class-test#test-set-timeout). Learn more about [various timeouts](/docs/test-timeouts).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  timeout: 5 * 60 * 1000,});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### tsconfig[â€‹](#test-config-tsconfig "Direct link to tsconfig")

Added in: v1.49 testConfig.tsconfig

Path to a single `tsconfig` applicable to all imported files. By default, `tsconfig` for each imported file is looked up separately. Note that `tsconfig` property has no effect while the configuration file or any of its dependencies are loaded. Ignored when `--tsconfig` command line option is specified.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  tsconfig: './tsconfig.test.json',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### updateSnapshots[â€‹](#test-config-update-snapshots "Direct link to updateSnapshots")

Added in: v1.10 testConfig.updateSnapshots

Whether to update expected snapshots with the actual results produced by the test run. Defaults to `'missing'`.

*   `'all'` - All tests that are executed will update snapshots.
*   `'changed'` - All tests that are executed will update snapshots that did not match. Matching snapshots will not be updated. Also creates missing snapshots.
*   `'missing'` - Missing snapshots are created, for example when authoring a new test and running it for the first time. This is the default.
*   `'none'` - No snapshots are updated.

Learn more about [snapshots](/docs/test-snapshots).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  updateSnapshots: 'missing',});

**Type**

*   "all" | "changed" | "missing" | "none"

* * *

### updateSourceMethod[â€‹](#test-config-update-source-method "Direct link to updateSourceMethod")

Added in: v1.50 testConfig.updateSourceMethod

Defines how to update snapshots in the source code.

*   `'patch'` - Create a unified diff file that can be used to update the source code later. This is the default.
*   `'3way'` - Generate merge conflict markers in source code. This allows user to manually pick relevant changes, as if they are resolving a merge conflict in the IDE.
*   `'overwrite'` - Overwrite the source code with the new snapshot values.

**Usage**

    testConfig.updateSourceMethod

**Type**

*   "overwrite" | "3way" | "patch"

* * *

### use[â€‹](#test-config-use "Direct link to use")

Added in: v1.10 testConfig.use

Global options for all tests, for example [testOptions.browserName](/docs/api/class-testoptions#test-options-browser-name). Learn more about [configuration](/docs/test-configuration) and see [available options](/docs/api/class-testoptions "TestOptions").

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    browserName: 'chromium',  },});

**Type**

*   [TestOptions](/docs/api/class-testoptions "TestOptions")

* * *

### webServer[â€‹](#test-config-web-server "Direct link to webServer")

Added in: v1.10 testConfig.webServer

Launch a development web server (or multiple) during the tests.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: {    command: 'npm run start',    url: 'http://localhost:3000',    timeout: 120 * 1000,    reuseExistingServer: !process.env.CI,  },  use: {    baseURL: 'http://localhost:3000/',  },});

Now you can use a relative path when navigating the page:

test.spec.ts

    import { test } from '@playwright/test';test('test', async ({ page }) => {  // This will result in http://localhost:3000/foo  await page.goto('/foo');});

Multiple web servers (or background processes) can be launched:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: [    {      command: 'npm run start',      url: 'http://localhost:3000',      name: 'Frontend',      timeout: 120 * 1000,      reuseExistingServer: !process.env.CI,    },    {      command: 'npm run backend',      url: 'http://localhost:3333',      name: 'Backend',      timeout: 120 * 1000,      reuseExistingServer: !process.env.CI,    }  ],  use: {    baseURL: 'http://localhost:3000',  },});

If your webserver runs on varying ports, use `wait` to capture the port:

    import { defineConfig } from '@playwright/test';export default defineConfig({  webServer: {    command: 'npm run start',    wait: {      stdout: '/Listening on port (?<my_server_port>\\d+)/'    },  },});

    import { test, expect } from '@playwright/test';test.use({ baseUrl: `http://localhost:${process.env.MY_SERVER_PORT ?? 3000}` });test('homepage', async ({ page }) => {  await page.goto('/');});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `command` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Shell command to start. For example `npm run start`..
        
    *   `cwd` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Current working directory of the spawned process, defaults to the directory of the configuration file.
        
    *   `env` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
        Environment variables to set for the command, `process.env` by default.
        
    *   `gracefulShutdown` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `signal` "SIGINT" | "SIGTERM"
            
        *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        How to shut down the process. If unspecified, the process group is forcefully `SIGKILL`ed. If set to `{ signal: 'SIGTERM', timeout: 500 }`, the process group is sent a `SIGTERM` signal, followed by `SIGKILL` if it doesn't exit within 500ms. You can also use `SIGINT` as the signal instead. A `0` timeout means no `SIGKILL` will be sent. Windows doesn't support `SIGTERM` and `SIGINT` signals, so this option is ignored on Windows. Note that shutting down a Docker container requires `SIGTERM`.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to ignore HTTPS errors when fetching the `url`. Defaults to `false`.
        
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Specifies a custom name for the web server. This name will be prefixed to log messages. Defaults to `[WebServer]`.
        
    *   `port` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        The port that your http server is expected to appear on. It does wait until it accepts connections. Either `port` or `url` should be specified.
        
    *   `reuseExistingServer` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        If true, it will re-use an existing server on the `port` or `url` when available. If no server is running on that `port` or `url`, it will run the command to start a new server. If `false`, it will throw if an existing process is listening on the `port` or `url`. This should be commonly set to `!process.env.CI` to allow the local dev server when running tests locally.
        
    *   `stderr` "pipe" | "ignore" _(optional)_
        
        Whether to pipe the stderr of the command to the process stderr or ignore it. Defaults to `"pipe"`.
        
    *   `stdout` "pipe" | "ignore" _(optional)_
        
        If `"pipe"`, it will pipe the stdout of the command to the process stdout. If `"ignore"`, it will ignore the stdout of the command. Default to `"ignore"`.
        
    *   `wait` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `stdout` [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            Regular expression to wait for in the `stdout` of the command output. Named capture groups are stored in the environment, for example `/Listening on port (?<my_server_port>\\d+)/` will store the port number in `process.env['MY_SERVER_PORT']`.
            
        *   `stderr` [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            Regular expression to wait for in the `stderr` of the command output. Named capture groups are stored in the environment, for example `/Listening on port (?<my_server_port>\\d+)/` will store the port number in `process.env['MY_SERVER_PORT']`.
            
        
        Consider command started only when given output has been produced.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        How long to wait for the process to start up and be available in milliseconds. Defaults to 60000.
        
    *   `url` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        The url on your http server that is expected to return a 2xx, 3xx, 400, 401, 402, or 403 status code when the server is ready to accept connections. Redirects (3xx status codes) are being followed and the new location is checked. Either `port` or `url` should be specified.
        

**Details**

If the port is specified, Playwright Test will wait for it to be available on `127.0.0.1` or `::1`, before running the tests. If the url is specified, Playwright Test will wait for the URL to return a 2xx, 3xx, 400, 401, 402, or 403 status code before running the tests.

For continuous integration, you may want to use the `reuseExistingServer: !process.env.CI` option which does not use an existing server on the CI. To see the stdout, you can set the `DEBUG=pw:webserver` environment variable.

The `port` (but not the `url`) gets passed over to Playwright as a [testOptions.baseURL](/docs/api/class-testoptions#test-options-base-url). For example port `8080` produces `baseURL` equal `http://localhost:8080`. If `webServer` is specified as an array, you must explicitly configure the `baseURL` (even if it only has one entry).

note

It is also recommended to specify [testOptions.baseURL](/docs/api/class-testoptions#test-options-base-url) in the config, so that tests could use relative urls.

* * *

### workers[â€‹](#test-config-workers "Direct link to workers")

Added in: v1.10 testConfig.workers

The maximum number of concurrent worker processes to use for parallelizing tests. Can also be set as percentage of logical CPU cores, e.g. `'50%'.`

Playwright Test uses worker processes to run tests. There is always at least one worker process, but more can be used to speed up test execution.

Defaults to half of the number of logical CPU cores. Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  workers: 3,});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

Deprecated[â€‹](#deprecated "Direct link to Deprecated")
------------------------------------------------------

### snapshotDir[â€‹](#test-config-snapshot-dir "Direct link to snapshotDir")

Added in: v1.10 testConfig.snapshotDir

Discouraged

Use [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) to configure snapshot paths.

The base directory, relative to the config file, for snapshot files created with `toMatchSnapshot`. Defaults to [testConfig.testDir](/docs/api/class-testconfig#test-config-test-dir).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  snapshotDir: './snapshots',});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

**Details**

The directory for each test can be accessed by [testInfo.snapshotDir](/docs/api/class-testinfo#test-info-snapshot-dir) and [testInfo.snapshotPath()](/docs/api/class-testinfo#test-info-snapshot-path).

This path will serve as the base directory for each test file snapshot directory. Setting `snapshotDir` to `'snapshots'`, the [testInfo.snapshotDir](/docs/api/class-testinfo#test-info-snapshot-dir) would resolve to `snapshots/a.spec.js-snapshots`.

# TestInfo

TestInfo
========

`TestInfo` contains information about currently running test. It is available to test functions, [test.beforeEach()](/docs/api/class-test#test-before-each), [test.afterEach()](/docs/api/class-test#test-after-each), [test.beforeAll()](/docs/api/class-test#test-before-all) and [test.afterAll()](/docs/api/class-test#test-after-all) hooks, and test-scoped fixtures. `TestInfo` provides utilities to control test execution: attach files, update test timeout, determine which test is currently running and whether it was retried, etc.

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }, testInfo) => {  expect(testInfo.title).toBe('basic test');  await page.screenshot(testInfo.outputPath('screenshot.png'));});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### attach[â€‹](#test-info-attach "Direct link to attach")

Added in: v1.10 testInfo.attach

Attach a value or a file from disk to the current test. Some reporters show test attachments. Either [path](/docs/api/class-testinfo#test-info-attach-option-path) or [body](/docs/api/class-testinfo#test-info-attach-option-body) must be specified, but not both.

For example, you can attach a screenshot to the test:

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }, testInfo) => {  await page.goto('https://playwright.dev');  const screenshot = await page.screenshot();  await testInfo.attach('screenshot', { body: screenshot, contentType: 'image/png' });});

Or you can attach files returned by your APIs:

    import { test, expect } from '@playwright/test';import { download } from './my-custom-helpers';test('basic test', async ({}, testInfo) => {  const tmpPath = await download('a');  await testInfo.attach('downloaded', { path: tmpPath });});

note

[testInfo.attach()](/docs/api/class-testinfo#test-info-attach) automatically takes care of copying attached files to a location that is accessible to reporters. You can safely remove the attachment after awaiting the attach call.

**Usage**

    await testInfo.attach(name);await testInfo.attach(name, options);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-info-attach-option-name)
    
    Attachment name. The name will also be sanitized and used as the prefix of file name when saving to disk.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `body` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_[#](#test-info-attach-option-body)
        
        Attachment body. Mutually exclusive with [path](/docs/api/class-testinfo#test-info-attach-option-path).
        
    *   `contentType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-info-attach-option-content-type)
        
        Content type of this attachment to properly present in the report, for example `'application/json'` or `'image/png'`. If omitted, content type is inferred based on the [path](/docs/api/class-testinfo#test-info-attach-option-path), or defaults to `text/plain` for [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") attachments and `application/octet-stream` for [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") attachments.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-info-attach-option-path)
        
        Path on the filesystem to the attached file. Mutually exclusive with [body](/docs/api/class-testinfo#test-info-attach-option-body).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#test-info-attach-return)

* * *

### fail()[â€‹](#test-info-fail-1 "Direct link to fail()")

Added in: v1.10 testInfo.fail()

Marks the currently running test as "should fail". Playwright Test runs this test and ensures that it is actually failing. This is useful for documentation purposes to acknowledge that some functionality is broken until it is fixed. This is similar to [test.fail()](/docs/api/class-test#test-fail).

**Usage**

    testInfo.fail();

* * *

### fail(condition)[â€‹](#test-info-fail-2 "Direct link to fail(condition)")

Added in: v1.10 testInfo.fail(condition)

Conditionally mark the currently running test as "should fail" with an optional description. This is similar to [test.fail()](/docs/api/class-test#test-fail).

**Usage**

    testInfo.fail(condition);testInfo.fail(condition, description);

**Arguments**

*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#test-info-fail-2-option-condition)
    
    Test is marked as "should fail" when the condition is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-info-fail-2-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### fixme()[â€‹](#test-info-fixme-1 "Direct link to fixme()")

Added in: v1.10 testInfo.fixme()

Mark a test as "fixme", with the intention to fix it. Test is immediately aborted. This is similar to [test.fixme()](/docs/api/class-test#test-fixme).

**Usage**

    testInfo.fixme();

* * *

### fixme(condition)[â€‹](#test-info-fixme-2 "Direct link to fixme(condition)")

Added in: v1.10 testInfo.fixme(condition)

Conditionally mark the currently running test as "fixme" with an optional description. This is similar to [test.fixme()](/docs/api/class-test#test-fixme).

**Usage**

    testInfo.fixme(condition);testInfo.fixme(condition, description);

**Arguments**

*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#test-info-fixme-2-option-condition)
    
    Test is marked as "fixme" when the condition is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-info-fixme-2-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### outputPath[â€‹](#test-info-output-path "Direct link to outputPath")

Added in: v1.10 testInfo.outputPath

Returns a path inside the [testInfo.outputDir](/docs/api/class-testinfo#test-info-output-dir) where the test can safely put a temporary file. Guarantees that tests running in parallel will not interfere with each other.

    import { test, expect } from '@playwright/test';import fs from 'fs';test('example test', async ({}, testInfo) => {  const file = testInfo.outputPath('dir', 'temporary-file.txt');  await fs.promises.writeFile(file, 'Put some data to the dir/temporary-file.txt', 'utf8');});

> Note that `pathSegments` accepts path segments to the test output directory such as `testInfo.outputPath('relative', 'path', 'to', 'output')`. However, this path must stay within the [testInfo.outputDir](/docs/api/class-testinfo#test-info-output-dir) directory for each test (i.e. `test-results/a-test-title`), otherwise it will throw.

**Usage**

    testInfo.outputPath(...pathSegments);

**Arguments**

*   `...pathSegments` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#test-info-output-path-option-path-segments)
    
    Path segments to append at the end of the resulting path.
    

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-info-output-path-return)

* * *

### setTimeout[â€‹](#test-info-set-timeout "Direct link to setTimeout")

Added in: v1.10 testInfo.setTimeout

Changes the timeout for the currently running test. Zero means no timeout. Learn more about [various timeouts](/docs/test-timeouts).

Timeout is usually specified in the [configuration file](/docs/test-configuration), but it could be useful to change the timeout in certain scenarios:

    import { test, expect } from '@playwright/test';test.beforeEach(async ({ page }, testInfo) => {  // Extend timeout for all tests running this hook by 30 seconds.  testInfo.setTimeout(testInfo.timeout + 30000);});

**Usage**

    testInfo.setTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#test-info-set-timeout-option-timeout)
    
    Timeout in milliseconds.
    

* * *

### skip()[â€‹](#test-info-skip-1 "Direct link to skip()")

Added in: v1.10 testInfo.skip()

Unconditionally skip the currently running test. Test is immediately aborted. This is similar to [test.skip()](/docs/api/class-test#test-skip).

**Usage**

    testInfo.skip();

* * *

### skip(condition)[â€‹](#test-info-skip-2 "Direct link to skip(condition)")

Added in: v1.10 testInfo.skip(condition)

Conditionally skips the currently running test with an optional description. This is similar to [test.skip()](/docs/api/class-test#test-skip).

**Usage**

    testInfo.skip(condition);testInfo.skip(condition, description);

**Arguments**

*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#test-info-skip-2-option-condition)
    
    A skip condition. Test is skipped when the condition is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-info-skip-2-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### slow()[â€‹](#test-info-slow-1 "Direct link to slow()")

Added in: v1.10 testInfo.slow()

Marks the currently running test as "slow", giving it triple the default timeout. This is similar to [test.slow()](/docs/api/class-test#test-slow).

**Usage**

    testInfo.slow();

* * *

### slow(condition)[â€‹](#test-info-slow-2 "Direct link to slow(condition)")

Added in: v1.10 testInfo.slow(condition)

Conditionally mark the currently running test as "slow" with an optional description, giving it triple the default timeout. This is similar to [test.slow()](/docs/api/class-test#test-slow).

**Usage**

    testInfo.slow(condition);testInfo.slow(condition, description);

**Arguments**

*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#test-info-slow-2-option-condition)
    
    Test is marked as "slow" when the condition is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-info-slow-2-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

### snapshotPath[â€‹](#test-info-snapshot-path "Direct link to snapshotPath")

Added in: v1.10 testInfo.snapshotPath

Returns a path to a snapshot file with the given `name`. Pass [kind](/docs/api/class-testinfo#test-info-snapshot-path-option-kind) to obtain a specific path:

*   `kind: 'screenshot'` for [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1);
*   `kind: 'aria'` for [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot);
*   `kind: 'snapshot'` for [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1).

**Usage**

    await expect(page).toHaveScreenshot('header.png');// Screenshot assertion above expects screenshot at this path:const screenshotPath = test.info().snapshotPath('header.png', { kind: 'screenshot' });await expect(page.getByRole('main')).toMatchAriaSnapshot({ name: 'main.aria.yml' });// Aria snapshot assertion above expects snapshot at this path:const ariaSnapshotPath = test.info().snapshotPath('main.aria.yml', { kind: 'aria' });expect('some text').toMatchSnapshot('snapshot.txt');// Snapshot assertion above expects snapshot at this path:const snapshotPath = test.info().snapshotPath('snapshot.txt');expect('some text').toMatchSnapshot(['dir', 'subdir', 'snapshot.txt']);// Snapshot assertion above expects snapshot at this path:const nestedPath = test.info().snapshotPath('dir', 'subdir', 'snapshot.txt');

**Arguments**

*   `...name` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#test-info-snapshot-path-option-name)
    
    The name of the snapshot or the path segments to define the snapshot file path. Snapshots with the same name in the same test file are expected to be the same.
    
    When passing [kind](/docs/api/class-testinfo#test-info-snapshot-path-option-kind), multiple name segments are not supported.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `kind` "snapshot" | "screenshot" | "aria" _(optional)_ Added in: v1.53[#](#test-info-snapshot-path-option-kind)
        
        The snapshot kind controls which snapshot path template is used. See [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) for more details. Defaults to `'snapshot'`.
        

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-info-snapshot-path-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### annotations[â€‹](#test-info-annotations "Direct link to annotations")

Added in: v1.10 testInfo.annotations

The list of annotations applicable to the current test. Includes annotations from the test, annotations from all [test.describe()](/docs/api/class-test#test-describe) groups the test belongs to and file-level annotations for the test file.

Learn more about [test annotations](/docs/test-annotations).

**Usage**

    testInfo.annotations

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Annotation type, for example `'skip'` or `'fail'`.
        
    *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional description.
        
    *   `location` [Location](/docs/api/class-location "Location") _(optional)_
        
        Optional location in the source where the annotation is added.
        

* * *

### attachments[â€‹](#test-info-attachments "Direct link to attachments")

Added in: v1.10 testInfo.attachments

The list of files or buffers attached to the current test. Some reporters show test attachments.

To add an attachment, use [testInfo.attach()](/docs/api/class-testinfo#test-info-attach) instead of directly pushing onto this array.

**Usage**

    testInfo.attachments

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Attachment name.
        
    *   `contentType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Content type of this attachment to properly present in the report, for example `'application/json'` or `'image/png'`.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional path on the filesystem to the attached file.
        
    *   `body` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
        
        Optional attachment body used instead of a file.
        

* * *

### column[â€‹](#test-info-column "Direct link to column")

Added in: v1.10 testInfo.column

Column number where the currently running test is declared.

**Usage**

    testInfo.column

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### config[â€‹](#test-info-config "Direct link to config")

Added in: v1.10 testInfo.config

Processed configuration from the [configuration file](/docs/test-configuration).

**Usage**

    testInfo.config

**Type**

*   [FullConfig](/docs/api/class-fullconfig "FullConfig")

* * *

### duration[â€‹](#test-info-duration "Direct link to duration")

Added in: v1.10 testInfo.duration

The number of milliseconds the test took to finish. Always zero before the test finishes, either successfully or not. Can be used in [test.afterEach()](/docs/api/class-test#test-after-each) hook.

**Usage**

    testInfo.duration

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### error[â€‹](#test-info-error "Direct link to error")

Added in: v1.10 testInfo.error

First error thrown during test execution, if any. This is equal to the first element in [testInfo.errors](/docs/api/class-testinfo#test-info-errors).

**Usage**

    testInfo.error

**Type**

*   [TestInfoError](/docs/api/class-testinfoerror "TestInfoError")

* * *

### errors[â€‹](#test-info-errors "Direct link to errors")

Added in: v1.10 testInfo.errors

Errors thrown during test execution, if any.

**Usage**

    testInfo.errors

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestInfoError](/docs/api/class-testinfoerror "TestInfoError")\>

* * *

### expectedStatus[â€‹](#test-info-expected-status "Direct link to expectedStatus")

Added in: v1.10 testInfo.expectedStatus

Expected status for the currently running test. This is usually `'passed'`, except for a few cases:

*   `'skipped'` for skipped tests, e.g. with [test.skip()](/docs/api/class-test#test-skip);
*   `'failed'` for tests marked as failed with [test.fail()](/docs/api/class-test#test-fail).

Expected status is usually compared with the actual [testInfo.status](/docs/api/class-testinfo#test-info-status):

    import { test, expect } from '@playwright/test';test.afterEach(async ({}, testInfo) => {  if (testInfo.status !== testInfo.expectedStatus)    console.log(`${testInfo.title} did not run as expected!`);});

**Usage**

    testInfo.expectedStatus

**Type**

*   "passed" | "failed" | "timedOut" | "skipped" | "interrupted"

* * *

### file[â€‹](#test-info-file "Direct link to file")

Added in: v1.10 testInfo.file

Absolute path to a file where the currently running test is declared.

**Usage**

    testInfo.file

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### fn[â€‹](#test-info-fn "Direct link to fn")

Added in: v1.10 testInfo.fn

Test function as passed to `test(title, testFunction)`.

**Usage**

    testInfo.fn

**Type**

*   [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")

* * *

### line[â€‹](#test-info-line "Direct link to line")

Added in: v1.10 testInfo.line

Line number where the currently running test is declared.

**Usage**

    testInfo.line

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### outputDir[â€‹](#test-info-output-dir "Direct link to outputDir")

Added in: v1.10 testInfo.outputDir

Absolute path to the output directory for this specific test run. Each test run gets its own directory so they cannot conflict.

**Usage**

    testInfo.outputDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### parallelIndex[â€‹](#test-info-parallel-index "Direct link to parallelIndex")

Added in: v1.10 testInfo.parallelIndex

The index of the worker between `0` and `workers - 1`. It is guaranteed that workers running at the same time have a different `parallelIndex`. When a worker is restarted, for example after a failure, the new worker process has the same `parallelIndex`.

Also available as `process.env.TEST_PARALLEL_INDEX`. Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

    testInfo.parallelIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### project[â€‹](#test-info-project "Direct link to project")

Added in: v1.10 testInfo.project

Processed project configuration from the [configuration file](/docs/test-configuration).

**Usage**

    testInfo.project

**Type**

*   [FullProject](/docs/api/class-fullproject "FullProject")

* * *

### repeatEachIndex[â€‹](#test-info-repeat-each-index "Direct link to repeatEachIndex")

Added in: v1.10 testInfo.repeatEachIndex

Specifies a unique repeat index when running in "repeat each" mode. This mode is enabled by passing `--repeat-each` to the [command line](/docs/test-cli).

**Usage**

    testInfo.repeatEachIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### retry[â€‹](#test-info-retry "Direct link to retry")

Added in: v1.10 testInfo.retry

Specifies the retry number when the test is retried after a failure. The first test run has [testInfo.retry](/docs/api/class-testinfo#test-info-retry) equal to zero, the first retry has it equal to one, and so on. Learn more about [retries](/docs/test-retries#retries).

    import { test, expect } from '@playwright/test';test.beforeEach(async ({}, testInfo) => {  // You can access testInfo.retry in any hook or fixture.  if (testInfo.retry > 0)    console.log(`Retrying!`);});test('my test', async ({ page }, testInfo) => {  // Here we clear some server-side state when retrying.  if (testInfo.retry)    await cleanSomeCachesOnTheServer();  // ...});

**Usage**

    testInfo.retry

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### snapshotDir[â€‹](#test-info-snapshot-dir "Direct link to snapshotDir")

Added in: v1.10 testInfo.snapshotDir

Absolute path to the snapshot output directory for this specific test. Each test suite gets its own directory so they cannot conflict.

This property does not account for the [testProject.snapshotPathTemplate](/docs/api/class-testproject#test-project-snapshot-path-template) configuration.

**Usage**

    testInfo.snapshotDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### snapshotSuffix[â€‹](#test-info-snapshot-suffix "Direct link to snapshotSuffix")

Added in: v1.10 testInfo.snapshotSuffix

note

Use of [testInfo.snapshotSuffix](/docs/api/class-testinfo#test-info-snapshot-suffix) is discouraged. Please use [testConfig.snapshotPathTemplate](/docs/api/class-testconfig#test-config-snapshot-path-template) to configure snapshot paths.

Suffix used to differentiate snapshots between multiple test configurations. For example, if snapshots depend on the platform, you can set `testInfo.snapshotSuffix` equal to `process.platform`. In this case `expect(value).toMatchSnapshot(snapshotName)` will use different snapshots depending on the platform. Learn more about [snapshots](/docs/test-snapshots).

**Usage**

    testInfo.snapshotSuffix

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### status[â€‹](#test-info-status "Direct link to status")

Added in: v1.10 testInfo.status

Actual status for the currently running test. Available after the test has finished in [test.afterEach()](/docs/api/class-test#test-after-each) hook and fixtures.

Status is usually compared with the [testInfo.expectedStatus](/docs/api/class-testinfo#test-info-expected-status):

    import { test, expect } from '@playwright/test';test.afterEach(async ({}, testInfo) => {  if (testInfo.status !== testInfo.expectedStatus)    console.log(`${testInfo.title} did not run as expected!`);});

**Usage**

    testInfo.status

**Type**

*   "passed" | "failed" | "timedOut" | "skipped" | "interrupted"

* * *

### tags[â€‹](#test-info-tags "Direct link to tags")

Added in: v1.43 testInfo.tags

Tags that apply to the test. Learn more about [tags](/docs/test-annotations#tag-tests).

note

Any changes made to this list while the test is running will not be visible to test reporters.

**Usage**

    testInfo.tags

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### testId[â€‹](#test-info-test-id "Direct link to testId")

Added in: v1.32 testInfo.testId

Test id matching the test case id in the reporter API.

**Usage**

    testInfo.testId

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### timeout[â€‹](#test-info-timeout "Direct link to timeout")

Added in: v1.10 testInfo.timeout

Timeout in milliseconds for the currently running test. Zero means no timeout. Learn more about [various timeouts](/docs/test-timeouts).

Timeout is usually specified in the [configuration file](/docs/test-configuration)

    import { test, expect } from '@playwright/test';test.beforeEach(async ({ page }, testInfo) => {  // Extend timeout for all tests running this hook by 30 seconds.  testInfo.setTimeout(testInfo.timeout + 30000);});

**Usage**

    testInfo.timeout

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### title[â€‹](#test-info-title "Direct link to title")

Added in: v1.10 testInfo.title

The title of the currently running test as passed to `test(title, testFunction)`.

**Usage**

    testInfo.title

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### titlePath[â€‹](#test-info-title-path "Direct link to titlePath")

Added in: v1.10 testInfo.titlePath

The full title path starting with the test file name.

**Usage**

    testInfo.titlePath

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### workerIndex[â€‹](#test-info-worker-index "Direct link to workerIndex")

Added in: v1.10 testInfo.workerIndex

The unique index of the worker process that is running the test. When a worker is restarted, for example after a failure, the new worker process gets a new unique `workerIndex`.

Also available as `process.env.TEST_WORKER_INDEX`. Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

    testInfo.workerIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

# TestInfoError

TestInfoError
=============

Information about an error thrown during test execution.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### cause[â€‹](#test-info-error-cause "Direct link to cause")

Added in: v1.49 testInfoError.cause

Error cause. Set when there is a [cause](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause) for the error. Will be `undefined` if there is no cause or if the cause is not an instance of [Error](https://nodejs.org/api/errors.html#errors_class_error "Error").

**Usage**

    testInfoError.cause

**Type**

*   [TestInfoError](/docs/api/class-testinfoerror "TestInfoError")

* * *

### message[â€‹](#test-info-error-message "Direct link to message")

Added in: v1.10 testInfoError.message

Error message. Set when [Error](https://nodejs.org/api/errors.html#errors_class_error "Error") (or its subclass) has been thrown.

**Usage**

    testInfoError.message

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### stack[â€‹](#test-info-error-stack "Direct link to stack")

Added in: v1.10 testInfoError.stack

Error stack. Set when [Error](https://nodejs.org/api/errors.html#errors_class_error "Error") (or its subclass) has been thrown.

**Usage**

    testInfoError.stack

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### value[â€‹](#test-info-error-value "Direct link to value")

Added in: v1.10 testInfoError.value

The value that was thrown. Set when anything except the [Error](https://nodejs.org/api/errors.html#errors_class_error "Error") (or its subclass) has been thrown.

**Usage**

    testInfoError.value

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

# TestOptions

TestOptions
===========

Playwright Test provides many options to configure test environment, [Browser](/docs/api/class-browser "Browser"), [BrowserContext](/docs/api/class-browsercontext "BrowserContext") and more.

These options are usually provided in the [configuration file](/docs/test-configuration) through [testConfig.use](/docs/api/class-testconfig#test-config-use) and [testProject.use](/docs/api/class-testproject#test-project-use).

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    headless: false,    viewport: { width: 1280, height: 720 },    ignoreHTTPSErrors: true,    video: 'on-first-retry',  },});

Alternatively, with [test.use()](/docs/api/class-test#test-use) you can override some options for a file.

example.spec.ts

    import { test, expect } from '@playwright/test';// Run tests in this file with portrait-like viewport.test.use({ viewport: { width: 600, height: 900 } });test('my portrait test', async ({ page }) => {  // ...});

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### acceptDownloads[â€‹](#test-options-accept-downloads "Direct link to acceptDownloads")

Added in: v1.10 testOptions.acceptDownloads

Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    acceptDownloads: false,  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### actionTimeout[â€‹](#test-options-action-timeout "Direct link to actionTimeout")

Added in: v1.10 testOptions.actionTimeout

Default timeout for each Playwright action in milliseconds, defaults to 0 (no timeout).

This is a default timeout for all Playwright actions, same as configured via [page.setDefaultTimeout()](/docs/api/class-page#page-set-default-timeout).

**Usage**

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  use: {    /* Maximum time each action such as `click()` can take. Defaults to 0 (no limit). */    actionTimeout: 0,  },});

Learn more about [various timeouts](/docs/test-timeouts).

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### baseURL[â€‹](#test-options-base-url "Direct link to baseURL")

Added in: v1.10 testOptions.baseURL

When using [page.goto()](/docs/api/class-page#page-goto), [page.route()](/docs/api/class-page#page-route), [page.waitForURL()](/docs/api/class-page#page-wait-for-url), [page.waitForRequest()](/docs/api/class-page#page-wait-for-request), or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:

*   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
*   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
*   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`

**Usage**

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  use: {    /* Base URL to use in actions like `await page.goto('/')`. */    baseURL: 'http://localhost:3000',  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### browserName[â€‹](#test-options-browser-name "Direct link to browserName")

Added in: v1.10 testOptions.browserName

Name of the browser that runs tests. Defaults to `'chromium'`. Most of the time you should set `browserName` in your [TestConfig](/docs/api/class-testconfig "TestConfig"):

**Usage**

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  use: {    browserName: 'firefox',  },});

**Type**

*   "chromium" | "firefox" | "webkit"

* * *

### bypassCSP[â€‹](#test-options-bypass-csp "Direct link to bypassCSP")

Added in: v1.10 testOptions.bypassCSP

Toggles bypassing page's Content-Security-Policy. Defaults to `false`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    bypassCSP: true,  }});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### channel[â€‹](#test-options-channel "Direct link to channel")

Added in: v1.10 testOptions.channel

Browser distribution channel.

Use "chromium" to [opt in to new headless mode](/docs/browsers#chromium-new-headless-mode).

Use "chrome", "chrome-beta", "chrome-dev", "chrome-canary", "msedge", "msedge-beta", "msedge-dev", or "msedge-canary" to use branded [Google Chrome and Microsoft Edge](/docs/browsers#google-chrome--microsoft-edge).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'Microsoft Edge',      use: {        ...devices['Desktop Edge'],        channel: 'msedge'      },    },  ]});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### clientCertificates[â€‹](#test-options-client-certificates "Direct link to clientCertificates")

Added in: 1.46 testOptions.clientCertificates

TLS Client Authentication allows the server to request a client certificate and verify it.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    clientCertificates: [{      origin: 'https://example.com',      certPath: './cert.pem',      keyPath: './key.pem',      passphrase: 'mysecretpassword',    }],  },});

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Exact origin that the certificate is valid for. Origin includes `https` protocol, a hostname and optionally a port.
        
    *   `certPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Path to the file with the certificate in PEM format.
        
    *   `cert` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
        
        Direct value of the certificate in PEM format.
        
    *   `keyPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Path to the file with the private key in PEM format.
        
    *   `key` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
        
        Direct value of the private key in PEM format.
        
    *   `pfxPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Path to the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `pfx` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
        
        Direct value of the PFX or PKCS12 encoded private key and certificate chain.
        
    *   `passphrase` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Passphrase for the private key (PEM or PFX).
        

**Details**

An array of client certificates to be used. Each certificate object must have either both `certPath` and `keyPath`, a single `pfxPath`, or their corresponding direct value equivalents (`cert` and `key`, or `pfx`). Optionally, `passphrase` property should be provided if the certificate is encrypted. The `origin` property should be provided with an exact match to the request origin that the certificate is valid for.

Client certificate authentication is only active when at least one client certificate is provided. If you want to reject all client certificates sent by the server, you need to provide a client certificate with an `origin` that does not match any of the domains you plan to visit.

note

When using WebKit on macOS, accessing `localhost` will not pick up client certificates. You can make it work by replacing `localhost` with `local.playwright`.

* * *

### colorScheme[â€‹](#test-options-color-scheme "Direct link to colorScheme")

Added in: v1.10 testOptions.colorScheme

Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'light'`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    colorScheme: 'dark',  },});

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference"

* * *

### connectOptions[â€‹](#test-options-connect-options "Direct link to connectOptions")

Added in: v1.10 testOptions.connectOptions

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    connectOptions: {      wsEndpoint: 'ws://localhost:5678',    },  },});

When connect options are specified, default [fixtures.browser](/docs/api/class-fixtures#fixtures-browser), [fixtures.context](/docs/api/class-fixtures#fixtures-context) and [fixtures.page](/docs/api/class-fixtures#fixtures-page) use the remote browser instead of launching a browser locally, and any launch options like [testOptions.headless](/docs/api/class-testoptions#test-options-headless) or [testOptions.channel](/docs/api/class-testoptions#test-options-channel) are ignored.

**Type**

*   [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `wsEndpoint` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        A browser websocket endpoint to connect to.
        
    *   `headers` [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
        
        Additional HTTP headers to be sent with web socket connect request. Optional.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Timeout in milliseconds for the connection to be established. Optional, defaults to no timeout.
        
    *   `exposeNetwork` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Option to expose network available on the connecting client to the browser being connected to. See [browserType.connect()](/docs/api/class-browsertype#browser-type-connect) for more details.
        

* * *

### contextOptions[â€‹](#test-options-context-options "Direct link to contextOptions")

Added in: v1.10 testOptions.contextOptions

Options used to create the context, as passed to [browser.newContext()](/docs/api/class-browser#browser-new-context). Specific options like [testOptions.viewport](/docs/api/class-testoptions#test-options-viewport) take priority over this.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    contextOptions: {      reducedMotion: 'reduce',    },  },});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")

* * *

### deviceScaleFactor[â€‹](#test-options-device-scale-factor "Direct link to deviceScaleFactor")

Added in: v1.10 testOptions.deviceScaleFactor

Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/docs/emulation#devices).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    viewport: { width: 2560, height: 1440 },    deviceScaleFactor: 2,  },});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### extraHTTPHeaders[â€‹](#test-options-extra-http-headers "Direct link to extraHTTPHeaders")

Added in: v1.10 testOptions.extraHTTPHeaders

An object containing additional HTTP headers to be sent with every request. Defaults to none.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    extraHTTPHeaders: {      'X-My-Header': 'value',    },  },});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### geolocation[â€‹](#test-options-geolocation "Direct link to geolocation")

Added in: v1.10 testOptions.geolocation

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    geolocation: { longitude: 12.492507, latitude: 41.889938 },  },});

Learn more about [geolocation](/docs/emulation#color-scheme-and-media).

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Latitude between -90 and 90.
        
    *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Longitude between -180 and 180.
        
    *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Non-negative accuracy value. Defaults to `0`.
        

* * *

### hasTouch[â€‹](#test-options-has-touch "Direct link to hasTouch")

Added in: v1.10 testOptions.hasTouch

Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/docs/emulation#devices).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    hasTouch: true  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### headless[â€‹](#test-options-headless "Direct link to headless")

Added in: v1.10 testOptions.headless

Whether to run browser in headless mode. More details for [Chromium](https://developers.google.com/web/updates/2017/04/headless-chrome) and [Firefox](https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/). Defaults to `true` unless the [devtools](/docs/api/class-browsertype#browser-type-launch-option-devtools) option is `true`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    headless: false  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### httpCredentials[â€‹](#test-options-http-credentials "Direct link to httpCredentials")

Added in: v1.10 testOptions.httpCredentials

Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    httpCredentials: {      username: 'user',      password: 'pass',    },  },});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
    *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Restrain sending http credentials on specific origin (scheme://host:port).
        
    *   `send` "unauthorized" | "always" _(optional)_
        
        This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
        

* * *

### ignoreHTTPSErrors[â€‹](#test-options-ignore-https-errors "Direct link to ignoreHTTPSErrors")

Added in: v1.10 testOptions.ignoreHTTPSErrors

Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    ignoreHTTPSErrors: true,  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### isMobile[â€‹](#test-options-is-mobile "Direct link to isMobile")

Added in: v1.10 testOptions.isMobile

Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/docs/emulation#ismobile).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    isMobile: false,  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### javaScriptEnabled[â€‹](#test-options-java-script-enabled "Direct link to javaScriptEnabled")

Added in: v1.10 testOptions.javaScriptEnabled

Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/docs/emulation#javascript-enabled).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    javaScriptEnabled: false,  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### launchOptions[â€‹](#test-options-launch-options "Direct link to launchOptions")

Added in: v1.10 testOptions.launchOptions

Options used to launch the browser, as passed to [browserType.launch()](/docs/api/class-browsertype#browser-type-launch). Specific options [testOptions.headless](/docs/api/class-testoptions#test-options-headless) and [testOptions.channel](/docs/api/class-testoptions#test-options-channel) take priority over this.

warning

Use custom browser args at your own risk, as some of them may break Playwright functionality.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: {        ...devices['Desktop Chrome'],        launchOptions: {          args: ['--start-maximized']        }      }    }  ]});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")

* * *

### locale[â€‹](#test-options-locale "Direct link to locale")

Added in: v1.10 testOptions.locale

Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to `en-US`. Learn more about emulation in our [emulation guide](/docs/emulation#locale--timezone).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    locale: 'it-IT',  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### navigationTimeout[â€‹](#test-options-navigation-timeout "Direct link to navigationTimeout")

Added in: v1.10 testOptions.navigationTimeout

Timeout for each navigation action in milliseconds. Defaults to 0 (no timeout).

This is a default navigation timeout, same as configured via [page.setDefaultNavigationTimeout()](/docs/api/class-page#page-set-default-navigation-timeout).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    navigationTimeout: 3000,  },});

Learn more about [various timeouts](/docs/test-timeouts).

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### offline[â€‹](#test-options-offline "Direct link to offline")

Added in: v1.10 testOptions.offline

Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/docs/emulation#offline).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    offline: true  },});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### permissions[â€‹](#test-options-permissions "Direct link to permissions")

Added in: v1.10 testOptions.permissions

A list of permissions to grant to all pages in this context. See [browserContext.grantPermissions()](/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    permissions: ['notifications'],  },});

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### proxy[â€‹](#test-options-proxy "Direct link to proxy")

Added in: v1.10 testOptions.proxy

Network proxy settings.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    proxy: {      server: 'http://myproxy.com:3128',      bypass: 'localhost',    },  },});

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
        
    *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
        
    *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional username to use if HTTP proxy requires authentication.
        
    *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional password to use if HTTP proxy requires authentication.
        

* * *

### screenshot[â€‹](#test-options-screenshot "Direct link to screenshot")

Added in: v1.10 testOptions.screenshot

Whether to automatically capture a screenshot after each test. Defaults to `'off'`.

*   `'off'`: Do not capture screenshots.
*   `'on'`: Capture screenshot after each test.
*   `'only-on-failure'`: Capture screenshot after each test failure.
*   `'on-first-failure'`: Capture screenshot after each test's first failure.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    screenshot: 'only-on-failure',  },});

Learn more about [automatic screenshots](/docs/test-use-options#recording-options).

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | "off" | "on" | "only-on-failure" | "on-first-failure"
    *   `mode` "off" | "on" | "only-on-failure" | "on-first-failure"
        
        Automatic screenshot mode.
        
    *   `fullPage` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        When true, takes a screenshot of the full scrollable page, instead of the currently visible viewport. Defaults to `false`.
        
    *   `omitBackground` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Hides default white background and allows capturing screenshots with transparency. Not applicable to `jpeg` images. Defaults to `false`.
        

* * *

### serviceWorkers[â€‹](#test-options-service-workers "Direct link to serviceWorkers")

Added in: v1.10 testOptions.serviceWorkers

Whether to allow sites to register Service workers. Defaults to `'allow'`.

*   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
*   `'block'`: Playwright will block all registration of Service Workers.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    serviceWorkers: 'allow'  },});

**Type**

*   "allow" | "block"

* * *

### storageState[â€‹](#test-options-storage-state "Direct link to storageState")

Added in: v1.10 testOptions.storageState

Learn more about [storage state and auth](/docs/auth).

Populates context with given storage state. This option can be used to initialize context with logged-in information obtained via [browserContext.storageState()](/docs/api/class-browsercontext#browser-context-storage-state).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    storageState: 'storage-state.json',  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `cookies` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `domain` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Domain and path are required. For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com"
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Domain and path are required
            
        *   `expires` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Unix time in seconds.
            
        *   `httpOnly` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `secure` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")
            
        *   `sameSite` "Strict" | "Lax" | "None"
            
            sameSite flag
            
        
        Cookies to set for context
        
    *   `origins` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
        
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `localStorage` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
            
            *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            *   `value` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
                
            
            localStorage to set for context
            

**Details**

When storage state is set up in the config, it is possible to reset storage state for a file:

not-signed-in.spec.ts

    import { test } from '@playwright/test';// Reset storage state for this file to avoid being authenticatedtest.use({ storageState: { cookies: [], origins: [] } });test('not signed in test', async ({ page }) => {  // ...});

* * *

### testIdAttribute[â€‹](#test-options-test-id-attribute "Direct link to testIdAttribute")

Added in: v1.27 testOptions.testIdAttribute

Custom attribute to be used in [page.getByTestId()](/docs/api/class-page#page-get-by-test-id). `data-testid` is used by default.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    testIdAttribute: 'pw-test-id',  },});

* * *

### timezoneId[â€‹](#test-options-timezone-id "Direct link to timezoneId")

Added in: v1.10 testOptions.timezoneId

Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    timezoneId: 'Europe/Rome',  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### trace[â€‹](#test-options-trace "Direct link to trace")

Added in: v1.10 testOptions.trace

Whether to record trace for each test. Defaults to `'off'`.

*   `'off'`: Do not record trace.
*   `'on'`: Record trace for each test.
*   `'on-first-retry'`: Record trace only when retrying a test for the first time.
*   `'on-all-retries'`: Record trace only when retrying a test.
*   `'retain-on-failure'`: Record trace for each test. When test run passes, remove the recorded trace.
*   `'retain-on-first-failure'`: Record trace for the first run of each test, but not for retries. When test run passes, remove the recorded trace.

For more control, pass an object that specifies `mode` and trace features to enable.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    trace: 'on-first-retry'  },});

Learn more about [recording trace](/docs/test-use-options#recording-options).

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | "off" | "on" | "retain-on-failure" | "on-first-retry" | "retain-on-first-failure"
    *   `mode` "off" | "on" | "retain-on-failure" | "on-first-retry" | "on-all-retries" | "retain-on-first-failure"
        
        Trace recording mode.
        
    *   `attachments` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to include test attachments. Defaults to true. Optional.
        
    *   `screenshots` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to capture screenshots during tracing. Screenshots are used to build a timeline preview. Defaults to true. Optional.
        
    *   `snapshots` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to capture DOM snapshot on every action. Defaults to true. Optional.
        
    *   `sources` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
        
        Whether to include source files for trace actions. Defaults to true. Optional.
        

* * *

### userAgent[â€‹](#test-options-user-agent "Direct link to userAgent")

Added in: v1.10 testOptions.userAgent

Specific user agent to use in this context.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    userAgent: 'some custom ua',  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### video[â€‹](#test-options-video "Direct link to video")

Added in: v1.10 testOptions.video

Whether to record video for each test. Defaults to `'off'`.

*   `'off'`: Do not record video.
*   `'on'`: Record video for each test.
*   `'retain-on-failure'`: Record video for each test, but remove all videos from successful test runs.
*   `'on-first-retry'`: Record video only when retrying a test for the first time.

To control video size, pass an object with `mode` and `size` properties. If video size is not specified, it will be equal to [testOptions.viewport](/docs/api/class-testoptions#test-options-viewport) scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    video: 'on-first-retry',  },});

Learn more about [recording video](/docs/test-use-options#recording-options).

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") | "off" | "on" | "retain-on-failure" | "on-first-retry"
    *   `mode` "off" | "on" | "retain-on-failure" | "on-first-retry"
        
        Video recording mode.
        
    *   `size` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
        
        Size of the recorded video. Optional.
        

* * *

### viewport[â€‹](#test-options-viewport "Direct link to viewport")

Added in: v1.10 testOptions.viewport

Emulates consistent viewport for each page. Defaults to an 1280x720 viewport. Use `null` to disable the consistent viewport emulation. Learn more about [viewport emulation](/docs/emulation#viewport).

note

The `null` value opts out from the default presets, makes viewport depend on the host window size defined by the operating system. It makes the execution of the tests non-deterministic.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  use: {    viewport: { width: 100, height: 100 },  },});

**Type**

*   [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        page width in pixels.
        
    *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        page height in pixels.

# TestProject

TestProject
===========

Playwright Test supports running multiple test projects at the same time. This is useful for running tests in multiple configurations. For example, consider running tests against multiple browsers. This type describes format of a project in the configuration file, to access resolved configuration parameters at run time use [FullProject](/docs/api/class-fullproject "FullProject").

`TestProject` encapsulates configuration specific to a single project. Projects are configured in [testConfig.projects](/docs/api/class-testconfig#test-config-projects) specified in the [configuration file](/docs/test-configuration). Note that all properties of [TestProject](/docs/api/class-testproject "TestProject") are available in the top-level [TestConfig](/docs/api/class-testconfig "TestConfig"), in which case they are shared between all projects.

Here is an example configuration that runs every test in Chromium, Firefox and WebKit, both Desktop and Mobile versions.

playwright.config.ts

    import { defineConfig, devices } from '@playwright/test';export default defineConfig({  // Options shared for all projects.  timeout: 30000,  use: {    ignoreHTTPSErrors: true,  },  // Options specific to each project.  projects: [    {      name: 'chromium',      use: devices['Desktop Chrome'],    },    {      name: 'firefox',      use: devices['Desktop Firefox'],    },    {      name: 'webkit',      use: devices['Desktop Safari'],    },    {      name: 'Mobile Chrome',      use: devices['Pixel 5'],    },    {      name: 'Mobile Safari',      use: devices['iPhone 12'],    },  ],});

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### dependencies[â€‹](#test-project-dependencies "Direct link to dependencies")

Added in: v1.31 testProject.dependencies

List of projects that need to run before any test in this project runs. Dependencies can be useful for configuring the global setup actions in a way that every action is in a form of a test. Passing `--no-deps` argument ignores the dependencies and behaves as if they were not specified.

Using dependencies allows global setup to produce traces and other artifacts, see the setup steps in the test report, etc.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'setup',      testMatch: /global.setup\.ts/,    },    {      name: 'chromium',      use: devices['Desktop Chrome'],      dependencies: ['setup'],    },    {      name: 'firefox',      use: devices['Desktop Firefox'],      dependencies: ['setup'],    },    {      name: 'webkit',      use: devices['Desktop Safari'],      dependencies: ['setup'],    },  ],});

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### expect[â€‹](#test-project-expect "Direct link to expect")

Added in: v1.10 testProject.expect

Configuration for the `expect` assertion library.

Use [testConfig.expect](/docs/api/class-testconfig#test-config-expect) to change this option for all projects.

**Usage**

    testProject.expect

**Type**

*   [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        Default timeout for async expect matchers in milliseconds, defaults to 5000ms.
        
    *   `toHaveScreenshot` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            an acceptable perceived color difference between the same pixel in compared images, ranging from `0` (strict) and `1` (lax). `"pixelmatch"` comparator computes color difference in [YIQ color space](https://en.wikipedia.org/wiki/YIQ) and defaults `threshold` value to `0.2`.
            
        *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            an acceptable amount of pixels that could be different, unset by default.
            
        *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            an acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1` , unset by default.
            
        *   `animations` "allow" | "disabled" _(optional)_
            
            See [animations](/docs/api/class-page#page-screenshot-option-animations) in [page.screenshot()](/docs/api/class-page#page-screenshot). Defaults to `"disabled"`.
            
        *   `caret` "hide" | "initial" _(optional)_
            
            See [caret](/docs/api/class-page#page-screenshot-option-caret) in [page.screenshot()](/docs/api/class-page#page-screenshot). Defaults to `"hide"`.
            
        *   `scale` "css" | "device" _(optional)_
            
            See [scale](/docs/api/class-page#page-screenshot-option-scale) in [page.screenshot()](/docs/api/class-page#page-screenshot). Defaults to `"css"`.
            
        *   `stylePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_
            
            See [style](/docs/api/class-page#page-screenshot-option-style) in [page.screenshot()](/docs/api/class-page#page-screenshot).
            
        *   `pathTemplate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            A template controlling location of the screenshots. See [testProject.snapshotPathTemplate](/docs/api/class-testproject#test-project-snapshot-path-template) for details.
            
        
        Configuration for the [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1) method.
        
    *   `toMatchAriaSnapshot` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `pathTemplate` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            A template controlling location of the aria snapshots. See [testProject.snapshotPathTemplate](/docs/api/class-testproject#test-project-snapshot-path-template) for details.
            
        
        Configuration for the [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot-2) method.
        
    *   `toMatchSnapshot` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `threshold` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            an acceptable perceived color difference between the same pixel in compared images, ranging from `0` (strict) and `1` (lax). `"pixelmatch"` comparator computes color difference in [YIQ color space](https://en.wikipedia.org/wiki/YIQ) and defaults `threshold` value to `0.2`.
            
        *   `maxDiffPixels` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            an acceptable amount of pixels that could be different, unset by default.
            
        *   `maxDiffPixelRatio` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            an acceptable ratio of pixels that are different to the total amount of pixels, between `0` and `1` , unset by default.
            
        
        Configuration for the [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1) method.
        
    *   `toPass` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
        
        *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            timeout for toPass method in milliseconds.
            
        *   `intervals` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")\> _(optional)_
            
            probe intervals for toPass method in milliseconds.
            
        
        Configuration for the [expect(value).toPass()](/docs/test-assertions) method.
        

* * *

### fullyParallel[â€‹](#test-project-fully-parallel "Direct link to fullyParallel")

Added in: v1.10 testProject.fullyParallel

Playwright Test runs tests in parallel. In order to achieve that, it runs several worker processes that run at the same time. By default, **test files** are run in parallel. Tests in a single file are run in order, in the same worker process.

You can configure entire test project to concurrently run all tests in all files using this option.

**Usage**

    testProject.fullyParallel

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### grep[â€‹](#test-project-grep "Direct link to grep")

Added in: v1.10 testProject.grep

Filter to only run tests with a title matching one of the patterns. For example, passing `grep: /cart/` should only run tests with "cart" in the title. Also available globally and in the [command line](/docs/test-cli) with the `-g` option. The regular expression will be tested against the string that consists of the project name, the test file name, the `test.describe` name (if any), the test name and the test tags divided by spaces, e.g. `chromium my-test.spec.ts my-suite my-test`.

`grep` option is also useful for [tagging tests](/docs/test-annotations#tag-tests).

**Usage**

    testProject.grep

**Type**

*   [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### grepInvert[â€‹](#test-project-grep-invert "Direct link to grepInvert")

Added in: v1.10 testProject.grepInvert

Filter to only run tests with a title **not** matching any of the patterns. This is the opposite of [testProject.grep](/docs/api/class-testproject#test-project-grep). Also available globally and in the [command line](/docs/test-cli) with the `--grep-invert` option.

`grepInvert` option is also useful for [tagging tests](/docs/test-annotations#tag-tests).

**Usage**

    testProject.grepInvert

**Type**

*   [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### ignoreSnapshots[â€‹](#test-project-ignore-snapshots "Direct link to ignoreSnapshots")

Added in: v1.44 testProject.ignoreSnapshots

Whether to skip snapshot expectations, such as `expect(value).toMatchSnapshot()` and `await expect(page).toHaveScreenshot()`.

**Usage**

The following example will only perform screenshot assertions on Chromium.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'chromium',      use: devices['Desktop Chrome'],    },    {      name: 'firefox',      use: devices['Desktop Firefox'],      ignoreSnapshots: true,    },    {      name: 'webkit',      use: devices['Desktop Safari'],      ignoreSnapshots: true,    },  ],});

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### metadata[â€‹](#test-project-metadata "Direct link to metadata")

Added in: v1.10 testProject.metadata

Metadata that will be put directly to the test report serialized as JSON.

**Usage**

    testProject.metadata

**Type**

*   [Metadata](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object<string, any>")

* * *

### name[â€‹](#test-project-name "Direct link to name")

Added in: v1.10 testProject.name

Project name is visible in the report and during test execution.

warning

Playwright executes the configuration file multiple times. Do not dynamically produce non-stable values in your configuration.

**Usage**

    testProject.name

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### outputDir[â€‹](#test-project-output-dir "Direct link to outputDir")

Added in: v1.10 testProject.outputDir

The output directory for files created during test execution. Defaults to `<package.json-directory>/test-results`.

This directory is cleaned at the start. When running a test, a unique subdirectory inside the [testProject.outputDir](/docs/api/class-testproject#test-project-output-dir) is created, guaranteeing that test running in parallel do not conflict. This directory can be accessed by [testInfo.outputDir](/docs/api/class-testinfo#test-info-output-dir) and [testInfo.outputPath()](/docs/api/class-testinfo#test-info-output-path).

Here is an example that uses [testInfo.outputPath()](/docs/api/class-testinfo#test-info-output-path) to create a temporary file.

    import { test, expect } from '@playwright/test';import fs from 'fs';test('example test', async ({}, testInfo) => {  const file = testInfo.outputPath('temporary-file.txt');  await fs.promises.writeFile(file, 'Put some data to the file', 'utf8');});

Use [testConfig.outputDir](/docs/api/class-testconfig#test-config-output-dir) to change this option for all projects.

**Usage**

    testProject.outputDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### repeatEach[â€‹](#test-project-repeat-each "Direct link to repeatEach")

Added in: v1.10 testProject.repeatEach

The number of times to repeat each test, useful for debugging flaky tests.

Use [testConfig.repeatEach](/docs/api/class-testconfig#test-config-repeat-each) to change this option for all projects.

**Usage**

    testProject.repeatEach

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### respectGitIgnore[â€‹](#test-project-respect-git-ignore "Direct link to respectGitIgnore")

Added in: v1.45 testProject.respectGitIgnore

Whether to skip entries from `.gitignore` when searching for test files. By default, if neither [testConfig.testDir](/docs/api/class-testconfig#test-config-test-dir) nor [testProject.testDir](/docs/api/class-testproject#test-project-test-dir) are explicitly specified, Playwright will ignore any test files matching `.gitignore` entries. This option allows to override that behavior.

**Usage**

    testProject.respectGitIgnore

**Type**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")

* * *

### retries[â€‹](#test-project-retries "Direct link to retries")

Added in: v1.10 testProject.retries

The maximum number of retry attempts given to failed tests. Learn more about [test retries](/docs/test-retries#retries).

Use [test.describe.configure()](/docs/api/class-test#test-describe-configure) to change the number of retries for a specific file or a group of tests.

Use [testConfig.retries](/docs/api/class-testconfig#test-config-retries) to change this option for all projects.

**Usage**

    testProject.retries

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### snapshotDir[â€‹](#test-project-snapshot-dir "Direct link to snapshotDir")

Added in: v1.10 testProject.snapshotDir

The base directory, relative to the config file, for snapshot files created with `toMatchSnapshot`. Defaults to [testProject.testDir](/docs/api/class-testproject#test-project-test-dir).

The directory for each test can be accessed by [testInfo.snapshotDir](/docs/api/class-testinfo#test-info-snapshot-dir) and [testInfo.snapshotPath()](/docs/api/class-testinfo#test-info-snapshot-path).

This path will serve as the base directory for each test file snapshot directory. Setting `snapshotDir` to `'snapshots'`, the [testInfo.snapshotDir](/docs/api/class-testinfo#test-info-snapshot-dir) would resolve to `snapshots/a.spec.js-snapshots`.

**Usage**

    testProject.snapshotDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### snapshotPathTemplate[â€‹](#test-project-snapshot-path-template "Direct link to snapshotPathTemplate")

Added in: v1.28 testProject.snapshotPathTemplate

This option configures a template controlling location of snapshots generated by [expect(page).toHaveScreenshot()](/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1), [expect(locator).toMatchAriaSnapshot()](/docs/api/class-locatorassertions#locator-assertions-to-match-aria-snapshot-2) and [expect(value).toMatchSnapshot()](/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1).

You can configure templates for each assertion separately in [testConfig.expect](/docs/api/class-testconfig#test-config-expect).

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  testDir: './tests',  // Single template for all assertions  snapshotPathTemplate: '{testDir}/__screenshots__/{testFilePath}/{arg}{ext}',  // Assertion-specific templates  expect: {    toHaveScreenshot: {      pathTemplate: '{testDir}/__screenshots__{/projectName}/{testFilePath}/{arg}{ext}',    },    toMatchAriaSnapshot: {      pathTemplate: '{testDir}/__snapshots__/{testFilePath}/{arg}{ext}',    },  },});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

**Details**

The value might include some "tokens" that will be replaced with actual values during test execution.

Consider the following file structure:

    playwright.config.tstests/â””â”€â”€ page/    â””â”€â”€ page-click.spec.ts

And the following `page-click.spec.ts` that uses `toHaveScreenshot()` call:

page-click.spec.ts

    import { test, expect } from '@playwright/test';test.describe('suite', () => {  test('test should work', async ({ page }) => {    await expect(page).toHaveScreenshot(['foo', 'bar', 'baz.png']);  });});

The list of supported tokens:

*   `{arg}` - Relative snapshot path **without extension**. This comes from the arguments passed to `toHaveScreenshot()`, `toMatchAriaSnapshot()` or `toMatchSnapshot()`; if called without arguments, this will be an auto-generated snapshot name.
    *   Value: `foo/bar/baz`
*   `{ext}` - Snapshot extension (with the leading dot).
    *   Value: `.png`
*   `{platform}` - The value of `process.platform`.
*   `{projectName}` - Project's file-system-sanitized name, if any.
    *   Value: `''` (empty string).
*   `{snapshotDir}` - Project's [testProject.snapshotDir](/docs/api/class-testproject#test-project-snapshot-dir).
    *   Value: `/home/playwright/tests` (since `snapshotDir` is not provided in config, it defaults to `testDir`)
*   `{testDir}` - Project's [testProject.testDir](/docs/api/class-testproject#test-project-test-dir).
    *   Value: `/home/playwright/tests` (absolute path since `testDir` is resolved relative to directory with config)
*   `{testFileDir}` - Directories in relative path from `testDir` to **test file**.
    *   Value: `page`
*   `{testFileName}` - Test file name with extension.
    *   Value: `page-click.spec.ts`
*   `{testFilePath}` - Relative path from `testDir` to **test file**.
    *   Value: `page/page-click.spec.ts`
*   `{testName}` - File-system-sanitized test title, including parent describes but excluding file name.
    *   Value: `suite-test-should-work`

Each token can be preceded with a single character that will be used **only if** this token has non-empty value.

Consider the following config:

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  snapshotPathTemplate: '__screenshots__{/projectName}/{testFilePath}/{arg}{ext}',  testMatch: 'example.spec.ts',  projects: [    { use: { browserName: 'firefox' } },    { name: 'chromium', use: { browserName: 'chromium' } },  ],});

In this config:

1.  First project **does not** have a name, so its snapshots will be stored in `<configDir>/__screenshots__/example.spec.ts/...`.
2.  Second project **does** have a name, so its snapshots will be stored in `<configDir>/__screenshots__/chromium/example.spec.ts/..`.
3.  Since `snapshotPathTemplate` resolves to relative path, it will be resolved relative to `configDir`.
4.  Forward slashes `"/"` can be used as path separators on any platform.

* * *

### teardown[â€‹](#test-project-teardown "Direct link to teardown")

Added in: v1.34 testProject.teardown

Name of a project that needs to run after this and all dependent projects have finished. Teardown is useful to cleanup any resources acquired by this project.

Passing `--no-deps` argument ignores [testProject.teardown](/docs/api/class-testproject#test-project-teardown) and behaves as if it was not specified.

**Usage**

A common pattern is a "setup" dependency that has a corresponding "teardown":

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'setup',      testMatch: /global.setup\.ts/,      teardown: 'teardown',    },    {      name: 'teardown',      testMatch: /global.teardown\.ts/,    },    {      name: 'chromium',      use: devices['Desktop Chrome'],      dependencies: ['setup'],    },    {      name: 'firefox',      use: devices['Desktop Firefox'],      dependencies: ['setup'],    },    {      name: 'webkit',      use: devices['Desktop Safari'],      dependencies: ['setup'],    },  ],});

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### testDir[â€‹](#test-project-test-dir "Direct link to testDir")

Added in: v1.10 testProject.testDir

Directory that will be recursively scanned for test files. Defaults to the directory of the configuration file.

Each project can use a different directory. Here is an example that runs smoke tests in three browsers and all other tests in stable Chrome browser.

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'Smoke Chromium',      testDir: './smoke-tests',      use: {        browserName: 'chromium',      }    },    {      name: 'Smoke WebKit',      testDir: './smoke-tests',      use: {        browserName: 'webkit',      }    },    {      name: 'Smoke Firefox',      testDir: './smoke-tests',      use: {        browserName: 'firefox',      }    },    {      name: 'Chrome Stable',      testDir: './',      use: {        browserName: 'chromium',        channel: 'chrome',      }    },  ],});

Use [testConfig.testDir](/docs/api/class-testconfig#test-config-test-dir) to change this option for all projects.

**Usage**

    testProject.testDir

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### testIgnore[â€‹](#test-project-test-ignore "Direct link to testIgnore")

Added in: v1.10 testProject.testIgnore

Files matching one of these patterns are not executed as test files. Matching is performed against the absolute file path. Strings are treated as glob patterns.

For example, `'**/test-assets/**'` will ignore any files in the `test-assets` directory.

Use [testConfig.testIgnore](/docs/api/class-testconfig#test-config-test-ignore) to change this option for all projects.

**Usage**

    testProject.testIgnore

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### testMatch[â€‹](#test-project-test-match "Direct link to testMatch")

Added in: v1.10 testProject.testMatch

Only the files matching one of these patterns are executed as test files. Matching is performed against the absolute file path. Strings are treated as glob patterns.

By default, Playwright looks for files matching the following glob pattern: `**/*.@(spec|test).?(c|m)[jt]s?(x)`. This means JavaScript or TypeScript files with `".test"` or `".spec"` suffix, for example `login-screen.wrong-credentials.spec.ts`.

Use [testConfig.testMatch](/docs/api/class-testconfig#test-config-test-match) to change this option for all projects.

**Usage**

    testProject.testMatch

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") | [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp")\>

* * *

### timeout[â€‹](#test-project-timeout "Direct link to timeout")

Added in: v1.10 testProject.timeout

Timeout for each test in milliseconds. Defaults to 30 seconds.

This is a base timeout for all tests. Each test can configure its own timeout with [test.setTimeout()](/docs/api/class-test#test-set-timeout). Each file or a group of tests can configure the timeout with [test.describe.configure()](/docs/api/class-test#test-describe-configure).

Use [testConfig.timeout](/docs/api/class-testconfig#test-config-timeout) to change this option for all projects.

**Usage**

    testProject.timeout

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### use[â€‹](#test-project-use "Direct link to use")

Added in: v1.10 testProject.use

Options for all tests in this project, for example [testOptions.browserName](/docs/api/class-testoptions#test-options-browser-name). Learn more about [configuration](/docs/test-configuration) and see [available options](/docs/api/class-testoptions "TestOptions").

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  projects: [    {      name: 'Chromium',      use: {        browserName: 'chromium',      },    },  ],});

Use [testConfig.use](/docs/api/class-testconfig#test-config-use) to change this option for all projects.

**Usage**

    testProject.use

**Type**

*   [TestOptions](/docs/api/class-testoptions "TestOptions")

* * *

### workers[â€‹](#test-project-workers "Direct link to workers")

Added in: v1.52 testProject.workers

The maximum number of concurrent worker processes to use for parallelizing tests from this project. Can also be set as percentage of logical CPU cores, e.g. `'50%'.`

This could be useful, for example, when all tests from a project share a single resource like a test account, and therefore cannot be executed in parallel. Limiting workers to one for such a project will prevent simultaneous use of the shared resource.

Note that the global [testConfig.workers](/docs/api/class-testconfig#test-config-workers) limit applies to the total number of worker processes. However, Playwright will limit the number of workers used for this project by the value of [testProject.workers](/docs/api/class-testproject#test-project-workers).

By default, there is no limit per project. See [testConfig.workers](/docs/api/class-testconfig#test-config-workers) for the default of the total worker limit.

**Usage**

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  workers: 10,  // total workers limit  projects: [    {      name: 'runs in parallel',    },    {      name: 'one at a time',      workers: 1,  // workers limit for this project    },  ],});

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

# TestStepInfo

TestStepInfo
============

`TestStepInfo` contains information about currently running test step. It is passed as an argument to the step function. `TestStepInfo` provides utilities to control test step execution.

    import { test, expect } from '@playwright/test';test('basic test', async ({ page, browserName }) => {  await test.step('check some behavior', async step => {    step.skip(browserName === 'webkit', 'The feature is not available in WebKit');    // ... rest of the step code  });});

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### attach[â€‹](#test-step-info-attach "Direct link to attach")

Added in: v1.51 testStepInfo.attach

Attach a value or a file from disk to the current test step. Some reporters show test step attachments. Either [path](/docs/api/class-teststepinfo#test-step-info-attach-option-path) or [body](/docs/api/class-teststepinfo#test-step-info-attach-option-body) must be specified, but not both. Calling this method will attribute the attachment to the step, as opposed to [testInfo.attach()](/docs/api/class-testinfo#test-info-attach) which stores all attachments at the test level.

For example, you can attach a screenshot to the test step:

    import { test, expect } from '@playwright/test';test('basic test', async ({ page }) => {  await page.goto('https://playwright.dev');  await test.step('check page rendering', async step => {    const screenshot = await page.screenshot();    await step.attach('screenshot', { body: screenshot, contentType: 'image/png' });  });});

Or you can attach files returned by your APIs:

    import { test, expect } from '@playwright/test';import { download } from './my-custom-helpers';test('basic test', async ({}) => {  await test.step('check download behavior', async step => {    const tmpPath = await download('a');    await step.attach('downloaded', { path: tmpPath });  });});

note

[testStepInfo.attach()](/docs/api/class-teststepinfo#test-step-info-attach) automatically takes care of copying attached files to a location that is accessible to reporters. You can safely remove the attachment after awaiting the attach call.

**Usage**

    await testStepInfo.attach(name);await testStepInfo.attach(name, options);

**Arguments**

*   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#test-step-info-attach-option-name)
    
    Attachment name. The name will also be sanitized and used as the prefix of file name when saving to disk.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `body` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_[#](#test-step-info-attach-option-body)
        
        Attachment body. Mutually exclusive with [path](/docs/api/class-teststepinfo#test-step-info-attach-option-path).
        
    *   `contentType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-step-info-attach-option-content-type)
        
        Content type of this attachment to properly present in the report, for example `'application/json'` or `'image/png'`. If omitted, content type is inferred based on the [path](/docs/api/class-teststepinfo#test-step-info-attach-option-path), or defaults to `text/plain` for [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") attachments and `application/octet-stream` for [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") attachments.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-step-info-attach-option-path)
        
        Path on the filesystem to the attached file. Mutually exclusive with [body](/docs/api/class-teststepinfo#test-step-info-attach-option-body).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#test-step-info-attach-return)

* * *

### skip()[â€‹](#test-step-info-skip-1 "Direct link to skip()")

Added in: v1.51 testStepInfo.skip()

Abort the currently running step and mark it as skipped. Useful for steps that are currently failing and planned for a near-term fix.

**Usage**

    import { test, expect } from '@playwright/test';test('my test', async ({ page }) => {  await test.step('check expectations', async step => {    step.skip();    // step body below will not run    // ...  });});

* * *

### skip(condition)[â€‹](#test-step-info-skip-2 "Direct link to skip(condition)")

Added in: v1.51 testStepInfo.skip(condition)

Conditionally abort the currently running step and mark it as skipped with an optional description. Useful for steps that should not be executed in some cases.

**Usage**

    import { test, expect } from '@playwright/test';test('my test', async ({ page, isMobile }) => {  await test.step('check desktop expectations', async step => {    step.skip(isMobile, 'not present in the mobile layout');    // step body below will not run    // ...  });});

**Arguments**

*   `condition` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#test-step-info-skip-2-option-condition)
    
    A skip condition. Test step is skipped when the condition is `true`.
    
*   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#test-step-info-skip-2-option-description)
    
    Optional description that will be reflected in a test report.
    

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### titlePath[â€‹](#test-step-info-title-path "Direct link to titlePath")

Added in: v1.55 testStepInfo.titlePath

The full title path starting with the test file name, including the step titles. See also [testInfo.titlePath](/docs/api/class-testinfo#test-info-title-path).

**Usage**

    testStepInfo.titlePath

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

# WorkerInfo

WorkerInfo
==========

`WorkerInfo` contains information about the worker that is running tests and is available to worker-scoped fixtures. `WorkerInfo` is a subset of [TestInfo](/docs/api/class-testinfo "TestInfo") that is available in many other places.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### config[â€‹](#worker-info-config "Direct link to config")

Added in: v1.10 workerInfo.config

Processed configuration from the [configuration file](/docs/test-configuration).

**Usage**

    workerInfo.config

**Type**

*   [FullConfig](/docs/api/class-fullconfig "FullConfig")

* * *

### parallelIndex[â€‹](#worker-info-parallel-index "Direct link to parallelIndex")

Added in: v1.10 workerInfo.parallelIndex

The index of the worker between `0` and `workers - 1`. It is guaranteed that workers running at the same time have a different `parallelIndex`. When a worker is restarted, for example after a failure, the new worker process has the same `parallelIndex`.

Also available as `process.env.TEST_PARALLEL_INDEX`. Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

    workerInfo.parallelIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### project[â€‹](#worker-info-project "Direct link to project")

Added in: v1.10 workerInfo.project

Processed project configuration from the [configuration file](/docs/test-configuration).

**Usage**

    workerInfo.project

**Type**

*   [FullProject](/docs/api/class-fullproject "FullProject")

* * *

### workerIndex[â€‹](#worker-info-worker-index "Direct link to workerIndex")

Added in: v1.10 workerInfo.workerIndex

The unique index of the worker process that is running the test. When a worker is restarted, for example after a failure, the new worker process gets a new unique `workerIndex`.

Also available as `process.env.TEST_WORKER_INDEX`. Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

    workerInfo.workerIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

# Reporter

Reporter
========

Test runner notifies the reporter about various events during test execution. All methods of the reporter are optional.

You can create a custom reporter by implementing a class with some of the reporter methods. Make sure to export this class as default.

*   TypeScript
*   JavaScript

my-awesome-reporter.ts

    import type {  Reporter, FullConfig, Suite, TestCase, TestResult, FullResult} from '@playwright/test/reporter';class MyReporter implements Reporter {  constructor(options: { customOption?: string } = {}) {    console.log(`my-awesome-reporter setup with customOption set to ${options.customOption}`);  }  onBegin(config: FullConfig, suite: Suite) {    console.log(`Starting the run with ${suite.allTests().length} tests`);  }  onTestBegin(test: TestCase) {    console.log(`Starting test ${test.title}`);  }  onTestEnd(test: TestCase, result: TestResult) {    console.log(`Finished test ${test.title}: ${result.status}`);  }  onEnd(result: FullResult) {    console.log(`Finished the run: ${result.status}`);  }}export default MyReporter;

my-awesome-reporter.js

    // @ts-check/** @implements {import('@playwright/test/reporter').Reporter} */class MyReporter {  constructor(options) {    console.log(`my-awesome-reporter setup with customOption set to ${options.customOption}`);  }  onBegin(config, suite) {    console.log(`Starting the run with ${suite.allTests().length} tests`);  }  onTestBegin(test) {    console.log(`Starting test ${test.title}`);  }  onTestEnd(test, result) {    console.log(`Finished test ${test.title}: ${result.status}`);  }  onEnd(result) {    console.log(`Finished the run: ${result.status}`);  }}module.exports = MyReporter;

Now use this reporter with [testConfig.reporter](/docs/api/class-testconfig#test-config-reporter). Learn more about [using reporters](/docs/test-reporters).

playwright.config.ts

    import { defineConfig } from '@playwright/test';export default defineConfig({  reporter: [['./my-awesome-reporter.ts', { customOption: 'some value' }]],});

Here is a typical order of reporter calls:

*   [reporter.onBegin()](/docs/api/class-reporter#reporter-on-begin) is called once with a root suite that contains all other suites and tests. Learn more about [suites hierarchy](/docs/api/class-suite "Suite").
*   [reporter.onTestBegin()](/docs/api/class-reporter#reporter-on-test-begin) is called for each test run. It is given a [TestCase](/docs/api/class-testcase "TestCase") that is executed, and a [TestResult](/docs/api/class-testresult "TestResult") that is almost empty. Test result will be populated while the test runs (for example, with steps and stdio) and will get final `status` once the test finishes.
*   [reporter.onStepBegin()](/docs/api/class-reporter#reporter-on-step-begin) and [reporter.onStepEnd()](/docs/api/class-reporter#reporter-on-step-end) are called for each executed step inside the test. When steps are executed, test run has not finished yet.
*   [reporter.onTestEnd()](/docs/api/class-reporter#reporter-on-test-end) is called when test run has finished. By this time, [TestResult](/docs/api/class-testresult "TestResult") is complete and you can use [testResult.status](/docs/api/class-testresult#test-result-status), [testResult.error](/docs/api/class-testresult#test-result-error) and more.
*   [reporter.onEnd()](/docs/api/class-reporter#reporter-on-end) is called once after all tests that should run had finished.
*   [reporter.onExit()](/docs/api/class-reporter#reporter-on-exit) is called immediately before the test runner exits.

Additionally, [reporter.onStdOut()](/docs/api/class-reporter#reporter-on-std-out) and [reporter.onStdErr()](/docs/api/class-reporter#reporter-on-std-err) are called when standard output is produced in the worker process, possibly during a test execution, and [reporter.onError()](/docs/api/class-reporter#reporter-on-error) is called when something went wrong outside of the test execution.

If your custom reporter does not print anything to the terminal, implement [reporter.printsToStdio()](/docs/api/class-reporter#reporter-prints-to-stdio) and return `false`. This way, Playwright will use one of the standard terminal reporters in addition to your custom reporter to enhance user experience.

**Reporter errors**

Playwright will swallow any errors thrown in your custom reporter methods. If you need to detect or fail on reporter errors, you must wrap and handle them yourself.

**Merged report API notes**

When merging multiple [`blob`](/docs/test-reporters#blob-reporter) reports via [`merge-reports`](/docs/test-sharding#merge-reports-cli) CLI command, the same [Reporter](/docs/api/class-reporter "Reporter") API is called to produce final reports and all existing reporters should work without any changes. There some subtle differences though which might affect some custom reporters.

*   Projects from different shards are always kept as separate [TestProject](/docs/api/class-testproject "TestProject") objects. E.g. if project 'Desktop Chrome' was sharded across 5 machines then there will be 5 instances of projects with the same name in the config passed to [reporter.onBegin()](/docs/api/class-reporter#reporter-on-begin).

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### onBegin[â€‹](#reporter-on-begin "Direct link to onBegin")

Added in: v1.10 reporter.onBegin

Called once before running tests. All tests have been already discovered and put into a hierarchy of [Suite](/docs/api/class-suite "Suite")s.

**Usage**

    reporter.onBegin(config, suite);

**Arguments**

*   `config` [FullConfig](/docs/api/class-fullconfig "FullConfig")[#](#reporter-on-begin-option-config)
    
    Resolved configuration.
    
*   `suite` [Suite](/docs/api/class-suite "Suite")[#](#reporter-on-begin-option-suite)
    
    The root suite that contains all projects, files and test cases.
    

* * *

### onEnd[â€‹](#reporter-on-end "Direct link to onEnd")

Added in: v1.10 reporter.onEnd

Called after all tests have been run, or testing has been interrupted. Note that this method may return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") and Playwright Test will await it. Reporter is allowed to override the status and hence affect the exit code of the test runner.

**Usage**

    await reporter.onEnd(result);

**Arguments**

*   `result` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#reporter-on-end-option-result)
    
    *   `status` "passed" | "failed" | "timedout" | "interrupted"
        
        Test run status.
        
    *   `startTime` [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date")
        
        Test run start wall time.
        
    *   `duration` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
        Test run duration in milliseconds.
        
    
    Result of the full test run, `status` can be one of:
    
    *   `'passed'` - Everything went as expected.
    *   `'failed'` - Any test has failed.
    *   `'timedout'` - The [testConfig.globalTimeout](/docs/api/class-testconfig#test-config-global-timeout) has been reached.
    *   `'interrupted'` - Interrupted by the user.

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#reporter-on-end-return)
    *   `status` "passed" | "failed" | "timedout" | "interrupted" _(optional)_

* * *

### onError[â€‹](#reporter-on-error "Direct link to onError")

Added in: v1.10 reporter.onError

Called on some global error, for example unhandled exception in the worker process.

**Usage**

    reporter.onError(error);

**Arguments**

*   `error` [TestError](/docs/api/class-testerror "TestError")[#](#reporter-on-error-option-error)
    
    The error.
    

* * *

### onExit[â€‹](#reporter-on-exit "Direct link to onExit")

Added in: v1.33 reporter.onExit

Called immediately before test runner exists. At this point all the reporters have received the [reporter.onEnd()](/docs/api/class-reporter#reporter-on-end) signal, so all the reports should be build. You can run the code that uploads the reports in this hook.

**Usage**

    await reporter.onExit();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#reporter-on-exit-return)

* * *

### onStdErr[â€‹](#reporter-on-std-err "Direct link to onStdErr")

Added in: v1.10 reporter.onStdErr

Called when something has been written to the standard error in the worker process.

**Usage**

    reporter.onStdErr(chunk, test, result);

**Arguments**

*   `chunk` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#reporter-on-std-err-option-chunk)
    
    Output chunk.
    
*   `test` [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") | [TestCase](/docs/api/class-testcase "TestCase")[#](#reporter-on-std-err-option-test)
    
    Test that was running. Note that output may happen when no test is running, in which case this will be [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void").
    
*   `result` [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") | [TestResult](/docs/api/class-testresult "TestResult")[#](#reporter-on-std-err-option-result)
    
    Result of the test run, this object gets populated while the test runs.
    

* * *

### onStdOut[â€‹](#reporter-on-std-out "Direct link to onStdOut")

Added in: v1.10 reporter.onStdOut

Called when something has been written to the standard output in the worker process.

**Usage**

    reporter.onStdOut(chunk, test, result);

**Arguments**

*   `chunk` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#reporter-on-std-out-option-chunk)
    
    Output chunk.
    
*   `test` [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") | [TestCase](/docs/api/class-testcase "TestCase")[#](#reporter-on-std-out-option-test)
    
    Test that was running. Note that output may happen when no test is running, in which case this will be [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void").
    
*   `result` [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") | [TestResult](/docs/api/class-testresult "TestResult")[#](#reporter-on-std-out-option-result)
    
    Result of the test run, this object gets populated while the test runs.
    

* * *

### onStepBegin[â€‹](#reporter-on-step-begin "Direct link to onStepBegin")

Added in: v1.10 reporter.onStepBegin

Called when a test step started in the worker process.

**Usage**

    reporter.onStepBegin(test, result, step);

**Arguments**

*   `test` [TestCase](/docs/api/class-testcase "TestCase")[#](#reporter-on-step-begin-option-test)
    
    Test that the step belongs to.
    
*   `result` [TestResult](/docs/api/class-testresult "TestResult")[#](#reporter-on-step-begin-option-result)
    
    Result of the test run, this object gets populated while the test runs.
    
*   `step` [TestStep](/docs/api/class-teststep "TestStep")[#](#reporter-on-step-begin-option-step)
    
    Test step instance that has started.
    

* * *

### onStepEnd[â€‹](#reporter-on-step-end "Direct link to onStepEnd")

Added in: v1.10 reporter.onStepEnd

Called when a test step finished in the worker process.

**Usage**

    reporter.onStepEnd(test, result, step);

**Arguments**

*   `test` [TestCase](/docs/api/class-testcase "TestCase")[#](#reporter-on-step-end-option-test)
    
    Test that the step belongs to.
    
*   `result` [TestResult](/docs/api/class-testresult "TestResult")[#](#reporter-on-step-end-option-result)
    
    Result of the test run.
    
*   `step` [TestStep](/docs/api/class-teststep "TestStep")[#](#reporter-on-step-end-option-step)
    
    Test step instance that has finished.
    

* * *

### onTestBegin[â€‹](#reporter-on-test-begin "Direct link to onTestBegin")

Added in: v1.10 reporter.onTestBegin

Called after a test has been started in the worker process.

**Usage**

    reporter.onTestBegin(test, result);

**Arguments**

*   `test` [TestCase](/docs/api/class-testcase "TestCase")[#](#reporter-on-test-begin-option-test)
    
    Test that has been started.
    
*   `result` [TestResult](/docs/api/class-testresult "TestResult")[#](#reporter-on-test-begin-option-result)
    
    Result of the test run, this object gets populated while the test runs.
    

* * *

### onTestEnd[â€‹](#reporter-on-test-end "Direct link to onTestEnd")

Added in: v1.10 reporter.onTestEnd

Called after a test has been finished in the worker process.

**Usage**

    reporter.onTestEnd(test, result);

**Arguments**

*   `test` [TestCase](/docs/api/class-testcase "TestCase")[#](#reporter-on-test-end-option-test)
    
    Test that has been finished.
    
*   `result` [TestResult](/docs/api/class-testresult "TestResult")[#](#reporter-on-test-end-option-result)
    
    Result of the test run.
    

* * *

### printsToStdio[â€‹](#reporter-prints-to-stdio "Direct link to printsToStdio")

Added in: v1.10 reporter.printsToStdio

Whether this reporter uses stdio for reporting. When it does not, Playwright Test could add some output to enhance user experience. If your reporter does not print to the terminal, it is strongly recommended to return `false`.

**Usage**

    reporter.printsToStdio();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#reporter-prints-to-stdio-return)

# Suite

Suite
=====

`Suite` is a group of tests. All tests in Playwright Test form the following hierarchy:

*   Root suite has a child suite for each [FullProject](/docs/api/class-fullproject "FullProject").
    *   Project suite #1. Has a child suite for each test file in the project.
        *   File suite #1
            *   [TestCase](/docs/api/class-testcase "TestCase") #1
            *   [TestCase](/docs/api/class-testcase "TestCase") #2
            *   Suite corresponding to a [test.describe()](/docs/api/class-test#test-describe) group
                *   [TestCase](/docs/api/class-testcase "TestCase") #1 in a group
                *   [TestCase](/docs/api/class-testcase "TestCase") #2 in a group
            *   < more test cases ... >
        *   File suite #2
        *   < more file suites ... >
    *   Project suite #2
    *   < more project suites ... >

Reporter is given a root suite in the [reporter.onBegin()](/docs/api/class-reporter#reporter-on-begin) method.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### allTests[â€‹](#suite-all-tests "Direct link to allTests")

Added in: v1.10 suite.allTests

Returns the list of all test cases in this suite and its descendants, as opposite to [suite.tests](/docs/api/class-suite#suite-tests).

**Usage**

    suite.allTests();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestCase](/docs/api/class-testcase "TestCase")\>[#](#suite-all-tests-return)

* * *

### entries[â€‹](#suite-entries "Direct link to entries")

Added in: v1.44 suite.entries

Test cases and suites defined directly in this suite. The elements are returned in their declaration order. You can differentiate between various entry types by using [testCase.type](/docs/api/class-testcase#test-case-type) and [suite.type](/docs/api/class-suite#suite-type).

**Usage**

    suite.entries();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestCase](/docs/api/class-testcase "TestCase") | [Suite](/docs/api/class-suite "Suite")\>[#](#suite-entries-return)

* * *

### project[â€‹](#suite-project "Direct link to project")

Added in: v1.10 suite.project

Configuration of the project this suite belongs to, or [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void") for the root suite.

**Usage**

    suite.project();

**Returns**

*   [FullProject](/docs/api/class-fullproject "FullProject") | \[undefined\][#](#suite-project-return)

* * *

### titlePath[â€‹](#suite-title-path "Direct link to titlePath")

Added in: v1.10 suite.titlePath

Returns a list of titles from the root down to this suite.

**Usage**

    suite.titlePath();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#suite-title-path-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### location[â€‹](#suite-location "Direct link to location")

Added in: v1.10 suite.location

Location in the source where the suite is defined. Missing for root and project suites.

**Usage**

    suite.location

**Type**

*   [Location](/docs/api/class-location "Location")

* * *

### parent[â€‹](#suite-parent "Direct link to parent")

Added in: v1.10 suite.parent

Parent suite, missing for the root suite.

**Usage**

    suite.parent

**Type**

*   [Suite](/docs/api/class-suite "Suite")

* * *

### suites[â€‹](#suite-suites "Direct link to suites")

Added in: v1.10 suite.suites

Child suites. See [Suite](/docs/api/class-suite "Suite") for the hierarchy of suites.

**Usage**

    suite.suites

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Suite](/docs/api/class-suite "Suite")\>

* * *

### tests[â€‹](#suite-tests "Direct link to tests")

Added in: v1.10 suite.tests

Test cases in the suite. Note that only test cases defined directly in this suite are in the list. Any test cases defined in nested [test.describe()](/docs/api/class-test#test-describe) groups are listed in the child [suite.suites](/docs/api/class-suite#suite-suites).

**Usage**

    suite.tests

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestCase](/docs/api/class-testcase "TestCase")\>

* * *

### title[â€‹](#suite-title "Direct link to title")

Added in: v1.10 suite.title

Suite title.

*   Empty for root suite.
*   Project name for project suite.
*   File path for file suite.
*   Title passed to [test.describe()](/docs/api/class-test#test-describe) for a group suite.

**Usage**

    suite.title

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### type[â€‹](#suite-type "Direct link to type")

Added in: v1.44 suite.type

Returns the type of the suite. The Suites form the following hierarchy: `root` -> `project` -> `file` -> `describe` -> ...`describe` -> `test`.

**Usage**

    suite.type

**Type**

*   "root" | "project" | "file" | "describe"

# TestCase

TestCase
========

`TestCase` corresponds to every [test()](/docs/api/class-test#test-call) call in a test file. When a single [test()](/docs/api/class-test#test-call) is running in multiple projects or repeated multiple times, it will have multiple `TestCase` objects in corresponding projects' suites.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### ok[â€‹](#test-case-ok "Direct link to ok")

Added in: v1.10 testCase.ok

Whether the test is considered running fine. Non-ok tests fail the test run with non-zero exit code.

**Usage**

    testCase.ok();

**Returns**

*   [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean")[#](#test-case-ok-return)

* * *

### outcome[â€‹](#test-case-outcome "Direct link to outcome")

Added in: v1.10 testCase.outcome

Testing outcome for this test. Note that outcome is not the same as [testResult.status](/docs/api/class-testresult#test-result-status):

*   Test that is expected to fail and actually fails is `'expected'`.
*   Test that passes on a second retry is `'flaky'`.

**Usage**

    testCase.outcome();

**Returns**

*   "skipped" | "expected" | "unexpected" | "flaky"[#](#test-case-outcome-return)

* * *

### titlePath[â€‹](#test-case-title-path "Direct link to titlePath")

Added in: v1.10 testCase.titlePath

Returns a list of titles from the root down to this test.

**Usage**

    testCase.titlePath();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#test-case-title-path-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### annotations[â€‹](#test-case-annotations "Direct link to annotations")

Added in: v1.10 testCase.annotations

[testResult.annotations](/docs/api/class-testresult#test-result-annotations) of the last test run.

**Usage**

    testCase.annotations

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Annotation type, for example `'skip'` or `'fail'`.
        
    *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional description.
        
    *   `location` [Location](/docs/api/class-location "Location") _(optional)_
        
        Optional location in the source where the annotation is added.
        

* * *

### expectedStatus[â€‹](#test-case-expected-status "Direct link to expectedStatus")

Added in: v1.10 testCase.expectedStatus

Expected test status.

*   Tests marked as [test.skip()](/docs/api/class-test#test-skip) or [test.fixme()](/docs/api/class-test#test-fixme) are expected to be `'skipped'`.
*   Tests marked as [test.fail()](/docs/api/class-test#test-fail) are expected to be `'failed'`.
*   Other tests are expected to be `'passed'`.

See also [testResult.status](/docs/api/class-testresult#test-result-status) for the actual status.

**Usage**

    testCase.expectedStatus

**Type**

*   "passed" | "failed" | "timedOut" | "skipped" | "interrupted"

* * *

### id[â€‹](#test-case-id "Direct link to id")

Added in: v1.25 testCase.id

A test ID that is computed based on the test file name, test title and project name. The ID is unique within Playwright session.

**Usage**

    testCase.id

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### location[â€‹](#test-case-location "Direct link to location")

Added in: v1.10 testCase.location

Location in the source where the test is defined.

**Usage**

    testCase.location

**Type**

*   [Location](/docs/api/class-location "Location")

* * *

### parent[â€‹](#test-case-parent "Direct link to parent")

Added in: v1.10 testCase.parent

Suite this test case belongs to.

**Usage**

    testCase.parent

**Type**

*   [Suite](/docs/api/class-suite "Suite")

* * *

### repeatEachIndex[â€‹](#test-case-repeat-each-index "Direct link to repeatEachIndex")

Added in: v1.10 testCase.repeatEachIndex

Contains the repeat index when running in "repeat each" mode. This mode is enabled by passing `--repeat-each` to the [command line](/docs/test-cli).

**Usage**

    testCase.repeatEachIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### results[â€‹](#test-case-results "Direct link to results")

Added in: v1.10 testCase.results

Results for each run of this test.

**Usage**

    testCase.results

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestResult](/docs/api/class-testresult "TestResult")\>

* * *

### retries[â€‹](#test-case-retries "Direct link to retries")

Added in: v1.10 testCase.retries

The maximum number of retries given to this test in the configuration.

Learn more about [test retries](/docs/test-retries#retries).

**Usage**

    testCase.retries

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### tags[â€‹](#test-case-tags "Direct link to tags")

Added in: v1.42 testCase.tags

The list of tags defined on the test or suite via [test()](/docs/api/class-test#test-call) or [test.describe()](/docs/api/class-test#test-describe), as well as `@`\-tokens extracted from test and suite titles.

Learn more about [test tags](/docs/test-annotations#tag-tests).

**Usage**

    testCase.tags

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>

* * *

### timeout[â€‹](#test-case-timeout "Direct link to timeout")

Added in: v1.10 testCase.timeout

The timeout given to the test. Affected by [testConfig.timeout](/docs/api/class-testconfig#test-config-timeout), [testProject.timeout](/docs/api/class-testproject#test-project-timeout), [test.setTimeout()](/docs/api/class-test#test-set-timeout), [test.slow()](/docs/api/class-test#test-slow) and [testInfo.setTimeout()](/docs/api/class-testinfo#test-info-set-timeout).

**Usage**

    testCase.timeout

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### title[â€‹](#test-case-title "Direct link to title")

Added in: v1.10 testCase.title

Test title as passed to the [test()](/docs/api/class-test#test-call) call.

**Usage**

    testCase.title

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### type[â€‹](#test-case-type "Direct link to type")

Added in: v1.44 testCase.type

Returns "test". Useful for detecting test cases in [suite.entries()](/docs/api/class-suite#suite-entries).

**Usage**

    testCase.type

**Type**

*   "test"

# TestError

TestError
=========

Information about an error thrown during test execution.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### cause[â€‹](#test-error-cause "Direct link to cause")

Added in: v1.49 testError.cause

Error cause. Set when there is a [cause](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause) for the error. Will be `undefined` if there is no cause or if the cause is not an instance of [Error](https://nodejs.org/api/errors.html#errors_class_error "Error").

**Usage**

    testError.cause

**Type**

*   [TestError](/docs/api/class-testerror "TestError")

* * *

### location[â€‹](#test-error-location "Direct link to location")

Added in: v1.30 testError.location

Error location in the source code.

**Usage**

    testError.location

**Type**

*   [Location](/docs/api/class-location "Location")

* * *

### message[â€‹](#test-error-message "Direct link to message")

Added in: v1.10 testError.message

Error message. Set when [Error](https://nodejs.org/api/errors.html#errors_class_error "Error") (or its subclass) has been thrown.

**Usage**

    testError.message

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### snippet[â€‹](#test-error-snippet "Direct link to snippet")

Added in: v1.33 testError.snippet

Source code snippet with highlighted error.

**Usage**

    testError.snippet

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### stack[â€‹](#test-error-stack "Direct link to stack")

Added in: v1.10 testError.stack

Error stack. Set when [Error](https://nodejs.org/api/errors.html#errors_class_error "Error") (or its subclass) has been thrown.

**Usage**

    testError.stack

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### value[â€‹](#test-error-value "Direct link to value")

Added in: v1.10 testError.value

The value that was thrown. Set when anything except the [Error](https://nodejs.org/api/errors.html#errors_class_error "Error") (or its subclass) has been thrown.

**Usage**

    testError.value

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

# TestResult

TestResult
==========

A result of a single [TestCase](/docs/api/class-testcase "TestCase") run.

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### annotations[â€‹](#test-result-annotations "Direct link to annotations")

Added in: v1.52 testResult.annotations

The list of annotations applicable to the current test. Includes:

*   annotations defined on the test or suite via [test()](/docs/api/class-test#test-call) and [test.describe()](/docs/api/class-test#test-describe);
*   annotations implicitly added by methods [test.skip()](/docs/api/class-test#test-skip), [test.fixme()](/docs/api/class-test#test-fixme) and [test.fail()](/docs/api/class-test#test-fail);
*   annotations appended to [testInfo.annotations](/docs/api/class-testinfo#test-info-annotations) during the test execution.

Annotations are available during test execution through [testInfo.annotations](/docs/api/class-testinfo#test-info-annotations).

Learn more about [test annotations](/docs/test-annotations).

**Usage**

    testResult.annotations

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Annotation type, for example `'skip'` or `'fail'`.
        
    *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional description.
        
    *   `location` [Location](/docs/api/class-location "Location") _(optional)_
        
        Optional location in the source where the annotation is added.
        

* * *

### attachments[â€‹](#test-result-attachments "Direct link to attachments")

Added in: v1.10 testResult.attachments

The list of files or buffers attached during the test execution through [testInfo.attachments](/docs/api/class-testinfo#test-info-attachments).

**Usage**

    testResult.attachments

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Attachment name.
        
    *   `contentType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Content type of this attachment to properly present in the report, for example `'application/json'` or `'image/png'`.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional path on the filesystem to the attached file.
        
    *   `body` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
        
        Optional attachment body used instead of a file.
        

* * *

### duration[â€‹](#test-result-duration "Direct link to duration")

Added in: v1.10 testResult.duration

Running time in milliseconds.

**Usage**

    testResult.duration

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### error[â€‹](#test-result-error "Direct link to error")

Added in: v1.10 testResult.error

First error thrown during test execution, if any. This is equal to the first element in [testResult.errors](/docs/api/class-testresult#test-result-errors).

**Usage**

    testResult.error

**Type**

*   [TestError](/docs/api/class-testerror "TestError")

* * *

### errors[â€‹](#test-result-errors "Direct link to errors")

Added in: v1.10 testResult.errors

Errors thrown during the test execution.

**Usage**

    testResult.errors

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestError](/docs/api/class-testerror "TestError")\>

* * *

### parallelIndex[â€‹](#test-result-parallel-index "Direct link to parallelIndex")

Added in: v1.30 testResult.parallelIndex

The index of the worker between `0` and `workers - 1`. It is guaranteed that workers running at the same time have a different `parallelIndex`.

**Usage**

    testResult.parallelIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### retry[â€‹](#test-result-retry "Direct link to retry")

Added in: v1.10 testResult.retry

When test is retried multiple times, each retry attempt is given a sequential number.

Learn more about [test retries](/docs/test-retries#retries).

**Usage**

    testResult.retry

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### startTime[â€‹](#test-result-start-time "Direct link to startTime")

Added in: v1.10 testResult.startTime

Start time of this particular test run.

**Usage**

    testResult.startTime

**Type**

*   [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date")

* * *

### status[â€‹](#test-result-status "Direct link to status")

Added in: v1.10 testResult.status

The status of this test result. See also [testCase.expectedStatus](/docs/api/class-testcase#test-case-expected-status).

**Usage**

    testResult.status

**Type**

*   "passed" | "failed" | "timedOut" | "skipped" | "interrupted"

* * *

### stderr[â€‹](#test-result-stderr "Direct link to stderr")

Added in: v1.10 testResult.stderr

Anything written to the standard error during the test run.

**Usage**

    testResult.stderr

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>

* * *

### stdout[â€‹](#test-result-stdout "Direct link to stdout")

Added in: v1.10 testResult.stdout

Anything written to the standard output during the test run.

**Usage**

    testResult.stdout

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>

* * *

### steps[â€‹](#test-result-steps "Direct link to steps")

Added in: v1.10 testResult.steps

List of steps inside this test run.

**Usage**

    testResult.steps

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestStep](/docs/api/class-teststep "TestStep")\>

* * *

### workerIndex[â€‹](#test-result-worker-index "Direct link to workerIndex")

Added in: v1.10 testResult.workerIndex

Index of the worker where the test was run. If the test was not run a single time, for example when the user interrupted testing, the only result will have a `workerIndex` equal to `-1`.

Learn more about [parallelism and sharding](/docs/test-parallel) with Playwright Test.

**Usage**

    testResult.workerIndex

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

# TestStep

TestStep
========

Represents a step in the \[TestRun\].

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### titlePath[â€‹](#test-step-title-path "Direct link to titlePath")

Added in: v1.10 testStep.titlePath

Returns a list of step titles from the root step down to this step.

**Usage**

    testStep.titlePath();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\>[#](#test-step-title-path-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### annotations[â€‹](#test-step-annotations "Direct link to annotations")

Added in: v1.51 testStep.annotations

The list of annotations applicable to the current test step.

**Usage**

    testStep.annotations

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `type` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Annotation type, for example `'skip'`.
        
    *   `description` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional description.
        
    *   `location` [Location](/docs/api/class-location "Location") _(optional)_
        
        Optional location in the source where the annotation is added.
        

* * *

### attachments[â€‹](#test-step-attachments "Direct link to attachments")

Added in: v1.50 testStep.attachments

The list of files or buffers attached in the step execution through [testInfo.attach()](/docs/api/class-testinfo#test-info-attach).

**Usage**

    testStep.attachments

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>
    *   `name` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Attachment name.
        
    *   `contentType` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
        
        Content type of this attachment to properly present in the report, for example `'application/json'` or `'image/png'`.
        
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional path on the filesystem to the attached file.
        
    *   `body` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer") _(optional)_
        
        Optional attachment body used instead of a file.
        

* * *

### category[â€‹](#test-step-category "Direct link to category")

Added in: v1.10 testStep.category

Step category to differentiate steps with different origin and verbosity. Built-in categories are:

*   `expect` for expect calls
*   `fixture` for fixtures setup and teardown
*   `hook` for hooks initialization and teardown
*   `pw:api` for Playwright API calls.
*   `test.step` for test.step API calls.
*   `test.attach` for testInfo.attach API calls.

**Usage**

    testStep.category

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

* * *

### duration[â€‹](#test-step-duration "Direct link to duration")

Added in: v1.10 testStep.duration

Running time in milliseconds.

**Usage**

    testStep.duration

**Type**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")

* * *

### error[â€‹](#test-step-error "Direct link to error")

Added in: v1.10 testStep.error

Error thrown during the step execution, if any.

**Usage**

    testStep.error

**Type**

*   [TestError](/docs/api/class-testerror "TestError")

* * *

### location[â€‹](#test-step-location "Direct link to location")

Added in: v1.10 testStep.location

Optional location in the source where the step is defined.

**Usage**

    testStep.location

**Type**

*   [Location](/docs/api/class-location "Location")

* * *

### parent[â€‹](#test-step-parent "Direct link to parent")

Added in: v1.10 testStep.parent

Parent step, if any.

**Usage**

    testStep.parent

**Type**

*   [TestStep](/docs/api/class-teststep "TestStep")

* * *

### startTime[â€‹](#test-step-start-time "Direct link to startTime")

Added in: v1.10 testStep.startTime

Start time of this particular test step.

**Usage**

    testStep.startTime

**Type**

*   [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date "Date")

* * *

### steps[â€‹](#test-step-steps "Direct link to steps")

Added in: v1.10 testStep.steps

List of steps inside this step.

**Usage**

    testStep.steps

**Type**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[TestStep](/docs/api/class-teststep "TestStep")\>

* * *

### title[â€‹](#test-step-title "Direct link to title")

Added in: v1.10 testStep.title

User-friendly test step title.

**Usage**

    testStep.title

**Type**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")

# Android

Android
=======

Playwright has **experimental** support for Android automation. This includes Chrome for Android and Android WebView.

_Requirements_

*   Android device or AVD Emulator.
*   [ADB daemon](https://developer.android.com/studio/command-line/adb) running and authenticated with your device. Typically running `adb devices` is all you need to do.
*   [`Chrome 87`](https://play.google.com/store/apps/details?id=com.android.chrome) or newer installed on the device
*   "Enable command line on non-rooted devices" enabled in `chrome://flags`.

_Known limitations_

*   Raw USB operation is not yet supported, so you need ADB.
*   Device needs to be awake to produce screenshots. Enabling "Stay awake" developer mode will help.
*   We didn't run all the tests against the device, so not everything works.

_How to run_

An example of the Android automation script would be:

    const { _android: android } = require('playwright');(async () => {  // Connect to the device.  const [device] = await android.devices();  console.log(`Model: ${device.model()}`);  console.log(`Serial: ${device.serial()}`);  // Take screenshot of the whole device.  await device.screenshot({ path: 'device.png' });  {    // --------------------- WebView -----------------------    // Launch an application with WebView.    await device.shell('am force-stop org.chromium.webview_shell');    await device.shell('am start org.chromium.webview_shell/.WebViewBrowserActivity');    // Get the WebView.    const webview = await device.webView({ pkg: 'org.chromium.webview_shell' });    // Fill the input box.    await device.fill({      res: 'org.chromium.webview_shell:id/url_field',    }, 'github.com/microsoft/playwright');    await device.press({      res: 'org.chromium.webview_shell:id/url_field',    }, 'Enter');    // Work with WebView's page as usual.    const page = await webview.page();    await page.waitForNavigation({ url: /.*microsoft\/playwright.*/ });    console.log(await page.title());  }  {    // --------------------- Browser -----------------------    // Launch Chrome browser.    await device.shell('am force-stop com.android.chrome');    const context = await device.launchBrowser();    // Use BrowserContext as usual.    const page = await context.newPage();    await page.goto('https://webkit.org/');    console.log(await page.evaluate(() => window.location.href));    await page.screenshot({ path: 'page.png' });    await context.close();  }  // Close the device.  await device.close();})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### connect[â€‹](#android-connect "Direct link to connect")

Added in: v1.28 android.connect

This methods attaches Playwright to an existing Android device. Use [android.launchServer()](/docs/api/class-android#android-launch-server) to launch a new Android server instance.

**Usage**

    await android.connect(wsEndpoint);await android.connect(wsEndpoint, options);

**Arguments**

*   `wsEndpoint` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-connect-option-ws-endpoint)
    
    A browser websocket endpoint to connect to.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `headers` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#android-connect-option-headers)
        
        Additional HTTP headers to be sent with web socket connect request. Optional.
        
    *   `slowMo` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-connect-option-slow-mo)
        
        Slows down Playwright operations by the specified amount of milliseconds. Useful so that you can see what is going on. Defaults to `0`.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-connect-option-timeout)
        
        Maximum time in milliseconds to wait for the connection to be established. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[AndroidDevice](/docs/api/class-androiddevice "AndroidDevice")\>[#](#android-connect-return)

* * *

### devices[â€‹](#android-devices "Direct link to devices")

Added in: v1.9 android.devices

Returns the list of detected Android devices.

**Usage**

    await android.devices();await android.devices(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `host` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.22[#](#android-devices-option-host)
        
        Optional host to establish ADB server connection. Default to `127.0.0.1`.
        
    *   `omitDriverInstall` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.21[#](#android-devices-option-omit-driver-install)
        
        Prevents automatic playwright driver installation on attach. Assumes that the drivers have been installed already.
        
    *   `port` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.20[#](#android-devices-option-port)
        
        Optional port to establish ADB server connection. Default to `5037`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[AndroidDevice](/docs/api/class-androiddevice "AndroidDevice")\>>[#](#android-devices-return)

* * *

### launchServer[â€‹](#android-launch-server "Direct link to launchServer")

Added in: v1.28 android.launchServer

Launches Playwright Android server that clients can connect to. See the following example:

**Usage**

Server Side:

    const { _android } = require('playwright');(async () => {  const browserServer = await _android.launchServer({    // If you have multiple devices connected and want to use a specific one.    // deviceSerialNumber: '<deviceSerialNumber>',  });  const wsEndpoint = browserServer.wsEndpoint();  console.log(wsEndpoint);})();

Client Side:

    const { _android } = require('playwright');(async () => {  const device = await _android.connect('<wsEndpoint>');  console.log(device.model());  console.log(device.serial());  await device.shell('am force-stop com.android.chrome');  const context = await device.launchBrowser();  const page = await context.newPage();  await page.goto('https://webkit.org/');  console.log(await page.evaluate(() => window.location.href));  await page.screenshot({ path: 'page-chrome-1.png' });  await context.close();})();

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `adbHost` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-launch-server-option-adb-host)
        
        Optional host to establish ADB server connection. Default to `127.0.0.1`.
        
    *   `adbPort` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-launch-server-option-adb-port)
        
        Optional port to establish ADB server connection. Default to `5037`.
        
    *   `deviceSerialNumber` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-launch-server-option-device-serial-number)
        
        Optional device serial number to launch the browser on. If not specified, it will throw if multiple devices are connected.
        
    *   `host` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.45[#](#android-launch-server-option-host)
        
        Host to use for the web socket. It is optional and if it is omitted, the server will accept connections on the unspecified IPv6 address (::) when IPv6 is available, or the unspecified IPv4 address (0.0.0.0) otherwise. Consider hardening it with picking a specific interface.
        
    *   `omitDriverInstall` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-launch-server-option-omit-driver-install)
        
        Prevents automatic playwright driver installation on attach. Assumes that the drivers have been installed already.
        
    *   `port` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-launch-server-option-port)
        
        Port to use for the web socket. Defaults to 0 that picks any available port.
        
    *   `wsPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-launch-server-option-ws-path)
        
        Path at which to serve the Android Server. For security, this defaults to an unguessable string.
        
        warning
        
        Any process or web page (including those running in Playwright) with knowledge of the `wsPath` can take control of the OS user. For this reason, you should use an unguessable token when using this option.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[BrowserServer](/docs/api/class-browserserver "BrowserServer")\>[#](#android-launch-server-return)

* * *

### setDefaultTimeout[â€‹](#android-set-default-timeout "Direct link to setDefaultTimeout")

Added in: v1.9 android.setDefaultTimeout

This setting will change the default maximum time for all the methods accepting [timeout](/docs/api/class-android#android-set-default-timeout-option-timeout) option.

**Usage**

    android.setDefaultTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-set-default-timeout-option-timeout)
    
    Maximum time in milliseconds

# AndroidDevice

AndroidDevice
=============

[AndroidDevice](/docs/api/class-androiddevice "AndroidDevice") represents a connected device, either real hardware or emulated. Devices can be obtained using [android.devices()](/docs/api/class-android#android-devices).

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### close[â€‹](#android-device-close "Direct link to close")

Added in: v1.9 androidDevice.close

Disconnects from the device.

**Usage**

    await androidDevice.close();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-close-return)

* * *

### drag[â€‹](#android-device-drag "Direct link to drag")

Added in: v1.9 androidDevice.drag

Drags the widget defined by [selector](/docs/api/class-androiddevice#android-device-drag-option-selector) towards [dest](/docs/api/class-androiddevice#android-device-drag-option-dest) point.

**Usage**

    await androidDevice.drag(selector, dest);await androidDevice.drag(selector, dest, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-drag-option-selector)
    
    Selector to drag.
    
*   `dest` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#android-device-drag-option-dest)
    
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    
    Point to drag to.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `speed` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-drag-option-speed)
        
        Optional speed of the drag in pixels per second.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-drag-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-drag-return)

* * *

### fill[â€‹](#android-device-fill "Direct link to fill")

Added in: v1.9 androidDevice.fill

Fills the specific [selector](/docs/api/class-androiddevice#android-device-fill-option-selector) input box with [text](/docs/api/class-androiddevice#android-device-fill-option-text).

**Usage**

    await androidDevice.fill(selector, text);await androidDevice.fill(selector, text, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-fill-option-selector)
    
    Selector to fill.
    
*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-fill-option-text)
    
    Text to be filled in the input box.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-fill-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-fill-return)

* * *

### fling[â€‹](#android-device-fling "Direct link to fling")

Added in: v1.9 androidDevice.fling

Flings the widget defined by [selector](/docs/api/class-androiddevice#android-device-fling-option-selector) in the specified [direction](/docs/api/class-androiddevice#android-device-fling-option-direction).

**Usage**

    await androidDevice.fling(selector, direction);await androidDevice.fling(selector, direction, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-fling-option-selector)
    
    Selector to fling.
    
*   `direction` "down" | "up" | "left" | "right"[#](#android-device-fling-option-direction)
    
    Fling direction.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `speed` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-fling-option-speed)
        
        Optional speed of the fling in pixels per second.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-fling-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-fling-return)

* * *

### info[â€‹](#android-device-info "Direct link to info")

Added in: v1.9 androidDevice.info

Returns information about a widget defined by [selector](/docs/api/class-androiddevice#android-device-info-option-selector).

**Usage**

    await androidDevice.info(selector);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-info-option-selector)
    
    Selector to return information about.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<\[AndroidElementInfo\]>[#](#android-device-info-return)

* * *

### installApk[â€‹](#android-device-install-apk "Direct link to installApk")

Added in: v1.9 androidDevice.installApk

Installs an apk on the device.

**Usage**

    await androidDevice.installApk(file);await androidDevice.installApk(file, options);

**Arguments**

*   `file` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#android-device-install-apk-option-file)
    
    Either a path to the apk file, or apk file content.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#android-device-install-apk-option-args)
        
        Optional arguments to pass to the `shell:cmd package install` call. Defaults to `-r -t -S`.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-install-apk-return)

* * *

### launchBrowser[â€‹](#android-device-launch-browser "Direct link to launchBrowser")

Added in: v1.9 androidDevice.launchBrowser

Launches Chrome browser on the device, and returns its persistent context.

**Usage**

    await androidDevice.launchBrowser();await androidDevice.launchBrowser(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `acceptDownloads` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-accept-downloads)
        
        Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
        
    *   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.29[#](#android-device-launch-browser-option-args)
        
        warning
        
        Use custom browser args at your own risk, as some of them may break Playwright functionality.
        
        Additional arguments to pass to the browser instance. The list of Chromium flags can be found [here](https://peter.sh/experiments/chromium-command-line-switches/).
        
    *   `baseURL` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-launch-browser-option-base-url)
        
        When using [page.goto()](/docs/api/class-page#page-goto), [page.route()](/docs/api/class-page#page-route), [page.waitForURL()](/docs/api/class-page#page-wait-for-url), [page.waitForRequest()](/docs/api/class-page#page-wait-for-request), or [page.waitForResponse()](/docs/api/class-page#page-wait-for-response) it takes the base URL in consideration by using the [`URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor for building the corresponding URL. Unset by default. Examples:
        
        *   baseURL: `http://localhost:3000` and navigating to `/bar.html` results in `http://localhost:3000/bar.html`
        *   baseURL: `http://localhost:3000/foo/` and navigating to `./bar.html` results in `http://localhost:3000/foo/bar.html`
        *   baseURL: `http://localhost:3000/foo` (without trailing slash) and navigating to `./bar.html` results in `http://localhost:3000/bar.html`
    *   `bypassCSP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-bypass-csp)
        
        Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
        
    *   `colorScheme` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference" _(optional)_[#](#android-device-launch-browser-option-color-scheme)
        
        Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'light'`.
        
    *   `contrast` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "no-preference" | "more" _(optional)_[#](#android-device-launch-browser-option-contrast)
        
        Emulates `'prefers-contrast'` media feature, supported values are `'no-preference'`, `'more'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `deviceScaleFactor` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-launch-browser-option-device-scale-factor)
        
        Specify device scale factor (can be thought of as dpr). Defaults to `1`. Learn more about [emulating devices with device scale factor](/docs/emulation#devices).
        
    *   `extraHTTPHeaders` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#android-device-launch-browser-option-extra-http-headers)
        
        An object containing additional HTTP headers to be sent with every request. Defaults to none.
        
    *   `forcedColors` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "active" | "none" _(optional)_[#](#android-device-launch-browser-option-forced-colors)
        
        Emulates `'forced-colors'` media feature, supported values are `'active'`, `'none'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'none'`.
        
    *   `geolocation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-geolocation)
        
        *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Latitude between -90 and 90.
            
        *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Longitude between -180 and 180.
            
        *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Non-negative accuracy value. Defaults to `0`.
            
    *   `hasTouch` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-has-touch)
        
        Specifies if viewport supports touch events. Defaults to false. Learn more about [mobile emulation](/docs/emulation#devices).
        
    *   `httpCredentials` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-http-credentials)
        
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Restrain sending http credentials on specific origin (scheme://host:port).
            
        *   `send` "unauthorized" | "always" _(optional)_
            
            This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
            
        
        Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `isMobile` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-is-mobile)
        
        Whether the `meta viewport` tag is taken into account and touch events are enabled. isMobile is a part of device, so you don't actually need to set it manually. Defaults to `false` and is not supported in Firefox. Learn more about [mobile emulation](/docs/emulation#ismobile).
        
    *   `javaScriptEnabled` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-java-script-enabled)
        
        Whether or not to enable JavaScript in the context. Defaults to `true`. Learn more about [disabling JavaScript](/docs/emulation#javascript-enabled).
        
    *   `locale` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-launch-browser-option-locale)
        
        Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/docs/emulation#locale--timezone).
        
    *   `logger` [Logger](/docs/api/class-logger "Logger") _(optional)_[#](#android-device-launch-browser-option-logger)
        
        Deprecated
        
        The logs received by the logger are incomplete. Please use tracing instead.
        
        Logger sink for Playwright logging.
        
    *   `offline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-offline)
        
        Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/docs/emulation#offline).
        
    *   `permissions` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#android-device-launch-browser-option-permissions)
        
        A list of permissions to grant to all pages in this context. See [browserContext.grantPermissions()](/docs/api/class-browsercontext#browser-context-grant-permissions) for more details. Defaults to none.
        
    *   `pkg` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-launch-browser-option-pkg)
        
        Optional package name to launch instead of default Chrome for Android.
        
    *   `proxy` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.29[#](#android-device-launch-browser-option-proxy)
        
        *   `server` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example `http://myproxy.com:3128` or `socks5://myproxy.com:3128`. Short form `myproxy.com:3128` is considered an HTTP proxy.
            
        *   `bypass` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional comma-separated domains to bypass proxy, for example `".com, chromium.org, .domain.com"`.
            
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional username to use if HTTP proxy requires authentication.
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Optional password to use if HTTP proxy requires authentication.
            
        
        Network proxy settings.
        
    *   `recordHar` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-record-har)
        
        *   `omitContent` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
            
            Optional setting to control whether to omit request content from the HAR. Defaults to `false`. Deprecated, use `content` policy instead.
            
        *   `content` "omit" | "embed" | "attach" _(optional)_
            
            Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file as per HAR specification. Defaults to `attach` for `.zip` output files and to `embed` for all other file extensions.
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path on the filesystem to write the HAR file to. If the file name ends with `.zip`, `content: 'attach'` is used by default.
            
        *   `mode` "full" | "minimal" _(optional)_
            
            When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
            
        *   `urlFilter` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            A glob or regex pattern to filter requests that are stored in the HAR. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor. Defaults to none.
            
        
        Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into `recordHar.path` file. If not specified, the HAR is not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
        
    *   `recordVideo` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-record-video)
        
        *   `dir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path to the directory to put videos into.
            
        *   `size` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
            
            *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame width.
                
            *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame height.
                
            
            Optional dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
            
        
        Enables video recording for all pages into `recordVideo.dir` directory. If not specified videos are not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
        
    *   `reducedMotion` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "reduce" | "no-preference" _(optional)_[#](#android-device-launch-browser-option-reduced-motion)
        
        Emulates `'prefers-reduced-motion'` media feature, supported values are `'reduce'`, `'no-preference'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'no-preference'`.
        
    *   `screen` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-screen)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent window screen size available inside web page via `window.screen`. Is only used when the [viewport](/docs/api/class-androiddevice#android-device-launch-browser-option-viewport) is set.
        
    *   `serviceWorkers` "allow" | "block" _(optional)_[#](#android-device-launch-browser-option-service-workers)
        
        Whether to allow sites to register Service workers. Defaults to `'allow'`.
        
        *   `'allow'`: [Service Workers](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) can be registered.
        *   `'block'`: Playwright will block all registration of Service Workers.
    *   `strictSelectors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_[#](#android-device-launch-browser-option-strict-selectors)
        
        If set to true, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors that imply single target DOM element will throw when more than one element matches the selector. This option does not affect any Locator APIs (Locators are always strict). Defaults to `false`. See [Locator](/docs/api/class-locator "Locator") to learn more about the strict mode.
        
    *   `timezoneId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-launch-browser-option-timezone-id)
        
        Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
        
    *   `userAgent` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-launch-browser-option-user-agent)
        
        Specific user agent to use in this context.
        
    *   `videoSize` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-video-size)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-androiddevice#android-device-launch-browser-option-record-video) instead.
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame width.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Video frame height.
            
    *   `videosPath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-launch-browser-option-videos-path)
        
        Deprecated
        
        Use [recordVideo](/docs/api/class-androiddevice#android-device-launch-browser-option-record-video) instead.
        
    *   `viewport` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-launch-browser-option-viewport)
        
        *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page width in pixels.
            
        *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            page height in pixels.
            
        
        Emulates consistent viewport for each page. Defaults to an 1280x720 viewport. Use `null` to disable the consistent viewport emulation. Learn more about [viewport emulation](/docs/emulation#viewport).
        
        note
        
        The `null` value opts out from the default presets, makes viewport depend on the host window size defined by the operating system. It makes the execution of the tests non-deterministic.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[BrowserContext](/docs/api/class-browsercontext "BrowserContext")\>[#](#android-device-launch-browser-return)

* * *

### longTap[â€‹](#android-device-long-tap "Direct link to longTap")

Added in: v1.9 androidDevice.longTap

Performs a long tap on the widget defined by [selector](/docs/api/class-androiddevice#android-device-long-tap-option-selector).

**Usage**

    await androidDevice.longTap(selector);await androidDevice.longTap(selector, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-long-tap-option-selector)
    
    Selector to tap on.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-long-tap-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-long-tap-return)

* * *

### model[â€‹](#android-device-model "Direct link to model")

Added in: v1.9 androidDevice.model

Device model.

**Usage**

    androidDevice.model();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-model-return)

* * *

### open[â€‹](#android-device-open "Direct link to open")

Added in: v1.9 androidDevice.open

Launches a process in the shell on the device and returns a socket to communicate with the launched process.

**Usage**

    await androidDevice.open(command);

**Arguments**

*   `command` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-open-option-command)
    
    Shell command to execute.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[AndroidSocket](/docs/api/class-androidsocket "AndroidSocket")\>[#](#android-device-open-return)

* * *

### pinchClose[â€‹](#android-device-pinch-close "Direct link to pinchClose")

Added in: v1.9 androidDevice.pinchClose

Pinches the widget defined by [selector](/docs/api/class-androiddevice#android-device-pinch-close-option-selector) in the closing direction.

**Usage**

    await androidDevice.pinchClose(selector, percent);await androidDevice.pinchClose(selector, percent, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-pinch-close-option-selector)
    
    Selector to pinch close.
    
*   `percent` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-device-pinch-close-option-percent)
    
    The size of the pinch as a percentage of the widget's size.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `speed` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-pinch-close-option-speed)
        
        Optional speed of the pinch in pixels per second.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-pinch-close-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-pinch-close-return)

* * *

### pinchOpen[â€‹](#android-device-pinch-open "Direct link to pinchOpen")

Added in: v1.9 androidDevice.pinchOpen

Pinches the widget defined by [selector](/docs/api/class-androiddevice#android-device-pinch-open-option-selector) in the open direction.

**Usage**

    await androidDevice.pinchOpen(selector, percent);await androidDevice.pinchOpen(selector, percent, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-pinch-open-option-selector)
    
    Selector to pinch open.
    
*   `percent` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-device-pinch-open-option-percent)
    
    The size of the pinch as a percentage of the widget's size.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `speed` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-pinch-open-option-speed)
        
        Optional speed of the pinch in pixels per second.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-pinch-open-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-pinch-open-return)

* * *

### press[â€‹](#android-device-press "Direct link to press")

Added in: v1.9 androidDevice.press

Presses the specific [key](/docs/api/class-androiddevice#android-device-press-option-key) in the widget defined by [selector](/docs/api/class-androiddevice#android-device-press-option-selector).

**Usage**

    await androidDevice.press(selector, key);await androidDevice.press(selector, key, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-press-option-selector)
    
    Selector to press the key in.
    
*   `key` \[AndroidKey\][#](#android-device-press-option-key)
    
    The key to press.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-press-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-press-return)

* * *

### push[â€‹](#android-device-push "Direct link to push")

Added in: v1.9 androidDevice.push

Copies a file to the device.

**Usage**

    await androidDevice.push(file, path);await androidDevice.push(file, path, options);

**Arguments**

*   `file` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#android-device-push-option-file)
    
    Either a path to the file, or file content.
    
*   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-push-option-path)
    
    Path to the file on the device.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `mode` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-push-option-mode)
        
        Optional file mode, defaults to `644` (`rw-r--r--`).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-push-return)

* * *

### screenshot[â€‹](#android-device-screenshot "Direct link to screenshot")

Added in: v1.9 androidDevice.screenshot

Returns the buffer with the captured screenshot of the device.

**Usage**

    await androidDevice.screenshot();await androidDevice.screenshot(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#android-device-screenshot-option-path)
        
        The file path to save the image to. If [path](/docs/api/class-androiddevice#android-device-screenshot-option-path) is a relative path, then it is resolved relative to the current working directory. If no path is provided, the image won't be saved to the disk.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#android-device-screenshot-return)

* * *

### scroll[â€‹](#android-device-scroll "Direct link to scroll")

Added in: v1.9 androidDevice.scroll

Scrolls the widget defined by [selector](/docs/api/class-androiddevice#android-device-scroll-option-selector) in the specified [direction](/docs/api/class-androiddevice#android-device-scroll-option-direction).

**Usage**

    await androidDevice.scroll(selector, direction, percent);await androidDevice.scroll(selector, direction, percent, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-scroll-option-selector)
    
    Selector to scroll.
    
*   `direction` "down" | "up" | "left" | "right"[#](#android-device-scroll-option-direction)
    
    Scroll direction.
    
*   `percent` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-device-scroll-option-percent)
    
    Distance to scroll as a percentage of the widget's size.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `speed` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-scroll-option-speed)
        
        Optional speed of the scroll in pixels per second.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-scroll-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-scroll-return)

* * *

### serial[â€‹](#android-device-serial "Direct link to serial")

Added in: v1.9 androidDevice.serial

Device serial number.

**Usage**

    androidDevice.serial();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-serial-return)

* * *

### setDefaultTimeout[â€‹](#android-device-set-default-timeout "Direct link to setDefaultTimeout")

Added in: v1.9 androidDevice.setDefaultTimeout

This setting will change the default maximum time for all the methods accepting [timeout](/docs/api/class-androiddevice#android-device-set-default-timeout-option-timeout) option.

**Usage**

    androidDevice.setDefaultTimeout(timeout);

**Arguments**

*   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-device-set-default-timeout-option-timeout)
    
    Maximum time in milliseconds
    

* * *

### shell[â€‹](#android-device-shell "Direct link to shell")

Added in: v1.9 androidDevice.shell

Executes a shell command on the device and returns its output.

**Usage**

    await androidDevice.shell(command);

**Arguments**

*   `command` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-shell-option-command)
    
    Shell command to execute.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")\>[#](#android-device-shell-return)

* * *

### swipe[â€‹](#android-device-swipe "Direct link to swipe")

Added in: v1.9 androidDevice.swipe

Swipes the widget defined by [selector](/docs/api/class-androiddevice#android-device-swipe-option-selector) in the specified [direction](/docs/api/class-androiddevice#android-device-swipe-option-direction).

**Usage**

    await androidDevice.swipe(selector, direction, percent);await androidDevice.swipe(selector, direction, percent, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-swipe-option-selector)
    
    Selector to swipe.
    
*   `direction` "down" | "up" | "left" | "right"[#](#android-device-swipe-option-direction)
    
    Swipe direction.
    
*   `percent` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-device-swipe-option-percent)
    
    Distance to swipe as a percentage of the widget's size.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `speed` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-swipe-option-speed)
        
        Optional speed of the swipe in pixels per second.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-swipe-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-swipe-return)

* * *

### tap[â€‹](#android-device-tap "Direct link to tap")

Added in: v1.9 androidDevice.tap

Taps on the widget defined by [selector](/docs/api/class-androiddevice#android-device-tap-option-selector).

**Usage**

    await androidDevice.tap(selector);await androidDevice.tap(selector, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-tap-option-selector)
    
    Selector to tap on.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `duration` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-tap-option-duration)
        
        Optional duration of the tap in milliseconds.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-tap-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-tap-return)

* * *

### wait[â€‹](#android-device-wait "Direct link to wait")

Added in: v1.9 androidDevice.wait

Waits for the specific [selector](/docs/api/class-androiddevice#android-device-wait-option-selector) to either appear or disappear, depending on the [state](/docs/api/class-androiddevice#android-device-wait-option-state).

**Usage**

    await androidDevice.wait(selector);await androidDevice.wait(selector, options);

**Arguments**

*   `selector` \[AndroidSelector\][#](#android-device-wait-option-selector)
    
    Selector to wait for.
    
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    
    *   `state` "gone" _(optional)_[#](#android-device-wait-option-state)
        
        Optional state. Can be either:
        
        *   default - wait for element to be present.
        *   `'gone'` - wait for element to not be present.
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-wait-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-device-wait-return)

* * *

### waitForEvent[â€‹](#android-device-wait-for-event "Direct link to waitForEvent")

Added in: v1.9 androidDevice.waitForEvent

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value.

**Usage**

    await androidDevice.waitForEvent(event);await androidDevice.waitForEvent(event, optionsOrPredicate);

**Arguments**

*   `event` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-device-wait-for-event-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `optionsOrPredicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#android-device-wait-for-event-option-options-or-predicate)
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        receives the event data and resolves to truthy value when the waiting should resolve.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout).
        
    
    Either a predicate that receives an event or an options object. Optional.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#android-device-wait-for-event-return)

* * *

### webView[â€‹](#android-device-web-view "Direct link to webView")

Added in: v1.9 androidDevice.webView

This method waits until [AndroidWebView](/docs/api/class-androidwebview "AndroidWebView") matching the [selector](/docs/api/class-androiddevice#android-device-web-view-option-selector) is opened and returns it. If there is already an open [AndroidWebView](/docs/api/class-androidwebview "AndroidWebView") matching the [selector](/docs/api/class-androiddevice#android-device-web-view-option-selector), returns immediately.

**Usage**

    await androidDevice.webView(selector);await androidDevice.webView(selector, options);

**Arguments**

*   `selector` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#android-device-web-view-option-selector)
    *   `pkg` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional Package identifier.
        
    *   `socketName` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
        
        Optional webview socket name.
        
*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_[#](#android-device-web-view-option-timeout)
        
        Maximum time in milliseconds, defaults to 30 seconds, pass `0` to disable timeout. The default value can be changed by using the [androidDevice.setDefaultTimeout()](/docs/api/class-androiddevice#android-device-set-default-timeout) method.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[AndroidWebView](/docs/api/class-androidwebview "AndroidWebView")\>[#](#android-device-web-view-return)

* * *

### webViews[â€‹](#android-device-web-views "Direct link to webViews")

Added in: v1.9 androidDevice.webViews

Currently open WebViews.

**Usage**

    androidDevice.webViews();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[AndroidWebView](/docs/api/class-androidwebview "AndroidWebView")\>[#](#android-device-web-views-return)

* * *

Properties[â€‹](#properties "Direct link to Properties")
------------------------------------------------------

### input[â€‹](#android-device-input "Direct link to input")

Added in: v1.9 androidDevice.input

**Usage**

    androidDevice.input

**Type**

*   [AndroidInput](/docs/api/class-androidinput "AndroidInput")

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#android-device-event-close "Direct link to on('close')")

Added in: v1.28 androidDevice.on('close')

Emitted when the device connection gets closed.

**Usage**

    androidDevice.on('close', data => {});

**Event data**

*   [AndroidDevice](/docs/api/class-androiddevice "AndroidDevice")

* * *

### on('webview')[â€‹](#android-device-event-web-view "Direct link to on('webview')")

Added in: v1.9 androidDevice.on('webview')

Emitted when a new WebView instance is detected.

**Usage**

    androidDevice.on('webview', data => {});

**Event data**

*   [AndroidWebView](/docs/api/class-androidwebview "AndroidWebView")

# AndroidInput

AndroidInput
============

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### drag[â€‹](#android-input-drag "Direct link to drag")

Added in: v1.9 androidInput.drag

Performs a drag between [from](/docs/api/class-androidinput#android-input-drag-option-from) and [to](/docs/api/class-androidinput#android-input-drag-option-to) points.

**Usage**

    await androidInput.drag(from, to, steps);

**Arguments**

*   `from` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#android-input-drag-option-from)
    
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    
    The start point of the drag.
    
*   `to` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#android-input-drag-option-to)
    
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    
    The end point of the drag.
    
*   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-input-drag-option-steps)
    
    The number of steps in the drag. Each step takes 5 milliseconds to complete.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-input-drag-return)

* * *

### press[â€‹](#android-input-press "Direct link to press")

Added in: v1.9 androidInput.press

Presses the [key](/docs/api/class-androidinput#android-input-press-option-key).

**Usage**

    await androidInput.press(key);

**Arguments**

*   `key` \[AndroidKey\][#](#android-input-press-option-key)
    
    Key to press.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-input-press-return)

* * *

### swipe[â€‹](#android-input-swipe "Direct link to swipe")

Added in: v1.9 androidInput.swipe

Swipes following the path defined by [segments](/docs/api/class-androidinput#android-input-swipe-option-segments).

**Usage**

    await androidInput.swipe(from, segments, steps);

**Arguments**

*   `from` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#android-input-swipe-option-from)
    
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    
    The point to start swiping from.
    
*   `segments` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#android-input-swipe-option-segments)
    
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    
    Points following the [from](/docs/api/class-androidinput#android-input-swipe-option-from) point in the swipe gesture.
    
*   `steps` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-input-swipe-option-steps)
    
    The number of steps for each segment. Each step takes 5 milliseconds to complete, so 100 steps means half a second per each segment.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-input-swipe-return)

* * *

### tap[â€‹](#android-input-tap "Direct link to tap")

Added in: v1.9 androidInput.tap

Taps at the specified [point](/docs/api/class-androidinput#android-input-tap-option-point).

**Usage**

    await androidInput.tap(point);

**Arguments**

*   `point` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")[#](#android-input-tap-option-point)
    
    *   `x` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    *   `y` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
        
    
    The point to tap at.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-input-tap-return)

* * *

### type[â€‹](#android-input-type "Direct link to type")

Added in: v1.9 androidInput.type

Types [text](/docs/api/class-androidinput#android-input-type-option-text) into currently focused widget.

**Usage**

    await androidInput.type(text);

**Arguments**

*   `text` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-input-type-option-text)
    
    Text to type.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-input-type-return)

# AndroidSocket

AndroidSocket
=============

[AndroidSocket](/docs/api/class-androidsocket "AndroidSocket") is a way to communicate with a process launched on the [AndroidDevice](/docs/api/class-androiddevice "AndroidDevice"). Use [androidDevice.open()](/docs/api/class-androiddevice#android-device-open) to open a socket.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### close[â€‹](#android-socket-close "Direct link to close")

Added in: v1.9 androidSocket.close

Closes the socket.

**Usage**

    await androidSocket.close();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-socket-close-return)

* * *

### write[â€‹](#android-socket-write "Direct link to write")

Added in: v1.9 androidSocket.write

Writes some [data](/docs/api/class-androidsocket#android-socket-write-option-data) to the socket.

**Usage**

    await androidSocket.write(data);

**Arguments**

*   `data` [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")[#](#android-socket-write-option-data)
    
    Data to write.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#android-socket-write-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#android-socket-event-close "Direct link to on('close')")

Added in: v1.9 androidSocket.on('close')

Emitted when the socket is closed.

**Usage**

    androidSocket.on('close', data => {});

* * *

### on('data')[â€‹](#android-socket-event-data "Direct link to on('data')")

Added in: v1.9 androidSocket.on('data')

Emitted when data is available to read from the socket.

**Usage**

    androidSocket.on('data', data => {});

**Event data**

*   [Buffer](https://nodejs.org/api/buffer.html#buffer_class_buffer "Buffer")

# AndroidWebView

AndroidWebView
==============

[AndroidWebView](/docs/api/class-androidwebview "AndroidWebView") represents a WebView open on the [AndroidDevice](/docs/api/class-androiddevice "AndroidDevice"). WebView is usually obtained using [androidDevice.webView()](/docs/api/class-androiddevice#android-device-web-view).

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### page[â€‹](#android-web-view-page "Direct link to page")

Added in: v1.9 androidWebView.page

Connects to the WebView and returns a regular Playwright [Page](/docs/api/class-page "Page") to interact with.

**Usage**

    await androidWebView.page();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Page](/docs/api/class-page "Page")\>[#](#android-web-view-page-return)

* * *

### pid[â€‹](#android-web-view-pid "Direct link to pid")

Added in: v1.9 androidWebView.pid

WebView process PID.

**Usage**

    androidWebView.pid();

**Returns**

*   [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")[#](#android-web-view-pid-return)

* * *

### pkg[â€‹](#android-web-view-pkg "Direct link to pkg")

Added in: v1.9 androidWebView.pkg

WebView package identifier.

**Usage**

    androidWebView.pkg();

**Returns**

*   [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#android-web-view-pkg-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#android-web-view-event-close "Direct link to on('close')")

Added in: v1.9 androidWebView.on('close')

Emitted when the WebView is closed.

**Usage**

    androidWebView.on('close', data => {});

# Electron

Electron
========

Playwright has **experimental** support for Electron automation. You can access electron namespace via:

    const { _electron } = require('playwright');

An example of the Electron automation script would be:

    const { _electron: electron } = require('playwright');(async () => {  // Launch Electron app.  const electronApp = await electron.launch({ args: ['main.js'] });  // Evaluation expression in the Electron context.  const appPath = await electronApp.evaluate(async ({ app }) => {    // This runs in the main Electron process, parameter here is always    // the result of the require('electron') in the main app script.    return app.getAppPath();  });  console.log(appPath);  // Get the first window that the app opens, wait if necessary.  const window = await electronApp.firstWindow();  // Print the title.  console.log(await window.title());  // Capture a screenshot.  await window.screenshot({ path: 'intro.png' });  // Direct Electron console to Node terminal.  window.on('console', console.log);  // Click button.  await window.click('text=Click me');  // Exit app.  await electronApp.close();})();

**Supported Electron versions are:**

*   v12.2.0+
*   v13.4.0+
*   v14+

**Known issues:**

If you are not able to launch Electron and it will end up in timeouts during launch, try the following:

*   Ensure that `nodeCliInspect` ([FuseV1Options.EnableNodeCliInspectArguments](https://www.electronjs.org/docs/latest/tutorial/fuses#nodecliinspect)) fuse is **not** set to `false`.

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### launch[â€‹](#electron-launch "Direct link to launch")

Added in: v1.9 electron.launch

Launches electron application specified with the [executablePath](/docs/api/class-electron#electron-launch-option-executable-path).

**Usage**

    await electron.launch();await electron.launch(options);

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `acceptDownloads` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.12[#](#electron-launch-option-accept-downloads)
        
        Whether to automatically download all the attachments. Defaults to `true` where all the downloads are accepted.
        
    *   `args` [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#electron-launch-option-args)
        
        Additional arguments to pass to the application when launching. You typically pass the main script name here.
        
    *   `bypassCSP` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.12[#](#electron-launch-option-bypass-csp)
        
        Toggles bypassing page's Content-Security-Policy. Defaults to `false`.
        
    *   `colorScheme` [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null "null") | "light" | "dark" | "no-preference" _(optional)_ Added in: v1.12[#](#electron-launch-option-color-scheme)
        
        Emulates [prefers-colors-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media feature, supported values are `'light'` and `'dark'`. See [page.emulateMedia()](/docs/api/class-page#page-emulate-media) for more details. Passing `null` resets emulation to system defaults. Defaults to `'light'`.
        
    *   `cwd` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#electron-launch-option-cwd)
        
        Current working directory to launch application from.
        
    *   `env` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_[#](#electron-launch-option-env)
        
        Specifies environment variables that will be visible to Electron. Defaults to `process.env`.
        
    *   `executablePath` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_[#](#electron-launch-option-executable-path)
        
        Launches given Electron application. If not specified, launches the default Electron executable installed in this package, located at `node_modules/.bin/electron`.
        
    *   `extraHTTPHeaders` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string"), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")\> _(optional)_ Added in: v1.12[#](#electron-launch-option-extra-http-headers)
        
        An object containing additional HTTP headers to be sent with every request. Defaults to none.
        
    *   `geolocation` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.12[#](#electron-launch-option-geolocation)
        
        *   `latitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Latitude between -90 and 90.
            
        *   `longitude` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
            
            Longitude between -180 and 180.
            
        *   `accuracy` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
            
            Non-negative accuracy value. Defaults to `0`.
            
    *   `httpCredentials` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.12[#](#electron-launch-option-http-credentials)
        
        *   `username` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `password` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
        *   `origin` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_
            
            Restrain sending http credentials on specific origin (scheme://host:port).
            
        *   `send` "unauthorized" | "always" _(optional)_
            
            This option only applies to the requests sent from corresponding [APIRequestContext](/docs/api/class-apirequestcontext "APIRequestContext") and does not affect requests sent from the browser. `'always'` - `Authorization` header with basic authentication credentials will be sent with the each API request. `'unauthorized` - the credentials are only sent when 401 (Unauthorized) response with `WWW-Authenticate` header is received. Defaults to `'unauthorized'`.
            
        
        Credentials for [HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication). If no origin is specified, the username and password are sent to any servers upon unauthorized responses.
        
    *   `ignoreHTTPSErrors` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.12[#](#electron-launch-option-ignore-https-errors)
        
        Whether to ignore HTTPS errors when sending network requests. Defaults to `false`.
        
    *   `locale` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.12[#](#electron-launch-option-locale)
        
        Specify user locale, for example `en-GB`, `de-DE`, etc. Locale will affect `navigator.language` value, `Accept-Language` request header value as well as number and date formatting rules. Defaults to the system default locale. Learn more about emulation in our [emulation guide](/docs/emulation#locale--timezone).
        
    *   `offline` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_ Added in: v1.12[#](#electron-launch-option-offline)
        
        Whether to emulate network being offline. Defaults to `false`. Learn more about [network emulation](/docs/emulation#offline).
        
    *   `recordHar` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.12[#](#electron-launch-option-record-har)
        
        *   `omitContent` [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type "Boolean") _(optional)_
            
            Optional setting to control whether to omit request content from the HAR. Defaults to `false`. Deprecated, use `content` policy instead.
            
        *   `content` "omit" | "embed" | "attach" _(optional)_
            
            Optional setting to control resource content management. If `omit` is specified, content is not persisted. If `attach` is specified, resources are persisted as separate files or entries in the ZIP archive. If `embed` is specified, content is stored inline the HAR file as per HAR specification. Defaults to `attach` for `.zip` output files and to `embed` for all other file extensions.
            
        *   `path` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path on the filesystem to write the HAR file to. If the file name ends with `.zip`, `content: 'attach'` is used by default.
            
        *   `mode` "full" | "minimal" _(optional)_
            
            When set to `minimal`, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to `full`.
            
        *   `urlFilter` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") | [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp "RegExp") _(optional)_
            
            A glob or regex pattern to filter requests that are stored in the HAR. When a [baseURL](/docs/api/class-browser#browser-new-context-option-base-url) via the context options was provided and the passed URL is a path, it gets merged via the [`new URL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL) constructor. Defaults to none.
            
        
        Enables [HAR](http://www.softwareishard.com/blog/har-12-spec) recording for all pages into `recordHar.path` file. If not specified, the HAR is not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for the HAR to be saved.
        
    *   `recordVideo` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_ Added in: v1.12[#](#electron-launch-option-record-video)
        
        *   `dir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")
            
            Path to the directory to put videos into.
            
        *   `size` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
            
            *   `width` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame width.
                
            *   `height` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number")
                
                Video frame height.
                
            
            Optional dimensions of the recorded videos. If not specified the size will be equal to `viewport` scaled down to fit into 800x800. If `viewport` is not configured explicitly the video size defaults to 800x450. Actual picture of each page will be scaled down if necessary to fit the specified size.
            
        
        Enables video recording for all pages into `recordVideo.dir` directory. If not specified videos are not recorded. Make sure to await [browserContext.close()](/docs/api/class-browsercontext#browser-context-close) for videos to be saved.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.15[#](#electron-launch-option-timeout)
        
        Maximum time in milliseconds to wait for the application to start. Defaults to `30000` (30 seconds). Pass `0` to disable timeout.
        
    *   `timezoneId` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.12[#](#electron-launch-option-timezone-id)
        
        Changes the timezone of the context. See [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1) for a list of supported timezone IDs. Defaults to the system timezone.
        
    *   `tracesDir` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string") _(optional)_ Added in: v1.36[#](#electron-launch-option-traces-dir)
        
        If specified, traces are saved into this directory.
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[ElectronApplication](/docs/api/class-electronapplication "ElectronApplication")\>[#](#electron-launch-return)

# ElectronApplication

ElectronApplication
===================

Electron application representation. You can use [electron.launch()](/docs/api/class-electron#electron-launch) to obtain the application instance. This instance you can control main electron process as well as work with Electron windows:

    const { _electron: electron } = require('playwright');(async () => {  // Launch Electron app.  const electronApp = await electron.launch({ args: ['main.js'] });  // Evaluation expression in the Electron context.  const appPath = await electronApp.evaluate(async ({ app }) => {    // This runs in the main Electron process, parameter here is always    // the result of the require('electron') in the main app script.    return app.getAppPath();  });  console.log(appPath);  // Get the first window that the app opens, wait if necessary.  const window = await electronApp.firstWindow();  // Print the title.  console.log(await window.title());  // Capture a screenshot.  await window.screenshot({ path: 'intro.png' });  // Direct Electron console to Node terminal.  window.on('console', console.log);  // Click button.  await window.click('text=Click me');  // Exit app.  await electronApp.close();})();

* * *

Methods[â€‹](#methods "Direct link to Methods")
---------------------------------------------

### browserWindow[â€‹](#electron-application-browser-window "Direct link to browserWindow")

Added in: v1.11 electronApplication.browserWindow

Returns the BrowserWindow object that corresponds to the given Playwright page.

**Usage**

    await electronApplication.browserWindow(page);

**Arguments**

*   `page` [Page](/docs/api/class-page "Page")[#](#electron-application-browser-window-option-page)
    
    Page to retrieve the window for.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#electron-application-browser-window-return)

* * *

### close[â€‹](#electron-application-close "Direct link to close")

Added in: v1.9 electronApplication.close

Closes Electron application.

**Usage**

    await electronApplication.close();

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined "void")\>[#](#electron-application-close-return)

* * *

### context[â€‹](#electron-application-context "Direct link to context")

Added in: v1.9 electronApplication.context

This method returns browser context that can be used for setting up context-wide routing, etc.

**Usage**

    electronApplication.context();

**Returns**

*   [BrowserContext](/docs/api/class-browsercontext "BrowserContext")[#](#electron-application-context-return)

* * *

### evaluate[â€‹](#electron-application-evaluate "Direct link to evaluate")

Added in: v1.9 electronApplication.evaluate

Returns the return value of [pageFunction](/docs/api/class-electronapplication#electron-application-evaluate-option-expression).

If the function passed to the [electronApplication.evaluate()](/docs/api/class-electronapplication#electron-application-evaluate) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [electronApplication.evaluate()](/docs/api/class-electronapplication#electron-application-evaluate) would wait for the promise to resolve and return its value.

If the function passed to the [electronApplication.evaluate()](/docs/api/class-electronapplication#electron-application-evaluate) returns a non-[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable") value, then [electronApplication.evaluate()](/docs/api/class-electronapplication#electron-application-evaluate) returns `undefined`. Playwright also supports transferring some additional values that are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`.

**Usage**

    await electronApplication.evaluate(pageFunction);await electronApplication.evaluate(pageFunction, arg);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Electron](/docs/api/class-electron "Electron")[#](#electron-application-evaluate-option-expression)
    
    Function to be evaluated in the main Electron process.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#electron-application-evaluate-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-electronapplication#electron-application-evaluate-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Serializable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description "Serializable")\>[#](#electron-application-evaluate-return)

* * *

### evaluateHandle[â€‹](#electron-application-evaluate-handle "Direct link to evaluateHandle")

Added in: v1.9 electronApplication.evaluateHandle

Returns the return value of [pageFunction](/docs/api/class-electronapplication#electron-application-evaluate-handle-option-expression) as a [JSHandle](/docs/api/class-jshandle "JSHandle").

The only difference between [electronApplication.evaluate()](/docs/api/class-electronapplication#electron-application-evaluate) and [electronApplication.evaluateHandle()](/docs/api/class-electronapplication#electron-application-evaluate-handle) is that [electronApplication.evaluateHandle()](/docs/api/class-electronapplication#electron-application-evaluate-handle) returns [JSHandle](/docs/api/class-jshandle "JSHandle").

If the function passed to the [electronApplication.evaluateHandle()](/docs/api/class-electronapplication#electron-application-evaluate-handle) returns a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise"), then [electronApplication.evaluateHandle()](/docs/api/class-electronapplication#electron-application-evaluate-handle) would wait for the promise to resolve and return its value.

**Usage**

    await electronApplication.evaluateHandle(pageFunction);await electronApplication.evaluateHandle(pageFunction, arg);

**Arguments**

*   `pageFunction` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Electron](/docs/api/class-electron "Electron")[#](#electron-application-evaluate-handle-option-expression)
    
    Function to be evaluated in the main Electron process.
    
*   `arg` [EvaluationArgument](/docs/evaluating#evaluation-argument "EvaluationArgument") _(optional)_[#](#electron-application-evaluate-handle-option-arg)
    
    Optional argument to pass to [pageFunction](/docs/api/class-electronapplication#electron-application-evaluate-handle-option-expression).
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[JSHandle](/docs/api/class-jshandle "JSHandle")\>[#](#electron-application-evaluate-handle-return)

* * *

### firstWindow[â€‹](#electron-application-first-window "Direct link to firstWindow")

Added in: v1.9 electronApplication.firstWindow

Convenience method that waits for the first application window to be opened.

**Usage**

    const electronApp = await electron.launch({  args: ['main.js']});const window = await electronApp.firstWindow();// ...

**Arguments**

*   `options` [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_ Added in: v1.33[#](#electron-application-first-window-option-timeout)
        
        Maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout).
        

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Page](/docs/api/class-page "Page")\>[#](#electron-application-first-window-return)

* * *

### process[â€‹](#electron-application-process "Direct link to process")

Added in: v1.21 electronApplication.process

Returns the main process for this Electron Application.

**Usage**

    electronApplication.process();

**Returns**

*   [ChildProcess](https://nodejs.org/api/child_process.html "ChildProcess")[#](#electron-application-process-return)

* * *

### waitForEvent[â€‹](#electron-application-wait-for-event "Direct link to waitForEvent")

Added in: v1.9 electronApplication.waitForEvent

Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the application is closed before the event is fired. Returns the event data value.

**Usage**

    const windowPromise = electronApp.waitForEvent('window');await mainWindow.click('button');const window = await windowPromise;

**Arguments**

*   `event` [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type "string")[#](#electron-application-wait-for-event-option-event)
    
    Event name, same one typically passed into `*.on(event)`.
    
*   `optionsOrPredicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function") | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object") _(optional)_[#](#electron-application-wait-for-event-option-options-or-predicate)
    
    *   `predicate` [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function "Function")
        
        receives the event data and resolves to truthy value when the waiting should resolve.
        
    *   `timeout` [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type "Number") _(optional)_
        
        maximum time to wait for in milliseconds. Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default value can be changed by using the [browserContext.setDefaultTimeout()](/docs/api/class-browsercontext#browser-context-set-default-timeout).
        
    
    Either a predicate that receives an event or an options object. Optional.
    

**Returns**

*   [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise")<[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object "Object")\>[#](#electron-application-wait-for-event-return)

* * *

### windows[â€‹](#electron-application-windows "Direct link to windows")

Added in: v1.9 electronApplication.windows

Convenience method that returns all the opened windows.

**Usage**

    electronApplication.windows();

**Returns**

*   [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array "Array")<[Page](/docs/api/class-page "Page")\>[#](#electron-application-windows-return)

* * *

Events[â€‹](#events "Direct link to Events")
------------------------------------------

### on('close')[â€‹](#electron-application-event-close "Direct link to on('close')")

Added in: v1.9 electronApplication.on('close')

This event is issued when the application process has been terminated.

**Usage**

    electronApplication.on('close', data => {});

* * *

### on('console')[â€‹](#electron-application-event-console "Direct link to on('console')")

Added in: v1.42 electronApplication.on('console')

Emitted when JavaScript within the Electron main process calls one of console API methods, e.g. `console.log` or `console.dir`.

The arguments passed into `console.log` are available on the [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage") event handler argument.

**Usage**

    electronApp.on('console', async msg => {  const values = [];  for (const arg of msg.args())    values.push(await arg.jsonValue());  console.log(...values);});await electronApp.evaluate(() => console.log('hello', 5, { foo: 'bar' }));

**Event data**

*   [ConsoleMessage](/docs/api/class-consolemessage "ConsoleMessage")

* * *

### on('window')[â€‹](#electron-application-event-window "Direct link to on('window')")

Added in: v1.9 electronApplication.on('window')

This event is issued for every window that is created **and loaded** in Electron. It contains a [Page](/docs/api/class-page "Page") that can be used for Playwright automation.

**Usage**

    electronApplication.on('window', data => {});

**Event data**

*   [Page](/docs/api/class-page "Page")

